var $7=Object.defineProperty;var B7=(e,t,n)=>t in e?$7(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Dt=(e,t,n)=>(B7(e,typeof t!="symbol"?t+"":t,n),n);function z7(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const a in r)if(a!=="default"&&!(a in e)){const i=Object.getOwnPropertyDescriptor(r,a);i&&Object.defineProperty(e,a,i.get?i:{enumerable:!0,get:()=>r[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(a){if(a.ep)return;a.ep=!0;const i=n(a);fetch(a.href,i)}})();var pa=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function qa(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function bd(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var a=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,a.get?a:{enumerable:!0,get:function(){return e[r]}})}),n}var GT={exports:{}},Hy={},JT={exports:{}},ln={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fg=Symbol.for("react.element"),W7=Symbol.for("react.portal"),H7=Symbol.for("react.fragment"),q7=Symbol.for("react.strict_mode"),V7=Symbol.for("react.profiler"),U7=Symbol.for("react.provider"),Y7=Symbol.for("react.context"),G7=Symbol.for("react.forward_ref"),J7=Symbol.for("react.suspense"),K7=Symbol.for("react.memo"),X7=Symbol.for("react.lazy"),HP=Symbol.iterator;function Q7(e){return e===null||typeof e!="object"?null:(e=HP&&e[HP]||e["@@iterator"],typeof e=="function"?e:null)}var KT={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},XT=Object.assign,QT={};function Uf(e,t,n){this.props=e,this.context=t,this.refs=QT,this.updater=n||KT}Uf.prototype.isReactComponent={};Uf.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Uf.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function ZT(){}ZT.prototype=Uf.prototype;function r5(e,t,n){this.props=e,this.context=t,this.refs=QT,this.updater=n||KT}var s5=r5.prototype=new ZT;s5.constructor=r5;XT(s5,Uf.prototype);s5.isPureReactComponent=!0;var qP=Array.isArray,eA=Object.prototype.hasOwnProperty,a5={current:null},tA={key:!0,ref:!0,__self:!0,__source:!0};function nA(e,t,n){var r,a={},i=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)eA.call(t,r)&&!tA.hasOwnProperty(r)&&(a[r]=t[r]);var l=arguments.length-2;if(l===1)a.children=n;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];a.children=c}if(e&&e.defaultProps)for(r in l=e.defaultProps,l)a[r]===void 0&&(a[r]=l[r]);return{$$typeof:Fg,type:e,key:i,ref:o,props:a,_owner:a5.current}}function Z7(e,t){return{$$typeof:Fg,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function i5(e){return typeof e=="object"&&e!==null&&e.$$typeof===Fg}function e9(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var VP=/\/+/g;function nw(e,t){return typeof e=="object"&&e!==null&&e.key!=null?e9(""+e.key):t.toString(36)}function s0(e,t,n,r,a){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Fg:case W7:o=!0}}if(o)return o=e,a=a(o),e=r===""?"."+nw(o,0):r,qP(a)?(n="",e!=null&&(n=e.replace(VP,"$&/")+"/"),s0(a,t,n,"",function(d){return d})):a!=null&&(i5(a)&&(a=Z7(a,n+(!a.key||o&&o.key===a.key?"":(""+a.key).replace(VP,"$&/")+"/")+e)),t.push(a)),1;if(o=0,r=r===""?".":r+":",qP(e))for(var l=0;l<e.length;l++){i=e[l];var c=r+nw(i,l);o+=s0(i,t,n,c,a)}else if(c=Q7(e),typeof c=="function")for(e=c.call(e),l=0;!(i=e.next()).done;)i=i.value,c=r+nw(i,l++),o+=s0(i,t,n,c,a);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function Zv(e,t,n){if(e==null)return e;var r=[],a=0;return s0(e,r,"","",function(i){return t.call(n,i,a++)}),r}function t9(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var wa={current:null},a0={transition:null},n9={ReactCurrentDispatcher:wa,ReactCurrentBatchConfig:a0,ReactCurrentOwner:a5};function rA(){throw Error("act(...) is not supported in production builds of React.")}ln.Children={map:Zv,forEach:function(e,t,n){Zv(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Zv(e,function(){t++}),t},toArray:function(e){return Zv(e,function(t){return t})||[]},only:function(e){if(!i5(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ln.Component=Uf;ln.Fragment=H7;ln.Profiler=V7;ln.PureComponent=r5;ln.StrictMode=q7;ln.Suspense=J7;ln.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=n9;ln.act=rA;ln.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=XT({},e.props),a=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=a5.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)eA.call(t,c)&&!tA.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];r.children=l}return{$$typeof:Fg,type:e.type,key:a,ref:i,props:r,_owner:o}};ln.createContext=function(e){return e={$$typeof:Y7,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:U7,_context:e},e.Consumer=e};ln.createElement=nA;ln.createFactory=function(e){var t=nA.bind(null,e);return t.type=e,t};ln.createRef=function(){return{current:null}};ln.forwardRef=function(e){return{$$typeof:G7,render:e}};ln.isValidElement=i5;ln.lazy=function(e){return{$$typeof:X7,_payload:{_status:-1,_result:e},_init:t9}};ln.memo=function(e,t){return{$$typeof:K7,type:e,compare:t===void 0?null:t}};ln.startTransition=function(e){var t=a0.transition;a0.transition={};try{e()}finally{a0.transition=t}};ln.unstable_act=rA;ln.useCallback=function(e,t){return wa.current.useCallback(e,t)};ln.useContext=function(e){return wa.current.useContext(e)};ln.useDebugValue=function(){};ln.useDeferredValue=function(e){return wa.current.useDeferredValue(e)};ln.useEffect=function(e,t){return wa.current.useEffect(e,t)};ln.useId=function(){return wa.current.useId()};ln.useImperativeHandle=function(e,t,n){return wa.current.useImperativeHandle(e,t,n)};ln.useInsertionEffect=function(e,t){return wa.current.useInsertionEffect(e,t)};ln.useLayoutEffect=function(e,t){return wa.current.useLayoutEffect(e,t)};ln.useMemo=function(e,t){return wa.current.useMemo(e,t)};ln.useReducer=function(e,t,n){return wa.current.useReducer(e,t,n)};ln.useRef=function(e){return wa.current.useRef(e)};ln.useState=function(e){return wa.current.useState(e)};ln.useSyncExternalStore=function(e,t,n){return wa.current.useSyncExternalStore(e,t,n)};ln.useTransition=function(){return wa.current.useTransition()};ln.version="18.3.1";JT.exports=ln;var j=JT.exports;const Q=qa(j),qy=z7({__proto__:null,default:Q},[j]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r9=j,s9=Symbol.for("react.element"),a9=Symbol.for("react.fragment"),i9=Object.prototype.hasOwnProperty,o9=r9.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l9={key:!0,ref:!0,__self:!0,__source:!0};function sA(e,t,n){var r,a={},i=null,o=null;n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)i9.call(t,r)&&!l9.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)a[r]===void 0&&(a[r]=t[r]);return{$$typeof:s9,type:e,key:i,ref:o,props:a,_owner:o9.current}}Hy.Fragment=a9;Hy.jsx=sA;Hy.jsxs=sA;GT.exports=Hy;var s=GT.exports,L2={},aA={exports:{}},ui={},iA={exports:{}},oA={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(V,B){var Y=V.length;V.push(B);e:for(;0<Y;){var $=Y-1>>>1,I=V[$];if(0<a(I,B))V[$]=B,V[Y]=I,Y=$;else break e}}function n(V){return V.length===0?null:V[0]}function r(V){if(V.length===0)return null;var B=V[0],Y=V.pop();if(Y!==B){V[0]=Y;e:for(var $=0,I=V.length,U=I>>>1;$<U;){var q=2*($+1)-1,X=V[q],te=q+1,ae=V[te];if(0>a(X,Y))te<I&&0>a(ae,X)?(V[$]=ae,V[te]=Y,$=te):(V[$]=X,V[q]=Y,$=q);else if(te<I&&0>a(ae,Y))V[$]=ae,V[te]=Y,$=te;else break e}}return B}function a(V,B){var Y=V.sortIndex-B.sortIndex;return Y!==0?Y:V.id-B.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],d=[],u=1,h=null,f=3,p=!1,y=!1,g=!1,x=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(V){for(var B=n(d);B!==null;){if(B.callback===null)r(d);else if(B.startTime<=V)r(d),B.sortIndex=B.expirationTime,t(c,B);else break;B=n(d)}}function C(V){if(g=!1,b(V),!y)if(n(c)!==null)y=!0,z(S);else{var B=n(d);B!==null&&F(C,B.startTime-V)}}function S(V,B){y=!1,g&&(g=!1,m(N),N=-1),p=!0;var Y=f;try{for(b(B),h=n(c);h!==null&&(!(h.expirationTime>B)||V&&!T());){var $=h.callback;if(typeof $=="function"){h.callback=null,f=h.priorityLevel;var I=$(h.expirationTime<=B);B=e.unstable_now(),typeof I=="function"?h.callback=I:h===n(c)&&r(c),b(B)}else r(c);h=n(c)}if(h!==null)var U=!0;else{var q=n(d);q!==null&&F(C,q.startTime-B),U=!1}return U}finally{h=null,f=Y,p=!1}}var P=!1,D=null,N=-1,M=5,L=-1;function T(){return!(e.unstable_now()-L<M)}function E(){if(D!==null){var V=e.unstable_now();L=V;var B=!0;try{B=D(!0,V)}finally{B?A():(P=!1,D=null)}}else P=!1}var A;if(typeof v=="function")A=function(){v(E)};else if(typeof MessageChannel<"u"){var O=new MessageChannel,W=O.port2;O.port1.onmessage=E,A=function(){W.postMessage(null)}}else A=function(){x(E,0)};function z(V){D=V,P||(P=!0,A())}function F(V,B){N=x(function(){V(e.unstable_now())},B)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(V){V.callback=null},e.unstable_continueExecution=function(){y||p||(y=!0,z(S))},e.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<V?Math.floor(1e3/V):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(V){switch(f){case 1:case 2:case 3:var B=3;break;default:B=f}var Y=f;f=B;try{return V()}finally{f=Y}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(V,B){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var Y=f;f=V;try{return B()}finally{f=Y}},e.unstable_scheduleCallback=function(V,B,Y){var $=e.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?$+Y:$):Y=$,V){case 1:var I=-1;break;case 2:I=250;break;case 5:I=1073741823;break;case 4:I=1e4;break;default:I=5e3}return I=Y+I,V={id:u++,callback:B,priorityLevel:V,startTime:Y,expirationTime:I,sortIndex:-1},Y>$?(V.sortIndex=Y,t(d,V),n(c)===null&&V===n(d)&&(g?(m(N),N=-1):g=!0,F(C,Y-$))):(V.sortIndex=I,t(c,V),y||p||(y=!0,z(S))),V},e.unstable_shouldYield=T,e.unstable_wrapCallback=function(V){var B=f;return function(){var Y=f;f=B;try{return V.apply(this,arguments)}finally{f=Y}}}})(oA);iA.exports=oA;var c9=iA.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var d9=j,li=c9;function lt(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var lA=new Set,Vm={};function Vu(e,t){bf(e,t),bf(e+"Capture",t)}function bf(e,t){for(Vm[e]=t,e=0;e<t.length;e++)lA.add(t[e])}var Hl=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),I2=Object.prototype.hasOwnProperty,u9=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,UP={},YP={};function h9(e){return I2.call(YP,e)?!0:I2.call(UP,e)?!1:u9.test(e)?YP[e]=!0:(UP[e]=!0,!1)}function f9(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function p9(e,t,n,r){if(t===null||typeof t>"u"||f9(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function ja(e,t,n,r,a,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var ks={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){ks[e]=new ja(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];ks[t]=new ja(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){ks[e]=new ja(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){ks[e]=new ja(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){ks[e]=new ja(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){ks[e]=new ja(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){ks[e]=new ja(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){ks[e]=new ja(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){ks[e]=new ja(e,5,!1,e.toLowerCase(),null,!1,!1)});var o5=/[\-:]([a-z])/g;function l5(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(o5,l5);ks[t]=new ja(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(o5,l5);ks[t]=new ja(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(o5,l5);ks[t]=new ja(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){ks[e]=new ja(e,1,!1,e.toLowerCase(),null,!1,!1)});ks.xlinkHref=new ja("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){ks[e]=new ja(e,1,!1,e.toLowerCase(),null,!0,!0)});function c5(e,t,n,r){var a=ks.hasOwnProperty(t)?ks[t]:null;(a!==null?a.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(p9(t,n,a,r)&&(n=null),r||a===null?h9(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):a.mustUseProperty?e[a.propertyName]=n===null?a.type===3?!1:"":n:(t=a.attributeName,r=a.attributeNamespace,n===null?e.removeAttribute(t):(a=a.type,n=a===3||a===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var tc=d9.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ex=Symbol.for("react.element"),Uh=Symbol.for("react.portal"),Yh=Symbol.for("react.fragment"),d5=Symbol.for("react.strict_mode"),O2=Symbol.for("react.profiler"),cA=Symbol.for("react.provider"),dA=Symbol.for("react.context"),u5=Symbol.for("react.forward_ref"),F2=Symbol.for("react.suspense"),$2=Symbol.for("react.suspense_list"),h5=Symbol.for("react.memo"),Ic=Symbol.for("react.lazy"),uA=Symbol.for("react.offscreen"),GP=Symbol.iterator;function Wp(e){return e===null||typeof e!="object"?null:(e=GP&&e[GP]||e["@@iterator"],typeof e=="function"?e:null)}var Nr=Object.assign,rw;function um(e){if(rw===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);rw=t&&t[1]||""}return`
`+rw+e}var sw=!1;function aw(e,t){if(!e||sw)return"";sw=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var r=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){r=d}e.call(t.prototype)}else{try{throw Error()}catch(d){r=d}e()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var a=d.stack.split(`
`),i=r.stack.split(`
`),o=a.length-1,l=i.length-1;1<=o&&0<=l&&a[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(a[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||a[o]!==i[l]){var c=`
`+a[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=l);break}}}finally{sw=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?um(e):""}function m9(e){switch(e.tag){case 5:return um(e.type);case 16:return um("Lazy");case 13:return um("Suspense");case 19:return um("SuspenseList");case 0:case 2:case 15:return e=aw(e.type,!1),e;case 11:return e=aw(e.type.render,!1),e;case 1:return e=aw(e.type,!0),e;default:return""}}function B2(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Yh:return"Fragment";case Uh:return"Portal";case O2:return"Profiler";case d5:return"StrictMode";case F2:return"Suspense";case $2:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case dA:return(e.displayName||"Context")+".Consumer";case cA:return(e._context.displayName||"Context")+".Provider";case u5:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case h5:return t=e.displayName||null,t!==null?t:B2(e.type)||"Memo";case Ic:t=e._payload,e=e._init;try{return B2(e(t))}catch{}}return null}function g9(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return B2(t);case 8:return t===d5?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function cd(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function hA(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function v9(e){var t=hA(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var a=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function tx(e){e._valueTracker||(e._valueTracker=v9(e))}function fA(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=hA(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function _0(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function z2(e,t){var n=t.checked;return Nr({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function JP(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=cd(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function pA(e,t){t=t.checked,t!=null&&c5(e,"checked",t,!1)}function W2(e,t){pA(e,t);var n=cd(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?H2(e,t.type,n):t.hasOwnProperty("defaultValue")&&H2(e,t.type,cd(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function KP(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function H2(e,t,n){(t!=="number"||_0(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var hm=Array.isArray;function cf(e,t,n,r){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&r&&(e[n].defaultSelected=!0)}else{for(n=""+cd(n),t=null,a=0;a<e.length;a++){if(e[a].value===n){e[a].selected=!0,r&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function q2(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(lt(91));return Nr({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function XP(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(lt(92));if(hm(n)){if(1<n.length)throw Error(lt(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:cd(n)}}function mA(e,t){var n=cd(t.value),r=cd(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function QP(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function gA(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function V2(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?gA(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var nx,vA=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,a){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(nx=nx||document.createElement("div"),nx.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=nx.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Um(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var bm={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},x9=["Webkit","ms","Moz","O"];Object.keys(bm).forEach(function(e){x9.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),bm[t]=bm[e]})});function xA(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||bm.hasOwnProperty(e)&&bm[e]?(""+t).trim():t+"px"}function yA(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,a=xA(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,a):e[n]=a}}var y9=Nr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function U2(e,t){if(t){if(y9[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(lt(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(lt(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(lt(61))}if(t.style!=null&&typeof t.style!="object")throw Error(lt(62))}}function Y2(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var G2=null;function f5(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var J2=null,df=null,uf=null;function ZP(e){if(e=zg(e)){if(typeof J2!="function")throw Error(lt(280));var t=e.stateNode;t&&(t=Jy(t),J2(e.stateNode,e.type,t))}}function bA(e){df?uf?uf.push(e):uf=[e]:df=e}function wA(){if(df){var e=df,t=uf;if(uf=df=null,ZP(e),t)for(e=0;e<t.length;e++)ZP(t[e])}}function jA(e,t){return e(t)}function NA(){}var iw=!1;function SA(e,t,n){if(iw)return e(t,n);iw=!0;try{return jA(e,t,n)}finally{iw=!1,(df!==null||uf!==null)&&(NA(),wA())}}function Ym(e,t){var n=e.stateNode;if(n===null)return null;var r=Jy(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(lt(231,t,typeof n));return n}var K2=!1;if(Hl)try{var Hp={};Object.defineProperty(Hp,"passive",{get:function(){K2=!0}}),window.addEventListener("test",Hp,Hp),window.removeEventListener("test",Hp,Hp)}catch{K2=!1}function b9(e,t,n,r,a,i,o,l,c){var d=Array.prototype.slice.call(arguments,3);try{t.apply(n,d)}catch(u){this.onError(u)}}var wm=!1,M0=null,R0=!1,X2=null,w9={onError:function(e){wm=!0,M0=e}};function j9(e,t,n,r,a,i,o,l,c){wm=!1,M0=null,b9.apply(w9,arguments)}function N9(e,t,n,r,a,i,o,l,c){if(j9.apply(this,arguments),wm){if(wm){var d=M0;wm=!1,M0=null}else throw Error(lt(198));R0||(R0=!0,X2=d)}}function Uu(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function CA(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function eD(e){if(Uu(e)!==e)throw Error(lt(188))}function S9(e){var t=e.alternate;if(!t){if(t=Uu(e),t===null)throw Error(lt(188));return t!==e?null:e}for(var n=e,r=t;;){var a=n.return;if(a===null)break;var i=a.alternate;if(i===null){if(r=a.return,r!==null){n=r;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===n)return eD(a),e;if(i===r)return eD(a),t;i=i.sibling}throw Error(lt(188))}if(n.return!==r.return)n=a,r=i;else{for(var o=!1,l=a.child;l;){if(l===n){o=!0,n=a,r=i;break}if(l===r){o=!0,r=a,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,r=a;break}if(l===r){o=!0,r=i,n=a;break}l=l.sibling}if(!o)throw Error(lt(189))}}if(n.alternate!==r)throw Error(lt(190))}if(n.tag!==3)throw Error(lt(188));return n.stateNode.current===n?e:t}function PA(e){return e=S9(e),e!==null?DA(e):null}function DA(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=DA(e);if(t!==null)return t;e=e.sibling}return null}var kA=li.unstable_scheduleCallback,tD=li.unstable_cancelCallback,C9=li.unstable_shouldYield,P9=li.unstable_requestPaint,Ir=li.unstable_now,D9=li.unstable_getCurrentPriorityLevel,p5=li.unstable_ImmediatePriority,EA=li.unstable_UserBlockingPriority,L0=li.unstable_NormalPriority,k9=li.unstable_LowPriority,TA=li.unstable_IdlePriority,Vy=null,Wo=null;function E9(e){if(Wo&&typeof Wo.onCommitFiberRoot=="function")try{Wo.onCommitFiberRoot(Vy,e,void 0,(e.current.flags&128)===128)}catch{}}var ao=Math.clz32?Math.clz32:_9,T9=Math.log,A9=Math.LN2;function _9(e){return e>>>=0,e===0?32:31-(T9(e)/A9|0)|0}var rx=64,sx=4194304;function fm(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function I0(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,a=e.suspendedLanes,i=e.pingedLanes,o=n&268435455;if(o!==0){var l=o&~a;l!==0?r=fm(l):(i&=o,i!==0&&(r=fm(i)))}else o=n&~a,o!==0?r=fm(o):i!==0&&(r=fm(i));if(r===0)return 0;if(t!==0&&t!==r&&!(t&a)&&(a=r&-r,i=t&-t,a>=i||a===16&&(i&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-ao(t),a=1<<n,r|=e[n],t&=~a;return r}function M9(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function R9(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,a=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-ao(i),l=1<<o,c=a[o];c===-1?(!(l&n)||l&r)&&(a[o]=M9(l,t)):c<=t&&(e.expiredLanes|=l),i&=~l}}function Q2(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function AA(){var e=rx;return rx<<=1,!(rx&4194240)&&(rx=64),e}function ow(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function $g(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-ao(t),e[t]=n}function L9(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var a=31-ao(n),i=1<<a;t[a]=0,r[a]=-1,e[a]=-1,n&=~i}}function m5(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ao(n),a=1<<r;a&t|e[r]&t&&(e[r]|=t),n&=~a}}var En=0;function _A(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var MA,g5,RA,LA,IA,Z2=!1,ax=[],Jc=null,Kc=null,Xc=null,Gm=new Map,Jm=new Map,Bc=[],I9="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function nD(e,t){switch(e){case"focusin":case"focusout":Jc=null;break;case"dragenter":case"dragleave":Kc=null;break;case"mouseover":case"mouseout":Xc=null;break;case"pointerover":case"pointerout":Gm.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Jm.delete(t.pointerId)}}function qp(e,t,n,r,a,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[a]},t!==null&&(t=zg(t),t!==null&&g5(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function O9(e,t,n,r,a){switch(t){case"focusin":return Jc=qp(Jc,e,t,n,r,a),!0;case"dragenter":return Kc=qp(Kc,e,t,n,r,a),!0;case"mouseover":return Xc=qp(Xc,e,t,n,r,a),!0;case"pointerover":var i=a.pointerId;return Gm.set(i,qp(Gm.get(i)||null,e,t,n,r,a)),!0;case"gotpointercapture":return i=a.pointerId,Jm.set(i,qp(Jm.get(i)||null,e,t,n,r,a)),!0}return!1}function OA(e){var t=iu(e.target);if(t!==null){var n=Uu(t);if(n!==null){if(t=n.tag,t===13){if(t=CA(n),t!==null){e.blockedOn=t,IA(e.priority,function(){RA(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function i0(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=ej(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);G2=r,n.target.dispatchEvent(r),G2=null}else return t=zg(n),t!==null&&g5(t),e.blockedOn=n,!1;t.shift()}return!0}function rD(e,t,n){i0(e)&&n.delete(t)}function F9(){Z2=!1,Jc!==null&&i0(Jc)&&(Jc=null),Kc!==null&&i0(Kc)&&(Kc=null),Xc!==null&&i0(Xc)&&(Xc=null),Gm.forEach(rD),Jm.forEach(rD)}function Vp(e,t){e.blockedOn===t&&(e.blockedOn=null,Z2||(Z2=!0,li.unstable_scheduleCallback(li.unstable_NormalPriority,F9)))}function Km(e){function t(a){return Vp(a,e)}if(0<ax.length){Vp(ax[0],e);for(var n=1;n<ax.length;n++){var r=ax[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Jc!==null&&Vp(Jc,e),Kc!==null&&Vp(Kc,e),Xc!==null&&Vp(Xc,e),Gm.forEach(t),Jm.forEach(t),n=0;n<Bc.length;n++)r=Bc[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Bc.length&&(n=Bc[0],n.blockedOn===null);)OA(n),n.blockedOn===null&&Bc.shift()}var hf=tc.ReactCurrentBatchConfig,O0=!0;function $9(e,t,n,r){var a=En,i=hf.transition;hf.transition=null;try{En=1,v5(e,t,n,r)}finally{En=a,hf.transition=i}}function B9(e,t,n,r){var a=En,i=hf.transition;hf.transition=null;try{En=4,v5(e,t,n,r)}finally{En=a,hf.transition=i}}function v5(e,t,n,r){if(O0){var a=ej(e,t,n,r);if(a===null)vw(e,t,r,F0,n),nD(e,r);else if(O9(a,e,t,n,r))r.stopPropagation();else if(nD(e,r),t&4&&-1<I9.indexOf(e)){for(;a!==null;){var i=zg(a);if(i!==null&&MA(i),i=ej(e,t,n,r),i===null&&vw(e,t,r,F0,n),i===a)break;a=i}a!==null&&r.stopPropagation()}else vw(e,t,r,null,n)}}var F0=null;function ej(e,t,n,r){if(F0=null,e=f5(r),e=iu(e),e!==null)if(t=Uu(e),t===null)e=null;else if(n=t.tag,n===13){if(e=CA(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return F0=e,null}function FA(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(D9()){case p5:return 1;case EA:return 4;case L0:case k9:return 16;case TA:return 536870912;default:return 16}default:return 16}}var qc=null,x5=null,o0=null;function $A(){if(o0)return o0;var e,t=x5,n=t.length,r,a="value"in qc?qc.value:qc.textContent,i=a.length;for(e=0;e<n&&t[e]===a[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===a[i-r];r++);return o0=a.slice(e,1<r?1-r:void 0)}function l0(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ix(){return!0}function sD(){return!1}function hi(e){function t(n,r,a,i,o){this._reactName=n,this._targetInst=a,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?ix:sD,this.isPropagationStopped=sD,this}return Nr(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ix)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ix)},persist:function(){},isPersistent:ix}),t}var Yf={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},y5=hi(Yf),Bg=Nr({},Yf,{view:0,detail:0}),z9=hi(Bg),lw,cw,Up,Uy=Nr({},Bg,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:b5,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Up&&(Up&&e.type==="mousemove"?(lw=e.screenX-Up.screenX,cw=e.screenY-Up.screenY):cw=lw=0,Up=e),lw)},movementY:function(e){return"movementY"in e?e.movementY:cw}}),aD=hi(Uy),W9=Nr({},Uy,{dataTransfer:0}),H9=hi(W9),q9=Nr({},Bg,{relatedTarget:0}),dw=hi(q9),V9=Nr({},Yf,{animationName:0,elapsedTime:0,pseudoElement:0}),U9=hi(V9),Y9=Nr({},Yf,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),G9=hi(Y9),J9=Nr({},Yf,{data:0}),iD=hi(J9),K9={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},X9={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Q9={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Z9(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Q9[e])?!!t[e]:!1}function b5(){return Z9}var eB=Nr({},Bg,{key:function(e){if(e.key){var t=K9[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=l0(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?X9[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:b5,charCode:function(e){return e.type==="keypress"?l0(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?l0(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),tB=hi(eB),nB=Nr({},Uy,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),oD=hi(nB),rB=Nr({},Bg,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:b5}),sB=hi(rB),aB=Nr({},Yf,{propertyName:0,elapsedTime:0,pseudoElement:0}),iB=hi(aB),oB=Nr({},Uy,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),lB=hi(oB),cB=[9,13,27,32],w5=Hl&&"CompositionEvent"in window,jm=null;Hl&&"documentMode"in document&&(jm=document.documentMode);var dB=Hl&&"TextEvent"in window&&!jm,BA=Hl&&(!w5||jm&&8<jm&&11>=jm),lD=String.fromCharCode(32),cD=!1;function zA(e,t){switch(e){case"keyup":return cB.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function WA(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Gh=!1;function uB(e,t){switch(e){case"compositionend":return WA(t);case"keypress":return t.which!==32?null:(cD=!0,lD);case"textInput":return e=t.data,e===lD&&cD?null:e;default:return null}}function hB(e,t){if(Gh)return e==="compositionend"||!w5&&zA(e,t)?(e=$A(),o0=x5=qc=null,Gh=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return BA&&t.locale!=="ko"?null:t.data;default:return null}}var fB={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function dD(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!fB[e.type]:t==="textarea"}function HA(e,t,n,r){bA(r),t=$0(t,"onChange"),0<t.length&&(n=new y5("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Nm=null,Xm=null;function pB(e){e6(e,0)}function Yy(e){var t=Xh(e);if(fA(t))return e}function mB(e,t){if(e==="change")return t}var qA=!1;if(Hl){var uw;if(Hl){var hw="oninput"in document;if(!hw){var uD=document.createElement("div");uD.setAttribute("oninput","return;"),hw=typeof uD.oninput=="function"}uw=hw}else uw=!1;qA=uw&&(!document.documentMode||9<document.documentMode)}function hD(){Nm&&(Nm.detachEvent("onpropertychange",VA),Xm=Nm=null)}function VA(e){if(e.propertyName==="value"&&Yy(Xm)){var t=[];HA(t,Xm,e,f5(e)),SA(pB,t)}}function gB(e,t,n){e==="focusin"?(hD(),Nm=t,Xm=n,Nm.attachEvent("onpropertychange",VA)):e==="focusout"&&hD()}function vB(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Yy(Xm)}function xB(e,t){if(e==="click")return Yy(t)}function yB(e,t){if(e==="input"||e==="change")return Yy(t)}function bB(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var lo=typeof Object.is=="function"?Object.is:bB;function Qm(e,t){if(lo(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var a=n[r];if(!I2.call(t,a)||!lo(e[a],t[a]))return!1}return!0}function fD(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function pD(e,t){var n=fD(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=fD(n)}}function UA(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?UA(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function YA(){for(var e=window,t=_0();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=_0(e.document)}return t}function j5(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function wB(e){var t=YA(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&UA(n.ownerDocument.documentElement,n)){if(r!==null&&j5(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=n.textContent.length,i=Math.min(r.start,a);r=r.end===void 0?i:Math.min(r.end,a),!e.extend&&i>r&&(a=r,r=i,i=a),a=pD(n,i);var o=pD(n,r);a&&o&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var jB=Hl&&"documentMode"in document&&11>=document.documentMode,Jh=null,tj=null,Sm=null,nj=!1;function mD(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;nj||Jh==null||Jh!==_0(r)||(r=Jh,"selectionStart"in r&&j5(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Sm&&Qm(Sm,r)||(Sm=r,r=$0(tj,"onSelect"),0<r.length&&(t=new y5("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Jh)))}function ox(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Kh={animationend:ox("Animation","AnimationEnd"),animationiteration:ox("Animation","AnimationIteration"),animationstart:ox("Animation","AnimationStart"),transitionend:ox("Transition","TransitionEnd")},fw={},GA={};Hl&&(GA=document.createElement("div").style,"AnimationEvent"in window||(delete Kh.animationend.animation,delete Kh.animationiteration.animation,delete Kh.animationstart.animation),"TransitionEvent"in window||delete Kh.transitionend.transition);function Gy(e){if(fw[e])return fw[e];if(!Kh[e])return e;var t=Kh[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in GA)return fw[e]=t[n];return e}var JA=Gy("animationend"),KA=Gy("animationiteration"),XA=Gy("animationstart"),QA=Gy("transitionend"),ZA=new Map,gD="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function wd(e,t){ZA.set(e,t),Vu(t,[e])}for(var pw=0;pw<gD.length;pw++){var mw=gD[pw],NB=mw.toLowerCase(),SB=mw[0].toUpperCase()+mw.slice(1);wd(NB,"on"+SB)}wd(JA,"onAnimationEnd");wd(KA,"onAnimationIteration");wd(XA,"onAnimationStart");wd("dblclick","onDoubleClick");wd("focusin","onFocus");wd("focusout","onBlur");wd(QA,"onTransitionEnd");bf("onMouseEnter",["mouseout","mouseover"]);bf("onMouseLeave",["mouseout","mouseover"]);bf("onPointerEnter",["pointerout","pointerover"]);bf("onPointerLeave",["pointerout","pointerover"]);Vu("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Vu("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Vu("onBeforeInput",["compositionend","keypress","textInput","paste"]);Vu("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Vu("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Vu("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var pm="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),CB=new Set("cancel close invalid load scroll toggle".split(" ").concat(pm));function vD(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,N9(r,t,void 0,e),e.currentTarget=null}function e6(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],a=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var o=r.length-1;0<=o;o--){var l=r[o],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==i&&a.isPropagationStopped())break e;vD(a,l,d),i=c}else for(o=0;o<r.length;o++){if(l=r[o],c=l.instance,d=l.currentTarget,l=l.listener,c!==i&&a.isPropagationStopped())break e;vD(a,l,d),i=c}}}if(R0)throw e=X2,R0=!1,X2=null,e}function Un(e,t){var n=t[oj];n===void 0&&(n=t[oj]=new Set);var r=e+"__bubble";n.has(r)||(t6(t,e,2,!1),n.add(r))}function gw(e,t,n){var r=0;t&&(r|=4),t6(n,e,r,t)}var lx="_reactListening"+Math.random().toString(36).slice(2);function Zm(e){if(!e[lx]){e[lx]=!0,lA.forEach(function(n){n!=="selectionchange"&&(CB.has(n)||gw(n,!1,e),gw(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[lx]||(t[lx]=!0,gw("selectionchange",!1,t))}}function t6(e,t,n,r){switch(FA(t)){case 1:var a=$9;break;case 4:a=B9;break;default:a=v5}n=a.bind(null,t,n,e),a=void 0,!K2||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),r?a!==void 0?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):a!==void 0?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function vw(e,t,n,r,a){var i=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===a||l.nodeType===8&&l.parentNode===a)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===a||c.nodeType===8&&c.parentNode===a))return;o=o.return}for(;l!==null;){if(o=iu(l),o===null)return;if(c=o.tag,c===5||c===6){r=i=o;continue e}l=l.parentNode}}r=r.return}SA(function(){var d=i,u=f5(n),h=[];e:{var f=ZA.get(e);if(f!==void 0){var p=y5,y=e;switch(e){case"keypress":if(l0(n)===0)break e;case"keydown":case"keyup":p=tB;break;case"focusin":y="focus",p=dw;break;case"focusout":y="blur",p=dw;break;case"beforeblur":case"afterblur":p=dw;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=aD;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=H9;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=sB;break;case JA:case KA:case XA:p=U9;break;case QA:p=iB;break;case"scroll":p=z9;break;case"wheel":p=lB;break;case"copy":case"cut":case"paste":p=G9;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=oD}var g=(t&4)!==0,x=!g&&e==="scroll",m=g?f!==null?f+"Capture":null:f;g=[];for(var v=d,b;v!==null;){b=v;var C=b.stateNode;if(b.tag===5&&C!==null&&(b=C,m!==null&&(C=Ym(v,m),C!=null&&g.push(eg(v,C,b)))),x)break;v=v.return}0<g.length&&(f=new p(f,y,null,n,u),h.push({event:f,listeners:g}))}}if(!(t&7)){e:{if(f=e==="mouseover"||e==="pointerover",p=e==="mouseout"||e==="pointerout",f&&n!==G2&&(y=n.relatedTarget||n.fromElement)&&(iu(y)||y[ql]))break e;if((p||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,p?(y=n.relatedTarget||n.toElement,p=d,y=y?iu(y):null,y!==null&&(x=Uu(y),y!==x||y.tag!==5&&y.tag!==6)&&(y=null)):(p=null,y=d),p!==y)){if(g=aD,C="onMouseLeave",m="onMouseEnter",v="mouse",(e==="pointerout"||e==="pointerover")&&(g=oD,C="onPointerLeave",m="onPointerEnter",v="pointer"),x=p==null?f:Xh(p),b=y==null?f:Xh(y),f=new g(C,v+"leave",p,n,u),f.target=x,f.relatedTarget=b,C=null,iu(u)===d&&(g=new g(m,v+"enter",y,n,u),g.target=b,g.relatedTarget=x,C=g),x=C,p&&y)t:{for(g=p,m=y,v=0,b=g;b;b=Ah(b))v++;for(b=0,C=m;C;C=Ah(C))b++;for(;0<v-b;)g=Ah(g),v--;for(;0<b-v;)m=Ah(m),b--;for(;v--;){if(g===m||m!==null&&g===m.alternate)break t;g=Ah(g),m=Ah(m)}g=null}else g=null;p!==null&&xD(h,f,p,g,!1),y!==null&&x!==null&&xD(h,x,y,g,!0)}}e:{if(f=d?Xh(d):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var S=mB;else if(dD(f))if(qA)S=yB;else{S=vB;var P=gB}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(S=xB);if(S&&(S=S(e,d))){HA(h,S,n,u);break e}P&&P(e,f,d),e==="focusout"&&(P=f._wrapperState)&&P.controlled&&f.type==="number"&&H2(f,"number",f.value)}switch(P=d?Xh(d):window,e){case"focusin":(dD(P)||P.contentEditable==="true")&&(Jh=P,tj=d,Sm=null);break;case"focusout":Sm=tj=Jh=null;break;case"mousedown":nj=!0;break;case"contextmenu":case"mouseup":case"dragend":nj=!1,mD(h,n,u);break;case"selectionchange":if(jB)break;case"keydown":case"keyup":mD(h,n,u)}var D;if(w5)e:{switch(e){case"compositionstart":var N="onCompositionStart";break e;case"compositionend":N="onCompositionEnd";break e;case"compositionupdate":N="onCompositionUpdate";break e}N=void 0}else Gh?zA(e,n)&&(N="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(N="onCompositionStart");N&&(BA&&n.locale!=="ko"&&(Gh||N!=="onCompositionStart"?N==="onCompositionEnd"&&Gh&&(D=$A()):(qc=u,x5="value"in qc?qc.value:qc.textContent,Gh=!0)),P=$0(d,N),0<P.length&&(N=new iD(N,e,null,n,u),h.push({event:N,listeners:P}),D?N.data=D:(D=WA(n),D!==null&&(N.data=D)))),(D=dB?uB(e,n):hB(e,n))&&(d=$0(d,"onBeforeInput"),0<d.length&&(u=new iD("onBeforeInput","beforeinput",null,n,u),h.push({event:u,listeners:d}),u.data=D))}e6(h,t)})}function eg(e,t,n){return{instance:e,listener:t,currentTarget:n}}function $0(e,t){for(var n=t+"Capture",r=[];e!==null;){var a=e,i=a.stateNode;a.tag===5&&i!==null&&(a=i,i=Ym(e,n),i!=null&&r.unshift(eg(e,i,a)),i=Ym(e,t),i!=null&&r.push(eg(e,i,a))),e=e.return}return r}function Ah(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function xD(e,t,n,r,a){for(var i=t._reactName,o=[];n!==null&&n!==r;){var l=n,c=l.alternate,d=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&d!==null&&(l=d,a?(c=Ym(n,i),c!=null&&o.unshift(eg(n,c,l))):a||(c=Ym(n,i),c!=null&&o.push(eg(n,c,l)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var PB=/\r\n?/g,DB=/\u0000|\uFFFD/g;function yD(e){return(typeof e=="string"?e:""+e).replace(PB,`
`).replace(DB,"")}function cx(e,t,n){if(t=yD(t),yD(e)!==t&&n)throw Error(lt(425))}function B0(){}var rj=null,sj=null;function aj(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var ij=typeof setTimeout=="function"?setTimeout:void 0,kB=typeof clearTimeout=="function"?clearTimeout:void 0,bD=typeof Promise=="function"?Promise:void 0,EB=typeof queueMicrotask=="function"?queueMicrotask:typeof bD<"u"?function(e){return bD.resolve(null).then(e).catch(TB)}:ij;function TB(e){setTimeout(function(){throw e})}function xw(e,t){var n=t,r=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&a.nodeType===8)if(n=a.data,n==="/$"){if(r===0){e.removeChild(a),Km(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=a}while(n);Km(t)}function Qc(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function wD(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Gf=Math.random().toString(36).slice(2),Mo="__reactFiber$"+Gf,tg="__reactProps$"+Gf,ql="__reactContainer$"+Gf,oj="__reactEvents$"+Gf,AB="__reactListeners$"+Gf,_B="__reactHandles$"+Gf;function iu(e){var t=e[Mo];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ql]||n[Mo]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=wD(e);e!==null;){if(n=e[Mo])return n;e=wD(e)}return t}e=n,n=e.parentNode}return null}function zg(e){return e=e[Mo]||e[ql],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Xh(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(lt(33))}function Jy(e){return e[tg]||null}var lj=[],Qh=-1;function jd(e){return{current:e}}function Kn(e){0>Qh||(e.current=lj[Qh],lj[Qh]=null,Qh--)}function zn(e,t){Qh++,lj[Qh]=e.current,e.current=t}var dd={},Zs=jd(dd),Ia=jd(!1),Pu=dd;function wf(e,t){var n=e.type.contextTypes;if(!n)return dd;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var a={},i;for(i in n)a[i]=t[i];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Oa(e){return e=e.childContextTypes,e!=null}function z0(){Kn(Ia),Kn(Zs)}function jD(e,t,n){if(Zs.current!==dd)throw Error(lt(168));zn(Zs,t),zn(Ia,n)}function n6(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var a in r)if(!(a in t))throw Error(lt(108,g9(e)||"Unknown",a));return Nr({},n,r)}function W0(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||dd,Pu=Zs.current,zn(Zs,e),zn(Ia,Ia.current),!0}function ND(e,t,n){var r=e.stateNode;if(!r)throw Error(lt(169));n?(e=n6(e,t,Pu),r.__reactInternalMemoizedMergedChildContext=e,Kn(Ia),Kn(Zs),zn(Zs,e)):Kn(Ia),zn(Ia,n)}var El=null,Ky=!1,yw=!1;function r6(e){El===null?El=[e]:El.push(e)}function MB(e){Ky=!0,r6(e)}function Nd(){if(!yw&&El!==null){yw=!0;var e=0,t=En;try{var n=El;for(En=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}El=null,Ky=!1}catch(a){throw El!==null&&(El=El.slice(e+1)),kA(p5,Nd),a}finally{En=t,yw=!1}}return null}var Zh=[],ef=0,H0=null,q0=0,Ci=[],Pi=0,Du=null,_l=1,Ml="";function Xd(e,t){Zh[ef++]=q0,Zh[ef++]=H0,H0=e,q0=t}function s6(e,t,n){Ci[Pi++]=_l,Ci[Pi++]=Ml,Ci[Pi++]=Du,Du=e;var r=_l;e=Ml;var a=32-ao(r)-1;r&=~(1<<a),n+=1;var i=32-ao(t)+a;if(30<i){var o=a-a%5;i=(r&(1<<o)-1).toString(32),r>>=o,a-=o,_l=1<<32-ao(t)+a|n<<a|r,Ml=i+e}else _l=1<<i|n<<a|r,Ml=e}function N5(e){e.return!==null&&(Xd(e,1),s6(e,1,0))}function S5(e){for(;e===H0;)H0=Zh[--ef],Zh[ef]=null,q0=Zh[--ef],Zh[ef]=null;for(;e===Du;)Du=Ci[--Pi],Ci[Pi]=null,Ml=Ci[--Pi],Ci[Pi]=null,_l=Ci[--Pi],Ci[Pi]=null}var ii=null,si=null,Zn=!1,no=null;function a6(e,t){var n=Di(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function SD(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,ii=e,si=Qc(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,ii=e,si=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Du!==null?{id:_l,overflow:Ml}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Di(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,ii=e,si=null,!0):!1;default:return!1}}function cj(e){return(e.mode&1)!==0&&(e.flags&128)===0}function dj(e){if(Zn){var t=si;if(t){var n=t;if(!SD(e,t)){if(cj(e))throw Error(lt(418));t=Qc(n.nextSibling);var r=ii;t&&SD(e,t)?a6(r,n):(e.flags=e.flags&-4097|2,Zn=!1,ii=e)}}else{if(cj(e))throw Error(lt(418));e.flags=e.flags&-4097|2,Zn=!1,ii=e}}}function CD(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;ii=e}function dx(e){if(e!==ii)return!1;if(!Zn)return CD(e),Zn=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!aj(e.type,e.memoizedProps)),t&&(t=si)){if(cj(e))throw i6(),Error(lt(418));for(;t;)a6(e,t),t=Qc(t.nextSibling)}if(CD(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(lt(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){si=Qc(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}si=null}}else si=ii?Qc(e.stateNode.nextSibling):null;return!0}function i6(){for(var e=si;e;)e=Qc(e.nextSibling)}function jf(){si=ii=null,Zn=!1}function C5(e){no===null?no=[e]:no.push(e)}var RB=tc.ReactCurrentBatchConfig;function Yp(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(lt(309));var r=n.stateNode}if(!r)throw Error(lt(147,e));var a=r,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var l=a.refs;o===null?delete l[i]:l[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(lt(284));if(!n._owner)throw Error(lt(290,e))}return e}function ux(e,t){throw e=Object.prototype.toString.call(t),Error(lt(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function PD(e){var t=e._init;return t(e._payload)}function o6(e){function t(m,v){if(e){var b=m.deletions;b===null?(m.deletions=[v],m.flags|=16):b.push(v)}}function n(m,v){if(!e)return null;for(;v!==null;)t(m,v),v=v.sibling;return null}function r(m,v){for(m=new Map;v!==null;)v.key!==null?m.set(v.key,v):m.set(v.index,v),v=v.sibling;return m}function a(m,v){return m=nd(m,v),m.index=0,m.sibling=null,m}function i(m,v,b){return m.index=b,e?(b=m.alternate,b!==null?(b=b.index,b<v?(m.flags|=2,v):b):(m.flags|=2,v)):(m.flags|=1048576,v)}function o(m){return e&&m.alternate===null&&(m.flags|=2),m}function l(m,v,b,C){return v===null||v.tag!==6?(v=Pw(b,m.mode,C),v.return=m,v):(v=a(v,b),v.return=m,v)}function c(m,v,b,C){var S=b.type;return S===Yh?u(m,v,b.props.children,C,b.key):v!==null&&(v.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Ic&&PD(S)===v.type)?(C=a(v,b.props),C.ref=Yp(m,v,b),C.return=m,C):(C=m0(b.type,b.key,b.props,null,m.mode,C),C.ref=Yp(m,v,b),C.return=m,C)}function d(m,v,b,C){return v===null||v.tag!==4||v.stateNode.containerInfo!==b.containerInfo||v.stateNode.implementation!==b.implementation?(v=Dw(b,m.mode,C),v.return=m,v):(v=a(v,b.children||[]),v.return=m,v)}function u(m,v,b,C,S){return v===null||v.tag!==7?(v=pu(b,m.mode,C,S),v.return=m,v):(v=a(v,b),v.return=m,v)}function h(m,v,b){if(typeof v=="string"&&v!==""||typeof v=="number")return v=Pw(""+v,m.mode,b),v.return=m,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case ex:return b=m0(v.type,v.key,v.props,null,m.mode,b),b.ref=Yp(m,null,v),b.return=m,b;case Uh:return v=Dw(v,m.mode,b),v.return=m,v;case Ic:var C=v._init;return h(m,C(v._payload),b)}if(hm(v)||Wp(v))return v=pu(v,m.mode,b,null),v.return=m,v;ux(m,v)}return null}function f(m,v,b,C){var S=v!==null?v.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return S!==null?null:l(m,v,""+b,C);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case ex:return b.key===S?c(m,v,b,C):null;case Uh:return b.key===S?d(m,v,b,C):null;case Ic:return S=b._init,f(m,v,S(b._payload),C)}if(hm(b)||Wp(b))return S!==null?null:u(m,v,b,C,null);ux(m,b)}return null}function p(m,v,b,C,S){if(typeof C=="string"&&C!==""||typeof C=="number")return m=m.get(b)||null,l(v,m,""+C,S);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case ex:return m=m.get(C.key===null?b:C.key)||null,c(v,m,C,S);case Uh:return m=m.get(C.key===null?b:C.key)||null,d(v,m,C,S);case Ic:var P=C._init;return p(m,v,b,P(C._payload),S)}if(hm(C)||Wp(C))return m=m.get(b)||null,u(v,m,C,S,null);ux(v,C)}return null}function y(m,v,b,C){for(var S=null,P=null,D=v,N=v=0,M=null;D!==null&&N<b.length;N++){D.index>N?(M=D,D=null):M=D.sibling;var L=f(m,D,b[N],C);if(L===null){D===null&&(D=M);break}e&&D&&L.alternate===null&&t(m,D),v=i(L,v,N),P===null?S=L:P.sibling=L,P=L,D=M}if(N===b.length)return n(m,D),Zn&&Xd(m,N),S;if(D===null){for(;N<b.length;N++)D=h(m,b[N],C),D!==null&&(v=i(D,v,N),P===null?S=D:P.sibling=D,P=D);return Zn&&Xd(m,N),S}for(D=r(m,D);N<b.length;N++)M=p(D,m,N,b[N],C),M!==null&&(e&&M.alternate!==null&&D.delete(M.key===null?N:M.key),v=i(M,v,N),P===null?S=M:P.sibling=M,P=M);return e&&D.forEach(function(T){return t(m,T)}),Zn&&Xd(m,N),S}function g(m,v,b,C){var S=Wp(b);if(typeof S!="function")throw Error(lt(150));if(b=S.call(b),b==null)throw Error(lt(151));for(var P=S=null,D=v,N=v=0,M=null,L=b.next();D!==null&&!L.done;N++,L=b.next()){D.index>N?(M=D,D=null):M=D.sibling;var T=f(m,D,L.value,C);if(T===null){D===null&&(D=M);break}e&&D&&T.alternate===null&&t(m,D),v=i(T,v,N),P===null?S=T:P.sibling=T,P=T,D=M}if(L.done)return n(m,D),Zn&&Xd(m,N),S;if(D===null){for(;!L.done;N++,L=b.next())L=h(m,L.value,C),L!==null&&(v=i(L,v,N),P===null?S=L:P.sibling=L,P=L);return Zn&&Xd(m,N),S}for(D=r(m,D);!L.done;N++,L=b.next())L=p(D,m,N,L.value,C),L!==null&&(e&&L.alternate!==null&&D.delete(L.key===null?N:L.key),v=i(L,v,N),P===null?S=L:P.sibling=L,P=L);return e&&D.forEach(function(E){return t(m,E)}),Zn&&Xd(m,N),S}function x(m,v,b,C){if(typeof b=="object"&&b!==null&&b.type===Yh&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case ex:e:{for(var S=b.key,P=v;P!==null;){if(P.key===S){if(S=b.type,S===Yh){if(P.tag===7){n(m,P.sibling),v=a(P,b.props.children),v.return=m,m=v;break e}}else if(P.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Ic&&PD(S)===P.type){n(m,P.sibling),v=a(P,b.props),v.ref=Yp(m,P,b),v.return=m,m=v;break e}n(m,P);break}else t(m,P);P=P.sibling}b.type===Yh?(v=pu(b.props.children,m.mode,C,b.key),v.return=m,m=v):(C=m0(b.type,b.key,b.props,null,m.mode,C),C.ref=Yp(m,v,b),C.return=m,m=C)}return o(m);case Uh:e:{for(P=b.key;v!==null;){if(v.key===P)if(v.tag===4&&v.stateNode.containerInfo===b.containerInfo&&v.stateNode.implementation===b.implementation){n(m,v.sibling),v=a(v,b.children||[]),v.return=m,m=v;break e}else{n(m,v);break}else t(m,v);v=v.sibling}v=Dw(b,m.mode,C),v.return=m,m=v}return o(m);case Ic:return P=b._init,x(m,v,P(b._payload),C)}if(hm(b))return y(m,v,b,C);if(Wp(b))return g(m,v,b,C);ux(m,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,v!==null&&v.tag===6?(n(m,v.sibling),v=a(v,b),v.return=m,m=v):(n(m,v),v=Pw(b,m.mode,C),v.return=m,m=v),o(m)):n(m,v)}return x}var Nf=o6(!0),l6=o6(!1),V0=jd(null),U0=null,tf=null,P5=null;function D5(){P5=tf=U0=null}function k5(e){var t=V0.current;Kn(V0),e._currentValue=t}function uj(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function ff(e,t){U0=e,P5=tf=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(La=!0),e.firstContext=null)}function _i(e){var t=e._currentValue;if(P5!==e)if(e={context:e,memoizedValue:t,next:null},tf===null){if(U0===null)throw Error(lt(308));tf=e,U0.dependencies={lanes:0,firstContext:e}}else tf=tf.next=e;return t}var ou=null;function E5(e){ou===null?ou=[e]:ou.push(e)}function c6(e,t,n,r){var a=t.interleaved;return a===null?(n.next=n,E5(t)):(n.next=a.next,a.next=n),t.interleaved=n,Vl(e,r)}function Vl(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Oc=!1;function T5(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function d6(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Il(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Zc(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,pn&2){var a=r.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),r.pending=t,Vl(e,n)}return a=r.interleaved,a===null?(t.next=t,E5(r)):(t.next=a.next,a.next=t),r.interleaved=t,Vl(e,n)}function c0(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,m5(e,n)}}function DD(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var a=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?a=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?a=i=t:i=i.next=t}else a=i=t;n={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Y0(e,t,n,r){var a=e.updateQueue;Oc=!1;var i=a.firstBaseUpdate,o=a.lastBaseUpdate,l=a.shared.pending;if(l!==null){a.shared.pending=null;var c=l,d=c.next;c.next=null,o===null?i=d:o.next=d,o=c;var u=e.alternate;u!==null&&(u=u.updateQueue,l=u.lastBaseUpdate,l!==o&&(l===null?u.firstBaseUpdate=d:l.next=d,u.lastBaseUpdate=c))}if(i!==null){var h=a.baseState;o=0,u=d=c=null,l=i;do{var f=l.lane,p=l.eventTime;if((r&f)===f){u!==null&&(u=u.next={eventTime:p,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var y=e,g=l;switch(f=t,p=n,g.tag){case 1:if(y=g.payload,typeof y=="function"){h=y.call(p,h,f);break e}h=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=g.payload,f=typeof y=="function"?y.call(p,h,f):y,f==null)break e;h=Nr({},h,f);break e;case 2:Oc=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,f=a.effects,f===null?a.effects=[l]:f.push(l))}else p={eventTime:p,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},u===null?(d=u=p,c=h):u=u.next=p,o|=f;if(l=l.next,l===null){if(l=a.shared.pending,l===null)break;f=l,l=f.next,f.next=null,a.lastBaseUpdate=f,a.shared.pending=null}}while(1);if(u===null&&(c=h),a.baseState=c,a.firstBaseUpdate=d,a.lastBaseUpdate=u,t=a.shared.interleaved,t!==null){a=t;do o|=a.lane,a=a.next;while(a!==t)}else i===null&&(a.shared.lanes=0);Eu|=o,e.lanes=o,e.memoizedState=h}}function kD(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],a=r.callback;if(a!==null){if(r.callback=null,r=n,typeof a!="function")throw Error(lt(191,a));a.call(r)}}}var Wg={},Ho=jd(Wg),ng=jd(Wg),rg=jd(Wg);function lu(e){if(e===Wg)throw Error(lt(174));return e}function A5(e,t){switch(zn(rg,t),zn(ng,e),zn(Ho,Wg),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:V2(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=V2(t,e)}Kn(Ho),zn(Ho,t)}function Sf(){Kn(Ho),Kn(ng),Kn(rg)}function u6(e){lu(rg.current);var t=lu(Ho.current),n=V2(t,e.type);t!==n&&(zn(ng,e),zn(Ho,n))}function _5(e){ng.current===e&&(Kn(Ho),Kn(ng))}var fr=jd(0);function G0(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var bw=[];function M5(){for(var e=0;e<bw.length;e++)bw[e]._workInProgressVersionPrimary=null;bw.length=0}var d0=tc.ReactCurrentDispatcher,ww=tc.ReactCurrentBatchConfig,ku=0,jr=null,es=null,ps=null,J0=!1,Cm=!1,sg=0,LB=0;function Fs(){throw Error(lt(321))}function R5(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!lo(e[n],t[n]))return!1;return!0}function L5(e,t,n,r,a,i){if(ku=i,jr=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,d0.current=e===null||e.memoizedState===null?$B:BB,e=n(r,a),Cm){i=0;do{if(Cm=!1,sg=0,25<=i)throw Error(lt(301));i+=1,ps=es=null,t.updateQueue=null,d0.current=zB,e=n(r,a)}while(Cm)}if(d0.current=K0,t=es!==null&&es.next!==null,ku=0,ps=es=jr=null,J0=!1,t)throw Error(lt(300));return e}function I5(){var e=sg!==0;return sg=0,e}function Eo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ps===null?jr.memoizedState=ps=e:ps=ps.next=e,ps}function Mi(){if(es===null){var e=jr.alternate;e=e!==null?e.memoizedState:null}else e=es.next;var t=ps===null?jr.memoizedState:ps.next;if(t!==null)ps=t,es=e;else{if(e===null)throw Error(lt(310));es=e,e={memoizedState:es.memoizedState,baseState:es.baseState,baseQueue:es.baseQueue,queue:es.queue,next:null},ps===null?jr.memoizedState=ps=e:ps=ps.next=e}return ps}function ag(e,t){return typeof t=="function"?t(e):t}function jw(e){var t=Mi(),n=t.queue;if(n===null)throw Error(lt(311));n.lastRenderedReducer=e;var r=es,a=r.baseQueue,i=n.pending;if(i!==null){if(a!==null){var o=a.next;a.next=i.next,i.next=o}r.baseQueue=a=i,n.pending=null}if(a!==null){i=a.next,r=r.baseState;var l=o=null,c=null,d=i;do{var u=d.lane;if((ku&u)===u)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:e(r,d.action);else{var h={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(l=c=h,o=r):c=c.next=h,jr.lanes|=u,Eu|=u}d=d.next}while(d!==null&&d!==i);c===null?o=r:c.next=l,lo(r,t.memoizedState)||(La=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=c,n.lastRenderedState=r}if(e=n.interleaved,e!==null){a=e;do i=a.lane,jr.lanes|=i,Eu|=i,a=a.next;while(a!==e)}else a===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Nw(e){var t=Mi(),n=t.queue;if(n===null)throw Error(lt(311));n.lastRenderedReducer=e;var r=n.dispatch,a=n.pending,i=t.memoizedState;if(a!==null){n.pending=null;var o=a=a.next;do i=e(i,o.action),o=o.next;while(o!==a);lo(i,t.memoizedState)||(La=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function h6(){}function f6(e,t){var n=jr,r=Mi(),a=t(),i=!lo(r.memoizedState,a);if(i&&(r.memoizedState=a,La=!0),r=r.queue,O5(g6.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||ps!==null&&ps.memoizedState.tag&1){if(n.flags|=2048,ig(9,m6.bind(null,n,r,a,t),void 0,null),gs===null)throw Error(lt(349));ku&30||p6(n,t,a)}return a}function p6(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=jr.updateQueue,t===null?(t={lastEffect:null,stores:null},jr.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function m6(e,t,n,r){t.value=n,t.getSnapshot=r,v6(t)&&x6(e)}function g6(e,t,n){return n(function(){v6(t)&&x6(e)})}function v6(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!lo(e,n)}catch{return!0}}function x6(e){var t=Vl(e,1);t!==null&&io(t,e,1,-1)}function ED(e){var t=Eo();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ag,lastRenderedState:e},t.queue=e,e=e.dispatch=FB.bind(null,jr,e),[t.memoizedState,e]}function ig(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=jr.updateQueue,t===null?(t={lastEffect:null,stores:null},jr.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function y6(){return Mi().memoizedState}function u0(e,t,n,r){var a=Eo();jr.flags|=e,a.memoizedState=ig(1|t,n,void 0,r===void 0?null:r)}function Xy(e,t,n,r){var a=Mi();r=r===void 0?null:r;var i=void 0;if(es!==null){var o=es.memoizedState;if(i=o.destroy,r!==null&&R5(r,o.deps)){a.memoizedState=ig(t,n,i,r);return}}jr.flags|=e,a.memoizedState=ig(1|t,n,i,r)}function TD(e,t){return u0(8390656,8,e,t)}function O5(e,t){return Xy(2048,8,e,t)}function b6(e,t){return Xy(4,2,e,t)}function w6(e,t){return Xy(4,4,e,t)}function j6(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function N6(e,t,n){return n=n!=null?n.concat([e]):null,Xy(4,4,j6.bind(null,t,e),n)}function F5(){}function S6(e,t){var n=Mi();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&R5(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function C6(e,t){var n=Mi();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&R5(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function P6(e,t,n){return ku&21?(lo(n,t)||(n=AA(),jr.lanes|=n,Eu|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,La=!0),e.memoizedState=n)}function IB(e,t){var n=En;En=n!==0&&4>n?n:4,e(!0);var r=ww.transition;ww.transition={};try{e(!1),t()}finally{En=n,ww.transition=r}}function D6(){return Mi().memoizedState}function OB(e,t,n){var r=td(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},k6(e))E6(t,n);else if(n=c6(e,t,n,r),n!==null){var a=va();io(n,e,r,a),T6(n,t,r)}}function FB(e,t,n){var r=td(e),a={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(k6(e))E6(t,a);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,l=i(o,n);if(a.hasEagerState=!0,a.eagerState=l,lo(l,o)){var c=t.interleaved;c===null?(a.next=a,E5(t)):(a.next=c.next,c.next=a),t.interleaved=a;return}}catch{}finally{}n=c6(e,t,a,r),n!==null&&(a=va(),io(n,e,r,a),T6(n,t,r))}}function k6(e){var t=e.alternate;return e===jr||t!==null&&t===jr}function E6(e,t){Cm=J0=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function T6(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,m5(e,n)}}var K0={readContext:_i,useCallback:Fs,useContext:Fs,useEffect:Fs,useImperativeHandle:Fs,useInsertionEffect:Fs,useLayoutEffect:Fs,useMemo:Fs,useReducer:Fs,useRef:Fs,useState:Fs,useDebugValue:Fs,useDeferredValue:Fs,useTransition:Fs,useMutableSource:Fs,useSyncExternalStore:Fs,useId:Fs,unstable_isNewReconciler:!1},$B={readContext:_i,useCallback:function(e,t){return Eo().memoizedState=[e,t===void 0?null:t],e},useContext:_i,useEffect:TD,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,u0(4194308,4,j6.bind(null,t,e),n)},useLayoutEffect:function(e,t){return u0(4194308,4,e,t)},useInsertionEffect:function(e,t){return u0(4,2,e,t)},useMemo:function(e,t){var n=Eo();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Eo();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=OB.bind(null,jr,e),[r.memoizedState,e]},useRef:function(e){var t=Eo();return e={current:e},t.memoizedState=e},useState:ED,useDebugValue:F5,useDeferredValue:function(e){return Eo().memoizedState=e},useTransition:function(){var e=ED(!1),t=e[0];return e=IB.bind(null,e[1]),Eo().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=jr,a=Eo();if(Zn){if(n===void 0)throw Error(lt(407));n=n()}else{if(n=t(),gs===null)throw Error(lt(349));ku&30||p6(r,t,n)}a.memoizedState=n;var i={value:n,getSnapshot:t};return a.queue=i,TD(g6.bind(null,r,i,e),[e]),r.flags|=2048,ig(9,m6.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=Eo(),t=gs.identifierPrefix;if(Zn){var n=Ml,r=_l;n=(r&~(1<<32-ao(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=sg++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=LB++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},BB={readContext:_i,useCallback:S6,useContext:_i,useEffect:O5,useImperativeHandle:N6,useInsertionEffect:b6,useLayoutEffect:w6,useMemo:C6,useReducer:jw,useRef:y6,useState:function(){return jw(ag)},useDebugValue:F5,useDeferredValue:function(e){var t=Mi();return P6(t,es.memoizedState,e)},useTransition:function(){var e=jw(ag)[0],t=Mi().memoizedState;return[e,t]},useMutableSource:h6,useSyncExternalStore:f6,useId:D6,unstable_isNewReconciler:!1},zB={readContext:_i,useCallback:S6,useContext:_i,useEffect:O5,useImperativeHandle:N6,useInsertionEffect:b6,useLayoutEffect:w6,useMemo:C6,useReducer:Nw,useRef:y6,useState:function(){return Nw(ag)},useDebugValue:F5,useDeferredValue:function(e){var t=Mi();return es===null?t.memoizedState=e:P6(t,es.memoizedState,e)},useTransition:function(){var e=Nw(ag)[0],t=Mi().memoizedState;return[e,t]},useMutableSource:h6,useSyncExternalStore:f6,useId:D6,unstable_isNewReconciler:!1};function Zi(e,t){if(e&&e.defaultProps){t=Nr({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function hj(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Nr({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Qy={isMounted:function(e){return(e=e._reactInternals)?Uu(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=va(),a=td(e),i=Il(r,a);i.payload=t,n!=null&&(i.callback=n),t=Zc(e,i,a),t!==null&&(io(t,e,a,r),c0(t,e,a))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=va(),a=td(e),i=Il(r,a);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=Zc(e,i,a),t!==null&&(io(t,e,a,r),c0(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=va(),r=td(e),a=Il(n,r);a.tag=2,t!=null&&(a.callback=t),t=Zc(e,a,r),t!==null&&(io(t,e,r,n),c0(t,e,r))}};function AD(e,t,n,r,a,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,i,o):t.prototype&&t.prototype.isPureReactComponent?!Qm(n,r)||!Qm(a,i):!0}function A6(e,t,n){var r=!1,a=dd,i=t.contextType;return typeof i=="object"&&i!==null?i=_i(i):(a=Oa(t)?Pu:Zs.current,r=t.contextTypes,i=(r=r!=null)?wf(e,a):dd),t=new t(n,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Qy,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),t}function _D(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Qy.enqueueReplaceState(t,t.state,null)}function fj(e,t,n,r){var a=e.stateNode;a.props=n,a.state=e.memoizedState,a.refs={},T5(e);var i=t.contextType;typeof i=="object"&&i!==null?a.context=_i(i):(i=Oa(t)?Pu:Zs.current,a.context=wf(e,i)),a.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(hj(e,t,i,n),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&Qy.enqueueReplaceState(a,a.state,null),Y0(e,n,a,r),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function Cf(e,t){try{var n="",r=t;do n+=m9(r),r=r.return;while(r);var a=n}catch(i){a=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:a,digest:null}}function Sw(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function pj(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var WB=typeof WeakMap=="function"?WeakMap:Map;function _6(e,t,n){n=Il(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Q0||(Q0=!0,Sj=r),pj(e,t)},n}function M6(e,t,n){n=Il(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var a=t.value;n.payload=function(){return r(a)},n.callback=function(){pj(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){pj(e,t),typeof r!="function"&&(ed===null?ed=new Set([this]):ed.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function MD(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new WB;var a=new Set;r.set(t,a)}else a=r.get(t),a===void 0&&(a=new Set,r.set(t,a));a.has(n)||(a.add(n),e=nz.bind(null,e,t,n),t.then(e,e))}function RD(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function LD(e,t,n,r,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Il(-1,1),t.tag=2,Zc(n,t,1))),n.lanes|=1),e)}var HB=tc.ReactCurrentOwner,La=!1;function ua(e,t,n,r){t.child=e===null?l6(t,null,n,r):Nf(t,e.child,n,r)}function ID(e,t,n,r,a){n=n.render;var i=t.ref;return ff(t,a),r=L5(e,t,n,r,i,a),n=I5(),e!==null&&!La?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Ul(e,t,a)):(Zn&&n&&N5(t),t.flags|=1,ua(e,t,r,a),t.child)}function OD(e,t,n,r,a){if(e===null){var i=n.type;return typeof i=="function"&&!U5(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=i,R6(e,t,i,r,a)):(e=m0(n.type,null,r,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&a)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Qm,n(o,r)&&e.ref===t.ref)return Ul(e,t,a)}return t.flags|=1,e=nd(i,r),e.ref=t.ref,e.return=t,t.child=e}function R6(e,t,n,r,a){if(e!==null){var i=e.memoizedProps;if(Qm(i,r)&&e.ref===t.ref)if(La=!1,t.pendingProps=r=i,(e.lanes&a)!==0)e.flags&131072&&(La=!0);else return t.lanes=e.lanes,Ul(e,t,a)}return mj(e,t,n,r,a)}function L6(e,t,n){var r=t.pendingProps,a=r.children,i=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},zn(rf,ti),ti|=n;else{if(!(n&1073741824))return e=i!==null?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,zn(rf,ti),ti|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,zn(rf,ti),ti|=r}else i!==null?(r=i.baseLanes|n,t.memoizedState=null):r=n,zn(rf,ti),ti|=r;return ua(e,t,a,n),t.child}function I6(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function mj(e,t,n,r,a){var i=Oa(n)?Pu:Zs.current;return i=wf(t,i),ff(t,a),n=L5(e,t,n,r,i,a),r=I5(),e!==null&&!La?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Ul(e,t,a)):(Zn&&r&&N5(t),t.flags|=1,ua(e,t,n,a),t.child)}function FD(e,t,n,r,a){if(Oa(n)){var i=!0;W0(t)}else i=!1;if(ff(t,a),t.stateNode===null)h0(e,t),A6(t,n,r),fj(t,n,r,a),r=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var c=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=_i(d):(d=Oa(n)?Pu:Zs.current,d=wf(t,d));var u=n.getDerivedStateFromProps,h=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||c!==d)&&_D(t,o,r,d),Oc=!1;var f=t.memoizedState;o.state=f,Y0(t,r,o,a),c=t.memoizedState,l!==r||f!==c||Ia.current||Oc?(typeof u=="function"&&(hj(t,n,u,r),c=t.memoizedState),(l=Oc||AD(t,n,l,r,f,c,d))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),o.props=r,o.state=c,o.context=d,r=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,d6(e,t),l=t.memoizedProps,d=t.type===t.elementType?l:Zi(t.type,l),o.props=d,h=t.pendingProps,f=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=_i(c):(c=Oa(n)?Pu:Zs.current,c=wf(t,c));var p=n.getDerivedStateFromProps;(u=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==h||f!==c)&&_D(t,o,r,c),Oc=!1,f=t.memoizedState,o.state=f,Y0(t,r,o,a);var y=t.memoizedState;l!==h||f!==y||Ia.current||Oc?(typeof p=="function"&&(hj(t,n,p,r),y=t.memoizedState),(d=Oc||AD(t,n,d,r,f,y,c)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,y,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,y,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=y),o.props=r,o.state=y,o.context=c,r=d):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),r=!1)}return gj(e,t,n,r,i,a)}function gj(e,t,n,r,a,i){I6(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return a&&ND(t,n,!1),Ul(e,t,i);r=t.stateNode,HB.current=t;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=Nf(t,e.child,null,i),t.child=Nf(t,null,l,i)):ua(e,t,l,i),t.memoizedState=r.state,a&&ND(t,n,!0),t.child}function O6(e){var t=e.stateNode;t.pendingContext?jD(e,t.pendingContext,t.pendingContext!==t.context):t.context&&jD(e,t.context,!1),A5(e,t.containerInfo)}function $D(e,t,n,r,a){return jf(),C5(a),t.flags|=256,ua(e,t,n,r),t.child}var vj={dehydrated:null,treeContext:null,retryLane:0};function xj(e){return{baseLanes:e,cachePool:null,transitions:null}}function F6(e,t,n){var r=t.pendingProps,a=fr.current,i=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(a&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),zn(fr,a&1),e===null)return dj(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,i?(r=t.mode,i=t.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=t1(o,r,0,null),e=pu(e,r,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=xj(n),t.memoizedState=vj,e):$5(t,o));if(a=e.memoizedState,a!==null&&(l=a.dehydrated,l!==null))return qB(e,t,o,r,l,a,n);if(i){i=r.fallback,o=t.mode,a=e.child,l=a.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&t.child!==a?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=nd(a,c),r.subtreeFlags=a.subtreeFlags&14680064),l!==null?i=nd(l,i):(i=pu(i,o,n,null),i.flags|=2),i.return=t,r.return=t,r.sibling=i,t.child=r,r=i,i=t.child,o=e.child.memoizedState,o=o===null?xj(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~n,t.memoizedState=vj,r}return i=e.child,e=i.sibling,r=nd(i,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function $5(e,t){return t=t1({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function hx(e,t,n,r){return r!==null&&C5(r),Nf(t,e.child,null,n),e=$5(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function qB(e,t,n,r,a,i,o){if(n)return t.flags&256?(t.flags&=-257,r=Sw(Error(lt(422))),hx(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=r.fallback,a=t.mode,r=t1({mode:"visible",children:r.children},a,0,null),i=pu(i,a,o,null),i.flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,t.mode&1&&Nf(t,e.child,null,o),t.child.memoizedState=xj(o),t.memoizedState=vj,i);if(!(t.mode&1))return hx(e,t,o,null);if(a.data==="$!"){if(r=a.nextSibling&&a.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(lt(419)),r=Sw(i,r,void 0),hx(e,t,o,r)}if(l=(o&e.childLanes)!==0,La||l){if(r=gs,r!==null){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(r.suspendedLanes|o)?0:a,a!==0&&a!==i.retryLane&&(i.retryLane=a,Vl(e,a),io(r,e,a,-1))}return V5(),r=Sw(Error(lt(421))),hx(e,t,o,r)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=rz.bind(null,e),a._reactRetry=t,null):(e=i.treeContext,si=Qc(a.nextSibling),ii=t,Zn=!0,no=null,e!==null&&(Ci[Pi++]=_l,Ci[Pi++]=Ml,Ci[Pi++]=Du,_l=e.id,Ml=e.overflow,Du=t),t=$5(t,r.children),t.flags|=4096,t)}function BD(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),uj(e.return,t,n)}function Cw(e,t,n,r,a){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:a}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=a)}function $6(e,t,n){var r=t.pendingProps,a=r.revealOrder,i=r.tail;if(ua(e,t,r.children,n),r=fr.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&BD(e,n,t);else if(e.tag===19)BD(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(zn(fr,r),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(n=t.child,a=null;n!==null;)e=n.alternate,e!==null&&G0(e)===null&&(a=n),n=n.sibling;n=a,n===null?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),Cw(t,!1,a,n,i);break;case"backwards":for(n=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&G0(e)===null){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}Cw(t,!0,n,null,i);break;case"together":Cw(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function h0(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ul(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Eu|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(lt(153));if(t.child!==null){for(e=t.child,n=nd(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=nd(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function VB(e,t,n){switch(t.tag){case 3:O6(t),jf();break;case 5:u6(t);break;case 1:Oa(t.type)&&W0(t);break;case 4:A5(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,a=t.memoizedProps.value;zn(V0,r._currentValue),r._currentValue=a;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(zn(fr,fr.current&1),t.flags|=128,null):n&t.child.childLanes?F6(e,t,n):(zn(fr,fr.current&1),e=Ul(e,t,n),e!==null?e.sibling:null);zn(fr,fr.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return $6(e,t,n);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),zn(fr,fr.current),r)break;return null;case 22:case 23:return t.lanes=0,L6(e,t,n)}return Ul(e,t,n)}var B6,yj,z6,W6;B6=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};yj=function(){};z6=function(e,t,n,r){var a=e.memoizedProps;if(a!==r){e=t.stateNode,lu(Ho.current);var i=null;switch(n){case"input":a=z2(e,a),r=z2(e,r),i=[];break;case"select":a=Nr({},a,{value:void 0}),r=Nr({},r,{value:void 0}),i=[];break;case"textarea":a=q2(e,a),r=q2(e,r),i=[];break;default:typeof a.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=B0)}U2(n,r);var o;n=null;for(d in a)if(!r.hasOwnProperty(d)&&a.hasOwnProperty(d)&&a[d]!=null)if(d==="style"){var l=a[d];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Vm.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var c=r[d];if(l=a!=null?a[d]:void 0,r.hasOwnProperty(d)&&c!==l&&(c!=null||l!=null))if(d==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(d,n)),n=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Vm.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&Un("scroll",e),i||l===c||(i=[])):(i=i||[]).push(d,c))}n&&(i=i||[]).push("style",n);var d=i;(t.updateQueue=d)&&(t.flags|=4)}};W6=function(e,t,n,r){n!==r&&(t.flags|=4)};function Gp(e,t){if(!Zn)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function $s(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var a=e.child;a!==null;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags&14680064,r|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags,r|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function UB(e,t,n){var r=t.pendingProps;switch(S5(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return $s(t),null;case 1:return Oa(t.type)&&z0(),$s(t),null;case 3:return r=t.stateNode,Sf(),Kn(Ia),Kn(Zs),M5(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(dx(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,no!==null&&(Dj(no),no=null))),yj(e,t),$s(t),null;case 5:_5(t);var a=lu(rg.current);if(n=t.type,e!==null&&t.stateNode!=null)z6(e,t,n,r,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(lt(166));return $s(t),null}if(e=lu(Ho.current),dx(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[Mo]=t,r[tg]=i,e=(t.mode&1)!==0,n){case"dialog":Un("cancel",r),Un("close",r);break;case"iframe":case"object":case"embed":Un("load",r);break;case"video":case"audio":for(a=0;a<pm.length;a++)Un(pm[a],r);break;case"source":Un("error",r);break;case"img":case"image":case"link":Un("error",r),Un("load",r);break;case"details":Un("toggle",r);break;case"input":JP(r,i),Un("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Un("invalid",r);break;case"textarea":XP(r,i),Un("invalid",r)}U2(n,i),a=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&cx(r.textContent,l,e),a=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&cx(r.textContent,l,e),a=["children",""+l]):Vm.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Un("scroll",r)}switch(n){case"input":tx(r),KP(r,i,!0);break;case"textarea":tx(r),QP(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=B0)}r=a,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=gA(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[Mo]=t,e[tg]=r,B6(e,t,!1,!1),t.stateNode=e;e:{switch(o=Y2(n,r),n){case"dialog":Un("cancel",e),Un("close",e),a=r;break;case"iframe":case"object":case"embed":Un("load",e),a=r;break;case"video":case"audio":for(a=0;a<pm.length;a++)Un(pm[a],e);a=r;break;case"source":Un("error",e),a=r;break;case"img":case"image":case"link":Un("error",e),Un("load",e),a=r;break;case"details":Un("toggle",e),a=r;break;case"input":JP(e,r),a=z2(e,r),Un("invalid",e);break;case"option":a=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},a=Nr({},r,{value:void 0}),Un("invalid",e);break;case"textarea":XP(e,r),a=q2(e,r),Un("invalid",e);break;default:a=r}U2(n,a),l=a;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?yA(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&vA(e,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Um(e,c):typeof c=="number"&&Um(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Vm.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Un("scroll",e):c!=null&&c5(e,i,c,o))}switch(n){case"input":tx(e),KP(e,r,!1);break;case"textarea":tx(e),QP(e);break;case"option":r.value!=null&&e.setAttribute("value",""+cd(r.value));break;case"select":e.multiple=!!r.multiple,i=r.value,i!=null?cf(e,!!r.multiple,i,!1):r.defaultValue!=null&&cf(e,!!r.multiple,r.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=B0)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return $s(t),null;case 6:if(e&&t.stateNode!=null)W6(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(lt(166));if(n=lu(rg.current),lu(Ho.current),dx(t)){if(r=t.stateNode,n=t.memoizedProps,r[Mo]=t,(i=r.nodeValue!==n)&&(e=ii,e!==null))switch(e.tag){case 3:cx(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&cx(r.nodeValue,n,(e.mode&1)!==0)}i&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Mo]=t,t.stateNode=r}return $s(t),null;case 13:if(Kn(fr),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Zn&&si!==null&&t.mode&1&&!(t.flags&128))i6(),jf(),t.flags|=98560,i=!1;else if(i=dx(t),r!==null&&r.dehydrated!==null){if(e===null){if(!i)throw Error(lt(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(lt(317));i[Mo]=t}else jf(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;$s(t),i=!1}else no!==null&&(Dj(no),no=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||fr.current&1?ns===0&&(ns=3):V5())),t.updateQueue!==null&&(t.flags|=4),$s(t),null);case 4:return Sf(),yj(e,t),e===null&&Zm(t.stateNode.containerInfo),$s(t),null;case 10:return k5(t.type._context),$s(t),null;case 17:return Oa(t.type)&&z0(),$s(t),null;case 19:if(Kn(fr),i=t.memoizedState,i===null)return $s(t),null;if(r=(t.flags&128)!==0,o=i.rendering,o===null)if(r)Gp(i,!1);else{if(ns!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=G0(e),o!==null){for(t.flags|=128,Gp(i,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)i=n,e=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return zn(fr,fr.current&1|2),t.child}e=e.sibling}i.tail!==null&&Ir()>Pf&&(t.flags|=128,r=!0,Gp(i,!1),t.lanes=4194304)}else{if(!r)if(e=G0(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Gp(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Zn)return $s(t),null}else 2*Ir()-i.renderingStartTime>Pf&&n!==1073741824&&(t.flags|=128,r=!0,Gp(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(n=i.last,n!==null?n.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Ir(),t.sibling=null,n=fr.current,zn(fr,r?n&1|2:n&1),t):($s(t),null);case 22:case 23:return q5(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?ti&1073741824&&($s(t),t.subtreeFlags&6&&(t.flags|=8192)):$s(t),null;case 24:return null;case 25:return null}throw Error(lt(156,t.tag))}function YB(e,t){switch(S5(t),t.tag){case 1:return Oa(t.type)&&z0(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Sf(),Kn(Ia),Kn(Zs),M5(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return _5(t),null;case 13:if(Kn(fr),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(lt(340));jf()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Kn(fr),null;case 4:return Sf(),null;case 10:return k5(t.type._context),null;case 22:case 23:return q5(),null;case 24:return null;default:return null}}var fx=!1,Js=!1,GB=typeof WeakSet=="function"?WeakSet:Set,Et=null;function nf(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){kr(e,t,r)}else n.current=null}function bj(e,t,n){try{n()}catch(r){kr(e,t,r)}}var zD=!1;function JB(e,t){if(rj=O0,e=YA(),j5(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var a=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,l=-1,c=-1,d=0,u=0,h=e,f=null;t:for(;;){for(var p;h!==n||a!==0&&h.nodeType!==3||(l=o+a),h!==i||r!==0&&h.nodeType!==3||(c=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(p=h.firstChild)!==null;)f=h,h=p;for(;;){if(h===e)break t;if(f===n&&++d===a&&(l=o),f===i&&++u===r&&(c=o),(p=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=p}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(sj={focusedElem:e,selectionRange:n},O0=!1,Et=t;Et!==null;)if(t=Et,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Et=e;else for(;Et!==null;){t=Et;try{var y=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var g=y.memoizedProps,x=y.memoizedState,m=t.stateNode,v=m.getSnapshotBeforeUpdate(t.elementType===t.type?g:Zi(t.type,g),x);m.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var b=t.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(lt(163))}}catch(C){kr(t,t.return,C)}if(e=t.sibling,e!==null){e.return=t.return,Et=e;break}Et=t.return}return y=zD,zD=!1,y}function Pm(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var a=r=r.next;do{if((a.tag&e)===e){var i=a.destroy;a.destroy=void 0,i!==void 0&&bj(t,n,i)}a=a.next}while(a!==r)}}function Zy(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function wj(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function H6(e){var t=e.alternate;t!==null&&(e.alternate=null,H6(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Mo],delete t[tg],delete t[oj],delete t[AB],delete t[_B])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function q6(e){return e.tag===5||e.tag===3||e.tag===4}function WD(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||q6(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function jj(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=B0));else if(r!==4&&(e=e.child,e!==null))for(jj(e,t,n),e=e.sibling;e!==null;)jj(e,t,n),e=e.sibling}function Nj(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Nj(e,t,n),e=e.sibling;e!==null;)Nj(e,t,n),e=e.sibling}var Cs=null,to=!1;function Sc(e,t,n){for(n=n.child;n!==null;)V6(e,t,n),n=n.sibling}function V6(e,t,n){if(Wo&&typeof Wo.onCommitFiberUnmount=="function")try{Wo.onCommitFiberUnmount(Vy,n)}catch{}switch(n.tag){case 5:Js||nf(n,t);case 6:var r=Cs,a=to;Cs=null,Sc(e,t,n),Cs=r,to=a,Cs!==null&&(to?(e=Cs,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Cs.removeChild(n.stateNode));break;case 18:Cs!==null&&(to?(e=Cs,n=n.stateNode,e.nodeType===8?xw(e.parentNode,n):e.nodeType===1&&xw(e,n),Km(e)):xw(Cs,n.stateNode));break;case 4:r=Cs,a=to,Cs=n.stateNode.containerInfo,to=!0,Sc(e,t,n),Cs=r,to=a;break;case 0:case 11:case 14:case 15:if(!Js&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){a=r=r.next;do{var i=a,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&bj(n,t,o),a=a.next}while(a!==r)}Sc(e,t,n);break;case 1:if(!Js&&(nf(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){kr(n,t,l)}Sc(e,t,n);break;case 21:Sc(e,t,n);break;case 22:n.mode&1?(Js=(r=Js)||n.memoizedState!==null,Sc(e,t,n),Js=r):Sc(e,t,n);break;default:Sc(e,t,n)}}function HD(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new GB),t.forEach(function(r){var a=sz.bind(null,e,r);n.has(r)||(n.add(r),r.then(a,a))})}}function Gi(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var a=n[r];try{var i=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:Cs=l.stateNode,to=!1;break e;case 3:Cs=l.stateNode.containerInfo,to=!0;break e;case 4:Cs=l.stateNode.containerInfo,to=!0;break e}l=l.return}if(Cs===null)throw Error(lt(160));V6(i,o,a),Cs=null,to=!1;var c=a.alternate;c!==null&&(c.return=null),a.return=null}catch(d){kr(a,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)U6(t,e),t=t.sibling}function U6(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Gi(t,e),Po(e),r&4){try{Pm(3,e,e.return),Zy(3,e)}catch(g){kr(e,e.return,g)}try{Pm(5,e,e.return)}catch(g){kr(e,e.return,g)}}break;case 1:Gi(t,e),Po(e),r&512&&n!==null&&nf(n,n.return);break;case 5:if(Gi(t,e),Po(e),r&512&&n!==null&&nf(n,n.return),e.flags&32){var a=e.stateNode;try{Um(a,"")}catch(g){kr(e,e.return,g)}}if(r&4&&(a=e.stateNode,a!=null)){var i=e.memoizedProps,o=n!==null?n.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&pA(a,i),Y2(l,o);var d=Y2(l,i);for(o=0;o<c.length;o+=2){var u=c[o],h=c[o+1];u==="style"?yA(a,h):u==="dangerouslySetInnerHTML"?vA(a,h):u==="children"?Um(a,h):c5(a,u,h,d)}switch(l){case"input":W2(a,i);break;case"textarea":mA(a,i);break;case"select":var f=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var p=i.value;p!=null?cf(a,!!i.multiple,p,!1):f!==!!i.multiple&&(i.defaultValue!=null?cf(a,!!i.multiple,i.defaultValue,!0):cf(a,!!i.multiple,i.multiple?[]:"",!1))}a[tg]=i}catch(g){kr(e,e.return,g)}}break;case 6:if(Gi(t,e),Po(e),r&4){if(e.stateNode===null)throw Error(lt(162));a=e.stateNode,i=e.memoizedProps;try{a.nodeValue=i}catch(g){kr(e,e.return,g)}}break;case 3:if(Gi(t,e),Po(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Km(t.containerInfo)}catch(g){kr(e,e.return,g)}break;case 4:Gi(t,e),Po(e);break;case 13:Gi(t,e),Po(e),a=e.child,a.flags&8192&&(i=a.memoizedState!==null,a.stateNode.isHidden=i,!i||a.alternate!==null&&a.alternate.memoizedState!==null||(W5=Ir())),r&4&&HD(e);break;case 22:if(u=n!==null&&n.memoizedState!==null,e.mode&1?(Js=(d=Js)||u,Gi(t,e),Js=d):Gi(t,e),Po(e),r&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!u&&e.mode&1)for(Et=e,u=e.child;u!==null;){for(h=Et=u;Et!==null;){switch(f=Et,p=f.child,f.tag){case 0:case 11:case 14:case 15:Pm(4,f,f.return);break;case 1:nf(f,f.return);var y=f.stateNode;if(typeof y.componentWillUnmount=="function"){r=f,n=f.return;try{t=r,y.props=t.memoizedProps,y.state=t.memoizedState,y.componentWillUnmount()}catch(g){kr(r,n,g)}}break;case 5:nf(f,f.return);break;case 22:if(f.memoizedState!==null){VD(h);continue}}p!==null?(p.return=f,Et=p):VD(h)}u=u.sibling}e:for(u=null,h=e;;){if(h.tag===5){if(u===null){u=h;try{a=h.stateNode,d?(i=a.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=h.stateNode,c=h.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=xA("display",o))}catch(g){kr(e,e.return,g)}}}else if(h.tag===6){if(u===null)try{h.stateNode.nodeValue=d?"":h.memoizedProps}catch(g){kr(e,e.return,g)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Gi(t,e),Po(e),r&4&&HD(e);break;case 21:break;default:Gi(t,e),Po(e)}}function Po(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(q6(n)){var r=n;break e}n=n.return}throw Error(lt(160))}switch(r.tag){case 5:var a=r.stateNode;r.flags&32&&(Um(a,""),r.flags&=-33);var i=WD(e);Nj(e,i,a);break;case 3:case 4:var o=r.stateNode.containerInfo,l=WD(e);jj(e,l,o);break;default:throw Error(lt(161))}}catch(c){kr(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function KB(e,t,n){Et=e,Y6(e)}function Y6(e,t,n){for(var r=(e.mode&1)!==0;Et!==null;){var a=Et,i=a.child;if(a.tag===22&&r){var o=a.memoizedState!==null||fx;if(!o){var l=a.alternate,c=l!==null&&l.memoizedState!==null||Js;l=fx;var d=Js;if(fx=o,(Js=c)&&!d)for(Et=a;Et!==null;)o=Et,c=o.child,o.tag===22&&o.memoizedState!==null?UD(a):c!==null?(c.return=o,Et=c):UD(a);for(;i!==null;)Et=i,Y6(i),i=i.sibling;Et=a,fx=l,Js=d}qD(e)}else a.subtreeFlags&8772&&i!==null?(i.return=a,Et=i):qD(e)}}function qD(e){for(;Et!==null;){var t=Et;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Js||Zy(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Js)if(n===null)r.componentDidMount();else{var a=t.elementType===t.type?n.memoizedProps:Zi(t.type,n.memoizedProps);r.componentDidUpdate(a,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&kD(t,i,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}kD(t,o,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var u=d.memoizedState;if(u!==null){var h=u.dehydrated;h!==null&&Km(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(lt(163))}Js||t.flags&512&&wj(t)}catch(f){kr(t,t.return,f)}}if(t===e){Et=null;break}if(n=t.sibling,n!==null){n.return=t.return,Et=n;break}Et=t.return}}function VD(e){for(;Et!==null;){var t=Et;if(t===e){Et=null;break}var n=t.sibling;if(n!==null){n.return=t.return,Et=n;break}Et=t.return}}function UD(e){for(;Et!==null;){var t=Et;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Zy(4,t)}catch(c){kr(t,n,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var a=t.return;try{r.componentDidMount()}catch(c){kr(t,a,c)}}var i=t.return;try{wj(t)}catch(c){kr(t,i,c)}break;case 5:var o=t.return;try{wj(t)}catch(c){kr(t,o,c)}}}catch(c){kr(t,t.return,c)}if(t===e){Et=null;break}var l=t.sibling;if(l!==null){l.return=t.return,Et=l;break}Et=t.return}}var XB=Math.ceil,X0=tc.ReactCurrentDispatcher,B5=tc.ReactCurrentOwner,Ti=tc.ReactCurrentBatchConfig,pn=0,gs=null,Kr=null,Ds=0,ti=0,rf=jd(0),ns=0,og=null,Eu=0,e1=0,z5=0,Dm=null,Ma=null,W5=0,Pf=1/0,Dl=null,Q0=!1,Sj=null,ed=null,px=!1,Vc=null,Z0=0,km=0,Cj=null,f0=-1,p0=0;function va(){return pn&6?Ir():f0!==-1?f0:f0=Ir()}function td(e){return e.mode&1?pn&2&&Ds!==0?Ds&-Ds:RB.transition!==null?(p0===0&&(p0=AA()),p0):(e=En,e!==0||(e=window.event,e=e===void 0?16:FA(e.type)),e):1}function io(e,t,n,r){if(50<km)throw km=0,Cj=null,Error(lt(185));$g(e,n,r),(!(pn&2)||e!==gs)&&(e===gs&&(!(pn&2)&&(e1|=n),ns===4&&zc(e,Ds)),Fa(e,r),n===1&&pn===0&&!(t.mode&1)&&(Pf=Ir()+500,Ky&&Nd()))}function Fa(e,t){var n=e.callbackNode;R9(e,t);var r=I0(e,e===gs?Ds:0);if(r===0)n!==null&&tD(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&tD(n),t===1)e.tag===0?MB(YD.bind(null,e)):r6(YD.bind(null,e)),EB(function(){!(pn&6)&&Nd()}),n=null;else{switch(_A(r)){case 1:n=p5;break;case 4:n=EA;break;case 16:n=L0;break;case 536870912:n=TA;break;default:n=L0}n=t_(n,G6.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function G6(e,t){if(f0=-1,p0=0,pn&6)throw Error(lt(327));var n=e.callbackNode;if(pf()&&e.callbackNode!==n)return null;var r=I0(e,e===gs?Ds:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=ey(e,r);else{t=r;var a=pn;pn|=2;var i=K6();(gs!==e||Ds!==t)&&(Dl=null,Pf=Ir()+500,fu(e,t));do try{ez();break}catch(l){J6(e,l)}while(1);D5(),X0.current=i,pn=a,Kr!==null?t=0:(gs=null,Ds=0,t=ns)}if(t!==0){if(t===2&&(a=Q2(e),a!==0&&(r=a,t=Pj(e,a))),t===1)throw n=og,fu(e,0),zc(e,r),Fa(e,Ir()),n;if(t===6)zc(e,r);else{if(a=e.current.alternate,!(r&30)&&!QB(a)&&(t=ey(e,r),t===2&&(i=Q2(e),i!==0&&(r=i,t=Pj(e,i))),t===1))throw n=og,fu(e,0),zc(e,r),Fa(e,Ir()),n;switch(e.finishedWork=a,e.finishedLanes=r,t){case 0:case 1:throw Error(lt(345));case 2:Qd(e,Ma,Dl);break;case 3:if(zc(e,r),(r&130023424)===r&&(t=W5+500-Ir(),10<t)){if(I0(e,0)!==0)break;if(a=e.suspendedLanes,(a&r)!==r){va(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=ij(Qd.bind(null,e,Ma,Dl),t);break}Qd(e,Ma,Dl);break;case 4:if(zc(e,r),(r&4194240)===r)break;for(t=e.eventTimes,a=-1;0<r;){var o=31-ao(r);i=1<<o,o=t[o],o>a&&(a=o),r&=~i}if(r=a,r=Ir()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*XB(r/1960))-r,10<r){e.timeoutHandle=ij(Qd.bind(null,e,Ma,Dl),r);break}Qd(e,Ma,Dl);break;case 5:Qd(e,Ma,Dl);break;default:throw Error(lt(329))}}}return Fa(e,Ir()),e.callbackNode===n?G6.bind(null,e):null}function Pj(e,t){var n=Dm;return e.current.memoizedState.isDehydrated&&(fu(e,t).flags|=256),e=ey(e,t),e!==2&&(t=Ma,Ma=n,t!==null&&Dj(t)),e}function Dj(e){Ma===null?Ma=e:Ma.push.apply(Ma,e)}function QB(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var a=n[r],i=a.getSnapshot;a=a.value;try{if(!lo(i(),a))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function zc(e,t){for(t&=~z5,t&=~e1,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ao(t),r=1<<n;e[n]=-1,t&=~r}}function YD(e){if(pn&6)throw Error(lt(327));pf();var t=I0(e,0);if(!(t&1))return Fa(e,Ir()),null;var n=ey(e,t);if(e.tag!==0&&n===2){var r=Q2(e);r!==0&&(t=r,n=Pj(e,r))}if(n===1)throw n=og,fu(e,0),zc(e,t),Fa(e,Ir()),n;if(n===6)throw Error(lt(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Qd(e,Ma,Dl),Fa(e,Ir()),null}function H5(e,t){var n=pn;pn|=1;try{return e(t)}finally{pn=n,pn===0&&(Pf=Ir()+500,Ky&&Nd())}}function Tu(e){Vc!==null&&Vc.tag===0&&!(pn&6)&&pf();var t=pn;pn|=1;var n=Ti.transition,r=En;try{if(Ti.transition=null,En=1,e)return e()}finally{En=r,Ti.transition=n,pn=t,!(pn&6)&&Nd()}}function q5(){ti=rf.current,Kn(rf)}function fu(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,kB(n)),Kr!==null)for(n=Kr.return;n!==null;){var r=n;switch(S5(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&z0();break;case 3:Sf(),Kn(Ia),Kn(Zs),M5();break;case 5:_5(r);break;case 4:Sf();break;case 13:Kn(fr);break;case 19:Kn(fr);break;case 10:k5(r.type._context);break;case 22:case 23:q5()}n=n.return}if(gs=e,Kr=e=nd(e.current,null),Ds=ti=t,ns=0,og=null,z5=e1=Eu=0,Ma=Dm=null,ou!==null){for(t=0;t<ou.length;t++)if(n=ou[t],r=n.interleaved,r!==null){n.interleaved=null;var a=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=a,r.next=o}n.pending=r}ou=null}return e}function J6(e,t){do{var n=Kr;try{if(D5(),d0.current=K0,J0){for(var r=jr.memoizedState;r!==null;){var a=r.queue;a!==null&&(a.pending=null),r=r.next}J0=!1}if(ku=0,ps=es=jr=null,Cm=!1,sg=0,B5.current=null,n===null||n.return===null){ns=1,og=t,Kr=null;break}e:{var i=e,o=n.return,l=n,c=t;if(t=Ds,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,u=l,h=u.tag;if(!(u.mode&1)&&(h===0||h===11||h===15)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var p=RD(o);if(p!==null){p.flags&=-257,LD(p,o,l,i,t),p.mode&1&&MD(i,d,t),t=p,c=d;var y=t.updateQueue;if(y===null){var g=new Set;g.add(c),t.updateQueue=g}else y.add(c);break e}else{if(!(t&1)){MD(i,d,t),V5();break e}c=Error(lt(426))}}else if(Zn&&l.mode&1){var x=RD(o);if(x!==null){!(x.flags&65536)&&(x.flags|=256),LD(x,o,l,i,t),C5(Cf(c,l));break e}}i=c=Cf(c,l),ns!==4&&(ns=2),Dm===null?Dm=[i]:Dm.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var m=_6(i,c,t);DD(i,m);break e;case 1:l=c;var v=i.type,b=i.stateNode;if(!(i.flags&128)&&(typeof v.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(ed===null||!ed.has(b)))){i.flags|=65536,t&=-t,i.lanes|=t;var C=M6(i,l,t);DD(i,C);break e}}i=i.return}while(i!==null)}Q6(n)}catch(S){t=S,Kr===n&&n!==null&&(Kr=n=n.return);continue}break}while(1)}function K6(){var e=X0.current;return X0.current=K0,e===null?K0:e}function V5(){(ns===0||ns===3||ns===2)&&(ns=4),gs===null||!(Eu&268435455)&&!(e1&268435455)||zc(gs,Ds)}function ey(e,t){var n=pn;pn|=2;var r=K6();(gs!==e||Ds!==t)&&(Dl=null,fu(e,t));do try{ZB();break}catch(a){J6(e,a)}while(1);if(D5(),pn=n,X0.current=r,Kr!==null)throw Error(lt(261));return gs=null,Ds=0,ns}function ZB(){for(;Kr!==null;)X6(Kr)}function ez(){for(;Kr!==null&&!C9();)X6(Kr)}function X6(e){var t=e_(e.alternate,e,ti);e.memoizedProps=e.pendingProps,t===null?Q6(e):Kr=t,B5.current=null}function Q6(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=YB(n,t),n!==null){n.flags&=32767,Kr=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{ns=6,Kr=null;return}}else if(n=UB(n,t,ti),n!==null){Kr=n;return}if(t=t.sibling,t!==null){Kr=t;return}Kr=t=e}while(t!==null);ns===0&&(ns=5)}function Qd(e,t,n){var r=En,a=Ti.transition;try{Ti.transition=null,En=1,tz(e,t,n,r)}finally{Ti.transition=a,En=r}return null}function tz(e,t,n,r){do pf();while(Vc!==null);if(pn&6)throw Error(lt(327));n=e.finishedWork;var a=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(lt(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(L9(e,i),e===gs&&(Kr=gs=null,Ds=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||px||(px=!0,t_(L0,function(){return pf(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Ti.transition,Ti.transition=null;var o=En;En=1;var l=pn;pn|=4,B5.current=null,JB(e,n),U6(n,e),wB(sj),O0=!!rj,sj=rj=null,e.current=n,KB(n),P9(),pn=l,En=o,Ti.transition=i}else e.current=n;if(px&&(px=!1,Vc=e,Z0=a),i=e.pendingLanes,i===0&&(ed=null),E9(n.stateNode),Fa(e,Ir()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)a=t[n],r(a.value,{componentStack:a.stack,digest:a.digest});if(Q0)throw Q0=!1,e=Sj,Sj=null,e;return Z0&1&&e.tag!==0&&pf(),i=e.pendingLanes,i&1?e===Cj?km++:(km=0,Cj=e):km=0,Nd(),null}function pf(){if(Vc!==null){var e=_A(Z0),t=Ti.transition,n=En;try{if(Ti.transition=null,En=16>e?16:e,Vc===null)var r=!1;else{if(e=Vc,Vc=null,Z0=0,pn&6)throw Error(lt(331));var a=pn;for(pn|=4,Et=e.current;Et!==null;){var i=Et,o=i.child;if(Et.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var d=l[c];for(Et=d;Et!==null;){var u=Et;switch(u.tag){case 0:case 11:case 15:Pm(8,u,i)}var h=u.child;if(h!==null)h.return=u,Et=h;else for(;Et!==null;){u=Et;var f=u.sibling,p=u.return;if(H6(u),u===d){Et=null;break}if(f!==null){f.return=p,Et=f;break}Et=p}}}var y=i.alternate;if(y!==null){var g=y.child;if(g!==null){y.child=null;do{var x=g.sibling;g.sibling=null,g=x}while(g!==null)}}Et=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Et=o;else e:for(;Et!==null;){if(i=Et,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Pm(9,i,i.return)}var m=i.sibling;if(m!==null){m.return=i.return,Et=m;break e}Et=i.return}}var v=e.current;for(Et=v;Et!==null;){o=Et;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,Et=b;else e:for(o=v;Et!==null;){if(l=Et,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Zy(9,l)}}catch(S){kr(l,l.return,S)}if(l===o){Et=null;break e}var C=l.sibling;if(C!==null){C.return=l.return,Et=C;break e}Et=l.return}}if(pn=a,Nd(),Wo&&typeof Wo.onPostCommitFiberRoot=="function")try{Wo.onPostCommitFiberRoot(Vy,e)}catch{}r=!0}return r}finally{En=n,Ti.transition=t}}return!1}function GD(e,t,n){t=Cf(n,t),t=_6(e,t,1),e=Zc(e,t,1),t=va(),e!==null&&($g(e,1,t),Fa(e,t))}function kr(e,t,n){if(e.tag===3)GD(e,e,n);else for(;t!==null;){if(t.tag===3){GD(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ed===null||!ed.has(r))){e=Cf(n,e),e=M6(t,e,1),t=Zc(t,e,1),e=va(),t!==null&&($g(t,1,e),Fa(t,e));break}}t=t.return}}function nz(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=va(),e.pingedLanes|=e.suspendedLanes&n,gs===e&&(Ds&n)===n&&(ns===4||ns===3&&(Ds&130023424)===Ds&&500>Ir()-W5?fu(e,0):z5|=n),Fa(e,t)}function Z6(e,t){t===0&&(e.mode&1?(t=sx,sx<<=1,!(sx&130023424)&&(sx=4194304)):t=1);var n=va();e=Vl(e,t),e!==null&&($g(e,t,n),Fa(e,n))}function rz(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Z6(e,n)}function sz(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,a=e.memoizedState;a!==null&&(n=a.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(lt(314))}r!==null&&r.delete(t),Z6(e,n)}var e_;e_=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Ia.current)La=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return La=!1,VB(e,t,n);La=!!(e.flags&131072)}else La=!1,Zn&&t.flags&1048576&&s6(t,q0,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;h0(e,t),e=t.pendingProps;var a=wf(t,Zs.current);ff(t,n),a=L5(null,t,r,e,a,n);var i=I5();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Oa(r)?(i=!0,W0(t)):i=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,T5(t),a.updater=Qy,t.stateNode=a,a._reactInternals=t,fj(t,r,e,n),t=gj(null,t,r,!0,i,n)):(t.tag=0,Zn&&i&&N5(t),ua(null,t,a,n),t=t.child),t;case 16:r=t.elementType;e:{switch(h0(e,t),e=t.pendingProps,a=r._init,r=a(r._payload),t.type=r,a=t.tag=iz(r),e=Zi(r,e),a){case 0:t=mj(null,t,r,e,n);break e;case 1:t=FD(null,t,r,e,n);break e;case 11:t=ID(null,t,r,e,n);break e;case 14:t=OD(null,t,r,Zi(r.type,e),n);break e}throw Error(lt(306,r,""))}return t;case 0:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:Zi(r,a),mj(e,t,r,a,n);case 1:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:Zi(r,a),FD(e,t,r,a,n);case 3:e:{if(O6(t),e===null)throw Error(lt(387));r=t.pendingProps,i=t.memoizedState,a=i.element,d6(e,t),Y0(t,r,null,n);var o=t.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){a=Cf(Error(lt(423)),t),t=$D(e,t,r,n,a);break e}else if(r!==a){a=Cf(Error(lt(424)),t),t=$D(e,t,r,n,a);break e}else for(si=Qc(t.stateNode.containerInfo.firstChild),ii=t,Zn=!0,no=null,n=l6(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(jf(),r===a){t=Ul(e,t,n);break e}ua(e,t,r,n)}t=t.child}return t;case 5:return u6(t),e===null&&dj(t),r=t.type,a=t.pendingProps,i=e!==null?e.memoizedProps:null,o=a.children,aj(r,a)?o=null:i!==null&&aj(r,i)&&(t.flags|=32),I6(e,t),ua(e,t,o,n),t.child;case 6:return e===null&&dj(t),null;case 13:return F6(e,t,n);case 4:return A5(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Nf(t,null,r,n):ua(e,t,r,n),t.child;case 11:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:Zi(r,a),ID(e,t,r,a,n);case 7:return ua(e,t,t.pendingProps,n),t.child;case 8:return ua(e,t,t.pendingProps.children,n),t.child;case 12:return ua(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,a=t.pendingProps,i=t.memoizedProps,o=a.value,zn(V0,r._currentValue),r._currentValue=o,i!==null)if(lo(i.value,o)){if(i.children===a.children&&!Ia.current){t=Ul(e,t,n);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=Il(-1,n&-n),c.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var u=d.pending;u===null?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),uj(i.return,n,t),l.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(lt(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),uj(o,n,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}ua(e,t,a.children,n),t=t.child}return t;case 9:return a=t.type,r=t.pendingProps.children,ff(t,n),a=_i(a),r=r(a),t.flags|=1,ua(e,t,r,n),t.child;case 14:return r=t.type,a=Zi(r,t.pendingProps),a=Zi(r.type,a),OD(e,t,r,a,n);case 15:return R6(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:Zi(r,a),h0(e,t),t.tag=1,Oa(r)?(e=!0,W0(t)):e=!1,ff(t,n),A6(t,r,a),fj(t,r,a,n),gj(null,t,r,!0,e,n);case 19:return $6(e,t,n);case 22:return L6(e,t,n)}throw Error(lt(156,t.tag))};function t_(e,t){return kA(e,t)}function az(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Di(e,t,n,r){return new az(e,t,n,r)}function U5(e){return e=e.prototype,!(!e||!e.isReactComponent)}function iz(e){if(typeof e=="function")return U5(e)?1:0;if(e!=null){if(e=e.$$typeof,e===u5)return 11;if(e===h5)return 14}return 2}function nd(e,t){var n=e.alternate;return n===null?(n=Di(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function m0(e,t,n,r,a,i){var o=2;if(r=e,typeof e=="function")U5(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Yh:return pu(n.children,a,i,t);case d5:o=8,a|=8;break;case O2:return e=Di(12,n,t,a|2),e.elementType=O2,e.lanes=i,e;case F2:return e=Di(13,n,t,a),e.elementType=F2,e.lanes=i,e;case $2:return e=Di(19,n,t,a),e.elementType=$2,e.lanes=i,e;case uA:return t1(n,a,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case cA:o=10;break e;case dA:o=9;break e;case u5:o=11;break e;case h5:o=14;break e;case Ic:o=16,r=null;break e}throw Error(lt(130,e==null?e:typeof e,""))}return t=Di(o,n,t,a),t.elementType=e,t.type=r,t.lanes=i,t}function pu(e,t,n,r){return e=Di(7,e,r,t),e.lanes=n,e}function t1(e,t,n,r){return e=Di(22,e,r,t),e.elementType=uA,e.lanes=n,e.stateNode={isHidden:!1},e}function Pw(e,t,n){return e=Di(6,e,null,t),e.lanes=n,e}function Dw(e,t,n){return t=Di(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function oz(e,t,n,r,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ow(0),this.expirationTimes=ow(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ow(0),this.identifierPrefix=r,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function Y5(e,t,n,r,a,i,o,l,c){return e=new oz(e,t,n,l,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=Di(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},T5(i),e}function lz(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Uh,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function n_(e){if(!e)return dd;e=e._reactInternals;e:{if(Uu(e)!==e||e.tag!==1)throw Error(lt(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Oa(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(lt(171))}if(e.tag===1){var n=e.type;if(Oa(n))return n6(e,n,t)}return t}function r_(e,t,n,r,a,i,o,l,c){return e=Y5(n,r,!0,e,a,i,o,l,c),e.context=n_(null),n=e.current,r=va(),a=td(n),i=Il(r,a),i.callback=t??null,Zc(n,i,a),e.current.lanes=a,$g(e,a,r),Fa(e,r),e}function n1(e,t,n,r){var a=t.current,i=va(),o=td(a);return n=n_(n),t.context===null?t.context=n:t.pendingContext=n,t=Il(i,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Zc(a,t,o),e!==null&&(io(e,a,o,i),c0(e,a,o)),o}function ty(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function JD(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function G5(e,t){JD(e,t),(e=e.alternate)&&JD(e,t)}function cz(){return null}var s_=typeof reportError=="function"?reportError:function(e){console.error(e)};function J5(e){this._internalRoot=e}r1.prototype.render=J5.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(lt(409));n1(e,t,null,null)};r1.prototype.unmount=J5.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Tu(function(){n1(null,e,null,null)}),t[ql]=null}};function r1(e){this._internalRoot=e}r1.prototype.unstable_scheduleHydration=function(e){if(e){var t=LA();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Bc.length&&t!==0&&t<Bc[n].priority;n++);Bc.splice(n,0,e),n===0&&OA(e)}};function K5(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function s1(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function KD(){}function dz(e,t,n,r,a){if(a){if(typeof r=="function"){var i=r;r=function(){var d=ty(o);i.call(d)}}var o=r_(t,r,e,0,null,!1,!1,"",KD);return e._reactRootContainer=o,e[ql]=o.current,Zm(e.nodeType===8?e.parentNode:e),Tu(),o}for(;a=e.lastChild;)e.removeChild(a);if(typeof r=="function"){var l=r;r=function(){var d=ty(c);l.call(d)}}var c=Y5(e,0,!1,null,null,!1,!1,"",KD);return e._reactRootContainer=c,e[ql]=c.current,Zm(e.nodeType===8?e.parentNode:e),Tu(function(){n1(t,c,n,r)}),c}function a1(e,t,n,r,a){var i=n._reactRootContainer;if(i){var o=i;if(typeof a=="function"){var l=a;a=function(){var c=ty(o);l.call(c)}}n1(t,o,e,a)}else o=dz(n,t,e,a,r);return ty(o)}MA=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=fm(t.pendingLanes);n!==0&&(m5(t,n|1),Fa(t,Ir()),!(pn&6)&&(Pf=Ir()+500,Nd()))}break;case 13:Tu(function(){var r=Vl(e,1);if(r!==null){var a=va();io(r,e,1,a)}}),G5(e,1)}};g5=function(e){if(e.tag===13){var t=Vl(e,134217728);if(t!==null){var n=va();io(t,e,134217728,n)}G5(e,134217728)}};RA=function(e){if(e.tag===13){var t=td(e),n=Vl(e,t);if(n!==null){var r=va();io(n,e,t,r)}G5(e,t)}};LA=function(){return En};IA=function(e,t){var n=En;try{return En=e,t()}finally{En=n}};J2=function(e,t,n){switch(t){case"input":if(W2(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var a=Jy(r);if(!a)throw Error(lt(90));fA(r),W2(r,a)}}}break;case"textarea":mA(e,n);break;case"select":t=n.value,t!=null&&cf(e,!!n.multiple,t,!1)}};jA=H5;NA=Tu;var uz={usingClientEntryPoint:!1,Events:[zg,Xh,Jy,bA,wA,H5]},Jp={findFiberByHostInstance:iu,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},hz={bundleType:Jp.bundleType,version:Jp.version,rendererPackageName:Jp.rendererPackageName,rendererConfig:Jp.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:tc.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=PA(e),e===null?null:e.stateNode},findFiberByHostInstance:Jp.findFiberByHostInstance||cz,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var mx=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!mx.isDisabled&&mx.supportsFiber)try{Vy=mx.inject(hz),Wo=mx}catch{}}ui.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=uz;ui.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!K5(t))throw Error(lt(200));return lz(e,t,null,n)};ui.createRoot=function(e,t){if(!K5(e))throw Error(lt(299));var n=!1,r="",a=s_;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=Y5(e,1,!1,null,null,n,!1,r,a),e[ql]=t.current,Zm(e.nodeType===8?e.parentNode:e),new J5(t)};ui.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(lt(188)):(e=Object.keys(e).join(","),Error(lt(268,e)));return e=PA(t),e=e===null?null:e.stateNode,e};ui.flushSync=function(e){return Tu(e)};ui.hydrate=function(e,t,n){if(!s1(t))throw Error(lt(200));return a1(null,e,t,!0,n)};ui.hydrateRoot=function(e,t,n){if(!K5(e))throw Error(lt(405));var r=n!=null&&n.hydratedSources||null,a=!1,i="",o=s_;if(n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=r_(t,null,e,1,n??null,a,!1,i,o),e[ql]=t.current,Zm(e),r)for(e=0;e<r.length;e++)n=r[e],a=n._getVersion,a=a(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,a]:t.mutableSourceEagerHydrationData.push(n,a);return new r1(t)};ui.render=function(e,t,n){if(!s1(t))throw Error(lt(200));return a1(null,e,t,!1,n)};ui.unmountComponentAtNode=function(e){if(!s1(e))throw Error(lt(40));return e._reactRootContainer?(Tu(function(){a1(null,null,e,!1,function(){e._reactRootContainer=null,e[ql]=null})}),!0):!1};ui.unstable_batchedUpdates=H5;ui.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!s1(n))throw Error(lt(200));if(e==null||e._reactInternals===void 0)throw Error(lt(38));return a1(e,t,n,!1,r)};ui.version="18.3.1-next-f1338f8080-20240426";function a_(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a_)}catch(e){console.error(e)}}a_(),aA.exports=ui;var rl=aA.exports;const Hg=qa(rl);var XD=rl;L2.createRoot=XD.createRoot,L2.hydrateRoot=XD.hydrateRoot;const i_=j.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"}),i1=j.createContext({}),o1=j.createContext(null),l1=typeof document<"u",X5=l1?j.useLayoutEffect:j.useEffect,o_=j.createContext({strict:!1}),Q5=e=>e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),fz="framerAppearId",l_="data-"+Q5(fz);function pz(e,t,n,r){const{visualElement:a}=j.useContext(i1),i=j.useContext(o_),o=j.useContext(o1),l=j.useContext(i_).reducedMotion,c=j.useRef();r=r||i.renderer,!c.current&&r&&(c.current=r(e,{visualState:t,parent:a,props:n,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:l}));const d=c.current;j.useInsertionEffect(()=>{d&&d.update(n,o)});const u=j.useRef(!!(n[l_]&&!window.HandoffComplete));return X5(()=>{d&&(d.render(),u.current&&d.animationState&&d.animationState.animateChanges())}),j.useEffect(()=>{d&&(d.updateFeatures(),!u.current&&d.animationState&&d.animationState.animateChanges(),u.current&&(u.current=!1,window.HandoffComplete=!0))}),d}function sf(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function mz(e,t,n){return j.useCallback(r=>{r&&e.mount&&e.mount(r),t&&(r?t.mount(r):t.unmount()),n&&(typeof n=="function"?n(r):sf(n)&&(n.current=r))},[t])}function lg(e){return typeof e=="string"||Array.isArray(e)}function c1(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}const Z5=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],eS=["initial",...Z5];function d1(e){return c1(e.animate)||eS.some(t=>lg(e[t]))}function c_(e){return!!(d1(e)||e.variants)}function gz(e,t){if(d1(e)){const{initial:n,animate:r}=e;return{initial:n===!1||lg(n)?n:void 0,animate:lg(r)?r:void 0}}return e.inherit!==!1?t:{}}function vz(e){const{initial:t,animate:n}=gz(e,j.useContext(i1));return j.useMemo(()=>({initial:t,animate:n}),[QD(t),QD(n)])}function QD(e){return Array.isArray(e)?e.join(" "):e}const ZD={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},cg={};for(const e in ZD)cg[e]={isEnabled:t=>ZD[e].some(n=>!!t[n])};function xz(e){for(const t in e)cg[t]={...cg[t],...e[t]}}const tS=j.createContext({}),d_=j.createContext({}),yz=Symbol.for("motionComponentSymbol");function bz({preloadedFeatures:e,createVisualElement:t,useRender:n,useVisualState:r,Component:a}){e&&xz(e);function i(l,c){let d;const u={...j.useContext(i_),...l,layoutId:wz(l)},{isStatic:h}=u,f=vz(l),p=r(l,h);if(!h&&l1){f.visualElement=pz(a,p,u,t);const y=j.useContext(d_),g=j.useContext(o_).strict;f.visualElement&&(d=f.visualElement.loadFeatures(u,g,e,y))}return j.createElement(i1.Provider,{value:f},d&&f.visualElement?j.createElement(d,{visualElement:f.visualElement,...u}):null,n(a,l,mz(p,f.visualElement,c),p,h,f.visualElement))}const o=j.forwardRef(i);return o[yz]=a,o}function wz({layoutId:e}){const t=j.useContext(tS).id;return t&&e!==void 0?t+"-"+e:e}function jz(e){function t(r,a={}){return bz(e(r,a))}if(typeof Proxy>"u")return t;const n=new Map;return new Proxy(t,{get:(r,a)=>(n.has(a)||n.set(a,t(a)),n.get(a))})}const Nz=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function nS(e){return typeof e!="string"||e.includes("-")?!1:!!(Nz.indexOf(e)>-1||/[A-Z]/.test(e))}const ny={};function Sz(e){Object.assign(ny,e)}const qg=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Yu=new Set(qg);function u_(e,{layout:t,layoutId:n}){return Yu.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!ny[e]||e==="opacity")}const Ha=e=>!!(e&&e.getVelocity),Cz={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Pz=qg.length;function Dz(e,{enableHardwareAcceleration:t=!0,allowTransformNone:n=!0},r,a){let i="";for(let o=0;o<Pz;o++){const l=qg[o];if(e[l]!==void 0){const c=Cz[l]||l;i+=`${c}(${e[l]}) `}}return t&&!e.z&&(i+="translateZ(0)"),i=i.trim(),a?i=a(e,r?"":i):n&&r&&(i="none"),i}const h_=e=>t=>typeof t=="string"&&t.startsWith(e),f_=h_("--"),kj=h_("var(--"),kz=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,Ez=(e,t)=>t&&typeof e=="number"?t.transform(e):e,ud=(e,t,n)=>Math.min(Math.max(n,e),t),Gu={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},Em={...Gu,transform:e=>ud(0,1,e)},gx={...Gu,default:1},Tm=e=>Math.round(e*1e5)/1e5,u1=/(-)?([\d]*\.?[\d])+/g,p_=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,Tz=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function Vg(e){return typeof e=="string"}const Ug=e=>({test:t=>Vg(t)&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),Mc=Ug("deg"),qo=Ug("%"),zt=Ug("px"),Az=Ug("vh"),_z=Ug("vw"),e4={...qo,parse:e=>qo.parse(e)/100,transform:e=>qo.transform(e*100)},t4={...Gu,transform:Math.round},m_={borderWidth:zt,borderTopWidth:zt,borderRightWidth:zt,borderBottomWidth:zt,borderLeftWidth:zt,borderRadius:zt,radius:zt,borderTopLeftRadius:zt,borderTopRightRadius:zt,borderBottomRightRadius:zt,borderBottomLeftRadius:zt,width:zt,maxWidth:zt,height:zt,maxHeight:zt,size:zt,top:zt,right:zt,bottom:zt,left:zt,padding:zt,paddingTop:zt,paddingRight:zt,paddingBottom:zt,paddingLeft:zt,margin:zt,marginTop:zt,marginRight:zt,marginBottom:zt,marginLeft:zt,rotate:Mc,rotateX:Mc,rotateY:Mc,rotateZ:Mc,scale:gx,scaleX:gx,scaleY:gx,scaleZ:gx,skew:Mc,skewX:Mc,skewY:Mc,distance:zt,translateX:zt,translateY:zt,translateZ:zt,x:zt,y:zt,z:zt,perspective:zt,transformPerspective:zt,opacity:Em,originX:e4,originY:e4,originZ:zt,zIndex:t4,fillOpacity:Em,strokeOpacity:Em,numOctaves:t4};function rS(e,t,n,r){const{style:a,vars:i,transform:o,transformOrigin:l}=e;let c=!1,d=!1,u=!0;for(const h in t){const f=t[h];if(f_(h)){i[h]=f;continue}const p=m_[h],y=Ez(f,p);if(Yu.has(h)){if(c=!0,o[h]=y,!u)continue;f!==(p.default||0)&&(u=!1)}else h.startsWith("origin")?(d=!0,l[h]=y):a[h]=y}if(t.transform||(c||r?a.transform=Dz(e.transform,n,u,r):a.transform&&(a.transform="none")),d){const{originX:h="50%",originY:f="50%",originZ:p=0}=l;a.transformOrigin=`${h} ${f} ${p}`}}const sS=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function g_(e,t,n){for(const r in t)!Ha(t[r])&&!u_(r,n)&&(e[r]=t[r])}function Mz({transformTemplate:e},t,n){return j.useMemo(()=>{const r=sS();return rS(r,t,{enableHardwareAcceleration:!n},e),Object.assign({},r.vars,r.style)},[t])}function Rz(e,t,n){const r=e.style||{},a={};return g_(a,r,e),Object.assign(a,Mz(e,t,n)),e.transformValues?e.transformValues(a):a}function Lz(e,t,n){const r={},a=Rz(e,t,n);return e.drag&&e.dragListener!==!1&&(r.draggable=!1,a.userSelect=a.WebkitUserSelect=a.WebkitTouchCallout="none",a.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(r.tabIndex=0),r.style=a,r}const Iz=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function ry(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||Iz.has(e)}let v_=e=>!ry(e);function Oz(e){e&&(v_=t=>t.startsWith("on")?!ry(t):e(t))}try{Oz(require("@emotion/is-prop-valid").default)}catch{}function Fz(e,t,n){const r={};for(const a in e)a==="values"&&typeof e.values=="object"||(v_(a)||n===!0&&ry(a)||!t&&!ry(a)||e.draggable&&a.startsWith("onDrag"))&&(r[a]=e[a]);return r}function n4(e,t,n){return typeof e=="string"?e:zt.transform(t+n*e)}function $z(e,t,n){const r=n4(t,e.x,e.width),a=n4(n,e.y,e.height);return`${r} ${a}`}const Bz={offset:"stroke-dashoffset",array:"stroke-dasharray"},zz={offset:"strokeDashoffset",array:"strokeDasharray"};function Wz(e,t,n=1,r=0,a=!0){e.pathLength=1;const i=a?Bz:zz;e[i.offset]=zt.transform(-r);const o=zt.transform(t),l=zt.transform(n);e[i.array]=`${o} ${l}`}function aS(e,{attrX:t,attrY:n,attrScale:r,originX:a,originY:i,pathLength:o,pathSpacing:l=1,pathOffset:c=0,...d},u,h,f){if(rS(e,d,u,f),h){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:p,style:y,dimensions:g}=e;p.transform&&(g&&(y.transform=p.transform),delete p.transform),g&&(a!==void 0||i!==void 0||y.transform)&&(y.transformOrigin=$z(g,a!==void 0?a:.5,i!==void 0?i:.5)),t!==void 0&&(p.x=t),n!==void 0&&(p.y=n),r!==void 0&&(p.scale=r),o!==void 0&&Wz(p,o,l,c,!1)}const x_=()=>({...sS(),attrs:{}}),iS=e=>typeof e=="string"&&e.toLowerCase()==="svg";function Hz(e,t,n,r){const a=j.useMemo(()=>{const i=x_();return aS(i,t,{enableHardwareAcceleration:!1},iS(r),e.transformTemplate),{...i.attrs,style:{...i.style}}},[t]);if(e.style){const i={};g_(i,e.style,e),a.style={...i,...a.style}}return a}function qz(e=!1){return(n,r,a,{latestValues:i},o)=>{const c=(nS(n)?Hz:Lz)(r,i,o,n),u={...Fz(r,typeof n=="string",e),...c,ref:a},{children:h}=r,f=j.useMemo(()=>Ha(h)?h.get():h,[h]);return j.createElement(n,{...u,children:f})}}function y_(e,{style:t,vars:n},r,a){Object.assign(e.style,t,a&&a.getProjectionStyles(r));for(const i in n)e.style.setProperty(i,n[i])}const b_=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function w_(e,t,n,r){y_(e,t,void 0,r);for(const a in t.attrs)e.setAttribute(b_.has(a)?a:Q5(a),t.attrs[a])}function oS(e,t){const{style:n}=e,r={};for(const a in n)(Ha(n[a])||t.style&&Ha(t.style[a])||u_(a,e))&&(r[a]=n[a]);return r}function j_(e,t){const n=oS(e,t);for(const r in e)if(Ha(e[r])||Ha(t[r])){const a=qg.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;n[a]=e[r]}return n}function lS(e,t,n,r={},a={}){return typeof t=="function"&&(t=t(n!==void 0?n:e.custom,r,a)),typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"&&(t=t(n!==void 0?n:e.custom,r,a)),t}function N_(e){const t=j.useRef(null);return t.current===null&&(t.current=e()),t.current}const sy=e=>Array.isArray(e),Vz=e=>!!(e&&typeof e=="object"&&e.mix&&e.toValue),Uz=e=>sy(e)?e[e.length-1]||0:e;function g0(e){const t=Ha(e)?e.get():e;return Vz(t)?t.toValue():t}function Yz({scrapeMotionValuesFromProps:e,createRenderState:t,onMount:n},r,a,i){const o={latestValues:Gz(r,a,i,e),renderState:t()};return n&&(o.mount=l=>n(r,l,o)),o}const S_=e=>(t,n)=>{const r=j.useContext(i1),a=j.useContext(o1),i=()=>Yz(e,t,r,a);return n?i():N_(i)};function Gz(e,t,n,r){const a={},i=r(e,{});for(const f in i)a[f]=g0(i[f]);let{initial:o,animate:l}=e;const c=d1(e),d=c_(e);t&&d&&!c&&e.inherit!==!1&&(o===void 0&&(o=t.initial),l===void 0&&(l=t.animate));let u=n?n.initial===!1:!1;u=u||o===!1;const h=u?l:o;return h&&typeof h!="boolean"&&!c1(h)&&(Array.isArray(h)?h:[h]).forEach(p=>{const y=lS(e,p);if(!y)return;const{transitionEnd:g,transition:x,...m}=y;for(const v in m){let b=m[v];if(Array.isArray(b)){const C=u?b.length-1:0;b=b[C]}b!==null&&(a[v]=b)}for(const v in g)a[v]=g[v]}),a}const Ar=e=>e;class r4{constructor(){this.order=[],this.scheduled=new Set}add(t){if(!this.scheduled.has(t))return this.scheduled.add(t),this.order.push(t),!0}remove(t){const n=this.order.indexOf(t);n!==-1&&(this.order.splice(n,1),this.scheduled.delete(t))}clear(){this.order.length=0,this.scheduled.clear()}}function Jz(e){let t=new r4,n=new r4,r=0,a=!1,i=!1;const o=new WeakSet,l={schedule:(c,d=!1,u=!1)=>{const h=u&&a,f=h?t:n;return d&&o.add(c),f.add(c)&&h&&a&&(r=t.order.length),c},cancel:c=>{n.remove(c),o.delete(c)},process:c=>{if(a){i=!0;return}if(a=!0,[t,n]=[n,t],n.clear(),r=t.order.length,r)for(let d=0;d<r;d++){const u=t.order[d];u(c),o.has(u)&&(l.schedule(u),e())}a=!1,i&&(i=!1,l.process(c))}};return l}const vx=["prepare","read","update","preRender","render","postRender"],Kz=40;function Xz(e,t){let n=!1,r=!0;const a={delta:0,timestamp:0,isProcessing:!1},i=vx.reduce((h,f)=>(h[f]=Jz(()=>n=!0),h),{}),o=h=>i[h].process(a),l=()=>{const h=performance.now();n=!1,a.delta=r?1e3/60:Math.max(Math.min(h-a.timestamp,Kz),1),a.timestamp=h,a.isProcessing=!0,vx.forEach(o),a.isProcessing=!1,n&&t&&(r=!1,e(l))},c=()=>{n=!0,r=!0,a.isProcessing||e(l)};return{schedule:vx.reduce((h,f)=>{const p=i[f];return h[f]=(y,g=!1,x=!1)=>(n||c(),p.schedule(y,g,x)),h},{}),cancel:h=>vx.forEach(f=>i[f].cancel(h)),state:a,steps:i}}const{schedule:Wn,cancel:Yl,state:Us,steps:kw}=Xz(typeof requestAnimationFrame<"u"?requestAnimationFrame:Ar,!0),Qz={useVisualState:S_({scrapeMotionValuesFromProps:j_,createRenderState:x_,onMount:(e,t,{renderState:n,latestValues:r})=>{Wn.read(()=>{try{n.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}}),Wn.render(()=>{aS(n,r,{enableHardwareAcceleration:!1},iS(t.tagName),e.transformTemplate),w_(t,n)})}})},Zz={useVisualState:S_({scrapeMotionValuesFromProps:oS,createRenderState:sS})};function eW(e,{forwardMotionProps:t=!1},n,r){return{...nS(e)?Qz:Zz,preloadedFeatures:n,useRender:qz(t),createVisualElement:r,Component:e}}function Rl(e,t,n,r={passive:!0}){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n)}const C_=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1;function h1(e,t="page"){return{point:{x:e[t+"X"],y:e[t+"Y"]}}}const tW=e=>t=>C_(t)&&e(t,h1(t));function Ol(e,t,n,r){return Rl(e,t,tW(n),r)}const nW=(e,t)=>n=>t(e(n)),rd=(...e)=>e.reduce(nW);function P_(e){let t=null;return()=>{const n=()=>{t=null};return t===null?(t=e,n):!1}}const s4=P_("dragHorizontal"),a4=P_("dragVertical");function D_(e){let t=!1;if(e==="y")t=a4();else if(e==="x")t=s4();else{const n=s4(),r=a4();n&&r?t=()=>{n(),r()}:(n&&n(),r&&r())}return t}function k_(){const e=D_(!0);return e?(e(),!1):!0}class Sd{constructor(t){this.isMounted=!1,this.node=t}update(){}}function i4(e,t){const n="pointer"+(t?"enter":"leave"),r="onHover"+(t?"Start":"End"),a=(i,o)=>{if(i.pointerType==="touch"||k_())return;const l=e.getProps();e.animationState&&l.whileHover&&e.animationState.setActive("whileHover",t),l[r]&&Wn.update(()=>l[r](i,o))};return Ol(e.current,n,a,{passive:!e.getProps()[r]})}class rW extends Sd{mount(){this.unmount=rd(i4(this.node,!0),i4(this.node,!1))}unmount(){}}class sW extends Sd{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=rd(Rl(this.node.current,"focus",()=>this.onFocus()),Rl(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const E_=(e,t)=>t?e===t?!0:E_(e,t.parentElement):!1;function Ew(e,t){if(!t)return;const n=new PointerEvent("pointer"+e);t(n,h1(n))}class aW extends Sd{constructor(){super(...arguments),this.removeStartListeners=Ar,this.removeEndListeners=Ar,this.removeAccessibleListeners=Ar,this.startPointerPress=(t,n)=>{if(this.isPressing)return;this.removeEndListeners();const r=this.node.getProps(),i=Ol(window,"pointerup",(l,c)=>{if(!this.checkPressEnd())return;const{onTap:d,onTapCancel:u,globalTapTarget:h}=this.node.getProps();Wn.update(()=>{!h&&!E_(this.node.current,l.target)?u&&u(l,c):d&&d(l,c)})},{passive:!(r.onTap||r.onPointerUp)}),o=Ol(window,"pointercancel",(l,c)=>this.cancelPress(l,c),{passive:!(r.onTapCancel||r.onPointerCancel)});this.removeEndListeners=rd(i,o),this.startPress(t,n)},this.startAccessiblePress=()=>{const t=i=>{if(i.key!=="Enter"||this.isPressing)return;const o=l=>{l.key!=="Enter"||!this.checkPressEnd()||Ew("up",(c,d)=>{const{onTap:u}=this.node.getProps();u&&Wn.update(()=>u(c,d))})};this.removeEndListeners(),this.removeEndListeners=Rl(this.node.current,"keyup",o),Ew("down",(l,c)=>{this.startPress(l,c)})},n=Rl(this.node.current,"keydown",t),r=()=>{this.isPressing&&Ew("cancel",(i,o)=>this.cancelPress(i,o))},a=Rl(this.node.current,"blur",r);this.removeAccessibleListeners=rd(n,a)}}startPress(t,n){this.isPressing=!0;const{onTapStart:r,whileTap:a}=this.node.getProps();a&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),r&&Wn.update(()=>r(t,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!k_()}cancelPress(t,n){if(!this.checkPressEnd())return;const{onTapCancel:r}=this.node.getProps();r&&Wn.update(()=>r(t,n))}mount(){const t=this.node.getProps(),n=Ol(t.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(t.onTapStart||t.onPointerStart)}),r=Rl(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=rd(n,r)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const Ej=new WeakMap,Tw=new WeakMap,iW=e=>{const t=Ej.get(e.target);t&&t(e)},oW=e=>{e.forEach(iW)};function lW({root:e,...t}){const n=e||document;Tw.has(n)||Tw.set(n,{});const r=Tw.get(n),a=JSON.stringify(t);return r[a]||(r[a]=new IntersectionObserver(oW,{root:e,...t})),r[a]}function cW(e,t,n){const r=lW(t);return Ej.set(e,n),r.observe(e),()=>{Ej.delete(e),r.unobserve(e)}}const dW={some:0,all:1};class uW extends Sd{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:r,amount:a="some",once:i}=t,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof a=="number"?a:dW[a]},l=c=>{const{isIntersecting:d}=c;if(this.isInView===d||(this.isInView=d,i&&!d&&this.hasEnteredView))return;d&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",d);const{onViewportEnter:u,onViewportLeave:h}=this.node.getProps(),f=d?u:h;f&&f(c)};return cW(this.node.current,o,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(hW(t,n))&&this.startObserver()}unmount(){}}function hW({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const fW={inView:{Feature:uW},tap:{Feature:aW},focus:{Feature:sW},hover:{Feature:rW}};function T_(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}function pW(e){const t={};return e.values.forEach((n,r)=>t[r]=n.get()),t}function mW(e){const t={};return e.values.forEach((n,r)=>t[r]=n.getVelocity()),t}function f1(e,t,n){const r=e.getProps();return lS(r,t,n!==void 0?n:r.custom,pW(e),mW(e))}let gW=Ar,cS=Ar;const sd=e=>e*1e3,Fl=e=>e/1e3,vW={current:!1},A_=e=>Array.isArray(e)&&typeof e[0]=="number";function __(e){return!!(!e||typeof e=="string"&&M_[e]||A_(e)||Array.isArray(e)&&e.every(__))}const mm=([e,t,n,r])=>`cubic-bezier(${e}, ${t}, ${n}, ${r})`,M_={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:mm([0,.65,.55,1]),circOut:mm([.55,0,1,.45]),backIn:mm([.31,.01,.66,-.59]),backOut:mm([.33,1.53,.69,.99])};function R_(e){if(e)return A_(e)?mm(e):Array.isArray(e)?e.map(R_):M_[e]}function xW(e,t,n,{delay:r=0,duration:a,repeat:i=0,repeatType:o="loop",ease:l,times:c}={}){const d={[t]:n};c&&(d.offset=c);const u=R_(l);return Array.isArray(u)&&(d.easing=u),e.animate(d,{delay:r,duration:a,easing:Array.isArray(u)?"linear":u,fill:"both",iterations:i+1,direction:o==="reverse"?"alternate":"normal"})}function yW(e,{repeat:t,repeatType:n="loop"}){const r=t&&n!=="loop"&&t%2===1?0:e.length-1;return e[r]}const L_=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,bW=1e-7,wW=12;function jW(e,t,n,r,a){let i,o,l=0;do o=t+(n-t)/2,i=L_(o,r,a)-e,i>0?n=o:t=o;while(Math.abs(i)>bW&&++l<wW);return o}function Yg(e,t,n,r){if(e===t&&n===r)return Ar;const a=i=>jW(i,0,1,e,n);return i=>i===0||i===1?i:L_(a(i),t,r)}const NW=Yg(.42,0,1,1),SW=Yg(0,0,.58,1),I_=Yg(.42,0,.58,1),CW=e=>Array.isArray(e)&&typeof e[0]!="number",O_=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,F_=e=>t=>1-e(1-t),dS=e=>1-Math.sin(Math.acos(e)),$_=F_(dS),PW=O_(dS),B_=Yg(.33,1.53,.69,.99),uS=F_(B_),DW=O_(uS),kW=e=>(e*=2)<1?.5*uS(e):.5*(2-Math.pow(2,-10*(e-1))),EW={linear:Ar,easeIn:NW,easeInOut:I_,easeOut:SW,circIn:dS,circInOut:PW,circOut:$_,backIn:uS,backInOut:DW,backOut:B_,anticipate:kW},o4=e=>{if(Array.isArray(e)){cS(e.length===4);const[t,n,r,a]=e;return Yg(t,n,r,a)}else if(typeof e=="string")return EW[e];return e},hS=(e,t)=>n=>!!(Vg(n)&&Tz.test(n)&&n.startsWith(e)||t&&Object.prototype.hasOwnProperty.call(n,t)),z_=(e,t,n)=>r=>{if(!Vg(r))return r;const[a,i,o,l]=r.match(u1);return{[e]:parseFloat(a),[t]:parseFloat(i),[n]:parseFloat(o),alpha:l!==void 0?parseFloat(l):1}},TW=e=>ud(0,255,e),Aw={...Gu,transform:e=>Math.round(TW(e))},cu={test:hS("rgb","red"),parse:z_("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:r=1})=>"rgba("+Aw.transform(e)+", "+Aw.transform(t)+", "+Aw.transform(n)+", "+Tm(Em.transform(r))+")"};function AW(e){let t="",n="",r="",a="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),a=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),a=e.substring(4,5),t+=t,n+=n,r+=r,a+=a),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:a?parseInt(a,16)/255:1}}const Tj={test:hS("#"),parse:AW,transform:cu.transform},af={test:hS("hsl","hue"),parse:z_("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:r=1})=>"hsla("+Math.round(e)+", "+qo.transform(Tm(t))+", "+qo.transform(Tm(n))+", "+Tm(Em.transform(r))+")"},ca={test:e=>cu.test(e)||Tj.test(e)||af.test(e),parse:e=>cu.test(e)?cu.parse(e):af.test(e)?af.parse(e):Tj.parse(e),transform:e=>Vg(e)?e:e.hasOwnProperty("red")?cu.transform(e):af.transform(e)},xr=(e,t,n)=>-n*e+n*t+e;function _w(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function _W({hue:e,saturation:t,lightness:n,alpha:r}){e/=360,t/=100,n/=100;let a=0,i=0,o=0;if(!t)a=i=o=n;else{const l=n<.5?n*(1+t):n+t-n*t,c=2*n-l;a=_w(c,l,e+1/3),i=_w(c,l,e),o=_w(c,l,e-1/3)}return{red:Math.round(a*255),green:Math.round(i*255),blue:Math.round(o*255),alpha:r}}const Mw=(e,t,n)=>{const r=e*e;return Math.sqrt(Math.max(0,n*(t*t-r)+r))},MW=[Tj,cu,af],RW=e=>MW.find(t=>t.test(e));function l4(e){const t=RW(e);let n=t.parse(e);return t===af&&(n=_W(n)),n}const W_=(e,t)=>{const n=l4(e),r=l4(t),a={...n};return i=>(a.red=Mw(n.red,r.red,i),a.green=Mw(n.green,r.green,i),a.blue=Mw(n.blue,r.blue,i),a.alpha=xr(n.alpha,r.alpha,i),cu.transform(a))};function LW(e){var t,n;return isNaN(e)&&Vg(e)&&(((t=e.match(u1))===null||t===void 0?void 0:t.length)||0)+(((n=e.match(p_))===null||n===void 0?void 0:n.length)||0)>0}const H_={regex:kz,countKey:"Vars",token:"${v}",parse:Ar},q_={regex:p_,countKey:"Colors",token:"${c}",parse:ca.parse},V_={regex:u1,countKey:"Numbers",token:"${n}",parse:Gu.parse};function Rw(e,{regex:t,countKey:n,token:r,parse:a}){const i=e.tokenised.match(t);i&&(e["num"+n]=i.length,e.tokenised=e.tokenised.replace(t,r),e.values.push(...i.map(a)))}function ay(e){const t=e.toString(),n={value:t,tokenised:t,values:[],numVars:0,numColors:0,numNumbers:0};return n.value.includes("var(--")&&Rw(n,H_),Rw(n,q_),Rw(n,V_),n}function U_(e){return ay(e).values}function Y_(e){const{values:t,numColors:n,numVars:r,tokenised:a}=ay(e),i=t.length;return o=>{let l=a;for(let c=0;c<i;c++)c<r?l=l.replace(H_.token,o[c]):c<r+n?l=l.replace(q_.token,ca.transform(o[c])):l=l.replace(V_.token,Tm(o[c]));return l}}const IW=e=>typeof e=="number"?0:e;function OW(e){const t=U_(e);return Y_(e)(t.map(IW))}const hd={test:LW,parse:U_,createTransformer:Y_,getAnimatableNone:OW},G_=(e,t)=>n=>`${n>0?t:e}`;function J_(e,t){return typeof e=="number"?n=>xr(e,t,n):ca.test(e)?W_(e,t):e.startsWith("var(")?G_(e,t):X_(e,t)}const K_=(e,t)=>{const n=[...e],r=n.length,a=e.map((i,o)=>J_(i,t[o]));return i=>{for(let o=0;o<r;o++)n[o]=a[o](i);return n}},FW=(e,t)=>{const n={...e,...t},r={};for(const a in n)e[a]!==void 0&&t[a]!==void 0&&(r[a]=J_(e[a],t[a]));return a=>{for(const i in r)n[i]=r[i](a);return n}},X_=(e,t)=>{const n=hd.createTransformer(t),r=ay(e),a=ay(t);return r.numVars===a.numVars&&r.numColors===a.numColors&&r.numNumbers>=a.numNumbers?rd(K_(r.values,a.values),n):G_(e,t)},dg=(e,t,n)=>{const r=t-e;return r===0?1:(n-e)/r},c4=(e,t)=>n=>xr(e,t,n);function $W(e){return typeof e=="number"?c4:typeof e=="string"?ca.test(e)?W_:X_:Array.isArray(e)?K_:typeof e=="object"?FW:c4}function BW(e,t,n){const r=[],a=n||$W(e[0]),i=e.length-1;for(let o=0;o<i;o++){let l=a(e[o],e[o+1]);if(t){const c=Array.isArray(t)?t[o]||Ar:t;l=rd(c,l)}r.push(l)}return r}function Q_(e,t,{clamp:n=!0,ease:r,mixer:a}={}){const i=e.length;if(cS(i===t.length),i===1)return()=>t[0];e[0]>e[i-1]&&(e=[...e].reverse(),t=[...t].reverse());const o=BW(t,r,a),l=o.length,c=d=>{let u=0;if(l>1)for(;u<e.length-2&&!(d<e[u+1]);u++);const h=dg(e[u],e[u+1],d);return o[u](h)};return n?d=>c(ud(e[0],e[i-1],d)):c}function zW(e,t){const n=e[e.length-1];for(let r=1;r<=t;r++){const a=dg(0,t,r);e.push(xr(n,1,a))}}function WW(e){const t=[0];return zW(t,e.length-1),t}function HW(e,t){return e.map(n=>n*t)}function qW(e,t){return e.map(()=>t||I_).splice(0,e.length-1)}function iy({duration:e=300,keyframes:t,times:n,ease:r="easeInOut"}){const a=CW(r)?r.map(o4):o4(r),i={done:!1,value:t[0]},o=HW(n&&n.length===t.length?n:WW(t),e),l=Q_(o,t,{ease:Array.isArray(a)?a:qW(t,a)});return{calculatedDuration:e,next:c=>(i.value=l(c),i.done=c>=e,i)}}function Z_(e,t){return t?e*(1e3/t):0}const VW=5;function eM(e,t,n){const r=Math.max(t-VW,0);return Z_(n-e(r),t-r)}const Lw=.001,UW=.01,d4=10,YW=.05,GW=1;function JW({duration:e=800,bounce:t=.25,velocity:n=0,mass:r=1}){let a,i;gW(e<=sd(d4));let o=1-t;o=ud(YW,GW,o),e=ud(UW,d4,Fl(e)),o<1?(a=d=>{const u=d*o,h=u*e,f=u-n,p=Aj(d,o),y=Math.exp(-h);return Lw-f/p*y},i=d=>{const h=d*o*e,f=h*n+n,p=Math.pow(o,2)*Math.pow(d,2)*e,y=Math.exp(-h),g=Aj(Math.pow(d,2),o);return(-a(d)+Lw>0?-1:1)*((f-p)*y)/g}):(a=d=>{const u=Math.exp(-d*e),h=(d-n)*e+1;return-Lw+u*h},i=d=>{const u=Math.exp(-d*e),h=(n-d)*(e*e);return u*h});const l=5/e,c=XW(a,i,l);if(e=sd(e),isNaN(c))return{stiffness:100,damping:10,duration:e};{const d=Math.pow(c,2)*r;return{stiffness:d,damping:o*2*Math.sqrt(r*d),duration:e}}}const KW=12;function XW(e,t,n){let r=n;for(let a=1;a<KW;a++)r=r-e(r)/t(r);return r}function Aj(e,t){return e*Math.sqrt(1-t*t)}const QW=["duration","bounce"],ZW=["stiffness","damping","mass"];function u4(e,t){return t.some(n=>e[n]!==void 0)}function eH(e){let t={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...e};if(!u4(e,ZW)&&u4(e,QW)){const n=JW(e);t={...t,...n,mass:1},t.isResolvedFromDuration=!0}return t}function tM({keyframes:e,restDelta:t,restSpeed:n,...r}){const a=e[0],i=e[e.length-1],o={done:!1,value:a},{stiffness:l,damping:c,mass:d,duration:u,velocity:h,isResolvedFromDuration:f}=eH({...r,velocity:-Fl(r.velocity||0)}),p=h||0,y=c/(2*Math.sqrt(l*d)),g=i-a,x=Fl(Math.sqrt(l/d)),m=Math.abs(g)<5;n||(n=m?.01:2),t||(t=m?.005:.5);let v;if(y<1){const b=Aj(x,y);v=C=>{const S=Math.exp(-y*x*C);return i-S*((p+y*x*g)/b*Math.sin(b*C)+g*Math.cos(b*C))}}else if(y===1)v=b=>i-Math.exp(-x*b)*(g+(p+x*g)*b);else{const b=x*Math.sqrt(y*y-1);v=C=>{const S=Math.exp(-y*x*C),P=Math.min(b*C,300);return i-S*((p+y*x*g)*Math.sinh(P)+b*g*Math.cosh(P))/b}}return{calculatedDuration:f&&u||null,next:b=>{const C=v(b);if(f)o.done=b>=u;else{let S=p;b!==0&&(y<1?S=eM(v,b,C):S=0);const P=Math.abs(S)<=n,D=Math.abs(i-C)<=t;o.done=P&&D}return o.value=o.done?i:C,o}}}function h4({keyframes:e,velocity:t=0,power:n=.8,timeConstant:r=325,bounceDamping:a=10,bounceStiffness:i=500,modifyTarget:o,min:l,max:c,restDelta:d=.5,restSpeed:u}){const h=e[0],f={done:!1,value:h},p=N=>l!==void 0&&N<l||c!==void 0&&N>c,y=N=>l===void 0?c:c===void 0||Math.abs(l-N)<Math.abs(c-N)?l:c;let g=n*t;const x=h+g,m=o===void 0?x:o(x);m!==x&&(g=m-h);const v=N=>-g*Math.exp(-N/r),b=N=>m+v(N),C=N=>{const M=v(N),L=b(N);f.done=Math.abs(M)<=d,f.value=f.done?m:L};let S,P;const D=N=>{p(f.value)&&(S=N,P=tM({keyframes:[f.value,y(f.value)],velocity:eM(b,N,f.value),damping:a,stiffness:i,restDelta:d,restSpeed:u}))};return D(0),{calculatedDuration:null,next:N=>{let M=!1;return!P&&S===void 0&&(M=!0,C(N),D(N)),S!==void 0&&N>S?P.next(N-S):(!M&&C(N),f)}}}const tH=e=>{const t=({timestamp:n})=>e(n);return{start:()=>Wn.update(t,!0),stop:()=>Yl(t),now:()=>Us.isProcessing?Us.timestamp:performance.now()}},f4=2e4;function p4(e){let t=0;const n=50;let r=e.next(t);for(;!r.done&&t<f4;)t+=n,r=e.next(t);return t>=f4?1/0:t}const nH={decay:h4,inertia:h4,tween:iy,keyframes:iy,spring:tM};function oy({autoplay:e=!0,delay:t=0,driver:n=tH,keyframes:r,type:a="keyframes",repeat:i=0,repeatDelay:o=0,repeatType:l="loop",onPlay:c,onStop:d,onComplete:u,onUpdate:h,...f}){let p=1,y=!1,g,x;const m=()=>{x=new Promise($=>{g=$})};m();let v;const b=nH[a]||iy;let C;b!==iy&&typeof r[0]!="number"&&(C=Q_([0,100],r,{clamp:!1}),r=[0,100]);const S=b({...f,keyframes:r});let P;l==="mirror"&&(P=b({...f,keyframes:[...r].reverse(),velocity:-(f.velocity||0)}));let D="idle",N=null,M=null,L=null;S.calculatedDuration===null&&i&&(S.calculatedDuration=p4(S));const{calculatedDuration:T}=S;let E=1/0,A=1/0;T!==null&&(E=T+o,A=E*(i+1)-o);let O=0;const W=$=>{if(M===null)return;p>0&&(M=Math.min(M,$)),p<0&&(M=Math.min($-A/p,M)),N!==null?O=N:O=Math.round($-M)*p;const I=O-t*(p>=0?1:-1),U=p>=0?I<0:I>A;O=Math.max(I,0),D==="finished"&&N===null&&(O=A);let q=O,X=S;if(i){const me=Math.min(O,A)/E;let Le=Math.floor(me),ie=me%1;!ie&&me>=1&&(ie=1),ie===1&&Le--,Le=Math.min(Le,i+1),!!(Le%2)&&(l==="reverse"?(ie=1-ie,o&&(ie-=o/E)):l==="mirror"&&(X=P)),q=ud(0,1,ie)*E}const te=U?{done:!1,value:r[0]}:X.next(q);C&&(te.value=C(te.value));let{done:ae}=te;!U&&T!==null&&(ae=p>=0?O>=A:O<=0);const le=N===null&&(D==="finished"||D==="running"&&ae);return h&&h(te.value),le&&V(),te},z=()=>{v&&v.stop(),v=void 0},F=()=>{D="idle",z(),g(),m(),M=L=null},V=()=>{D="finished",u&&u(),z(),g()},B=()=>{if(y)return;v||(v=n(W));const $=v.now();c&&c(),N!==null?M=$-N:(!M||D==="finished")&&(M=$),D==="finished"&&m(),L=M,N=null,D="running",v.start()};e&&B();const Y={then($,I){return x.then($,I)},get time(){return Fl(O)},set time($){$=sd($),O=$,N!==null||!v||p===0?N=$:M=v.now()-$/p},get duration(){const $=S.calculatedDuration===null?p4(S):S.calculatedDuration;return Fl($)},get speed(){return p},set speed($){$===p||!v||(p=$,Y.time=Fl(O))},get state(){return D},play:B,pause:()=>{D="paused",N=O},stop:()=>{y=!0,D!=="idle"&&(D="idle",d&&d(),F())},cancel:()=>{L!==null&&W(L),F()},complete:()=>{D="finished"},sample:$=>(M=0,W($))};return Y}function rH(e){let t;return()=>(t===void 0&&(t=e()),t)}const sH=rH(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),aH=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),xx=10,iH=2e4,oH=(e,t)=>t.type==="spring"||e==="backgroundColor"||!__(t.ease);function lH(e,t,{onUpdate:n,onComplete:r,...a}){if(!(sH()&&aH.has(t)&&!a.repeatDelay&&a.repeatType!=="mirror"&&a.damping!==0&&a.type!=="inertia"))return!1;let o=!1,l,c,d=!1;const u=()=>{c=new Promise(b=>{l=b})};u();let{keyframes:h,duration:f=300,ease:p,times:y}=a;if(oH(t,a)){const b=oy({...a,repeat:0,delay:0});let C={done:!1,value:h[0]};const S=[];let P=0;for(;!C.done&&P<iH;)C=b.sample(P),S.push(C.value),P+=xx;y=void 0,h=S,f=P-xx,p="linear"}const g=xW(e.owner.current,t,h,{...a,duration:f,ease:p,times:y}),x=()=>{d=!1,g.cancel()},m=()=>{d=!0,Wn.update(x),l(),u()};return g.onfinish=()=>{d||(e.set(yW(h,a)),r&&r(),m())},{then(b,C){return c.then(b,C)},attachTimeline(b){return g.timeline=b,g.onfinish=null,Ar},get time(){return Fl(g.currentTime||0)},set time(b){g.currentTime=sd(b)},get speed(){return g.playbackRate},set speed(b){g.playbackRate=b},get duration(){return Fl(f)},play:()=>{o||(g.play(),Yl(x))},pause:()=>g.pause(),stop:()=>{if(o=!0,g.playState==="idle")return;const{currentTime:b}=g;if(b){const C=oy({...a,autoplay:!1});e.setWithVelocity(C.sample(b-xx).value,C.sample(b).value,xx)}m()},complete:()=>{d||g.finish()},cancel:m}}function cH({keyframes:e,delay:t,onUpdate:n,onComplete:r}){const a=()=>(n&&n(e[e.length-1]),r&&r(),{time:0,speed:1,duration:0,play:Ar,pause:Ar,stop:Ar,then:i=>(i(),Promise.resolve()),cancel:Ar,complete:Ar});return t?oy({keyframes:[0,1],duration:0,delay:t,onComplete:a}):a()}const dH={type:"spring",stiffness:500,damping:25,restSpeed:10},uH=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),hH={type:"keyframes",duration:.8},fH={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},pH=(e,{keyframes:t})=>t.length>2?hH:Yu.has(e)?e.startsWith("scale")?uH(t[1]):dH:fH,_j=(e,t)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(hd.test(t)||t==="0")&&!t.startsWith("url(")),mH=new Set(["brightness","contrast","saturate","opacity"]);function gH(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[r]=n.match(u1)||[];if(!r)return e;const a=n.replace(r,"");let i=mH.has(t)?1:0;return r!==n&&(i*=100),t+"("+i+a+")"}const vH=/([a-z-]*)\(.*?\)/g,Mj={...hd,getAnimatableNone:e=>{const t=e.match(vH);return t?t.map(gH).join(" "):e}},xH={...m_,color:ca,backgroundColor:ca,outlineColor:ca,fill:ca,stroke:ca,borderColor:ca,borderTopColor:ca,borderRightColor:ca,borderBottomColor:ca,borderLeftColor:ca,filter:Mj,WebkitFilter:Mj},fS=e=>xH[e];function nM(e,t){let n=fS(e);return n!==Mj&&(n=hd),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const rM=e=>/^0[^.\s]+$/.test(e);function yH(e){if(typeof e=="number")return e===0;if(e!==null)return e==="none"||e==="0"||rM(e)}function bH(e,t,n,r){const a=_j(t,n);let i;Array.isArray(n)?i=[...n]:i=[null,n];const o=r.from!==void 0?r.from:e.get();let l;const c=[];for(let d=0;d<i.length;d++)i[d]===null&&(i[d]=d===0?o:i[d-1]),yH(i[d])&&c.push(d),typeof i[d]=="string"&&i[d]!=="none"&&i[d]!=="0"&&(l=i[d]);if(a&&c.length&&l)for(let d=0;d<c.length;d++){const u=c[d];i[u]=nM(t,l)}return i}function wH({when:e,delay:t,delayChildren:n,staggerChildren:r,staggerDirection:a,repeat:i,repeatType:o,repeatDelay:l,from:c,elapsed:d,...u}){return!!Object.keys(u).length}function pS(e,t){return e[t]||e.default||e}const jH={skipAnimations:!1},mS=(e,t,n,r={})=>a=>{const i=pS(r,e)||{},o=i.delay||r.delay||0;let{elapsed:l=0}=r;l=l-sd(o);const c=bH(t,e,n,i),d=c[0],u=c[c.length-1],h=_j(e,d),f=_j(e,u);let p={keyframes:c,velocity:t.getVelocity(),ease:"easeOut",...i,delay:-l,onUpdate:y=>{t.set(y),i.onUpdate&&i.onUpdate(y)},onComplete:()=>{a(),i.onComplete&&i.onComplete()}};if(wH(i)||(p={...p,...pH(e,p)}),p.duration&&(p.duration=sd(p.duration)),p.repeatDelay&&(p.repeatDelay=sd(p.repeatDelay)),!h||!f||vW.current||i.type===!1||jH.skipAnimations)return cH(p);if(!r.isHandoff&&t.owner&&t.owner.current instanceof HTMLElement&&!t.owner.getProps().onUpdate){const y=lH(t,e,p);if(y)return y}return oy(p)};function ly(e){return!!(Ha(e)&&e.add)}const sM=e=>/^\-?\d*\.?\d+$/.test(e);function gS(e,t){e.indexOf(t)===-1&&e.push(t)}function vS(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}class xS{constructor(){this.subscriptions=[]}add(t){return gS(this.subscriptions,t),()=>vS(this.subscriptions,t)}notify(t,n,r){const a=this.subscriptions.length;if(a)if(a===1)this.subscriptions[0](t,n,r);else for(let i=0;i<a;i++){const o=this.subscriptions[i];o&&o(t,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const NH=e=>!isNaN(parseFloat(e));class SH{constructor(t,n={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(r,a=!0)=>{this.prev=this.current,this.current=r;const{delta:i,timestamp:o}=Us;this.lastUpdated!==o&&(this.timeDelta=i,this.lastUpdated=o,Wn.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),a&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>Wn.postRender(this.velocityCheck),this.velocityCheck=({timestamp:r})=>{r!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=t,this.canTrackVelocity=NH(this.current),this.owner=n.owner}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new xS);const r=this.events[t].add(n);return t==="change"?()=>{r(),Wn.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t,n=!0){!n||!this.passiveEffect?this.updateAndNotify(t,n):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,n,r){this.set(n),this.prev=t,this.timeDelta=r}jump(t){this.updateAndNotify(t),this.prev=t,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?Z_(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Df(e,t){return new SH(e,t)}const aM=e=>t=>t.test(e),CH={test:e=>e==="auto",parse:e=>e},iM=[Gu,zt,qo,Mc,_z,Az,CH],Kp=e=>iM.find(aM(e)),PH=[...iM,ca,hd],DH=e=>PH.find(aM(e));function kH(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,Df(n))}function EH(e,t){const n=f1(e,t);let{transitionEnd:r={},transition:a={},...i}=n?e.makeTargetAnimatable(n,!1):{};i={...i,...r};for(const o in i){const l=Uz(i[o]);kH(e,o,l)}}function TH(e,t,n){var r,a;const i=Object.keys(t).filter(l=>!e.hasValue(l)),o=i.length;if(o)for(let l=0;l<o;l++){const c=i[l],d=t[c];let u=null;Array.isArray(d)&&(u=d[0]),u===null&&(u=(a=(r=n[c])!==null&&r!==void 0?r:e.readValue(c))!==null&&a!==void 0?a:t[c]),u!=null&&(typeof u=="string"&&(sM(u)||rM(u))?u=parseFloat(u):!DH(u)&&hd.test(d)&&(u=nM(c,d)),e.addValue(c,Df(u,{owner:e})),n[c]===void 0&&(n[c]=u),u!==null&&e.setBaseTarget(c,u))}}function AH(e,t){return t?(t[e]||t.default||t).from:void 0}function _H(e,t,n){const r={};for(const a in e){const i=AH(a,t);if(i!==void 0)r[a]=i;else{const o=n.getValue(a);o&&(r[a]=o.get())}}return r}function MH({protectedKeys:e,needsAnimating:t},n){const r=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,r}function RH(e,t){const n=e.get();if(Array.isArray(t)){for(let r=0;r<t.length;r++)if(t[r]!==n)return!0}else return n!==t}function oM(e,t,{delay:n=0,transitionOverride:r,type:a}={}){let{transition:i=e.getDefaultTransition(),transitionEnd:o,...l}=e.makeTargetAnimatable(t);const c=e.getValue("willChange");r&&(i=r);const d=[],u=a&&e.animationState&&e.animationState.getState()[a];for(const h in l){const f=e.getValue(h),p=l[h];if(!f||p===void 0||u&&MH(u,h))continue;const y={delay:n,elapsed:0,...pS(i||{},h)};if(window.HandoffAppearAnimations){const m=e.getProps()[l_];if(m){const v=window.HandoffAppearAnimations(m,h,f,Wn);v!==null&&(y.elapsed=v,y.isHandoff=!0)}}let g=!y.isHandoff&&!RH(f,p);if(y.type==="spring"&&(f.getVelocity()||y.velocity)&&(g=!1),f.animation&&(g=!1),g)continue;f.start(mS(h,f,p,e.shouldReduceMotion&&Yu.has(h)?{type:!1}:y));const x=f.animation;ly(c)&&(c.add(h),x.then(()=>c.remove(h))),d.push(x)}return o&&Promise.all(d).then(()=>{o&&EH(e,o)}),d}function Rj(e,t,n={}){const r=f1(e,t,n.custom);let{transition:a=e.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(a=n.transitionOverride);const i=r?()=>Promise.all(oM(e,r,n)):()=>Promise.resolve(),o=e.variantChildren&&e.variantChildren.size?(c=0)=>{const{delayChildren:d=0,staggerChildren:u,staggerDirection:h}=a;return LH(e,t,d+c,u,h,n)}:()=>Promise.resolve(),{when:l}=a;if(l){const[c,d]=l==="beforeChildren"?[i,o]:[o,i];return c().then(()=>d())}else return Promise.all([i(),o(n.delay)])}function LH(e,t,n=0,r=0,a=1,i){const o=[],l=(e.variantChildren.size-1)*r,c=a===1?(d=0)=>d*r:(d=0)=>l-d*r;return Array.from(e.variantChildren).sort(IH).forEach((d,u)=>{d.notify("AnimationStart",t),o.push(Rj(d,t,{...i,delay:n+c(u)}).then(()=>d.notify("AnimationComplete",t)))}),Promise.all(o)}function IH(e,t){return e.sortNodePosition(t)}function OH(e,t,n={}){e.notify("AnimationStart",t);let r;if(Array.isArray(t)){const a=t.map(i=>Rj(e,i,n));r=Promise.all(a)}else if(typeof t=="string")r=Rj(e,t,n);else{const a=typeof t=="function"?f1(e,t,n.custom):t;r=Promise.all(oM(e,a,n))}return r.then(()=>e.notify("AnimationComplete",t))}const FH=[...Z5].reverse(),$H=Z5.length;function BH(e){return t=>Promise.all(t.map(({animation:n,options:r})=>OH(e,n,r)))}function zH(e){let t=BH(e);const n=HH();let r=!0;const a=(c,d)=>{const u=f1(e,d);if(u){const{transition:h,transitionEnd:f,...p}=u;c={...c,...p,...f}}return c};function i(c){t=c(e)}function o(c,d){const u=e.getProps(),h=e.getVariantContext(!0)||{},f=[],p=new Set;let y={},g=1/0;for(let m=0;m<$H;m++){const v=FH[m],b=n[v],C=u[v]!==void 0?u[v]:h[v],S=lg(C),P=v===d?b.isActive:null;P===!1&&(g=m);let D=C===h[v]&&C!==u[v]&&S;if(D&&r&&e.manuallyAnimateOnMount&&(D=!1),b.protectedKeys={...y},!b.isActive&&P===null||!C&&!b.prevProp||c1(C)||typeof C=="boolean")continue;let M=WH(b.prevProp,C)||v===d&&b.isActive&&!D&&S||m>g&&S,L=!1;const T=Array.isArray(C)?C:[C];let E=T.reduce(a,{});P===!1&&(E={});const{prevResolvedValues:A={}}=b,O={...A,...E},W=z=>{M=!0,p.has(z)&&(L=!0,p.delete(z)),b.needsAnimating[z]=!0};for(const z in O){const F=E[z],V=A[z];if(y.hasOwnProperty(z))continue;let B=!1;sy(F)&&sy(V)?B=!T_(F,V):B=F!==V,B?F!==void 0?W(z):p.add(z):F!==void 0&&p.has(z)?W(z):b.protectedKeys[z]=!0}b.prevProp=C,b.prevResolvedValues=E,b.isActive&&(y={...y,...E}),r&&e.blockInitialAnimation&&(M=!1),M&&(!D||L)&&f.push(...T.map(z=>({animation:z,options:{type:v,...c}})))}if(p.size){const m={};p.forEach(v=>{const b=e.getBaseTarget(v);b!==void 0&&(m[v]=b)}),f.push({animation:m})}let x=!!f.length;return r&&(u.initial===!1||u.initial===u.animate)&&!e.manuallyAnimateOnMount&&(x=!1),r=!1,x?t(f):Promise.resolve()}function l(c,d,u){var h;if(n[c].isActive===d)return Promise.resolve();(h=e.variantChildren)===null||h===void 0||h.forEach(p=>{var y;return(y=p.animationState)===null||y===void 0?void 0:y.setActive(c,d)}),n[c].isActive=d;const f=o(u,c);for(const p in n)n[p].protectedKeys={};return f}return{animateChanges:o,setActive:l,setAnimateFunction:i,getState:()=>n}}function WH(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!T_(t,e):!1}function Jd(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function HH(){return{animate:Jd(!0),whileInView:Jd(),whileHover:Jd(),whileTap:Jd(),whileDrag:Jd(),whileFocus:Jd(),exit:Jd()}}class qH extends Sd{constructor(t){super(t),t.animationState||(t.animationState=zH(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();this.unmount(),c1(t)&&(this.unmount=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){}}let VH=0;class UH extends Sd{constructor(){super(...arguments),this.id=VH++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n,custom:r}=this.node.presenceContext,{isPresent:a}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===a)return;const i=this.node.animationState.setActive("exit",!t,{custom:r??this.node.getProps().custom});n&&!t&&i.then(()=>n(this.id))}mount(){const{register:t}=this.node.presenceContext||{};t&&(this.unmount=t(this.id))}unmount(){}}const YH={animation:{Feature:qH},exit:{Feature:UH}},m4=(e,t)=>Math.abs(e-t);function GH(e,t){const n=m4(e.x,t.x),r=m4(e.y,t.y);return Math.sqrt(n**2+r**2)}class lM{constructor(t,n,{transformPagePoint:r,contextWindow:a,dragSnapToOrigin:i=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const h=Ow(this.lastMoveEventInfo,this.history),f=this.startEvent!==null,p=GH(h.offset,{x:0,y:0})>=3;if(!f&&!p)return;const{point:y}=h,{timestamp:g}=Us;this.history.push({...y,timestamp:g});const{onStart:x,onMove:m}=this.handlers;f||(x&&x(this.lastMoveEvent,h),this.startEvent=this.lastMoveEvent),m&&m(this.lastMoveEvent,h)},this.handlePointerMove=(h,f)=>{this.lastMoveEvent=h,this.lastMoveEventInfo=Iw(f,this.transformPagePoint),Wn.update(this.updatePoint,!0)},this.handlePointerUp=(h,f)=>{this.end();const{onEnd:p,onSessionEnd:y,resumeAnimation:g}=this.handlers;if(this.dragSnapToOrigin&&g&&g(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const x=Ow(h.type==="pointercancel"?this.lastMoveEventInfo:Iw(f,this.transformPagePoint),this.history);this.startEvent&&p&&p(h,x),y&&y(h,x)},!C_(t))return;this.dragSnapToOrigin=i,this.handlers=n,this.transformPagePoint=r,this.contextWindow=a||window;const o=h1(t),l=Iw(o,this.transformPagePoint),{point:c}=l,{timestamp:d}=Us;this.history=[{...c,timestamp:d}];const{onSessionStart:u}=n;u&&u(t,Ow(l,this.history)),this.removeListeners=rd(Ol(this.contextWindow,"pointermove",this.handlePointerMove),Ol(this.contextWindow,"pointerup",this.handlePointerUp),Ol(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),Yl(this.updatePoint)}}function Iw(e,t){return t?{point:t(e.point)}:e}function g4(e,t){return{x:e.x-t.x,y:e.y-t.y}}function Ow({point:e},t){return{point:e,delta:g4(e,cM(t)),offset:g4(e,JH(t)),velocity:KH(t,.1)}}function JH(e){return e[0]}function cM(e){return e[e.length-1]}function KH(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,r=null;const a=cM(e);for(;n>=0&&(r=e[n],!(a.timestamp-r.timestamp>sd(t)));)n--;if(!r)return{x:0,y:0};const i=Fl(a.timestamp-r.timestamp);if(i===0)return{x:0,y:0};const o={x:(a.x-r.x)/i,y:(a.y-r.y)/i};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function ci(e){return e.max-e.min}function Lj(e,t=0,n=.01){return Math.abs(e-t)<=n}function v4(e,t,n,r=.5){e.origin=r,e.originPoint=xr(t.min,t.max,e.origin),e.scale=ci(n)/ci(t),(Lj(e.scale,1,1e-4)||isNaN(e.scale))&&(e.scale=1),e.translate=xr(n.min,n.max,e.origin)-e.originPoint,(Lj(e.translate)||isNaN(e.translate))&&(e.translate=0)}function Am(e,t,n,r){v4(e.x,t.x,n.x,r?r.originX:void 0),v4(e.y,t.y,n.y,r?r.originY:void 0)}function x4(e,t,n){e.min=n.min+t.min,e.max=e.min+ci(t)}function XH(e,t,n){x4(e.x,t.x,n.x),x4(e.y,t.y,n.y)}function y4(e,t,n){e.min=t.min-n.min,e.max=e.min+ci(t)}function _m(e,t,n){y4(e.x,t.x,n.x),y4(e.y,t.y,n.y)}function QH(e,{min:t,max:n},r){return t!==void 0&&e<t?e=r?xr(t,e,r.min):Math.max(e,t):n!==void 0&&e>n&&(e=r?xr(n,e,r.max):Math.min(e,n)),e}function b4(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function ZH(e,{top:t,left:n,bottom:r,right:a}){return{x:b4(e.x,n,a),y:b4(e.y,t,r)}}function w4(e,t){let n=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,r]=[r,n]),{min:n,max:r}}function eq(e,t){return{x:w4(e.x,t.x),y:w4(e.y,t.y)}}function tq(e,t){let n=.5;const r=ci(e),a=ci(t);return a>r?n=dg(t.min,t.max-r,e.min):r>a&&(n=dg(e.min,e.max-a,t.min)),ud(0,1,n)}function nq(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const Ij=.35;function rq(e=Ij){return e===!1?e=0:e===!0&&(e=Ij),{x:j4(e,"left","right"),y:j4(e,"top","bottom")}}function j4(e,t,n){return{min:N4(e,t),max:N4(e,n)}}function N4(e,t){return typeof e=="number"?e:e[t]||0}const S4=()=>({translate:0,scale:1,origin:0,originPoint:0}),of=()=>({x:S4(),y:S4()}),C4=()=>({min:0,max:0}),Jr=()=>({x:C4(),y:C4()});function ji(e){return[e("x"),e("y")]}function dM({top:e,left:t,right:n,bottom:r}){return{x:{min:t,max:n},y:{min:e,max:r}}}function sq({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function aq(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function Fw(e){return e===void 0||e===1}function Oj({scale:e,scaleX:t,scaleY:n}){return!Fw(e)||!Fw(t)||!Fw(n)}function Zd(e){return Oj(e)||uM(e)||e.z||e.rotate||e.rotateX||e.rotateY}function uM(e){return P4(e.x)||P4(e.y)}function P4(e){return e&&e!=="0%"}function cy(e,t,n){const r=e-n,a=t*r;return n+a}function D4(e,t,n,r,a){return a!==void 0&&(e=cy(e,a,r)),cy(e,n,r)+t}function Fj(e,t=0,n=1,r,a){e.min=D4(e.min,t,n,r,a),e.max=D4(e.max,t,n,r,a)}function hM(e,{x:t,y:n}){Fj(e.x,t.translate,t.scale,t.originPoint),Fj(e.y,n.translate,n.scale,n.originPoint)}function iq(e,t,n,r=!1){const a=n.length;if(!a)return;t.x=t.y=1;let i,o;for(let l=0;l<a;l++){i=n[l],o=i.projectionDelta;const c=i.instance;c&&c.style&&c.style.display==="contents"||(r&&i.options.layoutScroll&&i.scroll&&i!==i.root&&lf(e,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),o&&(t.x*=o.x.scale,t.y*=o.y.scale,hM(e,o)),r&&Zd(i.latestValues)&&lf(e,i.latestValues))}t.x=k4(t.x),t.y=k4(t.y)}function k4(e){return Number.isInteger(e)||e>1.0000000000001||e<.999999999999?e:1}function Fc(e,t){e.min=e.min+t,e.max=e.max+t}function E4(e,t,[n,r,a]){const i=t[a]!==void 0?t[a]:.5,o=xr(e.min,e.max,i);Fj(e,t[n],t[r],o,t.scale)}const oq=["x","scaleX","originX"],lq=["y","scaleY","originY"];function lf(e,t){E4(e.x,t,oq),E4(e.y,t,lq)}function fM(e,t){return dM(aq(e.getBoundingClientRect(),t))}function cq(e,t,n){const r=fM(e,n),{scroll:a}=t;return a&&(Fc(r.x,a.offset.x),Fc(r.y,a.offset.y)),r}const pM=({current:e})=>e?e.ownerDocument.defaultView:null,dq=new WeakMap;class uq{constructor(t){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Jr(),this.visualElement=t}start(t,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const a=u=>{const{dragSnapToOrigin:h}=this.getProps();h?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(h1(u,"page").point)},i=(u,h)=>{const{drag:f,dragPropagation:p,onDragStart:y}=this.getProps();if(f&&!p&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=D_(f),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),ji(x=>{let m=this.getAxisMotionValue(x).get()||0;if(qo.test(m)){const{projection:v}=this.visualElement;if(v&&v.layout){const b=v.layout.layoutBox[x];b&&(m=ci(b)*(parseFloat(m)/100))}}this.originPoint[x]=m}),y&&Wn.update(()=>y(u,h),!1,!0);const{animationState:g}=this.visualElement;g&&g.setActive("whileDrag",!0)},o=(u,h)=>{const{dragPropagation:f,dragDirectionLock:p,onDirectionLock:y,onDrag:g}=this.getProps();if(!f&&!this.openGlobalLock)return;const{offset:x}=h;if(p&&this.currentDirection===null){this.currentDirection=hq(x),this.currentDirection!==null&&y&&y(this.currentDirection);return}this.updateAxis("x",h.point,x),this.updateAxis("y",h.point,x),this.visualElement.render(),g&&g(u,h)},l=(u,h)=>this.stop(u,h),c=()=>ji(u=>{var h;return this.getAnimationState(u)==="paused"&&((h=this.getAxisMotionValue(u).animation)===null||h===void 0?void 0:h.play())}),{dragSnapToOrigin:d}=this.getProps();this.panSession=new lM(t,{onSessionStart:a,onStart:i,onMove:o,onSessionEnd:l,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:d,contextWindow:pM(this.visualElement)})}stop(t,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:a}=n;this.startAnimation(a);const{onDragEnd:i}=this.getProps();i&&Wn.update(()=>i(t,n))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,r){const{drag:a}=this.getProps();if(!r||!yx(t,a,this.currentDirection))return;const i=this.getAxisMotionValue(t);let o=this.originPoint[t]+r[t];this.constraints&&this.constraints[t]&&(o=QH(o,this.constraints[t],this.elastic[t])),i.set(o)}resolveConstraints(){var t;const{dragConstraints:n,dragElastic:r}=this.getProps(),a=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(t=this.visualElement.projection)===null||t===void 0?void 0:t.layout,i=this.constraints;n&&sf(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&a?this.constraints=ZH(a.layoutBox,n):this.constraints=!1,this.elastic=rq(r),i!==this.constraints&&a&&this.constraints&&!this.hasMutatedConstraints&&ji(o=>{this.getAxisMotionValue(o)&&(this.constraints[o]=nq(a.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!sf(t))return!1;const r=t.current,{projection:a}=this.visualElement;if(!a||!a.layout)return!1;const i=cq(r,a.root,this.visualElement.getTransformPagePoint());let o=eq(a.layout.layoutBox,i);if(n){const l=n(sq(o));this.hasMutatedConstraints=!!l,l&&(o=dM(l))}return o}startAnimation(t){const{drag:n,dragMomentum:r,dragElastic:a,dragTransition:i,dragSnapToOrigin:o,onDragTransitionEnd:l}=this.getProps(),c=this.constraints||{},d=ji(u=>{if(!yx(u,n,this.currentDirection))return;let h=c&&c[u]||{};o&&(h={min:0,max:0});const f=a?200:1e6,p=a?40:1e7,y={type:"inertia",velocity:r?t[u]:0,bounceStiffness:f,bounceDamping:p,timeConstant:750,restDelta:1,restSpeed:10,...i,...h};return this.startAxisValueAnimation(u,y)});return Promise.all(d).then(l)}startAxisValueAnimation(t,n){const r=this.getAxisMotionValue(t);return r.start(mS(t,r,0,n))}stopAnimation(){ji(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){ji(t=>{var n;return(n=this.getAxisMotionValue(t).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(t){var n;return(n=this.getAxisMotionValue(t).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(t){const n="_drag"+t.toUpperCase(),r=this.visualElement.getProps(),a=r[n];return a||this.visualElement.getValue(t,(r.initial?r.initial[t]:void 0)||0)}snapToCursor(t){ji(n=>{const{drag:r}=this.getProps();if(!yx(n,r,this.currentDirection))return;const{projection:a}=this.visualElement,i=this.getAxisMotionValue(n);if(a&&a.layout){const{min:o,max:l}=a.layout.layoutBox[n];i.set(t[n]-xr(o,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!sf(n)||!r||!this.constraints)return;this.stopAnimation();const a={x:0,y:0};ji(o=>{const l=this.getAxisMotionValue(o);if(l){const c=l.get();a[o]=tq({min:c,max:c},this.constraints[o])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),ji(o=>{if(!yx(o,t,null))return;const l=this.getAxisMotionValue(o),{min:c,max:d}=this.constraints[o];l.set(xr(c,d,a[o]))})}addListeners(){if(!this.visualElement.current)return;dq.set(this.visualElement,this);const t=this.visualElement.current,n=Ol(t,"pointerdown",c=>{const{drag:d,dragListener:u=!0}=this.getProps();d&&u&&this.start(c)}),r=()=>{const{dragConstraints:c}=this.getProps();sf(c)&&(this.constraints=this.resolveRefConstraints())},{projection:a}=this.visualElement,i=a.addEventListener("measure",r);a&&!a.layout&&(a.root&&a.root.updateScroll(),a.updateLayout()),r();const o=Rl(window,"resize",()=>this.scalePositionWithinConstraints()),l=a.addEventListener("didUpdate",({delta:c,hasLayoutChanged:d})=>{this.isDragging&&d&&(ji(u=>{const h=this.getAxisMotionValue(u);h&&(this.originPoint[u]+=c[u].translate,h.set(h.get()+c[u].translate))}),this.visualElement.render())});return()=>{o(),n(),i(),l&&l()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:a=!1,dragConstraints:i=!1,dragElastic:o=Ij,dragMomentum:l=!0}=t;return{...t,drag:n,dragDirectionLock:r,dragPropagation:a,dragConstraints:i,dragElastic:o,dragMomentum:l}}}function yx(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function hq(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class fq extends Sd{constructor(t){super(t),this.removeGroupControls=Ar,this.removeListeners=Ar,this.controls=new uq(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Ar}unmount(){this.removeGroupControls(),this.removeListeners()}}const T4=e=>(t,n)=>{e&&Wn.update(()=>e(t,n))};class pq extends Sd{constructor(){super(...arguments),this.removePointerDownListener=Ar}onPointerDown(t){this.session=new lM(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:pM(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:r,onPanEnd:a}=this.node.getProps();return{onSessionStart:T4(t),onStart:T4(n),onMove:r,onEnd:(i,o)=>{delete this.session,a&&Wn.update(()=>a(i,o))}}}mount(){this.removePointerDownListener=Ol(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function mq(){const e=j.useContext(o1);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:n,register:r}=e,a=j.useId();return j.useEffect(()=>r(a),[]),!t&&n?[!1,()=>n&&n(a)]:[!0]}const v0={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function A4(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const Xp={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(zt.test(e))e=parseFloat(e);else return e;const n=A4(e,t.target.x),r=A4(e,t.target.y);return`${n}% ${r}%`}},gq={correct:(e,{treeScale:t,projectionDelta:n})=>{const r=e,a=hd.parse(e);if(a.length>5)return r;const i=hd.createTransformer(e),o=typeof a[0]!="number"?1:0,l=n.x.scale*t.x,c=n.y.scale*t.y;a[0+o]/=l,a[1+o]/=c;const d=xr(l,c,.5);return typeof a[2+o]=="number"&&(a[2+o]/=d),typeof a[3+o]=="number"&&(a[3+o]/=d),i(a)}};class vq extends Q.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r,layoutId:a}=this.props,{projection:i}=t;Sz(xq),i&&(n.group&&n.group.add(i),r&&r.register&&a&&r.register(i),i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),v0.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:r,drag:a,isPresent:i}=this.props,o=r.projection;return o&&(o.isPresent=i,a||t.layoutDependency!==n||n===void 0?o.willUpdate():this.safeToRemove(),t.isPresent!==i&&(i?o.promote():o.relegate()||Wn.postRender(()=>{const l=o.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),queueMicrotask(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:a}=t;a&&(a.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(a),r&&r.deregister&&r.deregister(a))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function mM(e){const[t,n]=mq(),r=j.useContext(tS);return Q.createElement(vq,{...e,layoutGroup:r,switchLayoutGroup:j.useContext(d_),isPresent:t,safeToRemove:n})}const xq={borderRadius:{...Xp,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Xp,borderTopRightRadius:Xp,borderBottomLeftRadius:Xp,borderBottomRightRadius:Xp,boxShadow:gq},gM=["TopLeft","TopRight","BottomLeft","BottomRight"],yq=gM.length,_4=e=>typeof e=="string"?parseFloat(e):e,M4=e=>typeof e=="number"||zt.test(e);function bq(e,t,n,r,a,i){a?(e.opacity=xr(0,n.opacity!==void 0?n.opacity:1,wq(r)),e.opacityExit=xr(t.opacity!==void 0?t.opacity:1,0,jq(r))):i&&(e.opacity=xr(t.opacity!==void 0?t.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let o=0;o<yq;o++){const l=`border${gM[o]}Radius`;let c=R4(t,l),d=R4(n,l);if(c===void 0&&d===void 0)continue;c||(c=0),d||(d=0),c===0||d===0||M4(c)===M4(d)?(e[l]=Math.max(xr(_4(c),_4(d),r),0),(qo.test(d)||qo.test(c))&&(e[l]+="%")):e[l]=d}(t.rotate||n.rotate)&&(e.rotate=xr(t.rotate||0,n.rotate||0,r))}function R4(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const wq=vM(0,.5,$_),jq=vM(.5,.95,Ar);function vM(e,t,n){return r=>r<e?0:r>t?1:n(dg(e,t,r))}function L4(e,t){e.min=t.min,e.max=t.max}function wi(e,t){L4(e.x,t.x),L4(e.y,t.y)}function I4(e,t,n,r,a){return e-=t,e=cy(e,1/n,r),a!==void 0&&(e=cy(e,1/a,r)),e}function Nq(e,t=0,n=1,r=.5,a,i=e,o=e){if(qo.test(t)&&(t=parseFloat(t),t=xr(o.min,o.max,t/100)-o.min),typeof t!="number")return;let l=xr(i.min,i.max,r);e===i&&(l-=t),e.min=I4(e.min,t,n,l,a),e.max=I4(e.max,t,n,l,a)}function O4(e,t,[n,r,a],i,o){Nq(e,t[n],t[r],t[a],t.scale,i,o)}const Sq=["x","scaleX","originX"],Cq=["y","scaleY","originY"];function F4(e,t,n,r){O4(e.x,t,Sq,n?n.x:void 0,r?r.x:void 0),O4(e.y,t,Cq,n?n.y:void 0,r?r.y:void 0)}function $4(e){return e.translate===0&&e.scale===1}function xM(e){return $4(e.x)&&$4(e.y)}function Pq(e,t){return e.x.min===t.x.min&&e.x.max===t.x.max&&e.y.min===t.y.min&&e.y.max===t.y.max}function yM(e,t){return Math.round(e.x.min)===Math.round(t.x.min)&&Math.round(e.x.max)===Math.round(t.x.max)&&Math.round(e.y.min)===Math.round(t.y.min)&&Math.round(e.y.max)===Math.round(t.y.max)}function B4(e){return ci(e.x)/ci(e.y)}class Dq{constructor(){this.members=[]}add(t){gS(this.members,t),t.scheduleRender()}remove(t){if(vS(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(a=>t===a);if(n===0)return!1;let r;for(let a=n;a>=0;a--){const i=this.members[a];if(i.isPresent!==!1){r=i;break}}return r?(this.promote(r),!0):!1}promote(t,n){const r=this.lead;if(t!==r&&(this.prevLead=r,this.lead=t,t.show(),r)){r.instance&&r.scheduleRender(),t.scheduleRender(),t.resumeFrom=r,n&&(t.resumeFrom.preserveOpacity=!0),r.snapshot&&(t.snapshot=r.snapshot,t.snapshot.latestValues=r.animationValues||r.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:a}=t.options;a===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:r}=t;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function z4(e,t,n){let r="";const a=e.x.translate/t.x,i=e.y.translate/t.y;if((a||i)&&(r=`translate3d(${a}px, ${i}px, 0) `),(t.x!==1||t.y!==1)&&(r+=`scale(${1/t.x}, ${1/t.y}) `),n){const{rotate:c,rotateX:d,rotateY:u}=n;c&&(r+=`rotate(${c}deg) `),d&&(r+=`rotateX(${d}deg) `),u&&(r+=`rotateY(${u}deg) `)}const o=e.x.scale*t.x,l=e.y.scale*t.y;return(o!==1||l!==1)&&(r+=`scale(${o}, ${l})`),r||"none"}const kq=(e,t)=>e.depth-t.depth;class Eq{constructor(){this.children=[],this.isDirty=!1}add(t){gS(this.children,t),this.isDirty=!0}remove(t){vS(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(kq),this.isDirty=!1,this.children.forEach(t)}}function Tq(e,t){const n=performance.now(),r=({timestamp:a})=>{const i=a-n;i>=t&&(Yl(r),e(i-t))};return Wn.read(r,!0),()=>Yl(r)}function Aq(e){window.MotionDebug&&window.MotionDebug.record(e)}function _q(e){return e instanceof SVGElement&&e.tagName!=="svg"}function Mq(e,t,n){const r=Ha(e)?e:Df(e);return r.start(mS("",r,t,n)),r.animation}const W4=["","X","Y","Z"],Rq={visibility:"hidden"},H4=1e3;let Lq=0;const eu={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function bM({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:r,resetTransform:a}){return class{constructor(o={},l=t==null?void 0:t()){this.id=Lq++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,eu.totalNodes=eu.resolvedTargetDeltas=eu.recalculatedProjection=0,this.nodes.forEach(Fq),this.nodes.forEach(Hq),this.nodes.forEach(qq),this.nodes.forEach($q),Aq(eu)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new Eq)}addEventListener(o,l){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new xS),this.eventHandlers.get(o).add(l)}notifyListeners(o,...l){const c=this.eventHandlers.get(o);c&&c.notify(...l)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,l=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=_q(o),this.instance=o;const{layoutId:c,layout:d,visualElement:u}=this.options;if(u&&!u.current&&u.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),l&&(d||c)&&(this.isLayoutDirty=!0),e){let h;const f=()=>this.root.updateBlockedByResize=!1;e(o,()=>{this.root.updateBlockedByResize=!0,h&&h(),h=Tq(f,250),v0.hasAnimatedSinceResize&&(v0.hasAnimatedSinceResize=!1,this.nodes.forEach(V4))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&u&&(c||d)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:f,hasRelativeTargetChanged:p,layout:y})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const g=this.options.transition||u.getDefaultTransition()||Jq,{onLayoutAnimationStart:x,onLayoutAnimationComplete:m}=u.getProps(),v=!this.targetLayout||!yM(this.targetLayout,y)||p,b=!f&&p;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||b||f&&(v||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(h,b);const C={...pS(g,"layout"),onPlay:x,onComplete:m};(u.shouldReduceMotion||this.options.layoutRoot)&&(C.delay=0,C.type=!1),this.startAnimation(C)}else f||V4(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=y})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Yl(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Vq),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let u=0;u<this.path.length;u++){const h=this.path[u];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:l,layout:c}=this.options;if(l===void 0&&!c)return;const d=this.getTransformTemplate();this.prevTransformTemplateValue=d?d(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(q4);return}this.isUpdating||this.nodes.forEach(zq),this.isUpdating=!1,this.nodes.forEach(Wq),this.nodes.forEach(Iq),this.nodes.forEach(Oq),this.clearAllSnapshots();const l=performance.now();Us.delta=ud(0,1e3/60,l-Us.timestamp),Us.timestamp=l,Us.isProcessing=!0,kw.update.process(Us),kw.preRender.process(Us),kw.render.process(Us),Us.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(Bq),this.sharedNodes.forEach(Uq)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Wn.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Wn.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Jr(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let l=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(l=!1),l&&(this.scroll={animationId:this.root.animationId,phase:o,isRoot:r(this.instance),offset:n(this.instance)})}resetTransform(){if(!a)return;const o=this.isLayoutDirty||this.shouldResetTransform,l=this.projectionDelta&&!xM(this.projectionDelta),c=this.getTransformTemplate(),d=c?c(this.latestValues,""):void 0,u=d!==this.prevTransformTemplateValue;o&&(l||Zd(this.latestValues)||u)&&(a(this.instance,d),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const l=this.measurePageBox();let c=this.removeElementScroll(l);return o&&(c=this.removeTransform(c)),Kq(c),{animationId:this.root.animationId,measuredBox:l,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return Jr();const l=o.measureViewportBox(),{scroll:c}=this.root;return c&&(Fc(l.x,c.offset.x),Fc(l.y,c.offset.y)),l}removeElementScroll(o){const l=Jr();wi(l,o);for(let c=0;c<this.path.length;c++){const d=this.path[c],{scroll:u,options:h}=d;if(d!==this.root&&u&&h.layoutScroll){if(u.isRoot){wi(l,o);const{scroll:f}=this.root;f&&(Fc(l.x,-f.offset.x),Fc(l.y,-f.offset.y))}Fc(l.x,u.offset.x),Fc(l.y,u.offset.y)}}return l}applyTransform(o,l=!1){const c=Jr();wi(c,o);for(let d=0;d<this.path.length;d++){const u=this.path[d];!l&&u.options.layoutScroll&&u.scroll&&u!==u.root&&lf(c,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),Zd(u.latestValues)&&lf(c,u.latestValues)}return Zd(this.latestValues)&&lf(c,this.latestValues),c}removeTransform(o){const l=Jr();wi(l,o);for(let c=0;c<this.path.length;c++){const d=this.path[c];if(!d.instance||!Zd(d.latestValues))continue;Oj(d.latestValues)&&d.updateSnapshot();const u=Jr(),h=d.measurePageBox();wi(u,h),F4(l,d.latestValues,d.snapshot?d.snapshot.layoutBox:void 0,u)}return Zd(this.latestValues)&&F4(l,this.latestValues),l}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Us.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var l;const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const d=!!this.resumingFrom||this!==c;if(!(o||d&&this.isSharedProjectionDirty||this.isProjectionDirty||!((l=this.parent)===null||l===void 0)&&l.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:h,layoutId:f}=this.options;if(!(!this.layout||!(h||f))){if(this.resolvedRelativeTargetAt=Us.timestamp,!this.targetDelta&&!this.relativeTarget){const p=this.getClosestProjectingParent();p&&p.layout&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Jr(),this.relativeTargetOrigin=Jr(),_m(this.relativeTargetOrigin,this.layout.layoutBox,p.layout.layoutBox),wi(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Jr(),this.targetWithTransforms=Jr()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),XH(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):wi(this.target,this.layout.layoutBox),hM(this.target,this.targetDelta)):wi(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const p=this.getClosestProjectingParent();p&&!!p.resumingFrom==!!this.resumingFrom&&!p.options.layoutScroll&&p.target&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Jr(),this.relativeTargetOrigin=Jr(),_m(this.relativeTargetOrigin,this.target,p.target),wi(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}eu.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||Oj(this.parent.latestValues)||uM(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const l=this.getLead(),c=!!this.resumingFrom||this!==l;let d=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(d=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(d=!1),this.resolvedRelativeTargetAt===Us.timestamp&&(d=!1),d)return;const{layout:u,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||h))return;wi(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,p=this.treeScale.y;iq(this.layoutCorrected,this.treeScale,this.path,c),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox);const{target:y}=l;if(!y){this.projectionTransform&&(this.projectionDelta=of(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=of(),this.projectionDeltaWithTransform=of());const g=this.projectionTransform;Am(this.projectionDelta,this.layoutCorrected,y,this.latestValues),this.projectionTransform=z4(this.projectionDelta,this.treeScale),(this.projectionTransform!==g||this.treeScale.x!==f||this.treeScale.y!==p)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",y)),eu.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(o,l=!1){const c=this.snapshot,d=c?c.latestValues:{},u={...this.latestValues},h=of();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const f=Jr(),p=c?c.source:void 0,y=this.layout?this.layout.source:void 0,g=p!==y,x=this.getStack(),m=!x||x.members.length<=1,v=!!(g&&!m&&this.options.crossfade===!0&&!this.path.some(Gq));this.animationProgress=0;let b;this.mixTargetDelta=C=>{const S=C/1e3;U4(h.x,o.x,S),U4(h.y,o.y,S),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(_m(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),Yq(this.relativeTarget,this.relativeTargetOrigin,f,S),b&&Pq(this.relativeTarget,b)&&(this.isProjectionDirty=!1),b||(b=Jr()),wi(b,this.relativeTarget)),g&&(this.animationValues=u,bq(u,d,this.latestValues,S,v,m)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=S},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Yl(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Wn.update(()=>{v0.hasAnimatedSinceResize=!0,this.currentAnimation=Mq(0,H4,{...o,onUpdate:l=>{this.mixTargetDelta(l),o.onUpdate&&o.onUpdate(l)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(H4),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:l,target:c,layout:d,latestValues:u}=o;if(!(!l||!c||!d)){if(this!==o&&this.layout&&d&&wM(this.options.animationType,this.layout.layoutBox,d.layoutBox)){c=this.target||Jr();const h=ci(this.layout.layoutBox.x);c.x.min=o.target.x.min,c.x.max=c.x.min+h;const f=ci(this.layout.layoutBox.y);c.y.min=o.target.y.min,c.y.max=c.y.min+f}wi(l,c),lf(l,u),Am(this.projectionDeltaWithTransform,this.layoutCorrected,l,u)}}registerSharedNode(o,l){this.sharedNodes.has(o)||this.sharedNodes.set(o,new Dq),this.sharedNodes.get(o).add(l);const d=l.options.initialPromotionConfig;l.promote({transition:d?d.transition:void 0,preserveFollowOpacity:d&&d.shouldPreserveFollowOpacity?d.shouldPreserveFollowOpacity(l):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:l}=this.options;return l?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:l}=this.options;return l?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:l,preserveFollowOpacity:c}={}){const d=this.getStack();d&&d.promote(this,c),o&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetRotation(){const{visualElement:o}=this.options;if(!o)return;let l=!1;const{latestValues:c}=o;if((c.rotate||c.rotateX||c.rotateY||c.rotateZ)&&(l=!0),!l)return;const d={};for(let u=0;u<W4.length;u++){const h="rotate"+W4[u];c[h]&&(d[h]=c[h],o.setStaticValue(h,0))}o.render();for(const u in d)o.setStaticValue(u,d[u]);o.scheduleRender()}getProjectionStyles(o){var l,c;if(!this.instance||this.isSVG)return;if(!this.isVisible)return Rq;const d={visibility:""},u=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,d.opacity="",d.pointerEvents=g0(o==null?void 0:o.pointerEvents)||"",d.transform=u?u(this.latestValues,""):"none",d;const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){const g={};return this.options.layoutId&&(g.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,g.pointerEvents=g0(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!Zd(this.latestValues)&&(g.transform=u?u({},""):"none",this.hasProjected=!1),g}const f=h.animationValues||h.latestValues;this.applyTransformsToTarget(),d.transform=z4(this.projectionDeltaWithTransform,this.treeScale,f),u&&(d.transform=u(f,d.transform));const{x:p,y}=this.projectionDelta;d.transformOrigin=`${p.origin*100}% ${y.origin*100}% 0`,h.animationValues?d.opacity=h===this?(c=(l=f.opacity)!==null&&l!==void 0?l:this.latestValues.opacity)!==null&&c!==void 0?c:1:this.preserveOpacity?this.latestValues.opacity:f.opacityExit:d.opacity=h===this?f.opacity!==void 0?f.opacity:"":f.opacityExit!==void 0?f.opacityExit:0;for(const g in ny){if(f[g]===void 0)continue;const{correct:x,applyTo:m}=ny[g],v=d.transform==="none"?f[g]:x(f[g],h);if(m){const b=m.length;for(let C=0;C<b;C++)d[m[C]]=v}else d[g]=v}return this.options.layoutId&&(d.pointerEvents=h===this?g0(o==null?void 0:o.pointerEvents)||"":"none"),d}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var l;return(l=o.currentAnimation)===null||l===void 0?void 0:l.stop()}),this.root.nodes.forEach(q4),this.root.sharedNodes.clear()}}}function Iq(e){e.updateLayout()}function Oq(e){var t;const n=((t=e.resumeFrom)===null||t===void 0?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&n&&e.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:a}=e.layout,{animationType:i}=e.options,o=n.source!==e.layout.source;i==="size"?ji(h=>{const f=o?n.measuredBox[h]:n.layoutBox[h],p=ci(f);f.min=r[h].min,f.max=f.min+p}):wM(i,n.layoutBox,r)&&ji(h=>{const f=o?n.measuredBox[h]:n.layoutBox[h],p=ci(r[h]);f.max=f.min+p,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[h].max=e.relativeTarget[h].min+p)});const l=of();Am(l,r,n.layoutBox);const c=of();o?Am(c,e.applyTransform(a,!0),n.measuredBox):Am(c,r,n.layoutBox);const d=!xM(l);let u=!1;if(!e.resumeFrom){const h=e.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:f,layout:p}=h;if(f&&p){const y=Jr();_m(y,n.layoutBox,f.layoutBox);const g=Jr();_m(g,r,p.layoutBox),yM(y,g)||(u=!0),h.options.layoutRoot&&(e.relativeTarget=g,e.relativeTargetOrigin=y,e.relativeParent=h)}}}e.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:c,layoutDelta:l,hasLayoutChanged:d,hasRelativeTargetChanged:u})}else if(e.isLead()){const{onExitComplete:r}=e.options;r&&r()}e.options.transition=void 0}function Fq(e){eu.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function $q(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function Bq(e){e.clearSnapshot()}function q4(e){e.clearMeasurements()}function zq(e){e.isLayoutDirty=!1}function Wq(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function V4(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function Hq(e){e.resolveTargetDelta()}function qq(e){e.calcProjection()}function Vq(e){e.resetRotation()}function Uq(e){e.removeLeadSnapshot()}function U4(e,t,n){e.translate=xr(t.translate,0,n),e.scale=xr(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function Y4(e,t,n,r){e.min=xr(t.min,n.min,r),e.max=xr(t.max,n.max,r)}function Yq(e,t,n,r){Y4(e.x,t.x,n.x,r),Y4(e.y,t.y,n.y,r)}function Gq(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const Jq={duration:.45,ease:[.4,0,.1,1]},G4=e=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(e),J4=G4("applewebkit/")&&!G4("chrome/")?Math.round:Ar;function K4(e){e.min=J4(e.min),e.max=J4(e.max)}function Kq(e){K4(e.x),K4(e.y)}function wM(e,t,n){return e==="position"||e==="preserve-aspect"&&!Lj(B4(t),B4(n),.2)}const Xq=bM({attachResizeListener:(e,t)=>Rl(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),$w={current:void 0},jM=bM({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!$w.current){const e=new Xq({});e.mount(window),e.setOptions({layoutScroll:!0}),$w.current=e}return $w.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),Qq={pan:{Feature:pq},drag:{Feature:fq,ProjectionNode:jM,MeasureLayout:mM}},Zq=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function eV(e){const t=Zq.exec(e);if(!t)return[,];const[,n,r]=t;return[n,r]}function $j(e,t,n=1){const[r,a]=eV(e);if(!r)return;const i=window.getComputedStyle(t).getPropertyValue(r);if(i){const o=i.trim();return sM(o)?parseFloat(o):o}else return kj(a)?$j(a,t,n+1):a}function tV(e,{...t},n){const r=e.current;if(!(r instanceof Element))return{target:t,transitionEnd:n};n&&(n={...n}),e.values.forEach(a=>{const i=a.get();if(!kj(i))return;const o=$j(i,r);o&&a.set(o)});for(const a in t){const i=t[a];if(!kj(i))continue;const o=$j(i,r);o&&(t[a]=o,n||(n={}),n[a]===void 0&&(n[a]=i))}return{target:t,transitionEnd:n}}const nV=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),NM=e=>nV.has(e),rV=e=>Object.keys(e).some(NM),X4=e=>e===Gu||e===zt,Q4=(e,t)=>parseFloat(e.split(", ")[t]),Z4=(e,t)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const a=r.match(/^matrix3d\((.+)\)$/);if(a)return Q4(a[1],t);{const i=r.match(/^matrix\((.+)\)$/);return i?Q4(i[1],e):0}},sV=new Set(["x","y","z"]),aV=qg.filter(e=>!sV.has(e));function iV(e){const t=[];return aV.forEach(n=>{const r=e.getValue(n);r!==void 0&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),t.length&&e.render(),t}const kf={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:Z4(4,13),y:Z4(5,14)};kf.translateX=kf.x;kf.translateY=kf.y;const oV=(e,t,n)=>{const r=t.measureViewportBox(),a=t.current,i=getComputedStyle(a),{display:o}=i,l={};o==="none"&&t.setStaticValue("display",e.display||"block"),n.forEach(d=>{l[d]=kf[d](r,i)}),t.render();const c=t.measureViewportBox();return n.forEach(d=>{const u=t.getValue(d);u&&u.jump(l[d]),e[d]=kf[d](c,i)}),e},lV=(e,t,n={},r={})=>{t={...t},r={...r};const a=Object.keys(t).filter(NM);let i=[],o=!1;const l=[];if(a.forEach(c=>{const d=e.getValue(c);if(!e.hasValue(c))return;let u=n[c],h=Kp(u);const f=t[c];let p;if(sy(f)){const y=f.length,g=f[0]===null?1:0;u=f[g],h=Kp(u);for(let x=g;x<y&&f[x]!==null;x++)p?cS(Kp(f[x])===p):p=Kp(f[x])}else p=Kp(f);if(h!==p)if(X4(h)&&X4(p)){const y=d.get();typeof y=="string"&&d.set(parseFloat(y)),typeof f=="string"?t[c]=parseFloat(f):Array.isArray(f)&&p===zt&&(t[c]=f.map(parseFloat))}else h!=null&&h.transform&&(p!=null&&p.transform)&&(u===0||f===0)?u===0?d.set(p.transform(u)):t[c]=h.transform(f):(o||(i=iV(e),o=!0),l.push(c),r[c]=r[c]!==void 0?r[c]:t[c],d.jump(f))}),l.length){const c=l.indexOf("height")>=0?window.pageYOffset:null,d=oV(t,e,l);return i.length&&i.forEach(([u,h])=>{e.getValue(u).set(h)}),e.render(),l1&&c!==null&&window.scrollTo({top:c}),{target:d,transitionEnd:r}}else return{target:t,transitionEnd:r}};function cV(e,t,n,r){return rV(t)?lV(e,t,n,r):{target:t,transitionEnd:r}}const dV=(e,t,n,r)=>{const a=tV(e,t,r);return t=a.target,r=a.transitionEnd,cV(e,t,n,r)},Bj={current:null},SM={current:!1};function uV(){if(SM.current=!0,!!l1)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>Bj.current=e.matches;e.addListener(t),t()}else Bj.current=!1}function hV(e,t,n){const{willChange:r}=t;for(const a in t){const i=t[a],o=n[a];if(Ha(i))e.addValue(a,i),ly(r)&&r.add(a);else if(Ha(o))e.addValue(a,Df(i,{owner:e})),ly(r)&&r.remove(a);else if(o!==i)if(e.hasValue(a)){const l=e.getValue(a);!l.hasAnimated&&l.set(i)}else{const l=e.getStaticValue(a);e.addValue(a,Df(l!==void 0?l:i,{owner:e}))}}for(const a in n)t[a]===void 0&&e.removeValue(a);return t}const ek=new WeakMap,CM=Object.keys(cg),fV=CM.length,tk=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],pV=eS.length;class mV{constructor({parent:t,props:n,presenceContext:r,reducedMotionConfig:a,visualState:i},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>Wn.render(this.render,!1,!0);const{latestValues:l,renderState:c}=i;this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=c,this.parent=t,this.props=n,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=a,this.options=o,this.isControllingVariants=d1(n),this.isVariantNode=c_(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:d,...u}=this.scrapeMotionValuesFromProps(n,{});for(const h in u){const f=u[h];l[h]!==void 0&&Ha(f)&&(f.set(l[h],!1),ly(d)&&d.add(h))}}scrapeMotionValuesFromProps(t,n){return{}}mount(t){this.current=t,ek.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),SM.current||uV(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Bj.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){ek.delete(this.current),this.projection&&this.projection.unmount(),Yl(this.notifyUpdate),Yl(this.render),this.valueSubscriptions.forEach(t=>t()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features)this.features[t].unmount();this.current=null}bindToMotionValue(t,n){const r=Yu.has(t),a=n.on("change",o=>{this.latestValues[t]=o,this.props.onUpdate&&Wn.update(this.notifyUpdate,!1,!0),r&&this.projection&&(this.projection.isTransformDirty=!0)}),i=n.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(t,()=>{a(),i()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}loadFeatures({children:t,...n},r,a,i){let o,l;for(let c=0;c<fV;c++){const d=CM[c],{isEnabled:u,Feature:h,ProjectionNode:f,MeasureLayout:p}=cg[d];f&&(o=f),u(n)&&(!this.features[d]&&h&&(this.features[d]=new h(this)),p&&(l=p))}if((this.type==="html"||this.type==="svg")&&!this.projection&&o){this.projection=new o(this.latestValues,this.parent&&this.parent.projection);const{layoutId:c,layout:d,drag:u,dragConstraints:h,layoutScroll:f,layoutRoot:p}=n;this.projection.setOptions({layoutId:c,layout:d,alwaysMeasureLayout:!!u||h&&sf(h),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof d=="string"?d:"both",initialPromotionConfig:i,layoutScroll:f,layoutRoot:p})}return l}updateFeatures(){for(const t in this.features){const n=this.features[t];n.isMounted?n.update():(n.mount(),n.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Jr()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}makeTargetAnimatable(t,n=!0){return this.makeTargetAnimatableFromInstance(t,this.props,n)}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<tk.length;r++){const a=tk[r];this.propEventSubscriptions[a]&&(this.propEventSubscriptions[a](),delete this.propEventSubscriptions[a]);const i=t["on"+a];i&&(this.propEventSubscriptions[a]=this.on(a,i))}this.prevMotionValues=hV(this,this.scrapeMotionValuesFromProps(t,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(t=!1){if(t)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const r=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(r.initial=this.props.initial),r}const n={};for(let r=0;r<pV;r++){const a=eS[r],i=this.props[a];(lg(i)||i===!1)&&(n[a]=i)}return n}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){n!==this.values.get(t)&&(this.removeValue(t),this.bindToMotionValue(t,n)),this.values.set(t,n),this.latestValues[t]=n.get()}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let r=this.values.get(t);return r===void 0&&n!==void 0&&(r=Df(n,{owner:this}),this.addValue(t,r)),r}readValue(t){var n;return this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:(n=this.getBaseTargetFromProps(this.props,t))!==null&&n!==void 0?n:this.readValueFromInstance(this.current,t,this.options)}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){var n;const{initial:r}=this.props,a=typeof r=="string"||typeof r=="object"?(n=lS(this.props,r))===null||n===void 0?void 0:n[t]:void 0;if(r&&a!==void 0)return a;const i=this.getBaseTargetFromProps(this.props,t);return i!==void 0&&!Ha(i)?i:this.initialValues[t]!==void 0&&a===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new xS),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}}class PM extends mV{sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:r}){delete n[t],delete r[t]}makeTargetAnimatableFromInstance({transition:t,transitionEnd:n,...r},{transformValues:a},i){let o=_H(r,t||{},this);if(a&&(n&&(n=a(n)),r&&(r=a(r)),o&&(o=a(o))),i){TH(this,r,o);const l=dV(this,r,o,n);n=l.transitionEnd,r=l.target}return{transition:t,transitionEnd:n,...r}}}function gV(e){return window.getComputedStyle(e)}class vV extends PM{constructor(){super(...arguments),this.type="html"}readValueFromInstance(t,n){if(Yu.has(n)){const r=fS(n);return r&&r.default||0}else{const r=gV(t),a=(f_(n)?r.getPropertyValue(n):r[n])||0;return typeof a=="string"?a.trim():a}}measureInstanceViewportBox(t,{transformPagePoint:n}){return fM(t,n)}build(t,n,r,a){rS(t,n,r,a.transformTemplate)}scrapeMotionValuesFromProps(t,n){return oS(t,n)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;Ha(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}renderInstance(t,n,r,a){y_(t,n,r,a)}}class xV extends PM{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(Yu.has(n)){const r=fS(n);return r&&r.default||0}return n=b_.has(n)?n:Q5(n),t.getAttribute(n)}measureInstanceViewportBox(){return Jr()}scrapeMotionValuesFromProps(t,n){return j_(t,n)}build(t,n,r,a){aS(t,n,r,this.isSVGTag,a.transformTemplate)}renderInstance(t,n,r,a){w_(t,n,r,a)}mount(t){this.isSVGTag=iS(t.tagName),super.mount(t)}}const yV=(e,t)=>nS(e)?new xV(t,{enableHardwareAcceleration:!1}):new vV(t,{enableHardwareAcceleration:!0}),bV={layout:{ProjectionNode:jM,MeasureLayout:mM}},wV={...YH,...fW,...Qq,...bV},Pt=jz((e,t)=>eW(e,t,wV,yV));function DM(){const e=j.useRef(!1);return X5(()=>(e.current=!0,()=>{e.current=!1}),[]),e}function jV(){const e=DM(),[t,n]=j.useState(0),r=j.useCallback(()=>{e.current&&n(t+1)},[t]);return[j.useCallback(()=>Wn.postRender(r),[r]),t]}class NV extends j.Component{getSnapshotBeforeUpdate(t){const n=this.props.childRef.current;if(n&&t.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function SV({children:e,isPresent:t}){const n=j.useId(),r=j.useRef(null),a=j.useRef({width:0,height:0,top:0,left:0});return j.useInsertionEffect(()=>{const{width:i,height:o,top:l,left:c}=a.current;if(t||!r.current||!i||!o)return;r.current.dataset.motionPopId=n;const d=document.createElement("style");return document.head.appendChild(d),d.sheet&&d.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${i}px !important;
            height: ${o}px !important;
            top: ${l}px !important;
            left: ${c}px !important;
          }
        `),()=>{document.head.removeChild(d)}},[t]),j.createElement(NV,{isPresent:t,childRef:r,sizeRef:a},j.cloneElement(e,{ref:r}))}const Bw=({children:e,initial:t,isPresent:n,onExitComplete:r,custom:a,presenceAffectsLayout:i,mode:o})=>{const l=N_(CV),c=j.useId(),d=j.useMemo(()=>({id:c,initial:t,isPresent:n,custom:a,onExitComplete:u=>{l.set(u,!0);for(const h of l.values())if(!h)return;r&&r()},register:u=>(l.set(u,!1),()=>l.delete(u))}),i?void 0:[n]);return j.useMemo(()=>{l.forEach((u,h)=>l.set(h,!1))},[n]),j.useEffect(()=>{!n&&!l.size&&r&&r()},[n]),o==="popLayout"&&(e=j.createElement(SV,{isPresent:n},e)),j.createElement(o1.Provider,{value:d},e)};function CV(){return new Map}function PV(e){return j.useEffect(()=>()=>e(),[])}const tu=e=>e.key||"";function DV(e,t){e.forEach(n=>{const r=tu(n);t.set(r,n)})}function kV(e){const t=[];return j.Children.forEach(e,n=>{j.isValidElement(n)&&t.push(n)}),t}const Es=({children:e,custom:t,initial:n=!0,onExitComplete:r,exitBeforeEnter:a,presenceAffectsLayout:i=!0,mode:o="sync"})=>{const l=j.useContext(tS).forceRender||jV()[0],c=DM(),d=kV(e);let u=d;const h=j.useRef(new Map).current,f=j.useRef(u),p=j.useRef(new Map).current,y=j.useRef(!0);if(X5(()=>{y.current=!1,DV(d,p),f.current=u}),PV(()=>{y.current=!0,p.clear(),h.clear()}),y.current)return j.createElement(j.Fragment,null,u.map(v=>j.createElement(Bw,{key:tu(v),isPresent:!0,initial:n?void 0:!1,presenceAffectsLayout:i,mode:o},v)));u=[...u];const g=f.current.map(tu),x=d.map(tu),m=g.length;for(let v=0;v<m;v++){const b=g[v];x.indexOf(b)===-1&&!h.has(b)&&h.set(b,void 0)}return o==="wait"&&h.size&&(u=[]),h.forEach((v,b)=>{if(x.indexOf(b)!==-1)return;const C=p.get(b);if(!C)return;const S=g.indexOf(b);let P=v;if(!P){const D=()=>{h.delete(b);const N=Array.from(p.keys()).filter(M=>!x.includes(M));if(N.forEach(M=>p.delete(M)),f.current=d.filter(M=>{const L=tu(M);return L===b||N.includes(L)}),!h.size){if(c.current===!1)return;l(),r&&r()}};P=j.createElement(Bw,{key:tu(C),isPresent:!1,onExitComplete:D,custom:t,presenceAffectsLayout:i,mode:o},C),h.set(b,P)}u.splice(S,0,P)}),u=u.map(v=>{const b=v.key;return h.has(b)?v:j.createElement(Bw,{key:tu(v),isPresent:!0,presenceAffectsLayout:i,mode:o},v)}),j.createElement(j.Fragment,null,h.size?u:u.map(v=>j.cloneElement(v)))};var EV={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const TV=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),ft=(e,t)=>{const n=j.forwardRef(({color:r="currentColor",size:a=24,strokeWidth:i=2,absoluteStrokeWidth:o,children:l,...c},d)=>j.createElement("svg",{ref:d,...EV,width:a,height:a,stroke:r,strokeWidth:o?Number(i)*24/Number(a):i,className:`lucide lucide-${TV(e)}`,...c},[...t.map(([u,h])=>j.createElement(u,h)),...(Array.isArray(l)?l:[l])||[]]));return n.displayName=`${e}`,n},AV=ft("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]),Au=ft("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),co=ft("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),Mm=ft("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]),zj=ft("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),Rm=ft("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),_V=ft("Banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]),Jf=ft("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),MV=ft("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]),Vo=ft("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]]),Qs=ft("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]),or=ft("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]),vs=ft("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]),An=ft("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),x0=ft("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),Br=ft("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["polyline",{points:"22 4 12 14.01 9 11.01",key:"6xbx8j"}]]),RV=ft("CheckSquare",[["polyline",{points:"9 11 12 14 22 4",key:"19ybtz"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]),Gg=ft("Check",[["polyline",{points:"20 6 9 17 4 12",key:"10jjfj"}]]),Ll=ft("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),LV=ft("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),IV=ft("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),Uc=ft("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),OV=ft("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),mu=ft("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]),Wj=ft("Clock4",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),kn=ft("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),yS=ft("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),kM=ft("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]),_r=ft("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),Ri=ft("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),nk=ft("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]]),EM=ft("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]),Jg=ft("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),tn=ft("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),Wh=ft("File",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}]]),bS=ft("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),FV=ft("FolderOpen",[["path",{d:"m6 14 1.45-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.55 6a2 2 0 0 1-1.94 1.5H4a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.93a2 2 0 0 1 1.66.9l.82 1.2a2 2 0 0 0 1.66.9H18a2 2 0 0 1 2 2v2",key:"1nmvlm"}]]),$V=ft("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"2",x2:"22",y1:"12",y2:"12",key:"1dnqot"}],["path",{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z",key:"nb9nel"}]]),BV=ft("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]),dy=ft("Hammer",[["path",{d:"m15 12-8.5 8.5c-.83.83-2.17.83-3 0 0 0 0 0 0 0a2.12 2.12 0 0 1 0-3L12 9",key:"1afvon"}],["path",{d:"M17.64 15 22 10.64",key:"zsji6s"}],["path",{d:"m20.91 11.7-1.25-1.25c-.6-.6-.93-1.4-.93-2.25v-.86L16.01 4.6a5.56 5.56 0 0 0-3.94-1.64H9l.92.82A6.18 6.18 0 0 1 12 8.4v1.56l2 2h2.47l2.26 1.91",key:"lehyy1"}]]),rk=ft("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]),$l=ft("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]),Hj=ft("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),sk=ft("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),uy=ft("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]),TM=ft("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]),ak=ft("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]),zV=ft("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]),WV=ft("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),ki=ft("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),Kf=ft("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),so=ft("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]),HV=ft("Navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]),ya=ft("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]),Ai=ft("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]),ad=ft("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]),gm=ft("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]),qV=ft("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]),Oo=ft("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]),Fo=ft("PlusCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]),un=ft("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),VV=ft("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),qj=ft("Ruler",[["path",{d:"M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0Z",key:"icamh8"}],["path",{d:"m14.5 12.5 2-2",key:"inckbg"}],["path",{d:"m11.5 9.5 2-2",key:"fmmyf7"}],["path",{d:"m8.5 6.5 2-2",key:"vc6u1g"}],["path",{d:"m17.5 15.5 2-2",key:"wo5hmg"}]]),Qn=ft("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),p1=ft("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),hy=ft("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]),wS=ft("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),UV=ft("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]),gu=ft("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]),AM=ft("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]),YV=ft("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]),_M=ft("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),Kt=ft("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),ug=ft("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]),Ei=ft("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),hg=ft("Truck",[["path",{d:"M5 18H3c-.6 0-1-.4-1-1V7c0-.6.4-1 1-1h10c.6 0 1 .4 1 1v11",key:"hs4xqm"}],["path",{d:"M14 9h4l4 4v4c0 .6-.4 1-1 1h-2",key:"11fp61"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}]]),Gl=ft("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),GV=ft("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),ss=ft("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),vr=ft("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),MM=ft("Warehouse",[["path",{d:"M22 8.35V20a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8.35A2 2 0 0 1 3.26 6.5l8-3.2a2 2 0 0 1 1.48 0l8 3.2A2 2 0 0 1 22 8.35Z",key:"gksnxg"}],["path",{d:"M6 18h12",key:"9pbo8z"}],["path",{d:"M6 14h12",key:"4cwo0f"}],["rect",{width:"12",height:"12",x:"6",y:"10",key:"apd30q"}]]),jS=ft("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]),Lm=ft("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),rn=ft("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function RM(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(n=RM(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function rs(){for(var e,t,n=0,r="",a=arguments.length;n<a;n++)(e=arguments[n])&&(t=RM(e))&&(r&&(r+=" "),r+=t);return r}function JV(){for(var e=0,t,n,r="";e<arguments.length;)(t=arguments[e++])&&(n=LM(t))&&(r&&(r+=" "),r+=n);return r}function LM(e){if(typeof e=="string")return e;for(var t,n="",r=0;r<e.length;r++)e[r]&&(t=LM(e[r]))&&(n&&(n+=" "),n+=t);return n}var NS="-";function KV(e){var t=QV(e),n=e.conflictingClassGroups,r=e.conflictingClassGroupModifiers,a=r===void 0?{}:r;function i(l){var c=l.split(NS);return c[0]===""&&c.length!==1&&c.shift(),IM(c,t)||XV(l)}function o(l,c){var d=n[l]||[];return c&&a[l]?[].concat(d,a[l]):d}return{getClassGroupId:i,getConflictingClassGroupIds:o}}function IM(e,t){var o;if(e.length===0)return t.classGroupId;var n=e[0],r=t.nextPart.get(n),a=r?IM(e.slice(1),r):void 0;if(a)return a;if(t.validators.length!==0){var i=e.join(NS);return(o=t.validators.find(function(l){var c=l.validator;return c(i)}))==null?void 0:o.classGroupId}}var ik=/^\[(.+)\]$/;function XV(e){if(ik.test(e)){var t=ik.exec(e)[1],n=t==null?void 0:t.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}}function QV(e){var t=e.theme,n=e.prefix,r={nextPart:new Map,validators:[]},a=eU(Object.entries(e.classGroups),n);return a.forEach(function(i){var o=i[0],l=i[1];Vj(l,r,o,t)}),r}function Vj(e,t,n,r){e.forEach(function(a){if(typeof a=="string"){var i=a===""?t:ok(t,a);i.classGroupId=n;return}if(typeof a=="function"){if(ZV(a)){Vj(a(r),t,n,r);return}t.validators.push({validator:a,classGroupId:n});return}Object.entries(a).forEach(function(o){var l=o[0],c=o[1];Vj(c,ok(t,l),n,r)})})}function ok(e,t){var n=e;return t.split(NS).forEach(function(r){n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n}function ZV(e){return e.isThemeGetter}function eU(e,t){return t?e.map(function(n){var r=n[0],a=n[1],i=a.map(function(o){return typeof o=="string"?t+o:typeof o=="object"?Object.fromEntries(Object.entries(o).map(function(l){var c=l[0],d=l[1];return[t+c,d]})):o});return[r,i]}):e}function tU(e){if(e<1)return{get:function(){},set:function(){}};var t=0,n=new Map,r=new Map;function a(i,o){n.set(i,o),t++,t>e&&(t=0,r=n,n=new Map)}return{get:function(o){var l=n.get(o);if(l!==void 0)return l;if((l=r.get(o))!==void 0)return a(o,l),l},set:function(o,l){n.has(o)?n.set(o,l):a(o,l)}}}var OM="!";function nU(e){var t=e.separator||":",n=t.length===1,r=t[0],a=t.length;return function(o){for(var l=[],c=0,d=0,u,h=0;h<o.length;h++){var f=o[h];if(c===0){if(f===r&&(n||o.slice(h,h+a)===t)){l.push(o.slice(d,h)),d=h+a;continue}if(f==="/"){u=h;continue}}f==="["?c++:f==="]"&&c--}var p=l.length===0?o:o.substring(d),y=p.startsWith(OM),g=y?p.substring(1):p,x=u&&u>d?u-d:void 0;return{modifiers:l,hasImportantModifier:y,baseClassName:g,maybePostfixModifierPosition:x}}}function rU(e){if(e.length<=1)return e;var t=[],n=[];return e.forEach(function(r){var a=r[0]==="[";a?(t.push.apply(t,n.sort().concat([r])),n=[]):n.push(r)}),t.push.apply(t,n.sort()),t}function sU(e){return{cache:tU(e.cacheSize),splitModifiers:nU(e),...KV(e)}}var aU=/\s+/;function iU(e,t){var n=t.splitModifiers,r=t.getClassGroupId,a=t.getConflictingClassGroupIds,i=new Set;return e.trim().split(aU).map(function(o){var l=n(o),c=l.modifiers,d=l.hasImportantModifier,u=l.baseClassName,h=l.maybePostfixModifierPosition,f=r(h?u.substring(0,h):u),p=!!h;if(!f){if(!h)return{isTailwindClass:!1,originalClassName:o};if(f=r(u),!f)return{isTailwindClass:!1,originalClassName:o};p=!1}var y=rU(c).join(":"),g=d?y+OM:y;return{isTailwindClass:!0,modifierId:g,classGroupId:f,originalClassName:o,hasPostfixModifier:p}}).reverse().filter(function(o){if(!o.isTailwindClass)return!0;var l=o.modifierId,c=o.classGroupId,d=o.hasPostfixModifier,u=l+c;return i.has(u)?!1:(i.add(u),a(c,d).forEach(function(h){return i.add(l+h)}),!0)}).reverse().map(function(o){return o.originalClassName}).join(" ")}function oU(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r,a,i,o=l;function l(d){var u=t[0],h=t.slice(1),f=h.reduce(function(p,y){return y(p)},u());return r=sU(f),a=r.cache.get,i=r.cache.set,o=c,c(d)}function c(d){var u=a(d);if(u)return u;var h=iU(d,r);return i(d,h),h}return function(){return o(JV.apply(null,arguments))}}function Vn(e){var t=function(r){return r[e]||[]};return t.isThemeGetter=!0,t}var FM=/^\[(?:([a-z-]+):)?(.+)\]$/i,lU=/^\d+\/\d+$/,cU=new Set(["px","full","screen"]),dU=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,uU=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,hU=/^-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/;function Ji(e){return du(e)||cU.has(e)||lU.test(e)||Uj(e)}function Uj(e){return Ju(e,"length",xU)}function fU(e){return Ju(e,"size",$M)}function pU(e){return Ju(e,"position",$M)}function mU(e){return Ju(e,"url",yU)}function bx(e){return Ju(e,"number",du)}function du(e){return!Number.isNaN(Number(e))}function gU(e){return e.endsWith("%")&&du(e.slice(0,-1))}function Qp(e){return lk(e)||Ju(e,"number",lk)}function dn(e){return FM.test(e)}function Zp(){return!0}function Cc(e){return dU.test(e)}function vU(e){return Ju(e,"",bU)}function Ju(e,t,n){var r=FM.exec(e);return r?r[1]?r[1]===t:n(r[2]):!1}function xU(e){return uU.test(e)}function $M(){return!1}function yU(e){return e.startsWith("url(")}function lk(e){return Number.isInteger(Number(e))}function bU(e){return hU.test(e)}function wU(){var e=Vn("colors"),t=Vn("spacing"),n=Vn("blur"),r=Vn("brightness"),a=Vn("borderColor"),i=Vn("borderRadius"),o=Vn("borderSpacing"),l=Vn("borderWidth"),c=Vn("contrast"),d=Vn("grayscale"),u=Vn("hueRotate"),h=Vn("invert"),f=Vn("gap"),p=Vn("gradientColorStops"),y=Vn("gradientColorStopPositions"),g=Vn("inset"),x=Vn("margin"),m=Vn("opacity"),v=Vn("padding"),b=Vn("saturate"),C=Vn("scale"),S=Vn("sepia"),P=Vn("skew"),D=Vn("space"),N=Vn("translate"),M=function(){return["auto","contain","none"]},L=function(){return["auto","hidden","clip","visible","scroll"]},T=function(){return["auto",dn,t]},E=function(){return[dn,t]},A=function(){return["",Ji]},O=function(){return["auto",du,dn]},W=function(){return["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"]},z=function(){return["solid","dashed","dotted","double","none"]},F=function(){return["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter"]},V=function(){return["start","end","center","between","around","evenly","stretch"]},B=function(){return["","0",dn]},Y=function(){return["auto","avoid","all","avoid-page","page","left","right","column"]},$=function(){return[du,bx]},I=function(){return[du,dn]};return{cacheSize:500,theme:{colors:[Zp],spacing:[Ji],blur:["none","",Cc,dn],brightness:$(),borderColor:[e],borderRadius:["none","","full",Cc,dn],borderSpacing:E(),borderWidth:A(),contrast:$(),grayscale:B(),hueRotate:I(),invert:B(),gap:E(),gradientColorStops:[e],gradientColorStopPositions:[gU,Uj],inset:T(),margin:T(),opacity:$(),padding:E(),saturate:$(),scale:$(),sepia:B(),skew:I(),space:E(),translate:E()},classGroups:{aspect:[{aspect:["auto","square","video",dn]}],container:["container"],columns:[{columns:[Cc]}],"break-after":[{"break-after":Y()}],"break-before":[{"break-before":Y()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none"]}],clear:[{clear:["left","right","both","none"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[].concat(W(),[dn])}],overflow:[{overflow:L()}],"overflow-x":[{"overflow-x":L()}],"overflow-y":[{"overflow-y":L()}],overscroll:[{overscroll:M()}],"overscroll-x":[{"overscroll-x":M()}],"overscroll-y":[{"overscroll-y":M()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[g]}],"inset-x":[{"inset-x":[g]}],"inset-y":[{"inset-y":[g]}],start:[{start:[g]}],end:[{end:[g]}],top:[{top:[g]}],right:[{right:[g]}],bottom:[{bottom:[g]}],left:[{left:[g]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Qp]}],basis:[{basis:T()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",dn]}],grow:[{grow:B()}],shrink:[{shrink:B()}],order:[{order:["first","last","none",Qp]}],"grid-cols":[{"grid-cols":[Zp]}],"col-start-end":[{col:["auto",{span:["full",Qp]},dn]}],"col-start":[{"col-start":O()}],"col-end":[{"col-end":O()}],"grid-rows":[{"grid-rows":[Zp]}],"row-start-end":[{row:["auto",{span:[Qp]},dn]}],"row-start":[{"row-start":O()}],"row-end":[{"row-end":O()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",dn]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",dn]}],gap:[{gap:[f]}],"gap-x":[{"gap-x":[f]}],"gap-y":[{"gap-y":[f]}],"justify-content":[{justify:["normal"].concat(V())}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal"].concat(V(),["baseline"])}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[].concat(V(),["baseline"])}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[v]}],px:[{px:[v]}],py:[{py:[v]}],ps:[{ps:[v]}],pe:[{pe:[v]}],pt:[{pt:[v]}],pr:[{pr:[v]}],pb:[{pb:[v]}],pl:[{pl:[v]}],m:[{m:[x]}],mx:[{mx:[x]}],my:[{my:[x]}],ms:[{ms:[x]}],me:[{me:[x]}],mt:[{mt:[x]}],mr:[{mr:[x]}],mb:[{mb:[x]}],ml:[{ml:[x]}],"space-x":[{"space-x":[D]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[D]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit",dn,t]}],"min-w":[{"min-w":["min","max","fit",dn,Ji]}],"max-w":[{"max-w":["0","none","full","min","max","fit","prose",{screen:[Cc]},Cc,dn]}],h:[{h:[dn,t,"auto","min","max","fit"]}],"min-h":[{"min-h":["min","max","fit",dn,Ji]}],"max-h":[{"max-h":[dn,t,"min","max","fit"]}],"font-size":[{text:["base",Cc,Uj]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",bx]}],"font-family":[{font:[Zp]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",dn]}],"line-clamp":[{"line-clamp":["none",du,bx]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",dn,Ji]}],"list-image":[{"list-image":["none",dn]}],"list-style-type":[{list:["none","disc","decimal",dn]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[m]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[m]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[].concat(z(),["wavy"])}],"text-decoration-thickness":[{decoration:["auto","from-font",Ji]}],"underline-offset":[{"underline-offset":["auto",dn,Ji]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],indent:[{indent:E()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",dn]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",dn]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[m]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[].concat(W(),[pU])}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",fU]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},mU]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[y]}],"gradient-via-pos":[{via:[y]}],"gradient-to-pos":[{to:[y]}],"gradient-from":[{from:[p]}],"gradient-via":[{via:[p]}],"gradient-to":[{to:[p]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[m]}],"border-style":[{border:[].concat(z(),["hidden"])}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[m]}],"divide-style":[{divide:z()}],"border-color":[{border:[a]}],"border-color-x":[{"border-x":[a]}],"border-color-y":[{"border-y":[a]}],"border-color-t":[{"border-t":[a]}],"border-color-r":[{"border-r":[a]}],"border-color-b":[{"border-b":[a]}],"border-color-l":[{"border-l":[a]}],"divide-color":[{divide:[a]}],"outline-style":[{outline:[""].concat(z())}],"outline-offset":[{"outline-offset":[dn,Ji]}],"outline-w":[{outline:[Ji]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:A()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[m]}],"ring-offset-w":[{"ring-offset":[Ji]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",Cc,vU]}],"shadow-color":[{shadow:[Zp]}],opacity:[{opacity:[m]}],"mix-blend":[{"mix-blend":F()}],"bg-blend":[{"bg-blend":F()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",Cc,dn]}],grayscale:[{grayscale:[d]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[h]}],saturate:[{saturate:[b]}],sepia:[{sepia:[S]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[d]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[m]}],"backdrop-saturate":[{"backdrop-saturate":[b]}],"backdrop-sepia":[{"backdrop-sepia":[S]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",dn]}],duration:[{duration:I()}],ease:[{ease:["linear","in","out","in-out",dn]}],delay:[{delay:I()}],animate:[{animate:["none","spin","ping","pulse","bounce",dn]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[C]}],"scale-x":[{"scale-x":[C]}],"scale-y":[{"scale-y":[C]}],rotate:[{rotate:[Qp,dn]}],"translate-x":[{"translate-x":[N]}],"translate-y":[{"translate-y":[N]}],"skew-x":[{"skew-x":[P]}],"skew-y":[{"skew-y":[P]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",dn]}],accent:[{accent:["auto",e]}],appearance:["appearance-none"],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",dn]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":E()}],"scroll-mx":[{"scroll-mx":E()}],"scroll-my":[{"scroll-my":E()}],"scroll-ms":[{"scroll-ms":E()}],"scroll-me":[{"scroll-me":E()}],"scroll-mt":[{"scroll-mt":E()}],"scroll-mr":[{"scroll-mr":E()}],"scroll-mb":[{"scroll-mb":E()}],"scroll-ml":[{"scroll-ml":E()}],"scroll-p":[{"scroll-p":E()}],"scroll-px":[{"scroll-px":E()}],"scroll-py":[{"scroll-py":E()}],"scroll-ps":[{"scroll-ps":E()}],"scroll-pe":[{"scroll-pe":E()}],"scroll-pt":[{"scroll-pt":E()}],"scroll-pr":[{"scroll-pr":E()}],"scroll-pb":[{"scroll-pb":E()}],"scroll-pl":[{"scroll-pl":E()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","pinch-zoom","manipulation",{pan:["x","left","right","y","up","down"]}]}],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",dn]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[Ji,bx]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}}var jU=oU(wU);function Ft(...e){return jU(rs(e))}const wn={JOBS:"hsh_drywall_jobs_v2",EMPLOYEES:"hsh_drywall_employees_v2",TIME_ENTRIES:"hsh_drywall_time_entries_v2",PIECE_RATE_ENTRIES:"hsh_drywall_piece_rate_entries_v2",PAYROLL_ENTRIES:"hsh_drywall_payroll_entries_v2",DAILY_LOGS:"hsh_drywall_daily_logs_v2",SCHEDULES:"hsh_drywall_schedules_v2",USER_DATA:"hsh_drywall_user_data_v2",CHECKLIST_TEMPLATES:"hsh_drywall_checklist_templates_v2"},zw=(e,t)=>{if(!e)return!1;switch(t){case"jobs":return Array.isArray(e)&&e.every(n=>n.id&&n.jobName);case"employees":return Array.isArray(e)&&e.every(n=>n.id&&n.firstName&&n.lastName);case"timeEntries":return Array.isArray(e)&&e.every(n=>n.id&&n.jobId);case"pieceRateEntries":return Array.isArray(e)&&e.every(n=>n.id&&n.jobId);case"payrollEntries":return Array.isArray(e)&&e.every(n=>n.id&&n.employeeId);case"dailyLogs":return Array.isArray(e)&&e.every(n=>n.id&&n.jobId);case"schedules":return Array.isArray(e)&&e.every(n=>n.id&&n.jobId);case"userData":return e&&typeof e=="object"&&e.id;default:return!0}},gn={save:(e,t,n="generic")=>{try{if(!zw(t,n))return console.warn(`Data validation failed for ${e}:`,t),!1;const r=JSON.stringify(t);if(localStorage.setItem(e,r),localStorage.getItem(e)!==r)throw new Error("Data verification failed after save");return!0}catch(r){console.error(`Failed to save data to ${e}:`,r);try{localStorage.removeItem(e),console.log(`Cleared corrupted data for ${e}`)}catch(a){console.error(`Failed to clear corrupted data for ${e}:`,a)}return!1}},load:(e,t=null,n="generic")=>{try{const r=localStorage.getItem(e);if(!r)return t;const a=JSON.parse(r);return zw(a,n)?a:(console.warn(`Loaded data validation failed for ${e}, using default`),t)}catch(r){console.error(`Failed to load data from ${e}:`,r);try{localStorage.removeItem(e),console.log(`Cleared corrupted data for ${e}`)}catch(a){console.error(`Failed to clear corrupted data for ${e}:`,a)}return t}},clear:e=>{try{return localStorage.removeItem(e),!0}catch(t){return console.error(`Failed to clear ${e}:`,t),!1}},clearAll:()=>{try{return Object.values(wn).forEach(e=>{localStorage.removeItem(e)}),console.log("All app data cleared successfully"),!0}catch(e){return console.error("Failed to clear all data:",e),!1}},getUsage:()=>{try{const e={};return Object.entries(wn).forEach(([t,n])=>{const r=localStorage.getItem(n);r&&(e[t]={size:new Blob([r]).size,itemCount:Array.isArray(JSON.parse(r))?JSON.parse(r).length:1})}),e}catch(e){return console.error("Failed to get storage usage:",e),{}}},export:()=>{try{const e={};return Object.entries(wn).forEach(([t,n])=>{const r=localStorage.getItem(n);r&&(e[t]=JSON.parse(r))}),e}catch(e){return console.error("Failed to export data:",e),null}},import:e=>{try{if(!e||typeof e!="object")throw new Error("Invalid import data");return Object.entries(e).forEach(([t,n])=>{const r=wn[t.toUpperCase()];r&&zw(n,t.toLowerCase())&&localStorage.setItem(r,JSON.stringify(n))}),console.log("Data imported successfully"),!0}catch(t){return console.error("Failed to import data:",t),!1}}},Ys=()=>Date.now().toString(36)+Math.random().toString(36).substr(2),Yj={generateJobs:()=>[{id:"test-job-1",jobName:"Downtown Office Building",jobType:"commercial",status:"In Progress",startDate:new Date().toISOString(),estimatedCompletion:new Date(Date.now()+30*24*60*60*1e3).toISOString(),address:"123 Main St, Downtown, CA 90210",clientName:"ABC Development",clientPhone:"(555) 123-4567",clientEmail:"contact@abcdev.com",financials:{estimate:{sqft:15e3,drywallMaterialRate:.66,hangerRate:.27,finisherRate:.27,prepCleanRate:.03,drywallSalesTaxRate:8.25,totalEstimateAmount:25e3},fieldRevised:{sqft:15200,hangerRate:.27,finisherRate:.27,prepCleanRate:.03,drywallMaterialRate:.66,changeOrders:[]},actual:{laborCosts:[],materialInvoices:[],changeOrders:[],manualLaborCosts:[]}},scopes:[],takeoffs:[],schedules:[],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},{id:"test-job-2",jobName:"Residential Home Addition",jobType:"residential",status:"Not Started",startDate:new Date(Date.now()+7*24*60*60*1e3).toISOString(),estimatedCompletion:new Date(Date.now()+45*24*60*60*1e3).toISOString(),address:"456 Oak Ave, Suburbia, CA 90211",clientName:"Smith Family",clientPhone:"(555) 987-6543",clientEmail:"smith@email.com",financials:{estimate:{sqft:8e3,drywallMaterialRate:.66,hangerRate:.27,finisherRate:.27,prepCleanRate:.03,drywallSalesTaxRate:8.25,totalEstimateAmount:15e3},fieldRevised:{sqft:8e3,hangerRate:.27,finisherRate:.27,prepCleanRate:.03,drywallMaterialRate:.66,changeOrders:[]},actual:{laborCosts:[],materialInvoices:[],changeOrders:[],manualLaborCosts:[]}},scopes:[],takeoffs:[],schedules:[],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}],generateEmployees:()=>[{id:"test-hanger-1",firstName:"Mike",lastName:"Johnson",email:"mike.johnson@example.com",phone:"(555) 123-4567",employeeType:"Employee",role:"Hanger",payType:"hourly",hourlyRate:28,salaryAmount:0,isActive:!0,bankedHours:0,perDiem:0,fuelAllowance:0,toolDeductions:[],childSupportDeduction:0,miscDeduction:0,miscDeductionNote:"",documents:[],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},{id:"test-finisher-1",firstName:"Sarah",lastName:"Williams",email:"sarah.williams@example.com",phone:"(555) 234-5678",employeeType:"1099 Contractor",role:"Finisher",payType:"salary",hourlyRate:0,salaryAmount:2431,isActive:!0,bankedHours:0,perDiem:75,fuelAllowance:200,toolDeductions:[{id:"tool-1",description:"Drywall Lift",totalAmount:1e3,weeklyDeduction:100,remainingBalance:800,startDate:new Date().toISOString()}],childSupportDeduction:150,miscDeduction:0,miscDeductionNote:"",documents:[],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}]};function ck(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function BM(...e){return t=>{let n=!1;const r=e.map(a=>{const i=ck(a,t);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let a=0;a<r.length;a++){const i=r[a];typeof i=="function"?i():ck(e[a],null)}}}}function ba(...e){return j.useCallback(BM(...e),e)}function fg(e){const t=SU(e),n=j.forwardRef((r,a)=>{const{children:i,...o}=r,l=j.Children.toArray(i),c=l.find(PU);if(c){const d=c.props.children,u=l.map(h=>h===c?j.Children.count(d)>1?j.Children.only(null):j.isValidElement(d)?d.props.children:null:h);return s.jsx(t,{...o,ref:a,children:j.isValidElement(d)?j.cloneElement(d,void 0,u):null})}return s.jsx(t,{...o,ref:a,children:i})});return n.displayName=`${e}.Slot`,n}var NU=fg("Slot");function SU(e){const t=j.forwardRef((n,r)=>{const{children:a,...i}=n;if(j.isValidElement(a)){const o=kU(a),l=DU(i,a.props);return a.type!==j.Fragment&&(l.ref=r?BM(r,o):o),j.cloneElement(a,l)}return j.Children.count(a)>1?j.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var zM=Symbol("radix.slottable");function CU(e){const t=({children:n})=>s.jsx(s.Fragment,{children:n});return t.displayName=`${e}.Slottable`,t.__radixId=zM,t}function PU(e){return j.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===zM}function DU(e,t){const n={...t};for(const r in t){const a=e[r],i=t[r];/^on[A-Z]/.test(r)?a&&i?n[r]=(...l)=>{const c=i(...l);return a(...l),c}:a&&(n[r]=a):r==="style"?n[r]={...a,...i}:r==="className"&&(n[r]=[a,i].filter(Boolean).join(" "))}return{...e,...n}}function kU(e){var r,a;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}const dk=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,uk=rs,m1=(e,t)=>n=>{var r;if((t==null?void 0:t.variants)==null)return uk(e,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:a,defaultVariants:i}=t,o=Object.keys(a).map(d=>{const u=n==null?void 0:n[d],h=i==null?void 0:i[d];if(u===null)return null;const f=dk(u)||dk(h);return a[d][f]}),l=n&&Object.entries(n).reduce((d,u)=>{let[h,f]=u;return f===void 0||(d[h]=f),d},{}),c=t==null||(r=t.compoundVariants)===null||r===void 0?void 0:r.reduce((d,u)=>{let{class:h,className:f,...p}=u;return Object.entries(p).every(y=>{let[g,x]=y;return Array.isArray(x)?x.includes({...i,...l}[g]):{...i,...l}[g]===x})?[...d,h,f]:d},[]);return uk(e,o,c,n==null?void 0:n.class,n==null?void 0:n.className)},SS=m1("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),se=Q.forwardRef(({className:e,variant:t,size:n,asChild:r=!1,...a},i)=>{const o=r?NU:"button";return s.jsx(o,{className:Ft(SS({variant:t,size:n,className:e})),ref:i,...a})});se.displayName="Button";function St(){return St=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},St.apply(null,arguments)}function hk(e,[t,n]){return Math.min(n,Math.max(t,e))}function ms(e,t,{checkForDefaultPrevented:n=!0}={}){return function(a){if(e==null||e(a),n===!1||!a.defaultPrevented)return t==null?void 0:t(a)}}function CS(e,t=[]){let n=[];function r(i,o){const l=j.createContext(o),c=n.length;n=[...n,o];function d(h){const{scope:f,children:p,...y}=h,g=(f==null?void 0:f[e][c])||l,x=j.useMemo(()=>y,Object.values(y));return j.createElement(g.Provider,{value:x},p)}function u(h,f){const p=(f==null?void 0:f[e][c])||l,y=j.useContext(p);if(y)return y;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${i}\``)}return d.displayName=i+"Provider",[d,u]}const a=()=>{const i=n.map(o=>j.createContext(o));return function(l){const c=(l==null?void 0:l[e])||i;return j.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return a.scopeName=e,[r,EU(a,...t)]}function EU(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(i){const o=r.reduce((l,{useScope:c,scopeName:d})=>{const h=c(i)[`__scope${d}`];return{...l,...h}},{});return j.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return n.scopeName=t.scopeName,n}function TU(e,t){typeof e=="function"?e(t):e!=null&&(e.current=t)}function WM(...e){return t=>e.forEach(n=>TU(n,t))}function ea(...e){return j.useCallback(WM(...e),e)}const pg=j.forwardRef((e,t)=>{const{children:n,...r}=e,a=j.Children.toArray(n),i=a.find(_U);if(i){const o=i.props.children,l=a.map(c=>c===i?j.Children.count(o)>1?j.Children.only(null):j.isValidElement(o)?o.props.children:null:c);return j.createElement(Gj,St({},r,{ref:t}),j.isValidElement(o)?j.cloneElement(o,void 0,l):null)}return j.createElement(Gj,St({},r,{ref:t}),n)});pg.displayName="Slot";const Gj=j.forwardRef((e,t)=>{const{children:n,...r}=e;return j.isValidElement(n)?j.cloneElement(n,{...MU(r,n.props),ref:t?WM(t,n.ref):n.ref}):j.Children.count(n)>1?j.Children.only(null):null});Gj.displayName="SlotClone";const AU=({children:e})=>j.createElement(j.Fragment,null,e);function _U(e){return j.isValidElement(e)&&e.type===AU}function MU(e,t){const n={...t};for(const r in t){const a=e[r],i=t[r];/^on[A-Z]/.test(r)?a&&i?n[r]=(...l)=>{i(...l),a(...l)}:a&&(n[r]=a):r==="style"?n[r]={...a,...i}:r==="className"&&(n[r]=[a,i].filter(Boolean).join(" "))}return{...e,...n}}function RU(e){const t=e+"CollectionProvider",[n,r]=CS(t),[a,i]=n(t,{collectionRef:{current:null},itemMap:new Map}),o=p=>{const{scope:y,children:g}=p,x=Q.useRef(null),m=Q.useRef(new Map).current;return Q.createElement(a,{scope:y,itemMap:m,collectionRef:x},g)},l=e+"CollectionSlot",c=Q.forwardRef((p,y)=>{const{scope:g,children:x}=p,m=i(l,g),v=ea(y,m.collectionRef);return Q.createElement(pg,{ref:v},x)}),d=e+"CollectionItemSlot",u="data-radix-collection-item",h=Q.forwardRef((p,y)=>{const{scope:g,children:x,...m}=p,v=Q.useRef(null),b=ea(y,v),C=i(d,g);return Q.useEffect(()=>(C.itemMap.set(v,{ref:v,...m}),()=>void C.itemMap.delete(v))),Q.createElement(pg,{[u]:"",ref:b},x)});function f(p){const y=i(e+"CollectionConsumer",p);return Q.useCallback(()=>{const x=y.collectionRef.current;if(!x)return[];const m=Array.from(x.querySelectorAll(`[${u}]`));return Array.from(y.itemMap.values()).sort((C,S)=>m.indexOf(C.ref.current)-m.indexOf(S.ref.current))},[y.collectionRef,y.itemMap])}return[{Provider:o,Slot:c,ItemSlot:h},f,r]}const LU=j.createContext(void 0);function IU(e){const t=j.useContext(LU);return e||t||"ltr"}const OU=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],As=OU.reduce((e,t)=>{const n=j.forwardRef((r,a)=>{const{asChild:i,...o}=r,l=i?pg:t;return j.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),j.createElement(l,St({},o,{ref:a}))});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{});function FU(e,t){e&&rl.flushSync(()=>e.dispatchEvent(t))}function Jl(e){const t=j.useRef(e);return j.useEffect(()=>{t.current=e}),j.useMemo(()=>(...n)=>{var r;return(r=t.current)===null||r===void 0?void 0:r.call(t,...n)},[])}function $U(e,t=globalThis==null?void 0:globalThis.document){const n=Jl(e);j.useEffect(()=>{const r=a=>{a.key==="Escape"&&n(a)};return t.addEventListener("keydown",r),()=>t.removeEventListener("keydown",r)},[n,t])}const Jj="dismissableLayer.update",BU="dismissableLayer.pointerDownOutside",zU="dismissableLayer.focusOutside";let fk;const WU=j.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),HU=j.forwardRef((e,t)=>{var n;const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:a,onPointerDownOutside:i,onFocusOutside:o,onInteractOutside:l,onDismiss:c,...d}=e,u=j.useContext(WU),[h,f]=j.useState(null),p=(n=h==null?void 0:h.ownerDocument)!==null&&n!==void 0?n:globalThis==null?void 0:globalThis.document,[,y]=j.useState({}),g=ea(t,N=>f(N)),x=Array.from(u.layers),[m]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),v=x.indexOf(m),b=h?x.indexOf(h):-1,C=u.layersWithOutsidePointerEventsDisabled.size>0,S=b>=v,P=qU(N=>{const M=N.target,L=[...u.branches].some(T=>T.contains(M));!S||L||(i==null||i(N),l==null||l(N),N.defaultPrevented||c==null||c())},p),D=VU(N=>{const M=N.target;[...u.branches].some(T=>T.contains(M))||(o==null||o(N),l==null||l(N),N.defaultPrevented||c==null||c())},p);return $U(N=>{b===u.layers.size-1&&(a==null||a(N),!N.defaultPrevented&&c&&(N.preventDefault(),c()))},p),j.useEffect(()=>{if(h)return r&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(fk=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(h)),u.layers.add(h),pk(),()=>{r&&u.layersWithOutsidePointerEventsDisabled.size===1&&(p.body.style.pointerEvents=fk)}},[h,p,r,u]),j.useEffect(()=>()=>{h&&(u.layers.delete(h),u.layersWithOutsidePointerEventsDisabled.delete(h),pk())},[h,u]),j.useEffect(()=>{const N=()=>y({});return document.addEventListener(Jj,N),()=>document.removeEventListener(Jj,N)},[]),j.createElement(As.div,St({},d,{ref:g,style:{pointerEvents:C?S?"auto":"none":void 0,...e.style},onFocusCapture:ms(e.onFocusCapture,D.onFocusCapture),onBlurCapture:ms(e.onBlurCapture,D.onBlurCapture),onPointerDownCapture:ms(e.onPointerDownCapture,P.onPointerDownCapture)}))});function qU(e,t=globalThis==null?void 0:globalThis.document){const n=Jl(e),r=j.useRef(!1),a=j.useRef(()=>{});return j.useEffect(()=>{const i=l=>{if(l.target&&!r.current){let d=function(){HM(BU,n,c,{discrete:!0})};const c={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",a.current),a.current=d,t.addEventListener("click",a.current,{once:!0})):d()}else t.removeEventListener("click",a.current);r.current=!1},o=window.setTimeout(()=>{t.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),t.removeEventListener("pointerdown",i),t.removeEventListener("click",a.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}function VU(e,t=globalThis==null?void 0:globalThis.document){const n=Jl(e),r=j.useRef(!1);return j.useEffect(()=>{const a=i=>{i.target&&!r.current&&HM(zU,n,{originalEvent:i},{discrete:!1})};return t.addEventListener("focusin",a),()=>t.removeEventListener("focusin",a)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function pk(){const e=new CustomEvent(Jj);document.dispatchEvent(e)}function HM(e,t,n,{discrete:r}){const a=n.originalEvent.target,i=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&a.addEventListener(e,t,{once:!0}),r?FU(a,i):a.dispatchEvent(i)}let Ww=0;function UU(){j.useEffect(()=>{var e,t;const n=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",(e=n[0])!==null&&e!==void 0?e:mk()),document.body.insertAdjacentElement("beforeend",(t=n[1])!==null&&t!==void 0?t:mk()),Ww++,()=>{Ww===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(r=>r.remove()),Ww--}},[])}function mk(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none",e}const Hw="focusScope.autoFocusOnMount",qw="focusScope.autoFocusOnUnmount",gk={bubbles:!1,cancelable:!0},YU=j.forwardRef((e,t)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:a,onUnmountAutoFocus:i,...o}=e,[l,c]=j.useState(null),d=Jl(a),u=Jl(i),h=j.useRef(null),f=ea(t,g=>c(g)),p=j.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;j.useEffect(()=>{if(r){let g=function(b){if(p.paused||!l)return;const C=b.target;l.contains(C)?h.current=C:Rc(h.current,{select:!0})},x=function(b){if(p.paused||!l)return;const C=b.relatedTarget;C!==null&&(l.contains(C)||Rc(h.current,{select:!0}))},m=function(b){if(document.activeElement===document.body)for(const S of b)S.removedNodes.length>0&&Rc(l)};document.addEventListener("focusin",g),document.addEventListener("focusout",x);const v=new MutationObserver(m);return l&&v.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",g),document.removeEventListener("focusout",x),v.disconnect()}}},[r,l,p.paused]),j.useEffect(()=>{if(l){xk.add(p);const g=document.activeElement;if(!l.contains(g)){const m=new CustomEvent(Hw,gk);l.addEventListener(Hw,d),l.dispatchEvent(m),m.defaultPrevented||(GU(ZU(qM(l)),{select:!0}),document.activeElement===g&&Rc(l))}return()=>{l.removeEventListener(Hw,d),setTimeout(()=>{const m=new CustomEvent(qw,gk);l.addEventListener(qw,u),l.dispatchEvent(m),m.defaultPrevented||Rc(g??document.body,{select:!0}),l.removeEventListener(qw,u),xk.remove(p)},0)}}},[l,d,u,p]);const y=j.useCallback(g=>{if(!n&&!r||p.paused)return;const x=g.key==="Tab"&&!g.altKey&&!g.ctrlKey&&!g.metaKey,m=document.activeElement;if(x&&m){const v=g.currentTarget,[b,C]=JU(v);b&&C?!g.shiftKey&&m===C?(g.preventDefault(),n&&Rc(b,{select:!0})):g.shiftKey&&m===b&&(g.preventDefault(),n&&Rc(C,{select:!0})):m===v&&g.preventDefault()}},[n,r,p.paused]);return j.createElement(As.div,St({tabIndex:-1},o,{ref:f,onKeyDown:y}))});function GU(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if(Rc(r,{select:t}),document.activeElement!==n)return}function JU(e){const t=qM(e),n=vk(t,e),r=vk(t.reverse(),e);return[n,r]}function qM(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const a=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||a?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function vk(e,t){for(const n of e)if(!KU(n,{upTo:t}))return n}function KU(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function XU(e){return e instanceof HTMLInputElement&&"select"in e}function Rc(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&XU(e)&&t&&e.select()}}const xk=QU();function QU(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=yk(e,t),e.unshift(t)},remove(t){var n;e=yk(e,t),(n=e[0])===null||n===void 0||n.resume()}}}function yk(e,t){const n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function ZU(e){return e.filter(t=>t.tagName!=="A")}const Li=globalThis!=null&&globalThis.document?j.useLayoutEffect:()=>{},eY=qy["useId".toString()]||(()=>{});let tY=0;function VM(e){const[t,n]=j.useState(eY());return Li(()=>{e||n(r=>r??String(tY++))},[e]),e||(t?`radix-${t}`:"")}const nY=["top","right","bottom","left"],fd=Math.min,ri=Math.max,fy=Math.round,wx=Math.floor,Uo=e=>({x:e,y:e}),rY={left:"right",right:"left",bottom:"top",top:"bottom"},sY={start:"end",end:"start"};function Kj(e,t,n){return ri(e,fd(t,n))}function Kl(e,t){return typeof e=="function"?e(t):e}function Xl(e){return e.split("-")[0]}function Xf(e){return e.split("-")[1]}function PS(e){return e==="x"?"y":"x"}function DS(e){return e==="y"?"height":"width"}function $o(e){return["top","bottom"].includes(Xl(e))?"y":"x"}function kS(e){return PS($o(e))}function aY(e,t,n){n===void 0&&(n=!1);const r=Xf(e),a=kS(e),i=DS(a);let o=a==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[i]>t.floating[i]&&(o=py(o)),[o,py(o)]}function iY(e){const t=py(e);return[Xj(e),t,Xj(t)]}function Xj(e){return e.replace(/start|end/g,t=>sY[t])}function oY(e,t,n){const r=["left","right"],a=["right","left"],i=["top","bottom"],o=["bottom","top"];switch(e){case"top":case"bottom":return n?t?a:r:t?r:a;case"left":case"right":return t?i:o;default:return[]}}function lY(e,t,n,r){const a=Xf(e);let i=oY(Xl(e),n==="start",r);return a&&(i=i.map(o=>o+"-"+a),t&&(i=i.concat(i.map(Xj)))),i}function py(e){return e.replace(/left|right|bottom|top/g,t=>rY[t])}function cY(e){return{top:0,right:0,bottom:0,left:0,...e}}function UM(e){return typeof e!="number"?cY(e):{top:e,right:e,bottom:e,left:e}}function my(e){const{x:t,y:n,width:r,height:a}=e;return{width:r,height:a,top:n,left:t,right:t+r,bottom:n+a,x:t,y:n}}function bk(e,t,n){let{reference:r,floating:a}=e;const i=$o(t),o=kS(t),l=DS(o),c=Xl(t),d=i==="y",u=r.x+r.width/2-a.width/2,h=r.y+r.height/2-a.height/2,f=r[l]/2-a[l]/2;let p;switch(c){case"top":p={x:u,y:r.y-a.height};break;case"bottom":p={x:u,y:r.y+r.height};break;case"right":p={x:r.x+r.width,y:h};break;case"left":p={x:r.x-a.width,y:h};break;default:p={x:r.x,y:r.y}}switch(Xf(t)){case"start":p[o]-=f*(n&&d?-1:1);break;case"end":p[o]+=f*(n&&d?-1:1);break}return p}const dY=async(e,t,n)=>{const{placement:r="bottom",strategy:a="absolute",middleware:i=[],platform:o}=n,l=i.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(t));let d=await o.getElementRects({reference:e,floating:t,strategy:a}),{x:u,y:h}=bk(d,r,c),f=r,p={},y=0;for(let g=0;g<l.length;g++){const{name:x,fn:m}=l[g],{x:v,y:b,data:C,reset:S}=await m({x:u,y:h,initialPlacement:r,placement:f,strategy:a,middlewareData:p,rects:d,platform:o,elements:{reference:e,floating:t}});u=v??u,h=b??h,p={...p,[x]:{...p[x],...C}},S&&y<=50&&(y++,typeof S=="object"&&(S.placement&&(f=S.placement),S.rects&&(d=S.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:a}):S.rects),{x:u,y:h}=bk(d,f,c)),g=-1)}return{x:u,y:h,placement:f,strategy:a,middlewareData:p}};async function mg(e,t){var n;t===void 0&&(t={});const{x:r,y:a,platform:i,rects:o,elements:l,strategy:c}=e,{boundary:d="clippingAncestors",rootBoundary:u="viewport",elementContext:h="floating",altBoundary:f=!1,padding:p=0}=Kl(t,e),y=UM(p),x=l[f?h==="floating"?"reference":"floating":h],m=my(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(x)))==null||n?x:x.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(l.floating)),boundary:d,rootBoundary:u,strategy:c})),v=h==="floating"?{x:r,y:a,width:o.floating.width,height:o.floating.height}:o.reference,b=await(i.getOffsetParent==null?void 0:i.getOffsetParent(l.floating)),C=await(i.isElement==null?void 0:i.isElement(b))?await(i.getScale==null?void 0:i.getScale(b))||{x:1,y:1}:{x:1,y:1},S=my(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:v,offsetParent:b,strategy:c}):v);return{top:(m.top-S.top+y.top)/C.y,bottom:(S.bottom-m.bottom+y.bottom)/C.y,left:(m.left-S.left+y.left)/C.x,right:(S.right-m.right+y.right)/C.x}}const uY=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:a,rects:i,platform:o,elements:l,middlewareData:c}=t,{element:d,padding:u=0}=Kl(e,t)||{};if(d==null)return{};const h=UM(u),f={x:n,y:r},p=kS(a),y=DS(p),g=await o.getDimensions(d),x=p==="y",m=x?"top":"left",v=x?"bottom":"right",b=x?"clientHeight":"clientWidth",C=i.reference[y]+i.reference[p]-f[p]-i.floating[y],S=f[p]-i.reference[p],P=await(o.getOffsetParent==null?void 0:o.getOffsetParent(d));let D=P?P[b]:0;(!D||!await(o.isElement==null?void 0:o.isElement(P)))&&(D=l.floating[b]||i.floating[y]);const N=C/2-S/2,M=D/2-g[y]/2-1,L=fd(h[m],M),T=fd(h[v],M),E=L,A=D-g[y]-T,O=D/2-g[y]/2+N,W=Kj(E,O,A),z=!c.arrow&&Xf(a)!=null&&O!==W&&i.reference[y]/2-(O<E?L:T)-g[y]/2<0,F=z?O<E?O-E:O-A:0;return{[p]:f[p]+F,data:{[p]:W,centerOffset:O-W-F,...z&&{alignmentOffset:F}},reset:z}}}),hY=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:a,middlewareData:i,rects:o,initialPlacement:l,platform:c,elements:d}=t,{mainAxis:u=!0,crossAxis:h=!0,fallbackPlacements:f,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:y="none",flipAlignment:g=!0,...x}=Kl(e,t);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const m=Xl(a),v=$o(l),b=Xl(l)===l,C=await(c.isRTL==null?void 0:c.isRTL(d.floating)),S=f||(b||!g?[py(l)]:iY(l)),P=y!=="none";!f&&P&&S.push(...lY(l,g,y,C));const D=[l,...S],N=await mg(t,x),M=[];let L=((r=i.flip)==null?void 0:r.overflows)||[];if(u&&M.push(N[m]),h){const O=aY(a,o,C);M.push(N[O[0]],N[O[1]])}if(L=[...L,{placement:a,overflows:M}],!M.every(O=>O<=0)){var T,E;const O=(((T=i.flip)==null?void 0:T.index)||0)+1,W=D[O];if(W&&(!(h==="alignment"?v!==$o(W):!1)||L.every(V=>V.overflows[0]>0&&$o(V.placement)===v)))return{data:{index:O,overflows:L},reset:{placement:W}};let z=(E=L.filter(F=>F.overflows[0]<=0).sort((F,V)=>F.overflows[1]-V.overflows[1])[0])==null?void 0:E.placement;if(!z)switch(p){case"bestFit":{var A;const F=(A=L.filter(V=>{if(P){const B=$o(V.placement);return B===v||B==="y"}return!0}).map(V=>[V.placement,V.overflows.filter(B=>B>0).reduce((B,Y)=>B+Y,0)]).sort((V,B)=>V[1]-B[1])[0])==null?void 0:A[0];F&&(z=F);break}case"initialPlacement":z=l;break}if(a!==z)return{reset:{placement:z}}}return{}}}};function wk(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function jk(e){return nY.some(t=>e[t]>=0)}const fY=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:r="referenceHidden",...a}=Kl(e,t);switch(r){case"referenceHidden":{const i=await mg(t,{...a,elementContext:"reference"}),o=wk(i,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:jk(o)}}}case"escaped":{const i=await mg(t,{...a,altBoundary:!0}),o=wk(i,n.floating);return{data:{escapedOffsets:o,escaped:jk(o)}}}default:return{}}}}};async function pY(e,t){const{placement:n,platform:r,elements:a}=e,i=await(r.isRTL==null?void 0:r.isRTL(a.floating)),o=Xl(n),l=Xf(n),c=$o(n)==="y",d=["left","top"].includes(o)?-1:1,u=i&&c?-1:1,h=Kl(t,e);let{mainAxis:f,crossAxis:p,alignmentAxis:y}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return l&&typeof y=="number"&&(p=l==="end"?y*-1:y),c?{x:p*u,y:f*d}:{x:f*d,y:p*u}}const mY=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:a,y:i,placement:o,middlewareData:l}=t,c=await pY(t,e);return o===((n=l.offset)==null?void 0:n.placement)&&(r=l.arrow)!=null&&r.alignmentOffset?{}:{x:a+c.x,y:i+c.y,data:{...c,placement:o}}}}},gY=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:a}=t,{mainAxis:i=!0,crossAxis:o=!1,limiter:l={fn:x=>{let{x:m,y:v}=x;return{x:m,y:v}}},...c}=Kl(e,t),d={x:n,y:r},u=await mg(t,c),h=$o(Xl(a)),f=PS(h);let p=d[f],y=d[h];if(i){const x=f==="y"?"top":"left",m=f==="y"?"bottom":"right",v=p+u[x],b=p-u[m];p=Kj(v,p,b)}if(o){const x=h==="y"?"top":"left",m=h==="y"?"bottom":"right",v=y+u[x],b=y-u[m];y=Kj(v,y,b)}const g=l.fn({...t,[f]:p,[h]:y});return{...g,data:{x:g.x-n,y:g.y-r,enabled:{[f]:i,[h]:o}}}}}},vY=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:a,rects:i,middlewareData:o}=t,{offset:l=0,mainAxis:c=!0,crossAxis:d=!0}=Kl(e,t),u={x:n,y:r},h=$o(a),f=PS(h);let p=u[f],y=u[h];const g=Kl(l,t),x=typeof g=="number"?{mainAxis:g,crossAxis:0}:{mainAxis:0,crossAxis:0,...g};if(c){const b=f==="y"?"height":"width",C=i.reference[f]-i.floating[b]+x.mainAxis,S=i.reference[f]+i.reference[b]-x.mainAxis;p<C?p=C:p>S&&(p=S)}if(d){var m,v;const b=f==="y"?"width":"height",C=["top","left"].includes(Xl(a)),S=i.reference[h]-i.floating[b]+(C&&((m=o.offset)==null?void 0:m[h])||0)+(C?0:x.crossAxis),P=i.reference[h]+i.reference[b]+(C?0:((v=o.offset)==null?void 0:v[h])||0)-(C?x.crossAxis:0);y<S?y=S:y>P&&(y=P)}return{[f]:p,[h]:y}}}},xY=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:a,rects:i,platform:o,elements:l}=t,{apply:c=()=>{},...d}=Kl(e,t),u=await mg(t,d),h=Xl(a),f=Xf(a),p=$o(a)==="y",{width:y,height:g}=i.floating;let x,m;h==="top"||h==="bottom"?(x=h,m=f===(await(o.isRTL==null?void 0:o.isRTL(l.floating))?"start":"end")?"left":"right"):(m=h,x=f==="end"?"top":"bottom");const v=g-u.top-u.bottom,b=y-u.left-u.right,C=fd(g-u[x],v),S=fd(y-u[m],b),P=!t.middlewareData.shift;let D=C,N=S;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(N=b),(r=t.middlewareData.shift)!=null&&r.enabled.y&&(D=v),P&&!f){const L=ri(u.left,0),T=ri(u.right,0),E=ri(u.top,0),A=ri(u.bottom,0);p?N=y-2*(L!==0||T!==0?L+T:ri(u.left,u.right)):D=g-2*(E!==0||A!==0?E+A:ri(u.top,u.bottom))}await c({...t,availableWidth:N,availableHeight:D});const M=await o.getDimensions(l.floating);return y!==M.width||g!==M.height?{reset:{rects:!0}}:{}}}};function g1(){return typeof window<"u"}function Qf(e){return YM(e)?(e.nodeName||"").toLowerCase():"#document"}function oi(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function sl(e){var t;return(t=(YM(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function YM(e){return g1()?e instanceof Node||e instanceof oi(e).Node:!1}function ma(e){return g1()?e instanceof Element||e instanceof oi(e).Element:!1}function Zo(e){return g1()?e instanceof HTMLElement||e instanceof oi(e).HTMLElement:!1}function Nk(e){return!g1()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof oi(e).ShadowRoot}function Kg(e){const{overflow:t,overflowX:n,overflowY:r,display:a}=Ii(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(a)}function yY(e){return["table","td","th"].includes(Qf(e))}function v1(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function ES(e){const t=TS(),n=ma(e)?Ii(e):e;return["transform","translate","scale","rotate","perspective"].some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function bY(e){let t=pd(e);for(;Zo(t)&&!Ef(t);){if(ES(t))return t;if(v1(t))return null;t=pd(t)}return null}function TS(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Ef(e){return["html","body","#document"].includes(Qf(e))}function Ii(e){return oi(e).getComputedStyle(e)}function x1(e){return ma(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function pd(e){if(Qf(e)==="html")return e;const t=e.assignedSlot||e.parentNode||Nk(e)&&e.host||sl(e);return Nk(t)?t.host:t}function GM(e){const t=pd(e);return Ef(t)?e.ownerDocument?e.ownerDocument.body:e.body:Zo(t)&&Kg(t)?t:GM(t)}function gg(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const a=GM(e),i=a===((r=e.ownerDocument)==null?void 0:r.body),o=oi(a);if(i){const l=Qj(o);return t.concat(o,o.visualViewport||[],Kg(a)?a:[],l&&n?gg(l):[])}return t.concat(a,gg(a,[],n))}function Qj(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function JM(e){const t=Ii(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const a=Zo(e),i=a?e.offsetWidth:n,o=a?e.offsetHeight:r,l=fy(n)!==i||fy(r)!==o;return l&&(n=i,r=o),{width:n,height:r,$:l}}function AS(e){return ma(e)?e:e.contextElement}function mf(e){const t=AS(e);if(!Zo(t))return Uo(1);const n=t.getBoundingClientRect(),{width:r,height:a,$:i}=JM(t);let o=(i?fy(n.width):n.width)/r,l=(i?fy(n.height):n.height)/a;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const wY=Uo(0);function KM(e){const t=oi(e);return!TS()||!t.visualViewport?wY:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function jY(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==oi(e)?!1:t}function _u(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const a=e.getBoundingClientRect(),i=AS(e);let o=Uo(1);t&&(r?ma(r)&&(o=mf(r)):o=mf(e));const l=jY(i,n,r)?KM(i):Uo(0);let c=(a.left+l.x)/o.x,d=(a.top+l.y)/o.y,u=a.width/o.x,h=a.height/o.y;if(i){const f=oi(i),p=r&&ma(r)?oi(r):r;let y=f,g=Qj(y);for(;g&&r&&p!==y;){const x=mf(g),m=g.getBoundingClientRect(),v=Ii(g),b=m.left+(g.clientLeft+parseFloat(v.paddingLeft))*x.x,C=m.top+(g.clientTop+parseFloat(v.paddingTop))*x.y;c*=x.x,d*=x.y,u*=x.x,h*=x.y,c+=b,d+=C,y=oi(g),g=Qj(y)}}return my({width:u,height:h,x:c,y:d})}function _S(e,t){const n=x1(e).scrollLeft;return t?t.left+n:_u(sl(e)).left+n}function XM(e,t,n){n===void 0&&(n=!1);const r=e.getBoundingClientRect(),a=r.left+t.scrollLeft-(n?0:_S(e,r)),i=r.top+t.scrollTop;return{x:a,y:i}}function NY(e){let{elements:t,rect:n,offsetParent:r,strategy:a}=e;const i=a==="fixed",o=sl(r),l=t?v1(t.floating):!1;if(r===o||l&&i)return n;let c={scrollLeft:0,scrollTop:0},d=Uo(1);const u=Uo(0),h=Zo(r);if((h||!h&&!i)&&((Qf(r)!=="body"||Kg(o))&&(c=x1(r)),Zo(r))){const p=_u(r);d=mf(r),u.x=p.x+r.clientLeft,u.y=p.y+r.clientTop}const f=o&&!h&&!i?XM(o,c,!0):Uo(0);return{width:n.width*d.x,height:n.height*d.y,x:n.x*d.x-c.scrollLeft*d.x+u.x+f.x,y:n.y*d.y-c.scrollTop*d.y+u.y+f.y}}function SY(e){return Array.from(e.getClientRects())}function CY(e){const t=sl(e),n=x1(e),r=e.ownerDocument.body,a=ri(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),i=ri(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+_S(e);const l=-n.scrollTop;return Ii(r).direction==="rtl"&&(o+=ri(t.clientWidth,r.clientWidth)-a),{width:a,height:i,x:o,y:l}}function PY(e,t){const n=oi(e),r=sl(e),a=n.visualViewport;let i=r.clientWidth,o=r.clientHeight,l=0,c=0;if(a){i=a.width,o=a.height;const d=TS();(!d||d&&t==="fixed")&&(l=a.offsetLeft,c=a.offsetTop)}return{width:i,height:o,x:l,y:c}}function DY(e,t){const n=_u(e,!0,t==="fixed"),r=n.top+e.clientTop,a=n.left+e.clientLeft,i=Zo(e)?mf(e):Uo(1),o=e.clientWidth*i.x,l=e.clientHeight*i.y,c=a*i.x,d=r*i.y;return{width:o,height:l,x:c,y:d}}function Sk(e,t,n){let r;if(t==="viewport")r=PY(e,n);else if(t==="document")r=CY(sl(e));else if(ma(t))r=DY(t,n);else{const a=KM(e);r={x:t.x-a.x,y:t.y-a.y,width:t.width,height:t.height}}return my(r)}function QM(e,t){const n=pd(e);return n===t||!ma(n)||Ef(n)?!1:Ii(n).position==="fixed"||QM(n,t)}function kY(e,t){const n=t.get(e);if(n)return n;let r=gg(e,[],!1).filter(l=>ma(l)&&Qf(l)!=="body"),a=null;const i=Ii(e).position==="fixed";let o=i?pd(e):e;for(;ma(o)&&!Ef(o);){const l=Ii(o),c=ES(o);!c&&l.position==="fixed"&&(a=null),(i?!c&&!a:!c&&l.position==="static"&&!!a&&["absolute","fixed"].includes(a.position)||Kg(o)&&!c&&QM(e,o))?r=r.filter(u=>u!==o):a=l,o=pd(o)}return t.set(e,r),r}function EY(e){let{element:t,boundary:n,rootBoundary:r,strategy:a}=e;const o=[...n==="clippingAncestors"?v1(t)?[]:kY(t,this._c):[].concat(n),r],l=o[0],c=o.reduce((d,u)=>{const h=Sk(t,u,a);return d.top=ri(h.top,d.top),d.right=fd(h.right,d.right),d.bottom=fd(h.bottom,d.bottom),d.left=ri(h.left,d.left),d},Sk(t,l,a));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function TY(e){const{width:t,height:n}=JM(e);return{width:t,height:n}}function AY(e,t,n){const r=Zo(t),a=sl(t),i=n==="fixed",o=_u(e,!0,i,t);let l={scrollLeft:0,scrollTop:0};const c=Uo(0);function d(){c.x=_S(a)}if(r||!r&&!i)if((Qf(t)!=="body"||Kg(a))&&(l=x1(t)),r){const p=_u(t,!0,i,t);c.x=p.x+t.clientLeft,c.y=p.y+t.clientTop}else a&&d();i&&!r&&a&&d();const u=a&&!r&&!i?XM(a,l):Uo(0),h=o.left+l.scrollLeft-c.x-u.x,f=o.top+l.scrollTop-c.y-u.y;return{x:h,y:f,width:o.width,height:o.height}}function Vw(e){return Ii(e).position==="static"}function Ck(e,t){if(!Zo(e)||Ii(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return sl(e)===n&&(n=n.ownerDocument.body),n}function ZM(e,t){const n=oi(e);if(v1(e))return n;if(!Zo(e)){let a=pd(e);for(;a&&!Ef(a);){if(ma(a)&&!Vw(a))return a;a=pd(a)}return n}let r=Ck(e,t);for(;r&&yY(r)&&Vw(r);)r=Ck(r,t);return r&&Ef(r)&&Vw(r)&&!ES(r)?n:r||bY(e)||n}const _Y=async function(e){const t=this.getOffsetParent||ZM,n=this.getDimensions,r=await n(e.floating);return{reference:AY(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function MY(e){return Ii(e).direction==="rtl"}const RY={convertOffsetParentRelativeRectToViewportRelativeRect:NY,getDocumentElement:sl,getClippingRect:EY,getOffsetParent:ZM,getElementRects:_Y,getClientRects:SY,getDimensions:TY,getScale:mf,isElement:ma,isRTL:MY};function eR(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function LY(e,t){let n=null,r;const a=sl(e);function i(){var l;clearTimeout(r),(l=n)==null||l.disconnect(),n=null}function o(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),i();const d=e.getBoundingClientRect(),{left:u,top:h,width:f,height:p}=d;if(l||t(),!f||!p)return;const y=wx(h),g=wx(a.clientWidth-(u+f)),x=wx(a.clientHeight-(h+p)),m=wx(u),b={rootMargin:-y+"px "+-g+"px "+-x+"px "+-m+"px",threshold:ri(0,fd(1,c))||1};let C=!0;function S(P){const D=P[0].intersectionRatio;if(D!==c){if(!C)return o();D?o(!1,D):r=setTimeout(()=>{o(!1,1e-7)},1e3)}D===1&&!eR(d,e.getBoundingClientRect())&&o(),C=!1}try{n=new IntersectionObserver(S,{...b,root:a.ownerDocument})}catch{n=new IntersectionObserver(S,b)}n.observe(e)}return o(!0),i}function tR(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:a=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,d=AS(e),u=a||i?[...d?gg(d):[],...gg(t)]:[];u.forEach(m=>{a&&m.addEventListener("scroll",n,{passive:!0}),i&&m.addEventListener("resize",n)});const h=d&&l?LY(d,n):null;let f=-1,p=null;o&&(p=new ResizeObserver(m=>{let[v]=m;v&&v.target===d&&p&&(p.unobserve(t),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var b;(b=p)==null||b.observe(t)})),n()}),d&&!c&&p.observe(d),p.observe(t));let y,g=c?_u(e):null;c&&x();function x(){const m=_u(e);g&&!eR(g,m)&&n(),g=m,y=requestAnimationFrame(x)}return n(),()=>{var m;u.forEach(v=>{a&&v.removeEventListener("scroll",n),i&&v.removeEventListener("resize",n)}),h==null||h(),(m=p)==null||m.disconnect(),p=null,c&&cancelAnimationFrame(y)}}const IY=mY,OY=gY,FY=hY,$Y=xY,BY=fY,Pk=uY,zY=vY,WY=(e,t,n)=>{const r=new Map,a={platform:RY,...n},i={...a.platform,_c:r};return dY(e,t,{...a,platform:i})};var HY=typeof document<"u",qY=function(){},y0=HY?j.useLayoutEffect:qY;function gy(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,a;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!gy(e[r],t[r]))return!1;return!0}if(a=Object.keys(e),n=a.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,a[r]))return!1;for(r=n;r--!==0;){const i=a[r];if(!(i==="_owner"&&e.$$typeof)&&!gy(e[i],t[i]))return!1}return!0}return e!==e&&t!==t}function nR(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function Dk(e,t){const n=nR(e);return Math.round(t*n)/n}function Uw(e){const t=j.useRef(e);return y0(()=>{t.current=e}),t}function rR(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:a,elements:{reference:i,floating:o}={},transform:l=!0,whileElementsMounted:c,open:d}=e,[u,h]=j.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[f,p]=j.useState(r);gy(f,r)||p(r);const[y,g]=j.useState(null),[x,m]=j.useState(null),v=j.useCallback(V=>{V!==P.current&&(P.current=V,g(V))},[]),b=j.useCallback(V=>{V!==D.current&&(D.current=V,m(V))},[]),C=i||y,S=o||x,P=j.useRef(null),D=j.useRef(null),N=j.useRef(u),M=c!=null,L=Uw(c),T=Uw(a),E=Uw(d),A=j.useCallback(()=>{if(!P.current||!D.current)return;const V={placement:t,strategy:n,middleware:f};T.current&&(V.platform=T.current),WY(P.current,D.current,V).then(B=>{const Y={...B,isPositioned:E.current!==!1};O.current&&!gy(N.current,Y)&&(N.current=Y,rl.flushSync(()=>{h(Y)}))})},[f,t,n,T,E]);y0(()=>{d===!1&&N.current.isPositioned&&(N.current.isPositioned=!1,h(V=>({...V,isPositioned:!1})))},[d]);const O=j.useRef(!1);y0(()=>(O.current=!0,()=>{O.current=!1}),[]),y0(()=>{if(C&&(P.current=C),S&&(D.current=S),C&&S){if(L.current)return L.current(C,S,A);A()}},[C,S,A,L,M]);const W=j.useMemo(()=>({reference:P,floating:D,setReference:v,setFloating:b}),[v,b]),z=j.useMemo(()=>({reference:C,floating:S}),[C,S]),F=j.useMemo(()=>{const V={position:n,left:0,top:0};if(!z.floating)return V;const B=Dk(z.floating,u.x),Y=Dk(z.floating,u.y);return l?{...V,transform:"translate("+B+"px, "+Y+"px)",...nR(z.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:B,top:Y}},[n,l,z.floating,u.x,u.y]);return j.useMemo(()=>({...u,update:A,refs:W,elements:z,floatingStyles:F}),[u,A,W,z,F])}const VY=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:a}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?Pk({element:r.current,padding:a}).fn(n):{}:r?Pk({element:r,padding:a}).fn(n):{}}}},sR=(e,t)=>({...IY(e),options:[e,t]}),UY=(e,t)=>({...OY(e),options:[e,t]}),YY=(e,t)=>({...zY(e),options:[e,t]}),aR=(e,t)=>({...FY(e),options:[e,t]}),GY=(e,t)=>({...$Y(e),options:[e,t]}),JY=(e,t)=>({...BY(e),options:[e,t]}),iR=(e,t)=>({...VY(e),options:[e,t]});function KY(e){const[t,n]=j.useState(void 0);return Li(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const r=new ResizeObserver(a=>{if(!Array.isArray(a)||!a.length)return;const i=a[0];let o,l;if("borderBoxSize"in i){const c=i.borderBoxSize,d=Array.isArray(c)?c[0]:c;o=d.inlineSize,l=d.blockSize}else o=e.offsetWidth,l=e.offsetHeight;n({width:o,height:l})});return r.observe(e,{box:"border-box"}),()=>r.unobserve(e)}else n(void 0)},[e]),t}const oR="Popper",[lR,cR]=CS(oR),[XY,dR]=lR(oR),QY=e=>{const{__scopePopper:t,children:n}=e,[r,a]=j.useState(null);return j.createElement(XY,{scope:t,anchor:r,onAnchorChange:a},n)},ZY="PopperAnchor",eG=j.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:r,...a}=e,i=dR(ZY,n),o=j.useRef(null),l=ea(t,o);return j.useEffect(()=>{i.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:j.createElement(As.div,St({},a,{ref:l}))}),uR="PopperContent",[tG,sNe]=lR(uR),nG=j.forwardRef((e,t)=>{var n,r,a,i,o,l,c,d;const{__scopePopper:u,side:h="bottom",sideOffset:f=0,align:p="center",alignOffset:y=0,arrowPadding:g=0,avoidCollisions:x=!0,collisionBoundary:m=[],collisionPadding:v=0,sticky:b="partial",hideWhenDetached:C=!1,updatePositionStrategy:S="optimized",onPlaced:P,...D}=e,N=dR(uR,u),[M,L]=j.useState(null),T=ea(t,_e=>L(_e)),[E,A]=j.useState(null),O=KY(E),W=(n=O==null?void 0:O.width)!==null&&n!==void 0?n:0,z=(r=O==null?void 0:O.height)!==null&&r!==void 0?r:0,F=h+(p!=="center"?"-"+p:""),V=typeof v=="number"?v:{top:0,right:0,bottom:0,left:0,...v},B=Array.isArray(m)?m:[m],Y=B.length>0,$={padding:V,boundary:B.filter(rG),altBoundary:Y},{refs:I,floatingStyles:U,placement:q,isPositioned:X,middlewareData:te}=rR({strategy:"fixed",placement:F,whileElementsMounted:(..._e)=>tR(..._e,{animationFrame:S==="always"}),elements:{reference:N.anchor},middleware:[sR({mainAxis:f+z,alignmentAxis:y}),x&&UY({mainAxis:!0,crossAxis:!1,limiter:b==="partial"?YY():void 0,...$}),x&&aR({...$}),GY({...$,apply:({elements:_e,rects:ue,availableWidth:wt,availableHeight:gt})=>{const{width:ve,height:we}=ue.reference,Se=_e.floating.style;Se.setProperty("--radix-popper-available-width",`${wt}px`),Se.setProperty("--radix-popper-available-height",`${gt}px`),Se.setProperty("--radix-popper-anchor-width",`${ve}px`),Se.setProperty("--radix-popper-anchor-height",`${we}px`)}}),E&&iR({element:E,padding:g}),sG({arrowWidth:W,arrowHeight:z}),C&&JY({strategy:"referenceHidden",...$})]}),[ae,le]=hR(q),me=Jl(P);Li(()=>{X&&(me==null||me())},[X,me]);const Le=(a=te.arrow)===null||a===void 0?void 0:a.x,ie=(i=te.arrow)===null||i===void 0?void 0:i.y,Ne=((o=te.arrow)===null||o===void 0?void 0:o.centerOffset)!==0,[Be,Ue]=j.useState();return Li(()=>{M&&Ue(window.getComputedStyle(M).zIndex)},[M]),j.createElement("div",{ref:I.setFloating,"data-radix-popper-content-wrapper":"",style:{...U,transform:X?U.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Be,"--radix-popper-transform-origin":[(l=te.transformOrigin)===null||l===void 0?void 0:l.x,(c=te.transformOrigin)===null||c===void 0?void 0:c.y].join(" ")},dir:e.dir},j.createElement(tG,{scope:u,placedSide:ae,onArrowChange:A,arrowX:Le,arrowY:ie,shouldHideArrow:Ne},j.createElement(As.div,St({"data-side":ae,"data-align":le},D,{ref:T,style:{...D.style,animation:X?void 0:"none",opacity:(d=te.hide)!==null&&d!==void 0&&d.referenceHidden?0:void 0}}))))});function rG(e){return e!==null}const sG=e=>({name:"transformOrigin",options:e,fn(t){var n,r,a,i,o;const{placement:l,rects:c,middlewareData:d}=t,h=((n=d.arrow)===null||n===void 0?void 0:n.centerOffset)!==0,f=h?0:e.arrowWidth,p=h?0:e.arrowHeight,[y,g]=hR(l),x={start:"0%",center:"50%",end:"100%"}[g],m=((r=(a=d.arrow)===null||a===void 0?void 0:a.x)!==null&&r!==void 0?r:0)+f/2,v=((i=(o=d.arrow)===null||o===void 0?void 0:o.y)!==null&&i!==void 0?i:0)+p/2;let b="",C="";return y==="bottom"?(b=h?x:`${m}px`,C=`${-p}px`):y==="top"?(b=h?x:`${m}px`,C=`${c.floating.height+p}px`):y==="right"?(b=`${-p}px`,C=h?x:`${v}px`):y==="left"&&(b=`${c.floating.width+p}px`,C=h?x:`${v}px`),{data:{x:b,y:C}}}});function hR(e){const[t,n="center"]=e.split("-");return[t,n]}const aG=QY,iG=eG,oG=nG,lG=j.forwardRef((e,t)=>{var n;const{container:r=globalThis==null||(n=globalThis.document)===null||n===void 0?void 0:n.body,...a}=e;return r?Hg.createPortal(j.createElement(As.div,St({},a,{ref:t})),r):null});function kk({prop:e,defaultProp:t,onChange:n=()=>{}}){const[r,a]=cG({defaultProp:t,onChange:n}),i=e!==void 0,o=i?e:r,l=Jl(n),c=j.useCallback(d=>{if(i){const h=typeof d=="function"?d(e):d;h!==e&&l(h)}else a(d)},[i,e,a,l]);return[o,c]}function cG({defaultProp:e,onChange:t}){const n=j.useState(e),[r]=n,a=j.useRef(r),i=Jl(t);return j.useEffect(()=>{a.current!==r&&(i(r),a.current=r)},[r,a,i]),n}function dG(e){const t=j.useRef({value:e,previous:e});return j.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}const uG=j.forwardRef((e,t)=>j.createElement(As.span,St({},e,{ref:t,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...e.style}})));var hG=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},_h=new WeakMap,jx=new WeakMap,Nx={},Yw=0,fR=function(e){return e&&(e.host||fR(e.parentNode))},fG=function(e,t){return t.map(function(n){if(e.contains(n))return n;var r=fR(n);return r&&e.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},pG=function(e,t,n,r){var a=fG(t,Array.isArray(e)?e:[e]);Nx[n]||(Nx[n]=new WeakMap);var i=Nx[n],o=[],l=new Set,c=new Set(a),d=function(h){!h||l.has(h)||(l.add(h),d(h.parentNode))};a.forEach(d);var u=function(h){!h||c.has(h)||Array.prototype.forEach.call(h.children,function(f){if(l.has(f))u(f);else try{var p=f.getAttribute(r),y=p!==null&&p!=="false",g=(_h.get(f)||0)+1,x=(i.get(f)||0)+1;_h.set(f,g),i.set(f,x),o.push(f),g===1&&y&&jx.set(f,!0),x===1&&f.setAttribute(n,"true"),y||f.setAttribute(r,"true")}catch(m){console.error("aria-hidden: cannot operate on ",f,m)}})};return u(t),l.clear(),Yw++,function(){o.forEach(function(h){var f=_h.get(h)-1,p=i.get(h)-1;_h.set(h,f),i.set(h,p),f||(jx.has(h)||h.removeAttribute(r),jx.delete(h)),p||h.removeAttribute(n)}),Yw--,Yw||(_h=new WeakMap,_h=new WeakMap,jx=new WeakMap,Nx={})}},pR=function(e,t,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),a=t||hG(e);return a?(r.push.apply(r,Array.from(a.querySelectorAll("[aria-live], script"))),pG(r,a,n,"aria-hidden")):function(){return null}},Ks=function(){return Ks=Object.assign||function(t){for(var n,r=1,a=arguments.length;r<a;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Ks.apply(this,arguments)};function MS(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]]);return n}function mR(e,t,n){if(n||arguments.length===2)for(var r=0,a=t.length,i;r<a;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))}var Im="right-scroll-bar-position",Om="width-before-scroll-bar",mG="with-scroll-bars-hidden",gG="--removed-body-scroll-bar-size";function Gw(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function vG(e,t){var n=j.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var a=n.value;a!==r&&(n.value=r,n.callback(r,a))}}}})[0];return n.callback=t,n.facade}var xG=typeof window<"u"?j.useLayoutEffect:j.useEffect,Ek=new WeakMap;function gR(e,t){var n=vG(t||null,function(r){return e.forEach(function(a){return Gw(a,r)})});return xG(function(){var r=Ek.get(n);if(r){var a=new Set(r),i=new Set(e),o=n.current;a.forEach(function(l){i.has(l)||Gw(l,null)}),i.forEach(function(l){a.has(l)||Gw(l,o)})}Ek.set(n,e)},[e]),n}function yG(e){return e}function bG(e,t){t===void 0&&(t=yG);var n=[],r=!1,a={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(i){var o=t(i,r);return n.push(o),function(){n=n.filter(function(l){return l!==o})}},assignSyncMedium:function(i){for(r=!0;n.length;){var o=n;n=[],o.forEach(i)}n={push:function(l){return i(l)},filter:function(){return n}}},assignMedium:function(i){r=!0;var o=[];if(n.length){var l=n;n=[],l.forEach(i),o=n}var c=function(){var u=o;o=[],u.forEach(i)},d=function(){return Promise.resolve().then(c)};d(),n={push:function(u){o.push(u),d()},filter:function(u){return o=o.filter(u),n}}}};return a}function vR(e){e===void 0&&(e={});var t=bG(null);return t.options=Ks({async:!0,ssr:!1},e),t}var xR=function(e){var t=e.sideCar,n=MS(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return j.createElement(r,Ks({},n))};xR.isSideCarExport=!0;function yR(e,t){return e.useMedium(t),xR}var bR=vR(),Jw=function(){},y1=j.forwardRef(function(e,t){var n=j.useRef(null),r=j.useState({onScrollCapture:Jw,onWheelCapture:Jw,onTouchMoveCapture:Jw}),a=r[0],i=r[1],o=e.forwardProps,l=e.children,c=e.className,d=e.removeScrollBar,u=e.enabled,h=e.shards,f=e.sideCar,p=e.noIsolation,y=e.inert,g=e.allowPinchZoom,x=e.as,m=x===void 0?"div":x,v=MS(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as"]),b=f,C=gR([n,t]),S=Ks(Ks({},v),a);return j.createElement(j.Fragment,null,u&&j.createElement(b,{sideCar:bR,removeScrollBar:d,shards:h,noIsolation:p,inert:y,setCallbacks:i,allowPinchZoom:!!g,lockRef:n}),o?j.cloneElement(j.Children.only(l),Ks(Ks({},S),{ref:C})):j.createElement(m,Ks({},S,{className:c,ref:C}),l))});y1.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};y1.classNames={fullWidth:Om,zeroRight:Im};var Tk,wG=function(){if(Tk)return Tk;if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function jG(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=wG();return t&&e.setAttribute("nonce",t),e}function NG(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function SG(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var CG=function(){var e=0,t=null;return{add:function(n){e==0&&(t=jG())&&(NG(t,n),SG(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},PG=function(){var e=CG();return function(t,n){j.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},RS=function(){var e=PG(),t=function(n){var r=n.styles,a=n.dynamic;return e(r,a),null};return t},DG={left:0,top:0,right:0,gap:0},Kw=function(e){return parseInt(e||"",10)||0},kG=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],a=t[e==="padding"?"paddingRight":"marginRight"];return[Kw(n),Kw(r),Kw(a)]},EG=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return DG;var t=kG(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},TG=RS(),gf="data-scroll-locked",AG=function(e,t,n,r){var a=e.left,i=e.top,o=e.right,l=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(mG,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(l,"px ").concat(r,`;
  }
  body[`).concat(gf,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(a,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(l,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Im,` {
    right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(Om,` {
    margin-right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(Im," .").concat(Im,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Om," .").concat(Om,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(gf,`] {
    `).concat(gG,": ").concat(l,`px;
  }
`)},Ak=function(){var e=parseInt(document.body.getAttribute(gf)||"0",10);return isFinite(e)?e:0},_G=function(){j.useEffect(function(){return document.body.setAttribute(gf,(Ak()+1).toString()),function(){var e=Ak()-1;e<=0?document.body.removeAttribute(gf):document.body.setAttribute(gf,e.toString())}},[])},wR=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,a=r===void 0?"margin":r;_G();var i=j.useMemo(function(){return EG(a)},[a]);return j.createElement(TG,{styles:AG(i,!t,a,n?"":"!important")})},Zj=!1;if(typeof window<"u")try{var Sx=Object.defineProperty({},"passive",{get:function(){return Zj=!0,!0}});window.addEventListener("test",Sx,Sx),window.removeEventListener("test",Sx,Sx)}catch{Zj=!1}var Mh=Zj?{passive:!1}:!1,MG=function(e){return e.tagName==="TEXTAREA"},jR=function(e,t){var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!MG(e)&&n[t]==="visible")},RG=function(e){return jR(e,"overflowY")},LG=function(e){return jR(e,"overflowX")},_k=function(e,t){var n=t;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var r=NR(e,n);if(r){var a=SR(e,n),i=a[1],o=a[2];if(i>o)return!0}n=n.parentNode}while(n&&n!==document.body);return!1},IG=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},OG=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},NR=function(e,t){return e==="v"?RG(t):LG(t)},SR=function(e,t){return e==="v"?IG(t):OG(t)},FG=function(e,t){return e==="h"&&t==="rtl"?-1:1},$G=function(e,t,n,r,a){var i=FG(e,window.getComputedStyle(t).direction),o=i*r,l=n.target,c=t.contains(l),d=!1,u=o>0,h=0,f=0;do{var p=SR(e,l),y=p[0],g=p[1],x=p[2],m=g-x-i*y;(y||m)&&NR(e,l)&&(h+=m,f+=y),l=l.parentNode}while(!c&&l!==document.body||c&&(t.contains(l)||t===l));return(u&&(a&&h===0||!a&&o>h)||!u&&(a&&f===0||!a&&-o>f))&&(d=!0),d},Cx=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},Mk=function(e){return[e.deltaX,e.deltaY]},Rk=function(e){return e&&"current"in e?e.current:e},BG=function(e,t){return e[0]===t[0]&&e[1]===t[1]},zG=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},WG=0,Rh=[];function HG(e){var t=j.useRef([]),n=j.useRef([0,0]),r=j.useRef(),a=j.useState(WG++)[0],i=j.useState(function(){return RS()})[0],o=j.useRef(e);j.useEffect(function(){o.current=e},[e]),j.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(a));var g=mR([e.lockRef.current],(e.shards||[]).map(Rk),!0).filter(Boolean);return g.forEach(function(x){return x.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),g.forEach(function(x){return x.classList.remove("allow-interactivity-".concat(a))})}}},[e.inert,e.lockRef.current,e.shards]);var l=j.useCallback(function(g,x){if("touches"in g&&g.touches.length===2)return!o.current.allowPinchZoom;var m=Cx(g),v=n.current,b="deltaX"in g?g.deltaX:v[0]-m[0],C="deltaY"in g?g.deltaY:v[1]-m[1],S,P=g.target,D=Math.abs(b)>Math.abs(C)?"h":"v";if("touches"in g&&D==="h"&&P.type==="range")return!1;var N=_k(D,P);if(!N)return!0;if(N?S=D:(S=D==="v"?"h":"v",N=_k(D,P)),!N)return!1;if(!r.current&&"changedTouches"in g&&(b||C)&&(r.current=S),!S)return!0;var M=r.current||S;return $G(M,x,g,M==="h"?b:C,!0)},[]),c=j.useCallback(function(g){var x=g;if(!(!Rh.length||Rh[Rh.length-1]!==i)){var m="deltaY"in x?Mk(x):Cx(x),v=t.current.filter(function(S){return S.name===x.type&&S.target===x.target&&BG(S.delta,m)})[0];if(v&&v.should){x.cancelable&&x.preventDefault();return}if(!v){var b=(o.current.shards||[]).map(Rk).filter(Boolean).filter(function(S){return S.contains(x.target)}),C=b.length>0?l(x,b[0]):!o.current.noIsolation;C&&x.cancelable&&x.preventDefault()}}},[]),d=j.useCallback(function(g,x,m,v){var b={name:g,delta:x,target:m,should:v};t.current.push(b),setTimeout(function(){t.current=t.current.filter(function(C){return C!==b})},1)},[]),u=j.useCallback(function(g){n.current=Cx(g),r.current=void 0},[]),h=j.useCallback(function(g){d(g.type,Mk(g),g.target,l(g,e.lockRef.current))},[]),f=j.useCallback(function(g){d(g.type,Cx(g),g.target,l(g,e.lockRef.current))},[]);j.useEffect(function(){return Rh.push(i),e.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:f}),document.addEventListener("wheel",c,Mh),document.addEventListener("touchmove",c,Mh),document.addEventListener("touchstart",u,Mh),function(){Rh=Rh.filter(function(g){return g!==i}),document.removeEventListener("wheel",c,Mh),document.removeEventListener("touchmove",c,Mh),document.removeEventListener("touchstart",u,Mh)}},[]);var p=e.removeScrollBar,y=e.inert;return j.createElement(j.Fragment,null,y?j.createElement(i,{styles:zG(a)}):null,p?j.createElement(wR,{gapMode:"margin"}):null)}const qG=yR(bR,HG);var CR=j.forwardRef(function(e,t){return j.createElement(y1,Ks({},e,{ref:t,sideCar:qG}))});CR.classNames=y1.classNames;const VG=CR,UG=[" ","Enter","ArrowUp","ArrowDown"],YG=[" ","Enter"],b1="Select",[w1,j1,GG]=RU(b1),[Zf,aNe]=CS(b1,[GG,cR]),LS=cR(),[JG,Ku]=Zf(b1),[KG,XG]=Zf(b1),QG=e=>{const{__scopeSelect:t,children:n,open:r,defaultOpen:a,onOpenChange:i,value:o,defaultValue:l,onValueChange:c,dir:d,name:u,autoComplete:h,disabled:f,required:p}=e,y=LS(t),[g,x]=j.useState(null),[m,v]=j.useState(null),[b,C]=j.useState(!1),S=IU(d),[P=!1,D]=kk({prop:r,defaultProp:a,onChange:i}),[N,M]=kk({prop:o,defaultProp:l,onChange:c}),L=j.useRef(null),T=g?!!g.closest("form"):!0,[E,A]=j.useState(new Set),O=Array.from(E).map(W=>W.props.value).join(";");return j.createElement(aG,y,j.createElement(JG,{required:p,scope:t,trigger:g,onTriggerChange:x,valueNode:m,onValueNodeChange:v,valueNodeHasChildren:b,onValueNodeHasChildrenChange:C,contentId:VM(),value:N,onValueChange:M,open:P,onOpenChange:D,dir:S,triggerPointerDownPosRef:L,disabled:f},j.createElement(w1.Provider,{scope:t},j.createElement(KG,{scope:e.__scopeSelect,onNativeOptionAdd:j.useCallback(W=>{A(z=>new Set(z).add(W))},[]),onNativeOptionRemove:j.useCallback(W=>{A(z=>{const F=new Set(z);return F.delete(W),F})},[])},n)),T?j.createElement(TR,{key:O,"aria-hidden":!0,required:p,tabIndex:-1,name:u,autoComplete:h,value:N,onChange:W=>M(W.target.value),disabled:f},N===void 0?j.createElement("option",{value:""}):null,Array.from(E)):null))},ZG="SelectTrigger",eJ=j.forwardRef((e,t)=>{const{__scopeSelect:n,disabled:r=!1,...a}=e,i=LS(n),o=Ku(ZG,n),l=o.disabled||r,c=ea(t,o.onTriggerChange),d=j1(n),[u,h,f]=AR(y=>{const g=d().filter(v=>!v.disabled),x=g.find(v=>v.value===o.value),m=_R(g,y,x);m!==void 0&&o.onValueChange(m.value)}),p=()=>{l||(o.onOpenChange(!0),f())};return j.createElement(iG,St({asChild:!0},i),j.createElement(As.button,St({type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":ER(o.value)?"":void 0},a,{ref:c,onClick:ms(a.onClick,y=>{y.currentTarget.focus()}),onPointerDown:ms(a.onPointerDown,y=>{const g=y.target;g.hasPointerCapture(y.pointerId)&&g.releasePointerCapture(y.pointerId),y.button===0&&y.ctrlKey===!1&&(p(),o.triggerPointerDownPosRef.current={x:Math.round(y.pageX),y:Math.round(y.pageY)},y.preventDefault())}),onKeyDown:ms(a.onKeyDown,y=>{const g=u.current!=="";!(y.ctrlKey||y.altKey||y.metaKey)&&y.key.length===1&&h(y.key),!(g&&y.key===" ")&&UG.includes(y.key)&&(p(),y.preventDefault())})})))}),tJ="SelectValue",nJ=j.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:a,children:i,placeholder:o="",...l}=e,c=Ku(tJ,n),{onValueNodeHasChildrenChange:d}=c,u=i!==void 0,h=ea(t,c.onValueNodeChange);return Li(()=>{d(u)},[d,u]),j.createElement(As.span,St({},l,{ref:h,style:{pointerEvents:"none"}}),ER(c.value)?j.createElement(j.Fragment,null,o):i)}),rJ=j.forwardRef((e,t)=>{const{__scopeSelect:n,children:r,...a}=e;return j.createElement(As.span,St({"aria-hidden":!0},a,{ref:t}),r||"▼")}),sJ=e=>j.createElement(lG,St({asChild:!0},e)),Tf="SelectContent",aJ=j.forwardRef((e,t)=>{const n=Ku(Tf,e.__scopeSelect),[r,a]=j.useState();if(Li(()=>{a(new DocumentFragment)},[]),!n.open){const i=r;return i?rl.createPortal(j.createElement(PR,{scope:e.__scopeSelect},j.createElement(w1.Slot,{scope:e.__scopeSelect},j.createElement("div",null,e.children))),i):null}return j.createElement(iJ,St({},e,{ref:t}))}),kl=10,[PR,Xu]=Zf(Tf),iJ=j.forwardRef((e,t)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:a,onEscapeKeyDown:i,onPointerDownOutside:o,side:l,sideOffset:c,align:d,alignOffset:u,arrowPadding:h,collisionBoundary:f,collisionPadding:p,sticky:y,hideWhenDetached:g,avoidCollisions:x,...m}=e,v=Ku(Tf,n),[b,C]=j.useState(null),[S,P]=j.useState(null),D=ea(t,ae=>C(ae)),[N,M]=j.useState(null),[L,T]=j.useState(null),E=j1(n),[A,O]=j.useState(!1),W=j.useRef(!1);j.useEffect(()=>{if(b)return pR(b)},[b]),UU();const z=j.useCallback(ae=>{const[le,...me]=E().map(Ne=>Ne.ref.current),[Le]=me.slice(-1),ie=document.activeElement;for(const Ne of ae)if(Ne===ie||(Ne==null||Ne.scrollIntoView({block:"nearest"}),Ne===le&&S&&(S.scrollTop=0),Ne===Le&&S&&(S.scrollTop=S.scrollHeight),Ne==null||Ne.focus(),document.activeElement!==ie))return},[E,S]),F=j.useCallback(()=>z([N,b]),[z,N,b]);j.useEffect(()=>{A&&F()},[A,F]);const{onOpenChange:V,triggerPointerDownPosRef:B}=v;j.useEffect(()=>{if(b){let ae={x:0,y:0};const le=Le=>{var ie,Ne,Be,Ue;ae={x:Math.abs(Math.round(Le.pageX)-((ie=(Ne=B.current)===null||Ne===void 0?void 0:Ne.x)!==null&&ie!==void 0?ie:0)),y:Math.abs(Math.round(Le.pageY)-((Be=(Ue=B.current)===null||Ue===void 0?void 0:Ue.y)!==null&&Be!==void 0?Be:0))}},me=Le=>{ae.x<=10&&ae.y<=10?Le.preventDefault():b.contains(Le.target)||V(!1),document.removeEventListener("pointermove",le),B.current=null};return B.current!==null&&(document.addEventListener("pointermove",le),document.addEventListener("pointerup",me,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",le),document.removeEventListener("pointerup",me,{capture:!0})}}},[b,V,B]),j.useEffect(()=>{const ae=()=>V(!1);return window.addEventListener("blur",ae),window.addEventListener("resize",ae),()=>{window.removeEventListener("blur",ae),window.removeEventListener("resize",ae)}},[V]);const[Y,$]=AR(ae=>{const le=E().filter(ie=>!ie.disabled),me=le.find(ie=>ie.ref.current===document.activeElement),Le=_R(le,ae,me);Le&&setTimeout(()=>Le.ref.current.focus())}),I=j.useCallback((ae,le,me)=>{const Le=!W.current&&!me;(v.value!==void 0&&v.value===le||Le)&&(M(ae),Le&&(W.current=!0))},[v.value]),U=j.useCallback(()=>b==null?void 0:b.focus(),[b]),q=j.useCallback((ae,le,me)=>{const Le=!W.current&&!me;(v.value!==void 0&&v.value===le||Le)&&T(ae)},[v.value]),X=r==="popper"?Lk:oJ,te=X===Lk?{side:l,sideOffset:c,align:d,alignOffset:u,arrowPadding:h,collisionBoundary:f,collisionPadding:p,sticky:y,hideWhenDetached:g,avoidCollisions:x}:{};return j.createElement(PR,{scope:n,content:b,viewport:S,onViewportChange:P,itemRefCallback:I,selectedItem:N,onItemLeave:U,itemTextRefCallback:q,focusSelectedItem:F,selectedItemText:L,position:r,isPositioned:A,searchRef:Y},j.createElement(VG,{as:pg,allowPinchZoom:!0},j.createElement(YU,{asChild:!0,trapped:v.open,onMountAutoFocus:ae=>{ae.preventDefault()},onUnmountAutoFocus:ms(a,ae=>{var le;(le=v.trigger)===null||le===void 0||le.focus({preventScroll:!0}),ae.preventDefault()})},j.createElement(HU,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:ae=>ae.preventDefault(),onDismiss:()=>v.onOpenChange(!1)},j.createElement(X,St({role:"listbox",id:v.contentId,"data-state":v.open?"open":"closed",dir:v.dir,onContextMenu:ae=>ae.preventDefault()},m,te,{onPlaced:()=>O(!0),ref:D,style:{display:"flex",flexDirection:"column",outline:"none",...m.style},onKeyDown:ms(m.onKeyDown,ae=>{const le=ae.ctrlKey||ae.altKey||ae.metaKey;if(ae.key==="Tab"&&ae.preventDefault(),!le&&ae.key.length===1&&$(ae.key),["ArrowUp","ArrowDown","Home","End"].includes(ae.key)){let Le=E().filter(ie=>!ie.disabled).map(ie=>ie.ref.current);if(["ArrowUp","End"].includes(ae.key)&&(Le=Le.slice().reverse()),["ArrowUp","ArrowDown"].includes(ae.key)){const ie=ae.target,Ne=Le.indexOf(ie);Le=Le.slice(Ne+1)}setTimeout(()=>z(Le)),ae.preventDefault()}})}))))))}),oJ=j.forwardRef((e,t)=>{const{__scopeSelect:n,onPlaced:r,...a}=e,i=Ku(Tf,n),o=Xu(Tf,n),[l,c]=j.useState(null),[d,u]=j.useState(null),h=ea(t,D=>u(D)),f=j1(n),p=j.useRef(!1),y=j.useRef(!0),{viewport:g,selectedItem:x,selectedItemText:m,focusSelectedItem:v}=o,b=j.useCallback(()=>{if(i.trigger&&i.valueNode&&l&&d&&g&&x&&m){const D=i.trigger.getBoundingClientRect(),N=d.getBoundingClientRect(),M=i.valueNode.getBoundingClientRect(),L=m.getBoundingClientRect();if(i.dir!=="rtl"){const ie=L.left-N.left,Ne=M.left-ie,Be=D.left-Ne,Ue=D.width+Be,_e=Math.max(Ue,N.width),ue=window.innerWidth-kl,wt=hk(Ne,[kl,ue-_e]);l.style.minWidth=Ue+"px",l.style.left=wt+"px"}else{const ie=N.right-L.right,Ne=window.innerWidth-M.right-ie,Be=window.innerWidth-D.right-Ne,Ue=D.width+Be,_e=Math.max(Ue,N.width),ue=window.innerWidth-kl,wt=hk(Ne,[kl,ue-_e]);l.style.minWidth=Ue+"px",l.style.right=wt+"px"}const T=f(),E=window.innerHeight-kl*2,A=g.scrollHeight,O=window.getComputedStyle(d),W=parseInt(O.borderTopWidth,10),z=parseInt(O.paddingTop,10),F=parseInt(O.borderBottomWidth,10),V=parseInt(O.paddingBottom,10),B=W+z+A+V+F,Y=Math.min(x.offsetHeight*5,B),$=window.getComputedStyle(g),I=parseInt($.paddingTop,10),U=parseInt($.paddingBottom,10),q=D.top+D.height/2-kl,X=E-q,te=x.offsetHeight/2,ae=x.offsetTop+te,le=W+z+ae,me=B-le;if(le<=q){const ie=x===T[T.length-1].ref.current;l.style.bottom="0px";const Ne=d.clientHeight-g.offsetTop-g.offsetHeight,Be=Math.max(X,te+(ie?U:0)+Ne+F),Ue=le+Be;l.style.height=Ue+"px"}else{const ie=x===T[0].ref.current;l.style.top="0px";const Be=Math.max(q,W+g.offsetTop+(ie?I:0)+te)+me;l.style.height=Be+"px",g.scrollTop=le-q+g.offsetTop}l.style.margin=`${kl}px 0`,l.style.minHeight=Y+"px",l.style.maxHeight=E+"px",r==null||r(),requestAnimationFrame(()=>p.current=!0)}},[f,i.trigger,i.valueNode,l,d,g,x,m,i.dir,r]);Li(()=>b(),[b]);const[C,S]=j.useState();Li(()=>{d&&S(window.getComputedStyle(d).zIndex)},[d]);const P=j.useCallback(D=>{D&&y.current===!0&&(b(),v==null||v(),y.current=!1)},[b,v]);return j.createElement(lJ,{scope:n,contentWrapper:l,shouldExpandOnScrollRef:p,onScrollButtonChange:P},j.createElement("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:C}},j.createElement(As.div,St({},a,{ref:h,style:{boxSizing:"border-box",maxHeight:"100%",...a.style}}))))}),Lk=j.forwardRef((e,t)=>{const{__scopeSelect:n,align:r="start",collisionPadding:a=kl,...i}=e,o=LS(n);return j.createElement(oG,St({},o,i,{ref:t,align:r,collisionPadding:a,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}}))}),[lJ,IS]=Zf(Tf,{}),Ik="SelectViewport",cJ=j.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,a=Xu(Ik,n),i=IS(Ik,n),o=ea(t,a.onViewportChange),l=j.useRef(0);return j.createElement(j.Fragment,null,j.createElement("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"}}),j.createElement(w1.Slot,{scope:n},j.createElement(As.div,St({"data-radix-select-viewport":"",role:"presentation"},r,{ref:o,style:{position:"relative",flex:1,overflow:"auto",...r.style},onScroll:ms(r.onScroll,c=>{const d=c.currentTarget,{contentWrapper:u,shouldExpandOnScrollRef:h}=i;if(h!=null&&h.current&&u){const f=Math.abs(l.current-d.scrollTop);if(f>0){const p=window.innerHeight-kl*2,y=parseFloat(u.style.minHeight),g=parseFloat(u.style.height),x=Math.max(y,g);if(x<p){const m=x+f,v=Math.min(p,m),b=m-v;u.style.height=v+"px",u.style.bottom==="0px"&&(d.scrollTop=b>0?b:0,u.style.justifyContent="flex-end")}}}l.current=d.scrollTop})}))))}),dJ="SelectGroup",[iNe,uJ]=Zf(dJ),hJ="SelectLabel",fJ=j.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,a=uJ(hJ,n);return j.createElement(As.div,St({id:a.id},r,{ref:t}))}),eN="SelectItem",[pJ,DR]=Zf(eN),mJ=j.forwardRef((e,t)=>{const{__scopeSelect:n,value:r,disabled:a=!1,textValue:i,...o}=e,l=Ku(eN,n),c=Xu(eN,n),d=l.value===r,[u,h]=j.useState(i??""),[f,p]=j.useState(!1),y=ea(t,m=>{var v;return(v=c.itemRefCallback)===null||v===void 0?void 0:v.call(c,m,r,a)}),g=VM(),x=()=>{a||(l.onValueChange(r),l.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return j.createElement(pJ,{scope:n,value:r,disabled:a,textId:g,isSelected:d,onItemTextChange:j.useCallback(m=>{h(v=>{var b;return v||((b=m==null?void 0:m.textContent)!==null&&b!==void 0?b:"").trim()})},[])},j.createElement(w1.ItemSlot,{scope:n,value:r,disabled:a,textValue:u},j.createElement(As.div,St({role:"option","aria-labelledby":g,"data-highlighted":f?"":void 0,"aria-selected":d&&f,"data-state":d?"checked":"unchecked","aria-disabled":a||void 0,"data-disabled":a?"":void 0,tabIndex:a?void 0:-1},o,{ref:y,onFocus:ms(o.onFocus,()=>p(!0)),onBlur:ms(o.onBlur,()=>p(!1)),onPointerUp:ms(o.onPointerUp,x),onPointerMove:ms(o.onPointerMove,m=>{if(a){var v;(v=c.onItemLeave)===null||v===void 0||v.call(c)}else m.currentTarget.focus({preventScroll:!0})}),onPointerLeave:ms(o.onPointerLeave,m=>{if(m.currentTarget===document.activeElement){var v;(v=c.onItemLeave)===null||v===void 0||v.call(c)}}),onKeyDown:ms(o.onKeyDown,m=>{var v;((v=c.searchRef)===null||v===void 0?void 0:v.current)!==""&&m.key===" "||(YG.includes(m.key)&&x(),m.key===" "&&m.preventDefault())})}))))}),Px="SelectItemText",gJ=j.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:a,...i}=e,o=Ku(Px,n),l=Xu(Px,n),c=DR(Px,n),d=XG(Px,n),[u,h]=j.useState(null),f=ea(t,m=>h(m),c.onItemTextChange,m=>{var v;return(v=l.itemTextRefCallback)===null||v===void 0?void 0:v.call(l,m,c.value,c.disabled)}),p=u==null?void 0:u.textContent,y=j.useMemo(()=>j.createElement("option",{key:c.value,value:c.value,disabled:c.disabled},p),[c.disabled,c.value,p]),{onNativeOptionAdd:g,onNativeOptionRemove:x}=d;return Li(()=>(g(y),()=>x(y)),[g,x,y]),j.createElement(j.Fragment,null,j.createElement(As.span,St({id:c.textId},i,{ref:f})),c.isSelected&&o.valueNode&&!o.valueNodeHasChildren?rl.createPortal(i.children,o.valueNode):null)}),vJ="SelectItemIndicator",xJ=j.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return DR(vJ,n).isSelected?j.createElement(As.span,St({"aria-hidden":!0},r,{ref:t})):null}),Ok="SelectScrollUpButton",yJ=j.forwardRef((e,t)=>{const n=Xu(Ok,e.__scopeSelect),r=IS(Ok,e.__scopeSelect),[a,i]=j.useState(!1),o=ea(t,r.onScrollButtonChange);return Li(()=>{if(n.viewport&&n.isPositioned){let c=function(){const d=l.scrollTop>0;i(d)};const l=n.viewport;return c(),l.addEventListener("scroll",c),()=>l.removeEventListener("scroll",c)}},[n.viewport,n.isPositioned]),a?j.createElement(kR,St({},e,{ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}})):null}),Fk="SelectScrollDownButton",bJ=j.forwardRef((e,t)=>{const n=Xu(Fk,e.__scopeSelect),r=IS(Fk,e.__scopeSelect),[a,i]=j.useState(!1),o=ea(t,r.onScrollButtonChange);return Li(()=>{if(n.viewport&&n.isPositioned){let c=function(){const d=l.scrollHeight-l.clientHeight,u=Math.ceil(l.scrollTop)<d;i(u)};const l=n.viewport;return c(),l.addEventListener("scroll",c),()=>l.removeEventListener("scroll",c)}},[n.viewport,n.isPositioned]),a?j.createElement(kR,St({},e,{ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}})):null}),kR=j.forwardRef((e,t)=>{const{__scopeSelect:n,onAutoScroll:r,...a}=e,i=Xu("SelectScrollButton",n),o=j.useRef(null),l=j1(n),c=j.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return j.useEffect(()=>()=>c(),[c]),Li(()=>{var d;const u=l().find(h=>h.ref.current===document.activeElement);u==null||(d=u.ref.current)===null||d===void 0||d.scrollIntoView({block:"nearest"})},[l]),j.createElement(As.div,St({"aria-hidden":!0},a,{ref:t,style:{flexShrink:0,...a.style},onPointerDown:ms(a.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(r,50))}),onPointerMove:ms(a.onPointerMove,()=>{var d;(d=i.onItemLeave)===null||d===void 0||d.call(i),o.current===null&&(o.current=window.setInterval(r,50))}),onPointerLeave:ms(a.onPointerLeave,()=>{c()})}))}),wJ=j.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return j.createElement(As.div,St({"aria-hidden":!0},r,{ref:t}))});function ER(e){return e===""||e===void 0}const TR=j.forwardRef((e,t)=>{const{value:n,...r}=e,a=j.useRef(null),i=ea(t,a),o=dG(n);return j.useEffect(()=>{const l=a.current,c=window.HTMLSelectElement.prototype,u=Object.getOwnPropertyDescriptor(c,"value").set;if(o!==n&&u){const h=new Event("change",{bubbles:!0});u.call(l,n),l.dispatchEvent(h)}},[o,n]),j.createElement(uG,{asChild:!0},j.createElement("select",St({},r,{ref:i,defaultValue:n})))});TR.displayName="BubbleSelect";function AR(e){const t=Jl(e),n=j.useRef(""),r=j.useRef(0),a=j.useCallback(o=>{const l=n.current+o;t(l),function c(d){n.current=d,window.clearTimeout(r.current),d!==""&&(r.current=window.setTimeout(()=>c(""),1e3))}(l)},[t]),i=j.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return j.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,a,i]}function _R(e,t,n){const a=t.length>1&&Array.from(t).every(d=>d===t[0])?t[0]:t,i=n?e.indexOf(n):-1;let o=jJ(e,Math.max(i,0));a.length===1&&(o=o.filter(d=>d!==n));const c=o.find(d=>d.textValue.toLowerCase().startsWith(a.toLowerCase()));return c!==n?c:void 0}function jJ(e,t){return e.map((n,r)=>e[(t+r)%e.length])}const NJ=QG,MR=eJ,SJ=nJ,CJ=rJ,PJ=sJ,RR=aJ,DJ=cJ,LR=fJ,IR=mJ,kJ=gJ,EJ=xJ,OR=yJ,FR=bJ,$R=wJ,st=NJ,at=SJ,nt=Q.forwardRef(({className:e,children:t,...n},r)=>s.jsxs(MR,{ref:r,className:Ft("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...n,children:[t,s.jsx(CJ,{asChild:!0,children:s.jsx(Ll,{className:"h-4 w-4 opacity-50"})})]}));nt.displayName=MR.displayName;const BR=Q.forwardRef(({className:e,...t},n)=>s.jsx(OR,{ref:n,className:Ft("flex cursor-default items-center justify-center py-1",e),...t,children:s.jsx(Uc,{className:"h-4 w-4"})}));BR.displayName=OR.displayName;const zR=Q.forwardRef(({className:e,...t},n)=>s.jsx(FR,{ref:n,className:Ft("flex cursor-default items-center justify-center py-1",e),...t,children:s.jsx(Ll,{className:"h-4 w-4"})}));zR.displayName=FR.displayName;const rt=Q.forwardRef(({className:e,children:t,position:n="popper",...r},a)=>s.jsx(PJ,{children:s.jsxs(RR,{ref:a,className:Ft("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:n,...r,children:[s.jsx(BR,{}),s.jsx(DJ,{className:Ft("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),s.jsx(zR,{})]})}));rt.displayName=RR.displayName;const TJ=Q.forwardRef(({className:e,...t},n)=>s.jsx(LR,{ref:n,className:Ft("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));TJ.displayName=LR.displayName;const xe=Q.forwardRef(({className:e,children:t,...n},r)=>s.jsxs(IR,{ref:r,className:Ft("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(EJ,{children:s.jsx(Gg,{className:"h-4 w-4"})})}),s.jsx(kJ,{children:t})]}));xe.displayName=IR.displayName;const AJ=Q.forwardRef(({className:e,...t},n)=>s.jsx($R,{ref:n,className:Ft("-mx-1 my-1 h-px bg-muted",e),...t}));AJ.displayName=$R.displayName;function Pn(e,t,{checkForDefaultPrevented:n=!0}={}){return function(a){if(e==null||e(a),n===!1||!a.defaultPrevented)return t==null?void 0:t(a)}}function _J(e,t){const n=j.createContext(t),r=i=>{const{children:o,...l}=i,c=j.useMemo(()=>l,Object.values(l));return s.jsx(n.Provider,{value:c,children:o})};r.displayName=e+"Provider";function a(i){const o=j.useContext(n);if(o)return o;if(t!==void 0)return t;throw new Error(`\`${i}\` must be used within \`${e}\``)}return[r,a]}function Cd(e,t=[]){let n=[];function r(i,o){const l=j.createContext(o),c=n.length;n=[...n,o];const d=h=>{var m;const{scope:f,children:p,...y}=h,g=((m=f==null?void 0:f[e])==null?void 0:m[c])||l,x=j.useMemo(()=>y,Object.values(y));return s.jsx(g.Provider,{value:x,children:p})};d.displayName=i+"Provider";function u(h,f){var g;const p=((g=f==null?void 0:f[e])==null?void 0:g[c])||l,y=j.useContext(p);if(y)return y;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${i}\``)}return[d,u]}const a=()=>{const i=n.map(o=>j.createContext(o));return function(l){const c=(l==null?void 0:l[e])||i;return j.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return a.scopeName=e,[r,MJ(a,...t)]}function MJ(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(i){const o=r.reduce((l,{useScope:c,scopeName:d})=>{const h=c(i)[`__scope${d}`];return{...l,...h}},{});return j.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return n.scopeName=t.scopeName,n}function WR(e){const t=e+"CollectionProvider",[n,r]=Cd(t),[a,i]=n(t,{collectionRef:{current:null},itemMap:new Map}),o=g=>{const{scope:x,children:m}=g,v=Q.useRef(null),b=Q.useRef(new Map).current;return s.jsx(a,{scope:x,itemMap:b,collectionRef:v,children:m})};o.displayName=t;const l=e+"CollectionSlot",c=fg(l),d=Q.forwardRef((g,x)=>{const{scope:m,children:v}=g,b=i(l,m),C=ba(x,b.collectionRef);return s.jsx(c,{ref:C,children:v})});d.displayName=l;const u=e+"CollectionItemSlot",h="data-radix-collection-item",f=fg(u),p=Q.forwardRef((g,x)=>{const{scope:m,children:v,...b}=g,C=Q.useRef(null),S=ba(x,C),P=i(u,m);return Q.useEffect(()=>(P.itemMap.set(C,{ref:C,...b}),()=>void P.itemMap.delete(C))),s.jsx(f,{[h]:"",ref:S,children:v})});p.displayName=u;function y(g){const x=i(e+"CollectionConsumer",g);return Q.useCallback(()=>{const v=x.collectionRef.current;if(!v)return[];const b=Array.from(v.querySelectorAll(`[${h}]`));return Array.from(x.itemMap.values()).sort((P,D)=>b.indexOf(P.ref.current)-b.indexOf(D.ref.current))},[x.collectionRef,x.itemMap])}return[{Provider:o,Slot:d,ItemSlot:p},y,r]}var RJ=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Mn=RJ.reduce((e,t)=>{const n=fg(`Primitive.${t}`),r=j.forwardRef((a,i)=>{const{asChild:o,...l}=a,c=o?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),s.jsx(c,{...l,ref:i})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function HR(e,t){e&&rl.flushSync(()=>e.dispatchEvent(t))}function el(e){const t=j.useRef(e);return j.useEffect(()=>{t.current=e}),j.useMemo(()=>(...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}function LJ(e,t=globalThis==null?void 0:globalThis.document){const n=el(e);j.useEffect(()=>{const r=a=>{a.key==="Escape"&&n(a)};return t.addEventListener("keydown",r,{capture:!0}),()=>t.removeEventListener("keydown",r,{capture:!0})},[n,t])}var IJ="DismissableLayer",tN="dismissableLayer.update",OJ="dismissableLayer.pointerDownOutside",FJ="dismissableLayer.focusOutside",$k,qR=j.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),OS=j.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:a,onFocusOutside:i,onInteractOutside:o,onDismiss:l,...c}=e,d=j.useContext(qR),[u,h]=j.useState(null),f=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,p]=j.useState({}),y=ba(t,D=>h(D)),g=Array.from(d.layers),[x]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),m=g.indexOf(x),v=u?g.indexOf(u):-1,b=d.layersWithOutsidePointerEventsDisabled.size>0,C=v>=m,S=BJ(D=>{const N=D.target,M=[...d.branches].some(L=>L.contains(N));!C||M||(a==null||a(D),o==null||o(D),D.defaultPrevented||l==null||l())},f),P=zJ(D=>{const N=D.target;[...d.branches].some(L=>L.contains(N))||(i==null||i(D),o==null||o(D),D.defaultPrevented||l==null||l())},f);return LJ(D=>{v===d.layers.size-1&&(r==null||r(D),!D.defaultPrevented&&l&&(D.preventDefault(),l()))},f),j.useEffect(()=>{if(u)return n&&(d.layersWithOutsidePointerEventsDisabled.size===0&&($k=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(u)),d.layers.add(u),Bk(),()=>{n&&d.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=$k)}},[u,f,n,d]),j.useEffect(()=>()=>{u&&(d.layers.delete(u),d.layersWithOutsidePointerEventsDisabled.delete(u),Bk())},[u,d]),j.useEffect(()=>{const D=()=>p({});return document.addEventListener(tN,D),()=>document.removeEventListener(tN,D)},[]),s.jsx(Mn.div,{...c,ref:y,style:{pointerEvents:b?C?"auto":"none":void 0,...e.style},onFocusCapture:Pn(e.onFocusCapture,P.onFocusCapture),onBlurCapture:Pn(e.onBlurCapture,P.onBlurCapture),onPointerDownCapture:Pn(e.onPointerDownCapture,S.onPointerDownCapture)})});OS.displayName=IJ;var $J="DismissableLayerBranch",VR=j.forwardRef((e,t)=>{const n=j.useContext(qR),r=j.useRef(null),a=ba(t,r);return j.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),s.jsx(Mn.div,{...e,ref:a})});VR.displayName=$J;function BJ(e,t=globalThis==null?void 0:globalThis.document){const n=el(e),r=j.useRef(!1),a=j.useRef(()=>{});return j.useEffect(()=>{const i=l=>{if(l.target&&!r.current){let c=function(){UR(OJ,n,d,{discrete:!0})};const d={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",a.current),a.current=c,t.addEventListener("click",a.current,{once:!0})):c()}else t.removeEventListener("click",a.current);r.current=!1},o=window.setTimeout(()=>{t.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),t.removeEventListener("pointerdown",i),t.removeEventListener("click",a.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}function zJ(e,t=globalThis==null?void 0:globalThis.document){const n=el(e),r=j.useRef(!1);return j.useEffect(()=>{const a=i=>{i.target&&!r.current&&UR(FJ,n,{originalEvent:i},{discrete:!1})};return t.addEventListener("focusin",a),()=>t.removeEventListener("focusin",a)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function Bk(){const e=new CustomEvent(tN);document.dispatchEvent(e)}function UR(e,t,n,{discrete:r}){const a=n.originalEvent.target,i=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&a.addEventListener(e,t,{once:!0}),r?HR(a,i):a.dispatchEvent(i)}var WJ=OS,HJ=VR,Mu=globalThis!=null&&globalThis.document?j.useLayoutEffect:()=>{},qJ="Portal",FS=j.forwardRef((e,t)=>{var l;const{container:n,...r}=e,[a,i]=j.useState(!1);Mu(()=>i(!0),[]);const o=n||a&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return o?Hg.createPortal(s.jsx(Mn.div,{...r,ref:t}),o):null});FS.displayName=qJ;function VJ(e,t){return j.useReducer((n,r)=>t[n][r]??n,e)}var Qu=e=>{const{present:t,children:n}=e,r=UJ(t),a=typeof n=="function"?n({present:r.isPresent}):j.Children.only(n),i=ba(r.ref,YJ(a));return typeof n=="function"||r.isPresent?j.cloneElement(a,{ref:i}):null};Qu.displayName="Presence";function UJ(e){const[t,n]=j.useState(),r=j.useRef(null),a=j.useRef(e),i=j.useRef("none"),o=e?"mounted":"unmounted",[l,c]=VJ(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return j.useEffect(()=>{const d=Dx(r.current);i.current=l==="mounted"?d:"none"},[l]),Mu(()=>{const d=r.current,u=a.current;if(u!==e){const f=i.current,p=Dx(d);e?c("MOUNT"):p==="none"||(d==null?void 0:d.display)==="none"?c("UNMOUNT"):c(u&&f!==p?"ANIMATION_OUT":"UNMOUNT"),a.current=e}},[e,c]),Mu(()=>{if(t){let d;const u=t.ownerDocument.defaultView??window,h=p=>{const g=Dx(r.current).includes(p.animationName);if(p.target===t&&g&&(c("ANIMATION_END"),!a.current)){const x=t.style.animationFillMode;t.style.animationFillMode="forwards",d=u.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=x)})}},f=p=>{p.target===t&&(i.current=Dx(r.current))};return t.addEventListener("animationstart",f),t.addEventListener("animationcancel",h),t.addEventListener("animationend",h),()=>{u.clearTimeout(d),t.removeEventListener("animationstart",f),t.removeEventListener("animationcancel",h),t.removeEventListener("animationend",h)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:j.useCallback(d=>{r.current=d?getComputedStyle(d):null,n(d)},[])}}function Dx(e){return(e==null?void 0:e.animationName)||"none"}function YJ(e){var r,a;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var GJ=qy[" useInsertionEffect ".trim().toString()]||Mu;function Xg({prop:e,defaultProp:t,onChange:n=()=>{},caller:r}){const[a,i,o]=JJ({defaultProp:t,onChange:n}),l=e!==void 0,c=l?e:a;{const u=j.useRef(e!==void 0);j.useEffect(()=>{const h=u.current;h!==l&&console.warn(`${r} is changing from ${h?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),u.current=l},[l,r])}const d=j.useCallback(u=>{var h;if(l){const f=KJ(u)?u(e):u;f!==e&&((h=o.current)==null||h.call(o,f))}else i(u)},[l,e,i,o]);return[c,d]}function JJ({defaultProp:e,onChange:t}){const[n,r]=j.useState(e),a=j.useRef(n),i=j.useRef(t);return GJ(()=>{i.current=t},[t]),j.useEffect(()=>{var o;a.current!==n&&((o=i.current)==null||o.call(i,n),a.current=n)},[n,a]),[n,r,i]}function KJ(e){return typeof e=="function"}var XJ=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),QJ="VisuallyHidden",$S=j.forwardRef((e,t)=>s.jsx(Mn.span,{...e,ref:t,style:{...XJ,...e.style}}));$S.displayName=QJ;var BS="ToastProvider",[zS,ZJ,eK]=WR("Toast"),[YR,oNe]=Cd("Toast",[eK]),[tK,N1]=YR(BS),GR=e=>{const{__scopeToast:t,label:n="Notification",duration:r=5e3,swipeDirection:a="right",swipeThreshold:i=50,children:o}=e,[l,c]=j.useState(null),[d,u]=j.useState(0),h=j.useRef(!1),f=j.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${BS}\`. Expected non-empty \`string\`.`),s.jsx(zS.Provider,{scope:t,children:s.jsx(tK,{scope:t,label:n,duration:r,swipeDirection:a,swipeThreshold:i,toastCount:d,viewport:l,onViewportChange:c,onToastAdd:j.useCallback(()=>u(p=>p+1),[]),onToastRemove:j.useCallback(()=>u(p=>p-1),[]),isFocusedToastEscapeKeyDownRef:h,isClosePausedRef:f,children:o})})};GR.displayName=BS;var JR="ToastViewport",nK=["F8"],nN="toast.viewportPause",rN="toast.viewportResume",KR=j.forwardRef((e,t)=>{const{__scopeToast:n,hotkey:r=nK,label:a="Notifications ({hotkey})",...i}=e,o=N1(JR,n),l=ZJ(n),c=j.useRef(null),d=j.useRef(null),u=j.useRef(null),h=j.useRef(null),f=ba(t,h,o.onViewportChange),p=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),y=o.toastCount>0;j.useEffect(()=>{const x=m=>{var b;r.length!==0&&r.every(C=>m[C]||m.code===C)&&((b=h.current)==null||b.focus())};return document.addEventListener("keydown",x),()=>document.removeEventListener("keydown",x)},[r]),j.useEffect(()=>{const x=c.current,m=h.current;if(y&&x&&m){const v=()=>{if(!o.isClosePausedRef.current){const P=new CustomEvent(nN);m.dispatchEvent(P),o.isClosePausedRef.current=!0}},b=()=>{if(o.isClosePausedRef.current){const P=new CustomEvent(rN);m.dispatchEvent(P),o.isClosePausedRef.current=!1}},C=P=>{!x.contains(P.relatedTarget)&&b()},S=()=>{x.contains(document.activeElement)||b()};return x.addEventListener("focusin",v),x.addEventListener("focusout",C),x.addEventListener("pointermove",v),x.addEventListener("pointerleave",S),window.addEventListener("blur",v),window.addEventListener("focus",b),()=>{x.removeEventListener("focusin",v),x.removeEventListener("focusout",C),x.removeEventListener("pointermove",v),x.removeEventListener("pointerleave",S),window.removeEventListener("blur",v),window.removeEventListener("focus",b)}}},[y,o.isClosePausedRef]);const g=j.useCallback(({tabbingDirection:x})=>{const v=l().map(b=>{const C=b.ref.current,S=[C,...mK(C)];return x==="forwards"?S:S.reverse()});return(x==="forwards"?v.reverse():v).flat()},[l]);return j.useEffect(()=>{const x=h.current;if(x){const m=v=>{var S,P,D;const b=v.altKey||v.ctrlKey||v.metaKey;if(v.key==="Tab"&&!b){const N=document.activeElement,M=v.shiftKey;if(v.target===x&&M){(S=d.current)==null||S.focus();return}const E=g({tabbingDirection:M?"backwards":"forwards"}),A=E.findIndex(O=>O===N);Xw(E.slice(A+1))?v.preventDefault():M?(P=d.current)==null||P.focus():(D=u.current)==null||D.focus()}};return x.addEventListener("keydown",m),()=>x.removeEventListener("keydown",m)}},[l,g]),s.jsxs(HJ,{ref:c,role:"region","aria-label":a.replace("{hotkey}",p),tabIndex:-1,style:{pointerEvents:y?void 0:"none"},children:[y&&s.jsx(sN,{ref:d,onFocusFromOutsideViewport:()=>{const x=g({tabbingDirection:"forwards"});Xw(x)}}),s.jsx(zS.Slot,{scope:n,children:s.jsx(Mn.ol,{tabIndex:-1,...i,ref:f})}),y&&s.jsx(sN,{ref:u,onFocusFromOutsideViewport:()=>{const x=g({tabbingDirection:"backwards"});Xw(x)}})]})});KR.displayName=JR;var XR="ToastFocusProxy",sN=j.forwardRef((e,t)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...a}=e,i=N1(XR,n);return s.jsx($S,{"aria-hidden":!0,tabIndex:0,...a,ref:t,style:{position:"fixed"},onFocus:o=>{var d;const l=o.relatedTarget;!((d=i.viewport)!=null&&d.contains(l))&&r()}})});sN.displayName=XR;var Qg="Toast",rK="toast.swipeStart",sK="toast.swipeMove",aK="toast.swipeCancel",iK="toast.swipeEnd",QR=j.forwardRef((e,t)=>{const{forceMount:n,open:r,defaultOpen:a,onOpenChange:i,...o}=e,[l,c]=Xg({prop:r,defaultProp:a??!0,onChange:i,caller:Qg});return s.jsx(Qu,{present:n||l,children:s.jsx(cK,{open:l,...o,ref:t,onClose:()=>c(!1),onPause:el(e.onPause),onResume:el(e.onResume),onSwipeStart:Pn(e.onSwipeStart,d=>{d.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Pn(e.onSwipeMove,d=>{const{x:u,y:h}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","move"),d.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${u}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${h}px`)}),onSwipeCancel:Pn(e.onSwipeCancel,d=>{d.currentTarget.setAttribute("data-swipe","cancel"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Pn(e.onSwipeEnd,d=>{const{x:u,y:h}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","end"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${u}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${h}px`),c(!1)})})})});QR.displayName=Qg;var[oK,lK]=YR(Qg,{onClose(){}}),cK=j.forwardRef((e,t)=>{const{__scopeToast:n,type:r="foreground",duration:a,open:i,onClose:o,onEscapeKeyDown:l,onPause:c,onResume:d,onSwipeStart:u,onSwipeMove:h,onSwipeCancel:f,onSwipeEnd:p,...y}=e,g=N1(Qg,n),[x,m]=j.useState(null),v=ba(t,O=>m(O)),b=j.useRef(null),C=j.useRef(null),S=a||g.duration,P=j.useRef(0),D=j.useRef(S),N=j.useRef(0),{onToastAdd:M,onToastRemove:L}=g,T=el(()=>{var W;(x==null?void 0:x.contains(document.activeElement))&&((W=g.viewport)==null||W.focus()),o()}),E=j.useCallback(O=>{!O||O===1/0||(window.clearTimeout(N.current),P.current=new Date().getTime(),N.current=window.setTimeout(T,O))},[T]);j.useEffect(()=>{const O=g.viewport;if(O){const W=()=>{E(D.current),d==null||d()},z=()=>{const F=new Date().getTime()-P.current;D.current=D.current-F,window.clearTimeout(N.current),c==null||c()};return O.addEventListener(nN,z),O.addEventListener(rN,W),()=>{O.removeEventListener(nN,z),O.removeEventListener(rN,W)}}},[g.viewport,S,c,d,E]),j.useEffect(()=>{i&&!g.isClosePausedRef.current&&E(S)},[i,S,g.isClosePausedRef,E]),j.useEffect(()=>(M(),()=>L()),[M,L]);const A=j.useMemo(()=>x?aL(x):null,[x]);return g.viewport?s.jsxs(s.Fragment,{children:[A&&s.jsx(dK,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:A}),s.jsx(oK,{scope:n,onClose:T,children:rl.createPortal(s.jsx(zS.ItemSlot,{scope:n,children:s.jsx(WJ,{asChild:!0,onEscapeKeyDown:Pn(l,()=>{g.isFocusedToastEscapeKeyDownRef.current||T(),g.isFocusedToastEscapeKeyDownRef.current=!1}),children:s.jsx(Mn.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":g.swipeDirection,...y,ref:v,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:Pn(e.onKeyDown,O=>{O.key==="Escape"&&(l==null||l(O.nativeEvent),O.nativeEvent.defaultPrevented||(g.isFocusedToastEscapeKeyDownRef.current=!0,T()))}),onPointerDown:Pn(e.onPointerDown,O=>{O.button===0&&(b.current={x:O.clientX,y:O.clientY})}),onPointerMove:Pn(e.onPointerMove,O=>{if(!b.current)return;const W=O.clientX-b.current.x,z=O.clientY-b.current.y,F=!!C.current,V=["left","right"].includes(g.swipeDirection),B=["left","up"].includes(g.swipeDirection)?Math.min:Math.max,Y=V?B(0,W):0,$=V?0:B(0,z),I=O.pointerType==="touch"?10:2,U={x:Y,y:$},q={originalEvent:O,delta:U};F?(C.current=U,kx(sK,h,q,{discrete:!1})):zk(U,g.swipeDirection,I)?(C.current=U,kx(rK,u,q,{discrete:!1}),O.target.setPointerCapture(O.pointerId)):(Math.abs(W)>I||Math.abs(z)>I)&&(b.current=null)}),onPointerUp:Pn(e.onPointerUp,O=>{const W=C.current,z=O.target;if(z.hasPointerCapture(O.pointerId)&&z.releasePointerCapture(O.pointerId),C.current=null,b.current=null,W){const F=O.currentTarget,V={originalEvent:O,delta:W};zk(W,g.swipeDirection,g.swipeThreshold)?kx(iK,p,V,{discrete:!0}):kx(aK,f,V,{discrete:!0}),F.addEventListener("click",B=>B.preventDefault(),{once:!0})}})})})}),g.viewport)})]}):null}),dK=e=>{const{__scopeToast:t,children:n,...r}=e,a=N1(Qg,t),[i,o]=j.useState(!1),[l,c]=j.useState(!1);return fK(()=>o(!0)),j.useEffect(()=>{const d=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(d)},[]),l?null:s.jsx(FS,{asChild:!0,children:s.jsx($S,{...r,children:i&&s.jsxs(s.Fragment,{children:[a.label," ",n]})})})},uK="ToastTitle",ZR=j.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e;return s.jsx(Mn.div,{...r,ref:t})});ZR.displayName=uK;var hK="ToastDescription",eL=j.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e;return s.jsx(Mn.div,{...r,ref:t})});eL.displayName=hK;var tL="ToastAction",nL=j.forwardRef((e,t)=>{const{altText:n,...r}=e;return n.trim()?s.jsx(sL,{altText:n,asChild:!0,children:s.jsx(WS,{...r,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${tL}\`. Expected non-empty \`string\`.`),null)});nL.displayName=tL;var rL="ToastClose",WS=j.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e,a=lK(rL,n);return s.jsx(sL,{asChild:!0,children:s.jsx(Mn.button,{type:"button",...r,ref:t,onClick:Pn(e.onClick,a.onClose)})})});WS.displayName=rL;var sL=j.forwardRef((e,t)=>{const{__scopeToast:n,altText:r,...a}=e;return s.jsx(Mn.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...a,ref:t})});function aL(e){const t=[];return Array.from(e.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&t.push(r.textContent),pK(r)){const a=r.ariaHidden||r.hidden||r.style.display==="none",i=r.dataset.radixToastAnnounceExclude==="";if(!a)if(i){const o=r.dataset.radixToastAnnounceAlt;o&&t.push(o)}else t.push(...aL(r))}}),t}function kx(e,t,n,{discrete:r}){const a=n.originalEvent.currentTarget,i=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:n});t&&a.addEventListener(e,t,{once:!0}),r?HR(a,i):a.dispatchEvent(i)}var zk=(e,t,n=0)=>{const r=Math.abs(e.x),a=Math.abs(e.y),i=r>a;return t==="left"||t==="right"?i&&r>n:!i&&a>n};function fK(e=()=>{}){const t=el(e);Mu(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[t])}function pK(e){return e.nodeType===e.ELEMENT_NODE}function mK(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const a=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||a?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function Xw(e){const t=document.activeElement;return e.some(n=>n===t?!0:(n.focus(),document.activeElement!==t))}var gK=GR,iL=KR,oL=QR,lL=ZR,cL=eL,dL=nL,uL=WS;const vK=gK,hL=Q.forwardRef(({className:e,...t},n)=>s.jsx(iL,{ref:n,className:Ft("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));hL.displayName=iL.displayName;const xK=m1("data-[swipe=move]:transition-none group relative pointer-events-auto flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full data-[state=closed]:slide-out-to-right-full",{variants:{variant:{default:"bg-background border",destructive:"group destructive border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),fL=Q.forwardRef(({className:e,variant:t,...n},r)=>s.jsx(oL,{ref:r,className:Ft(xK({variant:t}),e),...n}));fL.displayName=oL.displayName;const yK=Q.forwardRef(({className:e,...t},n)=>s.jsx(dL,{ref:n,className:Ft("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-destructive/30 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...t}));yK.displayName=dL.displayName;const pL=Q.forwardRef(({className:e,...t},n)=>s.jsx(uL,{ref:n,className:Ft("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:s.jsx(rn,{className:"h-4 w-4"})}));pL.displayName=uL.displayName;const mL=Q.forwardRef(({className:e,...t},n)=>s.jsx(lL,{ref:n,className:Ft("text-sm font-semibold",e),...t}));mL.displayName=lL.displayName;const gL=Q.forwardRef(({className:e,...t},n)=>s.jsx(cL,{ref:n,className:Ft("text-sm opacity-90",e),...t}));gL.displayName=cL.displayName;const bK=1;let Qw=0;function wK(){return Qw=(Qw+1)%Number.MAX_VALUE,Qw.toString()}const da={state:{toasts:[]},listeners:[],getState:()=>da.state,setState:e=>{typeof e=="function"?da.state=e(da.state):da.state={...da.state,...e},da.listeners.forEach(t=>t(da.state))},subscribe:e=>(da.listeners.push(e),()=>{da.listeners=da.listeners.filter(t=>t!==e)})},pe=({...e})=>{const t=wK(),n=a=>da.setState(i=>({...i,toasts:i.toasts.map(o=>o.id===t?{...o,...a}:o)})),r=()=>da.setState(a=>({...a,toasts:a.toasts.filter(i=>i.id!==t)}));return da.setState(a=>({...a,toasts:[{...e,id:t,dismiss:r},...a.toasts].slice(0,bK)})),{id:t,dismiss:r,update:n}};function S1(){const[e,t]=j.useState(da.getState());return j.useEffect(()=>da.subscribe(r=>{t(r)}),[]),j.useEffect(()=>{const n=[];return e.toasts.forEach(r=>{if(r.duration===1/0)return;const a=setTimeout(()=>{r.dismiss()},r.duration||5e3);n.push(a)}),()=>{n.forEach(r=>clearTimeout(r))}},[e.toasts]),{toast:pe,toasts:e.toasts}}function jK(){const{toasts:e}=S1();return s.jsxs(vK,{children:[e.map(({id:t,title:n,description:r,action:a,dismiss:i,...o})=>s.jsxs(fL,{...o,children:[s.jsxs("div",{className:"grid gap-1",children:[n&&s.jsx(mL,{children:n}),r&&s.jsx(gL,{children:r})]}),a,s.jsx(pL,{})]},t)),s.jsx(hL,{})]})}const Te=Q.forwardRef(({className:e,...t},n)=>s.jsx("div",{ref:n,className:Ft("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));Te.displayName="Card";const Xe=Q.forwardRef(({className:e,...t},n)=>s.jsx("div",{ref:n,className:Ft("flex flex-col space-y-1.5 p-6",e),...t}));Xe.displayName="CardHeader";const Qe=Q.forwardRef(({className:e,...t},n)=>s.jsx("h3",{ref:n,className:Ft("text-2xl font-semibold leading-none tracking-tight",e),...t}));Qe.displayName="CardTitle";const NK=Q.forwardRef(({className:e,...t},n)=>s.jsx("p",{ref:n,className:Ft("text-sm text-muted-foreground",e),...t}));NK.displayName="CardDescription";const Me=Q.forwardRef(({className:e,...t},n)=>s.jsx("div",{ref:n,className:Ft("p-6 pt-0",e),...t}));Me.displayName="CardContent";const C1=Q.forwardRef(({className:e,...t},n)=>s.jsx("div",{ref:n,className:Ft("flex items-center p-6 pt-0",e),...t}));C1.displayName="CardFooter";var SK=qy[" useId ".trim().toString()]||(()=>{}),CK=0;function vf(e){const[t,n]=j.useState(SK());return Mu(()=>{e||n(r=>r??String(CK++))},[e]),e||(t?`radix-${t}`:"")}var Zw="focusScope.autoFocusOnMount",e2="focusScope.autoFocusOnUnmount",Wk={bubbles:!1,cancelable:!0},PK="FocusScope",vL=j.forwardRef((e,t)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:a,onUnmountAutoFocus:i,...o}=e,[l,c]=j.useState(null),d=el(a),u=el(i),h=j.useRef(null),f=ba(t,g=>c(g)),p=j.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;j.useEffect(()=>{if(r){let g=function(b){if(p.paused||!l)return;const C=b.target;l.contains(C)?h.current=C:Lc(h.current,{select:!0})},x=function(b){if(p.paused||!l)return;const C=b.relatedTarget;C!==null&&(l.contains(C)||Lc(h.current,{select:!0}))},m=function(b){if(document.activeElement===document.body)for(const S of b)S.removedNodes.length>0&&Lc(l)};document.addEventListener("focusin",g),document.addEventListener("focusout",x);const v=new MutationObserver(m);return l&&v.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",g),document.removeEventListener("focusout",x),v.disconnect()}}},[r,l,p.paused]),j.useEffect(()=>{if(l){qk.add(p);const g=document.activeElement;if(!l.contains(g)){const m=new CustomEvent(Zw,Wk);l.addEventListener(Zw,d),l.dispatchEvent(m),m.defaultPrevented||(DK(_K(xL(l)),{select:!0}),document.activeElement===g&&Lc(l))}return()=>{l.removeEventListener(Zw,d),setTimeout(()=>{const m=new CustomEvent(e2,Wk);l.addEventListener(e2,u),l.dispatchEvent(m),m.defaultPrevented||Lc(g??document.body,{select:!0}),l.removeEventListener(e2,u),qk.remove(p)},0)}}},[l,d,u,p]);const y=j.useCallback(g=>{if(!n&&!r||p.paused)return;const x=g.key==="Tab"&&!g.altKey&&!g.ctrlKey&&!g.metaKey,m=document.activeElement;if(x&&m){const v=g.currentTarget,[b,C]=kK(v);b&&C?!g.shiftKey&&m===C?(g.preventDefault(),n&&Lc(b,{select:!0})):g.shiftKey&&m===b&&(g.preventDefault(),n&&Lc(C,{select:!0})):m===v&&g.preventDefault()}},[n,r,p.paused]);return s.jsx(Mn.div,{tabIndex:-1,...o,ref:f,onKeyDown:y})});vL.displayName=PK;function DK(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if(Lc(r,{select:t}),document.activeElement!==n)return}function kK(e){const t=xL(e),n=Hk(t,e),r=Hk(t.reverse(),e);return[n,r]}function xL(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const a=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||a?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function Hk(e,t){for(const n of e)if(!EK(n,{upTo:t}))return n}function EK(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function TK(e){return e instanceof HTMLInputElement&&"select"in e}function Lc(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&TK(e)&&t&&e.select()}}var qk=AK();function AK(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=Vk(e,t),e.unshift(t)},remove(t){var n;e=Vk(e,t),(n=e[0])==null||n.resume()}}}function Vk(e,t){const n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function _K(e){return e.filter(t=>t.tagName!=="A")}var t2=0;function MK(){j.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??Uk()),document.body.insertAdjacentElement("beforeend",e[1]??Uk()),t2++,()=>{t2===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),t2--}},[])}function Uk(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var yL=vR(),n2=function(){},P1=j.forwardRef(function(e,t){var n=j.useRef(null),r=j.useState({onScrollCapture:n2,onWheelCapture:n2,onTouchMoveCapture:n2}),a=r[0],i=r[1],o=e.forwardProps,l=e.children,c=e.className,d=e.removeScrollBar,u=e.enabled,h=e.shards,f=e.sideCar,p=e.noRelative,y=e.noIsolation,g=e.inert,x=e.allowPinchZoom,m=e.as,v=m===void 0?"div":m,b=e.gapMode,C=MS(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),S=f,P=gR([n,t]),D=Ks(Ks({},C),a);return j.createElement(j.Fragment,null,u&&j.createElement(S,{sideCar:yL,removeScrollBar:d,shards:h,noRelative:p,noIsolation:y,inert:g,setCallbacks:i,allowPinchZoom:!!x,lockRef:n,gapMode:b}),o?j.cloneElement(j.Children.only(l),Ks(Ks({},D),{ref:P})):j.createElement(v,Ks({},D,{className:c,ref:P}),l))});P1.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};P1.classNames={fullWidth:Om,zeroRight:Im};var aN=!1;if(typeof window<"u")try{var Ex=Object.defineProperty({},"passive",{get:function(){return aN=!0,!0}});window.addEventListener("test",Ex,Ex),window.removeEventListener("test",Ex,Ex)}catch{aN=!1}var Lh=aN?{passive:!1}:!1,RK=function(e){return e.tagName==="TEXTAREA"},bL=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!RK(e)&&n[t]==="visible")},LK=function(e){return bL(e,"overflowY")},IK=function(e){return bL(e,"overflowX")},Yk=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var a=wL(e,r);if(a){var i=jL(e,r),o=i[1],l=i[2];if(o>l)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},OK=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},FK=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},wL=function(e,t){return e==="v"?LK(t):IK(t)},jL=function(e,t){return e==="v"?OK(t):FK(t)},$K=function(e,t){return e==="h"&&t==="rtl"?-1:1},BK=function(e,t,n,r,a){var i=$K(e,window.getComputedStyle(t).direction),o=i*r,l=n.target,c=t.contains(l),d=!1,u=o>0,h=0,f=0;do{if(!l)break;var p=jL(e,l),y=p[0],g=p[1],x=p[2],m=g-x-i*y;(y||m)&&wL(e,l)&&(h+=m,f+=y);var v=l.parentNode;l=v&&v.nodeType===Node.DOCUMENT_FRAGMENT_NODE?v.host:v}while(!c&&l!==document.body||c&&(t.contains(l)||t===l));return(u&&(a&&Math.abs(h)<1||!a&&o>h)||!u&&(a&&Math.abs(f)<1||!a&&-o>f))&&(d=!0),d},Tx=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},Gk=function(e){return[e.deltaX,e.deltaY]},Jk=function(e){return e&&"current"in e?e.current:e},zK=function(e,t){return e[0]===t[0]&&e[1]===t[1]},WK=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},HK=0,Ih=[];function qK(e){var t=j.useRef([]),n=j.useRef([0,0]),r=j.useRef(),a=j.useState(HK++)[0],i=j.useState(RS)[0],o=j.useRef(e);j.useEffect(function(){o.current=e},[e]),j.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(a));var g=mR([e.lockRef.current],(e.shards||[]).map(Jk),!0).filter(Boolean);return g.forEach(function(x){return x.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),g.forEach(function(x){return x.classList.remove("allow-interactivity-".concat(a))})}}},[e.inert,e.lockRef.current,e.shards]);var l=j.useCallback(function(g,x){if("touches"in g&&g.touches.length===2||g.type==="wheel"&&g.ctrlKey)return!o.current.allowPinchZoom;var m=Tx(g),v=n.current,b="deltaX"in g?g.deltaX:v[0]-m[0],C="deltaY"in g?g.deltaY:v[1]-m[1],S,P=g.target,D=Math.abs(b)>Math.abs(C)?"h":"v";if("touches"in g&&D==="h"&&P.type==="range")return!1;var N=Yk(D,P);if(!N)return!0;if(N?S=D:(S=D==="v"?"h":"v",N=Yk(D,P)),!N)return!1;if(!r.current&&"changedTouches"in g&&(b||C)&&(r.current=S),!S)return!0;var M=r.current||S;return BK(M,x,g,M==="h"?b:C,!0)},[]),c=j.useCallback(function(g){var x=g;if(!(!Ih.length||Ih[Ih.length-1]!==i)){var m="deltaY"in x?Gk(x):Tx(x),v=t.current.filter(function(S){return S.name===x.type&&(S.target===x.target||x.target===S.shadowParent)&&zK(S.delta,m)})[0];if(v&&v.should){x.cancelable&&x.preventDefault();return}if(!v){var b=(o.current.shards||[]).map(Jk).filter(Boolean).filter(function(S){return S.contains(x.target)}),C=b.length>0?l(x,b[0]):!o.current.noIsolation;C&&x.cancelable&&x.preventDefault()}}},[]),d=j.useCallback(function(g,x,m,v){var b={name:g,delta:x,target:m,should:v,shadowParent:VK(m)};t.current.push(b),setTimeout(function(){t.current=t.current.filter(function(C){return C!==b})},1)},[]),u=j.useCallback(function(g){n.current=Tx(g),r.current=void 0},[]),h=j.useCallback(function(g){d(g.type,Gk(g),g.target,l(g,e.lockRef.current))},[]),f=j.useCallback(function(g){d(g.type,Tx(g),g.target,l(g,e.lockRef.current))},[]);j.useEffect(function(){return Ih.push(i),e.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:f}),document.addEventListener("wheel",c,Lh),document.addEventListener("touchmove",c,Lh),document.addEventListener("touchstart",u,Lh),function(){Ih=Ih.filter(function(g){return g!==i}),document.removeEventListener("wheel",c,Lh),document.removeEventListener("touchmove",c,Lh),document.removeEventListener("touchstart",u,Lh)}},[]);var p=e.removeScrollBar,y=e.inert;return j.createElement(j.Fragment,null,y?j.createElement(i,{styles:WK(a)}):null,p?j.createElement(wR,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function VK(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const UK=yR(yL,qK);var NL=j.forwardRef(function(e,t){return j.createElement(P1,Ks({},e,{ref:t,sideCar:UK}))});NL.classNames=P1.classNames;const YK=NL;var D1="Dialog",[SL,CL]=Cd(D1),[GK,mo]=SL(D1),PL=e=>{const{__scopeDialog:t,children:n,open:r,defaultOpen:a,onOpenChange:i,modal:o=!0}=e,l=j.useRef(null),c=j.useRef(null),[d,u]=Xg({prop:r,defaultProp:a??!1,onChange:i,caller:D1});return s.jsx(GK,{scope:t,triggerRef:l,contentRef:c,contentId:vf(),titleId:vf(),descriptionId:vf(),open:d,onOpenChange:u,onOpenToggle:j.useCallback(()=>u(h=>!h),[u]),modal:o,children:n})};PL.displayName=D1;var DL="DialogTrigger",kL=j.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=mo(DL,n),i=ba(t,a.triggerRef);return s.jsx(Mn.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":VS(a.open),...r,ref:i,onClick:Pn(e.onClick,a.onOpenToggle)})});kL.displayName=DL;var HS="DialogPortal",[JK,EL]=SL(HS,{forceMount:void 0}),TL=e=>{const{__scopeDialog:t,forceMount:n,children:r,container:a}=e,i=mo(HS,t);return s.jsx(JK,{scope:t,forceMount:n,children:j.Children.map(r,o=>s.jsx(Qu,{present:n||i.open,children:s.jsx(FS,{asChild:!0,container:a,children:o})}))})};TL.displayName=HS;var vy="DialogOverlay",AL=j.forwardRef((e,t)=>{const n=EL(vy,e.__scopeDialog),{forceMount:r=n.forceMount,...a}=e,i=mo(vy,e.__scopeDialog);return i.modal?s.jsx(Qu,{present:r||i.open,children:s.jsx(XK,{...a,ref:t})}):null});AL.displayName=vy;var KK=fg("DialogOverlay.RemoveScroll"),XK=j.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=mo(vy,n);return s.jsx(YK,{as:KK,allowPinchZoom:!0,shards:[a.contentRef],children:s.jsx(Mn.div,{"data-state":VS(a.open),...r,ref:t,style:{pointerEvents:"auto",...r.style}})})}),Ru="DialogContent",_L=j.forwardRef((e,t)=>{const n=EL(Ru,e.__scopeDialog),{forceMount:r=n.forceMount,...a}=e,i=mo(Ru,e.__scopeDialog);return s.jsx(Qu,{present:r||i.open,children:i.modal?s.jsx(QK,{...a,ref:t}):s.jsx(ZK,{...a,ref:t})})});_L.displayName=Ru;var QK=j.forwardRef((e,t)=>{const n=mo(Ru,e.__scopeDialog),r=j.useRef(null),a=ba(t,n.contentRef,r);return j.useEffect(()=>{const i=r.current;if(i)return pR(i)},[]),s.jsx(ML,{...e,ref:a,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Pn(e.onCloseAutoFocus,i=>{var o;i.preventDefault(),(o=n.triggerRef.current)==null||o.focus()}),onPointerDownOutside:Pn(e.onPointerDownOutside,i=>{const o=i.detail.originalEvent,l=o.button===0&&o.ctrlKey===!0;(o.button===2||l)&&i.preventDefault()}),onFocusOutside:Pn(e.onFocusOutside,i=>i.preventDefault())})}),ZK=j.forwardRef((e,t)=>{const n=mo(Ru,e.__scopeDialog),r=j.useRef(!1),a=j.useRef(!1);return s.jsx(ML,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,l;(o=e.onCloseAutoFocus)==null||o.call(e,i),i.defaultPrevented||(r.current||(l=n.triggerRef.current)==null||l.focus(),i.preventDefault()),r.current=!1,a.current=!1},onInteractOutside:i=>{var c,d;(c=e.onInteractOutside)==null||c.call(e,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const o=i.target;((d=n.triggerRef.current)==null?void 0:d.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&a.current&&i.preventDefault()}})}),ML=j.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:a,onCloseAutoFocus:i,...o}=e,l=mo(Ru,n),c=j.useRef(null),d=ba(t,c);return MK(),s.jsxs(s.Fragment,{children:[s.jsx(vL,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:a,onUnmountAutoFocus:i,children:s.jsx(OS,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":VS(l.open),...o,ref:d,onDismiss:()=>l.onOpenChange(!1)})}),s.jsxs(s.Fragment,{children:[s.jsx(tX,{titleId:l.titleId}),s.jsx(rX,{contentRef:c,descriptionId:l.descriptionId})]})]})}),qS="DialogTitle",RL=j.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=mo(qS,n);return s.jsx(Mn.h2,{id:a.titleId,...r,ref:t})});RL.displayName=qS;var LL="DialogDescription",IL=j.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=mo(LL,n);return s.jsx(Mn.p,{id:a.descriptionId,...r,ref:t})});IL.displayName=LL;var OL="DialogClose",FL=j.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=mo(OL,n);return s.jsx(Mn.button,{type:"button",...r,ref:t,onClick:Pn(e.onClick,()=>a.onOpenChange(!1))})});FL.displayName=OL;function VS(e){return e?"open":"closed"}var $L="DialogTitleWarning",[eX,BL]=_J($L,{contentName:Ru,titleName:qS,docsSlug:"dialog"}),tX=({titleId:e})=>{const t=BL($L),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return j.useEffect(()=>{e&&(document.getElementById(e)||console.error(n))},[n,e]),null},nX="DialogDescriptionWarning",rX=({contentRef:e,descriptionId:t})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${BL(nX).contentName}}.`;return j.useEffect(()=>{var i;const a=(i=e.current)==null?void 0:i.getAttribute("aria-describedby");t&&a&&(document.getElementById(t)||console.warn(r))},[r,e,t]),null},zL=PL,sX=kL,WL=TL,US=AL,YS=_L,GS=RL,JS=IL,KS=FL,HL="AlertDialog",[aX,lNe]=Cd(HL,[CL]),nc=CL(),qL=e=>{const{__scopeAlertDialog:t,...n}=e,r=nc(t);return s.jsx(zL,{...r,...n,modal:!0})};qL.displayName=HL;var iX="AlertDialogTrigger",VL=j.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,a=nc(n);return s.jsx(sX,{...a,...r,ref:t})});VL.displayName=iX;var oX="AlertDialogPortal",UL=e=>{const{__scopeAlertDialog:t,...n}=e,r=nc(t);return s.jsx(WL,{...r,...n})};UL.displayName=oX;var lX="AlertDialogOverlay",YL=j.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,a=nc(n);return s.jsx(US,{...a,...r,ref:t})});YL.displayName=lX;var xf="AlertDialogContent",[cX,dX]=aX(xf),uX=CU("AlertDialogContent"),GL=j.forwardRef((e,t)=>{const{__scopeAlertDialog:n,children:r,...a}=e,i=nc(n),o=j.useRef(null),l=ba(t,o),c=j.useRef(null);return s.jsx(eX,{contentName:xf,titleName:JL,docsSlug:"alert-dialog",children:s.jsx(cX,{scope:n,cancelRef:c,children:s.jsxs(YS,{role:"alertdialog",...i,...a,ref:l,onOpenAutoFocus:Pn(a.onOpenAutoFocus,d=>{var u;d.preventDefault(),(u=c.current)==null||u.focus({preventScroll:!0})}),onPointerDownOutside:d=>d.preventDefault(),onInteractOutside:d=>d.preventDefault(),children:[s.jsx(uX,{children:r}),s.jsx(fX,{contentRef:o})]})})})});GL.displayName=xf;var JL="AlertDialogTitle",KL=j.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,a=nc(n);return s.jsx(GS,{...a,...r,ref:t})});KL.displayName=JL;var XL="AlertDialogDescription",QL=j.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,a=nc(n);return s.jsx(JS,{...a,...r,ref:t})});QL.displayName=XL;var hX="AlertDialogAction",ZL=j.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,a=nc(n);return s.jsx(KS,{...a,...r,ref:t})});ZL.displayName=hX;var eI="AlertDialogCancel",tI=j.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,{cancelRef:a}=dX(eI,n),i=nc(n),o=ba(t,a);return s.jsx(KS,{...i,...r,ref:o})});tI.displayName=eI;var fX=({contentRef:e})=>{const t=`\`${xf}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${xf}\` by passing a \`${XL}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${xf}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return j.useEffect(()=>{var r;document.getElementById((r=e.current)==null?void 0:r.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},pX=qL,mX=VL,gX=UL,nI=YL,rI=GL,sI=ZL,aI=tI,iI=KL,oI=QL;const yr=pX,br=mX,vX=gX,lI=Q.forwardRef(({className:e,...t},n)=>s.jsx(nI,{className:Ft("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:n}));lI.displayName=nI.displayName;const er=Q.forwardRef(({className:e,...t},n)=>s.jsxs(vX,{children:[s.jsx(lI,{}),s.jsx(Pt.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",children:s.jsx(rI,{ref:n,"aria-hidden":!1,className:Ft("h-full flex flex-col",e),...t})})]}));er.displayName=rI.displayName;const tr=({className:e,...t})=>s.jsx("div",{className:Ft("flex flex-col space-y-2 text-center sm:text-left",e),...t});tr.displayName="AlertDialogHeader";const nr=({className:e,...t})=>s.jsx("div",{className:Ft("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});nr.displayName="AlertDialogFooter";const rr=Q.forwardRef(({className:e,...t},n)=>s.jsx(iI,{ref:n,className:Ft("text-lg font-semibold",e),...t}));rr.displayName=iI.displayName;const sr=Q.forwardRef(({className:e,...t},n)=>s.jsx(oI,{ref:n,className:Ft("text-sm text-muted-foreground",e),...t}));sr.displayName=oI.displayName;const ar=Q.forwardRef(({className:e,...t},n)=>s.jsx(sI,{ref:n,className:Ft(SS(),e),...t}));ar.displayName=sI.displayName;const ir=Q.forwardRef(({className:e,...t},n)=>s.jsx(aI,{ref:n,className:Ft(SS({variant:"outline"}),"mt-2 sm:mt-0",e),...t}));ir.displayName=aI.displayName;var xX=j.createContext(void 0);function cI(e){const t=j.useContext(xX);return e||t||"ltr"}var r2="rovingFocusGroup.onEntryFocus",yX={bubbles:!1,cancelable:!0},Zg="RovingFocusGroup",[iN,dI,bX]=WR(Zg),[wX,uI]=Cd(Zg,[bX]),[jX,NX]=wX(Zg),hI=j.forwardRef((e,t)=>s.jsx(iN.Provider,{scope:e.__scopeRovingFocusGroup,children:s.jsx(iN.Slot,{scope:e.__scopeRovingFocusGroup,children:s.jsx(SX,{...e,ref:t})})}));hI.displayName=Zg;var SX=j.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:a=!1,dir:i,currentTabStopId:o,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:d,preventScrollOnEntryFocus:u=!1,...h}=e,f=j.useRef(null),p=ba(t,f),y=cI(i),[g,x]=Xg({prop:o,defaultProp:l??null,onChange:c,caller:Zg}),[m,v]=j.useState(!1),b=el(d),C=dI(n),S=j.useRef(!1),[P,D]=j.useState(0);return j.useEffect(()=>{const N=f.current;if(N)return N.addEventListener(r2,b),()=>N.removeEventListener(r2,b)},[b]),s.jsx(jX,{scope:n,orientation:r,dir:y,loop:a,currentTabStopId:g,onItemFocus:j.useCallback(N=>x(N),[x]),onItemShiftTab:j.useCallback(()=>v(!0),[]),onFocusableItemAdd:j.useCallback(()=>D(N=>N+1),[]),onFocusableItemRemove:j.useCallback(()=>D(N=>N-1),[]),children:s.jsx(Mn.div,{tabIndex:m||P===0?-1:0,"data-orientation":r,...h,ref:p,style:{outline:"none",...e.style},onMouseDown:Pn(e.onMouseDown,()=>{S.current=!0}),onFocus:Pn(e.onFocus,N=>{const M=!S.current;if(N.target===N.currentTarget&&M&&!m){const L=new CustomEvent(r2,yX);if(N.currentTarget.dispatchEvent(L),!L.defaultPrevented){const T=C().filter(z=>z.focusable),E=T.find(z=>z.active),A=T.find(z=>z.id===g),W=[E,A,...T].filter(Boolean).map(z=>z.ref.current);mI(W,u)}}S.current=!1}),onBlur:Pn(e.onBlur,()=>v(!1))})})}),fI="RovingFocusGroupItem",pI=j.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:a=!1,tabStopId:i,children:o,...l}=e,c=vf(),d=i||c,u=NX(fI,n),h=u.currentTabStopId===d,f=dI(n),{onFocusableItemAdd:p,onFocusableItemRemove:y,currentTabStopId:g}=u;return j.useEffect(()=>{if(r)return p(),()=>y()},[r,p,y]),s.jsx(iN.ItemSlot,{scope:n,id:d,focusable:r,active:a,children:s.jsx(Mn.span,{tabIndex:h?0:-1,"data-orientation":u.orientation,...l,ref:t,onMouseDown:Pn(e.onMouseDown,x=>{r?u.onItemFocus(d):x.preventDefault()}),onFocus:Pn(e.onFocus,()=>u.onItemFocus(d)),onKeyDown:Pn(e.onKeyDown,x=>{if(x.key==="Tab"&&x.shiftKey){u.onItemShiftTab();return}if(x.target!==x.currentTarget)return;const m=DX(x,u.orientation,u.dir);if(m!==void 0){if(x.metaKey||x.ctrlKey||x.altKey||x.shiftKey)return;x.preventDefault();let b=f().filter(C=>C.focusable).map(C=>C.ref.current);if(m==="last")b.reverse();else if(m==="prev"||m==="next"){m==="prev"&&b.reverse();const C=b.indexOf(x.currentTarget);b=u.loop?kX(b,C+1):b.slice(C+1)}setTimeout(()=>mI(b))}}),children:typeof o=="function"?o({isCurrentTabStop:h,hasTabStop:g!=null}):o})})});pI.displayName=fI;var CX={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function PX(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function DX(e,t,n){const r=PX(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return CX[r]}function mI(e,t=!1){const n=document.activeElement;for(const r of e)if(r===n||(r.focus({preventScroll:t}),document.activeElement!==n))return}function kX(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var EX=hI,TX=pI,k1="Tabs",[AX,cNe]=Cd(k1,[uI]),gI=uI(),[_X,XS]=AX(k1),vI=j.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,onValueChange:a,defaultValue:i,orientation:o="horizontal",dir:l,activationMode:c="automatic",...d}=e,u=cI(l),[h,f]=Xg({prop:r,onChange:a,defaultProp:i??"",caller:k1});return s.jsx(_X,{scope:n,baseId:vf(),value:h,onValueChange:f,orientation:o,dir:u,activationMode:c,children:s.jsx(Mn.div,{dir:u,"data-orientation":o,...d,ref:t})})});vI.displayName=k1;var xI="TabsList",yI=j.forwardRef((e,t)=>{const{__scopeTabs:n,loop:r=!0,...a}=e,i=XS(xI,n),o=gI(n);return s.jsx(EX,{asChild:!0,...o,orientation:i.orientation,dir:i.dir,loop:r,children:s.jsx(Mn.div,{role:"tablist","aria-orientation":i.orientation,...a,ref:t})})});yI.displayName=xI;var bI="TabsTrigger",wI=j.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,disabled:a=!1,...i}=e,o=XS(bI,n),l=gI(n),c=SI(o.baseId,r),d=CI(o.baseId,r),u=r===o.value;return s.jsx(TX,{asChild:!0,...l,focusable:!a,active:u,children:s.jsx(Mn.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":d,"data-state":u?"active":"inactive","data-disabled":a?"":void 0,disabled:a,id:c,...i,ref:t,onMouseDown:Pn(e.onMouseDown,h=>{!a&&h.button===0&&h.ctrlKey===!1?o.onValueChange(r):h.preventDefault()}),onKeyDown:Pn(e.onKeyDown,h=>{[" ","Enter"].includes(h.key)&&o.onValueChange(r)}),onFocus:Pn(e.onFocus,()=>{const h=o.activationMode!=="manual";!u&&!a&&h&&o.onValueChange(r)})})})});wI.displayName=bI;var jI="TabsContent",NI=j.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,forceMount:a,children:i,...o}=e,l=XS(jI,n),c=SI(l.baseId,r),d=CI(l.baseId,r),u=r===l.value,h=j.useRef(u);return j.useEffect(()=>{const f=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(f)},[]),s.jsx(Qu,{present:a||u,children:({present:f})=>s.jsx(Mn.div,{"data-state":u?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!f,id:d,tabIndex:0,...o,ref:t,style:{...e.style,animationDuration:h.current?"0s":void 0},children:f&&i})})});NI.displayName=jI;function SI(e,t){return`${e}-trigger-${t}`}function CI(e,t){return`${e}-content-${t}`}var MX=vI,PI=yI,DI=wI,kI=NI;const uo=MX,Oi=Q.forwardRef(({className:e,...t},n)=>s.jsx(PI,{ref:n,className:Ft("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));Oi.displayName=PI.displayName;const Ht=Q.forwardRef(({className:e,...t},n)=>s.jsx(DI,{ref:n,className:Ft("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...t}));Ht.displayName=DI.displayName;const en=Q.forwardRef(({className:e,...t},n)=>s.jsx(kI,{ref:n,className:Ft("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));en.displayName=kI.displayName;const Kk=({jobs:e,onSelectJob:t,onDeleteJob:n,onUpdateJobStatus:r})=>{const[a,i]=j.useState("active"),[o,l]=j.useState("all"),c=e.filter(y=>{var g;if(a==="estimating"){if(y.status!=="estimating"&&(y.status||(g=y.takeoffPhases)!=null&&g.length))return!1}else if(a==="active"){if(y.status!=="active")return!1}else if(a==="inactive"&&y.status!=="inactive")return!1;return o==="all"?!0:y.jobType===o});if(e.length===0)return s.jsx(Pt.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"text-center py-16",children:s.jsxs("div",{className:"construction-pattern rounded-2xl p-12 max-w-md mx-auto bg-white/70 shadow-lg",children:[s.jsx(Qs,{className:"h-16 w-16 mx-auto text-brandPrimary mb-4"}),s.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"No Jobs Yet"}),s.jsx("p",{className:"text-gray-600 mb-6",children:"Start by creating your first construction job to manage scopes and takeoffs."})]})});const d=y=>{switch(y){case"estimating":return s.jsx(vs,{className:"h-4 w-4"});case"active":return s.jsx(Oo,{className:"h-4 w-4"});case"inactive":return s.jsx(Mm,{className:"h-4 w-4"});default:return s.jsx(vs,{className:"h-4 w-4"})}},u=y=>{switch(y){case"estimating":return"bg-blue-100 text-blue-800";case"active":return"bg-green-100 text-green-800";case"inactive":return"bg-gray-100 text-gray-800";default:return"bg-blue-100 text-blue-800"}},h=y=>y==="residential"?s.jsx($l,{className:"h-4 w-4"}):s.jsx(or,{className:"h-4 w-4"}),f=y=>y==="residential"?"bg-green-100 text-green-800":"bg-blue-100 text-blue-800",p=y=>{const g=y.status||"estimating";return g==="estimating"?s.jsxs(se,{onClick:()=>r(y.id,{status:"active"}),size:"sm",className:"bg-green-500 hover:bg-green-600 text-white",children:[s.jsx(Oo,{className:"h-4 w-4 mr-1"}),"Start Job"]}):g==="active"?s.jsxs(se,{onClick:()=>r(y.id,{status:"inactive"}),size:"sm",variant:"outline",className:"border-yellow-500 text-yellow-600 hover:bg-yellow-50",children:[s.jsx(Mm,{className:"h-4 w-4 mr-1"}),"Set Inactive"]}):s.jsxs(se,{onClick:()=>r(y.id,{status:"active"}),size:"sm",className:"bg-green-500 hover:bg-green-600 text-white",children:[s.jsx(Oo,{className:"h-4 w-4 mr-1"}),"Reactivate"]})};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs(Pt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex flex-col sm:flex-row items-center justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:"Job Dashboard"}),s.jsx("p",{className:"text-gray-600 mt-1",children:"Manage your construction projects by phase."})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 w-full sm:w-auto",children:[s.jsx(uo,{value:a,onValueChange:i,className:"w-full sm:w-auto",children:s.jsxs(Oi,{className:"grid w-full grid-cols-4 sm:w-auto",children:[s.jsxs(Ht,{value:"estimating",children:[s.jsx(vs,{className:"h-4 w-4 mr-1 sm:mr-2 inline-block"}),"Estimating"]}),s.jsxs(Ht,{value:"active",children:[s.jsx(Oo,{className:"h-4 w-4 mr-1 sm:mr-2 inline-block"}),"Active"]}),s.jsxs(Ht,{value:"inactive",children:[s.jsx(Mm,{className:"h-4 w-4 mr-1 sm:mr-2 inline-block"}),"Inactive"]}),s.jsx(Ht,{value:"all",children:"All"})]})}),s.jsx(uo,{value:o,onValueChange:l,className:"w-full sm:w-auto",children:s.jsxs(Oi,{className:"grid w-full grid-cols-3 sm:w-auto",children:[s.jsxs(Ht,{value:"all",children:[s.jsx(bS,{className:"h-4 w-4 mr-1 sm:mr-2 inline-block"}),"All Types"]}),s.jsxs(Ht,{value:"residential",children:[s.jsx($l,{className:"h-4 w-4 mr-1 sm:mr-2 inline-block"}),"Residential"]}),s.jsxs(Ht,{value:"commercial",children:[s.jsx(or,{className:"h-4 w-4 mr-1 sm:mr-2 inline-block"}),"Commercial"]})]})})]})]}),c.length===0&&s.jsxs(Pt.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center py-12",children:[s.jsx(Qs,{className:"h-12 w-12 mx-auto text-gray-400 mb-4"}),s.jsxs("p",{className:"text-gray-600 font-medium",children:["No ",a," jobs found."]}),s.jsx("p",{className:"text-gray-500 text-sm mt-1",children:a==="estimating"?"Create a new job to start estimating.":a==="active"?"Move jobs from estimating to active to start field work.":"Try a different filter or create a new job."}),o!=="all"&&s.jsxs("p",{className:"text-gray-500 text-sm mt-1",children:["No ",o," jobs in this category. Try changing the job type filter."]})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:c.map((y,g)=>{var v,b;const x=y.status||"estimating",m=y.jobType||"residential";return s.jsx(Pt.div,{layout:!0,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{delay:g*.05},whileHover:{y:-5},className:"group",children:s.jsxs(Te,{className:`h-full flex flex-col hover:shadow-xl transition-all duration-300 border-0 bg-white/80 backdrop-blur-sm ${x==="estimating"?"border-l-4 border-brandSecondary":x==="active"?"border-l-4 border-brandPrimary":"border-l-4 border-slate-400"}`,children:[s.jsx(Xe,{className:"pb-3",children:s.jsx("div",{className:"flex items-start justify-between",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:`p-2 rounded-lg group-hover:opacity-80 transition-colors ${x==="estimating"?"bg-brandSecondary/10":x==="active"?"bg-brandPrimary/10":"bg-slate-100"}`,children:s.jsx(Qs,{className:`h-5 w-5 ${x==="estimating"?"text-brandSecondary":x==="active"?"text-brandPrimary":"text-slate-600"}`})}),s.jsxs("div",{children:[s.jsx(Qe,{className:"text-lg font-bold text-gray-900 group-hover:text-brandPrimary transition-colors",children:y.jobName}),s.jsxs("div",{className:"flex items-center space-x-2 mt-1 flex-wrap gap-1",children:[s.jsxs("span",{className:`inline-flex items-center space-x-1 text-xs px-2 py-1 rounded-full font-medium ${u(x)}`,children:[d(x),s.jsx("span",{className:"capitalize",children:x})]}),s.jsxs("span",{className:`inline-flex items-center space-x-1 text-xs px-2 py-1 rounded-full font-medium ${f(m)}`,children:[h(m),s.jsx("span",{className:"capitalize",children:m})]})]})]})]})})}),s.jsxs(Me,{className:"space-y-3 flex-grow",children:[s.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[s.jsx(ss,{className:"h-4 w-4 text-brandSecondary"}),s.jsx("span",{className:"font-medium",children:"GC:"}),s.jsx("span",{children:y.generalContractor})]}),s.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[s.jsx(Kf,{className:"h-4 w-4 text-green-500"}),s.jsx("span",{className:"font-medium",children:"Address:"}),s.jsx("span",{className:"truncate",children:y.address||"N/A"})]}),s.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[s.jsx(An,{className:"h-4 w-4 text-brandPrimary"}),s.jsx("span",{className:"font-medium",children:"Created:"}),s.jsx("span",{children:new Date(y.createdAt).toLocaleDateString()})]}),s.jsx("div",{className:"pt-2 border-t",children:s.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[s.jsxs("span",{children:["Scopes: ",((v=y.scopes)==null?void 0:v.length)||0]}),s.jsxs("span",{children:["Takeoffs: ",((b=y.takeoffPhases)==null?void 0:b.length)||0]})]})})]}),s.jsx(C1,{className:"pt-4 border-t mt-auto",children:s.jsxs("div",{className:"flex items-center justify-between w-full",children:[s.jsxs(se,{onClick:()=>t(y),size:"sm",variant:"outline",className:"border-brandSecondary text-brandSecondary hover:bg-brandSecondary/10",children:[s.jsx(Jg,{className:"h-4 w-4 mr-2"}),"View"]}),s.jsxs("div",{className:"flex space-x-2",children:[p(y),s.jsxs(yr,{children:[s.jsx(br,{asChild:!0,children:s.jsx(se,{variant:"ghost",size:"icon",className:"text-red-500 hover:bg-red-100",children:s.jsx(Kt,{className:"h-4 w-4"})})}),s.jsxs(er,{children:[s.jsxs(tr,{children:[s.jsxs(rr,{children:['Delete Job "',y.jobName,'"?']}),s.jsx(sr,{children:"This action cannot be undone. This will permanently delete the job and all associated data."})]}),s.jsxs(nr,{children:[s.jsx(ir,{children:"Cancel"}),s.jsx(ar,{onClick:()=>n(y.id),className:"bg-red-600 hover:bg-red-700",children:"Yes, delete"})]})]})]})]})]})})]})},y.id)})})]})},$e=Q.forwardRef(({className:e,type:t,...n},r)=>s.jsx("input",{type:t,className:Ft("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:r,...n}));$e.displayName="Input";var RX="Label",EI=j.forwardRef((e,t)=>s.jsx(Mn.label,{...e,ref:t,onMouseDown:n=>{var a;n.target.closest("button, input, select, textarea")||((a=e.onMouseDown)==null||a.call(e,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));EI.displayName=RX;var TI=EI;const LX=m1("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),de=Q.forwardRef(({className:e,...t},n)=>s.jsx(TI,{ref:n,className:Ft(LX(),e),...t}));de.displayName=TI.displayName;const Er=zL,IX=WL,AI=j.forwardRef(({className:e,...t},n)=>s.jsx(US,{ref:n,className:Ft("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));AI.displayName=US.displayName;const pr=j.forwardRef(({className:e,children:t,...n},r)=>s.jsxs(IX,{children:[s.jsx(AI,{}),s.jsxs(YS,{ref:r,"aria-hidden":!1,className:Ft("fixed left-[50%] top-[50%] z-50 grid w-full translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg h-full flex flex-col",e),...n,children:[t,s.jsxs(KS,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[s.jsx(rn,{className:"h-4 w-4"}),s.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));pr.displayName=YS.displayName;const mr=({className:e,...t})=>s.jsx("div",{className:Ft("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});mr.displayName="DialogHeader";const Tr=({className:e,...t})=>s.jsx("div",{className:Ft("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});Tr.displayName="DialogFooter";const gr=j.forwardRef(({className:e,...t},n)=>s.jsx(GS,{ref:n,className:Ft("text-lg font-semibold leading-none tracking-tight",e),...t}));gr.displayName=GS.displayName;const oN=j.forwardRef(({className:e,...t},n)=>s.jsx(JS,{ref:n,className:Ft("text-sm text-muted-foreground",e),...t}));oN.displayName=JS.displayName;const _n=Q.forwardRef(({className:e,...t},n)=>s.jsx("textarea",{className:Ft("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:n,...t}));_n.displayName="Textarea";const Xk=[{category:"Corner Bead",items:["Square Bead","Bullnose","Splay","Arch","Tearaway"]},{category:"Joint Compound",items:["All Purpose Joint Compound","Lite Weight Joint Compound","Easy Sand 90","Easy Sand 45","Easy Sand 20","Easy Sand 5"]},{category:"Adhesives",items:["TiteBond Foam","Spray Adhesive"]},{category:"Fasteners",items:['Drywall Screws 1"','Drywall Screws 1-1/4"','Drywall Screws 1-5/8"','Drywall Screws 2"','Drywall Screws 2-1/2"','Drywall Screws 3"']},{category:"Tape",items:["500' Paper Tape","300' Mesh Tape","No Coat 325"]},{category:"Metal Studs",items:['25 Gauge - 1-5/8"','25 Gauge - 2-1/2"','25 Gauge - 3-5/8"','25 Gauge - 4"','25 Gauge - 6"','20 Gauge - 1-5/8"','20 Gauge - 2-1/2"','20 Gauge - 3-5/8"','20 Gauge - 4"','20 Gauge - 6"','18 Gauge - 3-5/8"','18 Gauge - 6"']},{category:"Metal Track",items:['25 Gauge - 1-5/8"','25 Gauge - 2-1/2"','25 Gauge - 3-5/8"','25 Gauge - 4"','25 Gauge - 6"','20 Gauge - 1-5/8"','20 Gauge - 2-1/2"','20 Gauge - 3-5/8"','20 Gauge - 4"','20 Gauge - 6"','18 Gauge - 3-5/8"','18 Gauge - 6"']},{category:"Acoustic Ceiling",items:["2'x2' Tiles","2'x4' Tiles","Main Runners","Cross Tees 4'","Cross Tees 2'","Wall Angle","Hanger Wire"]},{category:"Suspended Drywall Grid",items:["Main Runners","Cross Tees 4'","Cross Tees 2'","Wall Angle","Hanger Wire","Transition Molding"]},{category:"FRP (Fiber Reinforced Panels)",items:["4'x8' Panels","4'x10' Panels","Divider Bars","Inside Corner","Outside Corner","FRP Adhesive"]},{category:"Insulation",items:["R-13 Batts","R-19 Batts","R-21 Batts","R-30 Batts","R-38 Batts","Sound Attenuation Batts",'Rigid Insulation 1"','Rigid Insulation 2"']},{category:"Hat Channel",items:['7/8" Hat Channel','1-1/2" Hat Channel',"Z-Furring Channel"]},{category:"RC Channel",items:["RC-1 Channel"]}],OX=({isOpen:e,onClose:t,floorSpaceEntry:n,onSave:r,onDelete:a,jobType:i="residential"})=>{const[o,l]=j.useState({floorSpace:"",unitType:"",unitNumbers:"",notes:"",boards:[],materials:[]});j.useEffect(()=>{var P,D;n&&l({floorSpace:n.floorSpace||"",unitType:n.unitType||"",unitNumbers:n.unitNumbers||"",notes:n.notes||"",boards:((P=n.boards)==null?void 0:P.map(N=>({...N,boardType:N.boardType||"",thickness:N.thickness||"",width:N.width||"",length:N.length||"",quantity:N.quantity||""})))||[],materials:((D=n.materials)==null?void 0:D.map(N=>({...N,id:N.id||`material-${Date.now()}-${Math.random()}`,type:N.type||"",subtype:N.subtype||"",length:N.length||"",threadType:N.threadType||"",quantity:N.quantity||"",unit:N.unit||"pcs"})))||[]})},[n]);const c=()=>{if(i==="residential"&&!o.floorSpace.trim()){pe({title:"Missing Information",description:"Please enter a floor/space name.",variant:"destructive"});return}if(i==="commercial"){if(!o.unitType.trim()){pe({title:"Missing Information",description:"Please enter a unit type name.",variant:"destructive"});return}if(!o.unitNumbers.trim()){pe({title:"Missing Information",description:"Please enter at least one unit number.",variant:"destructive"});return}}const P=o.boards.filter(N=>N.boardType&&N.thickness&&N.width&&N.length&&N.quantity);if(P.length===0){pe({title:"Missing Board Information",description:"Please fill in all details for at least one board type.",variant:"destructive"});return}let D=[];i==="commercial"&&o.materials.length>0&&(D=o.materials.filter(N=>N.type==="Corner Bead"?N.type&&N.subtype&&N.length&&N.quantity:N.type==="Fasteners"?N.type&&N.subtype&&N.threadType&&N.quantity:N.type==="Metal Studs"||N.type==="Metal Track"?N.type&&N.subtype&&N.length&&N.threadType&&N.quantity:N.type==="Hat Channel"||N.type==="RC Channel"||(N.type==="Suspended Drywall Grid"||N.type==="Acoustic Ceiling")&&N.subtype&&(N.subtype.includes("Main")||N.subtype.includes("Runner")||N.subtype.includes("Cross")||N.subtype.includes("Wall"))?N.type&&N.subtype&&N.length&&N.quantity:N.type&&N.subtype&&N.quantity)),r({...n,floorSpace:o.floorSpace,unitType:o.unitType,unitNumbers:o.unitNumbers,notes:o.notes,boards:P,materials:i==="commercial"?D:void 0}),t()},d=()=>{l(P=>({...P,boards:[...P.boards,{id:`board-${Date.now()}-${Math.random()}`,boardType:"",thickness:"",width:"",length:"",quantity:""}]}))},u=P=>{if(o.boards.length<=1){pe({title:"Cannot Remove",description:"At least one board entry is required.",variant:"destructive"});return}l(D=>({...D,boards:D.boards.filter(N=>N.id!==P)}))},h=(P,D,N)=>{l(M=>({...M,boards:M.boards.map(L=>L.id===P?{...L,[D]:N}:L)}))},f=()=>{l(P=>({...P,materials:[...P.materials,{id:`material-${Date.now()}-${Math.random()}`,type:"",subtype:"",length:"",threadType:"",quantity:"",unit:"pcs"}]}))},p=P=>{l(D=>({...D,materials:D.materials.filter(N=>N.id!==P)}))},y=(P,D,N)=>{l(M=>({...M,materials:M.materials.map(L=>L.id===P?{...L,[D]:N}:L)}))},g=P=>{const D=Xk.find(N=>N.category===P);return D?D.items:[]},x=P=>P==="Corner Bead"?["pcs"]:P==="Joint Compound"?["Bucket","Box","Bags"]:P==="Adhesives"?["Tube","Can","Gallon"]:P==="Fasteners"?["Box","lbs","pcs"]:P==="Tape"?["Roll"]:P==="Metal Studs"||P==="Metal Track"?["pcs","bundle","linear ft"]:P==="Acoustic Ceiling"?P.includes("Tiles")?["box","pcs"]:P.includes("Wire")?["roll","box"]:["pcs","box","carton"]:P==="Suspended Drywall Grid"?P.includes("Wire")?["roll","box"]:["pcs","box","carton"]:P==="FRP (Fiber Reinforced Panels)"?P.includes("Panels")?["pcs","pallet"]:P.includes("Adhesive")?["bucket","tube"]:["pcs","box"]:P==="Insulation"?P.includes("Batts")?["bag","pallet","sqft"]:P.includes("Rigid")?["sheet","bundle","sqft"]:["bag","pcs"]:P==="Hat Channel"||P==="RC Channel"?["pcs","bundle","linear ft"]:["pcs"],m=(P,D)=>P==="Corner Bead"?"pcs":P==="Joint Compound"?D&&D.includes("Easy Sand")?"Bags":D==="All Purpose Joint Compound"||D==="Lite Weight Joint Compound"?"Box":"Bucket":P==="Adhesives"?"Tube":P==="Fasteners"?"Box":P==="Tape"?"Roll":P==="Metal Studs"||P==="Metal Track"?"pcs":P==="Acoustic Ceiling"?D&&D.includes("Tiles")?"box":D&&D.includes("Wire")?"roll":"pcs":P==="Suspended Drywall Grid"?D&&D.includes("Wire")?"roll":"pcs":P==="FRP (Fiber Reinforced Panels)"?D&&D.includes("Panels")?"pcs":D&&D.includes("Adhesive")?"bucket":"pcs":P==="Insulation"?D&&D.includes("Batts")?"bag":D&&D.includes("Rigid")?"sheet":"bag":"pcs",v=(P,D)=>{if(P==="Corner Bead")return D==="Tearaway"?["10'"]:["12'","10'","9'","8'"];if(P==="Metal Studs"||P==="Metal Track")return["8'","9'","10'","12'","14'","16'","20'","24'"];if(P==="Hat Channel"||P==="RC Channel")return["8'","10'","12'"];if(P==="Suspended Drywall Grid"||P==="Acoustic Ceiling"){if(D&&(D.includes("Main")||D.includes("Runner")))return["12'","14'"];if(D&&D.includes("Cross Tees"))return["2'","4'"];if(D&&D.includes("Wall Angle"))return["10'","12'"]}return[]},b=P=>P==="Fasteners"?["Coarse Thread","Fine Thread"]:P==="Metal Studs"||P==="Metal Track"?["Standard","EQ (Equivalent Gauge)","Structural"]:[],C=P=>P==="Corner Bead"||P==="Metal Studs"||P==="Metal Track"||P==="Hat Channel"||P==="RC Channel"||P==="Suspended Drywall Grid"&&!P.includes("Wire")||P==="Acoustic Ceiling"&&!P.includes("Tiles")&&!P.includes("Wire"),S=P=>P==="Fasteners"||P==="Metal Studs"||P==="Metal Track";return!e||!n?null:s.jsx(Er,{open:e,onOpenChange:t,children:s.jsx(pr,{className:"max-w-5xl max-h-[90vh] flex flex-col",children:s.jsxs(Pt.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"h-full flex flex-col",children:[s.jsx(mr,{className:"pb-4 border-b bg-gradient-to-r from-brandPrimary to-brandSecondary text-white rounded-t-lg -m-6 mb-6 p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs(gr,{className:"text-2xl font-bold",children:["Edit Takeoff Entry",i==="commercial"&&s.jsx("span",{className:"ml-2 text-sm bg-white/20 px-2 py-1 rounded",children:"Commercial Mode"})]}),s.jsx(se,{variant:"ghost",size:"icon",onClick:t,className:"text-white hover:bg-white/20",children:s.jsx(rn,{className:"h-5 w-5"})})]})}),s.jsxs("div",{className:"flex-grow overflow-y-auto space-y-6",children:[i==="residential"?s.jsxs("div",{children:[s.jsx(de,{htmlFor:"floorSpace",className:"text-lg font-semibold text-gray-700",children:"Floor/Space Name *"}),s.jsx($e,{id:"floorSpace",value:o.floorSpace,onChange:P=>l(D=>({...D,floorSpace:P.target.value})),placeholder:"e.g., 2nd Floor, Garage, Pool House Addition",className:"border-2 focus:border-brandPrimary transition-colors mt-2"})]}):s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(de,{htmlFor:"unitType",className:"text-lg font-semibold text-gray-700",children:"Unit Type Name *"}),s.jsx($e,{id:"unitType",value:o.unitType,onChange:P=>l(D=>({...D,unitType:P.target.value})),placeholder:"e.g., Type 1A, Studio, 2-Bedroom Corner",className:"border-2 focus:border-brandPrimary transition-colors mt-2"})]}),s.jsxs("div",{children:[s.jsx(de,{htmlFor:"unitNumbers",className:"text-lg font-semibold text-gray-700",children:"Unit Numbers *"}),s.jsxs("div",{className:"relative",children:[s.jsx($e,{id:"unitNumbers",value:o.unitNumbers,onChange:P=>l(D=>({...D,unitNumbers:P.target.value})),placeholder:"e.g., 501, 502, 503, 504, 505",className:"border-2 focus:border-brandPrimary transition-colors mt-2 pl-10"}),s.jsx(or,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"})]}),s.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Enter comma-separated unit numbers that share this exact layout"})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Board Details"}),s.jsxs(se,{type:"button",variant:"outline",onClick:d,className:"border-dashed border-brandPrimary text-brandPrimary hover:bg-brandPrimary/5",children:[s.jsx(Fo,{className:"h-4 w-4 mr-2"}),"Add Board Type"]})]}),o.boards.length===0?s.jsxs("div",{className:"text-center py-8 border-2 border-dashed border-gray-300 rounded-lg",children:[s.jsx("p",{className:"text-gray-500 mb-4",children:"No board entries yet"}),s.jsxs(se,{type:"button",onClick:d,className:"bg-brandPrimary hover:bg-brandPrimary-600 text-white",children:[s.jsx(Fo,{className:"h-4 w-4 mr-2"}),"Add First Board Entry"]})]}):o.boards.map((P,D)=>s.jsxs(Pt.div,{className:"p-4 border rounded-lg bg-slate-50 shadow-sm space-y-4 relative",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:D*.05},children:[o.boards.length>1&&s.jsx(se,{type:"button",variant:"ghost",size:"icon",className:"absolute top-2 right-2 text-red-500 hover:bg-red-100",onClick:()=>u(P.id),children:s.jsx(Kt,{className:"h-4 w-4"})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 pr-8",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx(de,{className:"text-sm font-medium text-gray-600",children:"Board Type *"}),s.jsxs(st,{value:P.boardType||"",onValueChange:N=>h(P.id,"boardType",N),children:[s.jsx(nt,{className:"border-gray-300 focus:border-brandPrimary",children:s.jsx(at,{placeholder:"Select type"})}),s.jsxs(rt,{children:[s.jsx(xe,{value:"Standard",children:"Standard"}),s.jsx(xe,{value:"Moisture-Resistant",children:"Moisture-Resistant"}),s.jsx(xe,{value:"Cement",children:"Cement"}),s.jsx(xe,{value:"Fire-Resistant",children:"Fire-Resistant"})]})]})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx(de,{className:"text-sm font-medium text-gray-600",children:"Thickness *"}),s.jsxs(st,{value:P.thickness||"",onValueChange:N=>h(P.id,"thickness",N),children:[s.jsx(nt,{className:"border-gray-300 focus:border-brandPrimary",children:s.jsx(at,{placeholder:"Select thickness"})}),s.jsxs(rt,{children:[s.jsx(xe,{value:"1/4",children:'1/4"'}),s.jsx(xe,{value:"3/8",children:'3/8"'}),s.jsx(xe,{value:"1/2",children:'1/2"'}),s.jsx(xe,{value:"5/8",children:'5/8"'}),s.jsx(xe,{value:"3/4",children:'3/4"'})]})]})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx(de,{className:"text-sm font-medium text-gray-600",children:"Width *"}),s.jsxs(st,{value:P.width||"",onValueChange:N=>h(P.id,"width",N),children:[s.jsx(nt,{className:"border-gray-300 focus:border-brandPrimary",children:s.jsx(at,{placeholder:"Select width"})}),s.jsxs(rt,{children:[s.jsx(xe,{value:"48",children:'48"'}),s.jsx(xe,{value:"54",children:'54"'})]})]})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx(de,{className:"text-sm font-medium text-gray-600",children:"Length *"}),s.jsxs(st,{value:P.length||"",onValueChange:N=>h(P.id,"length",N),children:[s.jsx(nt,{className:"border-gray-300 focus:border-brandPrimary",children:s.jsx(at,{placeholder:"Select length"})}),s.jsxs(rt,{children:[s.jsx(xe,{value:"8",children:"8'"}),s.jsx(xe,{value:"9",children:"9'"}),s.jsx(xe,{value:"10",children:"10'"}),s.jsx(xe,{value:"12",children:"12'"}),s.jsx(xe,{value:"14",children:"14'"}),s.jsx(xe,{value:"16",children:"16'"})]})]})]}),s.jsxs("div",{className:"space-y-1 md:col-span-2",children:[s.jsx(de,{className:"text-sm font-medium text-gray-600",children:"Quantity *"}),s.jsx($e,{type:"number",min:"1",value:P.quantity,onChange:N=>h(P.id,"quantity",N.target.value),placeholder:"Enter quantity",className:"border-gray-300 focus:border-brandPrimary"})]})]})]},P.id))]}),i==="commercial"&&s.jsxs("div",{className:"space-y-4 border-t pt-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Unit-Specific Materials"}),s.jsxs(se,{type:"button",variant:"outline",onClick:f,className:"border-dashed border-brandPrimary text-brandPrimary hover:bg-brandPrimary/5",children:[s.jsx(Fo,{className:"h-4 w-4 mr-2"}),"Add Material"]})]}),o.materials.length===0?s.jsxs("div",{className:"text-center py-6 border-2 border-dashed border-gray-300 rounded-lg",children:[s.jsx(ya,{className:"h-10 w-10 mx-auto mb-3 text-gray-400"}),s.jsx("p",{className:"text-gray-500 mb-3",children:"No unit-specific materials added yet"}),s.jsxs(se,{type:"button",onClick:f,className:"bg-brandPrimary hover:bg-brandPrimary-600 text-white",children:[s.jsx(Fo,{className:"h-4 w-4 mr-2"}),"Add First Material"]})]}):o.materials.map((P,D)=>s.jsxs(Pt.div,{className:"p-4 border rounded-lg bg-blue-50 shadow-sm space-y-4 relative",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:D*.05},children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("span",{className:"text-sm font-medium text-blue-700",children:["Unit Material #",D+1]}),s.jsx(se,{type:"button",variant:"ghost",size:"icon",className:"text-red-500 hover:bg-red-100",onClick:()=>p(P.id),children:s.jsx(Kt,{className:"h-4 w-4"})})]}),s.jsxs("div",{className:`grid grid-cols-1 gap-4 ${C(P.type)&&S(P.type)?"md:grid-cols-6":C(P.type)||S(P.type)?"md:grid-cols-5":"md:grid-cols-4"}`,children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx(de,{className:"text-sm font-medium text-gray-600",children:"Material Type *"}),s.jsxs(st,{value:P.type||"",onValueChange:N=>{y(P.id,"type",N),y(P.id,"subtype",""),y(P.id,"length",""),y(P.id,"threadType","");const M=m(N,"");y(P.id,"unit",M)},children:[s.jsx(nt,{className:"border-gray-300 focus:border-brandPrimary",children:s.jsx(at,{placeholder:"Select type"})}),s.jsx(rt,{children:Xk.map(N=>s.jsx(xe,{value:N.category,children:N.category},N.category))})]})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx(de,{className:"text-sm font-medium text-gray-600",children:"Specific Item *"}),s.jsxs(st,{value:P.subtype||"",onValueChange:N=>{if(y(P.id,"subtype",N),P.type==="Corner Bead"&&y(P.id,"length",""),P.type==="Joint Compound"){const M=m(P.type,N);y(P.id,"unit",M)}},disabled:!P.type,children:[s.jsx(nt,{className:"border-gray-300 focus:border-brandPrimary",children:s.jsx(at,{placeholder:"Select item"})}),s.jsx(rt,{children:g(P.type).map(N=>s.jsx(xe,{value:N,children:N},N))})]})]}),C(P.type)&&s.jsxs("div",{className:"space-y-1",children:[s.jsx(de,{className:"text-sm font-medium text-gray-600",children:"Length *"}),s.jsxs(st,{value:P.length||"",onValueChange:N=>y(P.id,"length",N),disabled:!P.subtype,children:[s.jsx(nt,{className:"border-gray-300 focus:border-brandPrimary",children:s.jsx(at,{placeholder:"Select length"})}),s.jsx(rt,{children:v(P.type,P.subtype).map(N=>s.jsx(xe,{value:N,children:N},N))})]})]}),S(P.type)&&s.jsxs("div",{className:"space-y-1",children:[s.jsx(de,{className:"text-sm font-medium text-gray-600",children:P.type==="Metal Studs"||P.type==="Metal Track"?"Structural Grade *":"Thread Type *"}),s.jsxs(st,{value:P.threadType||"",onValueChange:N=>y(P.id,"threadType",N),disabled:!P.subtype,children:[s.jsx(nt,{className:"border-gray-300 focus:border-brandPrimary",children:s.jsx(at,{placeholder:P.type==="Metal Studs"||P.type==="Metal Track"?"Select grade":"Select thread"})}),s.jsx(rt,{children:b(P.type).map(N=>s.jsx(xe,{value:N,children:N},N))})]})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx(de,{className:"text-sm font-medium text-gray-600",children:"Quantity *"}),s.jsx($e,{type:"number",min:"0",step:"0.1",value:P.quantity,onChange:N=>y(P.id,"quantity",N.target.value),placeholder:"Enter quantity",className:"border-gray-300 focus:border-brandPrimary"})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx(de,{className:"text-sm font-medium text-gray-600",children:"Unit"}),s.jsxs(st,{value:P.unit||"pcs",onValueChange:N=>y(P.id,"unit",N),children:[s.jsx(nt,{className:"border-gray-300 focus:border-brandPrimary",children:s.jsx(at,{})}),s.jsx(rt,{children:x(P.type).map(N=>s.jsx(xe,{value:N,children:N},N))})]})]})]})]},P.id))]}),s.jsxs("div",{children:[s.jsx(de,{htmlFor:"notes",className:"text-lg font-semibold text-gray-700",children:"Notes (Optional)"}),s.jsx(_n,{id:"notes",value:o.notes,onChange:P=>l(D=>({...D,notes:P.target.value})),placeholder:"Additional notes or specifications for this floor/space",className:"border-2 focus:border-brandPrimary transition-colors mt-2 min-h-[80px]"})]})]}),s.jsxs(Tr,{className:"pt-6 border-t bg-gray-50 rounded-b-lg -m-6 mt-6 p-6",children:[s.jsxs(se,{variant:"outline",onClick:t,className:"hover:bg-gray-100",children:[s.jsx(rn,{className:"h-4 w-4 mr-2"})," Cancel"]}),s.jsxs(se,{variant:"destructive",onClick:()=>{a(n.id),t()},className:"bg-red-600 hover:bg-red-700",children:[s.jsx(Kt,{className:"h-4 w-4 mr-2"})," Delete Entry"]}),s.jsxs(se,{onClick:c,className:"bg-gradient-to-r from-brandPrimary to-brandSecondary text-white hover:opacity-90",children:[s.jsx(Qn,{className:"h-4 w-4 mr-2"})," Save Changes"]})]})]})})})},Ax=[{category:"Corner Bead",items:["Square Bead","Bullnose","Splay","Arch","Tearaway"]},{category:"Joint Compound",items:["All Purpose Joint Compound","Lite Weight Joint Compound","Easy Sand 90","Easy Sand 45","Easy Sand 20","Easy Sand 5"]},{category:"Adhesives",items:["TiteBond Foam","Spray Adhesive"]},{category:"Fasteners",items:['Drywall Screws 1"','Drywall Screws 1-1/4"','Drywall Screws 1-5/8"','Drywall Screws 2"','Drywall Screws 2-1/2"','Drywall Screws 3"']},{category:"Tape",items:["500' Paper Tape","300' Mesh Tape","No Coat 325"]}],FX=({isOpen:e,onClose:t,phase:n,onSave:r})=>{const[a,i]=j.useState([]),[o,l]=j.useState("all");j.useEffect(()=>{n&&e&&i(n.materials?n.materials.map(S=>({...S,type:S.type||"",subtype:S.subtype||"",length:S.length||"",threadType:S.threadType||"",quantity:S.quantity||"",unit:S.unit||"pcs"})):[])},[n,e]);const c=()=>{i(S=>[...S,{id:`material-${Date.now()}-${Math.random()}`,type:"",subtype:"",length:"",threadType:"",quantity:"",unit:"pcs"}])},d=S=>{i(P=>P.filter(D=>D.id!==S))},u=(S,P,D)=>{i(N=>N.map(M=>M.id===S?{...M,[P]:D}:M))},h=()=>{const S=a.filter(P=>P.type==="Corner Bead"?P.type&&P.subtype&&P.length&&P.quantity:P.type==="Fasteners"?P.type&&P.subtype&&P.threadType&&P.quantity:P.type&&P.subtype&&P.quantity);r(n.id,S),pe({title:"Phase Materials Updated! 📦",description:`Materials for ${n.name} have been saved successfully.`}),t()},f=S=>{const P=Ax.find(D=>D.category===S);return P?P.items:[]},p=S=>S==="Corner Bead"?["pcs"]:S==="Joint Compound"?["Bucket","Box","Bags"]:S==="Adhesives"?["Tube","Can","Gallon"]:S==="Fasteners"?["Box","lbs","pcs"]:S==="Tape"?["Roll"]:["pcs"],y=(S,P)=>S==="Corner Bead"?"pcs":S==="Joint Compound"?P&&P.includes("Easy Sand")?"Bags":P==="All Purpose Joint Compound"||P==="Lite Weight Joint Compound"?"Box":"Bucket":S==="Adhesives"?"Tube":S==="Fasteners"?"Box":S==="Tape"?"Roll":"pcs",g=(S,P)=>S==="Corner Bead"?P==="Tearaway"?["10'"]:["12'","10'","9'","8'"]:[],x=S=>S==="Fasteners"?["Coarse Thread","Fine Thread"]:[],m=S=>S==="Corner Bead",v=S=>S==="Fasteners",b=o==="all"?a:a.filter(S=>S.type===o),C=["all",...Ax.map(S=>S.category),...new Set(a.map(S=>S.type).filter(Boolean).filter(S=>!Ax.some(P=>P.category===S)))];return!e||!n?null:s.jsx(Er,{open:e,onOpenChange:t,children:s.jsxs(pr,{className:"w-[95vw] max-w-6xl h-[90vh] max-h-[90vh] flex flex-col overflow-hidden",children:[s.jsx(mr,{className:"pb-4 border-b bg-gradient-to-r from-brandPrimary to-brandSecondary text-white rounded-t-lg -m-6 mb-6 p-6 flex-shrink-0",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(ya,{className:"h-6 w-6"}),s.jsxs(gr,{className:"text-xl md:text-2xl font-bold",children:["Phase Materials - ",n.name]})]}),s.jsx(se,{variant:"ghost",size:"icon",onClick:t,className:"text-white hover:bg-white/20",children:s.jsx(rn,{className:"h-5 w-5"})})]})}),s.jsxs("div",{className:"flex-grow overflow-y-auto space-y-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Materials for this Phase"}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[s.jsxs(st,{value:o,onValueChange:l,children:[s.jsx(nt,{className:"w-full sm:w-[180px]",children:s.jsx(at,{placeholder:"Filter by type"})}),s.jsxs(rt,{children:[s.jsx(xe,{value:"all",children:"All Material Types"}),C.filter(S=>S!=="all").map(S=>s.jsx(xe,{value:S,children:S},S))]})]}),s.jsxs(se,{type:"button",variant:"outline",onClick:c,className:"border-dashed border-brandPrimary text-brandPrimary hover:bg-brandPrimary/5",children:[s.jsx(Fo,{className:"h-4 w-4 mr-2"}),"Add Material"]})]})]}),a.length===0?s.jsxs("div",{className:"text-center py-12 border-2 border-dashed border-gray-300 rounded-lg",children:[s.jsx(ya,{className:"h-12 w-12 mx-auto mb-4 text-gray-400"}),s.jsx("p",{className:"text-gray-500 mb-4",children:'No materials added yet. Click "Add Material" to get started.'}),s.jsxs(se,{type:"button",onClick:c,className:"bg-brandPrimary hover:bg-brandPrimary-600 text-white",children:[s.jsx(Fo,{className:"h-4 w-4 mr-2"}),"Add First Material"]})]}):b.length===0?s.jsxs("div",{className:"text-center py-8 border-2 border-dashed border-gray-300 rounded-lg",children:[s.jsx("p",{className:"text-gray-500",children:"No materials match the selected filter."}),s.jsx(se,{type:"button",onClick:()=>l("all"),className:"mt-2",variant:"outline",children:"Show All Materials"})]}):s.jsx("div",{className:"space-y-4",children:b.map((S,P)=>s.jsxs(Pt.div,{className:"p-4 border rounded-lg bg-slate-50 shadow-sm space-y-4 relative",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:P*.05},children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("span",{className:"text-sm font-medium text-gray-600",children:["Material #",P+1]}),s.jsx(se,{type:"button",variant:"ghost",size:"icon",className:"text-red-500 hover:bg-red-100",onClick:()=>d(S.id),children:s.jsx(Kt,{className:"h-4 w-4"})})]}),s.jsxs("div",{className:`grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 2xl:grid-cols-5 gap-4 ${m(S.type)&&v(S.type)?"xl:grid-cols-6":m(S.type)||v(S.type)?"xl:grid-cols-5":"xl:grid-cols-4"}`,children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx(de,{className:"text-sm font-medium text-gray-600",children:"Material Type *"}),s.jsxs(st,{value:S.type||"",onValueChange:D=>{u(S.id,"type",D),u(S.id,"subtype",""),u(S.id,"length",""),u(S.id,"threadType","");const N=y(D,"");u(S.id,"unit",N)},children:[s.jsx(nt,{className:"border-gray-300 focus:border-brandPrimary",children:s.jsx(at,{placeholder:"Select type"})}),s.jsx(rt,{children:Ax.map(D=>s.jsx(xe,{value:D.category,children:D.category},D.category))})]})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx(de,{className:"text-sm font-medium text-gray-600",children:"Specific Item *"}),s.jsxs(st,{value:S.subtype||"",onValueChange:D=>{if(u(S.id,"subtype",D),S.type==="Corner Bead"&&u(S.id,"length",""),S.type==="Joint Compound"){const N=y(S.type,D);u(S.id,"unit",N)}},disabled:!S.type,children:[s.jsx(nt,{className:"border-gray-300 focus:border-brandPrimary",children:s.jsx(at,{placeholder:"Select item"})}),s.jsx(rt,{children:f(S.type).map(D=>s.jsx(xe,{value:D,children:D},D))})]})]}),m(S.type)&&s.jsxs("div",{className:"space-y-1",children:[s.jsx(de,{className:"text-sm font-medium text-gray-600",children:"Length *"}),s.jsxs(st,{value:S.length||"",onValueChange:D=>u(S.id,"length",D),disabled:!S.subtype,children:[s.jsx(nt,{className:"border-gray-300 focus:border-brandPrimary",children:s.jsx(at,{placeholder:"Select length"})}),s.jsx(rt,{children:g(S.type,S.subtype).map(D=>s.jsx(xe,{value:D,children:D},D))})]})]}),v(S.type)&&s.jsxs("div",{className:"space-y-1",children:[s.jsx(de,{className:"text-sm font-medium text-gray-600",children:"Thread Type *"}),s.jsxs(st,{value:S.threadType||"",onValueChange:D=>u(S.id,"threadType",D),disabled:!S.subtype,children:[s.jsx(nt,{className:"border-gray-300 focus:border-brandPrimary",children:s.jsx(at,{placeholder:"Select thread"})}),s.jsx(rt,{children:x(S.type).map(D=>s.jsx(xe,{value:D,children:D},D))})]})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx(de,{className:"text-sm font-medium text-gray-600",children:"Quantity *"}),s.jsx($e,{type:"number",min:"0",step:"0.1",value:S.quantity,onChange:D=>u(S.id,"quantity",D.target.value),placeholder:"Enter quantity",className:"border-gray-300 focus:border-brandPrimary"})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx(de,{className:"text-sm font-medium text-gray-600",children:"Unit"}),s.jsxs(st,{value:S.unit||"pcs",onValueChange:D=>u(S.id,"unit",D),children:[s.jsx(nt,{className:"border-gray-300 focus:border-brandPrimary",children:s.jsx(at,{})}),s.jsx(rt,{children:p(S.type).map(D=>s.jsx(xe,{value:D,children:D},D))})]})]})]})]},S.id))})]}),s.jsx(Tr,{className:"pt-6 border-t bg-gray-50 rounded-b-lg -m-6 mt-6 p-6 flex-shrink-0",children:s.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 w-full sm:w-auto",children:[s.jsxs(se,{variant:"outline",onClick:t,className:"hover:bg-gray-100 w-full sm:w-auto",children:[s.jsx(rn,{className:"h-4 w-4 mr-2"})," Cancel"]}),s.jsxs(se,{onClick:h,className:"bg-gradient-to-r from-brandPrimary to-brandSecondary text-white hover:opacity-90 w-full sm:w-auto",children:[s.jsx(Qn,{className:"h-4 w-4 mr-2"})," Save Materials"]})]})})]})})},$X=m1("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function ht({className:e,variant:t,...n}){return s.jsx("div",{className:Ft($X({variant:t}),e),...n})}function kt(e){const t=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&t==="[object Date]"?new e.constructor(+e):typeof e=="number"||t==="[object Number]"||typeof e=="string"||t==="[object String]"?new Date(e):new Date(NaN)}function jn(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}function $a(e,t){const n=kt(e);return isNaN(t)?jn(e,NaN):(t&&n.setDate(n.getDate()+t),n)}function ho(e,t){const n=kt(e);if(isNaN(t))return jn(e,NaN);if(!t)return n;const r=n.getDate(),a=jn(e,n.getTime());a.setMonth(n.getMonth()+t+1,0);const i=a.getDate();return r>=i?a:(n.setFullYear(a.getFullYear(),a.getMonth(),r),n)}function QS(e,t){const n=+kt(e);return jn(e,n+t)}const _I=6048e5,BX=864e5,E1=6e4,T1=36e5,zX=1e3;function WX(e,t){return QS(e,t*T1)}let HX={};function Zu(){return HX}function fo(e,t){var l,c,d,u;const n=Zu(),r=(t==null?void 0:t.weekStartsOn)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??n.weekStartsOn??((u=(d=n.locale)==null?void 0:d.options)==null?void 0:u.weekStartsOn)??0,a=kt(e),i=a.getDay(),o=(i<r?7:0)+i-r;return a.setDate(a.getDate()-o),a.setHours(0,0,0,0),a}function Af(e){return fo(e,{weekStartsOn:1})}function MI(e){const t=kt(e),n=t.getFullYear(),r=jn(e,0);r.setFullYear(n+1,0,4),r.setHours(0,0,0,0);const a=Af(r),i=jn(e,0);i.setFullYear(n,0,4),i.setHours(0,0,0,0);const o=Af(i);return t.getTime()>=a.getTime()?n+1:t.getTime()>=o.getTime()?n:n-1}function Yo(e){const t=kt(e);return t.setHours(0,0,0,0),t}function xy(e){const t=kt(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function vg(e,t){const n=Yo(e),r=Yo(t),a=+n-xy(n),i=+r-xy(r);return Math.round((a-i)/BX)}function qX(e){const t=MI(e),n=jn(e,0);return n.setFullYear(t,0,4),n.setHours(0,0,0,0),Af(n)}function lN(e,t){return QS(e,t*E1)}function ZS(e,t){const n=t*3;return ho(e,n)}function VX(e,t){return QS(e,t*1e3)}function yy(e,t){const n=t*7;return $a(e,n)}function Bl(e,t){return ho(e,t*12)}function Qk(e){let t;return e.forEach(function(n){const r=kt(n);(t===void 0||t<r||isNaN(Number(r)))&&(t=r)}),t||new Date(NaN)}function Zk(e){let t;return e.forEach(n=>{const r=kt(n);(!t||t>r||isNaN(+r))&&(t=r)}),t||new Date(NaN)}function UX(e){return jn(e,Date.now())}function _f(e,t){const n=Yo(e),r=Yo(t);return+n==+r}function Lu(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function xg(e){if(!Lu(e)&&typeof e!="number")return!1;const t=kt(e);return!isNaN(Number(t))}function by(e,t){const n=kt(e),r=kt(t),a=n.getFullYear()-r.getFullYear(),i=n.getMonth()-r.getMonth();return a*12+i}function vu(e){const t=kt(e);return Math.trunc(t.getMonth()/3)+1}function wy(e,t){const n=kt(e),r=kt(t),a=n.getFullYear()-r.getFullYear(),i=vu(n)-vu(r);return a*4+i}function jy(e,t){const n=kt(e),r=kt(t);return n.getFullYear()-r.getFullYear()}function cN(e){const t=kt(e);return t.setHours(23,59,59,999),t}function YX(e){const t=kt(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(23,59,59,999),t}function dN(e){const t=kt(e),n=t.getMonth(),r=n-n%3;return t.setMonth(r,1),t.setHours(0,0,0,0),t}function RI(e){const t=kt(e);return t.setDate(1),t.setHours(0,0,0,0),t}function LI(e){const t=kt(e),n=t.getFullYear();return t.setFullYear(n+1,0,0),t.setHours(23,59,59,999),t}function A1(e){const t=kt(e),n=jn(e,0);return n.setFullYear(t.getFullYear(),0,1),n.setHours(0,0,0,0),n}function GX(e,t){var l,c,d,u;const n=Zu(),r=(t==null?void 0:t.weekStartsOn)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??n.weekStartsOn??((u=(d=n.locale)==null?void 0:d.options)==null?void 0:u.weekStartsOn)??0,a=kt(e),i=a.getDay(),o=(i<r?-7:0)+6-(i-r);return a.setDate(a.getDate()+o),a.setHours(23,59,59,999),a}const JX={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},KX=(e,t,n)=>{let r;const a=JX[e];return typeof a=="string"?r=a:t===1?r=a.one:r=a.other.replace("{{count}}",t.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function s2(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const XX={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},QX={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},ZX={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},eQ={date:s2({formats:XX,defaultWidth:"full"}),time:s2({formats:QX,defaultWidth:"full"}),dateTime:s2({formats:ZX,defaultWidth:"full"})},tQ={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},nQ=(e,t,n,r)=>tQ[e];function em(e){return(t,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let a;if(r==="formatting"&&e.formattingValues){const o=e.defaultFormattingWidth||e.defaultWidth,l=n!=null&&n.width?String(n.width):o;a=e.formattingValues[l]||e.formattingValues[o]}else{const o=e.defaultWidth,l=n!=null&&n.width?String(n.width):e.defaultWidth;a=e.values[l]||e.values[o]}const i=e.argumentCallback?e.argumentCallback(t):t;return a[i]}}const rQ={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},sQ={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},aQ={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},iQ={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},oQ={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},lQ={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},cQ=(e,t)=>{const n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},dQ={ordinalNumber:cQ,era:em({values:rQ,defaultWidth:"wide"}),quarter:em({values:sQ,defaultWidth:"wide",argumentCallback:e=>e-1}),month:em({values:aQ,defaultWidth:"wide"}),day:em({values:iQ,defaultWidth:"wide"}),dayPeriod:em({values:oQ,defaultWidth:"wide",formattingValues:lQ,defaultFormattingWidth:"wide"})};function tm(e){return(t,n={})=>{const r=n.width,a=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],i=t.match(a);if(!i)return null;const o=i[0],l=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?hQ(l,h=>h.test(o)):uQ(l,h=>h.test(o));let d;d=e.valueCallback?e.valueCallback(c):c,d=n.valueCallback?n.valueCallback(d):d;const u=t.slice(o.length);return{value:d,rest:u}}}function uQ(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n}function hQ(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n}function fQ(e){return(t,n={})=>{const r=t.match(e.matchPattern);if(!r)return null;const a=r[0],i=t.match(e.parsePattern);if(!i)return null;let o=e.valueCallback?e.valueCallback(i[0]):i[0];o=n.valueCallback?n.valueCallback(o):o;const l=t.slice(a.length);return{value:o,rest:l}}}const pQ=/^(\d+)(th|st|nd|rd)?/i,mQ=/\d+/i,gQ={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},vQ={any:[/^b/i,/^(a|c)/i]},xQ={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},yQ={any:[/1/i,/2/i,/3/i,/4/i]},bQ={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},wQ={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},jQ={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},NQ={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},SQ={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},CQ={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},PQ={ordinalNumber:fQ({matchPattern:pQ,parsePattern:mQ,valueCallback:e=>parseInt(e,10)}),era:tm({matchPatterns:gQ,defaultMatchWidth:"wide",parsePatterns:vQ,defaultParseWidth:"any"}),quarter:tm({matchPatterns:xQ,defaultMatchWidth:"wide",parsePatterns:yQ,defaultParseWidth:"any",valueCallback:e=>e+1}),month:tm({matchPatterns:bQ,defaultMatchWidth:"wide",parsePatterns:wQ,defaultParseWidth:"any"}),day:tm({matchPatterns:jQ,defaultMatchWidth:"wide",parsePatterns:NQ,defaultParseWidth:"any"}),dayPeriod:tm({matchPatterns:SQ,defaultMatchWidth:"any",parsePatterns:CQ,defaultParseWidth:"any"})},eC={code:"en-US",formatDistance:KX,formatLong:eQ,formatRelative:nQ,localize:dQ,match:PQ,options:{weekStartsOn:0,firstWeekContainsDate:1}};function DQ(e){const t=kt(e);return vg(t,A1(t))+1}function tC(e){const t=kt(e),n=+Af(t)-+qX(t);return Math.round(n/_I)+1}function nC(e,t){var u,h,f,p;const n=kt(e),r=n.getFullYear(),a=Zu(),i=(t==null?void 0:t.firstWeekContainsDate)??((h=(u=t==null?void 0:t.locale)==null?void 0:u.options)==null?void 0:h.firstWeekContainsDate)??a.firstWeekContainsDate??((p=(f=a.locale)==null?void 0:f.options)==null?void 0:p.firstWeekContainsDate)??1,o=jn(e,0);o.setFullYear(r+1,0,i),o.setHours(0,0,0,0);const l=fo(o,t),c=jn(e,0);c.setFullYear(r,0,i),c.setHours(0,0,0,0);const d=fo(c,t);return n.getTime()>=l.getTime()?r+1:n.getTime()>=d.getTime()?r:r-1}function kQ(e,t){var l,c,d,u;const n=Zu(),r=(t==null?void 0:t.firstWeekContainsDate)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??n.firstWeekContainsDate??((u=(d=n.locale)==null?void 0:d.options)==null?void 0:u.firstWeekContainsDate)??1,a=nC(e,t),i=jn(e,0);return i.setFullYear(a,0,r),i.setHours(0,0,0,0),fo(i,t)}function II(e,t){const n=kt(e),r=+fo(n,t)-+kQ(n,t);return Math.round(r/_I)+1}function Cn(e,t){const n=e<0?"-":"",r=Math.abs(e).toString().padStart(t,"0");return n+r}const Pc={y(e,t){const n=e.getFullYear(),r=n>0?n:1-n;return Cn(t==="yy"?r%100:r,t.length)},M(e,t){const n=e.getMonth();return t==="M"?String(n+1):Cn(n+1,2)},d(e,t){return Cn(e.getDate(),t.length)},a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(e,t){return Cn(e.getHours()%12||12,t.length)},H(e,t){return Cn(e.getHours(),t.length)},m(e,t){return Cn(e.getMinutes(),t.length)},s(e,t){return Cn(e.getSeconds(),t.length)},S(e,t){const n=t.length,r=e.getMilliseconds(),a=Math.trunc(r*Math.pow(10,n-3));return Cn(a,t.length)}},Oh={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},eE={G:function(e,t,n){const r=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if(t==="yo"){const r=e.getFullYear(),a=r>0?r:1-r;return n.ordinalNumber(a,{unit:"year"})}return Pc.y(e,t)},Y:function(e,t,n,r){const a=nC(e,r),i=a>0?a:1-a;if(t==="YY"){const o=i%100;return Cn(o,2)}return t==="Yo"?n.ordinalNumber(i,{unit:"year"}):Cn(i,t.length)},R:function(e,t){const n=MI(e);return Cn(n,t.length)},u:function(e,t){const n=e.getFullYear();return Cn(n,t.length)},Q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return Cn(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return Cn(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){const r=e.getMonth();switch(t){case"M":case"MM":return Pc.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){const r=e.getMonth();switch(t){case"L":return String(r+1);case"LL":return Cn(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){const a=II(e,r);return t==="wo"?n.ordinalNumber(a,{unit:"week"}):Cn(a,t.length)},I:function(e,t,n){const r=tC(e);return t==="Io"?n.ordinalNumber(r,{unit:"week"}):Cn(r,t.length)},d:function(e,t,n){return t==="do"?n.ordinalNumber(e.getDate(),{unit:"date"}):Pc.d(e,t)},D:function(e,t,n){const r=DQ(e);return t==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):Cn(r,t.length)},E:function(e,t,n){const r=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){const a=e.getDay(),i=(a-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(i);case"ee":return Cn(i,2);case"eo":return n.ordinalNumber(i,{unit:"day"});case"eee":return n.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(a,{width:"short",context:"formatting"});case"eeee":default:return n.day(a,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){const a=e.getDay(),i=(a-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(i);case"cc":return Cn(i,t.length);case"co":return n.ordinalNumber(i,{unit:"day"});case"ccc":return n.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(a,{width:"narrow",context:"standalone"});case"cccccc":return n.day(a,{width:"short",context:"standalone"});case"cccc":default:return n.day(a,{width:"wide",context:"standalone"})}},i:function(e,t,n){const r=e.getDay(),a=r===0?7:r;switch(t){case"i":return String(a);case"ii":return Cn(a,t.length);case"io":return n.ordinalNumber(a,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){const a=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(e,t,n){const r=e.getHours();let a;switch(r===12?a=Oh.noon:r===0?a=Oh.midnight:a=r/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(e,t,n){const r=e.getHours();let a;switch(r>=17?a=Oh.evening:r>=12?a=Oh.afternoon:r>=4?a=Oh.morning:a=Oh.night,t){case"B":case"BB":case"BBB":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(e,t,n){if(t==="ho"){let r=e.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return Pc.h(e,t)},H:function(e,t,n){return t==="Ho"?n.ordinalNumber(e.getHours(),{unit:"hour"}):Pc.H(e,t)},K:function(e,t,n){const r=e.getHours()%12;return t==="Ko"?n.ordinalNumber(r,{unit:"hour"}):Cn(r,t.length)},k:function(e,t,n){let r=e.getHours();return r===0&&(r=24),t==="ko"?n.ordinalNumber(r,{unit:"hour"}):Cn(r,t.length)},m:function(e,t,n){return t==="mo"?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):Pc.m(e,t)},s:function(e,t,n){return t==="so"?n.ordinalNumber(e.getSeconds(),{unit:"second"}):Pc.s(e,t)},S:function(e,t){return Pc.S(e,t)},X:function(e,t,n){const r=e.getTimezoneOffset();if(r===0)return"Z";switch(t){case"X":return nE(r);case"XXXX":case"XX":return nu(r);case"XXXXX":case"XXX":default:return nu(r,":")}},x:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"x":return nE(r);case"xxxx":case"xx":return nu(r);case"xxxxx":case"xxx":default:return nu(r,":")}},O:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+tE(r,":");case"OOOO":default:return"GMT"+nu(r,":")}},z:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+tE(r,":");case"zzzz":default:return"GMT"+nu(r,":")}},t:function(e,t,n){const r=Math.trunc(e.getTime()/1e3);return Cn(r,t.length)},T:function(e,t,n){const r=e.getTime();return Cn(r,t.length)}};function tE(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),a=Math.trunc(r/60),i=r%60;return i===0?n+String(a):n+String(a)+t+Cn(i,2)}function nE(e,t){return e%60===0?(e>0?"-":"+")+Cn(Math.abs(e)/60,2):nu(e,t)}function nu(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),a=Cn(Math.trunc(r/60),2),i=Cn(r%60,2);return n+a+t+i}const rE=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},OI=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},EQ=(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],r=n[1],a=n[2];if(!a)return rE(e,t);let i;switch(r){case"P":i=t.dateTime({width:"short"});break;case"PP":i=t.dateTime({width:"medium"});break;case"PPP":i=t.dateTime({width:"long"});break;case"PPPP":default:i=t.dateTime({width:"full"});break}return i.replace("{{date}}",rE(r,t)).replace("{{time}}",OI(a,t))},Ny={p:OI,P:EQ},TQ=/^D+$/,AQ=/^Y+$/,_Q=["D","DD","YY","YYYY"];function FI(e){return TQ.test(e)}function $I(e){return AQ.test(e)}function uN(e,t,n){const r=MQ(e,t,n);if(console.warn(r),_Q.includes(e))throw new RangeError(r)}function MQ(e,t,n){const r=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const RQ=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,LQ=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,IQ=/^'([^]*?)'?$/,OQ=/''/g,FQ=/[a-zA-Z]/;function Fi(e,t,n){var u,h,f,p,y,g,x,m;const r=Zu(),a=(n==null?void 0:n.locale)??r.locale??eC,i=(n==null?void 0:n.firstWeekContainsDate)??((h=(u=n==null?void 0:n.locale)==null?void 0:u.options)==null?void 0:h.firstWeekContainsDate)??r.firstWeekContainsDate??((p=(f=r.locale)==null?void 0:f.options)==null?void 0:p.firstWeekContainsDate)??1,o=(n==null?void 0:n.weekStartsOn)??((g=(y=n==null?void 0:n.locale)==null?void 0:y.options)==null?void 0:g.weekStartsOn)??r.weekStartsOn??((m=(x=r.locale)==null?void 0:x.options)==null?void 0:m.weekStartsOn)??0,l=kt(e);if(!xg(l))throw new RangeError("Invalid time value");let c=t.match(LQ).map(v=>{const b=v[0];if(b==="p"||b==="P"){const C=Ny[b];return C(v,a.formatLong)}return v}).join("").match(RQ).map(v=>{if(v==="''")return{isToken:!1,value:"'"};const b=v[0];if(b==="'")return{isToken:!1,value:$Q(v)};if(eE[b])return{isToken:!0,value:v};if(b.match(FQ))throw new RangeError("Format string contains an unescaped latin alphabet character `"+b+"`");return{isToken:!1,value:v}});a.localize.preprocessor&&(c=a.localize.preprocessor(l,c));const d={firstWeekContainsDate:i,weekStartsOn:o,locale:a};return c.map(v=>{if(!v.isToken)return v.value;const b=v.value;(!(n!=null&&n.useAdditionalWeekYearTokens)&&$I(b)||!(n!=null&&n.useAdditionalDayOfYearTokens)&&FI(b))&&uN(b,t,String(e));const C=eE[b[0]];return C(l,b,a.localize,d)}).join("")}function $Q(e){const t=e.match(IQ);return t?t[1].replace(OQ,"'"):e}function sE(e){return kt(e).getDate()}function BI(e){return kt(e).getDay()}function BQ(e){const t=kt(e),n=t.getFullYear(),r=t.getMonth(),a=jn(e,0);return a.setFullYear(n,r+1,0),a.setHours(0,0,0,0),a.getDate()}function zQ(){return Object.assign({},Zu())}function Go(e){return kt(e).getHours()}function WQ(e){let n=kt(e).getDay();return n===0&&(n=7),n}function Jo(e){return kt(e).getMinutes()}function ga(e){return kt(e).getMonth()}function zl(e){return kt(e).getSeconds()}function hN(e){return kt(e).getTime()}function an(e){return kt(e).getFullYear()}function tl(e,t){const n=kt(e),r=kt(t);return n.getTime()>r.getTime()}function Ql(e,t){const n=kt(e),r=kt(t);return+n<+r}function HQ(e,t){const n=kt(e),r=kt(t);return+n==+r}function qQ(e,t){const n=t instanceof Date?jn(t,0):new t(0);return n.setFullYear(e.getFullYear(),e.getMonth(),e.getDate()),n.setHours(e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()),n}const VQ=10;class zI{constructor(){Dt(this,"subPriority",0)}validate(t,n){return!0}}class UQ extends zI{constructor(t,n,r,a,i){super(),this.value=t,this.validateValue=n,this.setValue=r,this.priority=a,i&&(this.subPriority=i)}validate(t,n){return this.validateValue(t,this.value,n)}set(t,n,r){return this.setValue(t,n,this.value,r)}}class YQ extends zI{constructor(){super(...arguments);Dt(this,"priority",VQ);Dt(this,"subPriority",-1)}set(n,r){return r.timestampIsSet?n:jn(n,qQ(n,Date))}}class bn{run(t,n,r,a){const i=this.parse(t,n,r,a);return i?{setter:new UQ(i.value,this.validate,this.set,this.priority,this.subPriority),rest:i.rest}:null}validate(t,n,r){return!0}}class GQ extends bn{constructor(){super(...arguments);Dt(this,"priority",140);Dt(this,"incompatibleTokens",["R","u","t","T"])}parse(n,r,a){switch(r){case"G":case"GG":case"GGG":return a.era(n,{width:"abbreviated"})||a.era(n,{width:"narrow"});case"GGGGG":return a.era(n,{width:"narrow"});case"GGGG":default:return a.era(n,{width:"wide"})||a.era(n,{width:"abbreviated"})||a.era(n,{width:"narrow"})}}set(n,r,a){return r.era=a,n.setFullYear(a,0,1),n.setHours(0,0,0,0),n}}const zr={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},Ro={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function Wr(e,t){return e&&{value:t(e.value),rest:e.rest}}function wr(e,t){const n=t.match(e);return n?{value:parseInt(n[0],10),rest:t.slice(n[0].length)}:null}function Lo(e,t){const n=t.match(e);if(!n)return null;if(n[0]==="Z")return{value:0,rest:t.slice(1)};const r=n[1]==="+"?1:-1,a=n[2]?parseInt(n[2],10):0,i=n[3]?parseInt(n[3],10):0,o=n[5]?parseInt(n[5],10):0;return{value:r*(a*T1+i*E1+o*zX),rest:t.slice(n[0].length)}}function WI(e){return wr(zr.anyDigitsSigned,e)}function Mr(e,t){switch(e){case 1:return wr(zr.singleDigit,t);case 2:return wr(zr.twoDigits,t);case 3:return wr(zr.threeDigits,t);case 4:return wr(zr.fourDigits,t);default:return wr(new RegExp("^\\d{1,"+e+"}"),t)}}function Sy(e,t){switch(e){case 1:return wr(zr.singleDigitSigned,t);case 2:return wr(zr.twoDigitsSigned,t);case 3:return wr(zr.threeDigitsSigned,t);case 4:return wr(zr.fourDigitsSigned,t);default:return wr(new RegExp("^-?\\d{1,"+e+"}"),t)}}function rC(e){switch(e){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function HI(e,t){const n=t>0,r=n?t:1-t;let a;if(r<=50)a=e||100;else{const i=r+50,o=Math.trunc(i/100)*100,l=e>=i%100;a=e+o-(l?100:0)}return n?a:1-a}function qI(e){return e%400===0||e%4===0&&e%100!==0}class JQ extends bn{constructor(){super(...arguments);Dt(this,"priority",130);Dt(this,"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"])}parse(n,r,a){const i=o=>({year:o,isTwoDigitYear:r==="yy"});switch(r){case"y":return Wr(Mr(4,n),i);case"yo":return Wr(a.ordinalNumber(n,{unit:"year"}),i);default:return Wr(Mr(r.length,n),i)}}validate(n,r){return r.isTwoDigitYear||r.year>0}set(n,r,a){const i=n.getFullYear();if(a.isTwoDigitYear){const l=HI(a.year,i);return n.setFullYear(l,0,1),n.setHours(0,0,0,0),n}const o=!("era"in r)||r.era===1?a.year:1-a.year;return n.setFullYear(o,0,1),n.setHours(0,0,0,0),n}}class KQ extends bn{constructor(){super(...arguments);Dt(this,"priority",130);Dt(this,"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"])}parse(n,r,a){const i=o=>({year:o,isTwoDigitYear:r==="YY"});switch(r){case"Y":return Wr(Mr(4,n),i);case"Yo":return Wr(a.ordinalNumber(n,{unit:"year"}),i);default:return Wr(Mr(r.length,n),i)}}validate(n,r){return r.isTwoDigitYear||r.year>0}set(n,r,a,i){const o=nC(n,i);if(a.isTwoDigitYear){const c=HI(a.year,o);return n.setFullYear(c,0,i.firstWeekContainsDate),n.setHours(0,0,0,0),fo(n,i)}const l=!("era"in r)||r.era===1?a.year:1-a.year;return n.setFullYear(l,0,i.firstWeekContainsDate),n.setHours(0,0,0,0),fo(n,i)}}class XQ extends bn{constructor(){super(...arguments);Dt(this,"priority",130);Dt(this,"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"])}parse(n,r){return Sy(r==="R"?4:r.length,n)}set(n,r,a){const i=jn(n,0);return i.setFullYear(a,0,4),i.setHours(0,0,0,0),Af(i)}}class QQ extends bn{constructor(){super(...arguments);Dt(this,"priority",130);Dt(this,"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"])}parse(n,r){return Sy(r==="u"?4:r.length,n)}set(n,r,a){return n.setFullYear(a,0,1),n.setHours(0,0,0,0),n}}class ZQ extends bn{constructor(){super(...arguments);Dt(this,"priority",120);Dt(this,"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"])}parse(n,r,a){switch(r){case"Q":case"QQ":return Mr(r.length,n);case"Qo":return a.ordinalNumber(n,{unit:"quarter"});case"QQQ":return a.quarter(n,{width:"abbreviated",context:"formatting"})||a.quarter(n,{width:"narrow",context:"formatting"});case"QQQQQ":return a.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return a.quarter(n,{width:"wide",context:"formatting"})||a.quarter(n,{width:"abbreviated",context:"formatting"})||a.quarter(n,{width:"narrow",context:"formatting"})}}validate(n,r){return r>=1&&r<=4}set(n,r,a){return n.setMonth((a-1)*3,1),n.setHours(0,0,0,0),n}}class eZ extends bn{constructor(){super(...arguments);Dt(this,"priority",120);Dt(this,"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"])}parse(n,r,a){switch(r){case"q":case"qq":return Mr(r.length,n);case"qo":return a.ordinalNumber(n,{unit:"quarter"});case"qqq":return a.quarter(n,{width:"abbreviated",context:"standalone"})||a.quarter(n,{width:"narrow",context:"standalone"});case"qqqqq":return a.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return a.quarter(n,{width:"wide",context:"standalone"})||a.quarter(n,{width:"abbreviated",context:"standalone"})||a.quarter(n,{width:"narrow",context:"standalone"})}}validate(n,r){return r>=1&&r<=4}set(n,r,a){return n.setMonth((a-1)*3,1),n.setHours(0,0,0,0),n}}class tZ extends bn{constructor(){super(...arguments);Dt(this,"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]);Dt(this,"priority",110)}parse(n,r,a){const i=o=>o-1;switch(r){case"M":return Wr(wr(zr.month,n),i);case"MM":return Wr(Mr(2,n),i);case"Mo":return Wr(a.ordinalNumber(n,{unit:"month"}),i);case"MMM":return a.month(n,{width:"abbreviated",context:"formatting"})||a.month(n,{width:"narrow",context:"formatting"});case"MMMMM":return a.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return a.month(n,{width:"wide",context:"formatting"})||a.month(n,{width:"abbreviated",context:"formatting"})||a.month(n,{width:"narrow",context:"formatting"})}}validate(n,r){return r>=0&&r<=11}set(n,r,a){return n.setMonth(a,1),n.setHours(0,0,0,0),n}}class nZ extends bn{constructor(){super(...arguments);Dt(this,"priority",110);Dt(this,"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"])}parse(n,r,a){const i=o=>o-1;switch(r){case"L":return Wr(wr(zr.month,n),i);case"LL":return Wr(Mr(2,n),i);case"Lo":return Wr(a.ordinalNumber(n,{unit:"month"}),i);case"LLL":return a.month(n,{width:"abbreviated",context:"standalone"})||a.month(n,{width:"narrow",context:"standalone"});case"LLLLL":return a.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return a.month(n,{width:"wide",context:"standalone"})||a.month(n,{width:"abbreviated",context:"standalone"})||a.month(n,{width:"narrow",context:"standalone"})}}validate(n,r){return r>=0&&r<=11}set(n,r,a){return n.setMonth(a,1),n.setHours(0,0,0,0),n}}function rZ(e,t,n){const r=kt(e),a=II(r,n)-t;return r.setDate(r.getDate()-a*7),r}class sZ extends bn{constructor(){super(...arguments);Dt(this,"priority",100);Dt(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"])}parse(n,r,a){switch(r){case"w":return wr(zr.week,n);case"wo":return a.ordinalNumber(n,{unit:"week"});default:return Mr(r.length,n)}}validate(n,r){return r>=1&&r<=53}set(n,r,a,i){return fo(rZ(n,a,i),i)}}function aZ(e,t){const n=kt(e),r=tC(n)-t;return n.setDate(n.getDate()-r*7),n}class iZ extends bn{constructor(){super(...arguments);Dt(this,"priority",100);Dt(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"])}parse(n,r,a){switch(r){case"I":return wr(zr.week,n);case"Io":return a.ordinalNumber(n,{unit:"week"});default:return Mr(r.length,n)}}validate(n,r){return r>=1&&r<=53}set(n,r,a){return Af(aZ(n,a))}}const oZ=[31,28,31,30,31,30,31,31,30,31,30,31],lZ=[31,29,31,30,31,30,31,31,30,31,30,31];class cZ extends bn{constructor(){super(...arguments);Dt(this,"priority",90);Dt(this,"subPriority",1);Dt(this,"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"])}parse(n,r,a){switch(r){case"d":return wr(zr.date,n);case"do":return a.ordinalNumber(n,{unit:"date"});default:return Mr(r.length,n)}}validate(n,r){const a=n.getFullYear(),i=qI(a),o=n.getMonth();return i?r>=1&&r<=lZ[o]:r>=1&&r<=oZ[o]}set(n,r,a){return n.setDate(a),n.setHours(0,0,0,0),n}}class dZ extends bn{constructor(){super(...arguments);Dt(this,"priority",90);Dt(this,"subpriority",1);Dt(this,"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"])}parse(n,r,a){switch(r){case"D":case"DD":return wr(zr.dayOfYear,n);case"Do":return a.ordinalNumber(n,{unit:"date"});default:return Mr(r.length,n)}}validate(n,r){const a=n.getFullYear();return qI(a)?r>=1&&r<=366:r>=1&&r<=365}set(n,r,a){return n.setMonth(0,a),n.setHours(0,0,0,0),n}}function sC(e,t,n){var h,f,p,y;const r=Zu(),a=(n==null?void 0:n.weekStartsOn)??((f=(h=n==null?void 0:n.locale)==null?void 0:h.options)==null?void 0:f.weekStartsOn)??r.weekStartsOn??((y=(p=r.locale)==null?void 0:p.options)==null?void 0:y.weekStartsOn)??0,i=kt(e),o=i.getDay(),c=(t%7+7)%7,d=7-a,u=t<0||t>6?t-(o+d)%7:(c+d)%7-(o+d)%7;return $a(i,u)}class uZ extends bn{constructor(){super(...arguments);Dt(this,"priority",90);Dt(this,"incompatibleTokens",["D","i","e","c","t","T"])}parse(n,r,a){switch(r){case"E":case"EE":case"EEE":return a.day(n,{width:"abbreviated",context:"formatting"})||a.day(n,{width:"short",context:"formatting"})||a.day(n,{width:"narrow",context:"formatting"});case"EEEEE":return a.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return a.day(n,{width:"short",context:"formatting"})||a.day(n,{width:"narrow",context:"formatting"});case"EEEE":default:return a.day(n,{width:"wide",context:"formatting"})||a.day(n,{width:"abbreviated",context:"formatting"})||a.day(n,{width:"short",context:"formatting"})||a.day(n,{width:"narrow",context:"formatting"})}}validate(n,r){return r>=0&&r<=6}set(n,r,a,i){return n=sC(n,a,i),n.setHours(0,0,0,0),n}}class hZ extends bn{constructor(){super(...arguments);Dt(this,"priority",90);Dt(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"])}parse(n,r,a,i){const o=l=>{const c=Math.floor((l-1)/7)*7;return(l+i.weekStartsOn+6)%7+c};switch(r){case"e":case"ee":return Wr(Mr(r.length,n),o);case"eo":return Wr(a.ordinalNumber(n,{unit:"day"}),o);case"eee":return a.day(n,{width:"abbreviated",context:"formatting"})||a.day(n,{width:"short",context:"formatting"})||a.day(n,{width:"narrow",context:"formatting"});case"eeeee":return a.day(n,{width:"narrow",context:"formatting"});case"eeeeee":return a.day(n,{width:"short",context:"formatting"})||a.day(n,{width:"narrow",context:"formatting"});case"eeee":default:return a.day(n,{width:"wide",context:"formatting"})||a.day(n,{width:"abbreviated",context:"formatting"})||a.day(n,{width:"short",context:"formatting"})||a.day(n,{width:"narrow",context:"formatting"})}}validate(n,r){return r>=0&&r<=6}set(n,r,a,i){return n=sC(n,a,i),n.setHours(0,0,0,0),n}}class fZ extends bn{constructor(){super(...arguments);Dt(this,"priority",90);Dt(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"])}parse(n,r,a,i){const o=l=>{const c=Math.floor((l-1)/7)*7;return(l+i.weekStartsOn+6)%7+c};switch(r){case"c":case"cc":return Wr(Mr(r.length,n),o);case"co":return Wr(a.ordinalNumber(n,{unit:"day"}),o);case"ccc":return a.day(n,{width:"abbreviated",context:"standalone"})||a.day(n,{width:"short",context:"standalone"})||a.day(n,{width:"narrow",context:"standalone"});case"ccccc":return a.day(n,{width:"narrow",context:"standalone"});case"cccccc":return a.day(n,{width:"short",context:"standalone"})||a.day(n,{width:"narrow",context:"standalone"});case"cccc":default:return a.day(n,{width:"wide",context:"standalone"})||a.day(n,{width:"abbreviated",context:"standalone"})||a.day(n,{width:"short",context:"standalone"})||a.day(n,{width:"narrow",context:"standalone"})}}validate(n,r){return r>=0&&r<=6}set(n,r,a,i){return n=sC(n,a,i),n.setHours(0,0,0,0),n}}function pZ(e,t){const n=kt(e),r=WQ(n),a=t-r;return $a(n,a)}class mZ extends bn{constructor(){super(...arguments);Dt(this,"priority",90);Dt(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"])}parse(n,r,a){const i=o=>o===0?7:o;switch(r){case"i":case"ii":return Mr(r.length,n);case"io":return a.ordinalNumber(n,{unit:"day"});case"iii":return Wr(a.day(n,{width:"abbreviated",context:"formatting"})||a.day(n,{width:"short",context:"formatting"})||a.day(n,{width:"narrow",context:"formatting"}),i);case"iiiii":return Wr(a.day(n,{width:"narrow",context:"formatting"}),i);case"iiiiii":return Wr(a.day(n,{width:"short",context:"formatting"})||a.day(n,{width:"narrow",context:"formatting"}),i);case"iiii":default:return Wr(a.day(n,{width:"wide",context:"formatting"})||a.day(n,{width:"abbreviated",context:"formatting"})||a.day(n,{width:"short",context:"formatting"})||a.day(n,{width:"narrow",context:"formatting"}),i)}}validate(n,r){return r>=1&&r<=7}set(n,r,a){return n=pZ(n,a),n.setHours(0,0,0,0),n}}class gZ extends bn{constructor(){super(...arguments);Dt(this,"priority",80);Dt(this,"incompatibleTokens",["b","B","H","k","t","T"])}parse(n,r,a){switch(r){case"a":case"aa":case"aaa":return a.dayPeriod(n,{width:"abbreviated",context:"formatting"})||a.dayPeriod(n,{width:"narrow",context:"formatting"});case"aaaaa":return a.dayPeriod(n,{width:"narrow",context:"formatting"});case"aaaa":default:return a.dayPeriod(n,{width:"wide",context:"formatting"})||a.dayPeriod(n,{width:"abbreviated",context:"formatting"})||a.dayPeriod(n,{width:"narrow",context:"formatting"})}}set(n,r,a){return n.setHours(rC(a),0,0,0),n}}class vZ extends bn{constructor(){super(...arguments);Dt(this,"priority",80);Dt(this,"incompatibleTokens",["a","B","H","k","t","T"])}parse(n,r,a){switch(r){case"b":case"bb":case"bbb":return a.dayPeriod(n,{width:"abbreviated",context:"formatting"})||a.dayPeriod(n,{width:"narrow",context:"formatting"});case"bbbbb":return a.dayPeriod(n,{width:"narrow",context:"formatting"});case"bbbb":default:return a.dayPeriod(n,{width:"wide",context:"formatting"})||a.dayPeriod(n,{width:"abbreviated",context:"formatting"})||a.dayPeriod(n,{width:"narrow",context:"formatting"})}}set(n,r,a){return n.setHours(rC(a),0,0,0),n}}class xZ extends bn{constructor(){super(...arguments);Dt(this,"priority",80);Dt(this,"incompatibleTokens",["a","b","t","T"])}parse(n,r,a){switch(r){case"B":case"BB":case"BBB":return a.dayPeriod(n,{width:"abbreviated",context:"formatting"})||a.dayPeriod(n,{width:"narrow",context:"formatting"});case"BBBBB":return a.dayPeriod(n,{width:"narrow",context:"formatting"});case"BBBB":default:return a.dayPeriod(n,{width:"wide",context:"formatting"})||a.dayPeriod(n,{width:"abbreviated",context:"formatting"})||a.dayPeriod(n,{width:"narrow",context:"formatting"})}}set(n,r,a){return n.setHours(rC(a),0,0,0),n}}class yZ extends bn{constructor(){super(...arguments);Dt(this,"priority",70);Dt(this,"incompatibleTokens",["H","K","k","t","T"])}parse(n,r,a){switch(r){case"h":return wr(zr.hour12h,n);case"ho":return a.ordinalNumber(n,{unit:"hour"});default:return Mr(r.length,n)}}validate(n,r){return r>=1&&r<=12}set(n,r,a){const i=n.getHours()>=12;return i&&a<12?n.setHours(a+12,0,0,0):!i&&a===12?n.setHours(0,0,0,0):n.setHours(a,0,0,0),n}}class bZ extends bn{constructor(){super(...arguments);Dt(this,"priority",70);Dt(this,"incompatibleTokens",["a","b","h","K","k","t","T"])}parse(n,r,a){switch(r){case"H":return wr(zr.hour23h,n);case"Ho":return a.ordinalNumber(n,{unit:"hour"});default:return Mr(r.length,n)}}validate(n,r){return r>=0&&r<=23}set(n,r,a){return n.setHours(a,0,0,0),n}}class wZ extends bn{constructor(){super(...arguments);Dt(this,"priority",70);Dt(this,"incompatibleTokens",["h","H","k","t","T"])}parse(n,r,a){switch(r){case"K":return wr(zr.hour11h,n);case"Ko":return a.ordinalNumber(n,{unit:"hour"});default:return Mr(r.length,n)}}validate(n,r){return r>=0&&r<=11}set(n,r,a){return n.getHours()>=12&&a<12?n.setHours(a+12,0,0,0):n.setHours(a,0,0,0),n}}class jZ extends bn{constructor(){super(...arguments);Dt(this,"priority",70);Dt(this,"incompatibleTokens",["a","b","h","H","K","t","T"])}parse(n,r,a){switch(r){case"k":return wr(zr.hour24h,n);case"ko":return a.ordinalNumber(n,{unit:"hour"});default:return Mr(r.length,n)}}validate(n,r){return r>=1&&r<=24}set(n,r,a){const i=a<=24?a%24:a;return n.setHours(i,0,0,0),n}}class NZ extends bn{constructor(){super(...arguments);Dt(this,"priority",60);Dt(this,"incompatibleTokens",["t","T"])}parse(n,r,a){switch(r){case"m":return wr(zr.minute,n);case"mo":return a.ordinalNumber(n,{unit:"minute"});default:return Mr(r.length,n)}}validate(n,r){return r>=0&&r<=59}set(n,r,a){return n.setMinutes(a,0,0),n}}class SZ extends bn{constructor(){super(...arguments);Dt(this,"priority",50);Dt(this,"incompatibleTokens",["t","T"])}parse(n,r,a){switch(r){case"s":return wr(zr.second,n);case"so":return a.ordinalNumber(n,{unit:"second"});default:return Mr(r.length,n)}}validate(n,r){return r>=0&&r<=59}set(n,r,a){return n.setSeconds(a,0),n}}class CZ extends bn{constructor(){super(...arguments);Dt(this,"priority",30);Dt(this,"incompatibleTokens",["t","T"])}parse(n,r){const a=i=>Math.trunc(i*Math.pow(10,-r.length+3));return Wr(Mr(r.length,n),a)}set(n,r,a){return n.setMilliseconds(a),n}}class PZ extends bn{constructor(){super(...arguments);Dt(this,"priority",10);Dt(this,"incompatibleTokens",["t","T","x"])}parse(n,r){switch(r){case"X":return Lo(Ro.basicOptionalMinutes,n);case"XX":return Lo(Ro.basic,n);case"XXXX":return Lo(Ro.basicOptionalSeconds,n);case"XXXXX":return Lo(Ro.extendedOptionalSeconds,n);case"XXX":default:return Lo(Ro.extended,n)}}set(n,r,a){return r.timestampIsSet?n:jn(n,n.getTime()-xy(n)-a)}}class DZ extends bn{constructor(){super(...arguments);Dt(this,"priority",10);Dt(this,"incompatibleTokens",["t","T","X"])}parse(n,r){switch(r){case"x":return Lo(Ro.basicOptionalMinutes,n);case"xx":return Lo(Ro.basic,n);case"xxxx":return Lo(Ro.basicOptionalSeconds,n);case"xxxxx":return Lo(Ro.extendedOptionalSeconds,n);case"xxx":default:return Lo(Ro.extended,n)}}set(n,r,a){return r.timestampIsSet?n:jn(n,n.getTime()-xy(n)-a)}}class kZ extends bn{constructor(){super(...arguments);Dt(this,"priority",40);Dt(this,"incompatibleTokens","*")}parse(n){return WI(n)}set(n,r,a){return[jn(n,a*1e3),{timestampIsSet:!0}]}}class EZ extends bn{constructor(){super(...arguments);Dt(this,"priority",20);Dt(this,"incompatibleTokens","*")}parse(n){return WI(n)}set(n,r,a){return[jn(n,a),{timestampIsSet:!0}]}}const TZ={G:new GQ,y:new JQ,Y:new KQ,R:new XQ,u:new QQ,Q:new ZQ,q:new eZ,M:new tZ,L:new nZ,w:new sZ,I:new iZ,d:new cZ,D:new dZ,E:new uZ,e:new hZ,c:new fZ,i:new mZ,a:new gZ,b:new vZ,B:new xZ,h:new yZ,H:new bZ,K:new wZ,k:new jZ,m:new NZ,s:new SZ,S:new CZ,X:new PZ,x:new DZ,t:new kZ,T:new EZ},AZ=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,_Z=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,MZ=/^'([^]*?)'?$/,RZ=/''/g,LZ=/\S/,IZ=/[a-zA-Z]/;function b0(e,t,n,r){var g,x,m,v,b,C,S,P;const a=zQ(),i=(r==null?void 0:r.locale)??a.locale??eC,o=(r==null?void 0:r.firstWeekContainsDate)??((x=(g=r==null?void 0:r.locale)==null?void 0:g.options)==null?void 0:x.firstWeekContainsDate)??a.firstWeekContainsDate??((v=(m=a.locale)==null?void 0:m.options)==null?void 0:v.firstWeekContainsDate)??1,l=(r==null?void 0:r.weekStartsOn)??((C=(b=r==null?void 0:r.locale)==null?void 0:b.options)==null?void 0:C.weekStartsOn)??a.weekStartsOn??((P=(S=a.locale)==null?void 0:S.options)==null?void 0:P.weekStartsOn)??0;if(t==="")return e===""?kt(n):jn(n,NaN);const c={firstWeekContainsDate:o,weekStartsOn:l,locale:i},d=[new YQ],u=t.match(_Z).map(D=>{const N=D[0];if(N in Ny){const M=Ny[N];return M(D,i.formatLong)}return D}).join("").match(AZ),h=[];for(let D of u){!(r!=null&&r.useAdditionalWeekYearTokens)&&$I(D)&&uN(D,t,e),!(r!=null&&r.useAdditionalDayOfYearTokens)&&FI(D)&&uN(D,t,e);const N=D[0],M=TZ[N];if(M){const{incompatibleTokens:L}=M;if(Array.isArray(L)){const E=h.find(A=>L.includes(A.token)||A.token===N);if(E)throw new RangeError(`The format string mustn't contain \`${E.fullToken}\` and \`${D}\` at the same time`)}else if(M.incompatibleTokens==="*"&&h.length>0)throw new RangeError(`The format string mustn't contain \`${D}\` and any other token at the same time`);h.push({token:N,fullToken:D});const T=M.run(e,D,i.match,c);if(!T)return jn(n,NaN);d.push(T.setter),e=T.rest}else{if(N.match(IZ))throw new RangeError("Format string contains an unescaped latin alphabet character `"+N+"`");if(D==="''"?D="'":N==="'"&&(D=OZ(D)),e.indexOf(D)===0)e=e.slice(D.length);else return jn(n,NaN)}}if(e.length>0&&LZ.test(e))return jn(n,NaN);const f=d.map(D=>D.priority).sort((D,N)=>N-D).filter((D,N,M)=>M.indexOf(D)===N).map(D=>d.filter(N=>N.priority===D).sort((N,M)=>M.subPriority-N.subPriority)).map(D=>D[0]);let p=kt(n);if(isNaN(p.getTime()))return jn(n,NaN);const y={};for(const D of f){if(!D.validate(p,c))return jn(n,NaN);const N=D.set(p,y,c);Array.isArray(N)?(p=N[0],Object.assign(y,N[1])):p=N}return jn(n,p)}function OZ(e){return e.match(MZ)[1].replace(RZ,"'")}function FZ(e,t){const n=kt(e),r=kt(t);return n.getFullYear()===r.getFullYear()&&n.getMonth()===r.getMonth()}function $Z(e,t){const n=dN(e),r=dN(t);return+n==+r}function BZ(e,t){const n=kt(e),r=kt(t);return n.getFullYear()===r.getFullYear()}function aE(e){return _f(e,UX(e))}function Mf(e,t){const n=+kt(e),[r,a]=[+kt(t.start),+kt(t.end)].sort((i,o)=>i-o);return n>=r&&n<=a}function zZ(e,t){return $a(e,-t)}function fN(e,t){const n=(t==null?void 0:t.additionalDigits)??2,r=VZ(e);let a;if(r.date){const c=UZ(r.date,n);a=YZ(c.restDateString,c.year)}if(!a||isNaN(a.getTime()))return new Date(NaN);const i=a.getTime();let o=0,l;if(r.time&&(o=GZ(r.time),isNaN(o)))return new Date(NaN);if(r.timezone){if(l=JZ(r.timezone),isNaN(l))return new Date(NaN)}else{const c=new Date(i+o),d=new Date(0);return d.setFullYear(c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate()),d.setHours(c.getUTCHours(),c.getUTCMinutes(),c.getUTCSeconds(),c.getUTCMilliseconds()),d}return new Date(i+o+l)}const _x={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},WZ=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,HZ=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,qZ=/^([+-])(\d{2})(?::?(\d{2}))?$/;function VZ(e){const t={},n=e.split(_x.dateTimeDelimiter);let r;if(n.length>2)return t;if(/:/.test(n[0])?r=n[0]:(t.date=n[0],r=n[1],_x.timeZoneDelimiter.test(t.date)&&(t.date=e.split(_x.timeZoneDelimiter)[0],r=e.substr(t.date.length,e.length))),r){const a=_x.timezone.exec(r);a?(t.time=r.replace(a[1],""),t.timezone=a[1]):t.time=r}return t}function UZ(e,t){const n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),r=e.match(n);if(!r)return{year:NaN,restDateString:""};const a=r[1]?parseInt(r[1]):null,i=r[2]?parseInt(r[2]):null;return{year:i===null?a:i*100,restDateString:e.slice((r[1]||r[2]).length)}}function YZ(e,t){if(t===null)return new Date(NaN);const n=e.match(WZ);if(!n)return new Date(NaN);const r=!!n[4],a=nm(n[1]),i=nm(n[2])-1,o=nm(n[3]),l=nm(n[4]),c=nm(n[5])-1;if(r)return eee(t,l,c)?KZ(t,l,c):new Date(NaN);{const d=new Date(0);return!QZ(t,i,o)||!ZZ(t,a)?new Date(NaN):(d.setUTCFullYear(t,i,Math.max(a,o)),d)}}function nm(e){return e?parseInt(e):1}function GZ(e){const t=e.match(HZ);if(!t)return NaN;const n=a2(t[1]),r=a2(t[2]),a=a2(t[3]);return tee(n,r,a)?n*T1+r*E1+a*1e3:NaN}function a2(e){return e&&parseFloat(e.replace(",","."))||0}function JZ(e){if(e==="Z")return 0;const t=e.match(qZ);if(!t)return 0;const n=t[1]==="+"?-1:1,r=parseInt(t[2]),a=t[3]&&parseInt(t[3])||0;return nee(r,a)?n*(r*T1+a*E1):NaN}function KZ(e,t,n){const r=new Date(0);r.setUTCFullYear(e,0,4);const a=r.getUTCDay()||7,i=(t-1)*7+n+1-a;return r.setUTCDate(r.getUTCDate()+i),r}const XZ=[31,null,31,30,31,30,31,31,30,31,30,31];function VI(e){return e%400===0||e%4===0&&e%100!==0}function QZ(e,t,n){return t>=0&&t<=11&&n>=1&&n<=(XZ[t]||(VI(e)?29:28))}function ZZ(e,t){return t>=1&&t<=(VI(e)?366:365)}function eee(e,t,n){return t>=1&&t<=53&&n>=0&&n<=6}function tee(e,t,n){return e===24?t===0&&n===0:n>=0&&n<60&&t>=0&&t<60&&e>=0&&e<25}function nee(e,t){return t>=0&&t<=59}function ha(e,t){const n=kt(e),r=n.getFullYear(),a=n.getDate(),i=jn(e,0);i.setFullYear(r,t,15),i.setHours(0,0,0,0);const o=BQ(i);return n.setMonth(t,Math.min(a,o)),n}function ree(e,t){let n=kt(e);return isNaN(+n)?jn(e,NaN):(t.year!=null&&n.setFullYear(t.year),t.month!=null&&(n=ha(n,t.month)),t.date!=null&&n.setDate(t.date),t.hours!=null&&n.setHours(t.hours),t.minutes!=null&&n.setMinutes(t.minutes),t.seconds!=null&&n.setSeconds(t.seconds),t.milliseconds!=null&&n.setMilliseconds(t.milliseconds),n)}function w0(e,t){const n=kt(e);return n.setHours(t),n}function j0(e,t){const n=kt(e);return n.setMinutes(t),n}function Hh(e,t){const n=kt(e),r=Math.trunc(n.getMonth()/3)+1,a=t-r;return ha(n,n.getMonth()+a*3)}function N0(e,t){const n=kt(e);return n.setSeconds(t),n}function Ao(e,t){const n=kt(e);return isNaN(+n)?jn(e,NaN):(n.setFullYear(t),n)}function Rf(e,t){return ho(e,-t)}function UI(e,t){return ZS(e,-t)}function iE(e,t){return yy(e,-t)}function Lf(e,t){return Bl(e,-t)}const YI=({jobId:e,employees:t,onSubmit:n,onCancel:r,onSaveAsTemplate:a,initialData:i})=>{const[o,l]=j.useState(""),[c,d]=j.useState(""),[u,h]=j.useState(""),[f,p]=j.useState([{id:1,description:"",completed:!1}]),[y,g]=j.useState(!1),x=t.filter(S=>S.isActive);Q.useEffect(()=>{i&&(l(i.name||""),d(i.assignedTo||""),h(i.description||""),p(i.tasks&&i.tasks.length>0?i.tasks.map(S=>({id:S.id||Date.now()+Math.random(),description:S.description||"",completed:S.completed||!1})):[{id:1,description:"",completed:!1}]))},[i]);const m=()=>{const S={id:Date.now(),description:"",completed:!1};p([...f,S])},v=S=>{f.length>1&&p(f.filter(P=>P.id!==S))},b=(S,P,D)=>{p(f.map(N=>N.id===S?{...N,[P]:D}:N))},C=async(S=!1)=>{if(!o.trim()){pe({title:"Missing Information",description:"Please enter a checklist name.",variant:"destructive"});return}if(!c){pe({title:"Missing Information",description:"Please assign the checklist to someone.",variant:"destructive"});return}const P=f.filter(D=>D.description.trim());if(P.length===0){pe({title:"Missing Information",description:"Please add at least one task to the checklist.",variant:"destructive"});return}g(!0);try{const D={id:i?i.id:Date.now().toString(),name:o.trim(),description:u.trim(),assignedTo:c,tasks:P,createdAt:i?i.createdAt:new Date().toISOString(),completed:i?i.completed:!1,completedBy:i?i.completedBy:null,completedAt:i?i.completedAt:null,isTemplate:S};S?(await a(D),pe({title:"Template Saved",description:"Checklist template has been saved successfully."})):(await n(e,D),pe({title:i?"Checklist Updated":"Checklist Created",description:i?"Checklist has been updated successfully.":"Checklist has been created successfully."}))}catch{pe({title:"Error",description:"Failed to save checklist. Please try again.",variant:"destructive"})}finally{g(!1)}};return s.jsxs("div",{className:"space-y-6",children:[s.jsx(Pt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:s.jsx(Te,{className:"border-0 bg-gradient-to-r from-brandPrimary to-brandSecondary text-white shadow-2xl",children:s.jsx(Xe,{children:s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"p-3 bg-white/20 rounded-xl",children:s.jsx(mu,{className:"h-8 w-8"})}),s.jsxs("div",{children:[s.jsx(Qe,{className:"text-3xl font-bold",children:i?"Edit Checklist":"Create Checklist"}),s.jsx("p",{className:"text-white/80 mt-1",children:i?"Update tasks and assignments":"Add tasks and assign responsibilities"})]})]})})})}),s.jsxs(Te,{className:"shadow-lg",children:[s.jsx(Xe,{children:s.jsxs(Qe,{className:"flex items-center space-x-2",children:[s.jsx(mu,{className:"h-5 w-5"}),s.jsx("span",{children:"Checklist Details"})]})}),s.jsxs(Me,{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"checklistName",children:"Checklist Name *"}),s.jsx($e,{id:"checklistName",value:o,onChange:S=>l(S.target.value),placeholder:"Enter checklist name",className:"w-full"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"assignedTo",children:"Assigned To *"}),s.jsxs(st,{value:c,onValueChange:d,children:[s.jsx(nt,{children:s.jsx(at,{placeholder:"Select employee"})}),s.jsx(rt,{children:x.map(S=>s.jsx(xe,{value:S.id,children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(ss,{className:"h-4 w-4"}),s.jsxs("span",{children:[S.firstName," ",S.lastName]})]})},S.id))})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"description",children:"Description"}),s.jsx(_n,{id:"description",value:u,onChange:S=>h(S.target.value),placeholder:"Enter checklist description (optional)",rows:3})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(de,{className:"text-lg font-semibold",children:"Tasks"}),s.jsxs(se,{type:"button",onClick:m,variant:"outline",size:"sm",className:"flex items-center space-x-2",children:[s.jsx(un,{className:"h-4 w-4"}),s.jsx("span",{children:"Add Task"})]})]}),s.jsx("div",{className:"space-y-3",children:f.map((S,P)=>s.jsxs("div",{className:"flex items-center space-x-3 p-3 border rounded-lg",children:[s.jsx("div",{className:"flex-shrink-0 w-6 h-6 bg-gray-100 rounded-full flex items-center justify-center text-sm font-medium text-gray-600",children:P+1}),s.jsx($e,{value:S.description,onChange:D=>b(S.id,"description",D.target.value),placeholder:`Task ${P+1}`,className:"flex-1"}),f.length>1&&s.jsx(se,{type:"button",onClick:()=>v(S.id),variant:"ghost",size:"sm",className:"text-red-500 hover:text-red-700",children:s.jsx(rn,{className:"h-4 w-4"})})]},S.id))})]})]}),s.jsxs(C1,{className:"flex justify-between",children:[s.jsxs("div",{className:"flex space-x-2",children:[s.jsxs(se,{onClick:()=>C(!1),disabled:y,className:"bg-gradient-to-r from-brandPrimary to-brandSecondary hover:from-brandPrimary-600 hover:to-brandSecondary-600 text-white",children:[s.jsx(Qn,{className:"h-4 w-4 mr-2"}),i?"Update Checklist":"Save Checklist"]}),s.jsxs(se,{onClick:()=>C(!0),disabled:y,variant:"outline",className:"border-brandPrimary text-brandPrimary hover:bg-brandPrimary hover:text-white",children:[s.jsx(yS,{className:"h-4 w-4 mr-2"}),"Save as Template"]})]}),s.jsx(se,{onClick:r,variant:"ghost",disabled:y,children:"Cancel"})]})]})]})},see=({jobId:e,checklists:t,employees:n,onCreateChecklist:r,onUpdateChecklist:a,onDeleteChecklist:i,onCompleteChecklist:o,onSaveChecklistTemplate:l})=>{const[c,d]=j.useState(null),u=g=>{const x=n.find(m=>m.id===g);return x?`${x.firstName} ${x.lastName}`:"Unknown"},h=g=>{if(!g.tasks||g.tasks.length===0)return 0;const x=g.tasks.filter(m=>m.completed).length;return Math.round(x/g.tasks.length*100)},f=(g,x)=>{const m=t.find(C=>C.id===g);if(!m)return;const v=m.tasks.map(C=>C.id===x?{...C,completed:!C.completed}:C),b={...m,tasks:v};a(e,g,b)},p=g=>{const x=t.find(v=>v.id===g);!x||!x.tasks.every(v=>v.completed)||o(e,g)},y=g=>{i(e,g)};return t.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(mu,{className:"h-16 w-16 mx-auto text-gray-400 mb-4"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Checklists"}),s.jsx("p",{className:"text-gray-600",children:'Use the "Create Checklist" button above to add your first checklist.'})]}):c?s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(mu,{className:"h-6 w-6 text-brandPrimary"}),s.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Edit Checklist"})]}),s.jsx(se,{onClick:()=>d(null),variant:"outline",className:"text-gray-600 hover:text-gray-800",children:"Cancel"})]}),s.jsx(YI,{jobId:e,employees:n,initialData:c,onSubmit:(g,x)=>{a(g,c.id,x),d(null)},onCancel:()=>d(null),onSaveAsTemplate:g=>{l(g),d(null)}})]}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(mu,{className:"h-6 w-6 text-brandPrimary"}),s.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Checklists"}),s.jsx(ht,{variant:"secondary",className:"bg-blue-100 text-blue-800",children:t.length})]}),s.jsx("div",{className:"grid gap-6",children:t.map(g=>{const x=h(g),m=g.completed,v=g.tasks.every(b=>b.completed);return s.jsx(Pt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"group",children:s.jsxs(Te,{className:`shadow-lg transition-all duration-200 hover:shadow-xl ${m?"border-green-200 bg-green-50":"border-gray-200"}`,children:[s.jsxs(Xe,{children:[s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[s.jsx(Qe,{className:"text-xl font-semibold text-gray-900",children:g.name}),m&&s.jsxs(ht,{className:"bg-green-100 text-green-800",children:[s.jsx(Br,{className:"h-3 w-3 mr-1"}),"Completed"]}),g.isTemplate&&s.jsxs(ht,{variant:"outline",className:"border-blue-300 text-blue-700",children:[s.jsx(tn,{className:"h-3 w-3 mr-1"}),"Template"]})]}),g.description&&s.jsx("p",{className:"text-gray-600 mb-3",children:g.description}),s.jsxs("div",{className:"flex items-center space-x-6 text-sm text-gray-500",children:[s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(ss,{className:"h-4 w-4"}),s.jsxs("span",{children:["Assigned to: ",u(g.assignedTo)]})]}),s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(An,{className:"h-4 w-4"}),s.jsxs("span",{children:["Created: ",Fi(new Date(g.createdAt),"MMM dd, yyyy")]})]}),g.completedAt&&s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(Br,{className:"h-4 w-4"}),s.jsxs("span",{children:["Completed: ",Fi(new Date(g.completedAt),"MMM dd, yyyy")]})]})]})]}),s.jsx("div",{className:"flex items-center space-x-2 opacity-0 group-hover:opacity-100 transition-opacity",children:!m&&s.jsxs(s.Fragment,{children:[s.jsx(se,{onClick:()=>d(g),variant:"ghost",size:"sm",className:"text-blue-600 hover:text-blue-800",children:s.jsx(Ai,{className:"h-4 w-4"})}),s.jsxs(yr,{children:[s.jsx(br,{asChild:!0,children:s.jsx(se,{variant:"ghost",size:"sm",className:"text-red-600 hover:text-red-800",children:s.jsx(Kt,{className:"h-4 w-4"})})}),s.jsxs(er,{children:[s.jsxs(tr,{children:[s.jsx(rr,{children:"Delete Checklist"}),s.jsxs(sr,{children:['Are you sure you want to delete "',g.name,'"? This action cannot be undone.']})]}),s.jsxs(nr,{children:[s.jsx(ir,{children:"Cancel"}),s.jsx(ar,{onClick:()=>y(g.id),className:"bg-red-600 hover:bg-red-700",children:"Delete"})]})]})]})]})})]}),s.jsxs("div",{className:"mt-4",children:[s.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-600 mb-1",children:[s.jsx("span",{children:"Progress"}),s.jsxs("span",{children:[x,"%"]})]}),s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:s.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${m?"bg-green-500":"bg-brandPrimary"}`,style:{width:`${x}%`}})})]})]}),s.jsxs(Me,{children:[s.jsx("div",{className:"space-y-3",children:g.tasks.map((b,C)=>s.jsxs("div",{className:`flex items-center space-x-3 p-3 rounded-lg border transition-colors ${b.completed?"bg-green-50 border-green-200":"bg-gray-50 border-gray-200"}`,children:[s.jsx(se,{onClick:()=>f(g.id,b.id),variant:"ghost",size:"sm",className:"p-0 h-auto",disabled:m,children:b.completed?s.jsx(Br,{className:"h-5 w-5 text-green-600"}):s.jsx(OV,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"})}),s.jsx("span",{className:`flex-1 text-sm ${b.completed?"line-through text-gray-500":"text-gray-900"}`,children:b.description})]},b.id))}),!m&&v&&s.jsx("div",{className:"mt-6 pt-4 border-t border-gray-200",children:s.jsxs(se,{onClick:()=>p(g.id),className:"w-full bg-green-600 hover:bg-green-700 text-white",children:[s.jsx(RV,{className:"h-4 w-4 mr-2"}),"Complete Checklist"]})})]})]})},g.id)})})]})},aee=({templates:e,employees:t,onUseTemplate:n,onDeleteTemplate:r})=>{j.useState(null);const a=l=>{const c=t.find(d=>d.id===l);return c?`${c.firstName} ${c.lastName}`:"Unknown"},i=l=>{const c={...l,id:Date.now().toString(),createdAt:new Date().toISOString(),completed:!1,completedBy:null,completedAt:null,isTemplate:!1};n(c)},o=l=>{r(l)};return e.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(tn,{className:"h-16 w-16 mx-auto text-gray-400 mb-4"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Templates"}),s.jsx("p",{className:"text-gray-600",children:"Save checklists as templates to reuse them across different jobs."})]}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(tn,{className:"h-6 w-6 text-brandPrimary"}),s.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Checklist Templates"}),s.jsx(ht,{variant:"secondary",className:"bg-blue-100 text-blue-800",children:e.length})]}),s.jsx("div",{className:"grid gap-6",children:e.map(l=>s.jsx(Pt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"group",children:s.jsxs(Te,{className:"shadow-lg transition-all duration-200 hover:shadow-xl border-blue-200",children:[s.jsx(Xe,{children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[s.jsx(Qe,{className:"text-xl font-semibold text-gray-900",children:l.name}),s.jsxs(ht,{variant:"outline",className:"border-blue-300 text-blue-700",children:[s.jsx(tn,{className:"h-3 w-3 mr-1"}),"Template"]})]}),l.description&&s.jsx("p",{className:"text-gray-600 mb-3",children:l.description}),s.jsxs("div",{className:"flex items-center space-x-6 text-sm text-gray-500",children:[s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(ss,{className:"h-4 w-4"}),s.jsxs("span",{children:["Assigned to: ",a(l.assignedTo)]})]}),s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(An,{className:"h-4 w-4"}),s.jsxs("span",{children:["Created: ",Fi(new Date(l.createdAt),"MMM dd, yyyy")]})]}),s.jsx("div",{className:"flex items-center space-x-1",children:s.jsxs("span",{children:["Tasks: ",l.tasks.length]})})]})]}),s.jsxs("div",{className:"flex items-center space-x-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[s.jsxs(se,{onClick:()=>i(l),variant:"ghost",size:"sm",className:"text-blue-600 hover:text-blue-800",children:[s.jsx(yS,{className:"h-4 w-4 mr-1"}),"Use Template"]}),s.jsxs(yr,{children:[s.jsx(br,{asChild:!0,children:s.jsx(se,{variant:"ghost",size:"sm",className:"text-red-600 hover:text-red-800",children:s.jsx(Kt,{className:"h-4 w-4"})})}),s.jsxs(er,{children:[s.jsxs(tr,{children:[s.jsx(rr,{children:"Delete Template"}),s.jsxs(sr,{children:['Are you sure you want to delete the template "',l.name,'"? This action cannot be undone.']})]}),s.jsxs(nr,{children:[s.jsx(ir,{children:"Cancel"}),s.jsx(ar,{onClick:()=>o(l.id),className:"bg-red-600 hover:bg-red-700",children:"Delete"})]})]})]})]})]})}),s.jsx(Me,{children:s.jsxs("div",{className:"space-y-2",children:[s.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Template Tasks:"}),l.tasks.map((c,d)=>s.jsxs("div",{className:"flex items-center space-x-3 p-2 rounded-lg bg-gray-50",children:[s.jsx("div",{className:"flex-shrink-0 w-5 h-5 bg-gray-200 rounded-full flex items-center justify-center text-xs font-medium text-gray-600",children:d+1}),s.jsx("span",{className:"text-sm text-gray-700",children:c.description})]},c.id))]})})]})},l.id))})]})},iee=({jobId:e,documents:t=[],onUploadDocument:n,onDeleteDocument:r,onUpdateDocument:a})=>{const[i,o]=j.useState(""),[l,c]=j.useState("all"),[d,u]=j.useState(!1),[h,f]=j.useState(0),[p,y]=j.useState(null),[g,x]=j.useState(null),m=[{id:"blueprints",name:"Blueprints & Plans",icon:tn,color:"bg-blue-100 text-blue-800"},{id:"photos",name:"Site Photos",icon:Hj,color:"bg-green-100 text-green-800"},{id:"contracts",name:"Contracts & Legal",icon:Wh,color:"bg-purple-100 text-purple-800"},{id:"specifications",name:"Specifications",icon:tn,color:"bg-orange-100 text-orange-800"},{id:"invoices",name:"Invoices & Receipts",icon:Wh,color:"bg-red-100 text-red-800"},{id:"other",name:"Other",icon:Wh,color:"bg-gray-100 text-gray-800"}],v=E=>{const A=m.find(O=>O.id===E);return A?A.icon:Wh},b=E=>{const A=m.find(O=>O.id===E);return A?A.color:"bg-gray-100 text-gray-800"},C=E=>{const A=m.find(O=>O.id===E);return A?A.name:"Other"},S=E=>E.startsWith("image/")?Hj:E==="application/pdf"?tn:Wh,P=E=>{if(E===0)return"0 Bytes";const A=1024,O=["Bytes","KB","MB","GB"],W=Math.floor(Math.log(E)/Math.log(A));return parseFloat((E/Math.pow(A,W)).toFixed(2))+" "+O[W]},D=j.useCallback(E=>{const A=E.target.files[0];A&&y(A)},[]),N=async E=>{if(!p)return;u(!0),f(0);const A=setInterval(()=>{f(O=>O>=90?(clearInterval(A),90):O+10)},100);try{const O={id:Date.now().toString(),name:p.name,type:p.type,size:p.size,category:E,uploadedAt:new Date().toISOString(),jobId:e,url:URL.createObjectURL(p),tags:[]};await new Promise(W=>setTimeout(W,1500)),n&&n(e,O),f(100),setTimeout(()=>{u(!1),f(0),y(null)},500)}catch(O){console.error("Upload failed:",O),u(!1),f(0)}},M=E=>{r&&r(e,E)},T=t.filter(E=>{const A=E.name.toLowerCase().includes(i.toLowerCase()),O=l==="all"||E.category===l;return A&&O}).reduce((E,A)=>{const O=A.category;return E[O]||(E[O]=[]),E[O].push(A),E},{});return s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(FV,{className:"h-6 w-6 text-brandPrimary"}),s.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Job Documents"}),s.jsxs(ht,{variant:"secondary",className:"bg-blue-100 text-blue-800",children:[t.length," files"]})]})}),s.jsx(Te,{className:"border-2 border-dashed border-gray-300 bg-gray-50",children:s.jsx(Me,{className:"p-6",children:s.jsxs("div",{className:"text-center",children:[s.jsx(Gl,{className:"h-12 w-12 mx-auto text-gray-400 mb-4"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Upload Documents"}),s.jsx("p",{className:"text-gray-600 mb-4",children:"Drag and drop files here or click to browse"}),p?s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between p-3 bg-white rounded-lg border",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[Q.createElement(S(p.type),{className:"h-5 w-5 text-gray-500"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-900",children:p.name}),s.jsx("p",{className:"text-sm text-gray-500",children:P(p.size)})]})]}),s.jsx(se,{variant:"ghost",size:"sm",onClick:()=>y(null),className:"text-gray-500 hover:text-gray-700",children:s.jsx(rn,{className:"h-4 w-4"})})]}),s.jsx("div",{className:"flex items-center space-x-2",children:s.jsxs(st,{onValueChange:E=>N(E),children:[s.jsx(nt,{className:"w-48",children:s.jsx(at,{placeholder:"Select category"})}),s.jsx(rt,{children:m.map(E=>s.jsx(xe,{value:E.id,children:s.jsxs("div",{className:"flex items-center space-x-2",children:[Q.createElement(E.icon,{className:"h-4 w-4"}),s.jsx("span",{children:E.name})]})},E.id))})]})}),d&&s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:s.jsx("div",{className:"bg-brandPrimary h-2 rounded-full transition-all duration-300",style:{width:`${h}%`}})})]}):s.jsxs("div",{className:"space-y-4",children:[s.jsx("input",{type:"file",onChange:D,className:"hidden",id:"file-upload",accept:".pdf,.jpg,.jpeg,.png,.gif,.doc,.docx,.xls,.xlsx,.txt,.cad,.dwg"}),s.jsx("label",{htmlFor:"file-upload",className:"cursor-pointer",children:s.jsxs(se,{className:"bg-brandPrimary hover:bg-brandPrimary/90 text-white",type:"button",children:[s.jsx(Gl,{className:"h-4 w-4 mr-2"}),"Choose File"]})})]})]})})}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx(p1,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),s.jsx($e,{placeholder:"Search documents...",value:i,onChange:E=>o(E.target.value),className:"pl-10"})]}),s.jsxs(st,{value:l,onValueChange:c,children:[s.jsx(nt,{className:"w-48",children:s.jsx(at,{placeholder:"Filter by category"})}),s.jsxs(rt,{children:[s.jsx(xe,{value:"all",children:"All Categories"}),m.map(E=>s.jsx(xe,{value:E.id,children:E.name},E.id))]})]})]}),Object.keys(T).length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(tn,{className:"h-16 w-16 mx-auto text-gray-400 mb-4"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Documents"}),s.jsx("p",{className:"text-gray-600",children:"Upload your first document to get started."})]}):s.jsx("div",{className:"space-y-6",children:Object.entries(T).map(([E,A])=>s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[Q.createElement(v(E),{className:"h-5 w-5 text-gray-600"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:C(E)}),s.jsx(ht,{variant:"secondary",className:b(E),children:A.length})]}),s.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:A.map(O=>s.jsx(Pt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"group",children:s.jsx(Te,{className:"hover:shadow-lg transition-all duration-200 cursor-pointer",children:s.jsxs(Me,{className:"p-4",children:[s.jsxs("div",{className:"flex items-start justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[Q.createElement(S(O.type),{className:"h-5 w-5 text-gray-500"}),s.jsx(ht,{variant:"outline",className:b(O.category),children:C(O.category)})]}),s.jsxs("div",{className:"flex items-center space-x-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[s.jsx(se,{variant:"ghost",size:"sm",onClick:()=>x(O),className:"h-8 w-8 p-0",children:s.jsx(Jg,{className:"h-4 w-4"})}),s.jsx(se,{variant:"ghost",size:"sm",onClick:()=>window.open(O.url,"_blank"),className:"h-8 w-8 p-0",children:s.jsx(Ri,{className:"h-4 w-4"})}),s.jsxs(yr,{children:[s.jsx(br,{asChild:!0,children:s.jsx(se,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 text-red-500 hover:text-red-700",children:s.jsx(Kt,{className:"h-4 w-4"})})}),s.jsxs(er,{children:[s.jsxs(tr,{children:[s.jsx(rr,{children:"Delete Document"}),s.jsxs(sr,{children:['Are you sure you want to delete "',O.name,'"? This action cannot be undone.']})]}),s.jsxs(nr,{children:[s.jsx(ir,{children:"Cancel"}),s.jsx(ar,{onClick:()=>M(O.id),className:"bg-red-600 hover:bg-red-700",children:"Delete"})]})]})]})]})]}),s.jsx("h4",{className:"font-medium text-gray-900 mb-2 truncate",children:O.name}),s.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500",children:[s.jsx("span",{children:P(O.size)}),s.jsx("span",{children:Fi(new Date(O.uploadedAt),"MMM dd, yyyy")})]})]})})},O.id))})]},E))}),s.jsx(Es,{children:g&&s.jsx(Pt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:()=>x(null),children:s.jsxs(Pt.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white rounded-lg max-w-4xl max-h-[90vh] overflow-hidden",onClick:E=>E.stopPropagation(),children:[s.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[Q.createElement(S(g.type),{className:"h-5 w-5 text-gray-500"}),s.jsx("h3",{className:"font-semibold text-gray-900",children:g.name})]}),s.jsx(se,{variant:"ghost",size:"sm",onClick:()=>x(null),children:s.jsx(rn,{className:"h-4 w-4"})})]}),s.jsx("div",{className:"p-4 max-h-[70vh] overflow-auto",children:g.type.startsWith("image/")?s.jsx("img",{src:g.url,alt:g.name,className:"max-w-full h-auto rounded-lg"}):s.jsxs("div",{className:"text-center py-12",children:[s.jsx(tn,{className:"h-16 w-16 mx-auto text-gray-400 mb-4"}),s.jsx("p",{className:"text-gray-600",children:"Preview not available for this file type."}),s.jsxs(se,{onClick:()=>window.open(g.url,"_blank"),className:"mt-4",children:[s.jsx(Ri,{className:"h-4 w-4 mr-2"}),"Download to View"]})]})})]})})})]})},oee=({jobId:e,logs:t=[],employees:n=[],onAddLog:r,onUpdateLog:a,onDeleteLog:i,onAddAttachment:o,onRemoveAttachment:l})=>{const[c,d]=j.useState(!1),[u,h]=j.useState(null),[f,p]=j.useState(new Set),[y,g]=j.useState({date:new Date().toISOString().split("T")[0],authorId:"",notes:""}),[x,m]=j.useState({}),v=j.useRef(null),{toast:b}=S1();j.useEffect(()=>()=>{try{t.forEach(W=>{(W.attachments||[]).forEach(z=>{z.previewUrl&&URL.revokeObjectURL(z.previewUrl)})})}catch(W){console.error("Error cleaning up preview URLs:",W)}},[t]);const C=[...t].sort((W,z)=>new Date(z.date)-new Date(W.date)),S=async()=>{if(!y.authorId||!y.notes.trim()){b({title:"Missing Information",description:"Please fill in all required fields.",variant:"destructive"});return}try{await r(e,y),g({date:new Date().toISOString().split("T")[0],authorId:"",notes:""}),d(!1),b({title:"Log Entry Added! 📝",description:"Daily log entry has been successfully added."})}catch{b({title:"Error",description:"Failed to add log entry. Please try again.",variant:"destructive"})}},P=async W=>{var z;if(!x.authorId||!((z=x.notes)!=null&&z.trim())){b({title:"Missing Information",description:"Please fill in all required fields.",variant:"destructive"});return}try{await a(e,W,x),h(null),m({}),b({title:"Log Entry Updated! ✏️",description:"Daily log entry has been successfully updated."})}catch{b({title:"Error",description:"Failed to update log entry. Please try again.",variant:"destructive"})}},D=async W=>{try{await i(e,W),b({title:"Log Entry Deleted! 🗑️",description:"Daily log entry has been successfully deleted."})}catch{b({title:"Error",description:"Failed to delete log entry. Please try again.",variant:"destructive"})}},N=async(W,z)=>{const F=Array.from(W.target.files);if(F.length!==0)try{for(const V of F){if(V.size>10*1024*1024){b({title:"File Too Large",description:`${V.name} is larger than 10MB. Please choose a smaller file.`,variant:"destructive"});continue}let B=null;V.type.startsWith("image/")&&(B=URL.createObjectURL(V));const Y={name:V.name,type:V.type,size:V.size,file:V,previewUrl:B};await o(e,z,Y)}b({title:"Attachments Uploaded! 📎",description:`Successfully uploaded ${F.length} attachment(s).`}),v.current&&(v.current.value="")}catch{b({title:"Upload Failed",description:"There was an error uploading the attachments. Please try again.",variant:"destructive"})}},M=W=>{p(z=>{const F=new Set(z);return F.has(W)?F.delete(W):F.add(W),F})},L=W=>{h(W.id),m({date:W.date,authorId:W.authorId,notes:W.notes})},T=()=>{h(null),m({})},E=W=>{const z=n.find(F=>F.id===W);return z?`${z.firstName} ${z.lastName}`:"Unknown Author"},A=W=>new Date(W).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),O=W=>{if(W===0)return"0 Bytes";const z=1024,F=["Bytes","KB","MB","GB"],V=Math.floor(Math.log(W)/Math.log(z));return parseFloat((W/Math.pow(z,V)).toFixed(2))+" "+F[V]};return e?s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Daily Log Entries"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Track daily activities, progress, and notes for this job"})]}),s.jsxs(se,{onClick:()=>d(!0),className:"bg-gradient-to-r from-brandPrimary to-brandSecondary hover:from-brandPrimary-600 hover:to-brandSecondary-600 text-white",children:[s.jsx(un,{className:"h-4 w-4 mr-2"}),"Add Log Entry"]})]}),s.jsx(Es,{children:c&&s.jsx(Pt.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},children:s.jsxs(Te,{className:"border-2 border-brandPrimary/20 bg-brandPrimary/5",children:[s.jsx(Xe,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(Qe,{className:"text-lg",children:"New Log Entry"}),s.jsx(se,{variant:"ghost",size:"icon",onClick:()=>d(!1),className:"text-gray-500 hover:text-gray-700",children:s.jsx(rn,{className:"h-4 w-4"})})]})}),s.jsxs(Me,{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(de,{htmlFor:"log-date",children:"Date"}),s.jsx($e,{id:"log-date",type:"date",value:y.date,onChange:W=>g(z=>({...z,date:W.target.value}))})]}),s.jsxs("div",{children:[s.jsx(de,{htmlFor:"log-author",children:"Author"}),s.jsxs(st,{value:y.authorId,onValueChange:W=>g(z=>({...z,authorId:W})),children:[s.jsx(nt,{children:s.jsx(at,{placeholder:"Select author"})}),s.jsx(rt,{children:n.map(W=>s.jsxs(xe,{value:W.id,children:[W.firstName," ",W.lastName]},W.id))})]})]})]}),s.jsxs("div",{children:[s.jsx(de,{htmlFor:"log-notes",children:"Notes"}),s.jsx(_n,{id:"log-notes",placeholder:"Enter daily log notes...",value:y.notes,onChange:W=>g(z=>({...z,notes:W.target.value})),rows:4})]}),s.jsxs("div",{className:"flex justify-end space-x-2",children:[s.jsx(se,{variant:"outline",onClick:()=>d(!1),children:"Cancel"}),s.jsx(se,{onClick:S,className:"bg-brandPrimary hover:bg-brandPrimary-600",children:"Add Entry"})]})]})]})})}),s.jsx("div",{className:"space-y-4",children:C.length===0?s.jsx(Te,{children:s.jsxs(Me,{className:"text-center py-12",children:[s.jsx(tn,{className:"h-12 w-12 mx-auto text-gray-400 mb-4"}),s.jsx("p",{className:"text-gray-600 font-medium",children:"No log entries yet"}),s.jsx("p",{className:"text-gray-500 text-sm mt-1",children:'Click "Add Log Entry" to start tracking daily activities'})]})}):C.map(W=>s.jsx(Pt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:s.jsx(Te,{className:"hover:shadow-md transition-shadow",children:s.jsx(Me,{className:"p-6",children:u===W.id?s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(de,{htmlFor:`edit-date-${W.id}`,children:"Date"}),s.jsx($e,{id:`edit-date-${W.id}`,type:"date",value:x.date,onChange:z=>m(F=>({...F,date:z.target.value}))})]}),s.jsxs("div",{children:[s.jsx(de,{htmlFor:`edit-author-${W.id}`,children:"Author"}),s.jsxs(st,{value:x.authorId,onValueChange:z=>m(F=>({...F,authorId:z})),children:[s.jsx(nt,{children:s.jsx(at,{placeholder:"Select author"})}),s.jsx(rt,{children:n.map(z=>s.jsxs(xe,{value:z.id,children:[z.firstName," ",z.lastName]},z.id))})]})]})]}),s.jsxs("div",{children:[s.jsx(de,{htmlFor:`edit-notes-${W.id}`,children:"Notes"}),s.jsx(_n,{id:`edit-notes-${W.id}`,value:x.notes,onChange:z=>m(F=>({...F,notes:z.target.value})),rows:4})]}),s.jsxs("div",{className:"flex justify-end space-x-2",children:[s.jsx(se,{variant:"outline",onClick:T,children:"Cancel"}),s.jsx(se,{onClick:()=>P(W.id),className:"bg-brandPrimary hover:bg-brandPrimary-600",children:"Save Changes"})]})]}):s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(An,{className:"h-4 w-4 text-gray-500"}),s.jsx("span",{className:"font-medium text-gray-900",children:A(W.date)})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(ss,{className:"h-4 w-4 text-gray-500"}),s.jsx("span",{className:"text-gray-600",children:E(W.authorId)})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(se,{variant:"ghost",size:"sm",onClick:()=>M(W.id),children:f.has(W.id)?s.jsx(Uc,{className:"h-4 w-4"}):s.jsx(Ll,{className:"h-4 w-4"})}),s.jsx(se,{variant:"ghost",size:"sm",onClick:()=>L(W),className:"text-blue-600 hover:bg-blue-50",children:s.jsx(Ai,{className:"h-4 w-4"})}),s.jsxs(yr,{children:[s.jsx(br,{asChild:!0,children:s.jsx(se,{variant:"ghost",size:"sm",className:"text-red-600 hover:bg-red-50",children:s.jsx(Kt,{className:"h-4 w-4"})})}),s.jsxs(er,{children:[s.jsxs(tr,{children:[s.jsx(rr,{children:"Delete Log Entry?"}),s.jsx(sr,{children:"This action cannot be undone. This will permanently delete the log entry and all its attachments."})]}),s.jsxs(nr,{children:[s.jsx(ir,{children:"Cancel"}),s.jsx(ar,{onClick:()=>D(W.id),className:"bg-red-600 hover:bg-red-700",children:"Delete"})]})]})]})]})]}),s.jsx("div",{className:"mb-4",children:s.jsx("p",{className:"text-gray-700 whitespace-pre-wrap",children:W.notes})}),s.jsx(Es,{children:f.has(W.id)&&s.jsxs(Pt.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},className:"border-t pt-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx("h4",{className:"font-medium text-gray-900",children:"Attachments"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs(se,{variant:"outline",size:"sm",onClick:()=>{var z;return(z=v.current)==null?void 0:z.click()},className:"text-sm",children:[s.jsx(Gl,{className:"h-3 w-3 mr-1"}),"Add Files"]}),s.jsx("p",{className:"text-xs text-gray-500",children:"Images, PDFs, Docs (Max 10MB each)"})]}),s.jsx("input",{ref:v,type:"file",multiple:!0,onChange:z=>N(z,W.id),className:"hidden",accept:".pdf,.doc,.docx,.jpg,.jpeg,.png,.gif,.txt,.zip,.rar",capture:"environment"})]}),(W.attachments||[]).length===0?s.jsx("p",{className:"text-sm text-gray-500",children:"No attachments"}):s.jsx("div",{className:"space-y-3",children:(W.attachments||[]).map(z=>s.jsxs("div",{className:"border rounded-lg overflow-hidden",children:[z.type.startsWith("image/")&&z.previewUrl&&s.jsxs("div",{className:"relative",children:[s.jsx("img",{src:z.previewUrl,alt:z.name,className:"w-full h-48 object-cover",onError:F=>{F.target.style.display="none"}}),s.jsx("div",{className:"absolute top-2 right-2",children:s.jsx(se,{variant:"ghost",size:"sm",onClick:()=>l(e,W.id,z.id),className:"bg-red-500 hover:bg-red-600 text-white h-8 w-8 p-0",children:s.jsx(Kt,{className:"h-3 w-3"})})})]}),s.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[z.type.startsWith("image/")?s.jsx(Hj,{className:"h-4 w-4 text-blue-500"}):s.jsx(Wh,{className:"h-4 w-4 text-gray-500"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:z.name}),s.jsx("p",{className:"text-xs text-gray-500",children:O(z.size)})]})]}),!z.type.startsWith("image/")&&s.jsx(se,{variant:"ghost",size:"sm",onClick:()=>l(e,W.id,z.id),className:"text-red-600 hover:bg-red-50",children:s.jsx(Kt,{className:"h-3 w-3"})})]})]},z.id))})]})})]})})})},W.id))})]}):s.jsx("div",{className:"text-center py-8",children:s.jsx("p",{className:"text-gray-600",children:"No job ID provided"})})};class lee{constructor(){this.smsProvider=null,this.emailProvider=null,this.isConfigured=!1}async initialize(t={}){const{twilioAccountSid:n,twilioAuthToken:r,twilioPhoneNumber:a,sendGridApiKey:i,fromEmail:o}=t;n&&r&&a&&console.log("📱 SMS provider configured (mock)"),i&&o&&console.log("📧 Email provider configured (mock)"),this.isConfigured=!0}async sendSMS(t,n,r={}){this.isConfigured||console.warn("Message service not configured, using mock SMS");try{const a={to:t,message:n,jobContext:r,timestamp:new Date().toISOString(),status:"sent",provider:"mock-twilio",messageId:`sms_${Date.now()}_${Math.random().toString(36).substr(2,9)}`};return await new Promise(i=>setTimeout(i,500+Math.random()*1e3)),console.log("📱 Mock SMS sent:",{to:t,message:n.substring(0,50)+(n.length>50?"...":""),jobContext:r.jobName||"Unknown Job"}),{success:!0,messageId:a.messageId,status:"sent",provider:"mock-twilio"}}catch(a){return console.error("SMS sending failed:",a),{success:!1,error:a.message,status:"failed"}}}async sendEmail(t,n,r,a={}){this.isConfigured||console.warn("Message service not configured, using mock email");try{const i={to:t,subject:n,body:r,jobContext:a,timestamp:new Date().toISOString(),status:"sent",provider:"mock-sendgrid",messageId:`email_${Date.now()}_${Math.random().toString(36).substr(2,9)}`};return await new Promise(o=>setTimeout(o,800+Math.random()*1200)),console.log("📧 Mock email sent:",{to:t,subject:n,bodyLength:r.length,jobContext:a.jobName||"Unknown Job"}),{success:!0,messageId:i.messageId,status:"sent",provider:"mock-sendgrid"}}catch(i){return console.error("Email sending failed:",i),{success:!1,error:i.message,status:"failed"}}}async sendMessage(t){const{recipients:n,message:r,deliveryMethod:a,jobContext:i}=t,o={sms:{sent:[],failed:[]},email:{sent:[],failed:[]},totalRecipients:n.length};if(a==="sms"||a==="both")for(const l of n)if(l.phone){const c=await this.sendSMS(l.phone,r,i);c.success?o.sms.sent.push({recipient:l,messageId:c.messageId}):o.sms.failed.push({recipient:l,error:c.error})}else o.sms.failed.push({recipient:l,error:"No phone number available"});if(a==="email"||a==="both")for(const l of n)if(l.email){const c=`Message from ${i.jobName||"Construction Project"}`,d=await this.sendEmail(l.email,c,r,i);d.success?o.email.sent.push({recipient:l,messageId:d.messageId}):o.email.failed.push({recipient:l,error:d.error})}else o.email.failed.push({recipient:l,error:"No email address available"});return o}validatePhoneNumber(t){if(!t)return!1;const n=t.replace(/\D/g,"");return n.length===10||n.length===11}validateEmail(t){return t?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t):!1}async getDeliveryStatus(t){await new Promise(a=>setTimeout(a,200));const n=["delivered","sent","failed","pending"],r=n[Math.floor(Math.random()*n.length)];return{messageId:t,status:r,timestamp:new Date().toISOString(),details:`Mock status: ${r}`}}getMessageStats(){return{totalSent:0,smsSent:0,emailSent:0,deliveryRate:.95,averageResponseTime:120}}}const cee=new lee,dee=({job:e,employees:t=[],subcontractors:n=[],vendors:r=[],onMessageSent:a})=>{const[i,o]=j.useState(""),[l,c]=j.useState([]),[d,u]=j.useState("both"),[h,f]=j.useState(!1),[p,y]=j.useState("employees"),g=j.useMemo(()=>{const N=[];return t.forEach(M=>{N.push({id:M.id,name:`${M.firstName} ${M.lastName}`,type:"employee",phone:M.phone,email:M.email,displayType:"Employee"})}),n.forEach(M=>{N.push({id:M.id,name:M.name||M.companyName,type:"subcontractor",phone:M.phone,email:M.email,displayType:"Subcontractor"})}),r.forEach(M=>{N.push({id:M.id,name:M.name||M.companyName,type:"vendor",phone:M.phone,email:M.email,displayType:"Vendor"})}),N},[t,n,r]),x=j.useMemo(()=>p==="all"?g:g.filter(N=>N.type===p),[g,p]),m=N=>{c(M=>M.includes(N)?M.filter(L=>L!==N):[...M,N])},v=()=>{c(x.map(N=>N.id))},b=()=>{c([])},C=async()=>{if(!i.trim()){pe({title:"Message Required",description:"Please enter a message to send.",variant:"destructive"});return}if(l.length===0){pe({title:"Recipients Required",description:"Please select at least one recipient.",variant:"destructive"});return}f(!0);try{const N=g.filter(T=>l.includes(T.id)),M={id:`msg_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,jobId:e.id,sender:"Current User",recipients:N.map(T=>({id:T.id,name:T.name,type:T.type,phone:T.phone,email:T.email})),message:i.trim(),deliveryMethod:d,timestamp:new Date().toISOString(),status:"sent"},L=await cee.sendMessage({recipients:M.recipients,message:M.message,deliveryMethod:M.deliveryMethod,jobContext:{jobId:e.id,jobName:e.jobName,jobType:e.jobType}});console.log("Message send results:",L),S(M),o(""),c([]),a&&a(M),pe({title:"Message Sent! 📱",description:`Message sent to ${N.length} recipient(s) via ${d==="both"?"SMS and Email":d.toUpperCase()}.`})}catch(N){console.error("Error sending message:",N),pe({title:"Send Failed",description:"Failed to send message. Please try again.",variant:"destructive"})}finally{f(!1)}},S=N=>{const M=JSON.parse(localStorage.getItem("jobMessages")||"{}");M[e.id]||(M[e.id]=[]),M[e.id].push(N),localStorage.setItem("jobMessages",JSON.stringify(M))},D=(()=>({employees:g.filter(M=>M.type==="employee").length,subcontractors:g.filter(M=>M.type==="subcontractor").length,vendors:g.filter(M=>M.type==="vendor").length}))();return s.jsxs(Te,{className:"border-2 border-blue-200 bg-blue-50",children:[s.jsx(Xe,{children:s.jsxs(Qe,{className:"flex items-center text-blue-800",children:[s.jsx(so,{className:"h-5 w-5 mr-2"}),"Send Message"]})}),s.jsxs(Me,{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-3",children:[s.jsx(de,{className:"text-blue-800 font-medium",children:"Recipients"}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs(st,{value:p,onValueChange:y,children:[s.jsx(nt,{className:"w-48",children:s.jsx(at,{})}),s.jsxs(rt,{children:[s.jsxs(xe,{value:"all",children:["All (",g.length,")"]}),s.jsxs(xe,{value:"employees",children:["Employees (",D.employees,")"]}),s.jsxs(xe,{value:"subcontractors",children:["Subcontractors (",D.subcontractors,")"]}),s.jsxs(xe,{value:"vendors",children:["Vendors (",D.vendors,")"]})]})]}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx(se,{variant:"outline",size:"sm",onClick:v,className:"text-blue-600 border-blue-300 hover:bg-blue-50",children:"Select All"}),s.jsx(se,{variant:"outline",size:"sm",onClick:b,className:"text-gray-600 border-gray-300 hover:bg-gray-50",children:"Clear All"})]})]}),s.jsx("div",{className:"max-h-32 overflow-y-auto border rounded-lg p-3 bg-white",children:x.length===0?s.jsx("p",{className:"text-gray-500 text-sm",children:"No recipients available for this job."}):s.jsx("div",{className:"space-y-2",children:x.map(N=>s.jsx("div",{className:`flex items-center justify-between p-2 rounded cursor-pointer transition-colors ${l.includes(N.id)?"bg-blue-100 border border-blue-300":"bg-gray-50 border border-gray-200 hover:bg-gray-100"}`,onClick:()=>m(N.id),children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:`w-3 h-3 rounded-full ${l.includes(N.id)?"bg-blue-500":"bg-gray-300"}`}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-sm",children:N.name}),s.jsxs("div",{className:"flex items-center space-x-2 text-xs text-gray-600",children:[s.jsx(ht,{variant:"outline",className:"text-xs",children:N.displayType}),N.phone&&s.jsxs("span",{children:["📱 ",N.phone]}),N.email&&s.jsxs("span",{children:["📧 ",N.email]})]})]})]})},N.id))})}),l.length>0&&s.jsxs("p",{className:"text-sm text-blue-600",children:["Selected: ",l.length," recipient(s)"]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{className:"text-blue-800 font-medium",children:"Delivery Method"}),s.jsxs("div",{className:"flex space-x-4",children:[s.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[s.jsx("input",{type:"radio",value:"both",checked:d==="both",onChange:N=>u(N.target.value),className:"text-blue-600"}),s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(gu,{className:"h-4 w-4 text-blue-600"}),s.jsx(ki,{className:"h-4 w-4 text-blue-600"}),s.jsx("span",{className:"text-sm",children:"SMS & Email"})]})]}),s.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[s.jsx("input",{type:"radio",value:"sms",checked:d==="sms",onChange:N=>u(N.target.value),className:"text-blue-600"}),s.jsx(gu,{className:"h-4 w-4 text-blue-600"}),s.jsx("span",{className:"text-sm",children:"SMS Only"})]}),s.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[s.jsx("input",{type:"radio",value:"email",checked:d==="email",onChange:N=>u(N.target.value),className:"text-blue-600"}),s.jsx(ki,{className:"h-4 w-4 text-blue-600"}),s.jsx("span",{className:"text-sm",children:"Email Only"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{className:"text-blue-800 font-medium",children:"Message"}),s.jsx(_n,{value:i,onChange:N=>o(N.target.value),placeholder:"Enter your message here...",className:"min-h-[100px] border-2 border-blue-200 focus:border-blue-400",maxLength:500}),s.jsxs("div",{className:"flex justify-between text-xs text-gray-500",children:[s.jsx("span",{children:"Keep messages concise and clear"}),s.jsxs("span",{children:[i.length,"/500"]})]})]}),s.jsx("div",{className:"flex justify-end",children:s.jsx(se,{onClick:C,disabled:h||!i.trim()||l.length===0,className:"bg-blue-600 hover:bg-blue-700 text-white",children:h?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Sending..."]}):s.jsxs(s.Fragment,{children:[s.jsx(hy,{className:"h-4 w-4 mr-2"}),"Send Message"]})})}),s.jsx("div",{className:"bg-blue-100 border border-blue-300 rounded-lg p-3",children:s.jsxs("div",{className:"flex items-start space-x-2",children:[s.jsx(Au,{className:"h-4 w-4 text-blue-600 mt-0.5 flex-shrink-0"}),s.jsxs("div",{className:"text-sm text-blue-800",children:[s.jsx("p",{className:"font-medium mb-1",children:"Message Guidelines:"}),s.jsxs("ul",{className:"space-y-1 text-xs",children:[s.jsx("li",{children:"• Keep messages under 500 characters for SMS compatibility"}),s.jsx("li",{children:"• Include specific job details or instructions"}),s.jsx("li",{children:"• Messages are logged and stored for record keeping"}),s.jsx("li",{children:"• Recipients can reply directly to SMS/email"})]})]})]})})]})]})},uee=({jobId:e,messages:t=[]})=>{const[n,r]=j.useState(new Set),[a,i]=j.useState("newest"),o=x=>{r(m=>{const v=new Set(m);return v.has(x)?v.delete(x):v.add(x),v})},l=x=>{const m=new Date(x),v=new Date,b=(v-m)/(1e3*60*60);if(b<1){const C=Math.floor((v-m)/6e4);return`${C} minute${C!==1?"s":""} ago`}else return b<24?`${Math.floor(b)} hour${Math.floor(b)!==1?"s":""} ago`:m.toLocaleDateString()+" "+m.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})},c=x=>{switch(x){case"sms":return s.jsx(gu,{className:"h-4 w-4 text-green-600"});case"email":return s.jsx(ki,{className:"h-4 w-4 text-blue-600"});case"both":return s.jsxs("div",{className:"flex space-x-1",children:[s.jsx(gu,{className:"h-4 w-4 text-green-600"}),s.jsx(ki,{className:"h-4 w-4 text-blue-600"})]});default:return s.jsx(so,{className:"h-4 w-4 text-gray-600"})}},d=x=>{var m;return x.direction==="inbound"||((m=x.id)==null?void 0:m.startsWith("inbound_"))},u=x=>{switch(x){case"sms":return"SMS";case"email":return"Email";case"both":return"SMS & Email";default:return"Unknown"}},h=[...t].sort((x,m)=>{const v=new Date(x.timestamp),b=new Date(m.timestamp);return a==="newest"?b-v:v-b}),f=()=>{try{return JSON.parse(localStorage.getItem("jobMessages")||"{}")[e]||[]}catch(x){return console.error("Error loading messages:",x),[]}},[p,y]=j.useState(f());j.useEffect(()=>{y(f())},[e,t]);const g=t.length>0?t:p;return g.length===0?s.jsxs(Te,{className:"border-2 border-gray-200 bg-gray-50",children:[s.jsx(Xe,{children:s.jsxs(Qe,{className:"flex items-center text-gray-700",children:[s.jsx(so,{className:"h-5 w-5 mr-2"}),"Message History"]})}),s.jsx(Me,{children:s.jsxs("div",{className:"text-center py-8",children:[s.jsx(so,{className:"h-12 w-12 mx-auto text-gray-400 mb-4"}),s.jsx("p",{className:"text-gray-600 font-medium",children:"No messages sent yet"}),s.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"Messages sent from this job will appear here"})]})})]}):s.jsxs(Te,{className:"border-2 border-gray-200 bg-gray-50",children:[s.jsx(Xe,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs(Qe,{className:"flex items-center text-gray-700",children:[s.jsx(so,{className:"h-5 w-5 mr-2"}),"Message History (",g.length,")"]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"Sort:"}),s.jsx(se,{variant:"outline",size:"sm",onClick:()=>i(a==="newest"?"oldest":"newest"),className:"text-xs",children:a==="newest"?"Newest First":"Oldest First"})]})]})}),s.jsxs(Me,{children:[s.jsx("div",{className:"space-y-3",children:s.jsx(Es,{children:h.map((x,m)=>{var v,b;return s.jsxs(Pt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.2,delay:m*.05},className:"bg-white border border-gray-200 rounded-lg overflow-hidden hover:shadow-md transition-shadow",children:[s.jsx("div",{className:"p-4 cursor-pointer hover:bg-gray-50 transition-colors",onClick:()=>o(x.id),children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[c(x.deliveryMethod),s.jsx(ht,{variant:"outline",className:"text-xs",children:d(x)?"📨 Response":u(x.deliveryMethod)})]}),s.jsxs("div",{children:[s.jsxs("p",{className:"font-medium text-sm text-gray-900",children:[d(x)?"From: ":"To: ",d(x)?x.sender:`${x.recipients.length} recipient(s)`]}),s.jsx("p",{className:"text-xs text-gray-500",children:d(x)?"Incoming Response":"Outgoing Message"})]})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsxs("div",{className:"text-right",children:[s.jsxs("p",{className:"text-xs text-gray-500 flex items-center",children:[s.jsx(kn,{className:"h-3 w-3 mr-1"}),l(x.timestamp)]}),s.jsx("p",{className:"text-xs text-gray-400",children:new Date(x.timestamp).toLocaleDateString()})]}),n.has(x.id)?s.jsx(Uc,{className:"h-4 w-4 text-gray-500"}):s.jsx(Ll,{className:"h-4 w-4 text-gray-500"})]})]})}),s.jsx(Es,{children:n.has(x.id)&&s.jsx(Pt.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2},className:"border-t border-gray-100",children:s.jsxs("div",{className:"p-4 space-y-4",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-sm text-gray-700 mb-2",children:"Message:"}),s.jsx("div",{className:"bg-gray-50 rounded-lg p-3",children:s.jsx("p",{className:"text-sm text-gray-800 whitespace-pre-wrap",children:x.message})})]}),s.jsxs("div",{children:[s.jsxs("h4",{className:"font-medium text-sm text-gray-700 mb-2 flex items-center",children:[s.jsx(vr,{className:"h-4 w-4 mr-1"}),d(x)?"From:":`Recipients (${((v=x.recipients)==null?void 0:v.length)||0}):`]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:d(x)?s.jsx("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded border",children:s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-sm",children:x.sender}),s.jsx("div",{className:"flex items-center space-x-2 text-xs text-gray-600",children:s.jsx(ht,{variant:"outline",className:"text-xs",children:x.type.toUpperCase()})})]})}):(b=x.recipients)==null?void 0:b.map((C,S)=>s.jsx("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded border",children:s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-sm",children:C.name}),s.jsxs("div",{className:"flex items-center space-x-2 text-xs text-gray-600",children:[s.jsx(ht,{variant:"outline",className:"text-xs",children:C.type.charAt(0).toUpperCase()+C.type.slice(1)}),C.phone&&s.jsxs("span",{className:"flex items-center",children:[s.jsx(gu,{className:"h-3 w-3 mr-1"}),C.phone]}),C.email&&s.jsxs("span",{className:"flex items-center",children:[s.jsx(ki,{className:"h-3 w-3 mr-1"}),C.email]})]})]})},`${C.id}-${S}`))})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 text-xs text-gray-600",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Message ID:"})," ",x.id]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Status:"}),s.jsx(ht,{variant:"outline",className:"ml-1 text-xs text-green-600 border-green-300",children:x.status})]})]})]})})})]},x.id)})})}),s.jsx("div",{className:"mt-6 pt-4 border-t border-gray-200",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"font-medium text-gray-700",children:"Total Messages"}),s.jsx("p",{className:"text-2xl font-bold text-blue-600",children:g.length})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"font-medium text-gray-700",children:"SMS Sent"}),s.jsx("p",{className:"text-2xl font-bold text-green-600",children:g.filter(x=>x.deliveryMethod==="sms"||x.deliveryMethod==="both").length})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"font-medium text-gray-700",children:"Emails Sent"}),s.jsx("p",{className:"text-2xl font-bold text-blue-600",children:g.filter(x=>x.deliveryMethod==="email"||x.deliveryMethod==="both").length})]})]})})]})]})};class hee{constructor(){this.webhookEndpoints={sms:"/api/webhooks/sms",email:"/api/webhooks/email"},this.messageHandlers=new Map,this.isRunning=!1}async start(){this.isRunning||(console.log("🔄 Starting webhook service..."),this.isRunning=!0,this.simulateWebhookServer())}async stop(){console.log("🛑 Stopping webhook service..."),this.isRunning=!1}registerHandler(t,n){this.messageHandlers.set(t,n),console.log(`📝 Registered message handler for job: ${t}`)}unregisterHandler(t){this.messageHandlers.delete(t),console.log(`🗑️ Removed message handler for job: ${t}`)}async processSMSWebhook(t){console.log("📱 Processing SMS webhook:",t);const{From:n,To:r,Body:a,MessageSid:i,Timestamp:o}=t,l={id:`inbound_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,type:"sms",from:n,to:r,message:a,messageId:i,timestamp:o||new Date().toISOString(),direction:"inbound",status:"received"};return await this.routeMessage(l),{success:!0,messageId:l.id}}async processEmailWebhook(t){console.log("📧 Processing email webhook:",t);const{from:n,to:r,subject:a,text:i,html:o,messageId:l,timestamp:c}=t,d={id:`inbound_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,type:"email",from:n,to:r,subject:a,message:i||o,messageId:l,timestamp:c||new Date().toISOString(),direction:"inbound",status:"received"};return await this.routeMessage(d),{success:!0,messageId:d.id}}async routeMessage(t){for(const[n,r]of this.messageHandlers)try{await r(t),console.log(`✅ Routed message to job ${n}`)}catch(a){console.error(`❌ Error routing message to job ${n}:`,a)}}simulateWebhookServer(){console.log("🖥️ Mock webhook server running on:",this.webhookEndpoints),console.log("📋 To test, use the simulateIncomingMessage() method")}async simulateIncomingSMS(t,n,r={}){const a={From:t,To:"+1234567890",Body:n,MessageSid:`SM${Date.now()}_${Math.random().toString(36).substr(2,9)}`,Timestamp:new Date().toISOString()};return console.log("🧪 Simulating incoming SMS:",a),await this.processSMSWebhook(a)}async simulateIncomingEmail(t,n,r,a={}){const i={from:t,to:"messages@yourcompany.com",subject:n,text:r,html:r.replace(/\n/g,"<br>"),messageId:`email_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,timestamp:new Date().toISOString()};return console.log("🧪 Simulating incoming email:",i),await this.processEmailWebhook(i)}getWebhookEndpoints(){return{sms:`${window.location.origin}${this.webhookEndpoints.sms}`,email:`${window.location.origin}${this.webhookEndpoints.email}`}}validateWebhookSignature(t,n,r){return console.log("🔐 Webhook signature validation (mock):",{payload:t,signature:n,secret:r}),!0}}const Dc=new hee,fee=({jobId:e,onIncomingMessage:t})=>{console.log("🔧 MessageResponseTester rendering for jobId:",e);const[n,r]=j.useState(!1),[a,i]=j.useState("sms"),[o,l]=j.useState("+1234567890"),[c,d]=j.useState("worker@example.com"),[u,h]=j.useState("Re: Job Update"),[f,p]=j.useState("Got it, will be there at 8 AM"),[y,g]=j.useState(!1),x=async()=>{try{await Dc.start(),r(!0),Dc.registerHandler(e,async S=>{console.log("📨 Received incoming message:",S);const P=JSON.parse(localStorage.getItem("jobMessages")||"{}");P[e]||(P[e]=[]),P[e].push({...S,jobId:e,sender:S.from,recipients:[{id:"office",name:"Office",type:"office"}],deliveryMethod:S.type,status:"received"}),localStorage.setItem("jobMessages",JSON.stringify(P)),t&&t(S),pe({title:`📨 New ${S.type.toUpperCase()} Received!`,description:`From: ${S.from} - ${S.message.substring(0,50)}...`})}),pe({title:"🔄 Webhook Service Started",description:"Ready to receive incoming messages"})}catch(S){console.error("Error starting webhook service:",S),pe({title:"❌ Failed to Start Webhook",description:S.message,variant:"destructive"})}},m=async()=>{try{Dc.unregisterHandler(e),await Dc.stop(),r(!1),pe({title:"🛑 Webhook Service Stopped",description:"No longer receiving incoming messages"})}catch(S){console.error("Error stopping webhook service:",S)}},v=async()=>{if(!n){pe({title:"⚠️ Webhook Not Running",description:"Please start the webhook service first",variant:"destructive"});return}g(!0);try{a==="sms"?await Dc.simulateIncomingSMS(o,f):await Dc.simulateIncomingEmail(c,u,f),pe({title:`📤 Test ${a.toUpperCase()} Sent`,description:`Simulated incoming ${a} message`})}catch(S){console.error("Error sending test message:",S),pe({title:"❌ Test Failed",description:S.message,variant:"destructive"})}finally{g(!1)}},b=[{type:"sms",from:"+1234567890",message:"Got it, will be there at 8 AM"},{type:"sms",from:"+1987654321",message:"Materials received, starting work now"},{type:"email",from:"worker@example.com",subject:"Re: Job Update",message:"Equipment is ready and crew is on site. Weather looks good for today."},{type:"email",from:"supervisor@example.com",subject:"Progress Report",message:"Phase 1 completed ahead of schedule. Ready for inspection tomorrow."}],C=async S=>{if(!n){pe({title:"⚠️ Webhook Not Running",description:"Please start the webhook service first",variant:"destructive"});return}try{S.type==="sms"?await Dc.simulateIncomingSMS(S.from,S.message):await Dc.simulateIncomingEmail(S.from,S.subject,S.message),pe({title:"📤 Quick Test Sent",description:`Simulated ${S.type.toUpperCase()} from ${S.from}`})}catch(P){console.error("Error sending quick test:",P)}};return s.jsxs(Te,{className:"border-2 border-green-200 bg-green-50",children:[s.jsx(Xe,{children:s.jsxs(Qe,{className:"flex items-center text-green-800",children:[s.jsx(so,{className:"h-5 w-5 mr-2"}),"Message Response Tester",s.jsx(ht,{variant:n?"default":"secondary",className:"ml-2",children:n?"🟢 Running":"🔴 Stopped"})]})}),s.jsxs(Me,{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs(se,{onClick:x,disabled:n,className:"bg-green-600 hover:bg-green-700 text-white",children:[s.jsx(Oo,{className:"h-4 w-4 mr-2"}),"Start Webhook Service"]}),s.jsxs(se,{onClick:m,disabled:!n,variant:"outline",className:"border-red-300 text-red-600 hover:bg-red-50",children:[s.jsx(AM,{className:"h-4 w-4 mr-2"}),"Stop Webhook Service"]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{className:"text-green-800 font-medium",children:"Test Message Type"}),s.jsxs(st,{value:a,onValueChange:i,children:[s.jsx(nt,{className:"w-48",children:s.jsx(at,{})}),s.jsxs(rt,{children:[s.jsx(xe,{value:"sms",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(gu,{className:"h-4 w-4"}),s.jsx("span",{children:"SMS Response"})]})}),s.jsx(xe,{value:"email",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(ki,{className:"h-4 w-4"}),s.jsx("span",{children:"Email Response"})]})})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[a==="sms"?s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{className:"text-green-800 font-medium",children:"From Phone Number"}),s.jsx($e,{value:o,onChange:S=>l(S.target.value),placeholder:"+1234567890",className:"border-green-300 focus:border-green-500"})]}):s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{className:"text-green-800 font-medium",children:"From Email"}),s.jsx($e,{value:c,onChange:S=>d(S.target.value),placeholder:"worker@example.com",className:"border-green-300 focus:border-green-500"}),s.jsx(de,{className:"text-green-800 font-medium",children:"Subject"}),s.jsx($e,{value:u,onChange:S=>h(S.target.value),placeholder:"Re: Job Update",className:"border-green-300 focus:border-green-500"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{className:"text-green-800 font-medium",children:"Message"}),s.jsx(_n,{value:f,onChange:S=>p(S.target.value),placeholder:"Enter test message...",className:"min-h-[80px] border-green-300 focus:border-green-500"})]}),s.jsx(se,{onClick:v,disabled:!n||y,className:"bg-green-600 hover:bg-green-700 text-white",children:y?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Sending..."]}):s.jsxs(s.Fragment,{children:[s.jsx(so,{className:"h-4 w-4 mr-2"}),"Send Test Message"]})})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx(de,{className:"text-green-800 font-medium",children:"Quick Test Messages"}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:b.map((S,P)=>s.jsx(se,{onClick:()=>C(S),disabled:!n,variant:"outline",size:"sm",className:"border-green-300 text-green-700 hover:bg-green-50 text-left justify-start",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[S.type==="sms"?s.jsx(gu,{className:"h-3 w-3"}):s.jsx(ki,{className:"h-3 w-3"}),s.jsxs("div",{className:"text-xs",children:[s.jsx("div",{className:"font-medium",children:S.from}),s.jsx("div",{className:"text-gray-600 truncate",children:S.type==="sms"?S.message:S.subject})]})]})},P))})]}),s.jsx("div",{className:"bg-green-100 border border-green-300 rounded-lg p-3",children:s.jsxs("div",{className:"text-sm text-green-800",children:[s.jsx("p",{className:"font-medium mb-2",children:"How to Test:"}),s.jsxs("ol",{className:"space-y-1 text-xs",children:[s.jsx("li",{children:'1. Click "Start Webhook Service" to begin listening for messages'}),s.jsx("li",{children:"2. Use the form above or quick test buttons to simulate incoming messages"}),s.jsx("li",{children:"3. Check the Messages section to see incoming responses"}),s.jsx("li",{children:"4. Watch the console for webhook processing logs"})]})]})})]})]})},pee=({job:e,employees:t=[],subcontractors:n=[],vendors:r=[]})=>{const[a,i]=j.useState(!1),[o,l]=j.useState([]);j.useEffect(()=>{l((()=>{try{return JSON.parse(localStorage.getItem("jobMessages")||"{}")[e.id]||[]}catch(p){return console.error("Error loading messages:",p),[]}})())},[e.id]);const c=f=>{l(p=>[f,...p])},d=f=>{l(p=>[f,...p])},u=()=>o.length,h=()=>{const f=new Date;return f.setDate(f.getDate()-1),o.filter(p=>new Date(p.timestamp)>f).length};return s.jsxs(Te,{className:"border-2 border-blue-200 bg-blue-50",children:[s.jsx(Xe,{children:s.jsxs("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>i(!a),children:[s.jsxs(Qe,{className:"flex items-center text-blue-800",children:[s.jsx(so,{className:"h-5 w-5 mr-2"}),"Messages",u()>0&&s.jsxs("span",{className:"ml-2 text-sm bg-blue-100 text-blue-700 px-2 py-1 rounded-full",children:[u()," total"]}),h()>0&&s.jsxs("span",{className:"ml-2 text-sm bg-green-100 text-green-700 px-2 py-1 rounded-full",children:[h()," today"]})]}),s.jsx(se,{variant:"ghost",size:"sm",className:"text-blue-600 hover:bg-blue-100",children:a?s.jsx(Uc,{className:"h-4 w-4"}):s.jsx(Ll,{className:"h-4 w-4"})})]})}),s.jsx(Es,{children:a&&s.jsx(Pt.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3},children:s.jsxs(Me,{className:"space-y-6 pt-0",children:[s.jsx(dee,{job:e,employees:t,subcontractors:n,vendors:r,onMessageSent:c}),s.jsx("div",{className:"border-t border-blue-200 pt-4",children:s.jsx(fee,{jobId:e.id,onIncomingMessage:d})}),s.jsx(uee,{jobId:e.id,messages:o})]})})})]})},mee=({job:e,onUpdateJob:t,onSelectScope:n,onAddDefaultScopes:r,onCreateTakeoffPhase:a,onAddTakeoffEntry:i,onDeleteScope:o,onOpenCreateScopeModal:l,onUpdateTakeoffEntry:c,onDeleteTakeoffEntry:d,onDeleteTakeoffPhase:u,onUpdatePhaseMaterials:h,onShowTakeoffReport:f,onShowFinancials:p,onDeleteJob:y,onCreateChecklist:g,onUpdateChecklist:x,onDeleteChecklist:m,onCompleteChecklist:v,onSaveChecklistTemplate:b,onGetChecklistTemplates:C,onDeleteChecklistTemplate:S,employees:P,onGoToScheduleForJob:D,onUploadDocument:N,onDeleteDocument:M,onUpdateDocument:L,onGetLogsForJob:T,onAddLogEntry:E,onUpdateLogEntry:A,onDeleteLogEntry:O,onAddAttachmentToLog:W,onRemoveAttachmentFromLog:z})=>{const[F,V]=j.useState(null),[B,Y]=j.useState(null),[$,I]=j.useState(!1),[U,q]=j.useState("checklists");j.useState("overview");const[X,te]=j.useState({jobName:"",jobType:"",generalContractor:"",superintendent:"",address:"",lockboxCode:""});if(!e)return s.jsxs("div",{className:"text-center py-16",children:[s.jsx(Qs,{className:"h-16 w-16 mx-auto text-gray-400 mb-4"}),s.jsx("p",{className:"text-gray-600 font-medium",children:"No job selected or job data is unavailable."}),s.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"Please go back to the jobs list and select a job."})]});Q.useEffect(()=>{e&&te({jobName:e.jobName||"",jobType:e.jobType||"residential",generalContractor:e.generalContractor||"",superintendent:e.superintendent||"",address:e.address||"",lockboxCode:e.lockboxCode||""})},[e]);const ae=(e==null?void 0:e.scopes)||[],le=(e==null?void 0:e.takeoffPhases)||[],me=e.status||"estimating",Le=e.jobType||"residential",ie=()=>{const G=["Hang","Finish"],ge=ae.map(Pe=>Pe.name);return G.every(Pe=>ge.includes(Pe))},Ne=G=>{switch(G){case"Complete":return"bg-green-100 text-green-800 border-green-200";case"In Progress":return"bg-yellow-100 text-yellow-800 border-yellow-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},Ue=(G=>{switch(G){case"estimating":return{text:"Estimating Phase",color:"bg-blue-100 text-blue-800",icon:vs};case"active":return{text:"Active Job",color:"bg-green-100 text-green-800",icon:Oo};case"inactive":return{text:"Inactive",color:"bg-gray-100 text-gray-800",icon:Mm};default:return{text:"Estimating Phase",color:"bg-blue-100 text-blue-800",icon:vs}}})(me),_e=Ue.icon,ue=(G,ge)=>{V({phaseId:G,floorSpaceEntry:ge})},wt=G=>{c&&c(F.phaseId,G),V(null)},gt=(G,ge)=>{d&&d(G,ge)},ve=G=>{Y(G)},we=(G,ge)=>{h&&h(G,ge),Y(null)},Se=(G,ge)=>{u&&u(G,ge)},De=()=>{if(!X.jobName.trim()){pe({title:"Missing Information",description:"Job name is required.",variant:"destructive"});return}if(!X.jobType){pe({title:"Missing Information",description:"Job type is required.",variant:"destructive"});return}if(!X.generalContractor.trim()){pe({title:"Missing Information",description:"General Contractor name is required.",variant:"destructive"});return}t(e.id,X),I(!1),pe({title:"Job Updated! ✅",description:"Job information has been updated successfully."})},Ie=()=>{te({jobName:e.jobName||"",jobType:e.jobType||"residential",generalContractor:e.generalContractor||"",superintendent:e.superintendent||"",address:e.address||"",lockboxCode:e.lockboxCode||""}),I(!1)},oe=G=>Le==="commercial"?G.unitType||"Unknown Unit Type":G.floorSpace||"Unknown Floor/Space",Ee=()=>me==="estimating"?s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs(se,{onClick:()=>t(e.id,{status:"active"}),size:"sm",className:"bg-green-500 hover:bg-green-600 text-white text-xs",children:[s.jsx(Oo,{className:"h-3 w-3 mr-1"}),"Start Job"]}),s.jsxs(yr,{children:[s.jsx(br,{asChild:!0,children:s.jsxs(se,{variant:"destructive",size:"sm",className:"bg-red-500 hover:bg-red-600 text-xs",children:[s.jsx(Kt,{className:"h-3 w-3 mr-1"}),"Delete Job"]})}),s.jsxs(er,{children:[s.jsxs(tr,{children:[s.jsx(rr,{children:"Are you sure?"}),s.jsx(sr,{children:"This action cannot be undone. This will permanently delete the job and all its associated data."})]}),s.jsxs(nr,{children:[s.jsx(ir,{children:"Cancel"}),s.jsx(ar,{onClick:()=>y(e.id),className:"bg-red-600 hover:bg-red-700",children:"Yes, delete job"})]})]})]})]}):s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs(yr,{children:[s.jsx(br,{asChild:!0,children:s.jsxs(se,{variant:"destructive",size:"sm",className:"bg-red-500 hover:bg-red-600 text-xs",children:[s.jsx(Kt,{className:"h-3 w-3 mr-1"}),"Delete Job"]})}),s.jsxs(er,{children:[s.jsxs(tr,{children:[s.jsx(rr,{children:"Are you sure?"}),s.jsx(sr,{children:"This action cannot be undone. This will permanently delete the job and all its associated data."})]}),s.jsxs(nr,{children:[s.jsx(ir,{children:"Cancel"}),s.jsx(ar,{onClick:()=>y(e.id),className:"bg-red-600 hover:bg-red-700",children:"Yes, delete job"})]})]})]}),s.jsxs(se,{onClick:()=>t(e.id,{status:e.status==="active"?"inactive":"active"}),variant:"outline",size:"sm",className:"bg-yellow-400 text-yellow-900 hover:bg-yellow-500 border-yellow-500 text-xs",children:[s.jsx(Mm,{className:"h-3 w-3 mr-1"}),e.status==="active"?"Set Inactive":"Set Active"]})]});return s.jsxs("div",{className:"space-y-8",children:[D&&e&&s.jsx("div",{className:"flex justify-end",children:s.jsx(se,{onClick:()=>D(e.id),className:"bg-gradient-to-r from-brandPrimary to-brandSecondary text-white mb-2",children:"View Schedule for This Job"})}),s.jsx(Pt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:s.jsxs(Te,{className:"border-0 bg-gradient-to-r from-brandPrimary to-brandSecondary text-white shadow-2xl",children:[s.jsx(Xe,{className:"pb-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"p-3 bg-white/20 rounded-xl",children:s.jsx(Qs,{className:"h-8 w-8"})}),s.jsxs("div",{children:[$?s.jsx("div",{className:"space-y-2",children:s.jsx($e,{value:X.jobName,onChange:G=>te(ge=>({...ge,jobName:G.target.value})),placeholder:"Enter job name",className:"bg-white/20 border-white/30 text-white placeholder:text-white/70"})}):s.jsx(Qe,{className:"text-3xl font-bold",children:e==null?void 0:e.jobName}),s.jsxs("div",{className:"flex items-center space-x-3 mt-2",children:[s.jsx("p",{className:"text-white/80",children:"Construction Job Details"}),s.jsxs("span",{className:`inline-flex items-center space-x-1 px-3 py-1 rounded-full text-sm font-medium ${Ue.color} text-gray-800`,children:[s.jsx(_e,{className:"h-4 w-4"}),s.jsx("span",{children:Ue.text})]}),s.jsxs("span",{className:`inline-flex items-center space-x-1 px-3 py-1 rounded-full text-sm font-medium ${Le==="residential"?"bg-green-100 text-green-800":"bg-blue-100 text-blue-800"}`,children:[Le==="residential"?s.jsx($l,{className:"h-4 w-4"}):s.jsx(or,{className:"h-4 w-4"}),s.jsx("span",{className:"capitalize",children:Le})]})]})]})]}),s.jsxs("div",{className:"flex flex-col space-y-2",children:[s.jsx("div",{className:"flex items-center space-x-2",children:$?s.jsxs(s.Fragment,{children:[s.jsxs(se,{onClick:Ie,variant:"outline",className:"bg-white/10 text-white hover:bg-white/20 border-white/30",children:[s.jsx(rn,{className:"h-4 w-4 mr-2"}),"Cancel"]}),s.jsxs(se,{onClick:De,className:"bg-white text-brandPrimary hover:bg-white/90",children:[s.jsx(Qn,{className:"h-4 w-4 mr-2"}),"Save Changes"]})]}):s.jsxs(s.Fragment,{children:[s.jsxs(se,{onClick:()=>I(!0),variant:"outline",className:"bg-white/10 text-white hover:bg-white/20 border-white/30",children:[s.jsx(Ai,{className:"h-4 w-4 mr-2"}),"Edit Job Info"]}),s.jsxs(se,{onClick:p,variant:"outline",className:"bg-white/10 text-white hover:bg-white/20 border-white/30",children:[s.jsx(_r,{className:"h-4 w-4 mr-2"}),"Financials"]}),le.length>0&&s.jsxs(se,{onClick:f,variant:"outline",className:"bg-white/10 text-white hover:bg-white/20 border-white/30",children:[s.jsx(tn,{className:"h-4 w-4 mr-2"}),"Takeoff Report"]})]})}),s.jsx("div",{className:"flex items-center space-x-2",children:Ee()})]})]})}),s.jsxs(Me,{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[Le==="residential"?s.jsx($l,{className:"h-5 w-5 text-white/70"}):s.jsx(or,{className:"h-5 w-5 text-white/70"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-white/70 text-sm",children:"Job Type"}),$?s.jsxs(st,{value:X.jobType,onValueChange:G=>te(ge=>({...ge,jobType:G})),children:[s.jsx(nt,{className:"bg-white/20 border-white/30 text-white",children:s.jsx(at,{})}),s.jsxs(rt,{children:[s.jsx(xe,{value:"residential",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx($l,{className:"h-4 w-4"}),s.jsx("span",{children:"Residential"})]})}),s.jsx(xe,{value:"commercial",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(or,{className:"h-4 w-4"}),s.jsx("span",{children:"Commercial"})]})})]})]}):s.jsx("p",{className:"font-semibold capitalize",children:Le})]})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(ss,{className:"h-5 w-5 text-white/70"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-white/70 text-sm",children:"General Contractor"}),$?s.jsx($e,{value:X.generalContractor,onChange:G=>te(ge=>({...ge,generalContractor:G.target.value})),placeholder:"Enter general contractor",className:"bg-white/20 border-white/30 text-white placeholder:text-white/70 mt-1"}):s.jsx("p",{className:"font-semibold",children:e==null?void 0:e.generalContractor})]})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(ss,{className:"h-5 w-5 text-white/70"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-white/70 text-sm",children:"Superintendent"}),$?s.jsx($e,{value:X.superintendent,onChange:G=>te(ge=>({...ge,superintendent:G.target.value})),placeholder:"Enter superintendent",className:"bg-white/20 border-white/30 text-white placeholder:text-white/70 mt-1"}):s.jsx("p",{className:"font-semibold",children:(e==null?void 0:e.superintendent)||"Not specified"})]})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Kf,{className:"h-5 w-5 text-white/70"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-white/70 text-sm",children:"Address"}),$?s.jsx($e,{value:X.address,onChange:G=>te(ge=>({...ge,address:G.target.value})),placeholder:"Enter job site address",className:"bg-white/20 border-white/30 text-white placeholder:text-white/70 mt-1"}):s.jsx("p",{className:"font-semibold",children:(e==null?void 0:e.address)||"Not specified"})]})]})]})]})}),s.jsx(Pt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},children:s.jsxs(Te,{className:"shadow-xl border-0 bg-white/90 backdrop-blur-sm",children:[s.jsx(Xe,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(dy,{className:"h-6 w-6 text-brandPrimary"}),s.jsx(Qe,{className:"text-2xl font-bold text-gray-900",children:"Scopes of Work"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[!ie()&&s.jsxs(se,{onClick:r,className:"bg-gradient-to-r from-brandPrimary to-brandSecondary hover:from-brandPrimary-600 hover:to-brandSecondary-600 text-white font-semibold",size:"sm",children:[s.jsx(un,{className:"h-4 w-4 mr-2"}),"Add Defaults"]}),s.jsxs(se,{onClick:l,variant:"outline",className:"border-brandPrimary text-brandPrimary hover:bg-brandPrimary/5",size:"sm",children:[s.jsx(Fo,{className:"h-4 w-4 mr-2"}),"New Scope"]})]})]})}),s.jsx(Me,{children:ae.length===0?s.jsxs("div",{className:"text-center py-12 construction-pattern rounded-xl",children:[s.jsx(mu,{className:"h-12 w-12 mx-auto text-gray-400 mb-4"}),s.jsx("p",{className:"text-gray-600 font-medium",children:"No scopes of work added yet"}),s.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"Add default scopes or create a new one to get started"})]}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:ae.map((G,ge)=>s.jsx(Pt.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:ge*.1},whileHover:{scale:1.02},children:s.jsxs(Te,{className:"hover:shadow-lg transition-all duration-300 border-l-4 border-l-brandPrimary relative group",children:[s.jsx("div",{className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity",children:s.jsxs(yr,{children:[s.jsx(br,{asChild:!0,children:s.jsx(se,{variant:"ghost",size:"icon",className:"text-red-500 hover:bg-red-100 h-7 w-7",children:s.jsx(Kt,{className:"h-4 w-4"})})}),s.jsxs(er,{children:[s.jsxs(tr,{children:[s.jsxs(rr,{children:['Delete Scope "',G.name,'"?']}),s.jsx(sr,{children:"This action cannot be undone. Are you sure you want to delete this scope?"})]}),s.jsxs(nr,{children:[s.jsx(ir,{children:"Cancel"}),s.jsx(ar,{onClick:()=>o(G.id),className:"bg-red-600 hover:bg-red-700",children:"Yes, delete scope"})]})]})]})}),s.jsxs(Me,{className:"p-4 cursor-pointer",onClick:()=>n(G),children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("h3",{className:"font-bold text-lg text-gray-900",children:G.name}),s.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold border ${Ne(G.status)}`,children:G.status})]}),s.jsx("p",{className:"text-gray-600 text-sm line-clamp-2",children:G.description})]})]})},G.id))})})]})}),(me==="active"||le.length>0)&&s.jsx(Pt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:s.jsxs(Te,{className:"shadow-xl border-0 bg-white/90 backdrop-blur-sm",children:[s.jsx(Xe,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(qj,{className:"h-6 w-6 text-brandSecondary"}),s.jsx(Qe,{className:"text-2xl font-bold text-gray-900",children:"Field Takeoffs"}),Le==="commercial"&&s.jsx("span",{className:"text-sm text-blue-600 bg-blue-100 px-2 py-1 rounded-full",children:"Commercial Mode"})]}),me==="active"&&s.jsxs(se,{onClick:a,className:"bg-gradient-to-r from-brandPrimary to-brandSecondary hover:from-brandPrimary-600 hover:to-brandSecondary-600 text-white font-semibold",children:[s.jsx(uy,{className:"h-4 w-4 mr-2"}),"New Takeoff Phase"]})]})}),s.jsx(Me,{children:le.length===0?s.jsxs("div",{className:"text-center py-12 construction-pattern rounded-xl",children:[s.jsx(qj,{className:"h-12 w-12 mx-auto text-gray-400 mb-4"}),s.jsx("p",{className:"text-gray-600 font-medium",children:"No takeoff phases created yet."}),s.jsx("p",{className:"text-gray-500 text-sm mt-1",children:me==="active"?"Create a phase to start adding takeoff entries.":"Takeoffs are available once the job is active."})]}):s.jsx("div",{className:"space-y-6",children:le.map(G=>s.jsxs("div",{className:"border rounded-lg p-4 bg-slate-50 shadow-md",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsxs("h3",{className:"font-bold text-xl text-gray-900 flex items-center",children:[s.jsx(uy,{className:"h-5 w-5 mr-2 text-brandSecondary"}),G.name]}),me==="active"&&s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs(se,{onClick:()=>ve(G),size:"sm",variant:"outline",className:"border-brandPrimary text-brandPrimary hover:bg-brandPrimary/5",children:[s.jsx(ya,{className:"h-4 w-4 mr-1"}),"Phase Accessories"]}),s.jsxs(se,{onClick:()=>i(G.id),size:"sm",className:"bg-gradient-to-r from-brandPrimary to-brandSecondary hover:from-brandPrimary-600 hover:to-brandSecondary-600 text-white font-semibold",children:[s.jsx(un,{className:"h-4 w-4 mr-1"}),"Add Entries to Phase"]}),s.jsxs(yr,{children:[s.jsx(br,{asChild:!0,children:s.jsxs(se,{size:"sm",variant:"outline",className:"border-red-500 text-red-500 hover:bg-red-50",children:[s.jsx(Kt,{className:"h-4 w-4 mr-1"}),"Delete Phase"]})}),s.jsxs(er,{children:[s.jsxs(tr,{children:[s.jsx(rr,{children:"Delete Takeoff Phase?"}),s.jsxs(sr,{children:['This will permanently delete the "',G.name,'" phase and all its entries. This action cannot be undone.']})]}),s.jsxs(nr,{children:[s.jsx(ir,{children:"Cancel"}),s.jsx(ar,{onClick:()=>Se(e.id,G.id),className:"bg-red-600 hover:bg-red-700",children:"Yes, delete phase"})]})]})]})]})]}),G.materials&&G.materials.length>0&&s.jsxs("div",{className:"mb-4 p-3 bg-brandPrimary/10 rounded-lg border border-brandPrimary/20",children:[s.jsxs("h4",{className:"font-semibold text-sm text-brandPrimary mb-2 flex items-center",children:[s.jsx(ya,{className:"h-4 w-4 mr-1"}),"Phase Materials (",G.materials.length," items)"]}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 text-xs",children:[G.materials.slice(0,8).map((ge,Pe)=>s.jsxs("div",{className:"text-brandPrimary",children:[ge.subtype||ge.type,": ",ge.quantity," ",ge.unit]},Pe)),G.materials.length>8&&s.jsxs("div",{className:"text-brandPrimary italic",children:["+",G.materials.length-8," more..."]})]})]}),(G.entries||[]).length>0?(G.entries||[]).map(ge=>s.jsxs("div",{className:"border rounded-md p-4 bg-white mb-4 shadow",children:[s.jsxs("div",{className:"flex justify-between items-center mb-3",children:[s.jsxs("h4",{className:"font-semibold text-lg text-gray-800 flex items-center",children:[s.jsx(Qs,{className:"h-5 w-5 mr-2 text-brandSecondary"}),oe(ge),Le==="commercial"&&ge.unitNumbers&&s.jsxs("span",{className:"ml-2 text-sm text-blue-600 bg-blue-100 px-2 py-1 rounded",children:["Units: ",ge.unitNumbers]})]}),me==="active"&&s.jsxs("div",{className:"space-x-2",children:[s.jsx(se,{variant:"ghost",size:"icon",className:"text-brandSecondary hover:bg-brandSecondary/10",onClick:()=>ue(G.id,ge),children:s.jsx(Ai,{className:"h-4 w-4"})}),s.jsxs(yr,{children:[s.jsx(br,{asChild:!0,children:s.jsx(se,{variant:"ghost",size:"icon",className:"text-red-600 hover:bg-red-100",children:s.jsx(Kt,{className:"h-4 w-4"})})}),s.jsxs(er,{children:[s.jsxs(tr,{children:[s.jsx(rr,{children:"Delete Entry?"}),s.jsxs(sr,{children:['This will permanently delete "',oe(ge),'" and all its board entries. This action cannot be undone.']})]}),s.jsxs(nr,{children:[s.jsx(ir,{children:"Cancel"}),s.jsx(ar,{onClick:()=>gt(G.id,ge.id),className:"bg-red-600 hover:bg-red-700",children:"Yes, delete entry"})]})]})]})]})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:(ge.boards||[]).map((Pe,Ve)=>s.jsx(Pt.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:Ve*.05},children:s.jsx(Te,{className:"border-l-4 border-l-brandSecondary hover:shadow-md transition-shadow",children:s.jsx(Me,{className:"p-3",children:s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsx("span",{className:"font-semibold text-sm text-gray-900",children:Pe.boardType}),s.jsxs("span",{className:"bg-brandSecondary/10 text-brandSecondary px-2 py-0.5 rounded text-xs font-medium",children:[Pe.quantity," pcs"]})]}),s.jsx("div",{className:"text-xs text-gray-600",children:s.jsxs("p",{children:[Pe.thickness,'" × ',Pe.width,'" × ',Pe.length,"'"]})})]})})})},Pe.id||Ve))}),ge.notes&&s.jsxs("p",{className:"mt-3 text-sm text-gray-600 italic bg-gray-50 p-2 rounded-md",children:[s.jsx("strong",{children:"Notes:"})," ",ge.notes]})]},ge.id)):s.jsx("p",{className:"text-sm text-gray-500 text-center py-4",children:me==="active"?'No entries in this phase yet. Click "Add Entries to Phase" to start.':"No entries in this phase."})]},G.id))})})]})}),s.jsx(Pt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},children:s.jsxs(Te,{className:"shadow-lg",children:[s.jsx(Xe,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(Qe,{className:"text-2xl font-bold text-gray-900",children:"Checklists"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs(se,{onClick:()=>q("checklists"),variant:U==="checklists"?"default":"outline",size:"sm",children:[s.jsx(mu,{className:"h-4 w-4 mr-2"}),"Checklists"]}),s.jsxs(se,{onClick:()=>q("templates"),variant:U==="templates"?"default":"outline",size:"sm",children:[s.jsx(tn,{className:"h-4 w-4 mr-2"}),"Templates"]}),s.jsxs(se,{onClick:()=>q("create"),className:"bg-gradient-to-r from-brandPrimary to-brandSecondary hover:from-brandPrimary-600 hover:to-brandSecondary-600 text-white",size:"sm",children:[s.jsx(un,{className:"h-4 w-4 mr-2"}),"Create Checklist"]})]})]})}),s.jsxs(Me,{children:[U==="checklists"&&s.jsx(see,{jobId:e.id,checklists:e.checklists||[],employees:P||[],onCreateChecklist:()=>q("create"),onUpdateChecklist:(G,ge,Pe)=>x(G,ge,Pe),onDeleteChecklist:(G,ge)=>m(G,ge),onCompleteChecklist:(G,ge)=>v(G,ge),onSaveChecklistTemplate:G=>{b(G)}}),U==="create"&&s.jsx(YI,{jobId:e.id,employees:P||[],onSubmit:(G,ge)=>{g(G,ge,()=>q("checklists"))},onCancel:()=>q("checklists"),onSaveAsTemplate:G=>{b(G,()=>q("checklists"))}}),U==="templates"&&s.jsx(aee,{templates:C(),employees:P||[],onUseTemplate:G=>{g(e.id,G,()=>q("checklists"))},onDeleteTemplate:G=>{S(G)}})]})]})}),s.jsx(Pt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},children:s.jsxs(Te,{className:"shadow-lg",children:[s.jsx(Xe,{children:s.jsx(Qe,{className:"text-2xl font-bold text-gray-900",children:"Documents"})}),s.jsx(Me,{children:s.jsx(iee,{jobId:e.id,documents:e.documents||[],onUploadDocument:(G,ge)=>{N(G,ge)},onDeleteDocument:(G,ge)=>{M(G,ge)},onUpdateDocument:(G,ge,Pe)=>{L(G,ge,Pe)}})})]})}),s.jsx(Pt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},children:s.jsxs(Te,{className:"shadow-lg",children:[s.jsx(Xe,{children:s.jsx(Qe,{className:"text-2xl font-bold text-gray-900",children:"Daily Log"})}),s.jsx(Me,{children:s.jsx(oee,{jobId:e.id,logs:T(e.id),employees:P||[],onAddLog:(G,ge)=>E(G,ge),onUpdateLog:(G,ge,Pe)=>A(G,ge,Pe),onDeleteLog:(G,ge)=>O(G,ge),onAddAttachment:(G,ge,Pe)=>W(G,ge,Pe),onRemoveAttachment:(G,ge,Pe)=>z(G,ge,Pe)})})]})}),s.jsx(Pt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},children:s.jsx(pee,{job:e,employees:P||[],subcontractors:[],vendors:[]})}),s.jsx(OX,{isOpen:!!F,onClose:()=>V(null),floorSpaceEntry:F==null?void 0:F.floorSpaceEntry,onSave:wt,onDelete:G=>{gt(F.phaseId,G),V(null)},jobType:Le}),s.jsx(FX,{isOpen:!!B,onClose:()=>Y(null),phase:B,onSave:we})]})},Hr=Q.forwardRef(({className:e,...t},n)=>s.jsx("div",{className:"relative w-full overflow-auto",children:s.jsx("table",{ref:n,className:Ft("w-full caption-bottom text-sm",e),...t})}));Hr.displayName="Table";const qr=Q.forwardRef(({className:e,...t},n)=>s.jsx("thead",{ref:n,className:Ft("[&_tr]:border-b",e),...t}));qr.displayName="TableHeader";const Vr=Q.forwardRef(({className:e,...t},n)=>s.jsx("tbody",{ref:n,className:Ft("[&_tr:last-child]:border-0",e),...t}));Vr.displayName="TableBody";const gee=Q.forwardRef(({className:e,...t},n)=>s.jsx("tfoot",{ref:n,className:Ft("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t}));gee.displayName="TableFooter";const Jt=Q.forwardRef(({className:e,...t},n)=>s.jsx("tr",{ref:n,className:Ft("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...t}));Jt.displayName="TableRow";const qe=Q.forwardRef(({className:e,...t},n)=>s.jsx("th",{ref:n,className:Ft("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t}));qe.displayName="TableHead";const ze=Q.forwardRef(({className:e,...t},n)=>s.jsx("td",{ref:n,className:Ft("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...t}));ze.displayName="TableCell";const vee=Q.forwardRef(({className:e,...t},n)=>s.jsx("caption",{ref:n,className:Ft("mt-4 text-sm text-muted-foreground",e),...t}));vee.displayName="TableCaption";const xee=()=>Yj.generateEmployees();function GI(){const[e,t]=j.useState([]),[n,r]=j.useState(!0);j.useEffect(()=>{console.log("=== useEmployeeData: Initial useEffect started ===");let y=gn.load(wn.EMPLOYEES,[],"employees");console.log("useEmployeeData: Loaded employees from storage (raw):",y),y.length===0?(console.log("useEmployeeData: No employees found, creating test employees."),y=xee(),gn.save(wn.EMPLOYEES,y,"employees")):(console.log("useEmployeeData: Existing employees found, updating fields."),y=y.map(g=>{const x={...g};return(!x.payType||x.payType!=="hourly"&&x.payType!=="salary")&&(x.payType="hourly"),(typeof x.salaryAmount!="number"||isNaN(x.salaryAmount))&&(x.salaryAmount=0),(typeof x.hourlyRate!="number"||isNaN(x.hourlyRate))&&(x.hourlyRate=x.hourlyRate||0),(typeof x.bankedHours!="number"||isNaN(x.bankedHours))&&(x.bankedHours=0),(typeof x.perDiem!="number"||isNaN(x.perDiem))&&(x.perDiem=0),(typeof x.fuelAllowance!="number"||isNaN(x.fuelAllowance))&&(x.fuelAllowance=0),Array.isArray(x.toolDeductions)||(x.toolDeductions=[]),Array.isArray(x.documents)||(x.documents=[]),(typeof x.childSupportDeduction!="number"||isNaN(x.childSupportDeduction))&&(x.childSupportDeduction=0),(typeof x.miscDeduction!="number"||isNaN(x.miscDeduction))&&(x.miscDeduction=0),typeof x.miscDeductionNote!="string"&&(x.miscDeductionNote=""),x}),gn.save(wn.EMPLOYEES,y,"employees")),console.log("useEmployeeData: Final employees array before setting state:",y),t(y),r(!1),console.log("useEmployeeData: Initial useEffect finished. Loading set to false.")},[]),j.useEffect(()=>{n||(console.log("=== EMPLOYEES USEEFFECT TRIGGERED ==="),console.log("Loading state:",n),console.log("Employees array length:",e.length),console.log("Employees data:",e),console.log("About to save employees to localStorage..."),gn.save(wn.EMPLOYEES,e,"employees"),console.log("=== END EMPLOYEES USEEFFECT ==="))},[e,n]);const a=(y,g)=>{console.log("addEmployee called with data:",y);const x={id:Ys(),...y,payType:y.payType||"hourly",salaryAmount:y.payType==="salary"&&parseFloat(y.salaryAmount)||0,hourlyRate:y.payType==="hourly"&&parseFloat(y.hourlyRate)||0,bankedHours:0,perDiem:parseFloat(y.perDiem)||0,fuelAllowance:parseFloat(y.fuelAllowance)||0,toolDeductions:[],documents:[],childSupportDeduction:0,miscDeduction:0,miscDeductionNote:"",isActive:!0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};console.log("Created new employee object:",x),t(m=>{console.log("Inside setEmployees callback. Previous state (prev):",m),console.log("Previous state length (prev.length):",m.length);const v=[...m,x];return console.log("Updated employees array:",v),v}),pe({title:"Employee Added! 👷",description:`${y.firstName} ${y.lastName} has been added to the system.`}),g&&(console.log("Calling callback function"),g())},i=(y,g,x)=>{console.log("=== UPDATE EMPLOYEE FUNCTION CALLED ==="),console.log("Employee ID:",y),console.log("Updates:",g),t(m=>{console.log("Inside setEmployees callback. Previous state (prev):",m),console.log("Previous state length (prev.length):",m.length);const v=m.map(b=>b.id===y?{...b,...g,updatedAt:new Date().toISOString()}:b);return console.log("Updated employees array (after map):",v),console.log("Updated employees array length:",v.length),v}),console.log("setEmployees called, state should update now"),setTimeout(()=>{console.log("--- State after setEmployees (via setTimeout) ---"),console.log("Current employees state:",e),console.log("Current employees state length:",e.length)},500),pe({title:"Employee Updated! ✨",description:"Employee information has been updated successfully."}),console.log("About to call callback if provided"),x&&x(y,g),console.log("=== END UPDATE EMPLOYEE FUNCTION ===")},o=j.useCallback((y,g)=>{t(x=>x.filter(m=>m.id!==y)),pe({title:"Employee Removed! 🗑️",description:"The employee has been removed from the system.",variant:"destructive"}),g&&g(y)},[]),l=j.useCallback((y,g,x)=>{const m={id:Ys(),description:g.description,totalAmount:parseFloat(g.totalAmount),weeklyDeduction:parseFloat(g.weeklyDeduction),remainingBalance:parseFloat(g.totalAmount),startDate:new Date().toISOString()};t(v=>v.map(b=>b.id===y?{...b,toolDeductions:[...b.toolDeductions||[],m],updatedAt:new Date().toISOString()}:b)),pe({title:"Tool Deduction Added! 🔧",description:`${g.description} deduction of $${g.weeklyDeduction}/week added.`}),x&&x()},[]),c=j.useCallback((y,g,x)=>{t(m=>m.map(v=>v.id===y?{...v,toolDeductions:(v.toolDeductions||[]).filter(b=>b.id!==g),updatedAt:new Date().toISOString()}:v)),pe({title:"Tool Deduction Removed! 🗑️",description:"Tool deduction has been removed."}),x&&x()},[]),d=j.useCallback((y,g,x)=>{const m=e.find(b=>b.id===y);if(!m){pe({title:"Error",description:"Employee not found.",variant:"destructive"});return}const v=(m.bankedHours||0)+parseFloat(g);t(b=>b.map(C=>C.id===y?{...C,bankedHours:v,updatedAt:new Date().toISOString()}:C)),pe({title:"Hours Banked! 🏦",description:`${g} hours banked for ${m.firstName}. Total banked: ${v} hours.`}),x&&x()},[e]),u=j.useCallback((y,g,x)=>{const m=e.find(C=>C.id===y);if(!m){pe({title:"Error",description:"Employee not found.",variant:"destructive"});return}const v=m.bankedHours||0;if(g>v){pe({title:"Insufficient Banked Hours",description:`Only ${v} hours available in bank.`,variant:"destructive"});return}const b=v-parseFloat(g);t(C=>C.map(S=>S.id===y?{...S,bankedHours:b,updatedAt:new Date().toISOString()}:S)),pe({title:"Banked Hours Used! 💰",description:`${g} banked hours used for ${m.firstName}. Remaining: ${b} hours.`}),x&&x()},[e]),h=j.useCallback((y,g)=>{t(x=>x.map(m=>m.id===y?{...m,toolDeductions:g,updatedAt:new Date().toISOString()}:m))},[]),f=j.useCallback((y,g,x)=>{t(m=>m.map(v=>v.id===y?{...v,documents:[...v.documents||[],g],updatedAt:new Date().toISOString()}:v)),pe({title:"Document Added! 📄",description:`${g.name} has been uploaded successfully.`}),x&&x()},[]),p=j.useCallback((y,g,x)=>{t(m=>m.map(v=>v.id===y?{...v,documents:(v.documents||[]).filter(b=>b.id!==g),updatedAt:new Date().toISOString()}:v)),pe({title:"Document Removed! 🗑️",description:"Document has been deleted successfully."}),x&&x()},[]);return{employees:e,loading:n,addEmployee:a,updateEmployee:i,deleteEmployee:o,addToolDeduction:l,removeToolDeduction:c,bankHours:d,useBankedHours:u,updateEmployeeToolDeductions:h,addEmployeeDocument:f,removeEmployeeDocument:p}}function ep(){const[e,t]=j.useState([]),[n,r]=j.useState([]),[a,i]=j.useState([]),[o,l]=j.useState(!0),{employees:c,updateEmployeeToolDeductions:d}=GI();j.useEffect(()=>{const B=gn.load(wn.TIME_ENTRIES,[],"timeEntries"),Y=gn.load(wn.PIECE_RATE_ENTRIES,[],"pieceRateEntries"),$=gn.load(wn.PAYROLL_ENTRIES,[],"payrollEntries");t(B),r(Y),i($),l(!1)},[]),j.useEffect(()=>{o||gn.save(wn.TIME_ENTRIES,e,"timeEntries")},[e,o]),j.useEffect(()=>{o||gn.save(wn.PIECE_RATE_ENTRIES,n,"pieceRateEntries")},[n,o]),j.useEffect(()=>{o||gn.save(wn.PAYROLL_ENTRIES,a,"payrollEntries")},[a,o]);const u=j.useCallback(()=>{console.log("=== CLEARING ALL TIME ENTRIES ==="),t([]),r([]),i([]),Object.keys(localStorage).forEach(Y=>{(Y.includes("_hang_progress")||Y.includes("_coat_progress"))&&(localStorage.removeItem(Y),console.log("Removed progress key:",Y))}),gn.save(wn.TIME_ENTRIES,[],"timeEntries"),gn.save(wn.PIECE_RATE_ENTRIES,[],"pieceRateEntries"),gn.save(wn.PAYROLL_ENTRIES,[],"payrollEntries"),pe({title:"All Time Entries Cleared! 🧹",description:"All time entries, piece rate entries, payroll reports, and progress data have been cleared. Starting fresh!"}),console.log("=== END CLEARING ===")},[]),h=j.useCallback(B=>{console.log("=== RESETTING ALL TIME AND PAYROLL DATA ==="),t([]),r([]),i([]),Object.keys(localStorage).forEach($=>{($.includes("_hang_progress")||$.includes("_coat_progress"))&&(localStorage.removeItem($),console.log("Removed progress key:",$))}),gn.save(wn.TIME_ENTRIES,[],"timeEntries"),gn.save(wn.PIECE_RATE_ENTRIES,[],"pieceRateEntries"),gn.save(wn.PAYROLL_ENTRIES,[],"payrollEntries"),B&&typeof B=="function"&&B(),pe({title:"Complete Data Reset! 🧹",description:"All time entries, payroll reports, job labor costs, and progress data have been completely cleared!"}),console.log("=== END COMPLETE RESET ===")},[]),f=j.useCallback((B,Y,$)=>{const I=c.filter(q=>q.isActive).map(q=>{const X=e.filter(Ie=>Ie.employeeId===q.id&&Ie.clockOutTime&&new Date(Ie.clockInTime)>=new Date(B)&&new Date(Ie.clockInTime)<=new Date(Y)),te=n.filter(Ie=>Ie.employeeId===q.id&&Ie.status==="completed"&&new Date(Ie.startTime)>=new Date(B)&&new Date(Ie.startTime)<=new Date(Y)),ae=X.reduce((Ie,oe)=>Ie+(oe.totalHours||0),0),le=Math.min(ae,40),me=Math.max(0,ae-40),Le=te.reduce((Ie,oe)=>Ie+(oe.totalEarnings||0),0);let ie=0;q.payType==="salary"?ie=q.salaryAmount||0:ie=le*q.hourlyRate+me*q.hourlyRate*1.5;const Ne=new Set(X.map(Ie=>new Date(Ie.clockInTime).toDateString())).size,Be=(q.perDiem||0)*Ne,Ue=q.fuelAllowance||0;let _e=0;const ue=(q.toolDeductions||[]).map(Ie=>{if(Ie.remainingBalance>0){const oe=Math.min(Ie.weeklyDeduction,Ie.remainingBalance);return _e+=oe,{...Ie,remainingBalance:Ie.remainingBalance-oe}}return Ie}),wt=q.childSupportDeduction||0,gt=q.miscDeduction||0,ve=q.miscDeductionNote||"";d(q.id,ue);const we=ie+Le+Be+Ue,Se=_e+wt+gt,De=we-Se;return{employeeId:q.id,employeeName:`${q.firstName} ${q.lastName}`,employeeType:q.employeeType,payType:q.payType,regularHours:le,overtimeHours:me,totalHours:ae,hourlyRate:q.hourlyRate,salaryAmount:q.salaryAmount,basePay:ie,pieceRateEarnings:Le,perDiemDays:Ne,perDiemRate:q.perDiem,perDiemTotal:Be,fuelAllowance:Ue,toolDeductionsTotal:_e,childSupportDeduction:wt,miscDeduction:gt,miscDeductionNote:ve,grossPay:we,netPay:De,bankedHours:q.bankedHours||0,toolDeductions:ue.filter(Ie=>Ie.remainingBalance>0)}}),U={id:Ys(),startDate:B,endDate:Y,generatedDate:new Date().toISOString(),payrollData:I,status:"draft",perDiemTotal:I.reduce((q,X)=>q+X.perDiemTotal,0),fuelAllowance:I.reduce((q,X)=>q+X.fuelAllowance,0),toolDeductionsTotal:I.reduce((q,X)=>q+X.toolDeductionsTotal,0),childSupportDeductionTotal:I.reduce((q,X)=>q+X.childSupportDeduction,0),miscDeductionTotal:I.reduce((q,X)=>q+X.miscDeduction,0)};i(q=>[...q,U]),pe({title:"Payroll Generated! 💰",description:`Payroll for ${new Date(B).toLocaleDateString()} - ${new Date(Y).toLocaleDateString()} has been generated.`}),$&&$(U)},[c,e,n,d]),p=j.useCallback((B,Y,$)=>{console.log("Updating payroll entry:",B,Y),i(I=>I.map(q=>q.id===B?{...q,...Y,updatedAt:new Date().toISOString()}:q)),pe({title:"Payroll Updated! ✨",description:"Payroll report has been updated successfully."}),$&&$()},[]),y=j.useCallback((B,Y,$)=>{const I=c.find(X=>X.id===B);if(!I){pe({title:"Error",description:"Employee not found.",variant:"destructive"});return}if(e.find(X=>X.employeeId===B&&!X.clockOutTime)){pe({title:"Already Clocked In",description:`${I.firstName} is already clocked in.`,variant:"destructive"});return}const q={id:Ys(),employeeId:B,jobId:Y,clockInTime:new Date().toISOString(),clockOutTime:null,totalHours:0,notes:"",entryType:"hourly",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};console.log("Creating new time entry:",q),t(X=>[...X,q]),pe({title:"Clocked In! ⏰",description:`${I.firstName} ${I.lastName} has clocked in successfully.`}),$&&$()},[c,e]),g=j.useCallback((B,Y="",$)=>{const I=c.find(le=>le.id===B);if(!I){pe({title:"Error",description:"Employee not found.",variant:"destructive"});return}const U=e.find(le=>le.employeeId===B&&!le.clockOutTime);if(!U){pe({title:"Not Clocked In",description:`${I.firstName} is not currently clocked in.`,variant:"destructive"});return}const q=new Date().toISOString(),X=new Date(U.clockInTime),ae=(new Date(q)-X)/(1e3*60*60);console.log("Clocking out entry:",U.id,"Total hours:",ae),t(le=>le.map(me=>me.id===U.id?{...me,clockOutTime:q,totalHours:Math.round(ae*100)/100,notes:Y,updatedAt:new Date().toISOString()}:me)),pe({title:"Clocked Out! 🏁",description:`${I.firstName} ${I.lastName} has clocked out. Total time: ${Math.round(ae*100)/100} hours.`}),$&&$()},[c,e]),x=j.useCallback((B,Y,$)=>n.filter(U=>U.jobId===B&&U.employeeId===Y&&U.coat===$&&U.status==="completed").reduce((U,q)=>U+(q.completionPercentage||0),0),[n]),m=j.useCallback((B,Y)=>{const $=n.filter(I=>I.jobId===B&&I.employeeId===Y&&I.coat==="hang"&&I.status==="completed");return Math.max(0,...$.map(I=>I.completionPercentage||0))},[n]),v=j.useCallback((B,Y,$)=>x(B,Y,$)<100,[x]),b=j.useCallback((B,Y,$=[])=>{const I=$.find(ae=>ae.id===B);if(!I)return console.log("Job not found for coat determination"),[];const U=(I.scopes||[]).find(ae=>ae.name.toLowerCase().includes("finish"));if(!U)return console.log("No finish scope found, using default coats"),["tape","bed","skim","sand"].filter(le=>v(B,Y,le));const q=U.ceilingFinish||"",X=U.wallFinish||"";console.log("Determining coats for:",{ceilingFinish:q,wallFinish:X});let te=[];return q.includes("Level 5")||X.includes("Level 5")?te=["tape","bed","skim","level5","sand"]:q.includes("Stomp")||q.includes("Knockdown")||q.includes("Splatter")||q.includes("Texture")?te=["tape","bed","skim","texture","sand"]:te=["tape","bed","skim","sand"],console.log("Available coat sequence:",te),te.filter(ae=>v(B,Y,ae))},[v]),C=j.useCallback((B,Y,$)=>{const I=x(B,Y,$);return Math.max(0,100-I)},[x]),S=j.useCallback((B,Y,$,I)=>{const U=c.find(le=>le.id===B);if(!U){pe({title:"Error",description:"Employee not found.",variant:"destructive"});return}if(U.role==="Laborer"){pe({title:"Not Allowed",description:"Laborers can only work hourly, not piece rate.",variant:"destructive"});return}const q=e.find(le=>le.employeeId===B&&!le.clockOutTime),X=n.find(le=>le.employeeId===B&&le.status==="active");if(q||X){pe({title:"Already Working",description:`${U.firstName} is already working on a job.`,variant:"destructive"});return}if(U.role==="Finisher"&&!v(Y,B,$)){pe({title:"Coat Already Complete",description:`The ${$} coat is already 100% complete for this job.`,variant:"destructive"});return}if(U.role==="Hanger"&&m(Y,B)>=100){pe({title:"Job Already Complete",description:"This job is already 100% complete for hanging.",variant:"destructive"});return}const te={id:Ys(),employeeId:B,jobId:Y,role:U.role,coat:$,startTime:new Date().toISOString(),endTime:null,status:"active",completionPercentage:0,pieceRate:0,totalEarnings:0,apprenticeId:null,apprenticeHours:0,apprenticeCost:0,notes:"",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};console.log("Creating new piece rate entry:",te),r(le=>[...le,te]);const ae=U.role==="Hanger"?"hanging":`${$} coat`;pe({title:"Punched In for Piece Rate! 📐",description:`${U.firstName} ${U.lastName} is now working ${ae} piece rate.`}),I&&I()},[c,e,n,v,m]),P=j.useCallback((B,Y,$,I,U="",q=null,X=0,te=0,ae)=>{const le=n.find(Ue=>Ue.id===B);if(!le){pe({title:"Error",description:"Piece rate entry not found.",variant:"destructive"});return}const me=c.find(Ue=>Ue.id===le.employeeId),Le=parseFloat(Y);if(console.log("=== COMPLETING PIECE RATE ENTRY ==="),console.log("Entry ID:",B),console.log("Completion %:",Le),console.log("Employee Role:",me==null?void 0:me.role),console.log("Coat:",le.coat),(me==null?void 0:me.role)==="Hanger"){const Ue=m(le.jobId,le.employeeId);if(console.log("Current hang progress:",Ue),Le>100){pe({title:"Invalid Completion Percentage",description:"Completion percentage cannot exceed 100%.",variant:"destructive"});return}if(Le<=Ue){pe({title:"Invalid Completion Percentage",description:`Completion percentage must be greater than current progress (${Ue}%).`,variant:"destructive"});return}}if((me==null?void 0:me.role)==="Finisher"){const Ue=x(le.jobId,le.employeeId,le.coat),_e=100-Ue;if(console.log("Current coat progress:",Ue),console.log("Remaining percentage:",_e),Le>_e){pe({title:"Invalid Completion Percentage",description:`Only ${_e}% remaining for this coat. Cannot exceed 100% total.`,variant:"destructive"});return}if(Le<=0){pe({title:"Invalid Completion Percentage",description:"Completion percentage must be greater than 0%.",variant:"destructive"});return}}console.log("Validation passed, completing entry...");const ie={...le,endTime:new Date().toISOString(),status:"completed",completionPercentage:Le,pieceRate:parseFloat($),totalEarnings:Math.round(I*100)/100,apprenticeId:q||null,apprenticeHours:parseFloat(X)||0,apprenticeCost:parseFloat(te)||0,notes:U,updatedAt:new Date().toISOString()};console.log("Updated entry:",ie),r(Ue=>{const _e=Ue.map(ue=>ue.id===B?ie:ue);return console.log("New piece rate entries array:",_e.length),_e});const Ne=(me==null?void 0:me.role)==="Hanger"?"hanging":`${le.coat} coat`,Be=(me==null?void 0:me.role)==="Hanger"?`${Le}% total`:`${Le}% of ${Ne}`;pe({title:"Piece Rate Entry Completed! 💰",description:`${me==null?void 0:me.firstName} completed ${Be}. Net earnings: $${Math.round(I*100)/100}.`}),console.log("=== END COMPLETING PIECE RATE ENTRY ==="),ae&&ae()},[n,c,m,x]),D=j.useCallback((B,Y,$)=>{t(I=>I.map(U=>{if(U.id===B){const q={...U,...Y,updatedAt:new Date().toISOString()};if(Y.clockInTime||Y.clockOutTime){const X=new Date(q.clockInTime),te=q.clockOutTime?new Date(q.clockOutTime):null;if(te){const ae=(te-X)/36e5;q.totalHours=Math.round(ae*100)/100}}return q}return U})),pe({title:"Time Entry Updated! ✅",description:"Time entry has been updated successfully."}),$&&$()},[]),N=j.useCallback((B,Y)=>{t($=>$.filter(I=>I.id!==B)),pe({title:"Time Entry Deleted! 🗑️",description:"The time entry has been removed.",variant:"destructive"}),Y&&Y(B)},[]),M=j.useCallback((B,Y)=>{r($=>$.filter(I=>I.id!==B)),pe({title:"Piece Rate Entry Deleted! 🗑️",description:"The piece rate entry has been removed.",variant:"destructive"}),Y&&Y(B)},[]),L=j.useCallback(B=>e.find(Y=>Y.employeeId===B&&!Y.clockOutTime),[e]),T=j.useCallback(B=>n.find(Y=>Y.employeeId===B&&Y.status==="active"),[n]),E=j.useCallback((B,Y,$)=>$==="hang"?m(B,Y):x(B,Y,$),[m,x]),A=j.useCallback((B,Y=null,$=null)=>{let I=e.filter(U=>U.employeeId===B);return Y&&(I=I.filter(U=>new Date(U.clockInTime)>=new Date(Y))),$&&(I=I.filter(U=>new Date(U.clockInTime)<=new Date($))),I.sort((U,q)=>new Date(q.clockInTime)-new Date(U.clockInTime))},[e]),O=j.useCallback((B,Y=null,$=null)=>{let I=n.filter(U=>U.employeeId===B);return Y&&(I=I.filter(U=>new Date(U.startTime)>=new Date(Y))),$&&(I=I.filter(U=>new Date(U.startTime)<=new Date($))),I.sort((U,q)=>new Date(q.startTime)-new Date(U.startTime))},[n]),W=j.useCallback((B,Y=null,$=null)=>{let I=e.filter(U=>U.jobId===B);return Y&&(I=I.filter(U=>new Date(U.clockInTime)>=new Date(Y))),$&&(I=I.filter(U=>new Date(U.clockInTime)<=new Date($))),I.sort((U,q)=>new Date(q.clockInTime)-new Date(U.clockInTime))},[e]),z=j.useCallback((B,Y=null,$=null)=>A(B,Y,$).reduce((U,q)=>U+(q.totalHours||0),0),[A]),F=j.useCallback((B,Y=null,$=null)=>O(B,Y,$).reduce((U,q)=>U+(q.totalEarnings||0),0),[O]),V=j.useCallback((B,Y=null,$=null)=>W(B,Y,$).reduce((U,q)=>U+(q.totalHours||0),0),[W]);return{timeEntries:e,employees:c,pieceRateEntries:n,payrollEntries:a,loading:o,clockIn:y,clockOut:g,punchInPieceRate:S,completePieceRateEntry:P,updateTimeEntry:D,deleteTimeEntry:N,deletePieceRateEntry:M,getEmployeeActiveEntry:L,getEmployeeActivePieceRateEntry:T,getJobPieceRateProgress:E,getEmployeeTimeEntries:A,getEmployeePieceRateEntries:O,getJobTimeEntries:W,getTotalHoursForEmployee:z,getTotalEarningsForEmployee:F,getTotalHoursForJob:V,clearAllTimeEntries:u,resetAllTimeAndPayrollData:h,getJobCoatProgress:x,getJobHangProgress:m,isCoatAvailable:v,getAvailableCoats:b,getRemainingCoatPercentage:C,generatePayroll:f,updatePayrollEntry:p}}function yee(){const[e,t]=j.useState([]),[n,r]=j.useState(!0);return j.useEffect(()=>{const u=gn.load(wn.DAILY_LOGS,[],"dailyLogs");t(u)},[]),j.useEffect(()=>{gn.save(wn.DAILY_LOGS,e,"dailyLogs")},[e]),{dailyLogs:e,loading:n,getLogsForJob:u=>{try{return u?e[u]||[]:(console.warn("getLogsForJob called without jobId"),[])}catch(h){return console.error("Error in getLogsForJob:",h),[]}},addLogEntry:(u,h)=>{try{if(!u)return console.error("addLogEntry called without jobId"),null;const f={id:Date.now().toString(36)+Math.random().toString(36).substr(2),...h,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return t(p=>({...p,[u]:[...p[u]||[],f]})),f}catch(f){return console.error("Error in addLogEntry:",f),null}},updateLogEntry:(u,h,f)=>{t(p=>({...p,[u]:(p[u]||[]).map(y=>y.id===h?{...y,...f,updatedAt:new Date().toISOString()}:y)}))},deleteLogEntry:(u,h)=>{t(f=>({...f,[u]:(f[u]||[]).filter(p=>p.id!==h)}))},addAttachmentToLog:(u,h,f)=>{const p={id:Date.now().toString(36)+Math.random().toString(36).substr(2),...f,uploadedAt:new Date().toISOString()};return t(y=>({...y,[u]:(y[u]||[]).map(g=>g.id===h?{...g,attachments:[...g.attachments||[],p],updatedAt:new Date().toISOString()}:g)})),p},removeAttachmentFromLog:(u,h,f)=>{t(p=>({...p,[u]:(p[u]||[]).map(y=>y.id===h?{...y,attachments:(y.attachments||[]).filter(g=>g.id!==f),updatedAt:new Date().toISOString()}:y)}))}}}class bee{constructor(){this.loadLocationData()}loadLocationData(){const t=localStorage.getItem("locationData");t?this.locationData=JSON.parse(t):(this.locationData={jobSites:{},safetyIncidents:[],geofenceRadius:500,locationHistory:[]},this.saveLocationData())}saveLocationData(){localStorage.setItem("locationData",JSON.stringify(this.locationData))}addJobSite(t,n,r,a,i=null){this.locationData.jobSites[t]||(this.locationData.jobSites[t]=[]);const o={id:Date.now()+Math.random(),name:n,latitude:parseFloat(r),longitude:parseFloat(a),radius:i||this.locationData.geofenceRadius,createdAt:new Date().toISOString(),isActive:!0};return this.locationData.jobSites[t].push(o),this.saveLocationData(),o}updateJobSite(t,n,r){const a=this.locationData.jobSites[t];if(a){const i=a.findIndex(o=>o.id===n);if(i!==-1)return this.locationData.jobSites[t][i]={...this.locationData.jobSites[t][i],...r},this.saveLocationData(),this.locationData.jobSites[t][i]}return null}deleteJobSite(t,n){const r=this.locationData.jobSites[t];r&&(this.locationData.jobSites[t]=r.filter(a=>a.id!==n),this.saveLocationData())}getJobSites(t){return this.locationData.jobSites[t]||[]}calculateDistance(t,n,r,a){const o=this.deg2rad(r-t),l=this.deg2rad(a-n),c=Math.sin(o/2)*Math.sin(o/2)+Math.cos(this.deg2rad(t))*Math.cos(this.deg2rad(r))*Math.sin(l/2)*Math.sin(l/2);return 20902231*(2*Math.atan2(Math.sqrt(c),Math.sqrt(1-c)))}deg2rad(t){return t*(Math.PI/180)}isWithinGeofence(t,n,r,a,i){return this.calculateDistance(t,n,r,a)<=i}findNearestJobSite(t,n,r){const a=this.getJobSites(r);if(a.length===0)return null;let i=null,o=1/0;return a.forEach(l=>{if(l.isActive){const c=this.calculateDistance(t,n,l.latitude,l.longitude);c<o&&(o=c,i={...l,distance:c})}}),i}validateLocationForJob(t,n,r){const a=this.findNearestJobSite(t,n,r);if(!a)return{valid:!1,message:"No job sites found for this job"};const i=this.isWithinGeofence(t,n,a.latitude,a.longitude,a.radius);return{valid:i,site:a,message:i?`Location verified at ${a.name}`:`Must be within ${a.radius} feet of ${a.name}`}}addLocationHistory(t,n,r,a,i,o=null){const l={id:Date.now()+Math.random(),employeeId:t,jobId:n,latitude:parseFloat(r),longitude:parseFloat(a),action:i,siteId:o,timestamp:new Date().toISOString(),accuracy:null};return this.locationData.locationHistory.push(l),this.locationData.locationHistory.length>1e3&&(this.locationData.locationHistory=this.locationData.locationHistory.slice(-1e3)),this.saveLocationData(),l}getLocationHistory(t=null,n=null,r=100){let a=this.locationData.locationHistory;return t&&(a=a.filter(i=>i.employeeId===t)),n&&(a=a.filter(i=>i.jobId===n)),a.slice(-r).reverse()}addSafetyIncident(t){const n={id:Date.now()+Math.random(),employeeId:t.employeeId,jobId:t.jobId,siteId:t.siteId,type:t.type,severity:t.severity,description:t.description,location:{latitude:t.latitude,longitude:t.longitude},photos:t.photos||[],witnesses:t.witnesses||[],reportedBy:t.reportedBy,reportedAt:new Date().toISOString(),status:"reported",investigationNotes:[],resolutionNotes:"",resolvedAt:null};return this.locationData.safetyIncidents.push(n),this.saveLocationData(),n}updateSafetyIncident(t,n){const r=this.locationData.safetyIncidents.findIndex(a=>a.id===t);return r!==-1?(this.locationData.safetyIncidents[r]={...this.locationData.safetyIncidents[r],...n},this.saveLocationData(),this.locationData.safetyIncidents[r]):null}getSafetyIncidents(t=null,n=null,r=50){let a=this.locationData.safetyIncidents;return t&&(a=a.filter(i=>i.jobId===t)),n&&(a=a.filter(i=>i.status===n)),a.slice(-r).reverse()}updateGeofenceRadius(t){this.locationData.geofenceRadius=parseInt(t),this.saveLocationData()}getGeofenceRadius(){return this.locationData.geofenceRadius}exportLocationData(){return this.locationData}importLocationData(t){this.locationData={...this.locationData,...t},this.saveLocationData()}getCurrentLocation(){return new Promise((t,n)=>{if(!navigator.geolocation){n(new Error("Geolocation is not supported by this browser"));return}navigator.geolocation.getCurrentPosition(r=>{t({latitude:r.coords.latitude,longitude:r.coords.longitude,accuracy:r.coords.accuracy})},r=>{n(r)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:3e5})})}}const Gs=new bee,wee=.17;function rc(){const[e,t]=j.useState([]),[n,r]=j.useState(!0),[a,i]=j.useState(Date.now()),{timeEntries:o,pieceRateEntries:l,employees:c}=ep(),{addEmployee:d,updateEmployee:u,deleteEmployee:h,addToolDeduction:f,removeToolDeduction:p,bankHours:y,useBankedHours:g,updateEmployeeToolDeductions:x,addEmployeeDocument:m,removeEmployeeDocument:v}=GI(),{getLogsForJob:b,addLogEntry:C,updateLogEntry:S,deleteLogEntry:P,addAttachmentToLog:D,removeAttachmentFromLog:N}=yee();j.useEffect(()=>{var Se,De;console.log("=== Loading jobs from localStorage ===");const ve=gn.load(wn.JOBS,[],"jobs");console.log("Loaded jobs from storage:",ve),console.log("Loaded jobs array length:",ve.length);const we=ve.find(Ie=>Ie.id==="test-job-2");we&&console.log("Target job estimate sqft loaded:",(De=(Se=we.financials)==null?void 0:Se.estimate)==null?void 0:De.sqft),t([...ve]),r(!1),i(Date.now()),console.log("=== Jobs loaded from localStorage ===")},[]),j.useEffect(()=>{var ve,we;if(!n){console.log("=== Saving jobs to localStorage ==="),console.log("Jobs to save:",e),console.log("Jobs array length:",e.length);const Se=e.find(De=>De.id==="test-job-2");Se&&console.log("Target job estimate sqft being saved:",(we=(ve=Se.financials)==null?void 0:ve.estimate)==null?void 0:we.sqft),gn.save(wn.JOBS,e,"jobs"),console.log("=== Jobs saved to localStorage ===")}},[e,n]);const M=j.useCallback((ve,we,Se,De)=>{const Ie=we.filter(Ze=>Ze.jobId===ve.id&&Ze.clockOutTime),oe=Se.filter(Ze=>Ze.jobId===ve.id&&Ze.status==="completed"),Ee=[],G=new Map;Ie.forEach(Ze=>{const jt=De.find(ct=>ct.id===Ze.employeeId);if(jt&&Ze.totalHours){const ct=Ze.totalHours*jt.hourlyRate,yt=`hourly-${jt.firstName}-${jt.lastName}`;if(G.has(yt)){const Yt=G.get(yt);Yt.amount+=ct,Yt.hours+=Ze.totalHours}else G.set(yt,{id:`labor-${Ys()}`,description:`${jt.firstName} ${jt.lastName} - Hourly Labor`,amount:ct,hours:Ze.totalHours,type:"hourly",employeeId:jt.id})}}),G.forEach(Ze=>{Ee.push(Ze)});const ge=[],Pe=new Map;oe.forEach(Ze=>{const jt=De.find(ct=>ct.id===Ze.employeeId);if(jt&&Ze.totalEarnings){const ct=jt.role==="Hanger"?"Hanging":Ze.coat==="tape"?"Tape Coat":Ze.coat==="bed"?"Bed Coat":Ze.coat==="skim"?"Skim Coat":Ze.coat==="texture"?"Texture Coat":Ze.coat==="sand"?"Sand Coat":Ze.coat,yt=`piece-${jt.firstName}-${jt.lastName}-${ct}`;if(Pe.has(yt)){const Yt=Pe.get(yt);Yt.amount+=Ze.totalEarnings,Yt.completionPercentage+=Ze.completionPercentage||0}else Pe.set(yt,{id:`labor-${Ys()}`,description:`${jt.firstName} ${jt.lastName} - ${ct} (Piece Rate)`,amount:Ze.totalEarnings,completionPercentage:Ze.completionPercentage||0,type:"piece-rate",employeeId:jt.id,workType:ct})}}),Pe.forEach(Ze=>{ge.push(Ze)});const Ve=[],pt=new Map;return oe.forEach(Ze=>{if(Ze.apprenticeId&&Ze.apprenticeCost){const jt=De.find(ct=>ct.id===Ze.apprenticeId);if(jt){const ct=`apprentice-${jt.firstName}-${jt.lastName}`;if(pt.has(ct)){const yt=pt.get(ct);yt.amount+=Ze.apprenticeCost,yt.hours+=Ze.apprenticeHours||0}else pt.set(ct,{id:`labor-${Ys()}`,description:`${jt.firstName} ${jt.lastName} - Apprentice Labor`,amount:Ze.apprenticeCost,hours:Ze.apprenticeHours||0,type:"apprentice",employeeId:jt.id})}}}),pt.forEach(Ze=>{Ve.push(Ze)}),[...Ee,...ge,...Ve].map(Ze=>{const jt=De.find(ct=>ct.id===Ze.employeeId);if(jt&&jt.employeeType==="Employee"){const ct=Ze.amount*wee,yt=Ze.amount+ct;return{...Ze,originalAmount:Ze.amount,employerTax:ct,amount:yt}}else return{...Ze,originalAmount:Ze.amount,employerTax:0}})},[]);j.useEffect(()=>{if(!n&&o&&l&&c){const ve=()=>{t(Se=>{let De=!1;const Ie=Se.map(oe=>{var Pe,Ve,pt,et,Zt,Ze,jt,ct,yt;const Ee=M(oe,o,l,c),G=((Ve=(Pe=oe.financials)==null?void 0:Pe.actual)==null?void 0:Ve.laborCosts)||[];if(JSON.stringify(G)!==JSON.stringify(Ee)){De=!0;const Yt=((et=(pt=oe.financials)==null?void 0:pt.actual)==null?void 0:et.manualLaborCosts)||[],At=((Ze=(Zt=oe.financials)==null?void 0:Zt.actual)==null?void 0:Ze.materialInvoices)||[],On=((ct=(jt=oe.financials)==null?void 0:jt.actual)==null?void 0:ct.changeOrders)||[];return{...oe,financials:{...oe.financials,actual:{...(yt=oe.financials)==null?void 0:yt.actual,laborCosts:Ee,manualLaborCosts:Yt,materialInvoices:At,changeOrders:On}},updatedAt:new Date().toISOString()}}return oe});return De?Ie:Se})};ve();const we=setInterval(ve,3e4);return()=>clearInterval(we)}},[n,o,l,c,M]);const L=j.useCallback((ve,we)=>{t(Se=>Se.map(De=>{if(De.id!==ve)return De;const Ie=(De.takeoffPhases||[]).find(Bt=>Bt.id===we);if(!Ie)return De;let oe=0;if((Ie.entries||[]).forEach(Bt=>{if(De.jobType==="commercial"&&Bt.unitNumbers){const Hn=Bt.unitNumbers.split(",").filter(It=>It.trim()).length;(Bt.boards||[]).forEach(It=>{const Mt=parseFloat(It.width)/12*parseFloat(It.length),nn=parseInt(It.quantity,10)*Mt*Hn;oe+=nn})}else(Bt.boards||[]).forEach(Hn=>{const It=parseFloat(Hn.width)/12*parseFloat(Hn.length),Mt=parseInt(Hn.quantity,10)*It;oe+=Mt})}),oe===0)return De;const Ee=(De.scopes||[]).find(Bt=>Bt.name.toLowerCase().includes("finish")),G=(Ee==null?void 0:Ee.ceilingFinish)||"";let ge=0;G.includes("Stomp")||G.includes("Splatter Knockdown")?G.includes("Splatter Knockdown")?ge=Math.ceil(oe/4800*9):ge=Math.ceil(oe/4800*11):G.includes("Level 4")||G.includes("Level 5")?ge=Math.ceil(oe/4800*5):ge=Math.ceil(oe/4800*11);const Pe=Math.ceil(oe/4800*8),Ve=Math.ceil(oe/5e3),pt=Math.ceil(oe/5760),et=Math.ceil(oe/5760),Zt=Math.ceil(oe/1400);let Ze;oe<6e3?Ze=Math.ceil(oe/1e3):Ze=Math.ceil(oe/15e3);const jt=[{id:`default-${Date.now()}-1`,type:"Joint Compound",subtype:"All Purpose Joint Compound",quantity:ge.toString(),unit:"Box"},{id:`default-${Date.now()}-2`,type:"Joint Compound",subtype:"Lite Weight Joint Compound",quantity:Pe.toString(),unit:"Box"},{id:`default-${Date.now()}-3`,type:"Joint Compound",subtype:"Easy Sand 90",quantity:Ve.toString(),unit:"Bags"},{id:`default-${Date.now()}-4`,type:"Fasteners",subtype:'Drywall Screws 1-1/4"',threadType:"Coarse Thread",quantity:et.toString(),unit:"Box"},{id:`default-${Date.now()}-5`,type:"Adhesives",subtype:"TiteBond Foam",quantity:pt.toString(),unit:"Tube"},{id:`default-${Date.now()}-6`,type:"Adhesives",subtype:"Spray Adhesive",quantity:"1",unit:"Can"},{id:`default-${Date.now()}-7`,type:"Tape",subtype:"500' Paper Tape",quantity:Zt.toString(),unit:"Roll"},{id:`default-${Date.now()}-8`,type:"Tape",subtype:"300' Mesh Tape",quantity:Ze.toString(),unit:"Roll"}],ct=Ie.materials||[],yt=[...ct];let Yt=0;ct.forEach(Bt=>{Bt.type==="Corner Bead"&&(Yt+=parseFloat(Bt.quantity)||0)});const At=Math.ceil(Yt/10),On=Math.ceil(Yt/10);jt.forEach(Bt=>{const Hn=yt.findIndex(It=>{const Mt=It.type===Bt.type,nn=It.subtype===Bt.subtype,Ye=(It.threadType||"")===(Bt.threadType||""),dt=(It.length||"")===(Bt.length||"");return Mt&&nn&&Ye&&dt});if(Hn>=0){let It=parseFloat(Bt.quantity);Bt.type==="Joint Compound"&&Bt.subtype==="Easy Sand 90"&&(It+=At),Bt.type==="Joint Compound"&&Bt.subtype==="Lite Weight Joint Compound"&&(It+=On),yt[Hn]={...yt[Hn],quantity:It.toString(),unit:Bt.unit}}else{let It=parseFloat(Bt.quantity);Bt.type==="Joint Compound"&&Bt.subtype==="Easy Sand 90"&&(It+=At),Bt.type==="Joint Compound"&&Bt.subtype==="Lite Weight Joint Compound"&&(It+=On),yt.push({...Bt,quantity:It.toString()})}}),Yt>0&&(!yt.some(It=>It.type==="Joint Compound"&&It.subtype==="Easy Sand 90")&&At>0&&yt.push({id:`corner-bead-${Date.now()}-1`,type:"Joint Compound",subtype:"Easy Sand 90",quantity:At.toString(),unit:"Bags"}),!yt.some(It=>It.type==="Joint Compound"&&It.subtype==="Lite Weight Joint Compound")&&On>0&&yt.push({id:`corner-bead-${Date.now()}-2`,type:"Joint Compound",subtype:"Lite Weight Joint Compound",quantity:On.toString(),unit:"Box"}));const mn=(De.takeoffPhases||[]).map(Bt=>Bt.id===we?{...Bt,materials:yt,updatedAt:new Date().toISOString()}:Bt);return{...De,takeoffPhases:mn,updatedAt:new Date().toISOString()}})),pe({title:"Accessories Auto-Updated! 🔄",description:"Phase accessories have been automatically recalculated based on updated takeoff entries."})},[]),T=j.useCallback(ve=>{if(!(ve!=null&&ve.takeoffPhases))return 0;let we=0;return ve.takeoffPhases.forEach(Se=>{(Se.entries||[]).forEach(De=>{if(ve.jobType==="commercial"&&De.unitNumbers){const Ie=De.unitNumbers.split(",").filter(oe=>oe.trim()).length;(De.boards||[]).forEach(oe=>{const Ee=parseFloat(oe.width)/12*parseFloat(oe.length),G=parseInt(oe.quantity,10)*Ee*Ie;we+=G})}else(De.boards||[]).forEach(Ie=>{const oe=parseFloat(Ie.width)/12*parseFloat(Ie.length),Ee=parseInt(Ie.quantity,10)*oe;we+=Ee})})}),we},[]),E=j.useCallback(ve=>{t(we=>we.map(Se=>{var De,Ie,oe;if(Se.id===ve){const Ee=T(Se),G=((Ie=(De=Se.financials)==null?void 0:De.fieldRevised)==null?void 0:Ie.drywallMaterialRate)||.66,ge=Math.round(Ee*G*100)/100;return{...Se,financials:{...Se.financials,fieldRevised:{...(oe=Se.financials)==null?void 0:oe.fieldRevised,sqft:Math.round(Ee),drywallMaterialCost:ge}},updatedAt:new Date().toISOString()}}return Se}))},[T]),A=j.useCallback(ve=>{t(we=>we.map(Se=>{var De,Ie,oe,Ee,G;if(Se.id===ve){const ge=((Ie=(De=Se.financials)==null?void 0:De.fieldRevised)==null?void 0:Ie.sqft)||0,Pe=((Ee=(oe=Se.financials)==null?void 0:oe.fieldRevised)==null?void 0:Ee.drywallMaterialRate)||.66,Ve=Math.round(ge*Pe*100)/100;return{...Se,financials:{...Se.financials,fieldRevised:{...(G=Se.financials)==null?void 0:G.fieldRevised,drywallMaterialCost:Ve}},updatedAt:new Date().toISOString()}}return Se}))},[]),O=j.useCallback((ve,we)=>{const Se={id:Ys(),...ve,jobType:ve.jobType||"residential",financialCategories:ve.jobType==="commercial"?["drywall","act","channel","door","insulation","metalFraming","suspendedGrid","other"]:["drywall"],status:"estimating",scopes:[],takeoffPhases:[],checklists:[],financials:{estimate:{sqft:0,drywallMaterialRate:.66,hangerRate:.27,finisherRate:.27,prepCleanRate:.03,drywallSalesTaxRate:7.25,totalEstimateAmount:0,quote:0,scopeQuotes:[],act:{materialRate:0,laborRate:0,unit:"sqft",salesTaxRate:0},channel:{materialRate:0,laborRate:0,unit:"lf",salesTaxRate:0},door:{installRate:0,unit:"ea",salesTaxRate:0},insulation:{materialRate:0,laborRate:0,unit:"sqft",salesTaxRate:0},metalFraming:{materialRate:0,laborRate:0,unit:"lf",salesTaxRate:0},suspendedGrid:{materialRate:0,laborRate:0,unit:"sqft",salesTaxRate:0},other:{materialRate:0,materialDescription:"",laborRate:0,laborDescription:"",unit:"sqft",salesTaxRate:0}},fieldRevised:{hangerRate:.27,finisherRate:.27,prepCleanRate:.03,sqft:0,drywallMaterialRate:.66,drywallMaterialCost:0,changeOrders:[],act:{laborRate:0},channel:{laborRate:0},door:{installRate:0},insulation:{laborRate:0},metalFraming:{laborRate:0},suspendedGrid:{laborRate:0},other:{laborRate:0,laborDescription:""}},actual:{changeOrders:[],materialInvoices:[],drywallMaterialCost:0,drywallSalesTaxCost:0,laborCosts:[],manualLaborCosts:[],act:{materialCost:0,laborCost:0,salesTaxCost:0},channel:{materialCost:0,laborCost:0,salesTaxCost:0},door:{installCost:0,salesTaxCost:0},insulation:{materialCost:0,laborCost:0,salesTaxCost:0},metalFraming:{materialCost:0,laborCost:0,salesTaxCost:0},suspendedGrid:{materialCost:0,laborCost:0,salesTaxCost:0},other:{materialCost:0,materialDescription:"",laborCost:0,laborDescription:"",salesTaxCost:0}}},createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};if(t(De=>[...De,Se]),ve.latitude&&ve.longitude)try{Gs.addJobSite(Se.id,"Main Job Site",ve.latitude,ve.longitude,ve.geofenceRadius||Gs.getGeofenceRadius())}catch(De){console.error("Error setting up location tracking:",De)}pe({title:"Job Created! 🎉",description:`New ${ve.jobType} construction job has been added in estimating phase.${ve.latitude&&ve.longitude?" Location tracking has been set up.":""}`}),we&&we()},[]),W=j.useCallback((ve,we,Se)=>{var Ie,oe,Ee;console.log("=== updateJob called ==="),console.log("JobId:",ve),console.log("Updates:",we),console.log("Updates.financials.estimate:",(Ie=we.financials)==null?void 0:Ie.estimate),t(G=>{console.log("Previous jobs:",G);const ge=G.map(Pe=>{var et,Zt,Ze,jt,ct,yt,Yt,At,On,mn;if(Pe.id!==ve)return Pe;console.log("Updating job:",Pe.jobName),console.log("Current job financials:",Pe.financials),console.log("Current job estimate sqft:",(Zt=(et=Pe.financials)==null?void 0:et.estimate)==null?void 0:Zt.sqft);let Ve=Pe.financials;we.financials&&(Ve={...Pe.financials,...we.financials,estimate:{...(Ze=Pe.financials)==null?void 0:Ze.estimate,...(jt=we.financials)==null?void 0:jt.estimate},fieldRevised:{...(ct=Pe.financials)==null?void 0:ct.fieldRevised,...(yt=we.financials)==null?void 0:yt.fieldRevised},actual:{...(Yt=Pe.financials)==null?void 0:Yt.actual,...(At=we.financials)==null?void 0:At.actual}});const pt={...Pe,...we,financials:Ve,updatedAt:new Date().toISOString()};return console.log("Updated job financials:",pt.financials),console.log("Updated job estimate sqft:",(mn=(On=pt.financials)==null?void 0:On.estimate)==null?void 0:mn.sqft),pt});return console.log("Updated jobs array:",ge),console.log("Updated jobs array length:",ge.length),[...ge]}),i(Date.now()),((Ee=(oe=we.financials)==null?void 0:oe.fieldRevised)==null?void 0:Ee.drywallMaterialRate)!==void 0&&setTimeout(()=>{A(ve)},100);const De=we.status?we.status==="active"?"Job moved to active phase!":we.status==="inactive"?"Job set to inactive.":we.status==="estimating"?"Job moved back to estimating.":`Status set to ${we.status}.`:"";pe({title:"Job Updated! ✨",description:`Job details have been updated. ${De}`}),Se&&Se(ve,we),console.log("=== updateJob finished ===")},[A]),z=j.useCallback((ve,we)=>{t(Se=>Se.filter(De=>De.id!==ve)),pe({title:"Job Deleted! 🗑️",description:"The job has been permanently removed.",variant:"destructive"}),we&&we(ve)},[]),F=j.useCallback((ve,we,Se)=>{const De={id:Ys(),jobId:ve,...we,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};t(Ie=>Ie.map(Ee=>{var G,ge,Pe;if(Ee.id===ve){const Ve=[...Ee.scopes||[],De],pt=[...((ge=(G=Ee.financials)==null?void 0:G.estimate)==null?void 0:ge.scopeQuotes)||[]];return pt.push({scopeId:De.id,scopeName:De.name,quoteAmount:0}),{...Ee,scopes:Ve,financials:{...Ee.financials,estimate:{...((Pe=Ee.financials)==null?void 0:Pe.estimate)||{},scopeQuotes:pt}},updatedAt:new Date().toISOString()}}return Ee})),pe({title:"Scope Added! ✨",description:`New scope "${we.name}" added successfully.`}),Se&&Se()},[]),V=j.useCallback((ve,we,Se)=>{t(De=>De.map(Ie=>{var G,ge;const oe=(Ie.scopes||[]).map(Pe=>Pe.id===ve?{...Pe,...we,updatedAt:new Date().toISOString()}:Pe);let Ee={...Ie.financials};if(we.name&&((ge=(G=Ie.financials)==null?void 0:G.estimate)!=null&&ge.scopeQuotes)){const Pe=Ie.financials.estimate.scopeQuotes.map(Ve=>Ve.scopeId===ve?{...Ve,scopeName:we.name}:Ve);Ee={...Ee,estimate:{...Ee.estimate,scopeQuotes:Pe}}}return{...Ie,scopes:oe,financials:Ee,updatedAt:new Date().toISOString()}})),pe({title:"Scope Updated! ✅",description:"Scope of work has been updated successfully."}),Se&&Se(ve,we)},[]),B=j.useCallback((ve,we,Se)=>{t(De=>De.map(Ie=>{if(Ie.id===ve){const oe=(Ie.scopes||[]).filter(Ee=>Ee.id!==we);return{...Ie,scopes:oe,updatedAt:new Date().toISOString()}}return Ie})),pe({title:"Scope Deleted! 🗑️",description:"The scope of work has been removed.",variant:"destructive"}),Se&&Se(ve,we)},[]),Y=j.useCallback((ve,we,Se)=>{const De={id:Ys(),jobId:ve,...we,materials:[],entries:[],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};t(Ie=>Ie.map(oe=>oe.id===ve?{...oe,takeoffPhases:[...oe.takeoffPhases||[],De],updatedAt:new Date().toISOString()}:oe)),pe({title:"Takeoff Phase Created! 🏗️",description:`New takeoff phase "${De.name}" has been added.`}),Se&&Se()},[]),$=j.useCallback((ve,we,Se)=>{t(De=>De.map(Ie=>Ie.id===ve?{...Ie,takeoffPhases:(Ie.takeoffPhases||[]).filter(oe=>oe.id!==we),updatedAt:new Date().toISOString()}:Ie)),setTimeout(()=>{E(ve)},100),pe({title:"Takeoff Phase Deleted! 🗑️",description:"The takeoff phase and all its entries have been removed.",variant:"destructive"}),Se&&Se(ve,we)},[E]),I=j.useCallback((ve,we,Se,De,Ie,oe)=>{const Ee=e.find(Pe=>Pe.id===ve);if(!Ee){pe({title:"Error",description:"Job not found.",variant:"destructive"});return}const G={id:Ys(),phaseId:we,notes:Ie,boards:De.map(Pe=>({...Pe,id:Pe.id||Ys()})),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};Ee.jobType==="commercial"?(G.unitType=Se.unitType,G.unitNumbers=Se.unitNumbers):G.floorSpace=Se.floorSpace,t(Pe=>Pe.map(Ve=>{if(Ve.id===ve){const pt=(Ve.takeoffPhases||[]).map(et=>et.id===we?{...et,entries:[...et.entries||[],G],updatedAt:new Date().toISOString()}:et);return{...Ve,takeoffPhases:pt,updatedAt:new Date().toISOString()}}return Ve})),setTimeout(()=>{L(ve,we),E(ve)},100);const ge=Ee.jobType==="commercial"?Se.unitType:Se.floorSpace;pe({title:"Takeoff Entries Saved! 📐",description:`Entries for ${ge} have been recorded successfully.`}),oe&&oe()},[e,L,E]),U=j.useCallback((ve,we,Se,De)=>{t(oe=>oe.map(Ee=>({...Ee,takeoffPhases:(Ee.takeoffPhases||[]).map(G=>G.id===we?{...G,entries:(G.entries||[]).map(ge=>ge.id===Se.id?{...Se,updatedAt:new Date().toISOString()}:ge),updatedAt:new Date().toISOString()}:G),updatedAt:new Date().toISOString()}))),setTimeout(()=>{L(ve,we),E(ve)},100);const Ie=Se.unitType||Se.floorSpace;pe({title:"Takeoff Entry Updated! ✅",description:`Entry "${Ie}" has been updated successfully.`}),De&&De()},[L,E]),q=j.useCallback((ve,we,Se)=>{const De=e.find(Ie=>(Ie.takeoffPhases||[]).some(oe=>oe.id===ve));t(Ie=>Ie.map(oe=>({...oe,takeoffPhases:(oe.takeoffPhases||[]).map(Ee=>Ee.id===ve?{...Ee,entries:(Ee.entries||[]).filter(G=>G.id!==we),updatedAt:new Date().toISOString()}:Ee),updatedAt:new Date().toISOString()}))),De&&setTimeout(()=>{E(De.id)},100),pe({title:"Takeoff Entry Deleted! 🗑️",description:"The entry has been removed.",variant:"destructive"}),Se&&Se()},[e,E]),X=j.useCallback((ve,we,Se)=>{const De=e.find(Ie=>(Ie.takeoffPhases||[]).some(oe=>oe.id===ve));t(Ie=>Ie.map(oe=>({...oe,takeoffPhases:(oe.takeoffPhases||[]).map(Ee=>Ee.id===ve?{...Ee,materials:we,updatedAt:new Date().toISOString()}:Ee),updatedAt:new Date().toISOString()}))),De&&setTimeout(()=>{L(De.id,ve)},100),Se&&Se()},[e,L]),te=j.useCallback((ve,we)=>{const Se=[{name:"Hang",description:"Drywall hanging with specified thickness for ceilings and walls.",status:"Not Started",ceilingThickness:'5/8"',wallThickness:'1/2"',hangExceptions:'5/8" at garage firewall. Moisture resistant drywall at wet walls.'},{name:"Finish",description:"Drywall finishing with specified textures and finishes.",status:"Not Started",ceilingFinish:"Stomp Knockdown",ceilingExceptions:"",wallFinish:"Level 4 Smooth",wallExceptions:"Roll Texture Garage walls and Small Closet Walls."}],De=e.find(G=>G.id===ve),oe=((De==null?void 0:De.scopes)||[]).map(G=>G.name),Ee=Se.filter(G=>!oe.includes(G.name));if(Ee.length===0){pe({title:"Already Added! ✅",description:"Default scopes are already present for this job."}),we&&we(!1);return}t(G=>G.map(ge=>{var Pe,Ve,pt;if(ge.id===ve){const et=Ee.map(jt=>({id:Ys(),jobId:ve,...jt,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})),Zt=et.map(jt=>({scopeId:jt.id,scopeName:jt.name,quoteAmount:0})),Ze={...ge.financials,estimate:{...((Pe=ge.financials)==null?void 0:Pe.estimate)||{},scopeQuotes:[...((pt=(Ve=ge.financials)==null?void 0:Ve.estimate)==null?void 0:pt.scopeQuotes)||[],...Zt]}};return{...ge,scopes:[...ge.scopes||[],...et],financials:Ze,updatedAt:new Date().toISOString()}}return ge})),pe({title:"Default Scopes Added! 🚀",description:`${Ee.length} default scopes have been added with detailed specifications.`}),we&&we(!0)},[e]),ae=j.useCallback(()=>{const ve=gn.load(wn.JOBS,[],"jobs");t(ve)},[]),le=j.useCallback(()=>{t(ve=>ve.map(Se=>{var De;return{...Se,financials:{...Se.financials,actual:{...(De=Se.financials)==null?void 0:De.actual,laborCosts:[],manualLaborCosts:[]}},updatedAt:new Date().toISOString()}})),pe({title:"Job Labor Costs Reset! 🧹",description:"All labor costs have been cleared from job financials."})},[]),me=j.useCallback((ve,we,Se)=>{t(De=>De.map(oe=>{if(oe.id===ve){const Ee={...we,id:we.id||Ys(),jobId:ve,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return{...oe,checklists:[...oe.checklists||[],Ee],updatedAt:new Date().toISOString()}}return oe})),pe({title:"Checklist Created! ✅",description:"New checklist has been added to the job."}),Se&&Se()},[]),Le=j.useCallback((ve,we,Se,De)=>{t(Ie=>Ie.map(Ee=>{if(Ee.id===ve){const G=(Ee.checklists||[]).map(ge=>ge.id===we?{...Se,updatedAt:new Date().toISOString()}:ge);return{...Ee,checklists:G,updatedAt:new Date().toISOString()}}return Ee})),De&&De()},[]),ie=j.useCallback((ve,we,Se)=>{t(De=>De.map(oe=>{if(oe.id===ve){const Ee=(oe.checklists||[]).filter(G=>G.id!==we);return{...oe,checklists:Ee,updatedAt:new Date().toISOString()}}return oe})),pe({title:"Checklist Deleted",description:"Checklist has been removed from the job."}),Se&&Se()},[]),Ne=j.useCallback((ve,we,Se)=>{t(De=>De.map(oe=>{if(oe.id===ve){const Ee=(oe.checklists||[]).map(G=>G.id===we?{...G,completed:!0,completedAt:new Date().toISOString(),updatedAt:new Date().toISOString()}:G);return{...oe,checklists:Ee,updatedAt:new Date().toISOString()}}return oe})),pe({title:"Checklist Completed! 🎉",description:"Checklist has been marked as completed."}),Se&&Se()},[]),Be=j.useCallback((ve,we)=>{const Se=gn.load(wn.CHECKLIST_TEMPLATES,[],"checklistTemplates"),De={...ve,id:Ys(),createdAt:new Date().toISOString(),isTemplate:!0},Ie=[...Se,De];gn.save(wn.CHECKLIST_TEMPLATES,Ie,"checklistTemplates"),pe({title:"Template Saved! 📋",description:"Checklist template has been saved for future use."}),we&&we()},[]),Ue=j.useCallback(()=>gn.load(wn.CHECKLIST_TEMPLATES,[],"checklistTemplates"),[]),_e=j.useCallback((ve,we)=>{const De=gn.load(wn.CHECKLIST_TEMPLATES,[],"checklistTemplates").filter(Ie=>Ie.id!==ve);gn.save(wn.CHECKLIST_TEMPLATES,De,"checklistTemplates"),pe({title:"Template Deleted",description:"Checklist template has been removed."}),we&&we()},[]),ue=j.useCallback((ve,we,Se)=>{t(De=>De.map(oe=>{if(oe.id===ve){const Ee=oe.documents||[];return{...oe,documents:[...Ee,we],updatedAt:new Date().toISOString()}}return oe})),pe({title:"Document Uploaded! 📄",description:`${we.name} has been uploaded successfully.`}),Se&&Se()},[]),wt=j.useCallback((ve,we,Se)=>{t(De=>De.map(oe=>{if(oe.id===ve){const Ee=(oe.documents||[]).filter(G=>G.id!==we);return{...oe,documents:Ee,updatedAt:new Date().toISOString()}}return oe})),pe({title:"Document Deleted",description:"Document has been removed from the job.",variant:"destructive"}),Se&&Se()},[]),gt=j.useCallback((ve,we,Se,De)=>{t(Ie=>Ie.map(Ee=>{if(Ee.id===ve){const G=(Ee.documents||[]).map(ge=>ge.id===we?{...ge,...Se,updatedAt:new Date().toISOString()}:ge);return{...Ee,documents:G,updatedAt:new Date().toISOString()}}return Ee})),pe({title:"Document Updated! ✨",description:"Document has been updated successfully."}),De&&De()},[]);return{jobs:e,loading:n,jobsUpdateTimestamp:a,createJob:O,updateJob:W,deleteJob:z,createScope:F,updateScope:V,deleteScope:B,createTakeoffPhase:Y,deleteTakeoffPhase:$,saveTakeoffEntries:I,updateTakeoffEntry:U,deleteTakeoffEntry:q,updatePhaseMaterials:X,addDefaultScopesToJob:te,loadJobs:ae,calculateJobTakeoffSqft:T,recalculateFieldRevisedDrywallMaterialCost:A,resetAllJobLaborCosts:le,createChecklist:me,updateChecklist:Le,deleteChecklist:ie,completeChecklist:Ne,saveChecklistTemplate:Be,getChecklistTemplates:Ue,deleteChecklistTemplate:_e,uploadDocument:ue,deleteDocument:wt,updateDocument:gt,getLogsForJob:b,addLogEntry:C,updateLogEntry:S,deleteLogEntry:P,addAttachmentToLog:D,removeAttachmentFromLog:N,employees:c,addEmployee:d,updateEmployee:u,deleteEmployee:h,addToolDeduction:f,removeToolDeduction:p,bankHours:y,useBankedHours:g,updateEmployeeToolDeductions:x,addEmployeeDocument:m,removeEmployeeDocument:v}}const oE=({isOpen:e,onClose:t,onSave:n,job:r,existingChangeOrders:a=[],initialChangeOrderData:i=null})=>{const[o,l]=j.useState({changeOrderNumber:"",description:"",lineItems:[{id:Date.now(),description:"",quantity:"",unitType:"Hours",unitRate:"",lineTotal:0}],profitPercentage:15});j.useEffect(()=>{var x;if(e&&r)if(i)l({changeOrderNumber:i.changeOrderNumber||"",description:i.description||"",lineItems:((x=i.lineItems)==null?void 0:x.map(m=>({...m,id:m.id||Date.now()+Math.random()})))||[{id:Date.now(),description:"",quantity:"",unitType:"Hours",unitRate:"",lineTotal:0}],profitPercentage:i.profitPercentage||15});else{const m=a.length+1,v=`${r.jobName.replace(/\s+/g,"").substring(0,3).toUpperCase()}-CO-${m.toString().padStart(3,"0")}`;l(b=>({...b,changeOrderNumber:v}))}},[e,r,a,i]);const c=(x,m)=>{const v=parseFloat(x)||0,b=parseFloat(m)||0;return v*b},d=(x,m,v)=>{l(b=>({...b,lineItems:b.lineItems.map(C=>{if(C.id===x){const S={...C,[m]:v};return(m==="quantity"||m==="unitRate")&&(S.lineTotal=c(S.quantity,S.unitRate)),S}return C})}))},u=()=>{l(x=>({...x,lineItems:[...x.lineItems,{id:Date.now()+Math.random(),description:"",quantity:"",unitType:"Hours",unitRate:"",lineTotal:0}]}))},h=x=>{if(o.lineItems.length<=1){pe({title:"Cannot Remove",description:"At least one line item is required.",variant:"destructive"});return}l(m=>({...m,lineItems:m.lineItems.filter(v=>v.id!==x)}))},f=o.lineItems.reduce((x,m)=>x+(m.lineTotal||0),0),p=f*(o.profitPercentage/100),y=f+p,g=x=>{if(x.preventDefault(),!o.changeOrderNumber.trim()){pe({title:"Missing Information",description:"Please enter a change order number.",variant:"destructive"});return}if(!o.description.trim()){pe({title:"Missing Information",description:"Please enter a description for this change order.",variant:"destructive"});return}const m=o.lineItems.filter(b=>b.description.trim()&&b.quantity&&b.unitRate);if(m.length===0){pe({title:"Missing Line Items",description:"Please add at least one complete line item.",variant:"destructive"});return}const v={id:(i==null?void 0:i.id)||`co-${Date.now()}`,changeOrderNumber:o.changeOrderNumber,description:o.description,lineItems:m,profitPercentage:o.profitPercentage,subtotal:Math.round(f*100)/100,profitAmount:Math.round(p*100)/100,totalValue:Math.round(y*100)/100,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};n(v),i||l({changeOrderNumber:"",description:"",lineItems:[{id:Date.now(),description:"",quantity:"",unitType:"Hours",unitRate:"",lineTotal:0}],profitPercentage:15})};return e?s.jsx(Es,{children:s.jsxs(Er,{open:e,onOpenChange:t,children:[s.jsx(Pt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-40",onClick:t}),s.jsx(pr,{className:"fixed z-50 top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-white p-0 shadow-2xl rounded-xl w-[90vw] max-w-4xl max-h-[90vh] flex flex-col",children:s.jsxs(Pt.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"h-full flex flex-col",children:[s.jsx(mr,{className:"p-6 border-b bg-gradient-to-r from-brandPrimary to-brandSecondary text-white rounded-t-lg",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(tn,{className:"h-6 w-6"}),s.jsx(gr,{className:"text-2xl font-bold",children:i?"Edit Change Order":"Create Change Order"})]})}),s.jsx("div",{className:"flex-1 overflow-y-auto",children:s.jsxs("form",{onSubmit:g,className:"p-6 space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"changeOrderNumber",className:"text-sm font-semibold text-gray-700",children:"Change Order Number *"}),s.jsx($e,{id:"changeOrderNumber",value:o.changeOrderNumber,onChange:x=>l(m=>({...m,changeOrderNumber:x.target.value})),placeholder:"e.g., ABC-CO-001",className:"border-2 focus:border-brandPrimary transition-colors"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"profitPercentage",className:"text-sm font-semibold text-gray-700",children:"Profit Percentage"}),s.jsxs("div",{className:"relative",children:[s.jsx($e,{id:"profitPercentage",type:"number",step:"0.1",min:"0",max:"100",value:o.profitPercentage,onChange:x=>l(m=>({...m,profitPercentage:parseFloat(x.target.value)||0})),className:"border-2 focus:border-brandPrimary transition-colors pr-8"}),s.jsx("span",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500",children:"%"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"description",className:"text-sm font-semibold text-gray-700",children:"Description *"}),s.jsx(_n,{id:"description",value:o.description,onChange:x=>l(m=>({...m,description:x.target.value})),placeholder:"Brief description of the change order...",className:"border-2 focus:border-brandPrimary transition-colors min-h-[80px]"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Line Items"}),s.jsxs(se,{type:"button",variant:"outline",onClick:u,className:"border-dashed border-brandPrimary text-brandPrimary hover:bg-brandPrimary/5",children:[s.jsx(un,{className:"h-4 w-4 mr-2"}),"Add Line Item"]})]}),o.lineItems.map((x,m)=>s.jsx(Pt.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:m*.05},children:s.jsx(Te,{className:"border-l-4 border-l-brandSecondary",children:s.jsxs(Me,{className:"p-4 space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("span",{className:"text-sm font-medium text-gray-600",children:["Line Item #",m+1]}),o.lineItems.length>1&&s.jsx(se,{type:"button",variant:"ghost",size:"icon",onClick:()=>h(x.id),className:"text-red-500 hover:bg-red-100",children:s.jsx(Kt,{className:"h-4 w-4"})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[s.jsxs("div",{className:"md:col-span-2 space-y-1",children:[s.jsx(de,{className:"text-sm font-medium text-gray-600",children:"Description *"}),s.jsx($e,{value:x.description,onChange:v=>d(x.id,"description",v.target.value),placeholder:"e.g., Additional drywall installation",className:"border-gray-300 focus:border-brandPrimary"})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx(de,{className:"text-sm font-medium text-gray-600",children:"Quantity *"}),s.jsx($e,{type:"number",step:"0.1",min:"0",value:x.quantity,onChange:v=>d(x.id,"quantity",v.target.value),placeholder:"0",className:"border-gray-300 focus:border-brandPrimary"})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx(de,{className:"text-sm font-medium text-gray-600",children:"Unit Type"}),s.jsxs(st,{value:x.unitType,onValueChange:v=>d(x.id,"unitType",v),children:[s.jsx(nt,{className:"border-gray-300 focus:border-brandPrimary",children:s.jsx(at,{})}),s.jsxs(rt,{children:[s.jsx(xe,{value:"Hours",children:"Hours"}),s.jsx(xe,{value:"Units",children:"Units"}),s.jsx(xe,{value:"SqFt",children:"Square Feet"}),s.jsx(xe,{value:"LF",children:"Linear Feet"}),s.jsx(xe,{value:"Each",children:"Each"})]})]})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx(de,{className:"text-sm font-medium text-gray-600",children:"Unit Rate *"}),s.jsxs("div",{className:"relative",children:[s.jsx($e,{type:"number",step:"0.01",min:"0",value:x.unitRate,onChange:v=>d(x.id,"unitRate",v.target.value),placeholder:"0.00",className:"border-gray-300 focus:border-brandPrimary pl-6"}),s.jsx(_r,{className:"absolute left-2 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"})]})]})]}),s.jsx("div",{className:"flex justify-end",children:s.jsxs("div",{className:"text-right",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"Line Total: "}),s.jsxs("span",{className:"font-semibold text-brandPrimary",children:["$",(x.lineTotal||0).toFixed(2)]})]})})]})})},x.id))]}),s.jsx(Te,{className:"border-2 border-brandPrimary/20 bg-brandPrimary/5",children:s.jsxs(Me,{className:"p-6",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[s.jsx(vs,{className:"h-5 w-5 text-brandPrimary"}),s.jsx("h3",{className:"text-lg font-semibold text-brandPrimary",children:"Change Order Summary"})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-gray-700",children:"Subtotal:"}),s.jsxs("span",{className:"font-semibold",children:["$",f.toFixed(2)]})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("span",{className:"text-gray-700",children:["Profit (",o.profitPercentage,"%):"]}),s.jsxs("span",{className:"font-semibold text-green-600",children:["$",p.toFixed(2)]})]}),s.jsx("div",{className:"border-t pt-3",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-lg font-bold text-gray-900",children:"Total Change Order Value:"}),s.jsxs("span",{className:"text-xl font-bold text-brandPrimary",children:["$",y.toFixed(2)]})]})})]})]})})]})}),s.jsxs(Tr,{className:"p-6 border-t bg-gray-50 rounded-b-lg",children:[s.jsxs(se,{type:"button",variant:"outline",onClick:t,className:"hover:bg-gray-100",children:[s.jsx(rn,{className:"h-4 w-4 mr-2"})," Cancel"]}),s.jsxs(se,{onClick:g,className:"bg-gradient-to-r from-brandPrimary to-brandSecondary text-white hover:opacity-90",disabled:!o.changeOrderNumber.trim()||!o.description.trim()||y===0,children:[s.jsx(Qn,{className:"h-4 w-4 mr-2"}),i?"Update Change Order":"Save Change Order"]})]})]})})]})}):null},jee=({isOpen:e,onClose:t,onSave:n,job:r,initialInvoice:a=null})=>{const[i,o]=j.useState([{id:Date.now(),supplierName:"",invoiceNumber:"",sqftDelivered:"",dollarAmount:"",salesTax:"",notes:""}]);j.useEffect(()=>{var g,x,m;e&&o(a?[{id:a.id,supplierName:a.supplierName||"",invoiceNumber:a.invoiceNumber||"",sqftDelivered:((g=a.sqftDelivered)==null?void 0:g.toString())||"",dollarAmount:((x=a.dollarAmount)==null?void 0:x.toString())||"",salesTax:((m=a.salesTax)==null?void 0:m.toString())||"",notes:a.notes||""}]:[{id:Date.now(),supplierName:"",invoiceNumber:"",sqftDelivered:"",dollarAmount:"",salesTax:"",notes:""}])},[e,a]);const l=()=>{o(g=>[...g,{id:Date.now()+Math.random(),supplierName:"",invoiceNumber:"",sqftDelivered:"",dollarAmount:"",salesTax:"",notes:""}])},c=g=>{if(i.length<=1){pe({title:"Cannot Remove",description:"At least one invoice is required.",variant:"destructive"});return}o(x=>x.filter(m=>m.id!==g))},d=(g,x,m)=>{o(v=>v.map(b=>b.id===g?{...b,[x]:m}:b))},u=i.reduce((g,x)=>g+(parseFloat(x.dollarAmount)||0),0),h=i.reduce((g,x)=>g+(parseFloat(x.salesTax)||0),0),f=i.reduce((g,x)=>g+(parseFloat(x.sqftDelivered)||0),0),p=u+h,y=g=>{g.preventDefault();const x=i.filter(v=>v.supplierName.trim()&&v.invoiceNumber.trim()&&v.sqftDelivered&&v.dollarAmount);if(x.length===0){pe({title:"Missing Information",description:"Please complete at least one invoice with supplier name, invoice number, square footage, and dollar amount.",variant:"destructive"});return}const m=x.map(v=>({id:`invoice-${Date.now()}-${Math.random()}`,supplierName:v.supplierName.trim(),invoiceNumber:v.invoiceNumber.trim(),sqftDelivered:parseFloat(v.sqftDelivered)||0,dollarAmount:parseFloat(v.dollarAmount)||0,salesTax:parseFloat(v.salesTax)||0,notes:v.notes.trim(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}));n(m),o([{id:Date.now(),supplierName:"",invoiceNumber:"",sqftDelivered:"",dollarAmount:"",salesTax:"",notes:""}])};return e?s.jsx(Es,{children:s.jsxs(Er,{open:e,onOpenChange:t,children:[s.jsx(Pt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-40",onClick:t}),s.jsx(pr,{className:"fixed z-50 top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-white p-0 shadow-2xl rounded-xl w-[90vw] max-w-4xl max-h-[90vh] flex flex-col",children:s.jsxs(Pt.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"h-full flex flex-col",children:[s.jsx(mr,{className:"p-6 border-b bg-gradient-to-r from-brandPrimary to-brandSecondary text-white rounded-t-lg flex-shrink-0",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(ya,{className:"h-6 w-6"}),s.jsx(gr,{className:"text-2xl font-bold",children:a?"Edit Material Invoice":"Add Material Invoices"})]})}),s.jsx("div",{className:"flex-1 overflow-y-auto",children:s.jsx("form",{onSubmit:y,className:"flex flex-col h-full",children:s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{className:"bg-brandSecondary/10 p-4 rounded-lg border border-brandSecondary/20",children:[s.jsx("h3",{className:"font-semibold text-brandSecondary mb-2",children:"Job Information"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-brandSecondary font-medium",children:"Job Name:"}),s.jsx("p",{children:r==null?void 0:r.jobName})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-brandSecondary font-medium",children:"General Contractor:"}),s.jsx("p",{children:r==null?void 0:r.generalContractor})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Material Invoices"}),!a&&s.jsxs(se,{type:"button",variant:"outline",onClick:l,className:"border-dashed border-brandPrimary text-brandPrimary hover:bg-brandPrimary/5",children:[s.jsx(un,{className:"h-4 w-4 mr-2"}),"Add Invoice"]})]}),i.map((g,x)=>s.jsx(Pt.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:x*.05},children:s.jsx(Te,{className:"border-l-4 border-l-brandSecondary",children:s.jsxs(Me,{className:"p-4 space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("span",{className:"text-sm font-medium text-gray-600",children:["Invoice #",x+1]}),i.length>1&&!a&&s.jsx(se,{type:"button",variant:"ghost",size:"icon",onClick:()=>c(g.id),className:"text-red-500 hover:bg-red-100",children:s.jsx(Kt,{className:"h-4 w-4"})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx(de,{className:"text-sm font-medium text-gray-600",children:"Supplier Name *"}),s.jsx($e,{value:g.supplierName,onChange:m=>d(g.id,"supplierName",m.target.value),placeholder:"e.g., ABC Drywall Supply",className:"border-gray-300 focus:border-brandPrimary"})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx(de,{className:"text-sm font-medium text-gray-600",children:"Invoice Number *"}),s.jsx($e,{value:g.invoiceNumber,onChange:m=>d(g.id,"invoiceNumber",m.target.value),placeholder:"e.g., INV-2024-001",className:"border-gray-300 focus:border-brandPrimary"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx(de,{className:"text-sm font-medium text-gray-600",children:"SqFt of Drywall Delivered *"}),s.jsx($e,{type:"number",step:"0.01",min:"0",value:g.sqftDelivered,onChange:m=>d(g.id,"sqftDelivered",m.target.value),placeholder:"0.00",className:"border-gray-300 focus:border-brandPrimary"})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx(de,{className:"text-sm font-medium text-gray-600",children:"Dollar Amount *"}),s.jsxs("div",{className:"relative",children:[s.jsx($e,{type:"number",step:"0.01",min:"0",value:g.dollarAmount,onChange:m=>d(g.id,"dollarAmount",m.target.value),placeholder:"0.00",className:"border-gray-300 focus:border-brandPrimary pl-6"}),s.jsx(_r,{className:"absolute left-2 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"})]})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx(de,{className:"text-sm font-medium text-gray-600",children:"Sales Tax"}),s.jsxs("div",{className:"relative",children:[s.jsx($e,{type:"number",step:"0.01",min:"0",value:g.salesTax,onChange:m=>d(g.id,"salesTax",m.target.value),placeholder:"0.00",className:"border-gray-300 focus:border-brandPrimary pl-6"}),s.jsx(_r,{className:"absolute left-2 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"})]})]})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx(de,{className:"text-sm font-medium text-gray-600",children:"Notes (Optional)"}),s.jsx(_n,{value:g.notes,onChange:m=>d(g.id,"notes",m.target.value),placeholder:"Additional notes about this invoice...",className:"border-gray-300 focus:border-brandPrimary min-h-[60px]"})]}),s.jsx("div",{className:"flex justify-end",children:s.jsxs("div",{className:"text-right",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"Invoice Total: "}),s.jsxs("span",{className:"font-semibold text-brandPrimary",children:["$",((parseFloat(g.dollarAmount)||0)+(parseFloat(g.salesTax)||0)).toFixed(2)]})]})})]})})},g.id))]}),s.jsx(Te,{className:"border-2 border-brandPrimary/20 bg-brandPrimary/5",children:s.jsxs(Me,{className:"p-6",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[s.jsx(vs,{className:"h-5 w-5 text-brandPrimary"}),s.jsx("h3",{className:"text-lg font-semibold text-brandPrimary",children:"Invoice Summary"})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-gray-700",children:"Total Square Footage:"}),s.jsxs("span",{className:"font-semibold",children:[f.toFixed(2)," SqFt"]})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-gray-700",children:"Total Material Cost:"}),s.jsxs("span",{className:"font-semibold",children:["$",u.toFixed(2)]})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-gray-700",children:"Total Sales Tax:"}),s.jsxs("span",{className:"font-semibold text-red-600",children:["$",h.toFixed(2)]})]}),s.jsx("div",{className:"border-t pt-3",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-lg font-bold text-gray-900",children:"Grand Total:"}),s.jsxs("span",{className:"text-xl font-bold text-brandPrimary",children:["$",p.toFixed(2)]})]})})]})]})})]})})}),s.jsxs(Tr,{className:"p-6 border-t bg-gray-50 rounded-b-lg flex-shrink-0",children:[s.jsxs(se,{type:"button",variant:"outline",onClick:t,className:"hover:bg-gray-100",children:[s.jsx(rn,{className:"h-4 w-4 mr-2"})," Cancel"]}),s.jsxs(se,{onClick:y,className:"bg-gradient-to-r from-brandPrimary to-brandSecondary text-white hover:opacity-90",disabled:i.every(g=>!g.supplierName.trim()||!g.invoiceNumber.trim()||!g.sqftDelivered||!g.dollarAmount),children:[s.jsx(Qn,{className:"h-4 w-4 mr-2"}),a?"Update Invoice":"Save Invoices"]})]})]})})]})}):null},Nee=({employees:e,onSubmit:t,onCancel:n})=>{const[r,a]=j.useState(""),[i,o]=j.useState(""),[l,c]=j.useState(""),d=e.find(f=>f.id===r),u=d&&i?(parseFloat(i)*d.hourlyRate).toFixed(2):"0.00",h=f=>{if(f.preventDefault(),!r){pe({title:"Missing Information",description:"Please select an employee.",variant:"destructive"});return}if(!i||parseFloat(i)<=0){pe({title:"Invalid Hours",description:"Please enter valid hours worked.",variant:"destructive"});return}const p={employeeId:r,employeeName:`${d.firstName} ${d.lastName}`,role:d.role,hours:parseFloat(i),hourlyRate:d.hourlyRate,amount:parseFloat(u),notes:l.trim(),type:"manual",createdAt:new Date().toISOString()};t(p)};return s.jsx(Es,{children:s.jsxs(Er,{open:!0,onOpenChange:n,children:[s.jsx(Pt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-40",onClick:n}),s.jsx(pr,{className:"fixed z-50 top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-white p-0 shadow-2xl rounded-xl w-[90vw] max-w-lg flex flex-col",children:s.jsxs(Pt.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"h-full flex flex-col",children:[s.jsx(mr,{className:"p-6 border-b bg-gradient-to-r from-brandPrimary to-brandSecondary text-white rounded-t-lg",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(ss,{className:"h-6 w-6"}),s.jsx(gr,{className:"text-2xl font-bold",children:"Add Manual Labor Cost"})]})}),s.jsxs("form",{onSubmit:h,children:[s.jsxs("div",{className:"p-6 space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{className:"text-sm font-semibold text-gray-700",children:"Select Employee *"}),s.jsxs(st,{value:r,onValueChange:a,children:[s.jsx(nt,{className:"border-2 focus:border-brandPrimary",children:s.jsx(at,{placeholder:"Choose employee..."})}),s.jsx(rt,{children:e.filter(f=>f.isActive).map(f=>s.jsx(xe,{value:f.id,children:s.jsxs("div",{className:"flex items-center justify-between w-full",children:[s.jsxs("span",{children:[f.firstName," ",f.lastName]}),s.jsxs("span",{className:"text-xs text-gray-500 ml-2",children:[f.role," - $",f.hourlyRate,"/hr"]})]})},f.id))})]})]}),d&&s.jsxs("div",{className:"p-4 bg-brandSecondary/10 rounded-lg border border-brandSecondary/20",children:[s.jsx("h4",{className:"font-semibold text-brandSecondary mb-2",children:"Employee Details"}),s.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-brandSecondary font-medium",children:"Name:"}),s.jsxs("p",{children:[d.firstName," ",d.lastName]})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-brandSecondary font-medium",children:"Role:"}),s.jsx("p",{children:d.role})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-brandSecondary font-medium",children:"Hourly Rate:"}),s.jsxs("p",{children:["$",d.hourlyRate,"/hr"]})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-brandSecondary font-medium",children:"Type:"}),s.jsx("p",{children:d.employeeType})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"hours",className:"text-sm font-semibold text-gray-700",children:"Hours Worked *"}),s.jsx($e,{id:"hours",type:"number",step:"0.5",min:"0",max:"24",value:i,onChange:f=>o(f.target.value),placeholder:"Enter hours worked",className:"border-2 focus:border-brandPrimary transition-colors"})]}),d&&i&&s.jsxs("div",{className:"p-4 bg-green-50 rounded-lg border border-green-200",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[s.jsx(vs,{className:"h-5 w-5 text-green-600"}),s.jsx("h4",{className:"font-semibold text-green-800",children:"Calculated Cost"})]}),s.jsxs("div",{className:"space-y-1 text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Hours:"}),s.jsx("span",{className:"font-medium",children:i})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Rate:"}),s.jsxs("span",{className:"font-medium",children:["$",d.hourlyRate,"/hr"]})]}),s.jsxs("div",{className:"flex justify-between text-lg font-bold text-green-700 border-t pt-1",children:[s.jsx("span",{children:"Total Cost:"}),s.jsxs("span",{children:["$",u]})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"notes",className:"text-sm font-semibold text-gray-700",children:"Notes (Optional)"}),s.jsx(_n,{id:"notes",value:l,onChange:f=>c(f.target.value),placeholder:"Add any notes about this labor cost...",className:"border-2 focus:border-brandPrimary transition-colors min-h-[80px]"})]})]}),s.jsxs(Tr,{className:"p-6 border-t bg-gray-50 rounded-b-lg",children:[s.jsxs(se,{type:"button",variant:"outline",onClick:n,className:"hover:bg-gray-100",children:[s.jsx(rn,{className:"h-4 w-4 mr-2"})," Cancel"]}),s.jsxs(se,{type:"submit",className:"bg-gradient-to-r from-brandPrimary to-brandSecondary text-white hover:opacity-90",disabled:!r||!i,children:[s.jsx(Qn,{className:"h-4 w-4 mr-2"})," Add Labor Cost"]})]})]})]})})]})})},See=({job:e,onUpdateJob:t})=>{var we,Se,De,Ie,oe,Ee,G,ge,Pe,Ve,pt,et,Zt,Ze,jt,ct,yt,Yt,At,On,mn,Bt,Hn,It,Mt,nn,Ye,dt,sn,Xr,Rt,Sa,Ua,js,Sr,cr,Ms,ol,fi,Ca,Pa,Da,Ya,sa,Ga,bo,ll,cl,dl,ul,Id,oh,lh,hl,Od,ch,lc,dh,Fd;const[n,r]=j.useState("estimate"),[a,i]=j.useState(!1),[o,l]=j.useState(null),[c,d]=j.useState(!1),[u,h]=j.useState(null),[f,p]=j.useState(!1),[y,g]=j.useState(!1),[x,m]=j.useState(null),[v,b]=j.useState(((De=(Se=(we=e==null?void 0:e.financials)==null?void 0:we.estimate)==null?void 0:Se.sqft)==null?void 0:De.toString())||"0"),[C,S]=j.useState(((Ee=(oe=(Ie=e==null?void 0:e.financials)==null?void 0:Ie.estimate)==null?void 0:oe.drywallMaterialRate)==null?void 0:Ee.toString())||"0.66"),[P,D]=j.useState(((Pe=(ge=(G=e==null?void 0:e.financials)==null?void 0:G.estimate)==null?void 0:ge.hangerRate)==null?void 0:Pe.toString())||"0.27"),[N,M]=j.useState(((et=(pt=(Ve=e==null?void 0:e.financials)==null?void 0:Ve.estimate)==null?void 0:pt.finisherRate)==null?void 0:et.toString())||"0.27"),[L,T]=j.useState(((jt=(Ze=(Zt=e==null?void 0:e.financials)==null?void 0:Zt.estimate)==null?void 0:Ze.prepCleanRate)==null?void 0:jt.toString())||"0.03"),[E,A]=j.useState(((Yt=(yt=(ct=e==null?void 0:e.financials)==null?void 0:ct.estimate)==null?void 0:yt.drywallSalesTaxRate)==null?void 0:Yt.toString())||"0"),[O,W]=j.useState(((mn=(On=(At=e==null?void 0:e.financials)==null?void 0:At.estimate)==null?void 0:On.totalEstimateAmount)==null?void 0:mn.toString())||"");Q.useEffect(()=>{var os,aa,dr,ls,qn,cs,Rs,Qr,Ls,Ja;if(console.log("=== JobFinancials useEffect triggered ==="),console.log("Job prop:",e),console.log("Current estimateSqft state:",v),console.log("Job estimate sqft:",(aa=(os=e==null?void 0:e.financials)==null?void 0:os.estimate)==null?void 0:aa.sqft),!((dr=e==null?void 0:e.financials)!=null&&dr.estimate)){console.log("No job financials estimate found, returning");return}const ke=((ls=e.financials.estimate.sqft)==null?void 0:ls.toString())||"0",mt=((qn=e.financials.estimate.drywallMaterialRate)==null?void 0:qn.toString())||"0.66",xt=((cs=e.financials.estimate.hangerRate)==null?void 0:cs.toString())||"0.27",it=((Rs=e.financials.estimate.finisherRate)==null?void 0:Rs.toString())||"0.27",_t=((Qr=e.financials.estimate.prepCleanRate)==null?void 0:Qr.toString())||"0.03",Xt=((Ls=e.financials.estimate.drywallSalesTaxRate)==null?void 0:Ls.toString())||"0",vn=((Ja=e.financials.estimate.totalEstimateAmount)==null?void 0:Ja.toString())||"";console.log("New values from job prop:",{newSqft:ke,newMaterialRate:mt,newHangerRate:xt,newFinisherRate:it,newPrepCleanRate:_t,newSalesTaxRate:Xt,newTotalEstimateAmount:vn}),v!==ke&&(console.log("Updating estimateSqft from",v,"to",ke),b(ke)),C!==mt&&S(mt),P!==xt&&D(xt),N!==it&&M(it),L!==_t&&T(_t),E!==Xt&&A(Xt),O!==vn&&W(vn),console.log("=== JobFinancials useEffect finished ===")},[(Hn=(Bt=e==null?void 0:e.financials)==null?void 0:Bt.estimate)==null?void 0:Hn.sqft,(Mt=(It=e==null?void 0:e.financials)==null?void 0:It.estimate)==null?void 0:Mt.drywallMaterialRate,(Ye=(nn=e==null?void 0:e.financials)==null?void 0:nn.estimate)==null?void 0:Ye.hangerRate,(sn=(dt=e==null?void 0:e.financials)==null?void 0:dt.estimate)==null?void 0:sn.finisherRate,(Rt=(Xr=e==null?void 0:e.financials)==null?void 0:Xr.estimate)==null?void 0:Rt.prepCleanRate,(Ua=(Sa=e==null?void 0:e.financials)==null?void 0:Sa.estimate)==null?void 0:Ua.drywallSalesTaxRate,(Sr=(js=e==null?void 0:e.financials)==null?void 0:js.estimate)==null?void 0:Sr.totalEstimateAmount]);const z=j.useMemo(()=>{const ke=parseFloat(v)||0,mt=parseFloat(C)||0,xt=parseFloat(P)||0,it=parseFloat(N)||0,_t=parseFloat(L)||0,Xt=parseFloat(E)||0,vn=parseFloat(O)||0,os=ke*mt,aa=ke*xt,dr=ke*it,ls=ke*_t,qn=os*(Xt/100),cs=os+aa+dr+ls+qn,Rs=vn>0?vn:cs,Qr=cs,Ls=Rs-Qr,Ja=Qr>0?Ls/Qr*100:0;return{sqft:ke,materialCost:os,hangerCost:aa,finisherCost:dr,prepCleanCost:ls,salesTax:qn,calculatedTotalEstimate:cs,totalEstimate:Rs,totalCost:Qr,profitAmount:Ls,profitPercentage:Ja}},[v,C,P,N,L,E,O]),[F,V]=j.useState(((ol=(Ms=(cr=e==null?void 0:e.financials)==null?void 0:cr.fieldRevised)==null?void 0:Ms.sqft)==null?void 0:ol.toString())||"0"),[B,Y]=j.useState(((Pa=(Ca=(fi=e==null?void 0:e.financials)==null?void 0:fi.fieldRevised)==null?void 0:Ca.hangerRate)==null?void 0:Pa.toString())||"0.27"),[$,I]=j.useState(((sa=(Ya=(Da=e==null?void 0:e.financials)==null?void 0:Da.fieldRevised)==null?void 0:Ya.finisherRate)==null?void 0:sa.toString())||"0.27"),[U,q]=j.useState(((ll=(bo=(Ga=e==null?void 0:e.financials)==null?void 0:Ga.fieldRevised)==null?void 0:bo.prepCleanRate)==null?void 0:ll.toString())||"0.03"),[X,te]=j.useState(((ul=(dl=(cl=e==null?void 0:e.financials)==null?void 0:cl.fieldRevised)==null?void 0:dl.drywallMaterialRate)==null?void 0:ul.toString())||"0.66");Q.useEffect(()=>{var ke,mt,xt;if(e&&F!==void 0){const it=parseFloat(F)||0;it!==(((mt=(ke=e.financials)==null?void 0:ke.fieldRevised)==null?void 0:mt.sqft)||0)&&t(e.id,{financials:{...e.financials,fieldRevised:{...(xt=e.financials)==null?void 0:xt.fieldRevised,sqft:it}}})}},[F,e,t]),Q.useEffect(()=>{var ke,mt,xt;if(e&&B!==void 0){const it=parseFloat(B)||0;it!==(((mt=(ke=e.financials)==null?void 0:ke.fieldRevised)==null?void 0:mt.hangerRate)||0)&&t(e.id,{financials:{...e.financials,fieldRevised:{...(xt=e.financials)==null?void 0:xt.fieldRevised,hangerRate:it}}})}},[B,e,t]),Q.useEffect(()=>{var ke,mt,xt;if(e&&$!==void 0){const it=parseFloat($)||0;it!==(((mt=(ke=e.financials)==null?void 0:ke.fieldRevised)==null?void 0:mt.finisherRate)||0)&&t(e.id,{financials:{...e.financials,fieldRevised:{...(xt=e.financials)==null?void 0:xt.fieldRevised,finisherRate:it}}})}},[$,e,t]),Q.useEffect(()=>{var ke,mt,xt;if(e&&U!==void 0){const it=parseFloat(U)||0;it!==(((mt=(ke=e.financials)==null?void 0:ke.fieldRevised)==null?void 0:mt.prepCleanRate)||0)&&t(e.id,{financials:{...e.financials,fieldRevised:{...(xt=e.financials)==null?void 0:xt.fieldRevised,prepCleanRate:it}}})}},[U,e,t]),Q.useEffect(()=>{var ke,mt,xt;if(e&&X!==void 0){const it=parseFloat(X)||0;it!==(((mt=(ke=e.financials)==null?void 0:ke.fieldRevised)==null?void 0:mt.drywallMaterialRate)||0)&&t(e.id,{financials:{...e.financials,fieldRevised:{...(xt=e.financials)==null?void 0:xt.fieldRevised,drywallMaterialRate:it}}})}},[X,e,t]);const ae=j.useMemo(()=>{var wo,fl,Hi,pl,ml,ds;const ke=parseFloat(F)||0,mt=parseFloat(X)||0,xt=parseFloat(B)||0,it=parseFloat($)||0,_t=parseFloat(U)||0,Xt=((fl=(wo=e==null?void 0:e.financials)==null?void 0:wo.fieldRevised)==null?void 0:fl.drywallMaterialCost)||ke*mt,vn=ke*xt,os=ke*it,aa=ke*_t,dr=Xt+vn+os+aa,ls=((pl=(Hi=e==null?void 0:e.financials)==null?void 0:Hi.estimate)==null?void 0:pl.totalEstimateAmount)||0,qn=((ds=(ml=e==null?void 0:e.financials)==null?void 0:ml.fieldRevised)==null?void 0:ds.changeOrders)||[],cs=qn.reduce((ur,cc)=>ur+(cc.totalValue||0),0),Rs=ls+cs,Qr=dr,Ls=Rs-Qr,Ja=Qr>0?Ls/Qr*100:0;return{sqft:ke,materialCost:Xt,hangerCost:vn,finisherCost:os,prepCleanCost:aa,calculatedTotalFieldRevised:dr,totalFieldRevised:Rs,totalCost:Qr,profitAmount:Ls,profitPercentage:Ja,originalEstimateAmount:ls,fieldChangeOrderTotal:cs,fieldChangeOrders:qn}},[F,X,B,$,U,(oh=(Id=e==null?void 0:e.financials)==null?void 0:Id.fieldRevised)==null?void 0:oh.drywallMaterialCost,(hl=(lh=e==null?void 0:e.financials)==null?void 0:lh.fieldRevised)==null?void 0:hl.changeOrders,(ch=(Od=e==null?void 0:e.financials)==null?void 0:Od.estimate)==null?void 0:ch.totalEstimateAmount]),le=j.useMemo(()=>{var cs,Rs,Qr,Ls,Ja,wo,fl,Hi,pl,ml;const ke=((Rs=(cs=e==null?void 0:e.financials)==null?void 0:cs.actual)==null?void 0:Rs.laborCosts)||[],mt=((Ls=(Qr=e==null?void 0:e.financials)==null?void 0:Qr.actual)==null?void 0:Ls.manualLaborCosts)||[],xt=((wo=(Ja=e==null?void 0:e.financials)==null?void 0:Ja.actual)==null?void 0:wo.materialInvoices)||[],it=((Hi=(fl=e==null?void 0:e.financials)==null?void 0:fl.actual)==null?void 0:Hi.changeOrders)||[],_t=((ml=(pl=e==null?void 0:e.financials)==null?void 0:pl.fieldRevised)==null?void 0:ml.changeOrders)||[],Xt=ke.reduce((ds,ur)=>ds+(ur.amount||0),0),vn=mt.reduce((ds,ur)=>ds+(ur.amount||0),0),os=xt.reduce((ds,ur)=>ds+(ur.dollarAmount||0),0),aa=xt.reduce((ds,ur)=>ds+(ur.salesTax||0),0),dr=it.reduce((ds,ur)=>ds+(ur.totalValue||0),0),ls=_t.reduce((ds,ur)=>ds+(ur.totalValue||0),0),qn=Xt+vn+os+aa+dr+ls;return{totalLaborCost:Xt,totalManualLaborCost:vn,totalMaterialCost:os,totalSalesTax:aa,totalChangeOrderValue:dr,totalFieldChangeOrderValue:ls,totalActual:qn,laborCosts:ke,manualLaborCosts:mt,materialInvoices:xt,changeOrders:it,fieldChangeOrders:_t}},[(lc=e==null?void 0:e.financials)==null?void 0:lc.actual,(Fd=(dh=e==null?void 0:e.financials)==null?void 0:dh.fieldRevised)==null?void 0:Fd.changeOrders]),me=j.useMemo(()=>{const ke=z.totalEstimate,mt=ae.totalFieldRevised,xt=le.totalActual,it=ke-xt,_t=mt-xt,Xt=ke-mt;return{estimateVsActual:it,fieldRevisedVsActual:_t,estimateVsFieldRevised:Xt,estimateMargin:ke>0?it/ke*100:0,fieldRevisedMargin:mt>0?_t/mt*100:0}},[z.totalEstimate,ae.totalFieldRevised,le.totalActual]),Le=ke=>{var it,_t,Xt;const mt=((_t=(it=e==null?void 0:e.financials)==null?void 0:it.actual)==null?void 0:_t.changeOrders)||[];let xt;o?(xt=mt.map(vn=>vn.id===o.id?ke:vn),pe({title:"Change Order Updated! ✅",description:`Change order "${ke.changeOrderNumber}" has been updated.`})):(xt=[...mt,ke],pe({title:"Change Order Added! 📋",description:`Change order "${ke.changeOrderNumber}" has been added with a value of $${ke.totalValue}.`})),t(e.id,{financials:{...e.financials,actual:{...(Xt=e.financials)==null?void 0:Xt.actual,changeOrders:xt}}}),i(!1),l(null)},ie=ke=>{var it,_t,Xt;const xt=(((_t=(it=e==null?void 0:e.financials)==null?void 0:it.actual)==null?void 0:_t.changeOrders)||[]).filter(vn=>vn.id!==ke);t(e.id,{financials:{...e.financials,actual:{...(Xt=e.financials)==null?void 0:Xt.actual,changeOrders:xt}}}),pe({title:"Change Order Deleted! 🗑️",description:"The change order has been removed.",variant:"destructive"})},Ne=ke=>{l(ke),i(!0)},Be=ke=>{var it,_t,Xt;const xt=[...((_t=(it=e==null?void 0:e.financials)==null?void 0:it.actual)==null?void 0:_t.materialInvoices)||[],...ke];t(e.id,{financials:{...e.financials,actual:{...(Xt=e.financials)==null?void 0:Xt.actual,materialInvoices:xt}}}),d(!1),h(null),pe({title:"Material Invoices Added! 📦",description:`${ke.length} material invoice(s) have been added.`})},Ue=ke=>{var it,_t,Xt;const xt=(((_t=(it=e==null?void 0:e.financials)==null?void 0:it.actual)==null?void 0:_t.materialInvoices)||[]).filter(vn=>vn.id!==ke);t(e.id,{financials:{...e.financials,actual:{...(Xt=e.financials)==null?void 0:Xt.actual,materialInvoices:xt}}}),pe({title:"Material Invoice Deleted! 🗑️",description:"The material invoice has been removed.",variant:"destructive"})},_e=ke=>{var it,_t,Xt;const xt=[...((_t=(it=e==null?void 0:e.financials)==null?void 0:it.actual)==null?void 0:_t.manualLaborCosts)||[],ke];t(e.id,{financials:{...e.financials,actual:{...(Xt=e.financials)==null?void 0:Xt.actual,manualLaborCosts:xt}}}),p(!1),pe({title:"Manual Labor Cost Added! 👷",description:`Manual labor cost of $${ke.amount} has been added.`})},ue=ke=>{var it,_t,Xt;const xt=(((_t=(it=e==null?void 0:e.financials)==null?void 0:it.actual)==null?void 0:_t.manualLaborCosts)||[]).filter(vn=>vn.id!==ke);t(e.id,{financials:{...e.financials,actual:{...(Xt=e.financials)==null?void 0:Xt.actual,manualLaborCosts:xt}}}),pe({title:"Manual Labor Cost Deleted! 🗑️",description:"The manual labor cost has been removed.",variant:"destructive"})},wt=ke=>{var it,_t,Xt;const mt=((_t=(it=e==null?void 0:e.financials)==null?void 0:it.fieldRevised)==null?void 0:_t.changeOrders)||[];let xt;x?(xt=mt.map(vn=>vn.id===x.id?ke:vn),pe({title:"Field Change Order Updated! ✅",description:`Field change order "${ke.changeOrderNumber}" has been updated.`})):(xt=[...mt,ke],pe({title:"Field Change Order Added! 📋",description:`Field change order "${ke.changeOrderNumber}" has been added with a value of $${ke.totalValue}.`})),t(e.id,{financials:{...e.financials,fieldRevised:{...(Xt=e.financials)==null?void 0:Xt.fieldRevised,changeOrders:xt}}}),g(!1),m(null)},gt=ke=>{var it,_t,Xt;const xt=(((_t=(it=e==null?void 0:e.financials)==null?void 0:it.fieldRevised)==null?void 0:_t.changeOrders)||[]).filter(vn=>vn.id!==ke);t(e.id,{financials:{...e.financials,fieldRevised:{...(Xt=e.financials)==null?void 0:Xt.fieldRevised,changeOrders:xt}}}),pe({title:"Field Change Order Deleted! 🗑️",description:"The field change order has been removed.",variant:"destructive"})},ve=ke=>{m(ke),g(!0)};return Q.useEffect(()=>{var ke,mt,xt;if(e&&v!==void 0&&v!==""){const it=parseFloat(v)||0,_t=((mt=(ke=e.financials)==null?void 0:ke.estimate)==null?void 0:mt.sqft)||0;Math.abs(it-_t)>.001&&(console.log("Auto-saving estimateSqft:",it),t(e.id,{financials:{...e.financials,estimate:{...(xt=e.financials)==null?void 0:xt.estimate,sqft:it}}}))}},[v,e,t]),Q.useEffect(()=>{var ke,mt,xt;if(e&&C!==void 0&&C!==""){const it=parseFloat(C)||.66,_t=((mt=(ke=e.financials)==null?void 0:ke.estimate)==null?void 0:mt.drywallMaterialRate)||.66;Math.abs(it-_t)>.001&&(console.log("Auto-saving drywallMaterialRate:",it),t(e.id,{financials:{...e.financials,estimate:{...(xt=e.financials)==null?void 0:xt.estimate,drywallMaterialRate:it}}}))}},[C,e,t]),Q.useEffect(()=>{var ke,mt,xt;if(e&&P!==void 0&&P!==""){const it=parseFloat(P)||.27,_t=((mt=(ke=e.financials)==null?void 0:ke.estimate)==null?void 0:mt.hangerRate)||.27;Math.abs(it-_t)>.001&&(console.log("Auto-saving hangerRate:",it),t(e.id,{financials:{...e.financials,estimate:{...(xt=e.financials)==null?void 0:xt.estimate,hangerRate:it}}}))}},[P,e,t]),Q.useEffect(()=>{var ke,mt,xt;if(e&&N!==void 0&&N!==""){const it=parseFloat(N)||.27,_t=((mt=(ke=e.financials)==null?void 0:ke.estimate)==null?void 0:mt.finisherRate)||.27;Math.abs(it-_t)>.001&&(console.log("Auto-saving finisherRate:",it),t(e.id,{financials:{...e.financials,estimate:{...(xt=e.financials)==null?void 0:xt.estimate,finisherRate:it}}}))}},[N,e,t]),Q.useEffect(()=>{var ke,mt,xt;if(e&&L!==void 0&&L!==""){const it=parseFloat(L)||.03,_t=((mt=(ke=e.financials)==null?void 0:ke.estimate)==null?void 0:mt.prepCleanRate)||.03;Math.abs(it-_t)>.001&&(console.log("Auto-saving prepCleanRate:",it),t(e.id,{financials:{...e.financials,estimate:{...(xt=e.financials)==null?void 0:xt.estimate,prepCleanRate:it}}}))}},[L,e,t]),Q.useEffect(()=>{var ke,mt,xt;if(e&&E!==void 0&&E!==""){const it=parseFloat(E)||0,_t=((mt=(ke=e.financials)==null?void 0:ke.estimate)==null?void 0:mt.drywallSalesTaxRate)||0;Math.abs(it-_t)>.001&&(console.log("Auto-saving drywallSalesTaxRate:",it),t(e.id,{financials:{...e.financials,estimate:{...(xt=e.financials)==null?void 0:xt.estimate,drywallSalesTaxRate:it}}}))}},[E,e,t]),Q.useEffect(()=>{var ke,mt,xt;if(e&&O!==void 0&&O!==""){const it=parseFloat(O)||0,_t=((mt=(ke=e.financials)==null?void 0:ke.estimate)==null?void 0:mt.totalEstimateAmount)||0;Math.abs(it-_t)>.001&&(console.log("Auto-saving totalEstimateAmount:",it),t(e.id,{financials:{...e.financials,estimate:{...(xt=e.financials)==null?void 0:xt.estimate,totalEstimateAmount:it}}}))}},[O,e,t]),e?s.jsxs("div",{className:"space-y-6",children:[s.jsx(Pt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:s.jsxs(Te,{className:"border-0 bg-gradient-to-r from-brandPrimary to-brandSecondary text-white shadow-2xl",children:[s.jsx(Xe,{children:s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"p-3 bg-white/20 rounded-xl",children:s.jsx(_r,{className:"h-8 w-8"})}),s.jsxs("div",{children:[s.jsx(Qe,{className:"text-3xl font-bold",children:"Job Financials"}),s.jsxs("p",{className:"text-white/80 mt-1",children:[e.jobName," - Financial Analysis"]})]})]})}),s.jsxs(Me,{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(vs,{className:"h-5 w-5 text-white/70"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-white/70 text-sm",children:"Estimate Total"}),s.jsxs("p",{className:"font-semibold text-2xl",children:["$",z.totalEstimate.toFixed(0)]})]})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(tn,{className:"h-5 w-5 text-white/70"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-white/70 text-sm",children:"Field Revised"}),s.jsxs("p",{className:"font-semibold text-2xl",children:["$",ae.totalFieldRevised.toFixed(0)]})]})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Ei,{className:"h-5 w-5 text-white/70"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-white/70 text-sm",children:"Actual Total"}),s.jsxs("p",{className:"font-semibold text-2xl",children:["$",le.totalActual.toFixed(0)]})]})]})]})]})}),s.jsxs(uo,{value:n,onValueChange:r,className:"space-y-6",children:[s.jsxs(Oi,{className:"grid w-full grid-cols-4",children:[s.jsx(Ht,{value:"estimate",children:"Estimate"}),s.jsx(Ht,{value:"field-revised",children:"Field Revised"}),s.jsx(Ht,{value:"actual",children:"Actual"}),s.jsx(Ht,{value:"overview",children:"Overview"})]}),s.jsx(en,{value:"estimate",className:"space-y-6",children:s.jsxs(Te,{children:[s.jsx(Xe,{children:s.jsxs(Qe,{className:"flex items-center",children:[s.jsx(vs,{className:"h-5 w-5 mr-2 text-brandSecondary"}),"Estimate Financials"]})}),s.jsxs(Me,{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{children:"Square Footage"}),s.jsx($e,{type:"number",value:v,onChange:ke=>b(ke.target.value),placeholder:"Enter square footage",className:"border-2 focus:border-brandSecondary"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{children:"Drywall Material Rate ($/sqft)"}),s.jsx($e,{type:"number",step:"0.01",value:C,onChange:ke=>S(ke.target.value),placeholder:"0.66",className:"border-2 focus:border-brandSecondary"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{children:"Hanger Rate ($/sqft)"}),s.jsx($e,{type:"number",step:"0.01",value:P,onChange:ke=>D(ke.target.value),placeholder:"0.27",className:"border-2 focus:border-brandSecondary"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{children:"Finisher Rate ($/sqft)"}),s.jsx($e,{type:"number",step:"0.01",value:N,onChange:ke=>M(ke.target.value),placeholder:"0.27",className:"border-2 focus:border-brandSecondary"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{children:"Prep/Clean Rate ($/sqft)"}),s.jsx($e,{type:"number",step:"0.01",value:L,onChange:ke=>T(ke.target.value),placeholder:"0.03",className:"border-2 focus:border-brandSecondary"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{children:"Sales Tax Rate (%)"}),s.jsx($e,{type:"number",step:"0.01",value:E,onChange:ke=>A(ke.target.value),placeholder:"0",className:"border-2 focus:border-brandSecondary"})]}),e.jobType==="residential"&&s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{children:"Total Estimate Amount ($)"}),s.jsx($e,{type:"number",step:"0.01",value:O,onChange:ke=>W(ke.target.value),placeholder:"Enter total estimate amount",className:"border-2 focus:border-brandSecondary"}),s.jsx("p",{className:"text-xs text-gray-500",children:"Enter the total amount you're charging the customer (optional)"})]})]}),s.jsx(Te,{className:"border-2 border-brandSecondary/20 bg-brandSecondary/5",children:s.jsxs(Me,{className:"p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-brandSecondary mb-4",children:"Estimate Breakdown"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Material Cost:"}),s.jsxs("span",{className:"font-semibold",children:["$",z.materialCost.toFixed(2)]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Hanger Cost:"}),s.jsxs("span",{className:"font-semibold",children:["$",z.hangerCost.toFixed(2)]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Finisher Cost:"}),s.jsxs("span",{className:"font-semibold",children:["$",z.finisherCost.toFixed(2)]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Prep/Clean Cost:"}),s.jsxs("span",{className:"font-semibold",children:["$",z.prepCleanCost.toFixed(2)]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Sales Tax:"}),s.jsxs("span",{className:"font-semibold",children:["$",z.salesTax.toFixed(2)]})]}),s.jsx("div",{className:"border-t pt-3",children:s.jsxs("div",{className:"flex justify-between text-lg font-bold text-brandSecondary",children:[s.jsx("span",{children:"Total Cost:"}),s.jsxs("span",{children:["$",z.totalCost.toFixed(2)]})]})}),e.jobType==="residential"&&parseFloat(O)>0&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"border-t pt-3",children:s.jsxs("div",{className:"flex justify-between text-lg font-bold text-green-600",children:[s.jsx("span",{children:"Total Estimate (Charged):"}),s.jsxs("span",{children:["$",z.totalEstimate.toFixed(2)]})]})}),s.jsxs("div",{className:"border-t pt-3",children:[s.jsxs("div",{className:"flex justify-between text-lg font-bold text-blue-600",children:[s.jsx("span",{children:"Estimated Profit:"}),s.jsxs("span",{children:["$",z.profitAmount.toFixed(2)]})]}),s.jsxs("div",{className:"flex justify-between text-sm text-gray-600",children:[s.jsx("span",{children:"Profit Percentage:"}),s.jsxs("span",{className:"font-semibold",children:[z.profitPercentage.toFixed(1),"%"]})]})]})]})]})]})})]})]})}),s.jsx(en,{value:"field-revised",className:"space-y-6",children:s.jsxs(Te,{children:[s.jsx(Xe,{children:s.jsxs(Qe,{className:"flex items-center",children:[s.jsx(tn,{className:"h-5 w-5 mr-2 text-brandPrimary"}),"Field Revised Financials"]})}),s.jsxs(Me,{className:"space-y-6",children:[s.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg border border-blue-200",children:[s.jsx("h4",{className:"font-semibold text-blue-800 mb-2",children:"Field Takeoff Data"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-blue-600 font-medium",children:"Actual SqFt from Takeoffs:"}),s.jsxs("p",{className:"text-lg font-bold text-blue-800",children:[ae.sqft," sqft"]})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-blue-600 font-medium",children:"Material Cost (Calculated):"}),s.jsxs("p",{className:"text-lg font-bold text-blue-800",children:["$",ae.materialCost.toFixed(2)]})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{children:"Square Footage"}),s.jsx($e,{type:"number",value:F,onChange:ke=>V(ke.target.value),placeholder:"Enter square footage",className:"border-2 focus:border-brandPrimary"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{children:"Hanger Rate ($/sqft)"}),s.jsx($e,{type:"number",step:"0.01",value:B,onChange:ke=>Y(ke.target.value),placeholder:"0.27",className:"border-2 focus:border-brandPrimary"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{children:"Finisher Rate ($/sqft)"}),s.jsx($e,{type:"number",step:"0.01",value:$,onChange:ke=>I(ke.target.value),placeholder:"0.27",className:"border-2 focus:border-brandPrimary"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{children:"Prep/Clean Rate ($/sqft)"}),s.jsx($e,{type:"number",step:"0.01",value:U,onChange:ke=>q(ke.target.value),placeholder:"0.03",className:"border-2 focus:border-brandPrimary"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{children:"Drywall Material Rate ($/sqft)"}),s.jsx($e,{type:"number",step:"0.01",value:X,onChange:ke=>te(ke.target.value),placeholder:"0.66",className:"border-2 focus:border-brandPrimary"})]})]}),e.jobType==="residential"&&s.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg border border-blue-200",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h4",{className:"font-semibold text-blue-800",children:"Field Change Orders"}),s.jsxs(se,{onClick:()=>g(!0),className:"bg-blue-600 hover:bg-blue-700 text-white",size:"sm",children:[s.jsx(un,{className:"h-4 w-4 mr-2"}),"Add Change Order"]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-blue-600 font-medium",children:"Original Estimate:"}),s.jsxs("p",{className:"text-lg font-bold text-blue-800",children:["$",ae.originalEstimateAmount.toFixed(2)]})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-blue-600 font-medium",children:"Field Change Orders:"}),s.jsxs("p",{className:"text-lg font-bold text-blue-800",children:["$",ae.fieldChangeOrderTotal.toFixed(2)]})]})]}),ae.fieldChangeOrders.length>0&&s.jsxs("div",{className:"mt-4",children:[s.jsx("h5",{className:"font-medium text-sm text-blue-800 mb-2",children:"Field Change Orders:"}),s.jsx("div",{className:"space-y-2",children:ae.fieldChangeOrders.map(ke=>s.jsxs("div",{className:"flex items-center justify-between p-2 bg-white rounded border",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-sm",children:ke.changeOrderNumber}),s.jsx("p",{className:"text-xs text-gray-600",children:ke.description})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs("div",{className:"text-right",children:[s.jsxs("p",{className:"font-bold text-blue-600",children:["$",ke.totalValue.toFixed(2)]}),s.jsxs("p",{className:"text-xs text-gray-500",children:["+",ke.profitPercentage,"% profit"]})]}),s.jsx(se,{variant:"ghost",size:"icon",onClick:()=>ve(ke),className:"text-brandSecondary hover:bg-brandSecondary/10",children:s.jsx(Ai,{className:"h-4 w-4"})}),s.jsxs(yr,{children:[s.jsx(br,{asChild:!0,children:s.jsx(se,{variant:"ghost",size:"icon",className:"text-red-500 hover:bg-red-100",children:s.jsx(Kt,{className:"h-4 w-4"})})}),s.jsxs(er,{children:[s.jsxs(tr,{children:[s.jsx(rr,{children:"Delete Field Change Order"}),s.jsxs(sr,{children:['Are you sure you want to delete field change order "',ke.changeOrderNumber,'"? This action cannot be undone.']})]}),s.jsxs(nr,{children:[s.jsx(ir,{children:"Cancel"}),s.jsx(ar,{onClick:()=>gt(ke.id),className:"bg-red-600 hover:bg-red-700",children:"Delete"})]})]})]})]})]},ke.id))})]})]}),s.jsx(Te,{className:"border-2 border-brandPrimary/20 bg-brandPrimary/5",children:s.jsxs(Me,{className:"p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-brandPrimary mb-4",children:"Field Revised Breakdown"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Material Cost:"}),s.jsxs("span",{className:"font-semibold",children:["$",ae.materialCost.toFixed(2)]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Hanger Cost:"}),s.jsxs("span",{className:"font-semibold",children:["$",ae.hangerCost.toFixed(2)]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Finisher Cost:"}),s.jsxs("span",{className:"font-semibold",children:["$",ae.finisherCost.toFixed(2)]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Prep/Clean Cost:"}),s.jsxs("span",{className:"font-semibold",children:["$",ae.prepCleanCost.toFixed(2)]})]}),s.jsx("div",{className:"border-t pt-3",children:s.jsxs("div",{className:"flex justify-between text-lg font-bold text-brandPrimary",children:[s.jsx("span",{children:"Total Cost:"}),s.jsxs("span",{children:["$",ae.totalCost.toFixed(2)]})]})}),e.jobType==="residential"&&ae.originalEstimateAmount>0&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"border-t pt-3",children:[s.jsxs("div",{className:"flex justify-between text-sm text-gray-600",children:[s.jsx("span",{children:"Original Estimate:"}),s.jsxs("span",{children:["$",ae.originalEstimateAmount.toFixed(2)]})]}),s.jsxs("div",{className:"flex justify-between text-sm text-gray-600",children:[s.jsx("span",{children:"Field Change Orders:"}),s.jsxs("span",{children:["$",ae.fieldChangeOrderTotal.toFixed(2)]})]})]}),s.jsx("div",{className:"border-t pt-3",children:s.jsxs("div",{className:"flex justify-between text-lg font-bold text-green-600",children:[s.jsx("span",{children:"Total Field Revised (Charged):"}),s.jsxs("span",{children:["$",ae.totalFieldRevised.toFixed(2)]})]})}),s.jsxs("div",{className:"border-t pt-3",children:[s.jsxs("div",{className:"flex justify-between text-lg font-bold text-blue-600",children:[s.jsx("span",{children:"Field Revised Profit:"}),s.jsxs("span",{children:["$",ae.profitAmount.toFixed(2)]})]}),s.jsxs("div",{className:"flex justify-between text-sm text-gray-600",children:[s.jsx("span",{children:"Profit Percentage:"}),s.jsxs("span",{className:"font-semibold",children:[ae.profitPercentage.toFixed(1),"%"]})]})]})]})]})]})})]})]})}),s.jsxs(en,{value:"actual",className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs(Te,{children:[s.jsx(Xe,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs(Qe,{className:"flex items-center",children:[s.jsx(ss,{className:"h-5 w-5 mr-2 text-brandSecondary"}),"Labor Costs"]}),s.jsxs(se,{onClick:()=>p(!0),size:"sm",className:"bg-brandSecondary hover:bg-brandSecondary/90 text-white",children:[s.jsx(un,{className:"h-4 w-4 mr-1"}),"Add Manual"]})]})}),s.jsx(Me,{children:le.laborCosts.length===0&&le.manualLaborCosts.length===0?s.jsx("p",{className:"text-gray-500 text-center py-4",children:"No labor costs recorded yet"}):s.jsxs("div",{className:"space-y-3",children:[le.laborCosts.map((ke,mt)=>s.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg bg-green-50",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-sm",children:ke.description}),s.jsx("p",{className:"text-xs text-gray-600",children:ke.type==="hourly"?`${ke.hours}h @ $${ke.originalAmount/ke.hours}/hr`:ke.type==="piece-rate"?`${ke.completionPercentage}% completion`:`${ke.hours}h apprentice work`}),ke.employerTax>0&&s.jsxs("p",{className:"text-xs text-blue-600",children:["Includes $",ke.employerTax.toFixed(2)," employer tax"]})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("p",{className:"font-bold text-green-600",children:["$",ke.amount.toFixed(2)]}),s.jsx(ht,{variant:"outline",className:"text-xs",children:"Auto-synced"})]})]},mt)),le.manualLaborCosts.map(ke=>s.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg bg-blue-50",children:[s.jsxs("div",{children:[s.jsxs("p",{className:"font-medium text-sm",children:[ke.employeeName," - ",ke.role]}),s.jsxs("p",{className:"text-xs text-gray-600",children:[ke.hours,"h @ $",ke.hourlyRate,"/hr"]}),ke.notes&&s.jsx("p",{className:"text-xs text-gray-500 italic",children:ke.notes})]}),s.jsxs("div",{className:"text-right flex items-center space-x-2",children:[s.jsxs("div",{children:[s.jsxs("p",{className:"font-bold text-blue-600",children:["$",ke.amount.toFixed(2)]}),s.jsx(ht,{variant:"outline",className:"text-xs",children:"Manual"})]}),s.jsx(se,{variant:"ghost",size:"icon",onClick:()=>ue(ke.id),className:"text-red-500 hover:bg-red-100 h-7 w-7",children:s.jsx(Kt,{className:"h-3 w-3"})})]})]},ke.id)),s.jsx("div",{className:"border-t pt-3",children:s.jsxs("div",{className:"flex justify-between font-bold text-lg",children:[s.jsx("span",{children:"Total Labor:"}),s.jsxs("span",{className:"text-green-600",children:["$",(le.totalLaborCost+le.totalManualLaborCost).toFixed(2)]})]})})]})})]}),s.jsxs(Te,{children:[s.jsx(Xe,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs(Qe,{className:"flex items-center",children:[s.jsx(ya,{className:"h-5 w-5 mr-2 text-brandPrimary"}),"Material Costs"]}),s.jsxs(se,{onClick:()=>d(!0),size:"sm",className:"bg-brandPrimary hover:bg-brandPrimary/90 text-white",children:[s.jsx(un,{className:"h-4 w-4 mr-1"}),"Add Invoice"]})]})}),s.jsx(Me,{children:le.materialInvoices.length===0?s.jsx("p",{className:"text-gray-500 text-center py-4",children:"No material invoices added yet"}):s.jsxs("div",{className:"space-y-3",children:[le.materialInvoices.map(ke=>s.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-sm",children:ke.supplierName}),s.jsxs("p",{className:"text-xs text-gray-600",children:["Invoice: ",ke.invoiceNumber]}),s.jsxs("p",{className:"text-xs text-gray-600",children:[ke.sqftDelivered," sqft delivered"]})]}),s.jsxs("div",{className:"text-right flex items-center space-x-2",children:[s.jsxs("div",{children:[s.jsxs("p",{className:"font-bold",children:["$",(ke.dollarAmount+ke.salesTax).toFixed(2)]}),s.jsxs("p",{className:"text-xs text-gray-500",children:["+$",ke.salesTax.toFixed(2)," tax"]})]}),s.jsx(se,{variant:"ghost",size:"icon",onClick:()=>Ue(ke.id),className:"text-red-500 hover:bg-red-100 h-7 w-7",children:s.jsx(Kt,{className:"h-3 w-3"})})]})]},ke.id)),s.jsx("div",{className:"border-t pt-3",children:s.jsxs("div",{className:"flex justify-between font-bold text-lg",children:[s.jsx("span",{children:"Total Materials:"}),s.jsxs("span",{className:"text-brandPrimary",children:["$",(le.totalMaterialCost+le.totalSalesTax).toFixed(2)]})]})})]})})]})]}),s.jsxs(Te,{children:[s.jsx(Xe,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs(Qe,{className:"flex items-center",children:[s.jsx(tn,{className:"h-5 w-5 mr-2 text-purple-600"}),"Change Orders"]}),s.jsxs(se,{onClick:()=>{l(null),i(!0)},className:"bg-purple-600 hover:bg-purple-700 text-white",children:[s.jsx(un,{className:"h-4 w-4 mr-2"}),"Add Change Order"]})]})}),s.jsx(Me,{children:le.changeOrders.length===0&&le.fieldChangeOrders.length===0?s.jsx("p",{className:"text-gray-500 text-center py-8",children:"No change orders added yet"}):s.jsxs("div",{className:"space-y-4",children:[le.fieldChangeOrders.length>0&&s.jsxs(s.Fragment,{children:[s.jsx("h4",{className:"font-semibold text-blue-800 border-b pb-2",children:"Field Change Orders"}),le.fieldChangeOrders.map(ke=>s.jsxs("div",{className:"border rounded-lg p-4 hover:shadow-md transition-shadow border-blue-200 bg-blue-50",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-lg",children:ke.changeOrderNumber}),s.jsx("p",{className:"text-sm text-gray-600",children:ke.description}),s.jsx(ht,{variant:"outline",className:"text-xs mt-1 border-blue-300 text-blue-700",children:"Field Change Order"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs("div",{className:"text-right",children:[s.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:["$",ke.totalValue.toFixed(2)]}),s.jsxs("p",{className:"text-xs text-gray-500",children:["+",ke.profitPercentage,"% profit"]})]}),s.jsx(se,{variant:"ghost",size:"icon",onClick:()=>ve(ke),className:"text-brandSecondary hover:bg-brandSecondary/10",children:s.jsx(Ai,{className:"h-4 w-4"})}),s.jsxs(yr,{children:[s.jsx(br,{asChild:!0,children:s.jsx(se,{variant:"ghost",size:"icon",className:"text-red-500 hover:bg-red-100",children:s.jsx(Kt,{className:"h-4 w-4"})})}),s.jsxs(er,{children:[s.jsxs(tr,{children:[s.jsx(rr,{children:"Delete Field Change Order"}),s.jsxs(sr,{children:['Are you sure you want to delete field change order "',ke.changeOrderNumber,'"? This action cannot be undone.']})]}),s.jsxs(nr,{children:[s.jsx(ir,{children:"Cancel"}),s.jsx(ar,{onClick:()=>gt(ke.id),className:"bg-red-600 hover:bg-red-700",children:"Delete"})]})]})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("h5",{className:"font-medium text-sm",children:"Line Items:"}),ke.lineItems.map((mt,xt)=>s.jsxs("div",{className:"flex justify-between text-sm bg-white p-2 rounded",children:[s.jsxs("span",{children:[mt.description," (",mt.quantity," ",mt.unitType,")"]}),s.jsxs("span",{className:"font-medium",children:["$",mt.lineTotal.toFixed(2)]})]},xt)),s.jsxs("div",{className:"flex justify-between text-sm font-medium border-t pt-2",children:[s.jsx("span",{children:"Subtotal:"}),s.jsxs("span",{children:["$",ke.subtotal.toFixed(2)]})]}),s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsxs("span",{children:["Profit (",ke.profitPercentage,"%):"]}),s.jsxs("span",{children:["$",ke.profitAmount.toFixed(2)]})]})]})]},ke.id))]}),le.changeOrders.length>0&&s.jsxs(s.Fragment,{children:[s.jsx("h4",{className:"font-semibold text-purple-800 border-b pb-2",children:"Ongoing Change Orders"}),le.changeOrders.map(ke=>s.jsxs("div",{className:"border rounded-lg p-4 hover:shadow-md transition-shadow",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-lg",children:ke.changeOrderNumber}),s.jsx("p",{className:"text-sm text-gray-600",children:ke.description})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs("div",{className:"text-right",children:[s.jsxs("p",{className:"text-2xl font-bold text-purple-600",children:["$",ke.totalValue.toFixed(2)]}),s.jsxs("p",{className:"text-xs text-gray-500",children:["+",ke.profitPercentage,"% profit"]})]}),s.jsx(se,{variant:"ghost",size:"icon",onClick:()=>Ne(ke),className:"text-brandSecondary hover:bg-brandSecondary/10",children:s.jsx(Ai,{className:"h-4 w-4"})}),s.jsxs(yr,{children:[s.jsx(br,{asChild:!0,children:s.jsx(se,{variant:"ghost",size:"icon",className:"text-red-500 hover:bg-red-100",children:s.jsx(Kt,{className:"h-4 w-4"})})}),s.jsxs(er,{children:[s.jsxs(tr,{children:[s.jsx(rr,{children:"Delete Change Order"}),s.jsxs(sr,{children:['Are you sure you want to delete change order "',ke.changeOrderNumber,'"? This action cannot be undone.']})]}),s.jsxs(nr,{children:[s.jsx(ir,{children:"Cancel"}),s.jsx(ar,{onClick:()=>ie(ke.id),className:"bg-red-600 hover:bg-red-700",children:"Delete"})]})]})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("h5",{className:"font-medium text-sm",children:"Line Items:"}),ke.lineItems.map((mt,xt)=>s.jsxs("div",{className:"flex justify-between text-sm bg-gray-50 p-2 rounded",children:[s.jsxs("span",{children:[mt.description," (",mt.quantity," ",mt.unitType,")"]}),s.jsxs("span",{className:"font-medium",children:["$",mt.lineTotal.toFixed(2)]})]},xt)),s.jsxs("div",{className:"flex justify-between text-sm font-medium border-t pt-2",children:[s.jsx("span",{children:"Subtotal:"}),s.jsxs("span",{children:["$",ke.subtotal.toFixed(2)]})]}),s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsxs("span",{children:["Profit (",ke.profitPercentage,"%):"]}),s.jsxs("span",{children:["$",ke.profitAmount.toFixed(2)]})]})]})]},ke.id)),s.jsx("div",{className:"border-t pt-4",children:s.jsxs("div",{className:"flex justify-between text-xl font-bold",children:[s.jsx("span",{children:"Total Ongoing Change Orders:"}),s.jsxs("span",{className:"text-purple-600",children:["$",le.totalChangeOrderValue.toFixed(2)]})]})})]}),(le.fieldChangeOrders.length>0||le.changeOrders.length>0)&&s.jsxs("div",{className:"border-t-2 pt-4 mt-6",children:[s.jsxs("div",{className:"flex justify-between text-2xl font-bold",children:[s.jsx("span",{children:"Total All Change Orders:"}),s.jsxs("span",{className:"text-green-600",children:["$",(le.totalChangeOrderValue+le.totalFieldChangeOrderValue).toFixed(2)]})]}),s.jsx("div",{className:"flex justify-between text-sm text-gray-600 mt-1",children:s.jsxs("span",{children:["Field: $",le.totalFieldChangeOrderValue.toFixed(2)," | Ongoing: $",le.totalChangeOrderValue.toFixed(2)]})})]})]})})]})]}),s.jsxs(en,{value:"overview",className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsx(Te,{className:`border-2 ${me.estimateVsActual>=0?"border-green-200 bg-green-50":"border-red-200 bg-red-50"}`,children:s.jsxs(Me,{className:"p-6 text-center",children:[s.jsx("div",{className:"flex items-center justify-center mb-2",children:me.estimateVsActual>=0?s.jsx(Ei,{className:"h-8 w-8 text-green-600"}):s.jsx(ug,{className:"h-8 w-8 text-red-600"})}),s.jsx("h3",{className:"font-semibold text-lg mb-1",children:"Estimate vs Actual"}),s.jsxs("p",{className:`text-2xl font-bold ${me.estimateVsActual>=0?"text-green-600":"text-red-600"}`,children:["$",Math.abs(me.estimateVsActual).toFixed(2)]}),s.jsx("p",{className:"text-sm text-gray-600",children:me.estimateVsActual>=0?"Under Budget":"Over Budget"}),s.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[me.estimateMargin.toFixed(1),"% margin"]})]})}),s.jsx(Te,{className:`border-2 ${me.fieldRevisedVsActual>=0?"border-green-200 bg-green-50":"border-red-200 bg-red-50"}`,children:s.jsxs(Me,{className:"p-6 text-center",children:[s.jsx("div",{className:"flex items-center justify-center mb-2",children:me.fieldRevisedVsActual>=0?s.jsx(Ei,{className:"h-8 w-8 text-green-600"}):s.jsx(ug,{className:"h-8 w-8 text-red-600"})}),s.jsx("h3",{className:"font-semibold text-lg mb-1",children:"Field Revised vs Actual"}),s.jsxs("p",{className:`text-2xl font-bold ${me.fieldRevisedVsActual>=0?"text-green-600":"text-red-600"}`,children:["$",Math.abs(me.fieldRevisedVsActual).toFixed(2)]}),s.jsx("p",{className:"text-sm text-gray-600",children:me.fieldRevisedVsActual>=0?"Under Budget":"Over Budget"}),s.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[me.fieldRevisedMargin.toFixed(1),"% margin"]})]})}),s.jsx(Te,{className:`border-2 ${me.estimateVsFieldRevised>=0?"border-blue-200 bg-blue-50":"border-orange-200 bg-orange-50"}`,children:s.jsxs(Me,{className:"p-6 text-center",children:[s.jsx("div",{className:"flex items-center justify-center mb-2",children:s.jsx(Au,{className:`h-8 w-8 ${me.estimateVsFieldRevised>=0?"text-blue-600":"text-orange-600"}`})}),s.jsx("h3",{className:"font-semibold text-lg mb-1",children:"Estimate vs Field Revised"}),s.jsxs("p",{className:`text-2xl font-bold ${me.estimateVsFieldRevised>=0?"text-blue-600":"text-orange-600"}`,children:["$",Math.abs(me.estimateVsFieldRevised).toFixed(2)]}),s.jsx("p",{className:"text-sm text-gray-600",children:me.estimateVsFieldRevised>=0?"Estimate Higher":"Field Revised Higher"})]})})]}),s.jsxs(Te,{children:[s.jsx(Xe,{children:s.jsx(Qe,{children:"Financial Summary"})}),s.jsx(Me,{children:s.jsxs(Hr,{children:[s.jsx(qr,{children:s.jsxs(Jt,{children:[s.jsx(qe,{children:"Category"}),s.jsx(qe,{className:"text-right",children:"Estimate"}),s.jsx(qe,{className:"text-right",children:"Field Revised"}),s.jsx(qe,{className:"text-right",children:"Actual"}),s.jsx(qe,{className:"text-right",children:"Variance"})]})}),s.jsxs(Vr,{children:[s.jsxs(Jt,{children:[s.jsx(ze,{className:"font-medium",children:"Material Costs"}),s.jsxs(ze,{className:"text-right",children:["$",z.materialCost.toFixed(2)]}),s.jsxs(ze,{className:"text-right",children:["$",ae.materialCost.toFixed(2)]}),s.jsxs(ze,{className:"text-right",children:["$",(le.totalMaterialCost+le.totalSalesTax).toFixed(2)]}),s.jsxs(ze,{className:`text-right font-medium ${ae.materialCost-(le.totalMaterialCost+le.totalSalesTax)>=0?"text-green-600":"text-red-600"}`,children:["$",(ae.materialCost-(le.totalMaterialCost+le.totalSalesTax)).toFixed(2)]})]}),s.jsxs(Jt,{children:[s.jsx(ze,{className:"font-medium",children:"Labor Costs"}),s.jsxs(ze,{className:"text-right",children:["$",(z.hangerCost+z.finisherCost+z.prepCleanCost).toFixed(2)]}),s.jsxs(ze,{className:"text-right",children:["$",(ae.hangerCost+ae.finisherCost+ae.prepCleanCost).toFixed(2)]}),s.jsxs(ze,{className:"text-right",children:["$",(le.totalLaborCost+le.totalManualLaborCost).toFixed(2)]}),s.jsxs(ze,{className:`text-right font-medium ${ae.hangerCost+ae.finisherCost+ae.prepCleanCost-(le.totalLaborCost+le.totalManualLaborCost)>=0?"text-green-600":"text-red-600"}`,children:["$",(ae.hangerCost+ae.finisherCost+ae.prepCleanCost-(le.totalLaborCost+le.totalManualLaborCost)).toFixed(2)]})]}),s.jsxs(Jt,{children:[s.jsx(ze,{className:"font-medium",children:"Change Orders"}),s.jsx(ze,{className:"text-right",children:"$0.00"}),s.jsxs(ze,{className:"text-right",children:["$",ae.fieldChangeOrderTotal.toFixed(2)]}),s.jsxs(ze,{className:"text-right",children:["$",(le.totalChangeOrderValue+le.totalFieldChangeOrderValue).toFixed(2)]}),s.jsxs(ze,{className:"text-right font-medium text-purple-600",children:["+$",(le.totalChangeOrderValue+le.totalFieldChangeOrderValue).toFixed(2)]})]}),s.jsxs(Jt,{className:"border-t-2",children:[s.jsx(ze,{className:"font-bold",children:"TOTALS"}),s.jsxs(ze,{className:"text-right font-bold",children:["$",z.totalEstimate.toFixed(2)]}),s.jsxs(ze,{className:"text-right font-bold",children:["$",ae.totalFieldRevised.toFixed(2)]}),s.jsxs(ze,{className:"text-right font-bold",children:["$",le.totalActual.toFixed(2)]}),s.jsxs(ze,{className:`text-right font-bold ${me.fieldRevisedVsActual>=0?"text-green-600":"text-red-600"}`,children:["$",me.fieldRevisedVsActual.toFixed(2)]})]})]})]})})]}),e.jobType==="residential"&&parseFloat(O)>0&&s.jsxs(Te,{className:"border-2 border-green-200 bg-green-50",children:[s.jsx(Xe,{children:s.jsxs(Qe,{className:"flex items-center text-green-800",children:[s.jsx(Ei,{className:"h-5 w-5 mr-2"}),"Profit Analysis"]})}),s.jsx(Me,{children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("h4",{className:"font-semibold text-green-800 mb-2",children:"Total Cost"}),s.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["$",z.totalCost.toFixed(2)]}),s.jsx("p",{className:"text-sm text-gray-600",children:"Your estimated costs"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("h4",{className:"font-semibold text-green-800 mb-2",children:"Total Estimate"}),s.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["$",z.totalEstimate.toFixed(2)]}),s.jsx("p",{className:"text-sm text-gray-600",children:"Amount charged to customer"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("h4",{className:"font-semibold text-green-800 mb-2",children:"Estimated Profit"}),s.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["$",z.profitAmount.toFixed(2)]}),s.jsxs("p",{className:"text-sm text-gray-600",children:[z.profitPercentage.toFixed(1),"% profit margin"]})]})]})})]})]})]}),s.jsx(oE,{isOpen:a,onClose:()=>{i(!1),l(null)},onSave:Le,job:e,existingChangeOrders:le.changeOrders,initialChangeOrderData:o}),s.jsx(jee,{isOpen:c,onClose:()=>{d(!1),h(null)},onSave:Be,job:e,initialInvoice:u}),f&&s.jsx(Nee,{employees:[],onSubmit:_e,onCancel:()=>p(!1)}),s.jsx(oE,{isOpen:y,onClose:()=>{g(!1),m(null)},onSave:wt,job:e,existingChangeOrders:ae.fieldChangeOrders,initialChangeOrderData:x,isFieldChangeOrder:!0})]}):s.jsxs("div",{className:"text-center py-16",children:[s.jsx(Qs,{className:"h-16 w-16 mx-auto text-gray-400 mb-4"}),s.jsx("p",{className:"text-gray-600 font-medium",children:"No job selected or job data is unavailable."})]})},Cee=({scope:e,jobId:t,onUpdateScope:n,onDeleteScope:r})=>{const[a,i]=j.useState(!1),[o,l]=j.useState({name:(e==null?void 0:e.name)||"",description:(e==null?void 0:e.description)||"",status:(e==null?void 0:e.status)||"Not Started",ceilingThickness:(e==null?void 0:e.ceilingThickness)||"",wallThickness:(e==null?void 0:e.wallThickness)||"",hangExceptions:(e==null?void 0:e.hangExceptions)||"",ceilingFinish:(e==null?void 0:e.ceilingFinish)||"",ceilingFinishOther:(e==null?void 0:e.ceilingFinishOther)||"",ceilingExceptions:(e==null?void 0:e.ceilingExceptions)||"",wallFinish:(e==null?void 0:e.wallFinish)||"",wallFinishOther:(e==null?void 0:e.wallFinishOther)||"",wallExceptions:(e==null?void 0:e.wallExceptions)||""});if(!e)return s.jsxs("div",{className:"text-center py-16",children:[s.jsx(dy,{className:"h-16 w-16 mx-auto text-gray-400 mb-4"}),s.jsx("p",{className:"text-gray-600 font-medium",children:"No scope selected or scope data is unavailable."})]});const c=()=>{if(!o.name.trim()){pe({title:"Missing Information",description:"Please enter a scope name.",variant:"destructive"});return}n(e.id,o),i(!1),pe({title:"Scope Updated! ✅",description:"Scope of work has been updated successfully."})},d=()=>{l({name:(e==null?void 0:e.name)||"",description:(e==null?void 0:e.description)||"",status:(e==null?void 0:e.status)||"Not Started",ceilingThickness:(e==null?void 0:e.ceilingThickness)||"",wallThickness:(e==null?void 0:e.wallThickness)||"",hangExceptions:(e==null?void 0:e.hangExceptions)||"",ceilingFinish:(e==null?void 0:e.ceilingFinish)||"",ceilingFinishOther:(e==null?void 0:e.ceilingFinishOther)||"",ceilingExceptions:(e==null?void 0:e.ceilingExceptions)||"",wallFinish:(e==null?void 0:e.wallFinish)||"",wallFinishOther:(e==null?void 0:e.wallFinishOther)||"",wallExceptions:(e==null?void 0:e.wallExceptions)||""}),i(!1)},u=x=>{switch(x){case"Complete":return"bg-green-100 text-green-800 border-green-200";case"In Progress":return"bg-yellow-100 text-yellow-800 border-yellow-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},h=()=>o.name.toLowerCase().includes("hang"),f=()=>o.name.toLowerCase().includes("finish"),p=["Stomp Knockdown","Knockdown","Splatter","Splatter Knockdown","Level 4 Smooth","Level 5 Smooth","Other"],y=["Level 4 Smooth","Level 5 Smooth","Roll Texture Walls","Other"],g=['1/4"','3/8"','1/2"','5/8"','3/4"'];return s.jsx(Pt.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"max-w-4xl mx-auto",children:s.jsxs(Te,{className:"shadow-2xl border-0 bg-white/90 backdrop-blur-sm",children:[s.jsx(Xe,{className:"bg-gradient-to-r from-brandPrimary to-brandSecondary text-white rounded-t-lg",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(dy,{className:"h-6 w-6"}),s.jsx(Qe,{className:"text-2xl font-bold",children:"Scope Details"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[!a&&s.jsxs(se,{onClick:()=>i(!0),variant:"ghost",size:"sm",className:"text-white hover:bg-white/20",children:[s.jsx(Ai,{className:"h-4 w-4 mr-2"}),"Edit"]}),s.jsxs(yr,{children:[s.jsx(br,{asChild:!0,children:s.jsxs(se,{variant:"ghost",size:"sm",className:"text-white hover:bg-white/20",children:[s.jsx(Kt,{className:"h-4 w-4 mr-1"})," Delete"]})}),s.jsxs(er,{children:[s.jsxs(tr,{children:[s.jsxs(rr,{children:['Delete Scope "',e==null?void 0:e.name,'"?']}),s.jsx(sr,{children:"This action cannot be undone. Are you sure you want to delete this scope?"})]}),s.jsxs(nr,{children:[s.jsx(ir,{children:"Cancel"}),s.jsx(ar,{onClick:()=>r(t,e.id),className:"bg-red-600 hover:bg-red-700",children:"Yes, delete scope"})]})]})]})]})]})}),s.jsx(Me,{className:"p-8",children:a?s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{className:"space-y-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-700 border-b pb-2",children:"Basic Information"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"scopeName",className:"text-sm font-semibold text-gray-700",children:"Scope Name *"}),s.jsx($e,{id:"scopeName",value:o.name,onChange:x=>l(m=>({...m,name:x.target.value})),placeholder:"Enter scope name",className:"border-2 focus:border-brandPrimary transition-colors"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{className:"text-sm font-semibold text-gray-700",children:"Status"}),s.jsxs(st,{value:o.status,onValueChange:x=>l(m=>({...m,status:x})),children:[s.jsx(nt,{className:"border-2 focus:border-brandPrimary",children:s.jsx(at,{})}),s.jsxs(rt,{children:[s.jsx(xe,{value:"Not Started",children:"Not Started"}),s.jsx(xe,{value:"In Progress",children:"In Progress"}),s.jsx(xe,{value:"Complete",children:"Complete"})]})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"description",className:"text-sm font-semibold text-gray-700",children:"General Description"}),s.jsx(_n,{id:"description",value:o.description,onChange:x=>l(m=>({...m,description:x.target.value})),placeholder:"Enter general scope description",className:"border-2 focus:border-brandPrimary transition-colors min-h-[80px]"})]})]}),h()&&s.jsxs("div",{className:"space-y-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-700 border-b pb-2 text-brandSecondary",children:"Hang Specifications"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{className:"text-sm font-semibold text-gray-700",children:"Ceiling Thickness"}),s.jsxs(st,{value:o.ceilingThickness,onValueChange:x=>l(m=>({...m,ceilingThickness:x})),children:[s.jsx(nt,{className:"border-2 focus:border-brandSecondary",children:s.jsx(at,{placeholder:"Select ceiling thickness"})}),s.jsx(rt,{children:g.map(x=>s.jsx(xe,{value:x,children:x},x))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{className:"text-sm font-semibold text-gray-700",children:"Wall Thickness"}),s.jsxs(st,{value:o.wallThickness,onValueChange:x=>l(m=>({...m,wallThickness:x})),children:[s.jsx(nt,{className:"border-2 focus:border-brandSecondary",children:s.jsx(at,{placeholder:"Select wall thickness"})}),s.jsx(rt,{children:g.map(x=>s.jsx(xe,{value:x,children:x},x))})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"hangExceptions",className:"text-sm font-semibold text-gray-700",children:"Exceptions & Special Requirements"}),s.jsx(_n,{id:"hangExceptions",value:o.hangExceptions,onChange:x=>l(m=>({...m,hangExceptions:x.target.value})),placeholder:'e.g., 5/8" at garage firewall, moisture resistant drywall at wet walls, etc.',className:"border-2 focus:border-brandSecondary transition-colors min-h-[100px]"})]})]}),f()&&s.jsxs("div",{className:"space-y-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-700 border-b pb-2 text-brandPrimary",children:"Finish Specifications"}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h4",{className:"font-medium text-gray-700",children:"Ceiling Finish"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{className:"text-sm font-semibold text-gray-700",children:"Primary Ceiling Finish"}),s.jsxs(st,{value:o.ceilingFinish,onValueChange:x=>l(m=>({...m,ceilingFinish:x})),children:[s.jsx(nt,{className:"border-2 focus:border-brandPrimary",children:s.jsx(at,{placeholder:"Select ceiling finish"})}),s.jsx(rt,{children:p.map(x=>s.jsx(xe,{value:x,children:x},x))})]})]}),o.ceilingFinish==="Other"&&s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{className:"text-sm font-semibold text-gray-700",children:"Specify Other Ceiling Finish"}),s.jsx($e,{value:o.ceilingFinishOther,onChange:x=>l(m=>({...m,ceilingFinishOther:x.target.value})),placeholder:"Enter custom ceiling finish",className:"border-2 focus:border-brandPrimary"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"ceilingExceptions",className:"text-sm font-semibold text-gray-700",children:"Ceiling Finish Exceptions"}),s.jsx(_n,{id:"ceilingExceptions",value:o.ceilingExceptions,onChange:x=>l(m=>({...m,ceilingExceptions:x.target.value})),placeholder:"e.g., Master Bedroom and Great Room are Level 5 Smooth instead of Stomp Knockdown",className:"border-2 focus:border-brandPrimary transition-colors min-h-[80px]"})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h4",{className:"font-medium text-gray-700",children:"Wall Finish"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{className:"text-sm font-semibold text-gray-700",children:"Primary Wall Finish"}),s.jsxs(st,{value:o.wallFinish,onValueChange:x=>l(m=>({...m,wallFinish:x})),children:[s.jsx(nt,{className:"border-2 focus:border-brandPrimary",children:s.jsx(at,{placeholder:"Select wall finish"})}),s.jsx(rt,{children:y.map(x=>s.jsx(xe,{value:x,children:x},x))})]})]}),o.wallFinish==="Other"&&s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{className:"text-sm font-semibold text-gray-700",children:"Specify Other Wall Finish"}),s.jsx($e,{value:o.wallFinishOther,onChange:x=>l(m=>({...m,wallFinishOther:x.target.value})),placeholder:"Enter custom wall finish",className:"border-2 focus:border-brandPrimary"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"wallExceptions",className:"text-sm font-semibold text-gray-700",children:"Wall Finish Exceptions"}),s.jsx(_n,{id:"wallExceptions",value:o.wallExceptions,onChange:x=>l(m=>({...m,wallExceptions:x.target.value})),placeholder:"e.g., Garage walls and small closet walls are Roll Texture instead of Level 4 Smooth",className:"border-2 focus:border-brandPrimary transition-colors min-h-[80px]"})]})]})]}),s.jsxs("div",{className:"flex space-x-4 pt-6",children:[s.jsxs(se,{onClick:c,className:"flex-1 bg-gradient-to-r from-brandPrimary to-brandSecondary hover:from-brandPrimary-600 hover:to-brandSecondary-600 text-white font-semibold py-3",children:[s.jsx(Qn,{className:"h-4 w-4 mr-2"}),"Save Changes"]}),s.jsxs(se,{onClick:d,variant:"outline",className:"flex-1 border-2 hover:bg-gray-50 font-semibold py-3",children:[s.jsx(rn,{className:"h-4 w-4 mr-2"}),"Cancel"]})]})]}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-2",children:e==null?void 0:e.name}),s.jsx("span",{className:`inline-block px-4 py-2 rounded-full text-sm font-semibold border ${u(e==null?void 0:e.status)}`,children:e==null?void 0:e.status})]}),s.jsxs("div",{className:"space-y-4",children:[(e==null?void 0:e.description)&&s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-700 mb-2",children:"General Description"}),s.jsx("div",{className:"bg-gray-50 rounded-lg p-4 border-l-4 border-l-brandPrimary",children:s.jsx("p",{className:"text-gray-800",children:e.description})})]}),h()&&((e==null?void 0:e.ceilingThickness)||(e==null?void 0:e.wallThickness)||(e==null?void 0:e.hangExceptions))&&s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-brandSecondary mb-3",children:"Hang Specifications"}),s.jsxs("div",{className:"bg-brandSecondary/10 rounded-lg p-4 border-l-4 border-l-brandSecondary space-y-3",children:[((e==null?void 0:e.ceilingThickness)||(e==null?void 0:e.wallThickness))&&s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(e==null?void 0:e.ceilingThickness)&&s.jsxs("div",{children:[s.jsx("p",{className:"font-semibold text-brandSecondary",children:"Ceiling Thickness:"}),s.jsx("p",{className:"text-gray-700",children:e.ceilingThickness})]}),(e==null?void 0:e.wallThickness)&&s.jsxs("div",{children:[s.jsx("p",{className:"font-semibold text-brandSecondary",children:"Wall Thickness:"}),s.jsx("p",{className:"text-gray-700",children:e.wallThickness})]})]}),(e==null?void 0:e.hangExceptions)&&s.jsxs("div",{children:[s.jsx("p",{className:"font-semibold text-brandSecondary",children:"Exceptions & Special Requirements:"}),s.jsx("p",{className:"text-gray-700",children:e.hangExceptions})]})]})]}),f()&&((e==null?void 0:e.ceilingFinish)||(e==null?void 0:e.wallFinish)||(e==null?void 0:e.ceilingExceptions)||(e==null?void 0:e.wallExceptions))&&s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-brandPrimary mb-3",children:"Finish Specifications"}),s.jsxs("div",{className:"bg-brandPrimary/10 rounded-lg p-4 border-l-4 border-l-brandPrimary space-y-4",children:[((e==null?void 0:e.ceilingFinish)||(e==null?void 0:e.ceilingExceptions))&&s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-brandPrimary mb-2",children:"Ceiling Finish"}),(e==null?void 0:e.ceilingFinish)&&s.jsxs("p",{className:"text-gray-700 mb-2",children:[s.jsx("span",{className:"font-medium",children:"Primary:"})," ",e.ceilingFinish==="Other"?e.ceilingFinishOther:e.ceilingFinish]}),(e==null?void 0:e.ceilingExceptions)&&s.jsxs("p",{className:"text-gray-700",children:[s.jsx("span",{className:"font-medium",children:"Exceptions:"})," ",e.ceilingExceptions]})]}),((e==null?void 0:e.wallFinish)||(e==null?void 0:e.wallExceptions))&&s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-brandPrimary mb-2",children:"Wall Finish"}),(e==null?void 0:e.wallFinish)&&s.jsxs("p",{className:"text-gray-700 mb-2",children:[s.jsx("span",{className:"font-medium",children:"Primary:"})," ",e.wallFinish==="Other"?e.wallFinishOther:e.wallFinish]}),(e==null?void 0:e.wallExceptions)&&s.jsxs("p",{className:"text-gray-700",children:[s.jsx("span",{className:"font-medium",children:"Exceptions:"})," ",e.wallExceptions]})]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-4",children:[s.jsxs("div",{className:"bg-brandSecondary/10 rounded-lg p-4 text-center",children:[s.jsx("p",{className:"text-brandSecondary font-semibold text-sm",children:"Created"}),s.jsx("p",{className:"text-gray-800 font-bold",children:e!=null&&e.createdAt?new Date(e.createdAt).toLocaleDateString():"Unknown"})]}),s.jsxs("div",{className:"bg-brandPrimary/10 rounded-lg p-4 text-center",children:[s.jsx("p",{className:"text-brandPrimary font-semibold text-sm",children:"Status"}),s.jsx("p",{className:"text-gray-800 font-bold",children:e==null?void 0:e.status})]})]})]})]})})]})})},xa="hsh_drywall_client_portal",pN="hsh_drywall_client_messages",mN="hsh_drywall_client_photos",Na=(e,t)=>{try{localStorage.setItem(e,JSON.stringify(t))}catch(n){console.error("Failed to save to localStorage:",n)}},If=(e,t=null)=>{try{const n=localStorage.getItem(e);return n?JSON.parse(n):t}catch(n){return console.error("Failed to load from localStorage:",n),t}},Iu=()=>Date.now().toString(36)+Math.random().toString(36).substr(2),lE=()=>({clients:[],generalContractors:[],superintendents:[],projectManagers:[],portalSettings:{allowPhotoSharing:!0,allowMessaging:!0,allowScopeReview:!0,allowFinancialView:!0}}),_s=()=>(If(xa,null)||Na(xa,lE()),If(xa,lE())),JI=e=>{const t=_s(),n={id:Iu(),...e,portalAccess:{username:e.email,password:Iu().substring(0,8),isActive:!0,lastLogin:null},createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return t.clients.push(n),Na(xa,t),n},KI=()=>_s().clients,Pee=e=>{const t=_s();t.clients=t.clients.filter(n=>n.id!==e),Na(xa,t)},Dee=e=>{const t=_s(),n={id:Iu(),name:e.name,company:e.company||"",email:e.email||"",phone:e.phone||"",address:e.address||"",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return t.generalContractors.push(n),Na(xa,t),n},XI=()=>_s().generalContractors,kee=(e,t)=>{const n=_s(),r=n.generalContractors.findIndex(a=>a.id===e);return r!==-1?(n.generalContractors[r]={...n.generalContractors[r],...t,updatedAt:new Date().toISOString()},Na(xa,n),n.generalContractors[r]):null},Eee=e=>{const t=_s();t.generalContractors=t.generalContractors.filter(n=>n.id!==e),t.superintendents=t.superintendents.filter(n=>n.gcId!==e),t.projectManagers=t.projectManagers.filter(n=>n.gcId!==e),Na(xa,t)},Tee=e=>{const t=_s(),n={id:Iu(),name:e.name,gcId:e.gcId,email:e.email||"",phone:e.phone||"",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return t.superintendents.push(n),Na(xa,t),n},QI=(e=null)=>{const t=_s();return e?t.superintendents.filter(n=>n.gcId===e):t.superintendents},Aee=(e,t)=>{const n=_s(),r=n.superintendents.findIndex(a=>a.id===e);return r!==-1?(n.superintendents[r]={...n.superintendents[r],...t,updatedAt:new Date().toISOString()},Na(xa,n),n.superintendents[r]):null},_ee=e=>{const t=_s();t.superintendents=t.superintendents.filter(n=>n.id!==e),Na(xa,t)},Mee=e=>{const t=_s(),n={id:Iu(),name:e.name,gcId:e.gcId,email:e.email||"",phone:e.phone||"",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return t.projectManagers.push(n),Na(xa,t),n},ZI=(e=null)=>{const t=_s();return e?t.projectManagers.filter(n=>n.gcId===e):t.projectManagers},Ree=(e,t)=>{const n=_s(),r=n.projectManagers.findIndex(a=>a.id===e);return r!==-1?(n.projectManagers[r]={...n.projectManagers[r],...t,updatedAt:new Date().toISOString()},Na(xa,n),n.projectManagers[r]):null},Lee=e=>{const t=_s();t.projectManagers=t.projectManagers.filter(n=>n.id!==e),Na(xa,t)},Iee=e=>{const t=If(pN,[]),n={id:Iu(),...e,timestamp:new Date().toISOString(),isRead:!1};return t.push(n),Na(pN,t),n},cE=(e,t=null)=>If(pN,[]).filter(r=>r.clientId===e&&(!t||r.jobId===t)).sort((r,a)=>new Date(a.timestamp)-new Date(r.timestamp)),Oee=e=>{const t=If(mN,[]),n={id:Iu(),...e,uploadedAt:new Date().toISOString()};return t.push(n),Na(mN,t),n},Fee=e=>If(mN,[]).filter(n=>n.jobId===e).sort((n,r)=>new Date(r.uploadedAt)-new Date(n.uploadedAt)),$ee=()=>_s().portalSettings,Mx=e=>{const t=_s();return t.portalSettings={...t.portalSettings,...e},Na(xa,t),t.portalSettings},Bee=({onSubmit:e,onCancel:t})=>{const[n,r]=j.useState({jobName:"",jobType:"",generalContractorId:"",superintendentId:"",projectManagerId:"",address:"",lockboxCode:"",latitude:"",longitude:"",geofenceRadius:Gs.getGeofenceRadius()}),[a,i]=j.useState(null),[o,l]=j.useState(!1),[c,d]=j.useState([]),[u,h]=j.useState([]),[f,p]=j.useState([]),[y,g]=j.useState([]),[x,m]=j.useState(!1),[v,b]=j.useState({name:"",email:"",phone:"",company:""});j.useEffect(()=>{const T=KI(),E=XI(),A=QI(),O=ZI();d(T),h(E),p(A),g(O)},[]);const C=T=>{if(T.preventDefault(),!n.jobName.trim()){pe({title:"Missing Information",description:"Please enter a job name.",variant:"destructive"});return}if(!n.jobType){pe({title:"Missing Information",description:"Please select a job type (Residential or Commercial).",variant:"destructive"});return}if(!n.generalContractorId){pe({title:"Missing Information",description:"Please select a General Contractor.",variant:"destructive"});return}const E=u.find(z=>z.id===n.generalContractorId),A=n.superintendentId?f.find(z=>z.id===n.superintendentId):null,O=n.projectManagerId?y.find(z=>z.id===n.projectManagerId):null,W={...n,generalContractor:E?E.name:"",superintendent:A?A.name:"",projectManager:O?O.name:""};e(W)},S=(T,E)=>{r(A=>({...A,[T]:E}))},P=async()=>{l(!0);try{const T=await Gs.getCurrentLocation();i(T),r(E=>({...E,latitude:T.latitude.toString(),longitude:T.longitude.toString()})),pe({title:"Location Retrieved! 📍",description:"Job location set to current position"})}catch(T){pe({title:"Location Error",description:T.message,variant:"destructive"})}finally{l(!1)}},D=T=>{if(T.preventDefault(),!v.name.trim()||!v.email.trim()){pe({title:"Missing Information",description:"Please enter client name and email.",variant:"destructive"});return}try{const E=JI(v);d(A=>[...A,E]),m(!1),b({name:"",email:"",phone:"",company:""}),pe({title:"Client Created! 👥",description:`New client "${E.name}" has been added.`})}catch(E){pe({title:"Error Creating Client",description:E.message,variant:"destructive"})}},N=T=>{const E=c.find(A=>A.id===T);E&&pe({title:"Client Selected! ✅",description:`Client "${E.name}" has been selected for this job.`})},M=()=>n.generalContractorId?f.filter(T=>T.gcId===n.generalContractorId):[],L=()=>n.generalContractorId?y.filter(T=>T.gcId===n.generalContractorId):[];return s.jsx(Pt.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"max-w-2xl mx-auto",children:s.jsxs(Te,{className:"shadow-2xl border-0 bg-white/90 backdrop-blur-sm",children:[s.jsx(Xe,{className:"bg-gradient-to-r from-brandPrimary to-brandSecondary text-white rounded-t-lg",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Qs,{className:"h-6 w-6"}),s.jsx(Qe,{className:"text-2xl font-bold",children:"Create New Job"})]})}),s.jsx(Me,{className:"p-8",children:s.jsxs("form",{onSubmit:C,className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"jobName",className:"text-sm font-semibold text-gray-700",children:"Job Name *"}),s.jsx($e,{id:"jobName",value:n.jobName,onChange:T=>S("jobName",T.target.value),placeholder:"Enter job name",className:"border-2 focus:border-brandPrimary transition-colors"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{className:"text-sm font-semibold text-gray-700",children:"Job Type *"}),s.jsxs(st,{value:n.jobType,onValueChange:T=>S("jobType",T),children:[s.jsx(nt,{className:"border-2 focus:border-brandPrimary",children:s.jsx(at,{placeholder:"Select job type"})}),s.jsxs(rt,{children:[s.jsx(xe,{value:"residential",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx($l,{className:"h-4 w-4"}),s.jsx("span",{children:"Residential"})]})}),s.jsx(xe,{value:"commercial",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(or,{className:"h-4 w-4"}),s.jsx("span",{children:"Commercial"})]})})]})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(de,{className:"text-sm font-semibold text-gray-700",children:"Client Information"}),s.jsxs(se,{type:"button",variant:"outline",size:"sm",onClick:()=>m(!x),children:[s.jsx(un,{className:"h-4 w-4 mr-2"}),x?"Cancel":"Add New Client"]})]}),c.length>0&&s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{className:"text-sm font-medium text-gray-600",children:"Select Existing Client (Optional)"}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:c.slice(0,4).map(T=>s.jsx(se,{type:"button",variant:"outline",size:"sm",onClick:()=>N(T.id),className:"justify-start text-left h-auto p-3",children:s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-sm",children:T.name}),s.jsx("div",{className:"text-xs text-gray-500",children:T.company||T.email})]})},T.id))}),c.length>4&&s.jsxs("div",{className:"text-xs text-gray-500",children:["+",c.length-4," more clients available"]})]}),x&&s.jsx("div",{className:"p-4 bg-gray-50 rounded-lg border border-gray-200",children:s.jsxs("form",{onSubmit:D,className:"space-y-3",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx(de,{className:"text-xs font-medium text-gray-600",children:"Client Name *"}),s.jsx($e,{value:v.name,onChange:T=>b(E=>({...E,name:T.target.value})),placeholder:"Enter client name",className:"text-sm"})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx(de,{className:"text-xs font-medium text-gray-600",children:"Email *"}),s.jsx($e,{type:"email",value:v.email,onChange:T=>b(E=>({...E,email:T.target.value})),placeholder:"Enter email",className:"text-sm"})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx(de,{className:"text-xs font-medium text-gray-600",children:"Phone"}),s.jsx($e,{value:v.phone,onChange:T=>b(E=>({...E,phone:T.target.value})),placeholder:"Enter phone",className:"text-sm"})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx(de,{className:"text-xs font-medium text-gray-600",children:"Company"}),s.jsx($e,{value:v.company,onChange:T=>b(E=>({...E,company:T.target.value})),placeholder:"Enter company",className:"text-sm"})]})]}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsxs(se,{type:"submit",size:"sm",className:"bg-brandPrimary text-white",children:[s.jsx(un,{className:"h-3 w-3 mr-1"}),"Create Client"]}),s.jsx(se,{type:"button",variant:"outline",size:"sm",onClick:()=>m(!1),children:"Cancel"})]})]})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx(de,{className:"text-sm font-semibold text-gray-700",children:"Project Team"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{className:"text-sm font-semibold text-gray-700",children:"General Contractor *"}),s.jsxs(st,{value:n.generalContractorId,onValueChange:T=>{S("generalContractorId",T),S("superintendentId",""),S("projectManagerId","")},children:[s.jsx(nt,{className:"border-2 focus:border-brandPrimary",children:s.jsx(at,{placeholder:"Select General Contractor"})}),s.jsx(rt,{children:u.map(T=>s.jsx(xe,{value:T.id,children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(or,{className:"h-4 w-4"}),s.jsx("span",{children:T.name}),T.company&&s.jsxs("span",{className:"text-xs text-gray-500",children:["(",T.company,")"]})]})},T.id))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{className:"text-sm font-semibold text-gray-700",children:"Superintendent"}),s.jsxs(st,{value:n.superintendentId,onValueChange:T=>S("superintendentId",T),disabled:!n.generalContractorId,children:[s.jsx(nt,{className:"border-2 focus:border-brandPrimary",children:s.jsx(at,{placeholder:n.generalContractorId?"Select Superintendent":"Select GC first"})}),s.jsx(rt,{children:M().map(T=>s.jsx(xe,{value:T.id,children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(vr,{className:"h-4 w-4"}),s.jsx("span",{children:T.name})]})},T.id))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{className:"text-sm font-semibold text-gray-700",children:"Project Manager"}),s.jsxs(st,{value:n.projectManagerId,onValueChange:T=>S("projectManagerId",T),disabled:!n.generalContractorId,children:[s.jsx(nt,{className:"border-2 focus:border-brandPrimary",children:s.jsx(at,{placeholder:n.generalContractorId?"Select Project Manager":"Select GC first"})}),s.jsx(rt,{children:L().map(T=>s.jsx(xe,{value:T.id,children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(vr,{className:"h-4 w-4"}),s.jsx("span",{children:T.name})]})},T.id))})]})]})]}),!n.generalContractorId&&s.jsxs("div",{className:"p-3 bg-blue-50 rounded-lg border border-blue-200",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[s.jsx(or,{className:"h-4 w-4 text-blue-600"}),s.jsx("span",{className:"text-sm font-medium text-blue-800",children:"Project Team Setup"})]}),s.jsx("p",{className:"text-xs text-blue-600",children:"Select a General Contractor first to enable Superintendent and Project Manager selection. You can manage these contacts in the Client Portal."})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"lockboxCode",className:"text-sm font-semibold text-gray-700",children:"Lockbox Code"}),s.jsx($e,{id:"lockboxCode",value:n.lockboxCode,onChange:T=>S("lockboxCode",T.target.value),placeholder:"Enter lockbox code",className:"border-2 focus:border-brandPrimary transition-colors"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"address",className:"text-sm font-semibold text-gray-700",children:"Address"}),s.jsx($e,{id:"address",value:n.address,onChange:T=>S("address",T.target.value),placeholder:"Enter job site address",className:"border-2 focus:border-brandPrimary transition-colors"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(de,{className:"text-sm font-semibold text-gray-700",children:"Job Site Location"}),s.jsxs(se,{onClick:P,disabled:o,variant:"outline",size:"sm",children:[s.jsx(HV,{className:"h-4 w-4 mr-2"}),o?"Getting Location...":"Get Current Location"]})]}),a&&s.jsxs("div",{className:"p-3 bg-green-50 rounded-lg border border-green-200",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Br,{className:"h-4 w-4 text-green-600"}),s.jsx("span",{className:"text-sm font-medium text-green-800",children:"Location Retrieved"})]}),s.jsxs("div",{className:"text-xs text-green-600 mt-1",children:["Lat: ",a.latitude.toFixed(6),", Lon: ",a.longitude.toFixed(6)]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"latitude",className:"text-sm font-semibold text-gray-700",children:"Latitude"}),s.jsx($e,{id:"latitude",type:"number",step:"any",value:n.latitude,onChange:T=>S("latitude",T.target.value),placeholder:"e.g., 40.7128",className:"border-2 focus:border-brandPrimary transition-colors"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"longitude",className:"text-sm font-semibold text-gray-700",children:"Longitude"}),s.jsx($e,{id:"longitude",type:"number",step:"any",value:n.longitude,onChange:T=>S("longitude",T.target.value),placeholder:"e.g., -74.0060",className:"border-2 focus:border-brandPrimary transition-colors"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"geofenceRadius",className:"text-sm font-semibold text-gray-700",children:"Clock-in Radius (feet)"}),s.jsx($e,{id:"geofenceRadius",type:"number",value:n.geofenceRadius,onChange:T=>S("geofenceRadius",parseInt(T.target.value)||500),placeholder:"500",className:"border-2 focus:border-brandPrimary transition-colors"})]})]}),s.jsxs("div",{className:"p-3 bg-blue-50 rounded-lg border border-blue-200",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[s.jsx(Kf,{className:"h-4 w-4 text-blue-600"}),s.jsx("span",{className:"text-sm font-medium text-blue-800",children:"Location Tracking"})]}),s.jsxs("p",{className:"text-xs text-blue-600",children:["Employees must be within ",n.geofenceRadius," feet of this location to clock in/out. This helps ensure accurate time tracking and job site verification."]})]})]}),n.jobType&&s.jsxs("div",{className:`p-4 rounded-lg border-2 ${n.jobType==="residential"?"bg-green-50 border-green-200":"bg-blue-50 border-blue-200"}`,children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[n.jobType==="residential"?s.jsx($l,{className:"h-5 w-5 text-green-600"}):s.jsx(or,{className:"h-5 w-5 text-blue-600"}),s.jsx("h4",{className:`font-semibold ${n.jobType==="residential"?"text-green-800":"text-blue-800"}`,children:n.jobType==="residential"?"Residential Job":"Commercial Job"})]}),s.jsx("p",{className:`text-sm ${n.jobType==="residential"?"text-green-700":"text-blue-700"}`,children:n.jobType==="residential"?'Takeoffs will be organized by Floor/Space/Room names (e.g., "2nd Floor", "Master Bedroom", "Garage").':'Takeoffs will be organized by Unit Types with multiple unit numbers (e.g., "Unit Type 1A" with units 501, 502, 503).'})]}),s.jsxs("div",{className:"flex space-x-4 pt-6",children:[s.jsxs(se,{type:"submit",className:"flex-1 bg-gradient-to-r from-brandPrimary to-brandSecondary hover:from-brandPrimary-600 hover:to-brandSecondary-600 text-white font-semibold py-3",children:[s.jsx(Qn,{className:"h-4 w-4 mr-2"}),"Create Job"]}),s.jsxs(se,{type:"button",variant:"outline",onClick:t,className:"flex-1 border-2 hover:bg-gray-50 font-semibold py-3",children:[s.jsx(rn,{className:"h-4 w-4 mr-2"}),"Cancel"]})]})]})})]})})},zee=({jobId:e,onSubmit:t,onCancel:n})=>{const[r,a]=j.useState({name:"",description:"",status:"Not Started"}),i=l=>{if(l.preventDefault(),!r.name.trim()){pe({title:"Missing Information",description:"Please enter a scope name.",variant:"destructive"});return}t(e,r)},o=(l,c)=>{a(d=>({...d,[l]:c}))};return s.jsx(Es,{children:s.jsxs(Er,{open:!0,onOpenChange:n,children:[s.jsx(Pt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-40",onClick:n}),s.jsx(pr,{className:"fixed z-50 top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-white p-0 shadow-2xl rounded-xl w-[90vw] max-w-lg flex flex-col",children:s.jsxs(Pt.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"h-full flex flex-col",children:[s.jsx(mr,{className:"p-6 border-b bg-gradient-to-r from-brandPrimary to-brandSecondary text-white rounded-t-lg",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(dy,{className:"h-6 w-6"}),s.jsx(gr,{className:"text-2xl font-bold",children:"Create New Scope"})]})}),s.jsxs("form",{onSubmit:i,children:[s.jsxs("div",{className:"p-6 space-y-4",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx(de,{htmlFor:"scopeName",className:"text-sm font-semibold text-gray-700",children:"Scope Name *"}),s.jsx($e,{id:"scopeName",value:r.name,onChange:l=>o("name",l.target.value),placeholder:"e.g., Hanging, Finishing",className:"border-2 focus:border-brandPrimary transition-colors"})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx(de,{htmlFor:"description",className:"text-sm font-semibold text-gray-700",children:"Description"}),s.jsx(_n,{id:"description",value:r.description,onChange:l=>o("description",l.target.value),placeholder:"Detailed description of the scope",className:"border-2 focus:border-brandPrimary transition-colors min-h-[80px]"})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx(de,{className:"text-sm font-semibold text-gray-700",children:"Status"}),s.jsxs(st,{value:r.status,onValueChange:l=>o("status",l),children:[s.jsx(nt,{className:"border-2 focus:border-brandPrimary",children:s.jsx(at,{})}),s.jsxs(rt,{children:[s.jsx(xe,{value:"Not Started",children:"Not Started"}),s.jsx(xe,{value:"In Progress",children:"In Progress"}),s.jsx(xe,{value:"Complete",children:"Complete"})]})]})]})]}),s.jsxs(Tr,{className:"p-6 border-t bg-gray-50 rounded-b-lg",children:[s.jsxs(se,{type:"button",variant:"outline",onClick:n,className:"hover:bg-gray-100",children:[s.jsx(rn,{className:"h-4 w-4 mr-2"})," Cancel"]}),s.jsxs(se,{type:"submit",className:"bg-gradient-to-r from-brandPrimary to-brandSecondary text-white hover:opacity-90",children:[s.jsx(Qn,{className:"h-4 w-4 mr-2"})," Create Scope"]})]})]})]})})]})})},dE={boardType:"",thickness:"",width:"",length:"",quantity:""},Wee={type:"",subtype:"",length:"",threadType:"",quantity:"",unit:"pcs"},uE=[{category:"Corner Bead",items:["Square Bead","Bullnose","Splay","Arch","Tearaway"]},{category:"Joint Compound",items:["All Purpose Joint Compound","Lite Weight Joint Compound","Easy Sand 90","Easy Sand 45","Easy Sand 20","Easy Sand 5"]},{category:"Adhesives",items:["TiteBond Foam","Spray Adhesive"]},{category:"Fasteners",items:['Drywall Screws 1"','Drywall Screws 1-1/4"','Drywall Screws 1-5/8"','Drywall Screws 2"','Drywall Screws 2-1/2"','Drywall Screws 3"']},{category:"Tape",items:["500' Paper Tape","300' Mesh Tape","No Coat 325"]},{category:"Metal Studs",items:['25 Gauge - 1-5/8"','25 Gauge - 2-1/2"','25 Gauge - 3-5/8"','25 Gauge - 4"','25 Gauge - 6"','20 Gauge - 1-5/8"','20 Gauge - 2-1/2"','20 Gauge - 3-5/8"','20 Gauge - 4"','20 Gauge - 6"','18 Gauge - 3-5/8"','18 Gauge - 6"']},{category:"Metal Track",items:['25 Gauge - 1-5/8"','25 Gauge - 2-1/2"','25 Gauge - 3-5/8"','25 Gauge - 4"','25 Gauge - 6"','20 Gauge - 1-5/8"','20 Gauge - 2-1/2"','20 Gauge - 3-5/8"','20 Gauge - 4"','20 Gauge - 6"','18 Gauge - 3-5/8"','18 Gauge - 6"']},{category:"Acoustic Ceiling",items:["2'x2' Tiles","2'x4' Tiles","Main Runners","Cross Tees 4'","Cross Tees 2'","Wall Angle","Hanger Wire"]},{category:"Suspended Drywall Grid",items:["Main Runners","Cross Tees 4'","Cross Tees 2'","Wall Angle","Hanger Wire","Transition Molding"]},{category:"FRP (Fiber Reinforced Panels)",items:["4'x8' Panels","4'x10' Panels","Divider Bars","Inside Corner","Outside Corner","FRP Adhesive"]},{category:"Insulation",items:["R-13 Batts","R-19 Batts","R-21 Batts","R-30 Batts","R-38 Batts","Sound Attenuation Batts",'Rigid Insulation 1"','Rigid Insulation 2"']},{category:"Hat Channel",items:['7/8" Hat Channel','1-1/2" Hat Channel',"Z-Furring Channel"]},{category:"RC Channel",items:["RC-1 Channel"]}],Hee=({jobId:e,phaseId:t,onSubmit:n,onCancel:r})=>{const{jobs:a}=rc(),o=(a.find(F=>F.id===e)||{}).jobType||"residential",[l,c]=j.useState(""),[d,u]=j.useState(""),[h,f]=j.useState(""),[p,y]=j.useState([{...dE,id:Date.now()}]),[g,x]=j.useState([]),[m,v]=j.useState(""),b=()=>{y([...p,{...dE,id:Date.now()}])},C=F=>{if(p.length<=1){pe({title:"Cannot Remove",description:"At least one board entry is required.",variant:"destructive"});return}y(p.filter(V=>V.id!==F))},S=(F,V,B)=>{y(p.map(Y=>Y.id===F?{...Y,[V]:B}:Y))},P=()=>{x([...g,{...Wee,id:Date.now()}])},D=F=>{x(g.filter(V=>V.id!==F))},N=(F,V,B)=>{x(g.map(Y=>{if(Y.id===F){const $={...Y,[V]:B};return V==="type"&&($.subtype="",$.length="",$.threadType="",$.unit=T(B,"")),V==="subtype"&&Y.type==="Joint Compound"&&($.unit=T(Y.type,B)),$}return Y}))},M=F=>{const V=uE.find(B=>B.category===F);return V?V.items:[]},L=F=>F==="Corner Bead"?["pcs"]:F==="Joint Compound"?["Bucket","Box","Bags"]:F==="Adhesives"?["Tube","Can","Gallon"]:F==="Fasteners"?["Box","lbs","pcs"]:F==="Tape"?["Roll"]:F==="Metal Studs"||F==="Metal Track"?["pcs","bundle","linear ft"]:F==="Acoustic Ceiling"?F.includes("Tiles")?["box","pcs"]:F.includes("Wire")?["roll","box"]:["pcs","box","carton"]:F==="Suspended Drywall Grid"?F.includes("Wire")?["roll","box"]:["pcs","box","carton"]:F==="FRP (Fiber Reinforced Panels)"?F.includes("Panels")?["pcs","pallet"]:F.includes("Adhesive")?["bucket","tube"]:["pcs","box"]:F==="Insulation"?F.includes("Batts")?["bag","pallet","sqft"]:F.includes("Rigid")?["sheet","bundle","sqft"]:["bag","pcs"]:F==="Hat Channel"||F==="RC Channel"?["pcs","bundle","linear ft"]:["pcs"],T=(F,V)=>F==="Corner Bead"?"pcs":F==="Joint Compound"?V&&V.includes("Easy Sand")?"Bags":V==="All Purpose Joint Compound"||V==="Lite Weight Joint Compound"?"Box":"Bucket":F==="Adhesives"?"Tube":F==="Fasteners"?"Box":F==="Tape"?"Roll":F==="Metal Studs"||F==="Metal Track"?"pcs":F==="Acoustic Ceiling"?V&&V.includes("Tiles")?"box":V&&V.includes("Wire")?"roll":"pcs":F==="Suspended Drywall Grid"?V&&V.includes("Wire")?"roll":"pcs":F==="FRP (Fiber Reinforced Panels)"?V&&V.includes("Panels")?"pcs":V&&V.includes("Adhesive")?"bucket":"pcs":F==="Insulation"?V&&V.includes("Batts")?"bag":V&&V.includes("Rigid")?"sheet":"bag":"pcs",E=(F,V)=>{if(F==="Corner Bead")return V==="Tearaway"?["10'"]:["12'","10'","9'","8'"];if(F==="Metal Studs"||F==="Metal Track")return["8'","9'","10'","12'","14'","16'","20'","24'"];if(F==="Hat Channel"||F==="RC Channel")return["8'","10'","12'"];if(F==="Suspended Drywall Grid"||F==="Acoustic Ceiling"){if(V&&(V.includes("Main")||V.includes("Runner")))return["12'","14'"];if(V&&V.includes("Cross Tees"))return["2'","4'"];if(V&&V.includes("Wall Angle"))return["10'","12'"]}return[]},A=F=>F==="Fasteners"?["Coarse Thread","Fine Thread"]:F==="Metal Studs"||F==="Metal Track"?["Standard","EQ (Equivalent Gauge)","Structural"]:[],O=F=>F==="Corner Bead"||F==="Metal Studs"||F==="Metal Track"||F==="Hat Channel"||F==="RC Channel"||F==="Suspended Drywall Grid"&&!F.includes("Wire")||F==="Acoustic Ceiling"&&!F.includes("Tiles")&&!F.includes("Wire"),W=F=>F==="Fasteners"||F==="Metal Studs"||F==="Metal Track",z=F=>{if(F.preventDefault(),!t){pe({title:"Error",description:"No takeoff phase selected. Please go back and select or create a phase.",variant:"destructive"});return}if(o==="residential"&&!l.trim()){pe({title:"Missing Information",description:"Please enter the floor/space name.",variant:"destructive"});return}if(o==="commercial"){if(!d.trim()){pe({title:"Missing Information",description:"Please enter the unit type name.",variant:"destructive"});return}if(!h.trim()){pe({title:"Missing Information",description:"Please enter at least one unit number.",variant:"destructive"});return}}const V=p.filter($=>$.boardType&&$.thickness&&$.width&&$.length&&$.quantity);if(V.length===0){pe({title:"Missing Board Information",description:"Please fill in all details for at least one board type.",variant:"destructive"});return}let B=[];o==="commercial"&&g.length>0&&(B=g.filter($=>$.type==="Corner Bead"?$.type&&$.subtype&&$.length&&$.quantity:$.type==="Fasteners"?$.type&&$.subtype&&$.threadType&&$.quantity:$.type==="Metal Studs"||$.type==="Metal Track"?$.type&&$.subtype&&$.length&&$.threadType&&$.quantity:$.type==="Hat Channel"||$.type==="RC Channel"||($.type==="Suspended Drywall Grid"||$.type==="Acoustic Ceiling")&&$.subtype&&($.subtype.includes("Main")||$.subtype.includes("Runner")||$.subtype.includes("Cross")||$.subtype.includes("Wall"))?$.type&&$.subtype&&$.length&&$.quantity:$.type&&$.subtype&&$.quantity));const Y=o==="commercial"?{unitType:d,unitNumbers:h}:{floorSpace:l};o==="commercial"&&B.length>0&&(Y.materials=B),n(e,t,Y,V,m)};return s.jsx(Pt.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"max-w-3xl mx-auto",children:s.jsxs(Te,{className:"shadow-2xl border-0 bg-white/90 backdrop-blur-sm",children:[s.jsx(Xe,{className:"bg-gradient-to-r from-brandPrimary to-brandSecondary text-white rounded-t-lg",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(qj,{className:"h-6 w-6"}),s.jsxs(Qe,{className:"text-2xl font-bold",children:["Add Takeoff Entries",o==="commercial"&&s.jsx("span",{className:"ml-2 text-sm bg-white/20 px-2 py-1 rounded",children:"Commercial Mode"})]})]})}),s.jsxs("form",{onSubmit:z,children:[s.jsxs(Me,{className:"p-8 space-y-8",children:[o==="residential"?s.jsxs("div",{children:[s.jsx(de,{htmlFor:"floorSpace",className:"text-lg font-semibold text-gray-700",children:"Floor/Space Name *"}),s.jsx($e,{id:"floorSpace",value:l,onChange:F=>c(F.target.value),placeholder:"e.g., 2nd Floor, Garage, Pool House Addition",className:"border-2 focus:border-brandPrimary transition-colors mt-2 text-base p-3"})]}):s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(de,{htmlFor:"unitType",className:"text-lg font-semibold text-gray-700",children:"Unit Type Name *"}),s.jsx($e,{id:"unitType",value:d,onChange:F=>u(F.target.value),placeholder:"e.g., Type 1A, Studio, 2-Bedroom Corner",className:"border-2 focus:border-brandPrimary transition-colors mt-2 text-base p-3"})]}),s.jsxs("div",{children:[s.jsx(de,{htmlFor:"unitNumbers",className:"text-lg font-semibold text-gray-700",children:"Unit Numbers *"}),s.jsxs("div",{className:"relative",children:[s.jsx($e,{id:"unitNumbers",value:h,onChange:F=>f(F.target.value),placeholder:"e.g., 501, 502, 503, 504, 505",className:"border-2 focus:border-brandPrimary transition-colors mt-2 text-base p-3 pl-10"}),s.jsx(or,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"})]}),s.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Enter comma-separated unit numbers that share this exact layout"})]}),s.jsxs("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[s.jsxs("h4",{className:"font-semibold text-blue-800 flex items-center mb-2",children:[s.jsx(or,{className:"h-4 w-4 mr-2"}),"Commercial Takeoff Mode"]}),s.jsx("p",{className:"text-sm text-blue-700",children:"In commercial mode, you define a unit type once and associate multiple unit numbers with it. The system will automatically calculate materials for all units of this type."})]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-700 border-b pb-2",children:"Board Details"}),p.map((F,V)=>s.jsxs(Pt.div,{className:"p-6 border rounded-lg bg-slate-50 shadow-sm space-y-4 relative",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:V*.05},children:[p.length>1&&s.jsx(se,{type:"button",variant:"ghost",size:"icon",className:"absolute top-2 right-2 text-red-500 hover:bg-red-100",onClick:()=>C(F.id),children:s.jsx(Kt,{className:"h-4 w-4"})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx(de,{className:"text-sm font-medium text-gray-600",children:"Board Type *"}),s.jsxs(st,{value:F.boardType,onValueChange:B=>S(F.id,"boardType",B),children:[s.jsx(nt,{className:"border-gray-300 focus:border-brandPrimary",children:s.jsx(at,{placeholder:"Select type"})}),s.jsxs(rt,{children:[s.jsx(xe,{value:"Standard",children:"Standard"}),s.jsx(xe,{value:"Moisture-Resistant",children:"Moisture-Resistant"}),s.jsx(xe,{value:"Cement",children:"Cement"}),s.jsx(xe,{value:"Fire-Resistant",children:"Fire-Resistant"})]})]})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx(de,{className:"text-sm font-medium text-gray-600",children:"Thickness *"}),s.jsxs(st,{value:F.thickness,onValueChange:B=>S(F.id,"thickness",B),children:[s.jsx(nt,{className:"border-gray-300 focus:border-brandPrimary",children:s.jsx(at,{placeholder:"Select thickness"})}),s.jsxs(rt,{children:[s.jsx(xe,{value:"1/4",children:'1/4"'}),s.jsx(xe,{value:"3/8",children:'3/8"'}),s.jsx(xe,{value:"1/2",children:'1/2"'}),s.jsx(xe,{value:"5/8",children:'5/8"'}),s.jsx(xe,{value:"3/4",children:'3/4"'})]})]})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx(de,{className:"text-sm font-medium text-gray-600",children:"Width *"}),s.jsxs(st,{value:F.width,onValueChange:B=>S(F.id,"width",B),children:[s.jsx(nt,{className:"border-gray-300 focus:border-brandPrimary",children:s.jsx(at,{placeholder:"Select width"})}),s.jsxs(rt,{children:[s.jsx(xe,{value:"48",children:'48"'}),s.jsx(xe,{value:"54",children:'54"'})]})]})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx(de,{className:"text-sm font-medium text-gray-600",children:"Length *"}),s.jsxs(st,{value:F.length,onValueChange:B=>S(F.id,"length",B),children:[s.jsx(nt,{className:"border-gray-300 focus:border-brandPrimary",children:s.jsx(at,{placeholder:"Select length"})}),s.jsxs(rt,{children:[s.jsx(xe,{value:"8",children:"8'"}),s.jsx(xe,{value:"9",children:"9'"}),s.jsx(xe,{value:"10",children:"10'"}),s.jsx(xe,{value:"12",children:"12'"}),s.jsx(xe,{value:"14",children:"14'"}),s.jsx(xe,{value:"16",children:"16'"})]})]})]}),s.jsxs("div",{className:"space-y-1 md:col-span-2",children:[s.jsx(de,{htmlFor:`quantity-${F.id}`,className:"text-sm font-medium text-gray-600",children:"Quantity *"}),s.jsx($e,{id:`quantity-${F.id}`,type:"number",min:"1",value:F.quantity,onChange:B=>S(F.id,"quantity",B.target.value),placeholder:"Enter quantity",className:"border-gray-300 focus:border-brandPrimary"})]})]})]},F.id)),s.jsxs(se,{type:"button",variant:"outline",onClick:b,className:"w-full border-dashed border-brandPrimary text-brandPrimary hover:bg-brandPrimary/5",children:[s.jsx(Fo,{className:"h-4 w-4 mr-2"}),"Add Another Board Type"]})]}),o==="commercial"&&s.jsxs("div",{className:"space-y-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-700 border-b pb-2",children:"Unit-Specific Materials"}),g.length===0?s.jsxs("div",{className:"text-center py-6 border-2 border-dashed border-gray-300 rounded-lg",children:[s.jsx(ya,{className:"h-10 w-10 mx-auto mb-3 text-gray-400"}),s.jsx("p",{className:"text-gray-500 mb-3",children:"Add materials specific to this unit type"}),s.jsxs(se,{type:"button",onClick:P,className:"bg-brandPrimary hover:bg-brandPrimary-600 text-white",children:[s.jsx(Fo,{className:"h-4 w-4 mr-2"}),"Add First Material"]})]}):s.jsxs(s.Fragment,{children:[g.map((F,V)=>s.jsxs(Pt.div,{className:"p-4 border rounded-lg bg-blue-50 shadow-sm space-y-4 relative",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:V*.05},children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("span",{className:"text-sm font-medium text-blue-700",children:["Unit Material #",V+1]}),s.jsx(se,{type:"button",variant:"ghost",size:"icon",className:"text-red-500 hover:bg-red-100",onClick:()=>D(F.id),children:s.jsx(Kt,{className:"h-4 w-4"})})]}),s.jsxs("div",{className:`grid grid-cols-1 gap-4 ${O(F.type)&&W(F.type)?"md:grid-cols-6":O(F.type)||W(F.type)?"md:grid-cols-5":"md:grid-cols-4"}`,children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx(de,{className:"text-sm font-medium text-gray-600",children:"Material Type *"}),s.jsxs(st,{value:F.type||"",onValueChange:B=>N(F.id,"type",B),children:[s.jsx(nt,{className:"border-gray-300 focus:border-brandPrimary",children:s.jsx(at,{placeholder:"Select type"})}),s.jsx(rt,{children:uE.map(B=>s.jsx(xe,{value:B.category,children:B.category},B.category))})]})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx(de,{className:"text-sm font-medium text-gray-600",children:"Specific Item *"}),s.jsxs(st,{value:F.subtype||"",onValueChange:B=>N(F.id,"subtype",B),disabled:!F.type,children:[s.jsx(nt,{className:"border-gray-300 focus:border-brandPrimary",children:s.jsx(at,{placeholder:"Select item"})}),s.jsx(rt,{children:M(F.type).map(B=>s.jsx(xe,{value:B,children:B},B))})]})]}),O(F.type)&&s.jsxs("div",{className:"space-y-1",children:[s.jsx(de,{className:"text-sm font-medium text-gray-600",children:"Length *"}),s.jsxs(st,{value:F.length||"",onValueChange:B=>N(F.id,"length",B),disabled:!F.subtype,children:[s.jsx(nt,{className:"border-gray-300 focus:border-brandPrimary",children:s.jsx(at,{placeholder:"Select length"})}),s.jsx(rt,{children:E(F.type,F.subtype).map(B=>s.jsx(xe,{value:B,children:B},B))})]})]}),W(F.type)&&s.jsxs("div",{className:"space-y-1",children:[s.jsx(de,{className:"text-sm font-medium text-gray-600",children:F.type==="Metal Studs"||F.type==="Metal Track"?"Structural Grade *":"Thread Type *"}),s.jsxs(st,{value:F.threadType||"",onValueChange:B=>N(F.id,"threadType",B),disabled:!F.subtype,children:[s.jsx(nt,{className:"border-gray-300 focus:border-brandPrimary",children:s.jsx(at,{placeholder:F.type==="Metal Studs"||F.type==="Metal Track"?"Select grade":"Select thread"})}),s.jsx(rt,{children:A(F.type).map(B=>s.jsx(xe,{value:B,children:B},B))})]})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx(de,{className:"text-sm font-medium text-gray-600",children:"Quantity *"}),s.jsx($e,{type:"number",min:"0",step:"0.1",value:F.quantity,onChange:B=>N(F.id,"quantity",B.target.value),placeholder:"Enter quantity",className:"border-gray-300 focus:border-brandPrimary"})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx(de,{className:"text-sm font-medium text-gray-600",children:"Unit"}),s.jsxs(st,{value:F.unit||"pcs",onValueChange:B=>N(F.id,"unit",B),children:[s.jsx(nt,{className:"border-gray-300 focus:border-brandPrimary",children:s.jsx(at,{})}),s.jsx(rt,{children:L(F.type).map(B=>s.jsx(xe,{value:B,children:B},B))})]})]})]})]},F.id)),s.jsxs(se,{type:"button",variant:"outline",onClick:P,className:"w-full border-dashed border-blue-500 text-blue-500 hover:bg-blue-50",children:[s.jsx(Fo,{className:"h-4 w-4 mr-2"}),"Add Another Material"]})]})]}),s.jsxs("div",{children:[s.jsx(de,{htmlFor:"notes",className:"text-lg font-semibold text-gray-700",children:"Notes (Optional)"}),s.jsx(_n,{id:"notes",value:m,onChange:F=>v(F.target.value),placeholder:"Additional notes or specifications for this floor/space",className:"border-2 focus:border-brandPrimary transition-colors mt-2 min-h-[80px]"})]})]}),s.jsxs(C1,{className:"p-8 flex space-x-4",children:[s.jsxs(se,{type:"submit",className:"flex-1 bg-gradient-to-r from-brandPrimary to-brandSecondary hover:from-brandPrimary-600 hover:to-brandSecondary-600 text-white font-semibold py-3 text-base",children:[s.jsx(Qn,{className:"h-5 w-5 mr-2"}),"Save Entries for ",o==="commercial"?"Unit Type":"Floor/Space"]}),s.jsxs(se,{type:"button",variant:"outline",onClick:r,className:"flex-1 border-2 hover:bg-gray-50 font-semibold py-3 text-base",children:[s.jsx(rn,{className:"h-5 w-5 mr-2"}),"Cancel"]})]})]})]})})},qee=({jobId:e,onSubmit:t,onCancel:n})=>{const[r,a]=j.useState(""),i=o=>{if(o.preventDefault(),!r.trim()){pe({title:"Missing Information",description:"Please enter a phase name.",variant:"destructive"});return}t(e,{name:r})};return s.jsx(Pt.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"max-w-md mx-auto",children:s.jsxs(Te,{className:"shadow-2xl border-0 bg-white/90 backdrop-blur-sm",children:[s.jsx(Xe,{className:"bg-gradient-to-r from-brandPrimary to-brandSecondary text-white rounded-t-lg",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(uy,{className:"h-6 w-6"}),s.jsx(Qe,{className:"text-2xl font-bold",children:"New Takeoff Phase"})]})}),s.jsx(Me,{className:"p-8",children:s.jsxs("form",{onSubmit:i,className:"space-y-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"phaseName",className:"text-sm font-semibold text-gray-700",children:"Phase Name *"}),s.jsx($e,{id:"phaseName",value:r,onChange:o=>a(o.target.value),placeholder:"e.g., Main Build, Addition, Phase 1",className:"border-2 focus:border-brandPrimary transition-colors"})]}),s.jsxs("div",{className:"flex space-x-4 pt-6",children:[s.jsxs(se,{type:"submit",className:"flex-1 bg-gradient-to-r from-brandPrimary to-brandSecondary hover:from-brandPrimary-600 hover:to-brandSecondary-600 text-white font-semibold py-3",children:[s.jsx(Qn,{className:"h-4 w-4 mr-2"}),"Create Phase"]}),s.jsxs(se,{type:"button",variant:"outline",onClick:n,className:"flex-1 border-2 hover:bg-gray-50 font-semibold py-3",children:[s.jsx(rn,{className:"h-4 w-4 mr-2"}),"Cancel"]})]})]})})]})})};function Vee(e,t){typeof e=="function"?e(t):e!=null&&(e.current=t)}function eO(...e){return t=>e.forEach(n=>Vee(n,t))}function eh(...e){return j.useCallback(eO(...e),e)}const tO=j.forwardRef((e,t)=>{const{children:n,...r}=e,a=j.Children.toArray(n),i=a.find(Yee);if(i){const o=i.props.children,l=a.map(c=>c===i?j.Children.count(o)>1?j.Children.only(null):j.isValidElement(o)?o.props.children:null:c);return j.createElement(gN,St({},r,{ref:t}),j.isValidElement(o)?j.cloneElement(o,void 0,l):null)}return j.createElement(gN,St({},r,{ref:t}),n)});tO.displayName="Slot";const gN=j.forwardRef((e,t)=>{const{children:n,...r}=e;return j.isValidElement(n)?j.cloneElement(n,{...Gee(r,n.props),ref:t?eO(t,n.ref):n.ref}):j.Children.count(n)>1?j.Children.only(null):null});gN.displayName="SlotClone";const Uee=({children:e})=>j.createElement(j.Fragment,null,e);function Yee(e){return j.isValidElement(e)&&e.type===Uee}function Gee(e,t){const n={...t};for(const r in t){const a=e[r],i=t[r];/^on[A-Z]/.test(r)?a&&i?n[r]=(...l)=>{i(...l),a(...l)}:a&&(n[r]=a):r==="style"?n[r]={...a,...i}:r==="className"&&(n[r]=[a,i].filter(Boolean).join(" "))}return{...e,...n}}const Jee=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],ev=Jee.reduce((e,t)=>{const n=j.forwardRef((r,a)=>{const{asChild:i,...o}=r,l=i?tO:t;return j.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),j.createElement(l,St({},o,{ref:a}))});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{}),vN=globalThis!=null&&globalThis.document?j.useLayoutEffect:()=>{};function Kee(e,t){return j.useReducer((n,r)=>{const a=t[n][r];return a??n},e)}const tv=e=>{const{present:t,children:n}=e,r=Xee(t),a=typeof n=="function"?n({present:r.isPresent}):j.Children.only(n),i=eh(r.ref,a.ref);return typeof n=="function"||r.isPresent?j.cloneElement(a,{ref:i}):null};tv.displayName="Presence";function Xee(e){const[t,n]=j.useState(),r=j.useRef({}),a=j.useRef(e),i=j.useRef("none"),o=e?"mounted":"unmounted",[l,c]=Kee(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return j.useEffect(()=>{const d=Rx(r.current);i.current=l==="mounted"?d:"none"},[l]),vN(()=>{const d=r.current,u=a.current;if(u!==e){const f=i.current,p=Rx(d);e?c("MOUNT"):p==="none"||(d==null?void 0:d.display)==="none"?c("UNMOUNT"):c(u&&f!==p?"ANIMATION_OUT":"UNMOUNT"),a.current=e}},[e,c]),vN(()=>{if(t){const d=h=>{const p=Rx(r.current).includes(h.animationName);h.target===t&&p&&rl.flushSync(()=>c("ANIMATION_END"))},u=h=>{h.target===t&&(i.current=Rx(r.current))};return t.addEventListener("animationstart",u),t.addEventListener("animationcancel",d),t.addEventListener("animationend",d),()=>{t.removeEventListener("animationstart",u),t.removeEventListener("animationcancel",d),t.removeEventListener("animationend",d)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:j.useCallback(d=>{d&&(r.current=getComputedStyle(d)),n(d)},[])}}function Rx(e){return(e==null?void 0:e.animationName)||"none"}function Qee(e,t=[]){let n=[];function r(i,o){const l=j.createContext(o),c=n.length;n=[...n,o];function d(h){const{scope:f,children:p,...y}=h,g=(f==null?void 0:f[e][c])||l,x=j.useMemo(()=>y,Object.values(y));return j.createElement(g.Provider,{value:x},p)}function u(h,f){const p=(f==null?void 0:f[e][c])||l,y=j.useContext(p);if(y)return y;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${i}\``)}return d.displayName=i+"Provider",[d,u]}const a=()=>{const i=n.map(o=>j.createContext(o));return function(l){const c=(l==null?void 0:l[e])||i;return j.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return a.scopeName=e,[r,Zee(a,...t)]}function Zee(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(i){const o=r.reduce((l,{useScope:c,scopeName:d})=>{const h=c(i)[`__scope${d}`];return{...l,...h}},{});return j.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return n.scopeName=t.scopeName,n}function au(e){const t=j.useRef(e);return j.useEffect(()=>{t.current=e}),j.useMemo(()=>(...n)=>{var r;return(r=t.current)===null||r===void 0?void 0:r.call(t,...n)},[])}const ete=j.createContext(void 0);function tte(e){const t=j.useContext(ete);return e||t||"ltr"}function nte(e,[t,n]){return Math.min(n,Math.max(t,e))}function xu(e,t,{checkForDefaultPrevented:n=!0}={}){return function(a){if(e==null||e(a),n===!1||!a.defaultPrevented)return t==null?void 0:t(a)}}function rte(e,t){return j.useReducer((n,r)=>{const a=t[n][r];return a??n},e)}const nO="ScrollArea",[rO,dNe]=Qee(nO),[ste,zi]=rO(nO),ate=j.forwardRef((e,t)=>{const{__scopeScrollArea:n,type:r="hover",dir:a,scrollHideDelay:i=600,...o}=e,[l,c]=j.useState(null),[d,u]=j.useState(null),[h,f]=j.useState(null),[p,y]=j.useState(null),[g,x]=j.useState(null),[m,v]=j.useState(0),[b,C]=j.useState(0),[S,P]=j.useState(!1),[D,N]=j.useState(!1),M=eh(t,T=>c(T)),L=tte(a);return j.createElement(ste,{scope:n,type:r,dir:L,scrollHideDelay:i,scrollArea:l,viewport:d,onViewportChange:u,content:h,onContentChange:f,scrollbarX:p,onScrollbarXChange:y,scrollbarXEnabled:S,onScrollbarXEnabledChange:P,scrollbarY:g,onScrollbarYChange:x,scrollbarYEnabled:D,onScrollbarYEnabledChange:N,onCornerWidthChange:v,onCornerHeightChange:C},j.createElement(ev.div,St({dir:L},o,{ref:M,style:{position:"relative","--radix-scroll-area-corner-width":m+"px","--radix-scroll-area-corner-height":b+"px",...e.style}})))}),ite="ScrollAreaViewport",ote=j.forwardRef((e,t)=>{const{__scopeScrollArea:n,children:r,...a}=e,i=zi(ite,n),o=j.useRef(null),l=eh(t,o,i.onViewportChange);return j.createElement(j.Fragment,null,j.createElement("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"}}),j.createElement(ev.div,St({"data-radix-scroll-area-viewport":""},a,{ref:l,style:{overflowX:i.scrollbarXEnabled?"scroll":"hidden",overflowY:i.scrollbarYEnabled?"scroll":"hidden",...e.style}}),j.createElement("div",{ref:i.onContentChange,style:{minWidth:"100%",display:"table"}},r)))}),sc="ScrollAreaScrollbar",sO=j.forwardRef((e,t)=>{const{forceMount:n,...r}=e,a=zi(sc,e.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:o}=a,l=e.orientation==="horizontal";return j.useEffect(()=>(l?i(!0):o(!0),()=>{l?i(!1):o(!1)}),[l,i,o]),a.type==="hover"?j.createElement(lte,St({},r,{ref:t,forceMount:n})):a.type==="scroll"?j.createElement(cte,St({},r,{ref:t,forceMount:n})):a.type==="auto"?j.createElement(aO,St({},r,{ref:t,forceMount:n})):a.type==="always"?j.createElement(aC,St({},r,{ref:t})):null}),lte=j.forwardRef((e,t)=>{const{forceMount:n,...r}=e,a=zi(sc,e.__scopeScrollArea),[i,o]=j.useState(!1);return j.useEffect(()=>{const l=a.scrollArea;let c=0;if(l){const d=()=>{window.clearTimeout(c),o(!0)},u=()=>{c=window.setTimeout(()=>o(!1),a.scrollHideDelay)};return l.addEventListener("pointerenter",d),l.addEventListener("pointerleave",u),()=>{window.clearTimeout(c),l.removeEventListener("pointerenter",d),l.removeEventListener("pointerleave",u)}}},[a.scrollArea,a.scrollHideDelay]),j.createElement(tv,{present:n||i},j.createElement(aO,St({"data-state":i?"visible":"hidden"},r,{ref:t})))}),cte=j.forwardRef((e,t)=>{const{forceMount:n,...r}=e,a=zi(sc,e.__scopeScrollArea),i=e.orientation==="horizontal",o=M1(()=>c("SCROLL_END"),100),[l,c]=rte("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return j.useEffect(()=>{if(l==="idle"){const d=window.setTimeout(()=>c("HIDE"),a.scrollHideDelay);return()=>window.clearTimeout(d)}},[l,a.scrollHideDelay,c]),j.useEffect(()=>{const d=a.viewport,u=i?"scrollLeft":"scrollTop";if(d){let h=d[u];const f=()=>{const p=d[u];h!==p&&(c("SCROLL"),o()),h=p};return d.addEventListener("scroll",f),()=>d.removeEventListener("scroll",f)}},[a.viewport,i,c,o]),j.createElement(tv,{present:n||l!=="hidden"},j.createElement(aC,St({"data-state":l==="hidden"?"hidden":"visible"},r,{ref:t,onPointerEnter:xu(e.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:xu(e.onPointerLeave,()=>c("POINTER_LEAVE"))})))}),aO=j.forwardRef((e,t)=>{const n=zi(sc,e.__scopeScrollArea),{forceMount:r,...a}=e,[i,o]=j.useState(!1),l=e.orientation==="horizontal",c=M1(()=>{if(n.viewport){const d=n.viewport.offsetWidth<n.viewport.scrollWidth,u=n.viewport.offsetHeight<n.viewport.scrollHeight;o(l?d:u)}},10);return Of(n.viewport,c),Of(n.content,c),j.createElement(tv,{present:r||i},j.createElement(aC,St({"data-state":i?"visible":"hidden"},a,{ref:t})))}),aC=j.forwardRef((e,t)=>{const{orientation:n="vertical",...r}=e,a=zi(sc,e.__scopeScrollArea),i=j.useRef(null),o=j.useRef(0),[l,c]=j.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),d=cO(l.viewport,l.content),u={...r,sizes:l,onSizesChange:c,hasThumb:d>0&&d<1,onThumbChange:f=>i.current=f,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:f=>o.current=f};function h(f,p){return vte(f,o.current,l,p)}return n==="horizontal"?j.createElement(dte,St({},u,{ref:t,onThumbPositionChange:()=>{if(a.viewport&&i.current){const f=a.viewport.scrollLeft,p=hE(f,l,a.dir);i.current.style.transform=`translate3d(${p}px, 0, 0)`}},onWheelScroll:f=>{a.viewport&&(a.viewport.scrollLeft=f)},onDragScroll:f=>{a.viewport&&(a.viewport.scrollLeft=h(f,a.dir))}})):n==="vertical"?j.createElement(ute,St({},u,{ref:t,onThumbPositionChange:()=>{if(a.viewport&&i.current){const f=a.viewport.scrollTop,p=hE(f,l);i.current.style.transform=`translate3d(0, ${p}px, 0)`}},onWheelScroll:f=>{a.viewport&&(a.viewport.scrollTop=f)},onDragScroll:f=>{a.viewport&&(a.viewport.scrollTop=h(f))}})):null}),dte=j.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...a}=e,i=zi(sc,e.__scopeScrollArea),[o,l]=j.useState(),c=j.useRef(null),d=eh(t,c,i.onScrollbarXChange);return j.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),j.createElement(oO,St({"data-orientation":"horizontal"},a,{ref:d,sizes:n,style:{bottom:0,left:i.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:i.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":_1(n)+"px",...e.style},onThumbPointerDown:u=>e.onThumbPointerDown(u.x),onDragScroll:u=>e.onDragScroll(u.x),onWheelScroll:(u,h)=>{if(i.viewport){const f=i.viewport.scrollLeft+u.deltaX;e.onWheelScroll(f),uO(f,h)&&u.preventDefault()}},onResize:()=>{c.current&&i.viewport&&o&&r({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:Cy(o.paddingLeft),paddingEnd:Cy(o.paddingRight)}})}}))}),ute=j.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...a}=e,i=zi(sc,e.__scopeScrollArea),[o,l]=j.useState(),c=j.useRef(null),d=eh(t,c,i.onScrollbarYChange);return j.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),j.createElement(oO,St({"data-orientation":"vertical"},a,{ref:d,sizes:n,style:{top:0,right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":_1(n)+"px",...e.style},onThumbPointerDown:u=>e.onThumbPointerDown(u.y),onDragScroll:u=>e.onDragScroll(u.y),onWheelScroll:(u,h)=>{if(i.viewport){const f=i.viewport.scrollTop+u.deltaY;e.onWheelScroll(f),uO(f,h)&&u.preventDefault()}},onResize:()=>{c.current&&i.viewport&&o&&r({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:Cy(o.paddingTop),paddingEnd:Cy(o.paddingBottom)}})}}))}),[hte,iO]=rO(sc),oO=j.forwardRef((e,t)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:a,onThumbChange:i,onThumbPointerUp:o,onThumbPointerDown:l,onThumbPositionChange:c,onDragScroll:d,onWheelScroll:u,onResize:h,...f}=e,p=zi(sc,n),[y,g]=j.useState(null),x=eh(t,M=>g(M)),m=j.useRef(null),v=j.useRef(""),b=p.viewport,C=r.content-r.viewport,S=au(u),P=au(c),D=M1(h,10);function N(M){if(m.current){const L=M.clientX-m.current.left,T=M.clientY-m.current.top;d({x:L,y:T})}}return j.useEffect(()=>{const M=L=>{const T=L.target;(y==null?void 0:y.contains(T))&&S(L,C)};return document.addEventListener("wheel",M,{passive:!1}),()=>document.removeEventListener("wheel",M,{passive:!1})},[b,y,C,S]),j.useEffect(P,[r,P]),Of(y,D),Of(p.content,D),j.createElement(hte,{scope:n,scrollbar:y,hasThumb:a,onThumbChange:au(i),onThumbPointerUp:au(o),onThumbPositionChange:P,onThumbPointerDown:au(l)},j.createElement(ev.div,St({},f,{ref:x,style:{position:"absolute",...f.style},onPointerDown:xu(e.onPointerDown,M=>{M.button===0&&(M.target.setPointerCapture(M.pointerId),m.current=y.getBoundingClientRect(),v.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",p.viewport&&(p.viewport.style.scrollBehavior="auto"),N(M))}),onPointerMove:xu(e.onPointerMove,N),onPointerUp:xu(e.onPointerUp,M=>{const L=M.target;L.hasPointerCapture(M.pointerId)&&L.releasePointerCapture(M.pointerId),document.body.style.webkitUserSelect=v.current,p.viewport&&(p.viewport.style.scrollBehavior=""),m.current=null})})))}),xN="ScrollAreaThumb",fte=j.forwardRef((e,t)=>{const{forceMount:n,...r}=e,a=iO(xN,e.__scopeScrollArea);return j.createElement(tv,{present:n||a.hasThumb},j.createElement(pte,St({ref:t},r)))}),pte=j.forwardRef((e,t)=>{const{__scopeScrollArea:n,style:r,...a}=e,i=zi(xN,n),o=iO(xN,n),{onThumbPositionChange:l}=o,c=eh(t,h=>o.onThumbChange(h)),d=j.useRef(),u=M1(()=>{d.current&&(d.current(),d.current=void 0)},100);return j.useEffect(()=>{const h=i.viewport;if(h){const f=()=>{if(u(),!d.current){const p=xte(h,l);d.current=p,l()}};return l(),h.addEventListener("scroll",f),()=>h.removeEventListener("scroll",f)}},[i.viewport,u,l]),j.createElement(ev.div,St({"data-state":o.hasThumb?"visible":"hidden"},a,{ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:xu(e.onPointerDownCapture,h=>{const p=h.target.getBoundingClientRect(),y=h.clientX-p.left,g=h.clientY-p.top;o.onThumbPointerDown({x:y,y:g})}),onPointerUp:xu(e.onPointerUp,o.onThumbPointerUp)}))}),lO="ScrollAreaCorner",mte=j.forwardRef((e,t)=>{const n=zi(lO,e.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?j.createElement(gte,St({},e,{ref:t})):null}),gte=j.forwardRef((e,t)=>{const{__scopeScrollArea:n,...r}=e,a=zi(lO,n),[i,o]=j.useState(0),[l,c]=j.useState(0),d=!!(i&&l);return Of(a.scrollbarX,()=>{var u;const h=((u=a.scrollbarX)===null||u===void 0?void 0:u.offsetHeight)||0;a.onCornerHeightChange(h),c(h)}),Of(a.scrollbarY,()=>{var u;const h=((u=a.scrollbarY)===null||u===void 0?void 0:u.offsetWidth)||0;a.onCornerWidthChange(h),o(h)}),d?j.createElement(ev.div,St({},r,{ref:t,style:{width:i,height:l,position:"absolute",right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:0,...e.style}})):null});function Cy(e){return e?parseInt(e,10):0}function cO(e,t){const n=e/t;return isNaN(n)?0:n}function _1(e){const t=cO(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-n)*t;return Math.max(r,18)}function vte(e,t,n,r="ltr"){const a=_1(n),i=a/2,o=t||i,l=a-o,c=n.scrollbar.paddingStart+o,d=n.scrollbar.size-n.scrollbar.paddingEnd-l,u=n.content-n.viewport,h=r==="ltr"?[0,u]:[u*-1,0];return dO([c,d],h)(e)}function hE(e,t,n="ltr"){const r=_1(t),a=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,i=t.scrollbar.size-a,o=t.content-t.viewport,l=i-r,c=n==="ltr"?[0,o]:[o*-1,0],d=nte(e,c);return dO([0,o],[0,l])(d)}function dO(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function uO(e,t){return e>0&&e<t}const xte=(e,t=()=>{})=>{let n={left:e.scrollLeft,top:e.scrollTop},r=0;return function a(){const i={left:e.scrollLeft,top:e.scrollTop},o=n.left!==i.left,l=n.top!==i.top;(o||l)&&t(),n=i,r=window.requestAnimationFrame(a)}(),()=>window.cancelAnimationFrame(r)};function M1(e,t){const n=au(e),r=j.useRef(0);return j.useEffect(()=>()=>window.clearTimeout(r.current),[]),j.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,t)},[n,t])}function Of(e,t){const n=au(t);vN(()=>{let r=0;if(e){const a=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return a.observe(e),()=>{window.cancelAnimationFrame(r),a.unobserve(e)}}},[e,n])}const hO=ate,yte=ote,bte=mte,fO=Q.forwardRef(({className:e,children:t,...n},r)=>s.jsxs(hO,{ref:r,className:Ft("relative overflow-hidden",e),...n,children:[s.jsx(yte,{className:"h-full w-full rounded-[inherit]",children:t}),s.jsx(pO,{}),s.jsx(bte,{})]}));fO.displayName=hO.displayName;const pO=Q.forwardRef(({className:e,orientation:t="vertical",...n},r)=>s.jsx(sO,{ref:r,orientation:t,className:Ft("flex touch-none select-none transition-colors",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...n,children:s.jsx(fte,{className:"relative flex-1 rounded-full bg-border"})}));pO.displayName=sO.displayName;const wte="modulepreload",jte=function(e){return"/"+e},fE={},yN=function(t,n,r){if(!n||n.length===0)return t();const a=document.getElementsByTagName("link");return Promise.all(n.map(i=>{if(i=jte(i),i in fE)return;fE[i]=!0;const o=i.endsWith(".css"),l=o?'[rel="stylesheet"]':"";if(!!r)for(let u=a.length-1;u>=0;u--){const h=a[u];if(h.href===i&&(!o||h.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${i}"]${l}`))return;const d=document.createElement("link");if(d.rel=o?"stylesheet":wte,o||(d.as="script",d.crossOrigin=""),d.href=i,document.head.appendChild(d),o)return new Promise((u,h)=>{d.addEventListener("load",u),d.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>t()).catch(i=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i})};function on(e){"@babel/helpers - typeof";return on=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},on(e)}const Nte=Object.freeze(Object.defineProperty({__proto__:null,get default(){return on}},Symbol.toStringTag,{value:"Module"}));var Xs=Uint8Array,ai=Uint16Array,iC=Int32Array,R1=new Xs([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),L1=new Xs([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),bN=new Xs([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),mO=function(e,t){for(var n=new ai(31),r=0;r<31;++r)n[r]=t+=1<<e[r-1];for(var a=new iC(n[30]),r=1;r<30;++r)for(var i=n[r];i<n[r+1];++i)a[i]=i-n[r]<<5|r;return{b:n,r:a}},gO=mO(R1,2),vO=gO.b,wN=gO.r;vO[28]=258,wN[258]=28;var xO=mO(L1,0),Ste=xO.b,pE=xO.r,jN=new ai(32768);for(var Jn=0;Jn<32768;++Jn){var kc=(Jn&43690)>>1|(Jn&21845)<<1;kc=(kc&52428)>>2|(kc&13107)<<2,kc=(kc&61680)>>4|(kc&3855)<<4,jN[Jn]=((kc&65280)>>8|(kc&255)<<8)>>1}var Ko=function(e,t,n){for(var r=e.length,a=0,i=new ai(t);a<r;++a)e[a]&&++i[e[a]-1];var o=new ai(t);for(a=1;a<t;++a)o[a]=o[a-1]+i[a-1]<<1;var l;if(n){l=new ai(1<<t);var c=15-t;for(a=0;a<r;++a)if(e[a])for(var d=a<<4|e[a],u=t-e[a],h=o[e[a]-1]++<<u,f=h|(1<<u)-1;h<=f;++h)l[jN[h]>>c]=d}else for(l=new ai(r),a=0;a<r;++a)e[a]&&(l[a]=jN[o[e[a]-1]++]>>15-e[a]);return l},md=new Xs(288);for(var Jn=0;Jn<144;++Jn)md[Jn]=8;for(var Jn=144;Jn<256;++Jn)md[Jn]=9;for(var Jn=256;Jn<280;++Jn)md[Jn]=7;for(var Jn=280;Jn<288;++Jn)md[Jn]=8;var yg=new Xs(32);for(var Jn=0;Jn<32;++Jn)yg[Jn]=5;var Cte=Ko(md,9,0),Pte=Ko(md,9,1),Dte=Ko(yg,5,0),kte=Ko(yg,5,1),i2=function(e){for(var t=e[0],n=1;n<e.length;++n)e[n]>t&&(t=e[n]);return t},Ki=function(e,t,n){var r=t/8|0;return(e[r]|e[r+1]<<8)>>(t&7)&n},o2=function(e,t){var n=t/8|0;return(e[n]|e[n+1]<<8|e[n+2]<<16)>>(t&7)},oC=function(e){return(e+7)/8|0},yO=function(e,t,n){return(t==null||t<0)&&(t=0),(n==null||n>e.length)&&(n=e.length),new Xs(e.subarray(t,n))},Ete=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],eo=function(e,t,n){var r=new Error(t||Ete[e]);if(r.code=e,Error.captureStackTrace&&Error.captureStackTrace(r,eo),!n)throw r;return r},Tte=function(e,t,n,r){var a=e.length,i=r?r.length:0;if(!a||t.f&&!t.l)return n||new Xs(0);var o=!n,l=o||t.i!=2,c=t.i;o&&(n=new Xs(a*3));var d=function(ie){var Ne=n.length;if(ie>Ne){var Be=new Xs(Math.max(Ne*2,ie));Be.set(n),n=Be}},u=t.f||0,h=t.p||0,f=t.b||0,p=t.l,y=t.d,g=t.m,x=t.n,m=a*8;do{if(!p){u=Ki(e,h,1);var v=Ki(e,h+1,3);if(h+=3,v)if(v==1)p=Pte,y=kte,g=9,x=5;else if(v==2){var P=Ki(e,h,31)+257,D=Ki(e,h+10,15)+4,N=P+Ki(e,h+5,31)+1;h+=14;for(var M=new Xs(N),L=new Xs(19),T=0;T<D;++T)L[bN[T]]=Ki(e,h+T*3,7);h+=D*3;for(var E=i2(L),A=(1<<E)-1,O=Ko(L,E,1),T=0;T<N;){var W=O[Ki(e,h,A)];h+=W&15;var b=W>>4;if(b<16)M[T++]=b;else{var z=0,F=0;for(b==16?(F=3+Ki(e,h,3),h+=2,z=M[T-1]):b==17?(F=3+Ki(e,h,7),h+=3):b==18&&(F=11+Ki(e,h,127),h+=7);F--;)M[T++]=z}}var V=M.subarray(0,P),B=M.subarray(P);g=i2(V),x=i2(B),p=Ko(V,g,1),y=Ko(B,x,1)}else eo(1);else{var b=oC(h)+4,C=e[b-4]|e[b-3]<<8,S=b+C;if(S>a){c&&eo(0);break}l&&d(f+C),n.set(e.subarray(b,S),f),t.b=f+=C,t.p=h=S*8,t.f=u;continue}if(h>m){c&&eo(0);break}}l&&d(f+131072);for(var Y=(1<<g)-1,$=(1<<x)-1,I=h;;I=h){var z=p[o2(e,h)&Y],U=z>>4;if(h+=z&15,h>m){c&&eo(0);break}if(z||eo(2),U<256)n[f++]=U;else if(U==256){I=h,p=null;break}else{var q=U-254;if(U>264){var T=U-257,X=R1[T];q=Ki(e,h,(1<<X)-1)+vO[T],h+=X}var te=y[o2(e,h)&$],ae=te>>4;te||eo(3),h+=te&15;var B=Ste[ae];if(ae>3){var X=L1[ae];B+=o2(e,h)&(1<<X)-1,h+=X}if(h>m){c&&eo(0);break}l&&d(f+131072);var le=f+q;if(f<B){var me=i-B,Le=Math.min(B,le);for(me+f<0&&eo(3);f<Le;++f)n[f]=r[me+f]}for(;f<le;++f)n[f]=n[f-B]}}t.l=p,t.p=I,t.b=f,t.f=u,p&&(u=1,t.m=g,t.d=y,t.n=x)}while(!u);return f!=n.length&&o?yO(n,0,f):n.subarray(0,f)},Sl=function(e,t,n){n<<=t&7;var r=t/8|0;e[r]|=n,e[r+1]|=n>>8},rm=function(e,t,n){n<<=t&7;var r=t/8|0;e[r]|=n,e[r+1]|=n>>8,e[r+2]|=n>>16},l2=function(e,t){for(var n=[],r=0;r<e.length;++r)e[r]&&n.push({s:r,f:e[r]});var a=n.length,i=n.slice();if(!a)return{t:wO,l:0};if(a==1){var o=new Xs(n[0].s+1);return o[n[0].s]=1,{t:o,l:1}}n.sort(function(S,P){return S.f-P.f}),n.push({s:-1,f:25001});var l=n[0],c=n[1],d=0,u=1,h=2;for(n[0]={s:-1,f:l.f+c.f,l,r:c};u!=a-1;)l=n[n[d].f<n[h].f?d++:h++],c=n[d!=u&&n[d].f<n[h].f?d++:h++],n[u++]={s:-1,f:l.f+c.f,l,r:c};for(var f=i[0].s,r=1;r<a;++r)i[r].s>f&&(f=i[r].s);var p=new ai(f+1),y=NN(n[u-1],p,0);if(y>t){var r=0,g=0,x=y-t,m=1<<x;for(i.sort(function(P,D){return p[D.s]-p[P.s]||P.f-D.f});r<a;++r){var v=i[r].s;if(p[v]>t)g+=m-(1<<y-p[v]),p[v]=t;else break}for(g>>=x;g>0;){var b=i[r].s;p[b]<t?g-=1<<t-p[b]++-1:++r}for(;r>=0&&g;--r){var C=i[r].s;p[C]==t&&(--p[C],++g)}y=t}return{t:new Xs(p),l:y}},NN=function(e,t,n){return e.s==-1?Math.max(NN(e.l,t,n+1),NN(e.r,t,n+1)):t[e.s]=n},mE=function(e){for(var t=e.length;t&&!e[--t];);for(var n=new ai(++t),r=0,a=e[0],i=1,o=function(c){n[r++]=c},l=1;l<=t;++l)if(e[l]==a&&l!=t)++i;else{if(!a&&i>2){for(;i>138;i-=138)o(32754);i>2&&(o(i>10?i-11<<5|28690:i-3<<5|12305),i=0)}else if(i>3){for(o(a),--i;i>6;i-=6)o(8304);i>2&&(o(i-3<<5|8208),i=0)}for(;i--;)o(a);i=1,a=e[l]}return{c:n.subarray(0,r),n:t}},sm=function(e,t){for(var n=0,r=0;r<t.length;++r)n+=e[r]*t[r];return n},bO=function(e,t,n){var r=n.length,a=oC(t+2);e[a]=r&255,e[a+1]=r>>8,e[a+2]=e[a]^255,e[a+3]=e[a+1]^255;for(var i=0;i<r;++i)e[a+i+4]=n[i];return(a+4+r)*8},gE=function(e,t,n,r,a,i,o,l,c,d,u){Sl(t,u++,n),++a[256];for(var h=l2(a,15),f=h.t,p=h.l,y=l2(i,15),g=y.t,x=y.l,m=mE(f),v=m.c,b=m.n,C=mE(g),S=C.c,P=C.n,D=new ai(19),N=0;N<v.length;++N)++D[v[N]&31];for(var N=0;N<S.length;++N)++D[S[N]&31];for(var M=l2(D,7),L=M.t,T=M.l,E=19;E>4&&!L[bN[E-1]];--E);var A=d+5<<3,O=sm(a,md)+sm(i,yg)+o,W=sm(a,f)+sm(i,g)+o+14+3*E+sm(D,L)+2*D[16]+3*D[17]+7*D[18];if(c>=0&&A<=O&&A<=W)return bO(t,u,e.subarray(c,c+d));var z,F,V,B;if(Sl(t,u,1+(W<O)),u+=2,W<O){z=Ko(f,p,0),F=f,V=Ko(g,x,0),B=g;var Y=Ko(L,T,0);Sl(t,u,b-257),Sl(t,u+5,P-1),Sl(t,u+10,E-4),u+=14;for(var N=0;N<E;++N)Sl(t,u+3*N,L[bN[N]]);u+=3*E;for(var $=[v,S],I=0;I<2;++I)for(var U=$[I],N=0;N<U.length;++N){var q=U[N]&31;Sl(t,u,Y[q]),u+=L[q],q>15&&(Sl(t,u,U[N]>>5&127),u+=U[N]>>12)}}else z=Cte,F=md,V=Dte,B=yg;for(var N=0;N<l;++N){var X=r[N];if(X>255){var q=X>>18&31;rm(t,u,z[q+257]),u+=F[q+257],q>7&&(Sl(t,u,X>>23&31),u+=R1[q]);var te=X&31;rm(t,u,V[te]),u+=B[te],te>3&&(rm(t,u,X>>5&8191),u+=L1[te])}else rm(t,u,z[X]),u+=F[X]}return rm(t,u,z[256]),u+F[256]},Ate=new iC([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),wO=new Xs(0),_te=function(e,t,n,r,a,i){var o=i.z||e.length,l=new Xs(r+o+5*(1+Math.ceil(o/7e3))+a),c=l.subarray(r,l.length-a),d=i.l,u=(i.r||0)&7;if(t){u&&(c[0]=i.r>>3);for(var h=Ate[t-1],f=h>>13,p=h&8191,y=(1<<n)-1,g=i.p||new ai(32768),x=i.h||new ai(y+1),m=Math.ceil(n/3),v=2*m,b=function(Ue){return(e[Ue]^e[Ue+1]<<m^e[Ue+2]<<v)&y},C=new iC(25e3),S=new ai(288),P=new ai(32),D=0,N=0,M=i.i||0,L=0,T=i.w||0,E=0;M+2<o;++M){var A=b(M),O=M&32767,W=x[A];if(g[O]=W,x[A]=O,T<=M){var z=o-M;if((D>7e3||L>24576)&&(z>423||!d)){u=gE(e,c,0,C,S,P,N,L,E,M-E,u),L=D=N=0,E=M;for(var F=0;F<286;++F)S[F]=0;for(var F=0;F<30;++F)P[F]=0}var V=2,B=0,Y=p,$=O-W&32767;if(z>2&&A==b(M-$))for(var I=Math.min(f,z)-1,U=Math.min(32767,M),q=Math.min(258,z);$<=U&&--Y&&O!=W;){if(e[M+V]==e[M+V-$]){for(var X=0;X<q&&e[M+X]==e[M+X-$];++X);if(X>V){if(V=X,B=$,X>I)break;for(var te=Math.min($,X-2),ae=0,F=0;F<te;++F){var le=M-$+F&32767,me=g[le],Le=le-me&32767;Le>ae&&(ae=Le,W=le)}}}O=W,W=g[O],$+=O-W&32767}if(B){C[L++]=268435456|wN[V]<<18|pE[B];var ie=wN[V]&31,Ne=pE[B]&31;N+=R1[ie]+L1[Ne],++S[257+ie],++P[Ne],T=M+V,++D}else C[L++]=e[M],++S[e[M]]}}for(M=Math.max(M,T);M<o;++M)C[L++]=e[M],++S[e[M]];u=gE(e,c,d,C,S,P,N,L,E,M-E,u),d||(i.r=u&7|c[u/8|0]<<3,u-=7,i.h=x,i.p=g,i.i=M,i.w=T)}else{for(var M=i.w||0;M<o+d;M+=65535){var Be=M+65535;Be>=o&&(c[u/8|0]=d,Be=o),u=bO(c,u+1,e.subarray(M,Be))}i.i=o}return yO(l,0,r+oC(u)+a)},jO=function(){var e=1,t=0;return{p:function(n){for(var r=e,a=t,i=n.length|0,o=0;o!=i;){for(var l=Math.min(o+2655,i);o<l;++o)a+=r+=n[o];r=(r&65535)+15*(r>>16),a=(a&65535)+15*(a>>16)}e=r,t=a},d:function(){return e%=65521,t%=65521,(e&255)<<24|(e&65280)<<8|(t&255)<<8|t>>8}}},Mte=function(e,t,n,r,a){if(!a&&(a={l:1},t.dictionary)){var i=t.dictionary.subarray(-32768),o=new Xs(i.length+e.length);o.set(i),o.set(e,i.length),e=o,a.w=i.length}return _te(e,t.level==null?6:t.level,t.mem==null?a.l?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):20:12+t.mem,n,r,a)},NO=function(e,t,n){for(;n;++t)e[t]=n,n>>>=8},Rte=function(e,t){var n=t.level,r=n==0?0:n<6?1:n==9?3:2;if(e[0]=120,e[1]=r<<6|(t.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,t.dictionary){var a=jO();a.p(t.dictionary),NO(e,2,a.d())}},Lte=function(e,t){return((e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31)&&eo(6,"invalid zlib data"),(e[1]>>5&1)==+!t&&eo(6,"invalid zlib data: "+(e[1]&32?"need":"unexpected")+" dictionary"),(e[1]>>3&4)+2};function SN(e,t){t||(t={});var n=jO();n.p(e);var r=Mte(e,t,t.dictionary?6:2,4);return Rte(r,t),NO(r,r.length-4,n.d()),r}function Ite(e,t){return Tte(e.subarray(Lte(e,t&&t.dictionary),-4),{i:2},t&&t.out,t&&t.dictionary)}var Ote=typeof TextDecoder<"u"&&new TextDecoder,Fte=0;try{Ote.decode(wO,{stream:!0}),Fte=1}catch{}var Wt=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function c2(){Wt.console&&typeof Wt.console.log=="function"&&Wt.console.log.apply(Wt.console,arguments)}var Ln={log:c2,warn:function(e){Wt.console&&(typeof Wt.console.warn=="function"?Wt.console.warn.apply(Wt.console,arguments):c2.call(null,arguments))},error:function(e){Wt.console&&(typeof Wt.console.error=="function"?Wt.console.error.apply(Wt.console,arguments):c2(e))}};function d2(e,t,n){var r=new XMLHttpRequest;r.open("GET",e),r.responseType="blob",r.onload=function(){ru(r.response,t,n)},r.onerror=function(){Ln.error("could not download file")},r.send()}function vE(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function Lx(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var Fm,CN,ru=Wt.saveAs||((typeof window>"u"?"undefined":on(window))!=="object"||window!==Wt?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(e,t,n){var r=Wt.URL||Wt.webkitURL,a=document.createElement("a");t=t||e.name||"download",a.download=t,a.rel="noopener",typeof e=="string"?(a.href=e,a.origin!==location.origin?vE(a.href)?d2(e,t,n):Lx(a,a.target="_blank"):Lx(a)):(a.href=r.createObjectURL(e),setTimeout(function(){r.revokeObjectURL(a.href)},4e4),setTimeout(function(){Lx(a)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,n){if(t=t||e.name||"download",typeof e=="string")if(vE(e))d2(e,t,n);else{var r=document.createElement("a");r.href=e,r.target="_blank",setTimeout(function(){Lx(r)})}else navigator.msSaveOrOpenBlob(function(a,i){return i===void 0?i={autoBom:!1}:on(i)!=="object"&&(Ln.warn("Deprecated: Expected third argument to be a object"),i={autoBom:!i}),i.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob([String.fromCharCode(65279),a],{type:a.type}):a}(e,n),t)}:function(e,t,n,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof e=="string")return d2(e,t,n);var a=e.type==="application/octet-stream",i=/constructor/i.test(Wt.HTMLElement)||Wt.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||a&&i)&&(typeof FileReader>"u"?"undefined":on(FileReader))==="object"){var l=new FileReader;l.onloadend=function(){var u=l.result;u=o?u:u.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=u:location=u,r=null},l.readAsDataURL(e)}else{var c=Wt.URL||Wt.webkitURL,d=c.createObjectURL(e);r?r.location=d:location.href=d,r=null,setTimeout(function(){c.revokeObjectURL(d)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function SO(e){var t;e=e||"",this.ok=!1,e.charAt(0)=="#"&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(l){return[parseInt(l[1]),parseInt(l[2]),parseInt(l[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(l){return[parseInt(l[1],16),parseInt(l[2],16),parseInt(l[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(l){return[parseInt(l[1]+l[1],16),parseInt(l[2]+l[2],16),parseInt(l[3]+l[3],16)]}}],r=0;r<n.length;r++){var a=n[r].re,i=n[r].process,o=a.exec(e);o&&(t=i(o),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var l=this.r.toString(16),c=this.g.toString(16),d=this.b.toString(16);return l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),d.length==1&&(d="0"+d),"#"+l+c+d}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function u2(e,t){var n=e[0],r=e[1],a=e[2],i=e[3];n=Bs(n,r,a,i,t[0],7,-680876936),i=Bs(i,n,r,a,t[1],12,-389564586),a=Bs(a,i,n,r,t[2],17,606105819),r=Bs(r,a,i,n,t[3],22,-1044525330),n=Bs(n,r,a,i,t[4],7,-176418897),i=Bs(i,n,r,a,t[5],12,1200080426),a=Bs(a,i,n,r,t[6],17,-1473231341),r=Bs(r,a,i,n,t[7],22,-45705983),n=Bs(n,r,a,i,t[8],7,1770035416),i=Bs(i,n,r,a,t[9],12,-1958414417),a=Bs(a,i,n,r,t[10],17,-42063),r=Bs(r,a,i,n,t[11],22,-1990404162),n=Bs(n,r,a,i,t[12],7,1804603682),i=Bs(i,n,r,a,t[13],12,-40341101),a=Bs(a,i,n,r,t[14],17,-1502002290),n=zs(n,r=Bs(r,a,i,n,t[15],22,1236535329),a,i,t[1],5,-165796510),i=zs(i,n,r,a,t[6],9,-1069501632),a=zs(a,i,n,r,t[11],14,643717713),r=zs(r,a,i,n,t[0],20,-373897302),n=zs(n,r,a,i,t[5],5,-701558691),i=zs(i,n,r,a,t[10],9,38016083),a=zs(a,i,n,r,t[15],14,-660478335),r=zs(r,a,i,n,t[4],20,-405537848),n=zs(n,r,a,i,t[9],5,568446438),i=zs(i,n,r,a,t[14],9,-1019803690),a=zs(a,i,n,r,t[3],14,-187363961),r=zs(r,a,i,n,t[8],20,1163531501),n=zs(n,r,a,i,t[13],5,-1444681467),i=zs(i,n,r,a,t[2],9,-51403784),a=zs(a,i,n,r,t[7],14,1735328473),n=Ws(n,r=zs(r,a,i,n,t[12],20,-1926607734),a,i,t[5],4,-378558),i=Ws(i,n,r,a,t[8],11,-2022574463),a=Ws(a,i,n,r,t[11],16,1839030562),r=Ws(r,a,i,n,t[14],23,-35309556),n=Ws(n,r,a,i,t[1],4,-1530992060),i=Ws(i,n,r,a,t[4],11,1272893353),a=Ws(a,i,n,r,t[7],16,-155497632),r=Ws(r,a,i,n,t[10],23,-1094730640),n=Ws(n,r,a,i,t[13],4,681279174),i=Ws(i,n,r,a,t[0],11,-358537222),a=Ws(a,i,n,r,t[3],16,-722521979),r=Ws(r,a,i,n,t[6],23,76029189),n=Ws(n,r,a,i,t[9],4,-640364487),i=Ws(i,n,r,a,t[12],11,-421815835),a=Ws(a,i,n,r,t[15],16,530742520),n=Hs(n,r=Ws(r,a,i,n,t[2],23,-995338651),a,i,t[0],6,-198630844),i=Hs(i,n,r,a,t[7],10,1126891415),a=Hs(a,i,n,r,t[14],15,-1416354905),r=Hs(r,a,i,n,t[5],21,-57434055),n=Hs(n,r,a,i,t[12],6,1700485571),i=Hs(i,n,r,a,t[3],10,-1894986606),a=Hs(a,i,n,r,t[10],15,-1051523),r=Hs(r,a,i,n,t[1],21,-2054922799),n=Hs(n,r,a,i,t[8],6,1873313359),i=Hs(i,n,r,a,t[15],10,-30611744),a=Hs(a,i,n,r,t[6],15,-1560198380),r=Hs(r,a,i,n,t[13],21,1309151649),n=Hs(n,r,a,i,t[4],6,-145523070),i=Hs(i,n,r,a,t[11],10,-1120210379),a=Hs(a,i,n,r,t[2],15,718787259),r=Hs(r,a,i,n,t[9],21,-343485551),e[0]=Yc(n,e[0]),e[1]=Yc(r,e[1]),e[2]=Yc(a,e[2]),e[3]=Yc(i,e[3])}function I1(e,t,n,r,a,i){return t=Yc(Yc(t,e),Yc(r,i)),Yc(t<<a|t>>>32-a,n)}function Bs(e,t,n,r,a,i,o){return I1(t&n|~t&r,e,t,a,i,o)}function zs(e,t,n,r,a,i,o){return I1(t&r|n&~r,e,t,a,i,o)}function Ws(e,t,n,r,a,i,o){return I1(t^n^r,e,t,a,i,o)}function Hs(e,t,n,r,a,i,o){return I1(n^(t|~r),e,t,a,i,o)}function CO(e){var t,n=e.length,r=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)u2(r,$te(e.substring(t-64,t)));e=e.substring(t-64);var a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)a[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(a[t>>2]|=128<<(t%4<<3),t>55)for(u2(r,a),t=0;t<16;t++)a[t]=0;return a[14]=8*n,u2(r,a),r}function $te(e){var t,n=[];for(t=0;t<64;t+=4)n[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return n}Fm=Wt.atob.bind(Wt),CN=Wt.btoa.bind(Wt);var xE="0123456789abcdef".split("");function Bte(e){for(var t="",n=0;n<4;n++)t+=xE[e>>8*n+4&15]+xE[e>>8*n&15];return t}function zte(e){return String.fromCharCode((255&e)>>0,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function PN(e){return CO(e).map(zte).join("")}var Wte=function(e){for(var t=0;t<e.length;t++)e[t]=Bte(e[t]);return e.join("")}(CO("hello"))!="5d41402abc4b2a76b9719d911017c592";function Yc(e,t){if(Wte){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}return e+t&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function DN(e,t){var n,r,a,i;if(e!==n){for(var o=(a=e,i=1+(256/e.length>>0),new Array(i+1).join(a)),l=[],c=0;c<256;c++)l[c]=c;var d=0;for(c=0;c<256;c++){var u=l[c];d=(d+u+o.charCodeAt(c))%256,l[c]=l[d],l[d]=u}n=e,r=l}else l=r;var h=t.length,f=0,p=0,y="";for(c=0;c<h;c++)p=(p+(u=l[f=(f+1)%256]))%256,l[f]=l[p],l[p]=u,o=l[(l[f]+l[p])%256],y+=String.fromCharCode(t.charCodeAt(c)^o);return y}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var yE={print:4,modify:8,copy:16,"annot-forms":32};function qh(e,t,n,r){this.v=1,this.r=2;var a=192;e.forEach(function(l){if(yE.perm!==void 0)throw new Error("Invalid permission: "+l);a+=yE[l]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var i=(t+this.padding).substr(0,32),o=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(i,o),this.P=-(1+(255^a)),this.encryptionKey=PN(i+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=DN(this.encryptionKey,this.padding)}function Vh(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",n=e.length,r=0;r<n;r++){var a=e.charCodeAt(r);a<33||a===35||a===37||a===40||a===41||a===47||a===60||a===62||a===91||a===93||a===123||a===125||a>126?t+="#"+("0"+a.toString(16)).slice(-2):t+=e[r]}return t}function bE(e){if(on(e)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(n,r,a){if(a=a||!1,typeof n!="string"||typeof r!="function"||typeof a!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(n)||(t[n]={});var i=Math.random().toString(35);return t[n][i]=[r,!!a],i},this.unsubscribe=function(n){for(var r in t)if(t[r][n])return delete t[r][n],Object.keys(t[r]).length===0&&delete t[r],!0;return!1},this.publish=function(n){if(t.hasOwnProperty(n)){var r=Array.prototype.slice.call(arguments,1),a=[];for(var i in t[n]){var o=t[n][i];try{o[0].apply(e,r)}catch(l){Wt.console&&Ln.error("jsPDF PubSub Error",l.message,l)}o[1]&&a.push(i)}a.length&&a.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function bg(e){if(!(this instanceof bg))return new bg(e);var t="opacity,stroke-opacity".split(",");for(var n in e)e.hasOwnProperty(n)&&t.indexOf(n)>=0&&(this[n]=e[n]);this.id="",this.objectNumber=-1}function PO(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function Wc(e,t,n,r,a){if(!(this instanceof Wc))return new Wc(e,t,n,r,a);this.type=e==="axial"?2:3,this.coords=t,this.colors=n,PO.call(this,r,a)}function uu(e,t,n,r,a){if(!(this instanceof uu))return new uu(e,t,n,r,a);this.boundingBox=e,this.xStep=t,this.yStep=n,this.stream="",this.cloneIndex=0,PO.call(this,r,a)}function Ot(e){var t,n=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],a=arguments[2],i=arguments[3],o=[],l=1,c=16,d="S",u=null;on(e=e||{})==="object"&&(n=e.orientation,r=e.unit||r,a=e.format||a,i=e.compress||e.compressPdf||i,(u=e.encryption||null)!==null&&(u.userPassword=u.userPassword||"",u.ownerPassword=u.ownerPassword||"",u.userPermissions=u.userPermissions||[]),l=typeof e.userUnit=="number"?Math.abs(e.userUnit):1,e.precision!==void 0&&(t=e.precision),e.floatPrecision!==void 0&&(c=e.floatPrecision),d=e.defaultPathOperation||"S"),o=e.filters||(i===!0?["FlateEncode"]:o),r=r||"mm",n=(""+(n||"P")).toLowerCase();var h=e.putOnlyUsedFonts||!1,f={},p={internal:{},__private__:{}};p.__private__.PubSub=bE;var y="1.3",g=p.__private__.getPdfVersion=function(){return y};p.__private__.setPdfVersion=function(_){y=_};var x={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};p.__private__.getPageFormats=function(){return x};var m=p.__private__.getPageFormat=function(_){return x[_]};a=a||"a4";var v={COMPAT:"compat",ADVANCED:"advanced"},b=v.COMPAT;function C(){this.saveGraphicsState(),ue(new Rt(et,0,0,-et,0,hc()*et).toString()+" cm"),this.setFontSize(this.getFontSize()/et),d="n",b=v.ADVANCED}function S(){this.restoreGraphicsState(),d="S",b=v.COMPAT}var P=p.__private__.combineFontStyleAndFontWeight=function(_,K){if(_=="bold"&&K=="normal"||_=="bold"&&K==400||_=="normal"&&K=="italic"||_=="bold"&&K=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return K&&(_=K==400||K==="normal"?_==="italic"?"italic":"normal":K!=700&&K!=="bold"||_!=="normal"?(K==700?"bold":K)+""+_:"bold"),_};p.advancedAPI=function(_){var K=b===v.COMPAT;return K&&C.call(this),typeof _!="function"||(_(this),K&&S.call(this)),this},p.compatAPI=function(_){var K=b===v.ADVANCED;return K&&S.call(this),typeof _!="function"||(_(this),K&&C.call(this)),this},p.isAdvancedAPI=function(){return b===v.ADVANCED};var D,N=function(_){if(b!==v.ADVANCED)throw new Error(_+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},M=p.roundToPrecision=p.__private__.roundToPrecision=function(_,K){var fe=t||K;if(isNaN(_)||isNaN(fe))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return _.toFixed(fe).replace(/0+$/,"")};D=p.hpf=p.__private__.hpf=typeof c=="number"?function(_){if(isNaN(_))throw new Error("Invalid argument passed to jsPDF.hpf");return M(_,c)}:c==="smart"?function(_){if(isNaN(_))throw new Error("Invalid argument passed to jsPDF.hpf");return M(_,_>-1&&_<1?16:5)}:function(_){if(isNaN(_))throw new Error("Invalid argument passed to jsPDF.hpf");return M(_,16)};var L=p.f2=p.__private__.f2=function(_){if(isNaN(_))throw new Error("Invalid argument passed to jsPDF.f2");return M(_,2)},T=p.__private__.f3=function(_){if(isNaN(_))throw new Error("Invalid argument passed to jsPDF.f3");return M(_,3)},E=p.scale=p.__private__.scale=function(_){if(isNaN(_))throw new Error("Invalid argument passed to jsPDF.scale");return b===v.COMPAT?_*et:b===v.ADVANCED?_:void 0},A=function(_){return b===v.COMPAT?hc()-_:b===v.ADVANCED?_:void 0},O=function(_){return E(A(_))};p.__private__.setPrecision=p.setPrecision=function(_){typeof parseInt(_,10)=="number"&&(t=parseInt(_,10))};var W,z="00000000000000000000000000000000",F=p.__private__.getFileId=function(){return z},V=p.__private__.setFileId=function(_){return z=_!==void 0&&/^[a-fA-F0-9]{32}$/.test(_)?_.toUpperCase():z.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),u!==null&&(Is=new qh(u.userPermissions,u.userPassword,u.ownerPassword,z)),z};p.setFileId=function(_){return V(_),this},p.getFileId=function(){return F()};var B=p.__private__.convertDateToPDFDate=function(_){var K=_.getTimezoneOffset(),fe=K<0?"+":"-",ye=Math.floor(Math.abs(K/60)),Re=Math.abs(K%60),He=[fe,q(ye),"'",q(Re),"'"].join("");return["D:",_.getFullYear(),q(_.getMonth()+1),q(_.getDate()),q(_.getHours()),q(_.getMinutes()),q(_.getSeconds()),He].join("")},Y=p.__private__.convertPDFDateToDate=function(_){var K=parseInt(_.substr(2,4),10),fe=parseInt(_.substr(6,2),10)-1,ye=parseInt(_.substr(8,2),10),Re=parseInt(_.substr(10,2),10),He=parseInt(_.substr(12,2),10),ot=parseInt(_.substr(14,2),10);return new Date(K,fe,ye,Re,He,ot,0)},$=p.__private__.setCreationDate=function(_){var K;if(_===void 0&&(_=new Date),_ instanceof Date)K=B(_);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(_))throw new Error("Invalid argument passed to jsPDF.setCreationDate");K=_}return W=K},I=p.__private__.getCreationDate=function(_){var K=W;return _==="jsDate"&&(K=Y(W)),K};p.setCreationDate=function(_){return $(_),this},p.getCreationDate=function(_){return I(_)};var U,q=p.__private__.padd2=function(_){return("0"+parseInt(_)).slice(-2)},X=p.__private__.padd2Hex=function(_){return("00"+(_=_.toString())).substr(_.length)},te=0,ae=[],le=[],me=0,Le=[],ie=[],Ne=!1,Be=le,Ue=function(){te=0,me=0,le=[],ae=[],Le=[],fi=cr(),Ca=cr()};p.__private__.setCustomOutputDestination=function(_){Ne=!0,Be=_};var _e=function(_){Ne||(Be=_)};p.__private__.resetCustomOutputDestination=function(){Ne=!1,Be=le};var ue=p.__private__.out=function(_){return _=_.toString(),me+=_.length+1,Be.push(_),Be},wt=p.__private__.write=function(_){return ue(arguments.length===1?_.toString():Array.prototype.join.call(arguments," "))},gt=p.__private__.getArrayBuffer=function(_){for(var K=_.length,fe=new ArrayBuffer(K),ye=new Uint8Array(fe);K--;)ye[K]=_.charCodeAt(K);return fe},ve=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];p.__private__.getStandardFonts=function(){return ve};var we=e.fontSize||16;p.__private__.setFontSize=p.setFontSize=function(_){return we=b===v.ADVANCED?_/et:_,this};var Se,De=p.__private__.getFontSize=p.getFontSize=function(){return b===v.COMPAT?we:we*et},Ie=e.R2L||!1;p.__private__.setR2L=p.setR2L=function(_){return Ie=_,this},p.__private__.getR2L=p.getR2L=function(){return Ie};var oe,Ee=p.__private__.setZoomMode=function(_){var K=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(_))Se=_;else if(isNaN(_)){if(K.indexOf(_)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+_+'" is not recognized.');Se=_}else Se=parseInt(_,10)};p.__private__.getZoomMode=function(){return Se};var G,ge=p.__private__.setPageMode=function(_){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(_)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+_+'" is not recognized.');oe=_};p.__private__.getPageMode=function(){return oe};var Pe=p.__private__.setLayoutMode=function(_){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(_)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+_+'" is not recognized.');G=_};p.__private__.getLayoutMode=function(){return G},p.__private__.setDisplayMode=p.setDisplayMode=function(_,K,fe){return Ee(_),Pe(K),ge(fe),this};var Ve={title:"",subject:"",author:"",keywords:"",creator:""};p.__private__.getDocumentProperty=function(_){if(Object.keys(Ve).indexOf(_)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Ve[_]},p.__private__.getDocumentProperties=function(){return Ve},p.__private__.setDocumentProperties=p.setProperties=p.setDocumentProperties=function(_){for(var K in Ve)Ve.hasOwnProperty(K)&&_[K]&&(Ve[K]=_[K]);return this},p.__private__.setDocumentProperty=function(_,K){if(Object.keys(Ve).indexOf(_)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Ve[_]=K};var pt,et,Zt,Ze,jt,ct={},yt={},Yt=[],At={},On={},mn={},Bt={},Hn=null,It=0,Mt=[],nn=new bE(p),Ye=e.hotfixes||[],dt={},sn={},Xr=[],Rt=function _(K,fe,ye,Re,He,ot){if(!(this instanceof _))return new _(K,fe,ye,Re,He,ot);isNaN(K)&&(K=1),isNaN(fe)&&(fe=0),isNaN(ye)&&(ye=0),isNaN(Re)&&(Re=1),isNaN(He)&&(He=0),isNaN(ot)&&(ot=0),this._matrix=[K,fe,ye,Re,He,ot]};Object.defineProperty(Rt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(_){this._matrix[0]=_}}),Object.defineProperty(Rt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(_){this._matrix[1]=_}}),Object.defineProperty(Rt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(_){this._matrix[2]=_}}),Object.defineProperty(Rt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(_){this._matrix[3]=_}}),Object.defineProperty(Rt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(_){this._matrix[4]=_}}),Object.defineProperty(Rt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(_){this._matrix[5]=_}}),Object.defineProperty(Rt.prototype,"a",{get:function(){return this._matrix[0]},set:function(_){this._matrix[0]=_}}),Object.defineProperty(Rt.prototype,"b",{get:function(){return this._matrix[1]},set:function(_){this._matrix[1]=_}}),Object.defineProperty(Rt.prototype,"c",{get:function(){return this._matrix[2]},set:function(_){this._matrix[2]=_}}),Object.defineProperty(Rt.prototype,"d",{get:function(){return this._matrix[3]},set:function(_){this._matrix[3]=_}}),Object.defineProperty(Rt.prototype,"e",{get:function(){return this._matrix[4]},set:function(_){this._matrix[4]=_}}),Object.defineProperty(Rt.prototype,"f",{get:function(){return this._matrix[5]},set:function(_){this._matrix[5]=_}}),Object.defineProperty(Rt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Rt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Rt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Rt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Rt.prototype.join=function(_){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(D).join(_)},Rt.prototype.multiply=function(_){var K=_.sx*this.sx+_.shy*this.shx,fe=_.sx*this.shy+_.shy*this.sy,ye=_.shx*this.sx+_.sy*this.shx,Re=_.shx*this.shy+_.sy*this.sy,He=_.tx*this.sx+_.ty*this.shx+this.tx,ot=_.tx*this.shy+_.ty*this.sy+this.ty;return new Rt(K,fe,ye,Re,He,ot)},Rt.prototype.decompose=function(){var _=this.sx,K=this.shy,fe=this.shx,ye=this.sy,Re=this.tx,He=this.ty,ot=Math.sqrt(_*_+K*K),Nt=(_/=ot)*fe+(K/=ot)*ye;fe-=_*Nt,ye-=K*Nt;var Lt=Math.sqrt(fe*fe+ye*ye);return Nt/=Lt,_*(ye/=Lt)<K*(fe/=Lt)&&(_=-_,K=-K,Nt=-Nt,ot=-ot),{scale:new Rt(ot,0,0,Lt,0,0),translate:new Rt(1,0,0,1,Re,He),rotate:new Rt(_,K,-K,_,0,0),skew:new Rt(1,0,Nt,1,0,0)}},Rt.prototype.toString=function(_){return this.join(" ")},Rt.prototype.inversed=function(){var _=this.sx,K=this.shy,fe=this.shx,ye=this.sy,Re=this.tx,He=this.ty,ot=1/(_*ye-K*fe),Nt=ye*ot,Lt=-K*ot,Gt=-fe*ot,Vt=_*ot;return new Rt(Nt,Lt,Gt,Vt,-Nt*Re-Gt*He,-Lt*Re-Vt*He)},Rt.prototype.applyToPoint=function(_){var K=_.x*this.sx+_.y*this.shx+this.tx,fe=_.x*this.shy+_.y*this.sy+this.ty;return new mh(K,fe)},Rt.prototype.applyToRectangle=function(_){var K=this.applyToPoint(_),fe=this.applyToPoint(new mh(_.x+_.w,_.y+_.h));return new jp(K.x,K.y,fe.x-K.x,fe.y-K.y)},Rt.prototype.clone=function(){var _=this.sx,K=this.shy,fe=this.shx,ye=this.sy,Re=this.tx,He=this.ty;return new Rt(_,K,fe,ye,Re,He)},p.Matrix=Rt;var Sa=p.matrixMult=function(_,K){return K.multiply(_)},Ua=new Rt(1,0,0,1,0,0);p.unitMatrix=p.identityMatrix=Ua;var js=function(_,K){if(!On[_]){var fe=(K instanceof Wc?"Sh":"P")+(Object.keys(At).length+1).toString(10);K.id=fe,On[_]=fe,At[fe]=K,nn.publish("addPattern",K)}};p.ShadingPattern=Wc,p.TilingPattern=uu,p.addShadingPattern=function(_,K){return N("addShadingPattern()"),js(_,K),this},p.beginTilingPattern=function(_){N("beginTilingPattern()"),Dv(_.boundingBox[0],_.boundingBox[1],_.boundingBox[2]-_.boundingBox[0],_.boundingBox[3]-_.boundingBox[1],_.matrix)},p.endTilingPattern=function(_,K){N("endTilingPattern()"),K.stream=ie[U].join(`
`),js(_,K),nn.publish("endTilingPattern",K),Xr.pop().restore()};var Sr=p.__private__.newObject=function(){var _=cr();return Ms(_,!0),_},cr=p.__private__.newObjectDeferred=function(){return te++,ae[te]=function(){return me},te},Ms=function(_,K){return K=typeof K=="boolean"&&K,ae[_]=me,K&&ue(_+" 0 obj"),_},ol=p.__private__.newAdditionalObject=function(){var _={objId:cr(),content:""};return Le.push(_),_},fi=cr(),Ca=cr(),Pa=p.__private__.decodeColorString=function(_){var K=_.split(" ");if(K.length!==2||K[1]!=="g"&&K[1]!=="G")K.length===5&&(K[4]==="k"||K[4]==="K")&&(K=[(1-K[0])*(1-K[3]),(1-K[1])*(1-K[3]),(1-K[2])*(1-K[3]),"r"]);else{var fe=parseFloat(K[0]);K=[fe,fe,fe,"r"]}for(var ye="#",Re=0;Re<3;Re++)ye+=("0"+Math.floor(255*parseFloat(K[Re])).toString(16)).slice(-2);return ye},Da=p.__private__.encodeColorString=function(_){var K;typeof _=="string"&&(_={ch1:_});var fe=_.ch1,ye=_.ch2,Re=_.ch3,He=_.ch4,ot=_.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof fe=="string"&&fe.charAt(0)!=="#"){var Nt=new SO(fe);if(Nt.ok)fe=Nt.toHex();else if(!/^\d*\.?\d*$/.test(fe))throw new Error('Invalid color "'+fe+'" passed to jsPDF.encodeColorString.')}if(typeof fe=="string"&&/^#[0-9A-Fa-f]{3}$/.test(fe)&&(fe="#"+fe[1]+fe[1]+fe[2]+fe[2]+fe[3]+fe[3]),typeof fe=="string"&&/^#[0-9A-Fa-f]{6}$/.test(fe)){var Lt=parseInt(fe.substr(1),16);fe=Lt>>16&255,ye=Lt>>8&255,Re=255&Lt}if(ye===void 0||He===void 0&&fe===ye&&ye===Re)if(typeof fe=="string")K=fe+" "+ot[0];else switch(_.precision){case 2:K=L(fe/255)+" "+ot[0];break;case 3:default:K=T(fe/255)+" "+ot[0]}else if(He===void 0||on(He)==="object"){if(He&&!isNaN(He.a)&&He.a===0)return K=["1.","1.","1.",ot[1]].join(" ");if(typeof fe=="string")K=[fe,ye,Re,ot[1]].join(" ");else switch(_.precision){case 2:K=[L(fe/255),L(ye/255),L(Re/255),ot[1]].join(" ");break;default:case 3:K=[T(fe/255),T(ye/255),T(Re/255),ot[1]].join(" ")}}else if(typeof fe=="string")K=[fe,ye,Re,He,ot[2]].join(" ");else switch(_.precision){case 2:K=[L(fe),L(ye),L(Re),L(He),ot[2]].join(" ");break;case 3:default:K=[T(fe),T(ye),T(Re),T(He),ot[2]].join(" ")}return K},Ya=p.__private__.getFilters=function(){return o},sa=p.__private__.putStream=function(_){var K=(_=_||{}).data||"",fe=_.filters||Ya(),ye=_.alreadyAppliedFilters||[],Re=_.addLength1||!1,He=K.length,ot=_.objectId,Nt=function(Os){return Os};if(u!==null&&ot===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");u!==null&&(Nt=Is.encryptor(ot,0));var Lt={};fe===!0&&(fe=["FlateEncode"]);var Gt=_.additionalKeyValues||[],Vt=(Lt=Ot.API.processDataByFilters!==void 0?Ot.API.processDataByFilters(K,fe):{data:K,reverseChain:[]}).reverseChain+(Array.isArray(ye)?ye.join(" "):ye.toString());if(Lt.data.length!==0&&(Gt.push({key:"Length",value:Lt.data.length}),Re===!0&&Gt.push({key:"Length1",value:He})),Vt.length!=0)if(Vt.split("/").length-1==1)Gt.push({key:"Filter",value:Vt});else{Gt.push({key:"Filter",value:"["+Vt+"]"});for(var hn=0;hn<Gt.length;hn+=1)if(Gt[hn].key==="DecodeParms"){for(var hr=[],Cr=0;Cr<Lt.reverseChain.split("/").length-1;Cr+=1)hr.push("null");hr.push(Gt[hn].value),Gt[hn].value="["+hr.join(" ")+"]"}}ue("<<");for(var Ur=0;Ur<Gt.length;Ur++)ue("/"+Gt[Ur].key+" "+Gt[Ur].value);ue(">>"),Lt.data.length!==0&&(ue("stream"),ue(Nt(Lt.data)),ue("endstream"))},Ga=p.__private__.putPage=function(_){var K=_.number,fe=_.data,ye=_.objId,Re=_.contentsObjId;Ms(ye,!0),ue("<</Type /Page"),ue("/Parent "+_.rootDictionaryObjId+" 0 R"),ue("/Resources "+_.resourceDictionaryObjId+" 0 R"),ue("/MediaBox ["+parseFloat(D(_.mediaBox.bottomLeftX))+" "+parseFloat(D(_.mediaBox.bottomLeftY))+" "+D(_.mediaBox.topRightX)+" "+D(_.mediaBox.topRightY)+"]"),_.cropBox!==null&&ue("/CropBox ["+D(_.cropBox.bottomLeftX)+" "+D(_.cropBox.bottomLeftY)+" "+D(_.cropBox.topRightX)+" "+D(_.cropBox.topRightY)+"]"),_.bleedBox!==null&&ue("/BleedBox ["+D(_.bleedBox.bottomLeftX)+" "+D(_.bleedBox.bottomLeftY)+" "+D(_.bleedBox.topRightX)+" "+D(_.bleedBox.topRightY)+"]"),_.trimBox!==null&&ue("/TrimBox ["+D(_.trimBox.bottomLeftX)+" "+D(_.trimBox.bottomLeftY)+" "+D(_.trimBox.topRightX)+" "+D(_.trimBox.topRightY)+"]"),_.artBox!==null&&ue("/ArtBox ["+D(_.artBox.bottomLeftX)+" "+D(_.artBox.bottomLeftY)+" "+D(_.artBox.topRightX)+" "+D(_.artBox.topRightY)+"]"),typeof _.userUnit=="number"&&_.userUnit!==1&&ue("/UserUnit "+_.userUnit),nn.publish("putPage",{objId:ye,pageContext:Mt[K],pageNumber:K,page:fe}),ue("/Contents "+Re+" 0 R"),ue(">>"),ue("endobj");var He=fe.join(`
`);return b===v.ADVANCED&&(He+=`
Q`),Ms(Re,!0),sa({data:He,filters:Ya(),objectId:Re}),ue("endobj"),ye},bo=p.__private__.putPages=function(){var _,K,fe=[];for(_=1;_<=It;_++)Mt[_].objId=cr(),Mt[_].contentsObjId=cr();for(_=1;_<=It;_++)fe.push(Ga({number:_,data:ie[_],objId:Mt[_].objId,contentsObjId:Mt[_].contentsObjId,mediaBox:Mt[_].mediaBox,cropBox:Mt[_].cropBox,bleedBox:Mt[_].bleedBox,trimBox:Mt[_].trimBox,artBox:Mt[_].artBox,userUnit:Mt[_].userUnit,rootDictionaryObjId:fi,resourceDictionaryObjId:Ca}));Ms(fi,!0),ue("<</Type /Pages");var ye="/Kids [";for(K=0;K<It;K++)ye+=fe[K]+" 0 R ";ue(ye+"]"),ue("/Count "+It),ue(">>"),ue("endobj"),nn.publish("postPutPages")},ll=function(_){nn.publish("putFont",{font:_,out:ue,newObject:Sr,putStream:sa}),_.isAlreadyPutted!==!0&&(_.objectNumber=Sr(),ue("<<"),ue("/Type /Font"),ue("/BaseFont /"+Vh(_.postScriptName)),ue("/Subtype /Type1"),typeof _.encoding=="string"&&ue("/Encoding /"+_.encoding),ue("/FirstChar 32"),ue("/LastChar 255"),ue(">>"),ue("endobj"))},cl=function(){for(var _ in ct)ct.hasOwnProperty(_)&&(h===!1||h===!0&&f.hasOwnProperty(_))&&ll(ct[_])},dl=function(_){_.objectNumber=Sr();var K=[];K.push({key:"Type",value:"/XObject"}),K.push({key:"Subtype",value:"/Form"}),K.push({key:"BBox",value:"["+[D(_.x),D(_.y),D(_.x+_.width),D(_.y+_.height)].join(" ")+"]"}),K.push({key:"Matrix",value:"["+_.matrix.toString()+"]"});var fe=_.pages[1].join(`
`);sa({data:fe,additionalKeyValues:K,objectId:_.objectNumber}),ue("endobj")},ul=function(){for(var _ in dt)dt.hasOwnProperty(_)&&dl(dt[_])},Id=function(_,K){var fe,ye=[],Re=1/(K-1);for(fe=0;fe<1;fe+=Re)ye.push(fe);if(ye.push(1),_[0].offset!=0){var He={offset:0,color:_[0].color};_.unshift(He)}if(_[_.length-1].offset!=1){var ot={offset:1,color:_[_.length-1].color};_.push(ot)}for(var Nt="",Lt=0,Gt=0;Gt<ye.length;Gt++){for(fe=ye[Gt];fe>_[Lt+1].offset;)Lt++;var Vt=_[Lt].offset,hn=(fe-Vt)/(_[Lt+1].offset-Vt),hr=_[Lt].color,Cr=_[Lt+1].color;Nt+=X(Math.round((1-hn)*hr[0]+hn*Cr[0]).toString(16))+X(Math.round((1-hn)*hr[1]+hn*Cr[1]).toString(16))+X(Math.round((1-hn)*hr[2]+hn*Cr[2]).toString(16))}return Nt.trim()},oh=function(_,K){K||(K=21);var fe=Sr(),ye=Id(_.colors,K),Re=[];Re.push({key:"FunctionType",value:"0"}),Re.push({key:"Domain",value:"[0.0 1.0]"}),Re.push({key:"Size",value:"["+K+"]"}),Re.push({key:"BitsPerSample",value:"8"}),Re.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Re.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),sa({data:ye,additionalKeyValues:Re,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:fe}),ue("endobj"),_.objectNumber=Sr(),ue("<< /ShadingType "+_.type),ue("/ColorSpace /DeviceRGB");var He="/Coords ["+D(parseFloat(_.coords[0]))+" "+D(parseFloat(_.coords[1]))+" ";_.type===2?He+=D(parseFloat(_.coords[2]))+" "+D(parseFloat(_.coords[3])):He+=D(parseFloat(_.coords[2]))+" "+D(parseFloat(_.coords[3]))+" "+D(parseFloat(_.coords[4]))+" "+D(parseFloat(_.coords[5])),ue(He+="]"),_.matrix&&ue("/Matrix ["+_.matrix.toString()+"]"),ue("/Function "+fe+" 0 R"),ue("/Extend [true true]"),ue(">>"),ue("endobj")},lh=function(_,K){var fe=cr(),ye=Sr();K.push({resourcesOid:fe,objectOid:ye}),_.objectNumber=ye;var Re=[];Re.push({key:"Type",value:"/Pattern"}),Re.push({key:"PatternType",value:"1"}),Re.push({key:"PaintType",value:"1"}),Re.push({key:"TilingType",value:"1"}),Re.push({key:"BBox",value:"["+_.boundingBox.map(D).join(" ")+"]"}),Re.push({key:"XStep",value:D(_.xStep)}),Re.push({key:"YStep",value:D(_.yStep)}),Re.push({key:"Resources",value:fe+" 0 R"}),_.matrix&&Re.push({key:"Matrix",value:"["+_.matrix.toString()+"]"}),sa({data:_.stream,additionalKeyValues:Re,objectId:_.objectNumber}),ue("endobj")},hl=function(_){var K;for(K in At)At.hasOwnProperty(K)&&(At[K]instanceof Wc?oh(At[K]):At[K]instanceof uu&&lh(At[K],_))},Od=function(_){for(var K in _.objectNumber=Sr(),ue("<<"),_)switch(K){case"opacity":ue("/ca "+L(_[K]));break;case"stroke-opacity":ue("/CA "+L(_[K]))}ue(">>"),ue("endobj")},ch=function(){var _;for(_ in mn)mn.hasOwnProperty(_)&&Od(mn[_])},lc=function(){for(var _ in ue("/XObject <<"),dt)dt.hasOwnProperty(_)&&dt[_].objectNumber>=0&&ue("/"+_+" "+dt[_].objectNumber+" 0 R");nn.publish("putXobjectDict"),ue(">>")},dh=function(){Is.oid=Sr(),ue("<<"),ue("/Filter /Standard"),ue("/V "+Is.v),ue("/R "+Is.r),ue("/U <"+Is.toHexString(Is.U)+">"),ue("/O <"+Is.toHexString(Is.O)+">"),ue("/P "+Is.P),ue(">>"),ue("endobj")},Fd=function(){for(var _ in ue("/Font <<"),ct)ct.hasOwnProperty(_)&&(h===!1||h===!0&&f.hasOwnProperty(_))&&ue("/"+_+" "+ct[_].objectNumber+" 0 R");ue(">>")},ke=function(){if(Object.keys(At).length>0){for(var _ in ue("/Shading <<"),At)At.hasOwnProperty(_)&&At[_]instanceof Wc&&At[_].objectNumber>=0&&ue("/"+_+" "+At[_].objectNumber+" 0 R");nn.publish("putShadingPatternDict"),ue(">>")}},mt=function(_){if(Object.keys(At).length>0){for(var K in ue("/Pattern <<"),At)At.hasOwnProperty(K)&&At[K]instanceof p.TilingPattern&&At[K].objectNumber>=0&&At[K].objectNumber<_&&ue("/"+K+" "+At[K].objectNumber+" 0 R");nn.publish("putTilingPatternDict"),ue(">>")}},xt=function(){if(Object.keys(mn).length>0){var _;for(_ in ue("/ExtGState <<"),mn)mn.hasOwnProperty(_)&&mn[_].objectNumber>=0&&ue("/"+_+" "+mn[_].objectNumber+" 0 R");nn.publish("putGStateDict"),ue(">>")}},it=function(_){Ms(_.resourcesOid,!0),ue("<<"),ue("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),Fd(),ke(),mt(_.objectOid),xt(),lc(),ue(">>"),ue("endobj")},_t=function(){var _=[];cl(),ch(),ul(),hl(_),nn.publish("putResources"),_.forEach(it),it({resourcesOid:Ca,objectOid:Number.MAX_SAFE_INTEGER}),nn.publish("postPutResources")},Xt=function(){nn.publish("putAdditionalObjects");for(var _=0;_<Le.length;_++){var K=Le[_];Ms(K.objId,!0),ue(K.content),ue("endobj")}nn.publish("postPutAdditionalObjects")},vn=function(_){yt[_.fontName]=yt[_.fontName]||{},yt[_.fontName][_.fontStyle]=_.id},os=function(_,K,fe,ye,Re){var He={id:"F"+(Object.keys(ct).length+1).toString(10),postScriptName:_,fontName:K,fontStyle:fe,encoding:ye,isStandardFont:Re||!1,metadata:{}};return nn.publish("addFont",{font:He,instance:this}),ct[He.id]=He,vn(He),He.id},aa=function(_){for(var K=0,fe=ve.length;K<fe;K++){var ye=os.call(this,_[K][0],_[K][1],_[K][2],ve[K][3],!0);h===!1&&(f[ye]=!0);var Re=_[K][0].split("-");vn({id:ye,fontName:Re[0],fontStyle:Re[1]||""})}nn.publish("addFonts",{fonts:ct,dictionary:yt})},dr=function(_){return _.foo=function(){try{return _.apply(this,arguments)}catch(ye){var K=ye.stack||"";~K.indexOf(" at ")&&(K=K.split(" at ")[1]);var fe="Error in function "+K.split(`
`)[0].split("<")[0]+": "+ye.message;if(!Wt.console)throw new Error(fe);Wt.console.error(fe,ye),Wt.alert&&alert(fe)}},_.foo.bar=_,_.foo},ls=function(_,K){var fe,ye,Re,He,ot,Nt,Lt,Gt,Vt;if(Re=(K=K||{}).sourceEncoding||"Unicode",ot=K.outputEncoding,(K.autoencode||ot)&&ct[pt].metadata&&ct[pt].metadata[Re]&&ct[pt].metadata[Re].encoding&&(He=ct[pt].metadata[Re].encoding,!ot&&ct[pt].encoding&&(ot=ct[pt].encoding),!ot&&He.codePages&&(ot=He.codePages[0]),typeof ot=="string"&&(ot=He[ot]),ot)){for(Lt=!1,Nt=[],fe=0,ye=_.length;fe<ye;fe++)(Gt=ot[_.charCodeAt(fe)])?Nt.push(String.fromCharCode(Gt)):Nt.push(_[fe]),Nt[fe].charCodeAt(0)>>8&&(Lt=!0);_=Nt.join("")}for(fe=_.length;Lt===void 0&&fe!==0;)_.charCodeAt(fe-1)>>8&&(Lt=!0),fe--;if(!Lt)return _;for(Nt=K.noBOM?[]:[254,255],fe=0,ye=_.length;fe<ye;fe++){if((Vt=(Gt=_.charCodeAt(fe))>>8)>>8)throw new Error("Character at position "+fe+" of string '"+_+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Nt.push(Vt),Nt.push(Gt-(Vt<<8))}return String.fromCharCode.apply(void 0,Nt)},qn=p.__private__.pdfEscape=p.pdfEscape=function(_,K){return ls(_,K).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},cs=p.__private__.beginPage=function(_){ie[++It]=[],Mt[It]={objId:0,contentsObjId:0,userUnit:Number(l),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(_[0]),topRightY:Number(_[1])}},Ls(It),_e(ie[U])},Rs=function(_,K){var fe,ye,Re;switch(n=K||n,typeof _=="string"&&(fe=m(_.toLowerCase()),Array.isArray(fe)&&(ye=fe[0],Re=fe[1])),Array.isArray(_)&&(ye=_[0]*et,Re=_[1]*et),isNaN(ye)&&(ye=a[0],Re=a[1]),(ye>14400||Re>14400)&&(Ln.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),ye=Math.min(14400,ye),Re=Math.min(14400,Re)),a=[ye,Re],n.substr(0,1)){case"l":Re>ye&&(a=[Re,ye]);break;case"p":ye>Re&&(a=[Re,ye])}cs(a),jv(xp),ue(qi),bp!==0&&ue(bp+" J"),wp!==0&&ue(wp+" j"),nn.publish("addPage",{pageNumber:It})},Qr=function(_){_>0&&_<=It&&(ie.splice(_,1),Mt.splice(_,1),It--,U>It&&(U=It),this.setPage(U))},Ls=function(_){_>0&&_<=It&&(U=_)},Ja=p.__private__.getNumberOfPages=p.getNumberOfPages=function(){return ie.length-1},wo=function(_,K,fe){var ye,Re=void 0;return fe=fe||{},_=_!==void 0?_:ct[pt].fontName,K=K!==void 0?K:ct[pt].fontStyle,ye=_.toLowerCase(),yt[ye]!==void 0&&yt[ye][K]!==void 0?Re=yt[ye][K]:yt[_]!==void 0&&yt[_][K]!==void 0?Re=yt[_][K]:fe.disableWarning===!1&&Ln.warn("Unable to look up font label for font '"+_+"', '"+K+"'. Refer to getFontList() for available fonts."),Re||fe.noFallback||(Re=yt.times[K])==null&&(Re=yt.times.normal),Re},fl=p.__private__.putInfo=function(){var _=Sr(),K=function(ye){return ye};for(var fe in u!==null&&(K=Is.encryptor(_,0)),ue("<<"),ue("/Producer ("+qn(K("jsPDF "+Ot.version))+")"),Ve)Ve.hasOwnProperty(fe)&&Ve[fe]&&ue("/"+fe.substr(0,1).toUpperCase()+fe.substr(1)+" ("+qn(K(Ve[fe]))+")");ue("/CreationDate ("+qn(K(W))+")"),ue(">>"),ue("endobj")},Hi=p.__private__.putCatalog=function(_){var K=(_=_||{}).rootDictionaryObjId||fi;switch(Sr(),ue("<<"),ue("/Type /Catalog"),ue("/Pages "+K+" 0 R"),Se||(Se="fullwidth"),Se){case"fullwidth":ue("/OpenAction [3 0 R /FitH null]");break;case"fullheight":ue("/OpenAction [3 0 R /FitV null]");break;case"fullpage":ue("/OpenAction [3 0 R /Fit]");break;case"original":ue("/OpenAction [3 0 R /XYZ null null 1]");break;default:var fe=""+Se;fe.substr(fe.length-1)==="%"&&(Se=parseInt(Se)/100),typeof Se=="number"&&ue("/OpenAction [3 0 R /XYZ null null "+L(Se)+"]")}switch(G||(G="continuous"),G){case"continuous":ue("/PageLayout /OneColumn");break;case"single":ue("/PageLayout /SinglePage");break;case"two":case"twoleft":ue("/PageLayout /TwoColumnLeft");break;case"tworight":ue("/PageLayout /TwoColumnRight")}oe&&ue("/PageMode /"+oe),nn.publish("putCatalog"),ue(">>"),ue("endobj")},pl=p.__private__.putTrailer=function(){ue("trailer"),ue("<<"),ue("/Size "+(te+1)),ue("/Root "+te+" 0 R"),ue("/Info "+(te-1)+" 0 R"),u!==null&&ue("/Encrypt "+Is.oid+" 0 R"),ue("/ID [ <"+z+"> <"+z+"> ]"),ue(">>")},ml=p.__private__.putHeader=function(){ue("%PDF-"+y),ue("%ºß¬à")},ds=p.__private__.putXRef=function(){var _="0000000000";ue("xref"),ue("0 "+(te+1)),ue("0000000000 65535 f ");for(var K=1;K<=te;K++)typeof ae[K]=="function"?ue((_+ae[K]()).slice(-10)+" 00000 n "):ae[K]!==void 0?ue((_+ae[K]).slice(-10)+" 00000 n "):ue("0000000000 00000 n ")},ur=p.__private__.buildDocument=function(){Ue(),_e(le),nn.publish("buildDocument"),ml(),bo(),Xt(),_t(),u!==null&&dh(),fl(),Hi();var _=me;return ds(),pl(),ue("startxref"),ue(""+_),ue("%%EOF"),_e(ie[U]),le.join(`
`)},cc=p.__private__.getBlob=function(_){return new Blob([gt(_)],{type:"application/pdf"})},uh=p.output=p.__private__.output=dr(function(_,K){switch(typeof(K=K||{})=="string"?K={filename:K}:K.filename=K.filename||"generated.pdf",_){case void 0:return ur();case"save":p.save(K.filename);break;case"arraybuffer":return gt(ur());case"blob":return cc(ur());case"bloburi":case"bloburl":if(Wt.URL!==void 0&&typeof Wt.URL.createObjectURL=="function")return Wt.URL&&Wt.URL.createObjectURL(cc(ur()))||void 0;Ln.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var fe="",ye=ur();try{fe=CN(ye)}catch{fe=CN(unescape(encodeURIComponent(ye)))}return"data:application/pdf;filename="+K.filename+";base64,"+fe;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Wt)==="[object Window]"){var Re="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",He=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';K.pdfObjectUrl&&(Re=K.pdfObjectUrl,He="");var ot='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Re+'"'+He+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(K)+");<\/script></body></html>",Nt=Wt.open();return Nt!==null&&Nt.document.write(ot),Nt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Wt)==="[object Window]"){var Lt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(K.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+K.filename+'" width="500px" height="400px" /></body></html>',Gt=Wt.open();if(Gt!==null){Gt.document.write(Lt);var Vt=this;Gt.document.documentElement.querySelector("#pdfViewer").onload=function(){Gt.document.title=K.filename,Gt.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Vt.output("bloburl"))}}return Gt}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Wt)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var hn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",K)+'"></iframe></body></html>',hr=Wt.open();if(hr!==null&&(hr.document.write(hn),hr.document.title=K.filename),hr||typeof safari>"u")return hr;break;case"datauri":case"dataurl":return Wt.document.location.href=this.output("datauristring",K);default:return null}}),xv=function(_){return Array.isArray(Ye)===!0&&Ye.indexOf(_)>-1};switch(r){case"pt":et=1;break;case"mm":et=72/25.4;break;case"cm":et=72/2.54;break;case"in":et=72;break;case"px":et=xv("px_scaling")==1?.75:96/72;break;case"pc":case"em":et=12;break;case"ex":et=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);et=r}var Is=null;$(),V();var Db=function(_){return u!==null?Is.encryptor(_,0):function(K){return K}},yv=p.__private__.getPageInfo=p.getPageInfo=function(_){if(isNaN(_)||_%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Mt[_].objId,pageNumber:_,pageContext:Mt[_]}},qt=p.__private__.getPageInfoByObjId=function(_){if(isNaN(_)||_%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var K in Mt)if(Mt[K].objId===_)break;return yv(K)},kb=p.__private__.getCurrentPageInfo=p.getCurrentPageInfo=function(){return{objId:Mt[U].objId,pageNumber:U,pageContext:Mt[U]}};p.addPage=function(){return Rs.apply(this,arguments),this},p.setPage=function(){return Ls.apply(this,arguments),_e.call(this,ie[U]),this},p.insertPage=function(_){return this.addPage(),this.movePage(U,_),this},p.movePage=function(_,K){var fe,ye;if(_>K){fe=ie[_],ye=Mt[_];for(var Re=_;Re>K;Re--)ie[Re]=ie[Re-1],Mt[Re]=Mt[Re-1];ie[K]=fe,Mt[K]=ye,this.setPage(K)}else if(_<K){fe=ie[_],ye=Mt[_];for(var He=_;He<K;He++)ie[He]=ie[He+1],Mt[He]=Mt[He+1];ie[K]=fe,Mt[K]=ye,this.setPage(K)}return this},p.deletePage=function(){return Qr.apply(this,arguments),this},p.__private__.text=p.text=function(_,K,fe,ye,Re){var He,ot,Nt,Lt,Gt,Vt,hn,hr,Cr,Ur=(ye=ye||{}).scope||this;if(typeof _=="number"&&typeof K=="number"&&(typeof fe=="string"||Array.isArray(fe))){var Os=fe;fe=K,K=_,_=Os}if(arguments[3]instanceof Rt?(N("The transform parameter of text() with a Matrix value"),Cr=Re):(Nt=arguments[4],Lt=arguments[5],on(hn=arguments[3])==="object"&&hn!==null||(typeof Nt=="string"&&(Lt=Nt,Nt=null),typeof hn=="string"&&(Lt=hn,hn=null),typeof hn=="number"&&(Nt=hn,hn=null),ye={flags:hn,angle:Nt,align:Lt})),isNaN(K)||isNaN(fe)||_==null)throw new Error("Invalid arguments passed to jsPDF.text");if(_.length===0)return Ur;var us="",Vi=!1,Ka=typeof ye.lineHeightFactor=="number"?ye.lineHeightFactor:Bd,So=Ur.internal.scaleFactor;function kv(Fn){return Fn=Fn.split("	").join(Array(ye.TabLen||9).join(" ")),qn(Fn,hn)}function Pp(Fn){for(var $n,Lr=Fn.concat(),Zr=[],bl=Lr.length;bl--;)typeof($n=Lr.shift())=="string"?Zr.push($n):Array.isArray(Fn)&&($n.length===1||$n[1]===void 0&&$n[2]===void 0)?Zr.push($n[0]):Zr.push([$n[0],$n[1],$n[2]]);return Zr}function Dp(Fn,$n){var Lr;if(typeof Fn=="string")Lr=$n(Fn)[0];else if(Array.isArray(Fn)){for(var Zr,bl,Lp=Fn.concat(),Ph=[],Mv=Lp.length;Mv--;)typeof(Zr=Lp.shift())=="string"?Ph.push($n(Zr)[0]):Array.isArray(Zr)&&typeof Zr[0]=="string"&&(bl=$n(Zr[0],Zr[1],Zr[2]),Ph.push([bl[0],bl[1],bl[2]]));Lr=Ph}return Lr}var vh=!1,kp=!0;if(typeof _=="string")vh=!0;else if(Array.isArray(_)){var Ep=_.concat();ot=[];for(var xh,Ns=Ep.length;Ns--;)(typeof(xh=Ep.shift())!="string"||Array.isArray(xh)&&typeof xh[0]!="string")&&(kp=!1);vh=kp}if(vh===!1)throw new Error('Type of text must be string or Array. "'+_+'" is not recognized.');typeof _=="string"&&(_=_.match(/[\r?\n]/)?_.split(/\r\n|\r|\n/g):[_]);var yh=we/Ur.internal.scaleFactor,bh=yh*(Ka-1);switch(ye.baseline){case"bottom":fe-=bh;break;case"top":fe+=yh-bh;break;case"hanging":fe+=yh-2*bh;break;case"middle":fe+=yh/2-bh}if((Vt=ye.maxWidth||0)>0&&(typeof _=="string"?_=Ur.splitTextToSize(_,Vt):Object.prototype.toString.call(_)==="[object Array]"&&(_=_.reduce(function(Fn,$n){return Fn.concat(Ur.splitTextToSize($n,Vt))},[]))),He={text:_,x:K,y:fe,options:ye,mutex:{pdfEscape:qn,activeFontKey:pt,fonts:ct,activeFontSize:we}},nn.publish("preProcessText",He),_=He.text,Nt=(ye=He.options).angle,!(Cr instanceof Rt)&&Nt&&typeof Nt=="number"){Nt*=Math.PI/180,ye.rotationDirection===0&&(Nt=-Nt),b===v.ADVANCED&&(Nt=-Nt);var wh=Math.cos(Nt),Tp=Math.sin(Nt);Cr=new Rt(wh,Tp,-Tp,wh,0,0)}else Nt&&Nt instanceof Rt&&(Cr=Nt);b!==v.ADVANCED||Cr||(Cr=Ua),(Gt=ye.charSpace||ph)!==void 0&&(us+=D(E(Gt))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(hr=ye.horizontalScale)!==void 0&&(us+=D(100*hr)+` Tz
`),ye.lang;var ka=-1,Fb=ye.renderingMode!==void 0?ye.renderingMode:ye.stroke,Ap=Ur.internal.getCurrentPageInfo().pageContext;switch(Fb){case 0:case!1:case"fill":ka=0;break;case 1:case!0:case"stroke":ka=1;break;case 2:case"fillThenStroke":ka=2;break;case 3:case"invisible":ka=3;break;case 4:case"fillAndAddForClipping":ka=4;break;case 5:case"strokeAndAddPathForClipping":ka=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":ka=6;break;case 7:case"addToPathForClipping":ka=7}var Ev=Ap.usedRenderingMode!==void 0?Ap.usedRenderingMode:-1;ka!==-1?us+=ka+` Tr
`:Ev!==-1&&(us+=`0 Tr
`),ka!==-1&&(Ap.usedRenderingMode=ka),Lt=ye.align||"left";var pi,jh=we*Ka,Tv=Ur.internal.pageSize.getWidth(),Av=ct[pt];Gt=ye.charSpace||ph,Vt=ye.maxWidth||0,hn=Object.assign({autoencode:!0,noBOM:!0},ye.flags);var fc=[],Hd=function(Fn){return Ur.getStringUnitWidth(Fn,{font:Av,charSpace:Gt,fontSize:we,doKerning:!1})*we/So};if(Object.prototype.toString.call(_)==="[object Array]"){var Ea;ot=Pp(_),Lt!=="left"&&(pi=ot.map(Hd));var ia,pc=0;if(Lt==="right"){K-=pi[0],_=[],Ns=ot.length;for(var vl=0;vl<Ns;vl++)vl===0?(ia=No(K),Ea=gl(fe)):(ia=E(pc-pi[vl]),Ea=-jh),_.push([ot[vl],ia,Ea]),pc=pi[vl]}else if(Lt==="center"){K-=pi[0]/2,_=[],Ns=ot.length;for(var xl=0;xl<Ns;xl++)xl===0?(ia=No(K),Ea=gl(fe)):(ia=E((pc-pi[xl])/2),Ea=-jh),_.push([ot[xl],ia,Ea]),pc=pi[xl]}else if(Lt==="left"){_=[],Ns=ot.length;for(var Nh=0;Nh<Ns;Nh++)_.push(ot[Nh])}else if(Lt==="justify"&&Av.encoding==="Identity-H"){_=[],Ns=ot.length,Vt=Vt!==0?Vt:Tv;for(var yl=0,Rr=0;Rr<Ns;Rr++)if(Ea=Rr===0?gl(fe):-jh,ia=Rr===0?No(K):yl,Rr<Ns-1){var _p=E((Vt-pi[Rr])/(ot[Rr].split(" ").length-1)),oa=ot[Rr].split(" ");_.push([oa[0]+" ",ia,Ea]),yl=0;for(var mi=1;mi<oa.length;mi++){var Sh=(Hd(oa[mi-1]+" "+oa[mi])-Hd(oa[mi]))*So+_p;mi==oa.length-1?_.push([oa[mi],Sh,0]):_.push([oa[mi]+" ",Sh,0]),yl-=Sh}}else _.push([ot[Rr],ia,Ea]);_.push(["",yl,0])}else{if(Lt!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(_=[],Ns=ot.length,Vt=Vt!==0?Vt:Tv,Rr=0;Rr<Ns;Rr++)Ea=Rr===0?gl(fe):-jh,ia=Rr===0?No(K):0,Rr<Ns-1?fc.push(D(E((Vt-pi[Rr])/(ot[Rr].split(" ").length-1)))):fc.push(0),_.push([ot[Rr],ia,Ea])}}var _v=typeof ye.R2L=="boolean"?ye.R2L:Ie;_v===!0&&(_=Dp(_,function(Fn,$n,Lr){return[Fn.split("").reverse().join(""),$n,Lr]})),He={text:_,x:K,y:fe,options:ye,mutex:{pdfEscape:qn,activeFontKey:pt,fonts:ct,activeFontSize:we}},nn.publish("postProcessText",He),_=He.text,Vi=He.mutex.isHex||!1;var Mp=ct[pt].encoding;Mp!=="WinAnsiEncoding"&&Mp!=="StandardEncoding"||(_=Dp(_,function(Fn,$n,Lr){return[kv(Fn),$n,Lr]})),ot=Pp(_),_=[];for(var qd,Vd,mc,Ud=0,Ch=1,Yd=Array.isArray(ot[0])?Ch:Ud,gc="",Rp=function(Fn,$n,Lr){var Zr="";return Lr instanceof Rt?(Lr=typeof ye.angle=="number"?Sa(Lr,new Rt(1,0,0,1,Fn,$n)):Sa(new Rt(1,0,0,1,Fn,$n),Lr),b===v.ADVANCED&&(Lr=Sa(new Rt(1,0,0,-1,0,0),Lr)),Zr=Lr.join(" ")+` Tm
`):Zr=D(Fn)+" "+D($n)+` Td
`,Zr},gi=0;gi<ot.length;gi++){switch(gc="",Yd){case Ch:mc=(Vi?"<":"(")+ot[gi][0]+(Vi?">":")"),qd=parseFloat(ot[gi][1]),Vd=parseFloat(ot[gi][2]);break;case Ud:mc=(Vi?"<":"(")+ot[gi]+(Vi?">":")"),qd=No(K),Vd=gl(fe)}fc!==void 0&&fc[gi]!==void 0&&(gc=fc[gi]+` Tw
`),gi===0?_.push(gc+Rp(qd,Vd,Cr)+mc):Yd===Ud?_.push(gc+mc):Yd===Ch&&_.push(gc+Rp(qd,Vd,Cr)+mc)}_=Yd===Ud?_.join(` Tj
T* `):_.join(` Tj
`),_+=` Tj
`;var vi=`BT
/`;return vi+=pt+" "+we+` Tf
`,vi+=D(we*Ka)+` TL
`,vi+=zd+`
`,vi+=us,vi+=_,ue(vi+="ET"),f[pt]=!0,Ur};var Eb=p.__private__.clip=p.clip=function(_){return ue(_==="evenodd"?"W*":"W"),this};p.clipEvenOdd=function(){return Eb("evenodd")},p.__private__.discardPath=p.discardPath=function(){return ue("n"),this};var jo=p.__private__.isValidStyle=function(_){var K=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(_)!==-1&&(K=!0),K};p.__private__.setDefaultPathOperation=p.setDefaultPathOperation=function(_){return jo(_)&&(d=_),this};var bv=p.__private__.getStyle=p.getStyle=function(_){var K=d;switch(_){case"D":case"S":K="S";break;case"F":K="f";break;case"FD":case"DF":K="B";break;case"f":case"f*":case"B":case"B*":K=_}return K},wv=p.close=function(){return ue("h"),this};p.stroke=function(){return ue("S"),this},p.fill=function(_){return hh("f",_),this},p.fillEvenOdd=function(_){return hh("f*",_),this},p.fillStroke=function(_){return hh("B",_),this},p.fillStrokeEvenOdd=function(_){return hh("B*",_),this};var hh=function(_,K){on(K)==="object"?Ab(K,_):ue(_)},gp=function(_){_===null||b===v.ADVANCED&&_===void 0||(_=bv(_),ue(_))};function Tb(_,K,fe,ye,Re){var He=new uu(K||this.boundingBox,fe||this.xStep,ye||this.yStep,this.gState,Re||this.matrix);He.stream=this.stream;var ot=_+"$$"+this.cloneIndex+++"$$";return js(ot,He),He}var Ab=function(_,K){var fe=On[_.key],ye=At[fe];if(ye instanceof Wc)ue("q"),ue(_b(K)),ye.gState&&p.setGState(ye.gState),ue(_.matrix.toString()+" cm"),ue("/"+fe+" sh"),ue("Q");else if(ye instanceof uu){var Re=new Rt(1,0,0,-1,0,hc());_.matrix&&(Re=Re.multiply(_.matrix||Ua),fe=Tb.call(ye,_.key,_.boundingBox,_.xStep,_.yStep,Re).id),ue("q"),ue("/Pattern cs"),ue("/"+fe+" scn"),ye.gState&&p.setGState(ye.gState),ue(K),ue("Q")}},_b=function(_){switch(_){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},vp=p.moveTo=function(_,K){return ue(D(E(_))+" "+D(O(K))+" m"),this},$d=p.lineTo=function(_,K){return ue(D(E(_))+" "+D(O(K))+" l"),this},dc=p.curveTo=function(_,K,fe,ye,Re,He){return ue([D(E(_)),D(O(K)),D(E(fe)),D(O(ye)),D(E(Re)),D(O(He)),"c"].join(" ")),this};p.__private__.line=p.line=function(_,K,fe,ye,Re){if(isNaN(_)||isNaN(K)||isNaN(fe)||isNaN(ye)||!jo(Re))throw new Error("Invalid arguments passed to jsPDF.line");return b===v.COMPAT?this.lines([[fe-_,ye-K]],_,K,[1,1],Re||"S"):this.lines([[fe-_,ye-K]],_,K,[1,1]).stroke()},p.__private__.lines=p.lines=function(_,K,fe,ye,Re,He){var ot,Nt,Lt,Gt,Vt,hn,hr,Cr,Ur,Os,us,Vi;if(typeof _=="number"&&(Vi=fe,fe=K,K=_,_=Vi),ye=ye||[1,1],He=He||!1,isNaN(K)||isNaN(fe)||!Array.isArray(_)||!Array.isArray(ye)||!jo(Re)||typeof He!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(vp(K,fe),ot=ye[0],Nt=ye[1],Gt=_.length,Os=K,us=fe,Lt=0;Lt<Gt;Lt++)(Vt=_[Lt]).length===2?(Os=Vt[0]*ot+Os,us=Vt[1]*Nt+us,$d(Os,us)):(hn=Vt[0]*ot+Os,hr=Vt[1]*Nt+us,Cr=Vt[2]*ot+Os,Ur=Vt[3]*Nt+us,Os=Vt[4]*ot+Os,us=Vt[5]*Nt+us,dc(hn,hr,Cr,Ur,Os,us));return He&&wv(),gp(Re),this},p.path=function(_){for(var K=0;K<_.length;K++){var fe=_[K],ye=fe.c;switch(fe.op){case"m":vp(ye[0],ye[1]);break;case"l":$d(ye[0],ye[1]);break;case"c":dc.apply(this,ye);break;case"h":wv()}}return this},p.__private__.rect=p.rect=function(_,K,fe,ye,Re){if(isNaN(_)||isNaN(K)||isNaN(fe)||isNaN(ye)||!jo(Re))throw new Error("Invalid arguments passed to jsPDF.rect");return b===v.COMPAT&&(ye=-ye),ue([D(E(_)),D(O(K)),D(E(fe)),D(E(ye)),"re"].join(" ")),gp(Re),this},p.__private__.triangle=p.triangle=function(_,K,fe,ye,Re,He,ot){if(isNaN(_)||isNaN(K)||isNaN(fe)||isNaN(ye)||isNaN(Re)||isNaN(He)||!jo(ot))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[fe-_,ye-K],[Re-fe,He-ye],[_-Re,K-He]],_,K,[1,1],ot,!0),this},p.__private__.roundedRect=p.roundedRect=function(_,K,fe,ye,Re,He,ot){if(isNaN(_)||isNaN(K)||isNaN(fe)||isNaN(ye)||isNaN(Re)||isNaN(He)||!jo(ot))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Nt=4/3*(Math.SQRT2-1);return Re=Math.min(Re,.5*fe),He=Math.min(He,.5*ye),this.lines([[fe-2*Re,0],[Re*Nt,0,Re,He-He*Nt,Re,He],[0,ye-2*He],[0,He*Nt,-Re*Nt,He,-Re,He],[2*Re-fe,0],[-Re*Nt,0,-Re,-He*Nt,-Re,-He],[0,2*He-ye],[0,-He*Nt,Re*Nt,-He,Re,-He]],_+Re,K,[1,1],ot,!0),this},p.__private__.ellipse=p.ellipse=function(_,K,fe,ye,Re){if(isNaN(_)||isNaN(K)||isNaN(fe)||isNaN(ye)||!jo(Re))throw new Error("Invalid arguments passed to jsPDF.ellipse");var He=4/3*(Math.SQRT2-1)*fe,ot=4/3*(Math.SQRT2-1)*ye;return vp(_+fe,K),dc(_+fe,K-ot,_+He,K-ye,_,K-ye),dc(_-He,K-ye,_-fe,K-ot,_-fe,K),dc(_-fe,K+ot,_-He,K+ye,_,K+ye),dc(_+He,K+ye,_+fe,K+ot,_+fe,K),gp(Re),this},p.__private__.circle=p.circle=function(_,K,fe,ye){if(isNaN(_)||isNaN(K)||isNaN(fe)||!jo(ye))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(_,K,fe,fe,ye)},p.setFont=function(_,K,fe){return fe&&(K=P(K,fe)),pt=wo(_,K,{disableWarning:!1}),this};var Mb=p.__private__.getFont=p.getFont=function(){return ct[wo.apply(p,arguments)]};p.__private__.getFontList=p.getFontList=function(){var _,K,fe={};for(_ in yt)if(yt.hasOwnProperty(_))for(K in fe[_]=[],yt[_])yt[_].hasOwnProperty(K)&&fe[_].push(K);return fe},p.addFont=function(_,K,fe,ye,Re){var He=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&He.indexOf(arguments[3])!==-1?Re=arguments[3]:arguments[3]&&He.indexOf(arguments[3])==-1&&(fe=P(fe,ye)),Re=Re||"Identity-H",os.call(this,_,K,fe,Re)};var Bd,xp=e.lineWidth||.200025,fh=p.__private__.getLineWidth=p.getLineWidth=function(){return xp},jv=p.__private__.setLineWidth=p.setLineWidth=function(_){return xp=_,ue(D(E(_))+" w"),this};p.__private__.setLineDash=Ot.API.setLineDash=Ot.API.setLineDashPattern=function(_,K){if(_=_||[],K=K||0,isNaN(K)||!Array.isArray(_))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return _=_.map(function(fe){return D(E(fe))}).join(" "),K=D(E(K)),ue("["+_+"] "+K+" d"),this};var Nv=p.__private__.getLineHeight=p.getLineHeight=function(){return we*Bd};p.__private__.getLineHeight=p.getLineHeight=function(){return we*Bd};var Sv=p.__private__.setLineHeightFactor=p.setLineHeightFactor=function(_){return typeof(_=_||1.15)=="number"&&(Bd=_),this},Cv=p.__private__.getLineHeightFactor=p.getLineHeightFactor=function(){return Bd};Sv(e.lineHeight);var No=p.__private__.getHorizontalCoordinate=function(_){return E(_)},gl=p.__private__.getVerticalCoordinate=function(_){return b===v.ADVANCED?_:Mt[U].mediaBox.topRightY-Mt[U].mediaBox.bottomLeftY-E(_)},Rb=p.__private__.getHorizontalCoordinateString=p.getHorizontalCoordinateString=function(_){return D(No(_))},uc=p.__private__.getVerticalCoordinateString=p.getVerticalCoordinateString=function(_){return D(gl(_))},qi=e.strokeColor||"0 G";p.__private__.getStrokeColor=p.getDrawColor=function(){return Pa(qi)},p.__private__.setStrokeColor=p.setDrawColor=function(_,K,fe,ye){return qi=Da({ch1:_,ch2:K,ch3:fe,ch4:ye,pdfColorType:"draw",precision:2}),ue(qi),this};var yp=e.fillColor||"0 g";p.__private__.getFillColor=p.getFillColor=function(){return Pa(yp)},p.__private__.setFillColor=p.setFillColor=function(_,K,fe,ye){return yp=Da({ch1:_,ch2:K,ch3:fe,ch4:ye,pdfColorType:"fill",precision:2}),ue(yp),this};var zd=e.textColor||"0 g",Lb=p.__private__.getTextColor=p.getTextColor=function(){return Pa(zd)};p.__private__.setTextColor=p.setTextColor=function(_,K,fe,ye){return zd=Da({ch1:_,ch2:K,ch3:fe,ch4:ye,pdfColorType:"text",precision:3}),this};var ph=e.charSpace,Ib=p.__private__.getCharSpace=p.getCharSpace=function(){return parseFloat(ph||0)};p.__private__.setCharSpace=p.setCharSpace=function(_){if(isNaN(_))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return ph=_,this};var bp=0;p.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},p.__private__.setLineCap=p.setLineCap=function(_){var K=p.CapJoinStyles[_];if(K===void 0)throw new Error("Line cap style of '"+_+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return bp=K,ue(K+" J"),this};var wp=0;p.__private__.setLineJoin=p.setLineJoin=function(_){var K=p.CapJoinStyles[_];if(K===void 0)throw new Error("Line join style of '"+_+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return wp=K,ue(K+" j"),this},p.__private__.setLineMiterLimit=p.__private__.setMiterLimit=p.setLineMiterLimit=p.setMiterLimit=function(_){if(_=_||0,isNaN(_))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return ue(D(E(_))+" M"),this},p.GState=bg,p.setGState=function(_){(_=typeof _=="string"?mn[Bt[_]]:Pv(null,_)).equals(Hn)||(ue("/"+_.id+" gs"),Hn=_)};var Pv=function(_,K){if(!_||!Bt[_]){var fe=!1;for(var ye in mn)if(mn.hasOwnProperty(ye)&&mn[ye].equals(K)){fe=!0;break}if(fe)K=mn[ye];else{var Re="GS"+(Object.keys(mn).length+1).toString(10);mn[Re]=K,K.id=Re}return _&&(Bt[_]=K.id),nn.publish("addGState",K),K}};p.addGState=function(_,K){return Pv(_,K),this},p.saveGraphicsState=function(){return ue("q"),Yt.push({key:pt,size:we,color:zd}),this},p.restoreGraphicsState=function(){ue("Q");var _=Yt.pop();return pt=_.key,we=_.size,zd=_.color,Hn=null,this},p.setCurrentTransformationMatrix=function(_){return ue(_.toString()+" cm"),this},p.comment=function(_){return ue("#"+_),this};var mh=function(_,K){var fe=_||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return fe},set:function(He){isNaN(He)||(fe=parseFloat(He))}});var ye=K||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return ye},set:function(He){isNaN(He)||(ye=parseFloat(He))}});var Re="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Re},set:function(He){Re=He.toString()}}),this},jp=function(_,K,fe,ye){mh.call(this,_,K),this.type="rect";var Re=fe||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Re},set:function(ot){isNaN(ot)||(Re=parseFloat(ot))}});var He=ye||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return He},set:function(ot){isNaN(ot)||(He=parseFloat(ot))}}),this},Np=function(){this.page=It,this.currentPage=U,this.pages=ie.slice(0),this.pagesContext=Mt.slice(0),this.x=Zt,this.y=Ze,this.matrix=jt,this.width=Wd(U),this.height=hc(U),this.outputDestination=Be,this.id="",this.objectNumber=-1};Np.prototype.restore=function(){It=this.page,U=this.currentPage,Mt=this.pagesContext,ie=this.pages,Zt=this.x,Ze=this.y,jt=this.matrix,Sp(U,this.width),Cp(U,this.height),Be=this.outputDestination};var Dv=function(_,K,fe,ye,Re){Xr.push(new Np),It=U=0,ie=[],Zt=_,Ze=K,jt=Re,cs([fe,ye])},Ob=function(_){if(sn[_])Xr.pop().restore();else{var K=new Np,fe="Xo"+(Object.keys(dt).length+1).toString(10);K.id=fe,sn[_]=fe,dt[fe]=K,nn.publish("addFormObject",K),Xr.pop().restore()}};for(var gh in p.beginFormObject=function(_,K,fe,ye,Re){return Dv(_,K,fe,ye,Re),this},p.endFormObject=function(_){return Ob(_),this},p.doFormObject=function(_,K){var fe=dt[sn[_]];return ue("q"),ue(K.toString()+" cm"),ue("/"+fe.id+" Do"),ue("Q"),this},p.getFormObject=function(_){var K=dt[sn[_]];return{x:K.x,y:K.y,width:K.width,height:K.height,matrix:K.matrix}},p.save=function(_,K){return _=_||"generated.pdf",(K=K||{}).returnPromise=K.returnPromise||!1,K.returnPromise===!1?(ru(cc(ur()),_),typeof ru.unload=="function"&&Wt.setTimeout&&setTimeout(ru.unload,911),this):new Promise(function(fe,ye){try{var Re=ru(cc(ur()),_);typeof ru.unload=="function"&&Wt.setTimeout&&setTimeout(ru.unload,911),fe(Re)}catch(He){ye(He.message)}})},Ot.API)Ot.API.hasOwnProperty(gh)&&(gh==="events"&&Ot.API.events.length?function(_,K){var fe,ye,Re;for(Re=K.length-1;Re!==-1;Re--)fe=K[Re][0],ye=K[Re][1],_.subscribe.apply(_,[fe].concat(typeof ye=="function"?[ye]:ye))}(nn,Ot.API.events):p[gh]=Ot.API[gh]);var Wd=p.getPageWidth=function(_){return(Mt[_=_||U].mediaBox.topRightX-Mt[_].mediaBox.bottomLeftX)/et},Sp=p.setPageWidth=function(_,K){Mt[_].mediaBox.topRightX=K*et+Mt[_].mediaBox.bottomLeftX},hc=p.getPageHeight=function(_){return(Mt[_=_||U].mediaBox.topRightY-Mt[_].mediaBox.bottomLeftY)/et},Cp=p.setPageHeight=function(_,K){Mt[_].mediaBox.topRightY=K*et+Mt[_].mediaBox.bottomLeftY};return p.internal={pdfEscape:qn,getStyle:bv,getFont:Mb,getFontSize:De,getCharSpace:Ib,getTextColor:Lb,getLineHeight:Nv,getLineHeightFactor:Cv,getLineWidth:fh,write:wt,getHorizontalCoordinate:No,getVerticalCoordinate:gl,getCoordinateString:Rb,getVerticalCoordinateString:uc,collections:{},newObject:Sr,newAdditionalObject:ol,newObjectDeferred:cr,newObjectDeferredBegin:Ms,getFilters:Ya,putStream:sa,events:nn,scaleFactor:et,pageSize:{getWidth:function(){return Wd(U)},setWidth:function(_){Sp(U,_)},getHeight:function(){return hc(U)},setHeight:function(_){Cp(U,_)}},encryptionOptions:u,encryption:Is,getEncryptor:Db,output:uh,getNumberOfPages:Ja,pages:ie,out:ue,f2:L,f3:T,getPageInfo:yv,getPageInfoByObjId:qt,getCurrentPageInfo:kb,getPDFVersion:g,Point:mh,Rectangle:jp,Matrix:Rt,hasHotfix:xv},Object.defineProperty(p.internal.pageSize,"width",{get:function(){return Wd(U)},set:function(_){Sp(U,_)},enumerable:!0,configurable:!0}),Object.defineProperty(p.internal.pageSize,"height",{get:function(){return hc(U)},set:function(_){Cp(U,_)},enumerable:!0,configurable:!0}),aa.call(p,ve),pt="F1",Rs(a,n),nn.publish("initialized"),p}qh.prototype.lsbFirstWord=function(e){return String.fromCharCode(e>>0&255,e>>8&255,e>>16&255,e>>24&255)},qh.prototype.toHexString=function(e){return e.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},qh.prototype.hexToBytes=function(e){for(var t=[],n=0;n<e.length;n+=2)t.push(String.fromCharCode(parseInt(e.substr(n,2),16)));return t.join("")},qh.prototype.processOwnerPassword=function(e,t){return DN(PN(t).substr(0,5),e)},qh.prototype.encryptor=function(e,t){var n=PN(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(r){return DN(n,r)}},bg.prototype.equals=function(e){var t,n="id,objectNumber,equals";if(!e||on(e)!==on(this))return!1;var r=0;for(t in this)if(!(n.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t)||this[t]!==e[t])return!1;r++}for(t in e)e.hasOwnProperty(t)&&n.indexOf(t)<0&&r--;return r===0},Ot.API={events:[]},Ot.version="2.5.2";var Dr=Ot.API,lC=1,th=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Fh=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Ut=function(e){return e.toFixed(2)},Ec=function(e){return e.toFixed(5)};Dr.__acroform__={};var Va=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},wE=function(e){return e*lC},ko=function(e){var t=new kO,n=Tt.internal.getHeight(e)||0,r=Tt.internal.getWidth(e)||0;return t.BBox=[0,0,Number(Ut(r)),Number(Ut(n))],t},Hte=Dr.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|=1<<t},qte=Dr.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&=~(1<<t)},Vte=Dr.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return e&1<<t?1:0},Or=Dr.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return Vte(e,t-1)},Fr=Dr.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return Hte(e,t-1)},$r=Dr.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return qte(e,t-1)},Ute=Dr.__acroform__.calculateCoordinates=function(e,t){var n=t.internal.getHorizontalCoordinate,r=t.internal.getVerticalCoordinate,a=e[0],i=e[1],o=e[2],l=e[3],c={};return c.lowerLeft_X=n(a)||0,c.lowerLeft_Y=r(i+l)||0,c.upperRight_X=n(a+o)||0,c.upperRight_Y=r(i)||0,[Number(Ut(c.lowerLeft_X)),Number(Ut(c.lowerLeft_Y)),Number(Ut(c.upperRight_X)),Number(Ut(c.upperRight_Y))]},Yte=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],n=e._V||e.DV,r=kN(e,n),a=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+a+" "+Ut(r.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(r.text),t.push("ET"),t.push("Q"),t.push("EMC");var i=ko(e);return i.scope=e.scope,i.stream=t.join(`
`),i}},kN=function(e,t){var n=e.fontSize===0?e.maxFontSize:e.fontSize,r={text:"",fontSize:""},a=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");a=e.multiline?a.map(function(T){return T.split(`
`)}):a.map(function(T){return[T]});var i=n,o=Tt.internal.getHeight(e)||0;o=o<0?-o:o;var l=Tt.internal.getWidth(e)||0;l=l<0?-l:l;var c=function(T,E,A){if(T+1<a.length){var O=E+" "+a[T+1][0];return Ix(O,e,A).width<=l-4}return!1};i++;e:for(;i>0;){t="",i--;var d,u,h=Ix("3",e,i).height,f=e.multiline?o-i:(o-h)/2,p=f+=2,y=0,g=0,x=0;if(i<=0){t=`(...) Tj
`,t+="% Width of Text: "+Ix(t,e,i=12).width+", FieldWidth:"+l+`
`;break}for(var m="",v=0,b=0;b<a.length;b++)if(a.hasOwnProperty(b)){var C=!1;if(a[b].length!==1&&x!==a[b].length-1){if((h+2)*(v+2)+2>o)continue e;m+=a[b][x],C=!0,g=b,b--}else{m=(m+=a[b][x]+" ").substr(m.length-1)==" "?m.substr(0,m.length-1):m;var S=parseInt(b),P=c(S,m,i),D=b>=a.length-1;if(P&&!D){m+=" ",x=0;continue}if(P||D){if(D)g=S;else if(e.multiline&&(h+2)*(v+2)+2>o)continue e}else{if(!e.multiline||(h+2)*(v+2)+2>o)continue e;g=S}}for(var N="",M=y;M<=g;M++){var L=a[M];if(e.multiline){if(M===g){N+=L[x]+" ",x=(x+1)%L.length;continue}if(M===y){N+=L[L.length-1]+" ";continue}}N+=L[0]+" "}switch(N=N.substr(N.length-1)==" "?N.substr(0,N.length-1):N,u=Ix(N,e,i).width,e.textAlign){case"right":d=l-u-2;break;case"center":d=(l-u)/2;break;case"left":default:d=2}t+=Ut(d)+" "+Ut(p)+` Td
`,t+="("+th(N)+`) Tj
`,t+=-Ut(d)+` 0 Td
`,p=-(i+2),u=0,y=C?g:g+1,v++,m=""}break}return r.text=t,r.fontSize=i,r},Ix=function(e,t,n){var r=t.scope.internal.getFont(t.fontName,t.fontStyle),a=t.scope.getStringUnitWidth(e,{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:t.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:a}},Gte={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},Jte=function(e,t){var n={type:"reference",object:e};t.internal.getPageInfo(e.page).pageContext.annotations.find(function(r){return r.type===n.type&&r.object===n.object})===void 0&&t.internal.getPageInfo(e.page).pageContext.annotations.push(n)},Kte=function(e,t){for(var n in e)if(e.hasOwnProperty(n)){var r=n,a=e[n];t.internal.newObjectDeferredBegin(a.objId,!0),on(a)==="object"&&typeof a.putStream=="function"&&a.putStream(),delete e[r]}},Xte=function(e,t){if(t.scope=e,e.internal!==void 0&&(e.internal.acroformPlugin===void 0||e.internal.acroformPlugin.isInitialized===!1)){if(go.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(Gte)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");lC=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new EO,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){(function(n){n.internal.events.unsubscribe(n.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete n.internal.acroformPlugin.acroFormDictionaryRoot._eventID,n.internal.acroformPlugin.printedOut=!0})(e)}),e.internal.events.subscribe("buildDocument",function(){(function(n){n.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=n.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var a in r)if(r.hasOwnProperty(a)){var i=r[a];i.objId=void 0,i.hasAnnotation&&Jte(i,n)}})(e)}),e.internal.events.subscribe("putCatalog",function(){(function(n){if(n.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");n.internal.write("/AcroForm "+n.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(e)}),e.internal.events.subscribe("postPutPages",function(n){(function(r,a){var i=!r;for(var o in r||(a.internal.newObjectDeferredBegin(a.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),a.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||a.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(o)){var l=r[o],c=[],d=l.Rect;if(l.Rect&&(l.Rect=Ute(l.Rect,a)),a.internal.newObjectDeferredBegin(l.objId,!0),l.DA=Tt.createDefaultAppearanceStream(l),on(l)==="object"&&typeof l.getKeyValueListForStream=="function"&&(c=l.getKeyValueListForStream()),l.Rect=d,l.hasAppearanceStream&&!l.appearanceStreamContent){var u=Yte(l);c.push({key:"AP",value:"<</N "+u+">>"}),a.internal.acroformPlugin.xForms.push(u)}if(l.appearanceStreamContent){var h="";for(var f in l.appearanceStreamContent)if(l.appearanceStreamContent.hasOwnProperty(f)){var p=l.appearanceStreamContent[f];if(h+="/"+f+" ",h+="<<",Object.keys(p).length>=1||Array.isArray(p)){for(var o in p)if(p.hasOwnProperty(o)){var y=p[o];typeof y=="function"&&(y=y.call(a,l)),h+="/"+o+" "+y+" ",a.internal.acroformPlugin.xForms.indexOf(y)>=0||a.internal.acroformPlugin.xForms.push(y)}}else typeof(y=p)=="function"&&(y=y.call(a,l)),h+="/"+o+" "+y,a.internal.acroformPlugin.xForms.indexOf(y)>=0||a.internal.acroformPlugin.xForms.push(y);h+=">>"}c.push({key:"AP",value:`<<
`+h+">>"})}a.internal.putStream({additionalKeyValues:c,objectId:l.objId}),a.internal.out("endobj")}i&&Kte(a.internal.acroformPlugin.xForms,a)})(n,e)}),e.internal.acroformPlugin.isInitialized=!0}},DO=Dr.__acroform__.arrayToPdfArray=function(e,t,n){var r=function(o){return o};if(Array.isArray(e)){for(var a="[",i=0;i<e.length;i++)switch(i!==0&&(a+=" "),on(e[i])){case"boolean":case"number":case"object":a+=e[i].toString();break;case"string":e[i].substr(0,1)!=="/"?(t!==void 0&&n&&(r=n.internal.getEncryptor(t)),a+="("+th(r(e[i].toString()))+")"):a+=e[i].toString()}return a+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},h2=function(e,t,n){var r=function(a){return a};return t!==void 0&&n&&(r=n.internal.getEncryptor(t)),(e=e||"").toString(),e="("+th(r(e))+")"},Bo=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Bo.prototype.toString=function(){return this.objId+" 0 R"},Bo.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},Bo.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter(function(i){return i!="content"&&i!="appearanceStreamContent"&&i!="scope"&&i!="objId"&&i.substring(0,1)!="_"});for(var n in t)if(Object.getOwnPropertyDescriptor(this,t[n]).configurable===!1){var r=t[n],a=this[r];a&&(Array.isArray(a)?e.push({key:r,value:DO(a,this.objId,this.scope)}):a instanceof Bo?(a.scope=this.scope,e.push({key:r,value:a.objId+" 0 R"})):typeof a!="function"&&e.push({key:r,value:a}))}return e};var kO=function(){Bo.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(n){e=n.trim()},get:function(){return e||null}})};Va(kO,Bo);var EO=function(){Bo.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var n=function(r){return r};return this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),"("+th(n(e))+")"}},set:function(n){e=n}})};Va(EO,Bo);var go=function e(){Bo.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(m){if(isNaN(m))throw new Error('Invalid value "'+m+'" for attribute F supplied.');t=m}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Or(t,3)},set:function(m){m?this.F=Fr(t,3):this.F=$r(t,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(m){if(isNaN(m))throw new Error('Invalid value "'+m+'" for attribute Ff supplied.');n=m}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(m){r=m!==void 0?m:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(m){r[0]=m}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(m){r[1]=m}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(m){r[2]=m}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(m){r[3]=m}});var a="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return a},set:function(m){switch(m){case"/Btn":case"/Tx":case"/Ch":case"/Sig":a=m;break;default:throw new Error('Invalid value "'+m+'" for attribute FT supplied.')}}});var i=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!i||i.length<1){if(this instanceof Py)return;i="FieldObject"+e.FieldNum++}var m=function(v){return v};return this.scope&&(m=this.scope.internal.getEncryptor(this.objId)),"("+th(m(i))+")"},set:function(m){i=m.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return i},set:function(m){i=m}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(m){o=m}});var l="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return l},set:function(m){l=m}});var c=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return c},set:function(m){c=m}});var d=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return d===void 0?50/lC:d},set:function(m){d=m}});var u="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return u},set:function(m){u=m}});var h="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!h||this instanceof Py||this instanceof id))return h2(h,this.objId,this.scope)},set:function(m){m=m.toString(),h=m}});var f=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(f)return this instanceof ts?f:h2(f,this.objId,this.scope)},set:function(m){m=m.toString(),f=this instanceof ts?m:m.substr(0,1)==="("?Fh(m.substr(1,m.length-2)):Fh(m)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof ts?Fh(f.substr(1,f.length-1)):f},set:function(m){m=m.toString(),f=this instanceof ts?"/"+m:m}});var p=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(p)return p},set:function(m){this.V=m}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(p)return this instanceof ts?p:h2(p,this.objId,this.scope)},set:function(m){m=m.toString(),p=this instanceof ts?m:m.substr(0,1)==="("?Fh(m.substr(1,m.length-2)):Fh(m)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof ts?Fh(p.substr(1,p.length-1)):p},set:function(m){m=m.toString(),p=this instanceof ts?"/"+m:m}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var y,g=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return g},set:function(m){m=!!m,g=m}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(y)return y},set:function(m){y=m}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Or(this.Ff,1)},set:function(m){m?this.Ff=Fr(this.Ff,1):this.Ff=$r(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Or(this.Ff,2)},set:function(m){m?this.Ff=Fr(this.Ff,2):this.Ff=$r(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Or(this.Ff,3)},set:function(m){m?this.Ff=Fr(this.Ff,3):this.Ff=$r(this.Ff,3)}});var x=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(x!==null)return x},set:function(m){if([0,1,2].indexOf(m)===-1)throw new Error('Invalid value "'+m+'" for attribute Q supplied.');x=m}}),Object.defineProperty(this,"textAlign",{get:function(){var m;switch(x){case 0:default:m="left";break;case 1:m="center";break;case 2:m="right"}return m},configurable:!0,enumerable:!0,set:function(m){switch(m){case"right":case 2:x=2;break;case"center":case 1:x=1;break;case"left":case 0:default:x=0}}})};Va(go,Bo);var yu=function(){go.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(n){e=n}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return DO(t,this.objId,this.scope)},set:function(n){var r,a;a=[],typeof(r=n)=="string"&&(a=function(i,o,l){l||(l=1);for(var c,d=[];c=o.exec(i);)d.push(c[l]);return d}(r,/\((.*?)\)/g)),t=a}}),this.getOptions=function(){return t},this.setOptions=function(n){t=n,this.sort&&t.sort()},this.addOption=function(n){n=(n=n||"").toString(),t.push(n),this.sort&&t.sort()},this.removeOption=function(n,r){for(r=r||!1,n=(n=n||"").toString();t.indexOf(n)!==-1&&(t.splice(t.indexOf(n),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Or(this.Ff,18)},set:function(n){n?this.Ff=Fr(this.Ff,18):this.Ff=$r(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Or(this.Ff,19)},set:function(n){this.combo===!0&&(n?this.Ff=Fr(this.Ff,19):this.Ff=$r(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Or(this.Ff,20)},set:function(n){n?(this.Ff=Fr(this.Ff,20),t.sort()):this.Ff=$r(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Or(this.Ff,22)},set:function(n){n?this.Ff=Fr(this.Ff,22):this.Ff=$r(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Or(this.Ff,23)},set:function(n){n?this.Ff=Fr(this.Ff,23):this.Ff=$r(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Or(this.Ff,27)},set:function(n){n?this.Ff=Fr(this.Ff,27):this.Ff=$r(this.Ff,27)}}),this.hasAppearanceStream=!1};Va(yu,go);var bu=function(){yu.call(this),this.fontName="helvetica",this.combo=!1};Va(bu,yu);var wu=function(){bu.call(this),this.combo=!0};Va(wu,bu);var $m=function(){wu.call(this),this.edit=!0};Va($m,wu);var ts=function(){go.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Or(this.Ff,15)},set:function(n){n?this.Ff=Fr(this.Ff,15):this.Ff=$r(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Or(this.Ff,16)},set:function(n){n?this.Ff=Fr(this.Ff,16):this.Ff=$r(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Or(this.Ff,17)},set:function(n){n?this.Ff=Fr(this.Ff,17):this.Ff=$r(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Or(this.Ff,26)},set:function(n){n?this.Ff=Fr(this.Ff,26):this.Ff=$r(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var n=function(i){return i};if(this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var r,a=[];for(r in a.push("<<"),t)a.push("/"+r+" ("+th(n(t[r]))+")");return a.push(">>"),a.join(`
`)}},set:function(n){on(n)==="object"&&(t=n)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(n){typeof n=="string"&&(t.CA=n)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(n){e="/"+n}})};Va(ts,go);var Bm=function(){ts.call(this),this.pushButton=!0};Va(Bm,ts);var ju=function(){ts.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t!==void 0?t:[]}})};Va(ju,ts);var Py=function(){var e,t;go.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(a){e=a}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(a){t=a}});var n,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var a=function(l){return l};this.scope&&(a=this.scope.internal.getEncryptor(this.objId));var i,o=[];for(i in o.push("<<"),r)o.push("/"+i+" ("+th(a(r[i]))+")");return o.push(">>"),o.join(`
`)},set:function(a){on(a)==="object"&&(r=a)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(a){typeof a=="string"&&(r.CA=a)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(a){n=a}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(a){n="/"+a}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Tt.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Va(Py,go),ju.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var n=this.Kids[t];n.appearanceStreamContent=e.createAppearanceStream(n.optionName),n.caption=e.getCA()}},ju.prototype.createOption=function(e){var t=new Py;return t.Parent=this,t.optionName=e,this.Kids.push(t),Qte.call(this.scope,t),t};var zm=function(){ts.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Tt.CheckBox.createAppearanceStream()};Va(zm,ts);var id=function(){go.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Or(this.Ff,13)},set:function(t){t?this.Ff=Fr(this.Ff,13):this.Ff=$r(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Or(this.Ff,21)},set:function(t){t?this.Ff=Fr(this.Ff,21):this.Ff=$r(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Or(this.Ff,23)},set:function(t){t?this.Ff=Fr(this.Ff,23):this.Ff=$r(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Or(this.Ff,24)},set:function(t){t?this.Ff=Fr(this.Ff,24):this.Ff=$r(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Or(this.Ff,25)},set:function(t){t?this.Ff=Fr(this.Ff,25):this.Ff=$r(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Or(this.Ff,26)},set:function(t){t?this.Ff=Fr(this.Ff,26):this.Ff=$r(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Va(id,go);var Wm=function(){id.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Or(this.Ff,14)},set:function(e){e?this.Ff=Fr(this.Ff,14):this.Ff=$r(this.Ff,14)}}),this.password=!0};Va(Wm,id);var Tt={CheckBox:{createAppearanceStream:function(){return{N:{On:Tt.CheckBox.YesNormal},D:{On:Tt.CheckBox.YesPushDown,Off:Tt.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=ko(e);t.scope=e.scope;var n=[],r=e.scope.internal.getFont(e.fontName,e.fontStyle).id,a=e.scope.__private__.encodeColorString(e.color),i=kN(e,e.caption);return n.push("0.749023 g"),n.push("0 0 "+Ut(Tt.internal.getWidth(e))+" "+Ut(Tt.internal.getHeight(e))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+r+" "+Ut(i.fontSize)+" Tf "+a),n.push("BT"),n.push(i.text),n.push("ET"),n.push("Q"),n.push("EMC"),t.stream=n.join(`
`),t},YesNormal:function(e){var t=ko(e);t.scope=e.scope;var n=e.scope.internal.getFont(e.fontName,e.fontStyle).id,r=e.scope.__private__.encodeColorString(e.color),a=[],i=Tt.internal.getHeight(e),o=Tt.internal.getWidth(e),l=kN(e,e.caption);return a.push("1 g"),a.push("0 0 "+Ut(o)+" "+Ut(i)+" re"),a.push("f"),a.push("q"),a.push("0 0 1 rg"),a.push("0 0 "+Ut(o-1)+" "+Ut(i-1)+" re"),a.push("W"),a.push("n"),a.push("0 g"),a.push("BT"),a.push("/"+n+" "+Ut(l.fontSize)+" Tf "+r),a.push(l.text),a.push("ET"),a.push("Q"),t.stream=a.join(`
`),t},OffPushDown:function(e){var t=ko(e);t.scope=e.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+Ut(Tt.internal.getWidth(e))+" "+Ut(Tt.internal.getHeight(e))+" re"),n.push("f"),t.stream=n.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:Tt.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=Tt.RadioButton.Circle.YesNormal,t.D[e]=Tt.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=ko(e);t.scope=e.scope;var n=[],r=Tt.internal.getWidth(e)<=Tt.internal.getHeight(e)?Tt.internal.getWidth(e)/4:Tt.internal.getHeight(e)/4;r=Number((.9*r).toFixed(5));var a=Tt.internal.Bezier_C,i=Number((r*a).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+Ec(Tt.internal.getWidth(e)/2)+" "+Ec(Tt.internal.getHeight(e)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+i+" "+i+" "+r+" 0 "+r+" c"),n.push("-"+i+" "+r+" -"+r+" "+i+" -"+r+" 0 c"),n.push("-"+r+" -"+i+" -"+i+" -"+r+" 0 -"+r+" c"),n.push(i+" -"+r+" "+r+" -"+i+" "+r+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join(`
`),t},YesPushDown:function(e){var t=ko(e);t.scope=e.scope;var n=[],r=Tt.internal.getWidth(e)<=Tt.internal.getHeight(e)?Tt.internal.getWidth(e)/4:Tt.internal.getHeight(e)/4;r=Number((.9*r).toFixed(5));var a=Number((2*r).toFixed(5)),i=Number((a*Tt.internal.Bezier_C).toFixed(5)),o=Number((r*Tt.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+Ec(Tt.internal.getWidth(e)/2)+" "+Ec(Tt.internal.getHeight(e)/2)+" cm"),n.push(a+" 0 m"),n.push(a+" "+i+" "+i+" "+a+" 0 "+a+" c"),n.push("-"+i+" "+a+" -"+a+" "+i+" -"+a+" 0 c"),n.push("-"+a+" -"+i+" -"+i+" -"+a+" 0 -"+a+" c"),n.push(i+" -"+a+" "+a+" -"+i+" "+a+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+Ec(Tt.internal.getWidth(e)/2)+" "+Ec(Tt.internal.getHeight(e)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+o+" "+o+" "+r+" 0 "+r+" c"),n.push("-"+o+" "+r+" -"+r+" "+o+" -"+r+" 0 c"),n.push("-"+r+" -"+o+" -"+o+" -"+r+" 0 -"+r+" c"),n.push(o+" -"+r+" "+r+" -"+o+" "+r+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join(`
`),t},OffPushDown:function(e){var t=ko(e);t.scope=e.scope;var n=[],r=Tt.internal.getWidth(e)<=Tt.internal.getHeight(e)?Tt.internal.getWidth(e)/4:Tt.internal.getHeight(e)/4;r=Number((.9*r).toFixed(5));var a=Number((2*r).toFixed(5)),i=Number((a*Tt.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+Ec(Tt.internal.getWidth(e)/2)+" "+Ec(Tt.internal.getHeight(e)/2)+" cm"),n.push(a+" 0 m"),n.push(a+" "+i+" "+i+" "+a+" 0 "+a+" c"),n.push("-"+i+" "+a+" -"+a+" "+i+" -"+a+" 0 c"),n.push("-"+a+" -"+i+" -"+i+" -"+a+" 0 -"+a+" c"),n.push(i+" -"+a+" "+a+" -"+i+" "+a+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join(`
`),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:Tt.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=Tt.RadioButton.Cross.YesNormal,t.D[e]=Tt.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=ko(e);t.scope=e.scope;var n=[],r=Tt.internal.calculateCross(e);return n.push("q"),n.push("1 1 "+Ut(Tt.internal.getWidth(e)-2)+" "+Ut(Tt.internal.getHeight(e)-2)+" re"),n.push("W"),n.push("n"),n.push(Ut(r.x1.x)+" "+Ut(r.x1.y)+" m"),n.push(Ut(r.x2.x)+" "+Ut(r.x2.y)+" l"),n.push(Ut(r.x4.x)+" "+Ut(r.x4.y)+" m"),n.push(Ut(r.x3.x)+" "+Ut(r.x3.y)+" l"),n.push("s"),n.push("Q"),t.stream=n.join(`
`),t},YesPushDown:function(e){var t=ko(e);t.scope=e.scope;var n=Tt.internal.calculateCross(e),r=[];return r.push("0.749023 g"),r.push("0 0 "+Ut(Tt.internal.getWidth(e))+" "+Ut(Tt.internal.getHeight(e))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+Ut(Tt.internal.getWidth(e)-2)+" "+Ut(Tt.internal.getHeight(e)-2)+" re"),r.push("W"),r.push("n"),r.push(Ut(n.x1.x)+" "+Ut(n.x1.y)+" m"),r.push(Ut(n.x2.x)+" "+Ut(n.x2.y)+" l"),r.push(Ut(n.x4.x)+" "+Ut(n.x4.y)+" m"),r.push(Ut(n.x3.x)+" "+Ut(n.x3.y)+" l"),r.push("s"),r.push("Q"),t.stream=r.join(`
`),t},OffPushDown:function(e){var t=ko(e);t.scope=e.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+Ut(Tt.internal.getWidth(e))+" "+Ut(Tt.internal.getHeight(e))+" re"),n.push("f"),t.stream=n.join(`
`),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,n=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+n}};Tt.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=Tt.internal.getWidth(e),n=Tt.internal.getHeight(e),r=Math.min(t,n);return{x1:{x:(t-r)/2,y:(n-r)/2+r},x2:{x:(t-r)/2+r,y:(n-r)/2},x3:{x:(t-r)/2,y:(n-r)/2},x4:{x:(t-r)/2+r,y:(n-r)/2+r}}}},Tt.internal.getWidth=function(e){var t=0;return on(e)==="object"&&(t=wE(e.Rect[2])),t},Tt.internal.getHeight=function(e){var t=0;return on(e)==="object"&&(t=wE(e.Rect[3])),t};var Qte=Dr.addField=function(e){if(Xte(this,e),!(e instanceof go))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};Dr.AcroFormChoiceField=yu,Dr.AcroFormListBox=bu,Dr.AcroFormComboBox=wu,Dr.AcroFormEditBox=$m,Dr.AcroFormButton=ts,Dr.AcroFormPushButton=Bm,Dr.AcroFormRadioButton=ju,Dr.AcroFormCheckBox=zm,Dr.AcroFormTextField=id,Dr.AcroFormPasswordField=Wm,Dr.AcroFormAppearance=Tt,Dr.AcroForm={ChoiceField:yu,ListBox:bu,ComboBox:wu,EditBox:$m,Button:ts,PushButton:Bm,RadioButton:ju,CheckBox:zm,TextField:id,PasswordField:Wm,Appearance:Tt},Ot.AcroForm={ChoiceField:yu,ListBox:bu,ComboBox:wu,EditBox:$m,Button:ts,PushButton:Bm,RadioButton:ju,CheckBox:zm,TextField:id,PasswordField:Wm,Appearance:Tt};var Zte=Ot.AcroForm;function TO(e){return e.reduce(function(t,n,r){return t[n]=r,t},{})}(function(e){e.__addimage__={};var t="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},r=e.__addimage__.getImageFileTypeByImageData=function(T,E){var A,O,W,z,F,V=t;if((E=E||t)==="RGBA"||T.data!==void 0&&T.data instanceof Uint8ClampedArray&&"height"in T&&"width"in T)return"RGBA";if(P(T))for(F in n)for(W=n[F],A=0;A<W.length;A+=1){for(z=!0,O=0;O<W[A].length;O+=1)if(W[A][O]!==void 0&&W[A][O]!==T[O]){z=!1;break}if(z===!0){V=F;break}}else for(F in n)for(W=n[F],A=0;A<W.length;A+=1){for(z=!0,O=0;O<W[A].length;O+=1)if(W[A][O]!==void 0&&W[A][O]!==T.charCodeAt(O)){z=!1;break}if(z===!0){V=F;break}}return V===t&&E!==t&&(V=E),V},a=function T(E){for(var A=this.internal.write,O=this.internal.putStream,W=(0,this.internal.getFilters)();W.indexOf("FlateEncode")!==-1;)W.splice(W.indexOf("FlateEncode"),1);E.objectId=this.internal.newObject();var z=[];if(z.push({key:"Type",value:"/XObject"}),z.push({key:"Subtype",value:"/Image"}),z.push({key:"Width",value:E.width}),z.push({key:"Height",value:E.height}),E.colorSpace===x.INDEXED?z.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(E.palette.length/3-1)+" "+("sMask"in E&&E.sMask!==void 0?E.objectId+2:E.objectId+1)+" 0 R]"}):(z.push({key:"ColorSpace",value:"/"+E.colorSpace}),E.colorSpace===x.DEVICE_CMYK&&z.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),z.push({key:"BitsPerComponent",value:E.bitsPerComponent}),"decodeParameters"in E&&E.decodeParameters!==void 0&&z.push({key:"DecodeParms",value:"<<"+E.decodeParameters+">>"}),"transparency"in E&&Array.isArray(E.transparency)){for(var F="",V=0,B=E.transparency.length;V<B;V++)F+=E.transparency[V]+" "+E.transparency[V]+" ";z.push({key:"Mask",value:"["+F+"]"})}E.sMask!==void 0&&z.push({key:"SMask",value:E.objectId+1+" 0 R"});var Y=E.filter!==void 0?["/"+E.filter]:void 0;if(O({data:E.data,additionalKeyValues:z,alreadyAppliedFilters:Y,objectId:E.objectId}),A("endobj"),"sMask"in E&&E.sMask!==void 0){var $="/Predictor "+E.predictor+" /Colors 1 /BitsPerComponent "+E.bitsPerComponent+" /Columns "+E.width,I={width:E.width,height:E.height,colorSpace:"DeviceGray",bitsPerComponent:E.bitsPerComponent,decodeParameters:$,data:E.sMask};"filter"in E&&(I.filter=E.filter),T.call(this,I)}if(E.colorSpace===x.INDEXED){var U=this.internal.newObject();O({data:N(new Uint8Array(E.palette)),objectId:U}),A("endobj")}},i=function(){var T=this.internal.collections.addImage_images;for(var E in T)a.call(this,T[E])},o=function(){var T,E=this.internal.collections.addImage_images,A=this.internal.write;for(var O in E)A("/I"+(T=E[O]).index,T.objectId,"0","R")},l=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",i),this.internal.events.subscribe("putXobjectDict",o))},c=function(){var T=this.internal.collections.addImage_images;return l.call(this),T},d=function(){return Object.keys(this.internal.collections.addImage_images).length},u=function(T){return typeof e["process"+T.toUpperCase()]=="function"},h=function(T){return on(T)==="object"&&T.nodeType===1},f=function(T,E){if(T.nodeName==="IMG"&&T.hasAttribute("src")){var A=""+T.getAttribute("src");if(A.indexOf("data:image/")===0)return Fm(unescape(A).split("base64,").pop());var O=e.loadFile(A,!0);if(O!==void 0)return O}if(T.nodeName==="CANVAS"){if(T.width===0||T.height===0)throw new Error("Given canvas must have data. Canvas width: "+T.width+", height: "+T.height);var W;switch(E){case"PNG":W="image/png";break;case"WEBP":W="image/webp";break;case"JPEG":case"JPG":default:W="image/jpeg"}return Fm(T.toDataURL(W,1).split("base64,").pop())}},p=function(T){var E=this.internal.collections.addImage_images;if(E){for(var A in E)if(T===E[A].alias)return E[A]}},y=function(T,E,A){return T||E||(T=-96,E=-96),T<0&&(T=-1*A.width*72/T/this.internal.scaleFactor),E<0&&(E=-1*A.height*72/E/this.internal.scaleFactor),T===0&&(T=E*A.width/A.height),E===0&&(E=T*A.height/A.width),[T,E]},g=function(T,E,A,O,W,z){var F=y.call(this,A,O,W),V=this.internal.getCoordinateString,B=this.internal.getVerticalCoordinateString,Y=c.call(this);if(A=F[0],O=F[1],Y[W.index]=W,z){z*=Math.PI/180;var $=Math.cos(z),I=Math.sin(z),U=function(X){return X.toFixed(4)},q=[U($),U(I),U(-1*I),U($),0,0,"cm"]}this.internal.write("q"),z?(this.internal.write([1,"0","0",1,V(T),B(E+O),"cm"].join(" ")),this.internal.write(q.join(" ")),this.internal.write([V(A),"0","0",V(O),"0","0","cm"].join(" "))):this.internal.write([V(A),"0","0",V(O),V(T),B(E+O),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+W.index+" Do"),this.internal.write("Q")},x=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var m=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},v=e.__addimage__.sHashCode=function(T){var E,A,O=0;if(typeof T=="string")for(A=T.length,E=0;E<A;E++)O=(O<<5)-O+T.charCodeAt(E),O|=0;else if(P(T))for(A=T.byteLength/2,E=0;E<A;E++)O=(O<<5)-O+T[E],O|=0;return O},b=e.__addimage__.validateStringAsBase64=function(T){(T=T||"").toString().trim();var E=!0;return T.length===0&&(E=!1),T.length%4!=0&&(E=!1),/^[A-Za-z0-9+/]+$/.test(T.substr(0,T.length-2))===!1&&(E=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(T.substr(-2))===!1&&(E=!1),E},C=e.__addimage__.extractImageFromDataUrl=function(T){var E=(T=T||"").split("base64,"),A=null;if(E.length===2){var O=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(E[0]);Array.isArray(O)&&(A={mimeType:O[1],charset:O[2],data:E[1]})}return A},S=e.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};e.__addimage__.isArrayBuffer=function(T){return S()&&T instanceof ArrayBuffer};var P=e.__addimage__.isArrayBufferView=function(T){return S()&&typeof Uint32Array<"u"&&(T instanceof Int8Array||T instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&T instanceof Uint8ClampedArray||T instanceof Int16Array||T instanceof Uint16Array||T instanceof Int32Array||T instanceof Uint32Array||T instanceof Float32Array||T instanceof Float64Array)},D=e.__addimage__.binaryStringToUint8Array=function(T){for(var E=T.length,A=new Uint8Array(E),O=0;O<E;O++)A[O]=T.charCodeAt(O);return A},N=e.__addimage__.arrayBufferToBinaryString=function(T){for(var E="",A=P(T)?T:new Uint8Array(T),O=0;O<A.length;O+=8192)E+=String.fromCharCode.apply(null,A.subarray(O,O+8192));return E};e.addImage=function(){var T,E,A,O,W,z,F,V,B;if(typeof arguments[1]=="number"?(E=t,A=arguments[1],O=arguments[2],W=arguments[3],z=arguments[4],F=arguments[5],V=arguments[6],B=arguments[7]):(E=arguments[1],A=arguments[2],O=arguments[3],W=arguments[4],z=arguments[5],F=arguments[6],V=arguments[7],B=arguments[8]),on(T=arguments[0])==="object"&&!h(T)&&"imageData"in T){var Y=T;T=Y.imageData,E=Y.format||E||t,A=Y.x||A||0,O=Y.y||O||0,W=Y.w||Y.width||W,z=Y.h||Y.height||z,F=Y.alias||F,V=Y.compression||V,B=Y.rotation||Y.angle||B}var $=this.internal.getFilters();if(V===void 0&&$.indexOf("FlateEncode")!==-1&&(V="SLOW"),isNaN(A)||isNaN(O))throw new Error("Invalid coordinates passed to jsPDF.addImage");l.call(this);var I=M.call(this,T,E,F,V);return g.call(this,A,O,W,z,I,B),this};var M=function(T,E,A,O){var W,z,F;if(typeof T=="string"&&r(T)===t){T=unescape(T);var V=L(T,!1);(V!==""||(V=e.loadFile(T,!0))!==void 0)&&(T=V)}if(h(T)&&(T=f(T,E)),E=r(T,E),!u(E))throw new Error("addImage does not support files of type '"+E+"', please ensure that a plugin for '"+E+"' support is added.");if(((F=A)==null||F.length===0)&&(A=function(B){return typeof B=="string"||P(B)?v(B):P(B.data)?v(B.data):null}(T)),(W=p.call(this,A))||(S()&&(T instanceof Uint8Array||E==="RGBA"||(z=T,T=D(T))),W=this["process"+E.toUpperCase()](T,d.call(this),A,function(B){return B&&typeof B=="string"&&(B=B.toUpperCase()),B in e.image_compression?B:m.NONE}(O),z)),!W)throw new Error("An unknown error occurred whilst processing the image.");return W},L=e.__addimage__.convertBase64ToBinaryString=function(T,E){var A;E=typeof E!="boolean"||E;var O,W="";if(typeof T=="string"){O=(A=C(T))!==null?A.data:T;try{W=Fm(O)}catch(z){if(E)throw b(O)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+z.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return W};e.getImageProperties=function(T){var E,A,O="";if(h(T)&&(T=f(T)),typeof T=="string"&&r(T)===t&&((O=L(T,!1))===""&&(O=e.loadFile(T)||""),T=O),A=r(T),!u(A))throw new Error("addImage does not support files of type '"+A+"', please ensure that a plugin for '"+A+"' support is added.");if(!S()||T instanceof Uint8Array||(T=D(T)),!(E=this["process"+A.toUpperCase()](T)))throw new Error("An unknown error occurred whilst processing the image");return E.fileType=A,E}})(Ot.API),function(e){var t=function(n){if(n!==void 0&&n!="")return!0};Ot.API.events.push(["addPage",function(n){this.internal.getPageInfo(n.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(n){for(var r,a,i,o=this.internal.getCoordinateString,l=this.internal.getVerticalCoordinateString,c=this.internal.getPageInfoByObjId(n.objId),d=n.pageContext.annotations,u=!1,h=0;h<d.length&&!u;h++)switch((r=d[h]).type){case"link":(t(r.options.url)||t(r.options.pageNumber))&&(u=!0);break;case"reference":case"text":case"freetext":u=!0}if(u!=0){this.internal.write("/Annots [");for(var f=0;f<d.length;f++){r=d[f];var p=this.internal.pdfEscape,y=this.internal.getEncryptor(n.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var g=this.internal.newAdditionalObject(),x=this.internal.newAdditionalObject(),m=this.internal.getEncryptor(g.objId),v=r.title||"Note";i="<</Type /Annot /Subtype /Text "+(a="/Rect ["+o(r.bounds.x)+" "+l(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w)+" "+l(r.bounds.y)+"] ")+"/Contents ("+p(m(r.contents))+")",i+=" /Popup "+x.objId+" 0 R",i+=" /P "+c.objId+" 0 R",i+=" /T ("+p(m(v))+") >>",g.content=i;var b=g.objId+" 0 R";i="<</Type /Annot /Subtype /Popup "+(a="/Rect ["+o(r.bounds.x+30)+" "+l(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w+30)+" "+l(r.bounds.y)+"] ")+" /Parent "+b,r.open&&(i+=" /Open true"),i+=" >>",x.content=i,this.internal.write(g.objId,"0 R",x.objId,"0 R");break;case"freetext":a="/Rect ["+o(r.bounds.x)+" "+l(r.bounds.y)+" "+o(r.bounds.x+r.bounds.w)+" "+l(r.bounds.y+r.bounds.h)+"] ";var C=r.color||"#000000";i="<</Type /Annot /Subtype /FreeText "+a+"/Contents ("+p(y(r.contents))+")",i+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+C+")",i+=" /Border [0 0 0]",i+=" >>",this.internal.write(i);break;case"link":if(r.options.name){var S=this.annotations._nameMap[r.options.name];r.options.pageNumber=S.page,r.options.top=S.y}else r.options.top||(r.options.top=0);if(a="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",i="",r.options.url)i="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /A <</S /URI /URI ("+p(y(r.options.url))+") >>";else if(r.options.pageNumber)switch(i="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":i+=" /Fit]";break;case"FitH":i+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,i+=" /FitV "+r.options.left+"]";break;case"XYZ":default:var P=l(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),i+=" /XYZ "+r.options.left+" "+P+" "+r.options.zoom+"]"}i!=""&&(i+=" >>",this.internal.write(i))}}this.internal.write("]")}}]),e.createAnnotation=function(n){var r=this.internal.getCurrentPageInfo();switch(n.type){case"link":this.link(n.bounds.x,n.bounds.y,n.bounds.w,n.bounds.h,n);break;case"text":case"freetext":r.pageContext.annotations.push(n)}},e.link=function(n,r,a,i,o){var l=this.internal.getCurrentPageInfo(),c=this.internal.getCoordinateString,d=this.internal.getVerticalCoordinateString;l.pageContext.annotations.push({finalBounds:{x:c(n),y:d(r),w:c(n+a),h:d(r+i)},options:o,type:"link"})},e.textWithLink=function(n,r,a,i){var o,l,c=this.getTextWidth(n),d=this.internal.getLineHeight()/this.internal.scaleFactor;if(i.maxWidth!==void 0){l=i.maxWidth;var u=this.splitTextToSize(n,l).length;o=Math.ceil(d*u)}else l=c,o=d;return this.text(n,r,a,i),a+=.2*d,i.align==="center"&&(r-=c/2),i.align==="right"&&(r-=c),this.link(r,a-d,l,o,i),c},e.getTextWidth=function(n){var r=this.internal.getFontSize();return this.getStringUnitWidth(n)*r/this.internal.scaleFactor}}(Ot.API),function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},a=[1570,1571,1573,1575];e.__arabicParser__={};var i=e.__arabicParser__.isInArabicSubstitutionA=function(g){return t[g.charCodeAt(0)]!==void 0},o=e.__arabicParser__.isArabicLetter=function(g){return typeof g=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(g)},l=e.__arabicParser__.isArabicEndLetter=function(g){return o(g)&&i(g)&&t[g.charCodeAt(0)].length<=2},c=e.__arabicParser__.isArabicAlfLetter=function(g){return o(g)&&a.indexOf(g.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(g){return o(g)&&i(g)&&t[g.charCodeAt(0)].length>=1};var d=e.__arabicParser__.arabicLetterHasFinalForm=function(g){return o(g)&&i(g)&&t[g.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(g){return o(g)&&i(g)&&t[g.charCodeAt(0)].length>=3};var u=e.__arabicParser__.arabicLetterHasMedialForm=function(g){return o(g)&&i(g)&&t[g.charCodeAt(0)].length==4},h=e.__arabicParser__.resolveLigatures=function(g){var x=0,m=n,v="",b=0;for(x=0;x<g.length;x+=1)m[g.charCodeAt(x)]!==void 0?(b++,typeof(m=m[g.charCodeAt(x)])=="number"&&(v+=String.fromCharCode(m),m=n,b=0),x===g.length-1&&(m=n,v+=g.charAt(x-(b-1)),x-=b-1,b=0)):(m=n,v+=g.charAt(x-b),x-=b,b=0);return v};e.__arabicParser__.isArabicDiacritic=function(g){return g!==void 0&&r[g.charCodeAt(0)]!==void 0};var f=e.__arabicParser__.getCorrectForm=function(g,x,m){return o(g)?i(g)===!1?-1:!d(g)||!o(x)&&!o(m)||!o(m)&&l(x)||l(g)&&!o(x)||l(g)&&c(x)||l(g)&&l(x)?0:u(g)&&o(x)&&!l(x)&&o(m)&&d(m)?3:l(g)||!o(m)?1:2:-1},p=function(g){var x=0,m=0,v=0,b="",C="",S="",P=(g=g||"").split("\\s+"),D=[];for(x=0;x<P.length;x+=1){for(D.push(""),m=0;m<P[x].length;m+=1)b=P[x][m],C=P[x][m-1],S=P[x][m+1],o(b)?(v=f(b,C,S),D[x]+=v!==-1?String.fromCharCode(t[b.charCodeAt(0)][v]):b):D[x]+=b;D[x]=h(D[x])}return D.join(" ")},y=e.__arabicParser__.processArabic=e.processArabic=function(){var g,x=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,m=[];if(Array.isArray(x)){var v=0;for(m=[],v=0;v<x.length;v+=1)Array.isArray(x[v])?m.push([p(x[v][0]),x[v][1],x[v][2]]):m.push([p(x[v])]);g=m}else g=p(x);return typeof arguments[0]=="string"?g:(arguments[0].text=g,arguments[0])};e.events.push(["preProcessText",y])}(Ot.API),Ot.API.autoPrint=function(e){var t;switch((e=e||{}).variant=e.variant||"non-conform",e.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})}return this},function(e){var t=function(){var n=void 0;Object.defineProperty(this,"pdf",{get:function(){return n},set:function(l){n=l}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(l){r=isNaN(l)||Number.isInteger(l)===!1||l<0?150:l,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var a=300;Object.defineProperty(this,"height",{get:function(){return a},set:function(l){a=isNaN(l)||Number.isInteger(l)===!1||l<0?300:l,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=a+1)}});var i=[];Object.defineProperty(this,"childNodes",{get:function(){return i},set:function(l){i=l}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(l){o=l}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(n,r){var a;if((n=n||"2d")!=="2d")return null;for(a in r)this.pdf.context2d.hasOwnProperty(a)&&(this.pdf.context2d[a]=r[a]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(Ot.API),function(e){var t={left:0,top:0,bottom:0,right:0},n=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),a.call(this))},a=function(){this.internal.__cell__.lastCell=new i,this.internal.__cell__.pages=1},i=function(){var c=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return c},set:function(g){c=g}});var d=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return d},set:function(g){d=g}});var u=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return u},set:function(g){u=g}});var h=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return h},set:function(g){h=g}});var f=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return f},set:function(g){f=g}});var p=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return p},set:function(g){p=g}});var y=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return y},set:function(g){y=g}}),this};i.prototype.clone=function(){return new i(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},i.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(c){return r.call(this),this.internal.__cell__.headerFunction=typeof c=="function"?c:void 0,this},e.getTextDimensions=function(c,d){r.call(this);var u=(d=d||{}).fontSize||this.getFontSize(),h=d.font||this.getFont(),f=d.scaleFactor||this.internal.scaleFactor,p=0,y=0,g=0,x=this;if(!Array.isArray(c)&&typeof c!="string"){if(typeof c!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");c=String(c)}var m=d.maxWidth;m>0?typeof c=="string"?c=this.splitTextToSize(c,m):Object.prototype.toString.call(c)==="[object Array]"&&(c=c.reduce(function(b,C){return b.concat(x.splitTextToSize(C,m))},[])):c=Array.isArray(c)?c:[c];for(var v=0;v<c.length;v++)p<(g=this.getStringUnitWidth(c[v],{font:h})*u)&&(p=g);return p!==0&&(y=c.length),{w:p/=f,h:Math.max((y*u*this.getLineHeightFactor()-u*(this.getLineHeightFactor()-1))/f,0)}},e.cellAddPage=function(){r.call(this),this.addPage();var c=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new i(c.left,c.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=e.cell=function(){var c;c=arguments[0]instanceof i?arguments[0]:new i(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var d=this.internal.__cell__.lastCell,u=this.internal.__cell__.padding,h=this.internal.__cell__.margins||t,f=this.internal.__cell__.tableHeaderRow,p=this.internal.__cell__.printHeaders;return d.lineNumber!==void 0&&(d.lineNumber===c.lineNumber?(c.x=(d.x||0)+(d.width||0),c.y=d.y||0):d.y+d.height+c.height+h.bottom>this.getPageHeight()?(this.cellAddPage(),c.y=h.top,p&&f&&(this.printHeaderRow(c.lineNumber,!0),c.y+=f[0].height)):c.y=d.y+d.height||c.y),c.text[0]!==void 0&&(this.rect(c.x,c.y,c.width,c.height,n===!0?"FD":void 0),c.align==="right"?this.text(c.text,c.x+c.width-u,c.y+u,{align:"right",baseline:"top"}):c.align==="center"?this.text(c.text,c.x+c.width/2,c.y+u,{align:"center",baseline:"top",maxWidth:c.width-u-u}):this.text(c.text,c.x+u,c.y+u,{align:"left",baseline:"top",maxWidth:c.width-u-u})),this.internal.__cell__.lastCell=c,this};e.table=function(c,d,u,h,f){if(r.call(this),!u)throw new Error("No data for PDF table.");var p,y,g,x,m=[],v=[],b=[],C={},S={},P=[],D=[],N=(f=f||{}).autoSize||!1,M=f.printHeaders!==!1,L=f.css&&f.css["font-size"]!==void 0?16*f.css["font-size"]:f.fontSize||12,T=f.margins||Object.assign({width:this.getPageWidth()},t),E=typeof f.padding=="number"?f.padding:3,A=f.headerBackgroundColor||"#c8c8c8",O=f.headerTextColor||"#000";if(a.call(this),this.internal.__cell__.printHeaders=M,this.internal.__cell__.margins=T,this.internal.__cell__.table_font_size=L,this.internal.__cell__.padding=E,this.internal.__cell__.headerBackgroundColor=A,this.internal.__cell__.headerTextColor=O,this.setFontSize(L),h==null)v=m=Object.keys(u[0]),b=m.map(function(){return"left"});else if(Array.isArray(h)&&on(h[0])==="object")for(m=h.map(function(Y){return Y.name}),v=h.map(function(Y){return Y.prompt||Y.name||""}),b=h.map(function(Y){return Y.align||"left"}),p=0;p<h.length;p+=1)S[h[p].name]=h[p].width*(19.049976/25.4);else Array.isArray(h)&&typeof h[0]=="string"&&(v=m=h,b=m.map(function(){return"left"}));if(N||Array.isArray(h)&&typeof h[0]=="string")for(p=0;p<m.length;p+=1){for(C[x=m[p]]=u.map(function(Y){return Y[x]}),this.setFont(void 0,"bold"),P.push(this.getTextDimensions(v[p],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),y=C[x],this.setFont(void 0,"normal"),g=0;g<y.length;g+=1)P.push(this.getTextDimensions(y[g],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);S[x]=Math.max.apply(null,P)+E+E,P=[]}if(M){var W={};for(p=0;p<m.length;p+=1)W[m[p]]={},W[m[p]].text=v[p],W[m[p]].align=b[p];var z=l.call(this,W,S);D=m.map(function(Y){return new i(c,d,S[Y],z,W[Y].text,void 0,W[Y].align)}),this.setTableHeaderRow(D),this.printHeaderRow(1,!1)}var F=h.reduce(function(Y,$){return Y[$.name]=$.align,Y},{});for(p=0;p<u.length;p+=1){"rowStart"in f&&f.rowStart instanceof Function&&f.rowStart({row:p,data:u[p]},this);var V=l.call(this,u[p],S);for(g=0;g<m.length;g+=1){var B=u[p][m[g]];"cellStart"in f&&f.cellStart instanceof Function&&f.cellStart({row:p,col:g,data:B},this),o.call(this,new i(c,d,S[m[g]],V,B,p+2,F[m[g]]))}}return this.internal.__cell__.table_x=c,this.internal.__cell__.table_y=d,this};var l=function(c,d){var u=this.internal.__cell__.padding,h=this.internal.__cell__.table_font_size,f=this.internal.scaleFactor;return Object.keys(c).map(function(p){var y=c[p];return this.splitTextToSize(y.hasOwnProperty("text")?y.text:y,d[p]-u-u)},this).map(function(p){return this.getLineHeightFactor()*p.length*h/f+u+u},this).reduce(function(p,y){return Math.max(p,y)},0)};e.setTableHeaderRow=function(c){r.call(this),this.internal.__cell__.tableHeaderRow=c},e.printHeaderRow=function(c,d){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var u;if(n=!0,typeof this.internal.__cell__.headerFunction=="function"){var h=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new i(h[0],h[1],h[2],h[3],void 0,-1)}this.setFont(void 0,"bold");for(var f=[],p=0;p<this.internal.__cell__.tableHeaderRow.length;p+=1){u=this.internal.__cell__.tableHeaderRow[p].clone(),d&&(u.y=this.internal.__cell__.margins.top||0,f.push(u)),u.lineNumber=c;var y=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,u),this.setTextColor(y)}f.length>0&&this.setTableHeaderRow(f),this.setFont(void 0,"normal"),n=!1}}(Ot.API);var AO={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},_O=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],EN=TO(_O),MO=[100,200,300,400,500,600,700,800,900],ene=TO(MO);function TN(e){var t=e.family.replace(/"|'/g,"").toLowerCase(),n=function(i){return AO[i=i||"normal"]?i:"normal"}(e.style),r=function(i){if(!i)return 400;if(typeof i=="number")return i>=100&&i<=900&&i%100==0?i:400;if(/^\d00$/.test(i))return parseInt(i);switch(i){case"bold":return 700;case"normal":default:return 400}}(e.weight),a=function(i){return typeof EN[i=i||"normal"]=="number"?i:"normal"}(e.stretch);return{family:t,style:n,weight:r,stretch:a,src:e.src||[],ref:e.ref||{name:t,style:[a,n,r].join(" ")}}}function jE(e,t,n,r){var a;for(a=n;a>=0&&a<t.length;a+=r)if(e[t[a]])return e[t[a]];for(a=n;a>=0&&a<t.length;a-=r)if(e[t[a]])return e[t[a]]}var tne={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},NE={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function SE(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function nne(e,t,n){for(var r=(n=n||{}).defaultFontFamily||"times",a=Object.assign({},tne,n.genericFontFamilies||{}),i=null,o=null,l=0;l<t.length;++l)if(a[(i=TN(t[l])).family]&&(i.family=a[i.family]),e.hasOwnProperty(i.family)){o=e[i.family];break}if(!(o=o||e[r]))throw new Error("Could not find a font-family for the rule '"+SE(i)+"' and default family '"+r+"'.");if(o=function(c,d){if(d[c])return d[c];var u=EN[c],h=u<=EN.normal?-1:1,f=jE(d,_O,u,h);if(!f)throw new Error("Could not find a matching font-stretch value for "+c);return f}(i.stretch,o),o=function(c,d){if(d[c])return d[c];for(var u=AO[c],h=0;h<u.length;++h)if(d[u[h]])return d[u[h]];throw new Error("Could not find a matching font-style for "+c)}(i.style,o),!(o=function(c,d){if(d[c])return d[c];if(c===400&&d[500])return d[500];if(c===500&&d[400])return d[400];var u=ene[c],h=jE(d,MO,u,c<400?-1:1);if(!h)throw new Error("Could not find a matching font-weight for value "+c);return h}(i.weight,o)))throw new Error("Failed to resolve a font for the rule '"+SE(i)+"'.");return o}function CE(e){return e.trimLeft()}function rne(e,t){for(var n=0;n<e.length;){if(e.charAt(n)===t)return[e.substring(0,n),e.substring(n+1)];n+=1}return null}function sne(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],e.substring(t[0].length)]}var Ox,PE,DE,f2=["times"];(function(e){var t,n,r,a,i,o,l,c,d,u=function(I){return I=I||{},this.isStrokeTransparent=I.isStrokeTransparent||!1,this.strokeOpacity=I.strokeOpacity||1,this.strokeStyle=I.strokeStyle||"#000000",this.fillStyle=I.fillStyle||"#000000",this.isFillTransparent=I.isFillTransparent||!1,this.fillOpacity=I.fillOpacity||1,this.font=I.font||"10px sans-serif",this.textBaseline=I.textBaseline||"alphabetic",this.textAlign=I.textAlign||"left",this.lineWidth=I.lineWidth||1,this.lineJoin=I.lineJoin||"miter",this.lineCap=I.lineCap||"butt",this.path=I.path||[],this.transform=I.transform!==void 0?I.transform.clone():new c,this.globalCompositeOperation=I.globalCompositeOperation||"normal",this.globalAlpha=I.globalAlpha||1,this.clip_path=I.clip_path||[],this.currentPoint=I.currentPoint||new o,this.miterLimit=I.miterLimit||10,this.lastPoint=I.lastPoint||new o,this.lineDashOffset=I.lineDashOffset||0,this.lineDash=I.lineDash||[],this.margin=I.margin||[0,0,0,0],this.prevPageLastElemOffset=I.prevPageLastElemOffset||0,this.ignoreClearRect=typeof I.ignoreClearRect!="boolean"||I.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new h(this),t=this.internal.f2,n=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,a=this.internal.getHorizontalCoordinate,i=this.internal.getVerticalCoordinate,o=this.internal.Point,l=this.internal.Rectangle,c=this.internal.Matrix,d=new u}]);var h=function(I){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var U=I;Object.defineProperty(this,"pdf",{get:function(){return U}});var q=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return q},set:function(_e){q=!!_e}});var X=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return X},set:function(_e){X=!!_e}});var te=0;Object.defineProperty(this,"posX",{get:function(){return te},set:function(_e){isNaN(_e)||(te=_e)}});var ae=0;Object.defineProperty(this,"posY",{get:function(){return ae},set:function(_e){isNaN(_e)||(ae=_e)}}),Object.defineProperty(this,"margin",{get:function(){return d.margin},set:function(_e){var ue;typeof _e=="number"?ue=[_e,_e,_e,_e]:((ue=new Array(4))[0]=_e[0],ue[1]=_e.length>=2?_e[1]:ue[0],ue[2]=_e.length>=3?_e[2]:ue[0],ue[3]=_e.length>=4?_e[3]:ue[1]),d.margin=ue}});var le=!1;Object.defineProperty(this,"autoPaging",{get:function(){return le},set:function(_e){le=_e}});var me=0;Object.defineProperty(this,"lastBreak",{get:function(){return me},set:function(_e){me=_e}});var Le=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Le},set:function(_e){Le=_e}}),Object.defineProperty(this,"ctx",{get:function(){return d},set:function(_e){_e instanceof u&&(d=_e)}}),Object.defineProperty(this,"path",{get:function(){return d.path},set:function(_e){d.path=_e}});var ie=[];Object.defineProperty(this,"ctxStack",{get:function(){return ie},set:function(_e){ie=_e}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(_e){var ue;ue=f(_e),this.ctx.fillStyle=ue.style,this.ctx.isFillTransparent=ue.a===0,this.ctx.fillOpacity=ue.a,this.pdf.setFillColor(ue.r,ue.g,ue.b,{a:ue.a}),this.pdf.setTextColor(ue.r,ue.g,ue.b,{a:ue.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(_e){var ue=f(_e);this.ctx.strokeStyle=ue.style,this.ctx.isStrokeTransparent=ue.a===0,this.ctx.strokeOpacity=ue.a,ue.a===0?this.pdf.setDrawColor(255,255,255):(ue.a,this.pdf.setDrawColor(ue.r,ue.g,ue.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(_e){["butt","round","square"].indexOf(_e)!==-1&&(this.ctx.lineCap=_e,this.pdf.setLineCap(_e))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(_e){isNaN(_e)||(this.ctx.lineWidth=_e,this.pdf.setLineWidth(_e))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(_e){["bevel","round","miter"].indexOf(_e)!==-1&&(this.ctx.lineJoin=_e,this.pdf.setLineJoin(_e))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(_e){isNaN(_e)||(this.ctx.miterLimit=_e,this.pdf.setMiterLimit(_e))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(_e){this.ctx.textBaseline=_e}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(_e){["right","end","center","left","start"].indexOf(_e)!==-1&&(this.ctx.textAlign=_e)}});var Ne=null;function Be(_e,ue){if(Ne===null){var wt=function(gt){var ve=[];return Object.keys(gt).forEach(function(we){gt[we].forEach(function(Se){var De=null;switch(Se){case"bold":De={family:we,weight:"bold"};break;case"italic":De={family:we,style:"italic"};break;case"bolditalic":De={family:we,weight:"bold",style:"italic"};break;case"":case"normal":De={family:we}}De!==null&&(De.ref={name:we,style:Se},ve.push(De))})}),ve}(_e.getFontList());Ne=function(gt){for(var ve={},we=0;we<gt.length;++we){var Se=TN(gt[we]),De=Se.family,Ie=Se.stretch,oe=Se.style,Ee=Se.weight;ve[De]=ve[De]||{},ve[De][Ie]=ve[De][Ie]||{},ve[De][Ie][oe]=ve[De][Ie][oe]||{},ve[De][Ie][oe][Ee]=Se}return ve}(wt.concat(ue))}return Ne}var Ue=null;Object.defineProperty(this,"fontFaces",{get:function(){return Ue},set:function(_e){Ne=null,Ue=_e}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(_e){var ue;if(this.ctx.font=_e,(ue=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(_e))!==null){var wt=ue[1],gt=(ue[2],ue[3]),ve=ue[4],we=(ue[5],ue[6]),Se=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(ve)[2];ve=Math.floor(Se==="px"?parseFloat(ve)*this.pdf.internal.scaleFactor:Se==="em"?parseFloat(ve)*this.pdf.getFontSize():parseFloat(ve)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(ve);var De=function(Ve){var pt,et,Zt=[],Ze=Ve.trim();if(Ze==="")return f2;if(Ze in NE)return[NE[Ze]];for(;Ze!=="";){switch(et=null,pt=(Ze=CE(Ze)).charAt(0)){case'"':case"'":et=rne(Ze.substring(1),pt);break;default:et=sne(Ze)}if(et===null||(Zt.push(et[0]),(Ze=CE(et[1]))!==""&&Ze.charAt(0)!==","))return f2;Ze=Ze.replace(/^,/,"")}return Zt}(we);if(this.fontFaces){var Ie=nne(Be(this.pdf,this.fontFaces),De.map(function(Ve){return{family:Ve,stretch:"normal",weight:gt,style:wt}}));this.pdf.setFont(Ie.ref.name,Ie.ref.style)}else{var oe="";(gt==="bold"||parseInt(gt,10)>=700||wt==="bold")&&(oe="bold"),wt==="italic"&&(oe+="italic"),oe.length===0&&(oe="normal");for(var Ee="",G={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},ge=0;ge<De.length;ge++){if(this.pdf.internal.getFont(De[ge],oe,{noFallback:!0,disableWarning:!0})!==void 0){Ee=De[ge];break}if(oe==="bolditalic"&&this.pdf.internal.getFont(De[ge],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Ee=De[ge],oe="bold";else if(this.pdf.internal.getFont(De[ge],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Ee=De[ge],oe="normal";break}}if(Ee===""){for(var Pe=0;Pe<De.length;Pe++)if(G[De[Pe]]){Ee=G[De[Pe]];break}}Ee=Ee===""?"Times":Ee,this.pdf.setFont(Ee,oe)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(_e){this.ctx.globalCompositeOperation=_e}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(_e){this.ctx.globalAlpha=_e}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(_e){this.ctx.lineDashOffset=_e,$.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(_e){this.ctx.lineDash=_e,$.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(_e){this.ctx.ignoreClearRect=!!_e}})};h.prototype.setLineDash=function(I){this.lineDash=I},h.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},h.prototype.fill=function(){C.call(this,"fill",!1)},h.prototype.stroke=function(){C.call(this,"stroke",!1)},h.prototype.beginPath=function(){this.path=[{type:"begin"}]},h.prototype.moveTo=function(I,U){if(isNaN(I)||isNaN(U))throw Ln.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var q=this.ctx.transform.applyToPoint(new o(I,U));this.path.push({type:"mt",x:q.x,y:q.y}),this.ctx.lastPoint=new o(I,U)},h.prototype.closePath=function(){var I=new o(0,0),U=0;for(U=this.path.length-1;U!==-1;U--)if(this.path[U].type==="begin"&&on(this.path[U+1])==="object"&&typeof this.path[U+1].x=="number"){I=new o(this.path[U+1].x,this.path[U+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(I.x,I.y)},h.prototype.lineTo=function(I,U){if(isNaN(I)||isNaN(U))throw Ln.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var q=this.ctx.transform.applyToPoint(new o(I,U));this.path.push({type:"lt",x:q.x,y:q.y}),this.ctx.lastPoint=new o(q.x,q.y)},h.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),C.call(this,null,!0)},h.prototype.quadraticCurveTo=function(I,U,q,X){if(isNaN(q)||isNaN(X)||isNaN(I)||isNaN(U))throw Ln.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var te=this.ctx.transform.applyToPoint(new o(q,X)),ae=this.ctx.transform.applyToPoint(new o(I,U));this.path.push({type:"qct",x1:ae.x,y1:ae.y,x:te.x,y:te.y}),this.ctx.lastPoint=new o(te.x,te.y)},h.prototype.bezierCurveTo=function(I,U,q,X,te,ae){if(isNaN(te)||isNaN(ae)||isNaN(I)||isNaN(U)||isNaN(q)||isNaN(X))throw Ln.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var le=this.ctx.transform.applyToPoint(new o(te,ae)),me=this.ctx.transform.applyToPoint(new o(I,U)),Le=this.ctx.transform.applyToPoint(new o(q,X));this.path.push({type:"bct",x1:me.x,y1:me.y,x2:Le.x,y2:Le.y,x:le.x,y:le.y}),this.ctx.lastPoint=new o(le.x,le.y)},h.prototype.arc=function(I,U,q,X,te,ae){if(isNaN(I)||isNaN(U)||isNaN(q)||isNaN(X)||isNaN(te))throw Ln.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(ae=!!ae,!this.ctx.transform.isIdentity){var le=this.ctx.transform.applyToPoint(new o(I,U));I=le.x,U=le.y;var me=this.ctx.transform.applyToPoint(new o(0,q)),Le=this.ctx.transform.applyToPoint(new o(0,0));q=Math.sqrt(Math.pow(me.x-Le.x,2)+Math.pow(me.y-Le.y,2))}Math.abs(te-X)>=2*Math.PI&&(X=0,te=2*Math.PI),this.path.push({type:"arc",x:I,y:U,radius:q,startAngle:X,endAngle:te,counterclockwise:ae})},h.prototype.arcTo=function(I,U,q,X,te){throw new Error("arcTo not implemented.")},h.prototype.rect=function(I,U,q,X){if(isNaN(I)||isNaN(U)||isNaN(q)||isNaN(X))throw Ln.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(I,U),this.lineTo(I+q,U),this.lineTo(I+q,U+X),this.lineTo(I,U+X),this.lineTo(I,U),this.lineTo(I+q,U),this.lineTo(I,U)},h.prototype.fillRect=function(I,U,q,X){if(isNaN(I)||isNaN(U)||isNaN(q)||isNaN(X))throw Ln.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!p.call(this)){var te={};this.lineCap!=="butt"&&(te.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(te.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(I,U,q,X),this.fill(),te.hasOwnProperty("lineCap")&&(this.lineCap=te.lineCap),te.hasOwnProperty("lineJoin")&&(this.lineJoin=te.lineJoin)}},h.prototype.strokeRect=function(I,U,q,X){if(isNaN(I)||isNaN(U)||isNaN(q)||isNaN(X))throw Ln.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");y.call(this)||(this.beginPath(),this.rect(I,U,q,X),this.stroke())},h.prototype.clearRect=function(I,U,q,X){if(isNaN(I)||isNaN(U)||isNaN(q)||isNaN(X))throw Ln.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(I,U,q,X))},h.prototype.save=function(I){I=typeof I!="boolean"||I;for(var U=this.pdf.internal.getCurrentPageInfo().pageNumber,q=0;q<this.pdf.internal.getNumberOfPages();q++)this.pdf.setPage(q+1),this.pdf.internal.out("q");if(this.pdf.setPage(U),I){this.ctx.fontSize=this.pdf.internal.getFontSize();var X=new u(this.ctx);this.ctxStack.push(this.ctx),this.ctx=X}},h.prototype.restore=function(I){I=typeof I!="boolean"||I;for(var U=this.pdf.internal.getCurrentPageInfo().pageNumber,q=0;q<this.pdf.internal.getNumberOfPages();q++)this.pdf.setPage(q+1),this.pdf.internal.out("Q");this.pdf.setPage(U),I&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},h.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var f=function(I){var U,q,X,te;if(I.isCanvasGradient===!0&&(I=I.getColor()),!I)return{r:0,g:0,b:0,a:0,style:I};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(I))U=0,q=0,X=0,te=0;else{var ae=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(I);if(ae!==null)U=parseInt(ae[1]),q=parseInt(ae[2]),X=parseInt(ae[3]),te=1;else if((ae=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(I))!==null)U=parseInt(ae[1]),q=parseInt(ae[2]),X=parseInt(ae[3]),te=parseFloat(ae[4]);else{if(te=1,typeof I=="string"&&I.charAt(0)!=="#"){var le=new SO(I);I=le.ok?le.toHex():"#000000"}I.length===4?(U=I.substring(1,2),U+=U,q=I.substring(2,3),q+=q,X=I.substring(3,4),X+=X):(U=I.substring(1,3),q=I.substring(3,5),X=I.substring(5,7)),U=parseInt(U,16),q=parseInt(q,16),X=parseInt(X,16)}}return{r:U,g:q,b:X,a:te,style:I}},p=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},y=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};h.prototype.fillText=function(I,U,q,X){if(isNaN(U)||isNaN(q)||typeof I!="string")throw Ln.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(X=isNaN(X)?void 0:X,!p.call(this)){var te=V(this.ctx.transform.rotation),ae=this.ctx.transform.scaleX;E.call(this,{text:I,x:U,y:q,scale:ae,angle:te,align:this.textAlign,maxWidth:X})}},h.prototype.strokeText=function(I,U,q,X){if(isNaN(U)||isNaN(q)||typeof I!="string")throw Ln.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!y.call(this)){X=isNaN(X)?void 0:X;var te=V(this.ctx.transform.rotation),ae=this.ctx.transform.scaleX;E.call(this,{text:I,x:U,y:q,scale:ae,renderingMode:"stroke",angle:te,align:this.textAlign,maxWidth:X})}},h.prototype.measureText=function(I){if(typeof I!="string")throw Ln.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var U=this.pdf,q=this.pdf.internal.scaleFactor,X=U.internal.getFontSize(),te=U.getStringUnitWidth(I)*X/U.internal.scaleFactor,ae=function(le){var me=(le=le||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return me}}),this};return new ae({width:te*=Math.round(96*q/72*1e4)/1e4})},h.prototype.scale=function(I,U){if(isNaN(I)||isNaN(U))throw Ln.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var q=new c(I,0,0,U,0,0);this.ctx.transform=this.ctx.transform.multiply(q)},h.prototype.rotate=function(I){if(isNaN(I))throw Ln.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var U=new c(Math.cos(I),Math.sin(I),-Math.sin(I),Math.cos(I),0,0);this.ctx.transform=this.ctx.transform.multiply(U)},h.prototype.translate=function(I,U){if(isNaN(I)||isNaN(U))throw Ln.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var q=new c(1,0,0,1,I,U);this.ctx.transform=this.ctx.transform.multiply(q)},h.prototype.transform=function(I,U,q,X,te,ae){if(isNaN(I)||isNaN(U)||isNaN(q)||isNaN(X)||isNaN(te)||isNaN(ae))throw Ln.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var le=new c(I,U,q,X,te,ae);this.ctx.transform=this.ctx.transform.multiply(le)},h.prototype.setTransform=function(I,U,q,X,te,ae){I=isNaN(I)?1:I,U=isNaN(U)?0:U,q=isNaN(q)?0:q,X=isNaN(X)?1:X,te=isNaN(te)?0:te,ae=isNaN(ae)?0:ae,this.ctx.transform=new c(I,U,q,X,te,ae)};var g=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};h.prototype.drawImage=function(I,U,q,X,te,ae,le,me,Le){var ie=this.pdf.getImageProperties(I),Ne=1,Be=1,Ue=1,_e=1;X!==void 0&&me!==void 0&&(Ue=me/X,_e=Le/te,Ne=ie.width/X*me/X,Be=ie.height/te*Le/te),ae===void 0&&(ae=U,le=q,U=0,q=0),X!==void 0&&me===void 0&&(me=X,Le=te),X===void 0&&me===void 0&&(me=ie.width,Le=ie.height);for(var ue,wt=this.ctx.transform.decompose(),gt=V(wt.rotate.shx),ve=new c,we=(ve=(ve=(ve=ve.multiply(wt.translate)).multiply(wt.skew)).multiply(wt.scale)).applyToRectangle(new l(ae-U*Ue,le-q*_e,X*Ne,te*Be)),Se=x.call(this,we),De=[],Ie=0;Ie<Se.length;Ie+=1)De.indexOf(Se[Ie])===-1&&De.push(Se[Ie]);if(b(De),this.autoPaging)for(var oe=De[0],Ee=De[De.length-1],G=oe;G<Ee+1;G++){this.pdf.setPage(G);var ge=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Pe=G===1?this.posY+this.margin[0]:this.margin[0],Ve=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],pt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],et=G===1?0:Ve+(G-2)*pt;if(this.ctx.clip_path.length!==0){var Zt=this.path;ue=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=v(ue,this.posX+this.margin[3],-et+Pe+this.ctx.prevPageLastElemOffset),S.call(this,"fill",!0),this.path=Zt}var Ze=JSON.parse(JSON.stringify(we));Ze=v([Ze],this.posX+this.margin[3],-et+Pe+this.ctx.prevPageLastElemOffset)[0];var jt=(G>oe||G<Ee)&&g.call(this);jt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ge,pt,null).clip().discardPath()),this.pdf.addImage(I,"JPEG",Ze.x,Ze.y,Ze.w,Ze.h,null,null,gt),jt&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(I,"JPEG",we.x,we.y,we.w,we.h,null,null,gt)};var x=function(I,U,q){var X=[];U=U||this.pdf.internal.pageSize.width,q=q||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var te=this.posY+this.ctx.prevPageLastElemOffset;switch(I.type){default:case"mt":case"lt":X.push(Math.floor((I.y+te)/q)+1);break;case"arc":X.push(Math.floor((I.y+te-I.radius)/q)+1),X.push(Math.floor((I.y+te+I.radius)/q)+1);break;case"qct":var ae=B(this.ctx.lastPoint.x,this.ctx.lastPoint.y,I.x1,I.y1,I.x,I.y);X.push(Math.floor((ae.y+te)/q)+1),X.push(Math.floor((ae.y+ae.h+te)/q)+1);break;case"bct":var le=Y(this.ctx.lastPoint.x,this.ctx.lastPoint.y,I.x1,I.y1,I.x2,I.y2,I.x,I.y);X.push(Math.floor((le.y+te)/q)+1),X.push(Math.floor((le.y+le.h+te)/q)+1);break;case"rect":X.push(Math.floor((I.y+te)/q)+1),X.push(Math.floor((I.y+I.h+te)/q)+1)}for(var me=0;me<X.length;me+=1)for(;this.pdf.internal.getNumberOfPages()<X[me];)m.call(this);return X},m=function(){var I=this.fillStyle,U=this.strokeStyle,q=this.font,X=this.lineCap,te=this.lineWidth,ae=this.lineJoin;this.pdf.addPage(),this.fillStyle=I,this.strokeStyle=U,this.font=q,this.lineCap=X,this.lineWidth=te,this.lineJoin=ae},v=function(I,U,q){for(var X=0;X<I.length;X++)switch(I[X].type){case"bct":I[X].x2+=U,I[X].y2+=q;case"qct":I[X].x1+=U,I[X].y1+=q;case"mt":case"lt":case"arc":default:I[X].x+=U,I[X].y+=q}return I},b=function(I){return I.sort(function(U,q){return U-q})},C=function(I,U){for(var q,X,te=this.fillStyle,ae=this.strokeStyle,le=this.lineCap,me=this.lineWidth,Le=Math.abs(me*this.ctx.transform.scaleX),ie=this.lineJoin,Ne=JSON.parse(JSON.stringify(this.path)),Be=JSON.parse(JSON.stringify(this.path)),Ue=[],_e=0;_e<Be.length;_e++)if(Be[_e].x!==void 0)for(var ue=x.call(this,Be[_e]),wt=0;wt<ue.length;wt+=1)Ue.indexOf(ue[wt])===-1&&Ue.push(ue[wt]);for(var gt=0;gt<Ue.length;gt++)for(;this.pdf.internal.getNumberOfPages()<Ue[gt];)m.call(this);if(b(Ue),this.autoPaging)for(var ve=Ue[0],we=Ue[Ue.length-1],Se=ve;Se<we+1;Se++){this.pdf.setPage(Se),this.fillStyle=te,this.strokeStyle=ae,this.lineCap=le,this.lineWidth=Le,this.lineJoin=ie;var De=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Ie=Se===1?this.posY+this.margin[0]:this.margin[0],oe=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ee=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],G=Se===1?0:oe+(Se-2)*Ee;if(this.ctx.clip_path.length!==0){var ge=this.path;q=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=v(q,this.posX+this.margin[3],-G+Ie+this.ctx.prevPageLastElemOffset),S.call(this,I,!0),this.path=ge}if(X=JSON.parse(JSON.stringify(Ne)),this.path=v(X,this.posX+this.margin[3],-G+Ie+this.ctx.prevPageLastElemOffset),U===!1||Se===0){var Pe=(Se>ve||Se<we)&&g.call(this);Pe&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],De,Ee,null).clip().discardPath()),S.call(this,I,U),Pe&&this.pdf.restoreGraphicsState()}this.lineWidth=me}else this.lineWidth=Le,S.call(this,I,U),this.lineWidth=me;this.path=Ne},S=function(I,U){if((I!=="stroke"||U||!y.call(this))&&(I==="stroke"||U||!p.call(this))){for(var q,X,te=[],ae=this.path,le=0;le<ae.length;le++){var me=ae[le];switch(me.type){case"begin":te.push({begin:!0});break;case"close":te.push({close:!0});break;case"mt":te.push({start:me,deltas:[],abs:[]});break;case"lt":var Le=te.length;if(ae[le-1]&&!isNaN(ae[le-1].x)&&(q=[me.x-ae[le-1].x,me.y-ae[le-1].y],Le>0)){for(;Le>=0;Le--)if(te[Le-1].close!==!0&&te[Le-1].begin!==!0){te[Le-1].deltas.push(q),te[Le-1].abs.push(me);break}}break;case"bct":q=[me.x1-ae[le-1].x,me.y1-ae[le-1].y,me.x2-ae[le-1].x,me.y2-ae[le-1].y,me.x-ae[le-1].x,me.y-ae[le-1].y],te[te.length-1].deltas.push(q);break;case"qct":var ie=ae[le-1].x+2/3*(me.x1-ae[le-1].x),Ne=ae[le-1].y+2/3*(me.y1-ae[le-1].y),Be=me.x+2/3*(me.x1-me.x),Ue=me.y+2/3*(me.y1-me.y),_e=me.x,ue=me.y;q=[ie-ae[le-1].x,Ne-ae[le-1].y,Be-ae[le-1].x,Ue-ae[le-1].y,_e-ae[le-1].x,ue-ae[le-1].y],te[te.length-1].deltas.push(q);break;case"arc":te.push({deltas:[],abs:[],arc:!0}),Array.isArray(te[te.length-1].abs)&&te[te.length-1].abs.push(me)}}X=U?null:I==="stroke"?"stroke":"fill";for(var wt=!1,gt=0;gt<te.length;gt++)if(te[gt].arc)for(var ve=te[gt].abs,we=0;we<ve.length;we++){var Se=ve[we];Se.type==="arc"?N.call(this,Se.x,Se.y,Se.radius,Se.startAngle,Se.endAngle,Se.counterclockwise,void 0,U,!wt):A.call(this,Se.x,Se.y),wt=!0}else if(te[gt].close===!0)this.pdf.internal.out("h"),wt=!1;else if(te[gt].begin!==!0){var De=te[gt].start.x,Ie=te[gt].start.y;O.call(this,te[gt].deltas,De,Ie),wt=!0}X&&M.call(this,X),U&&L.call(this)}},P=function(I){var U=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,q=U*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return I-q;case"top":return I+U-q;case"hanging":return I+U-2*q;case"middle":return I+U/2-q;case"ideographic":return I;case"alphabetic":default:return I}},D=function(I){return I+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};h.prototype.createLinearGradient=function(){var I=function(){};return I.colorStops=[],I.addColorStop=function(U,q){this.colorStops.push([U,q])},I.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},I.isCanvasGradient=!0,I},h.prototype.createPattern=function(){return this.createLinearGradient()},h.prototype.createRadialGradient=function(){return this.createLinearGradient()};var N=function(I,U,q,X,te,ae,le,me,Le){for(var ie=z.call(this,q,X,te,ae),Ne=0;Ne<ie.length;Ne++){var Be=ie[Ne];Ne===0&&(Le?T.call(this,Be.x1+I,Be.y1+U):A.call(this,Be.x1+I,Be.y1+U)),W.call(this,I,U,Be.x2,Be.y2,Be.x3,Be.y3,Be.x4,Be.y4)}me?L.call(this):M.call(this,le)},M=function(I){switch(I){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},L=function(){this.pdf.clip(),this.pdf.discardPath()},T=function(I,U){this.pdf.internal.out(n(I)+" "+r(U)+" m")},E=function(I){var U;switch(I.align){case"right":case"end":U="right";break;case"center":U="center";break;case"left":case"start":default:U="left"}var q=this.pdf.getTextDimensions(I.text),X=P.call(this,I.y),te=D.call(this,X)-q.h,ae=this.ctx.transform.applyToPoint(new o(I.x,X)),le=this.ctx.transform.decompose(),me=new c;me=(me=(me=me.multiply(le.translate)).multiply(le.skew)).multiply(le.scale);for(var Le,ie,Ne,Be=this.ctx.transform.applyToRectangle(new l(I.x,X,q.w,q.h)),Ue=me.applyToRectangle(new l(I.x,te,q.w,q.h)),_e=x.call(this,Ue),ue=[],wt=0;wt<_e.length;wt+=1)ue.indexOf(_e[wt])===-1&&ue.push(_e[wt]);if(b(ue),this.autoPaging)for(var gt=ue[0],ve=ue[ue.length-1],we=gt;we<ve+1;we++){this.pdf.setPage(we);var Se=we===1?this.posY+this.margin[0]:this.margin[0],De=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ie=this.pdf.internal.pageSize.height-this.margin[2],oe=Ie-this.margin[0],Ee=this.pdf.internal.pageSize.width-this.margin[1],G=Ee-this.margin[3],ge=we===1?0:De+(we-2)*oe;if(this.ctx.clip_path.length!==0){var Pe=this.path;Le=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=v(Le,this.posX+this.margin[3],-1*ge+Se),S.call(this,"fill",!0),this.path=Pe}var Ve=v([JSON.parse(JSON.stringify(Ue))],this.posX+this.margin[3],-ge+Se+this.ctx.prevPageLastElemOffset)[0];I.scale>=.01&&(ie=this.pdf.internal.getFontSize(),this.pdf.setFontSize(ie*I.scale),Ne=this.lineWidth,this.lineWidth=Ne*I.scale);var pt=this.autoPaging!=="text";if(pt||Ve.y+Ve.h<=Ie){if(pt||Ve.y>=Se&&Ve.x<=Ee){var et=pt?I.text:this.pdf.splitTextToSize(I.text,I.maxWidth||Ee-Ve.x)[0],Zt=v([JSON.parse(JSON.stringify(Be))],this.posX+this.margin[3],-ge+Se+this.ctx.prevPageLastElemOffset)[0],Ze=pt&&(we>gt||we<ve)&&g.call(this);Ze&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],G,oe,null).clip().discardPath()),this.pdf.text(et,Zt.x,Zt.y,{angle:I.angle,align:U,renderingMode:I.renderingMode}),Ze&&this.pdf.restoreGraphicsState()}}else Ve.y<Ie&&(this.ctx.prevPageLastElemOffset+=Ie-Ve.y);I.scale>=.01&&(this.pdf.setFontSize(ie),this.lineWidth=Ne)}else I.scale>=.01&&(ie=this.pdf.internal.getFontSize(),this.pdf.setFontSize(ie*I.scale),Ne=this.lineWidth,this.lineWidth=Ne*I.scale),this.pdf.text(I.text,ae.x+this.posX,ae.y+this.posY,{angle:I.angle,align:U,renderingMode:I.renderingMode,maxWidth:I.maxWidth}),I.scale>=.01&&(this.pdf.setFontSize(ie),this.lineWidth=Ne)},A=function(I,U,q,X){q=q||0,X=X||0,this.pdf.internal.out(n(I+q)+" "+r(U+X)+" l")},O=function(I,U,q){return this.pdf.lines(I,U,q,null,null)},W=function(I,U,q,X,te,ae,le,me){this.pdf.internal.out([t(a(q+I)),t(i(X+U)),t(a(te+I)),t(i(ae+U)),t(a(le+I)),t(i(me+U)),"c"].join(" "))},z=function(I,U,q,X){for(var te=2*Math.PI,ae=Math.PI/2;U>q;)U-=te;var le=Math.abs(q-U);le<te&&X&&(le=te-le);for(var me=[],Le=X?-1:1,ie=U;le>1e-5;){var Ne=ie+Le*Math.min(le,ae);me.push(F.call(this,I,ie,Ne)),le-=Math.abs(Ne-ie),ie=Ne}return me},F=function(I,U,q){var X=(q-U)/2,te=I*Math.cos(X),ae=I*Math.sin(X),le=te,me=-ae,Le=le*le+me*me,ie=Le+le*te+me*ae,Ne=4/3*(Math.sqrt(2*Le*ie)-ie)/(le*ae-me*te),Be=le-Ne*me,Ue=me+Ne*le,_e=Be,ue=-Ue,wt=X+U,gt=Math.cos(wt),ve=Math.sin(wt);return{x1:I*Math.cos(U),y1:I*Math.sin(U),x2:Be*gt-Ue*ve,y2:Be*ve+Ue*gt,x3:_e*gt-ue*ve,y3:_e*ve+ue*gt,x4:I*Math.cos(q),y4:I*Math.sin(q)}},V=function(I){return 180*I/Math.PI},B=function(I,U,q,X,te,ae){var le=I+.5*(q-I),me=U+.5*(X-U),Le=te+.5*(q-te),ie=ae+.5*(X-ae),Ne=Math.min(I,te,le,Le),Be=Math.max(I,te,le,Le),Ue=Math.min(U,ae,me,ie),_e=Math.max(U,ae,me,ie);return new l(Ne,Ue,Be-Ne,_e-Ue)},Y=function(I,U,q,X,te,ae,le,me){var Le,ie,Ne,Be,Ue,_e,ue,wt,gt,ve,we,Se,De,Ie,oe=q-I,Ee=X-U,G=te-q,ge=ae-X,Pe=le-te,Ve=me-ae;for(ie=0;ie<41;ie++)gt=(ue=(Ne=I+(Le=ie/40)*oe)+Le*((Ue=q+Le*G)-Ne))+Le*(Ue+Le*(te+Le*Pe-Ue)-ue),ve=(wt=(Be=U+Le*Ee)+Le*((_e=X+Le*ge)-Be))+Le*(_e+Le*(ae+Le*Ve-_e)-wt),ie==0?(we=gt,Se=ve,De=gt,Ie=ve):(we=Math.min(we,gt),Se=Math.min(Se,ve),De=Math.max(De,gt),Ie=Math.max(Ie,ve));return new l(Math.round(we),Math.round(Se),Math.round(De-we),Math.round(Ie-Se))},$=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var I,U,q=(I=this.ctx.lineDash,U=this.ctx.lineDashOffset,JSON.stringify({lineDash:I,lineDashOffset:U}));this.prevLineDash!==q&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=q)}}})(Ot.API),function(e){var t=function(i){var o,l,c,d,u,h,f,p,y,g;for(l=[],c=0,d=(i+=o="\0\0\0\0".slice(i.length%4||4)).length;d>c;c+=4)(u=(i.charCodeAt(c)<<24)+(i.charCodeAt(c+1)<<16)+(i.charCodeAt(c+2)<<8)+i.charCodeAt(c+3))!==0?(h=(u=((u=((u=((u=(u-(g=u%85))/85)-(y=u%85))/85)-(p=u%85))/85)-(f=u%85))/85)%85,l.push(h+33,f+33,p+33,y+33,g+33)):l.push(122);return function(x,m){for(var v=m;v>0;v--)x.pop()}(l,o.length),String.fromCharCode.apply(String,l)+"~>"},n=function(i){var o,l,c,d,u,h=String,f="length",p=255,y="charCodeAt",g="slice",x="replace";for(i[g](-2),i=i[g](0,-2)[x](/\s/g,"")[x]("z","!!!!!"),c=[],d=0,u=(i+=o="uuuuu"[g](i[f]%5||5))[f];u>d;d+=5)l=52200625*(i[y](d)-33)+614125*(i[y](d+1)-33)+7225*(i[y](d+2)-33)+85*(i[y](d+3)-33)+(i[y](d+4)-33),c.push(p&l>>24,p&l>>16,p&l>>8,p&l);return function(m,v){for(var b=v;b>0;b--)m.pop()}(c,o[f]),h.fromCharCode.apply(h,c)},r=function(i){var o=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((i=i.replace(/\s/g,"")).indexOf(">")!==-1&&(i=i.substr(0,i.indexOf(">"))),i.length%2&&(i+="0"),o.test(i)===!1)return"";for(var l="",c=0;c<i.length;c+=2)l+=String.fromCharCode("0x"+(i[c]+i[c+1]));return l},a=function(i){for(var o=new Uint8Array(i.length),l=i.length;l--;)o[l]=i.charCodeAt(l);return i=(o=SN(o)).reduce(function(c,d){return c+String.fromCharCode(d)},"")};e.processDataByFilters=function(i,o){var l=0,c=i||"",d=[];for(typeof(o=o||[])=="string"&&(o=[o]),l=0;l<o.length;l+=1)switch(o[l]){case"ASCII85Decode":case"/ASCII85Decode":c=n(c),d.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":c=t(c),d.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":c=r(c),d.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":c=c.split("").map(function(u){return("0"+u.charCodeAt().toString(16)).slice(-2)}).join("")+">",d.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":c=a(c),d.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[l]+'" is not implemented')}return{data:c,reverseChain:d.reverse().join(" ")}}}(Ot.API),function(e){e.loadFile=function(t,n,r){return function(a,i,o){i=i!==!1,o=typeof o=="function"?o:function(){};var l=void 0;try{l=function(c,d,u){var h=new XMLHttpRequest,f=0,p=function(y){var g=y.length,x=[],m=String.fromCharCode;for(f=0;f<g;f+=1)x.push(m(255&y.charCodeAt(f)));return x.join("")};if(h.open("GET",c,!d),h.overrideMimeType("text/plain; charset=x-user-defined"),d===!1&&(h.onload=function(){h.status===200?u(p(this.responseText)):u(void 0)}),h.send(null),d&&h.status===200)return p(h.responseText)}(a,i,o)}catch{}return l}(t,n,r)},e.loadImageFile=e.loadFile}(Ot.API),function(e){function t(){return(Wt.html2canvas?Promise.resolve(Wt.html2canvas):yN(()=>import("./html2canvas.esm-e0a7d97b.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load html2canvas: "+o))}).then(function(o){return o.default?o.default:o})}function n(){return(Wt.DOMPurify?Promise.resolve(Wt.DOMPurify):yN(()=>import("./purify.es-2de9db7f.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load dompurify: "+o))}).then(function(o){return o.default?o.default:o})}var r=function(o){var l=on(o);return l==="undefined"?"undefined":l==="string"||o instanceof String?"string":l==="number"||o instanceof Number?"number":l==="function"||o instanceof Function?"function":o&&o.constructor===Array?"array":o&&o.nodeType===1?"element":l==="object"?"object":"unknown"},a=function(o,l){var c=document.createElement(o);for(var d in l.className&&(c.className=l.className),l.innerHTML&&l.dompurify&&(c.innerHTML=l.dompurify.sanitize(l.innerHTML)),l.style)c.style[d]=l.style[d];return c},i=function o(l){var c=Object.assign(o.convert(Promise.resolve()),JSON.parse(JSON.stringify(o.template))),d=o.convert(Promise.resolve(),c);return d=(d=d.setProgress(1,o,1,[o])).set(l)};(i.prototype=Object.create(Promise.prototype)).constructor=i,i.convert=function(o,l){return o.__proto__=l||i.prototype,o},i.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},i.prototype.from=function(o,l){return this.then(function(){switch(l=l||function(c){switch(r(c)){case"string":return"string";case"element":return c.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(o)){case"string":return this.then(n).then(function(c){return this.set({src:a("div",{innerHTML:o,dompurify:c})})});case"element":return this.set({src:o});case"canvas":return this.set({canvas:o});case"img":return this.set({img:o});default:return this.error("Unknown source type.")}})},i.prototype.to=function(o){switch(o){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},i.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var o={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},l=function c(d,u){for(var h=d.nodeType===3?document.createTextNode(d.nodeValue):d.cloneNode(!1),f=d.firstChild;f;f=f.nextSibling)u!==!0&&f.nodeType===1&&f.nodeName==="SCRIPT"||h.appendChild(c(f,u));return d.nodeType===1&&(d.nodeName==="CANVAS"?(h.width=d.width,h.height=d.height,h.getContext("2d").drawImage(d,0,0)):d.nodeName!=="TEXTAREA"&&d.nodeName!=="SELECT"||(h.value=d.value),h.addEventListener("load",function(){h.scrollTop=d.scrollTop,h.scrollLeft=d.scrollLeft},!0)),h}(this.prop.src,this.opt.html2canvas.javascriptEnabled);l.tagName==="BODY"&&(o.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=a("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=a("div",{className:"html2pdf__container",style:o}),this.prop.container.appendChild(l),this.prop.container.firstChild.appendChild(a("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},i.prototype.toCanvas=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(t).then(function(l){var c=Object.assign({},this.opt.html2canvas);return delete c.onrendered,l(this.prop.container,c)}).then(function(l){(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},i.prototype.toContext2d=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(t).then(function(l){var c=this.opt.jsPDF,d=this.opt.fontFaces,u=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,h=Object.assign({async:!0,allowTaint:!0,scale:u,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete h.onrendered,c.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,c.context2d.posX=this.opt.x,c.context2d.posY=this.opt.y,c.context2d.margin=this.opt.margin,c.context2d.fontFaces=d,d)for(var f=0;f<d.length;++f){var p=d[f],y=p.src.find(function(g){return g.format==="truetype"});y&&c.addFont(y.url,p.ref.name,p.ref.style)}return h.windowHeight=h.windowHeight||0,h.windowHeight=h.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):h.windowHeight,c.context2d.save(!0),l(this.prop.container,h)}).then(function(l){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},i.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var o=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=o})},i.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},i.prototype.output=function(o,l,c){return(c=c||"pdf").toLowerCase()==="img"||c.toLowerCase()==="image"?this.outputImg(o,l):this.outputPdf(o,l)},i.prototype.outputPdf=function(o,l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(o,l)})},i.prototype.outputImg=function(o){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(o){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+o+'" is not supported.'}})},i.prototype.save=function(o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(o?{filename:o}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},i.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},i.prototype.set=function(o){if(r(o)!=="object")return this;var l=Object.keys(o||{}).map(function(c){if(c in i.template.prop)return function(){this.prop[c]=o[c]};switch(c){case"margin":return this.setMargin.bind(this,o.margin);case"jsPDF":return function(){return this.opt.jsPDF=o.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,o.pageSize);default:return function(){this.opt[c]=o[c]}}},this);return this.then(function(){return this.thenList(l)})},i.prototype.get=function(o,l){return this.then(function(){var c=o in i.template.prop?this.prop[o]:this.opt[o];return l?l(c):c})},i.prototype.setMargin=function(o){return this.then(function(){switch(r(o)){case"number":o=[o,o,o,o];case"array":if(o.length===2&&(o=[o[0],o[1],o[0],o[1]]),o.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=o}).then(this.setPageSize)},i.prototype.setPageSize=function(o){function l(c,d){return Math.floor(c*d/72*96)}return this.then(function(){(o=o||Ot.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(o.inner={width:o.width-this.opt.margin[1]-this.opt.margin[3],height:o.height-this.opt.margin[0]-this.opt.margin[2]},o.inner.px={width:l(o.inner.width,o.k),height:l(o.inner.height,o.k)},o.inner.ratio=o.inner.height/o.inner.width),this.prop.pageSize=o})},i.prototype.setProgress=function(o,l,c,d){return o!=null&&(this.progress.val=o),l!=null&&(this.progress.state=l),c!=null&&(this.progress.n=c),d!=null&&(this.progress.stack=d),this.progress.ratio=this.progress.val/this.progress.state,this},i.prototype.updateProgress=function(o,l,c,d){return this.setProgress(o?this.progress.val+o:null,l||null,c?this.progress.n+c:null,d?this.progress.stack.concat(d):null)},i.prototype.then=function(o,l){var c=this;return this.thenCore(o,l,function(d,u){return c.updateProgress(null,null,1,[d]),Promise.prototype.then.call(this,function(h){return c.updateProgress(null,d),h}).then(d,u).then(function(h){return c.updateProgress(1),h})})},i.prototype.thenCore=function(o,l,c){c=c||Promise.prototype.then,o&&(o=o.bind(this)),l&&(l=l.bind(this));var d=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:i.convert(Object.assign({},this),Promise.prototype),u=c.call(d,o,l);return i.convert(u,this.__proto__)},i.prototype.thenExternal=function(o,l){return Promise.prototype.then.call(this,o,l)},i.prototype.thenList=function(o){var l=this;return o.forEach(function(c){l=l.thenCore(c)}),l},i.prototype.catch=function(o){o&&(o=o.bind(this));var l=Promise.prototype.catch.call(this,o);return i.convert(l,this)},i.prototype.catchExternal=function(o){return Promise.prototype.catch.call(this,o)},i.prototype.error=function(o){return this.then(function(){throw new Error(o)})},i.prototype.using=i.prototype.set,i.prototype.saveAs=i.prototype.save,i.prototype.export=i.prototype.output,i.prototype.run=i.prototype.then,Ot.getPageSize=function(o,l,c){if(on(o)==="object"){var d=o;o=d.orientation,l=d.unit||l,c=d.format||c}l=l||"mm",c=c||"a4",o=(""+(o||"P")).toLowerCase();var u,h=(""+c).toLowerCase(),f={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(l){case"pt":u=1;break;case"mm":u=72/25.4;break;case"cm":u=72/2.54;break;case"in":u=72;break;case"px":u=.75;break;case"pc":case"em":u=12;break;case"ex":u=6;break;default:throw"Invalid unit: "+l}var p,y=0,g=0;if(f.hasOwnProperty(h))y=f[h][1]/u,g=f[h][0]/u;else try{y=c[1],g=c[0]}catch{throw new Error("Invalid format: "+c)}if(o==="p"||o==="portrait")o="p",g>y&&(p=g,g=y,y=p);else{if(o!=="l"&&o!=="landscape")throw"Invalid orientation: "+o;o="l",y>g&&(p=g,g=y,y=p)}return{width:g,height:y,unit:l,k:u,orientation:o}},e.html=function(o,l){(l=l||{}).callback=l.callback||function(){},l.html2canvas=l.html2canvas||{},l.html2canvas.canvas=l.html2canvas.canvas||this.canvas,l.jsPDF=l.jsPDF||this,l.fontFaces=l.fontFaces?l.fontFaces.map(TN):null;var c=new i(l);return l.worker?c:c.from(o).doCallback()}}(Ot.API),Ot.API.addJS=function(e){return DE=e,this.internal.events.subscribe("postPutResources",function(){Ox=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Ox+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),PE=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+DE+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Ox!==void 0&&PE!==void 0&&this.internal.out("/Names <</JavaScript "+Ox+" 0 R>>")}),this},function(e){var t;e.events.push(["postPutResources",function(){var n=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var a=n.outline.render().split(/\r\n/),i=0;i<a.length;i++){var o=a[i],l=r.exec(o);if(l!=null){var c=l[1];n.internal.newObjectDeferredBegin(c,!1)}n.internal.write(o)}if(this.outline.createNamedDestinations){var d=this.internal.pages.length,u=[];for(i=0;i<d;i++){var h=n.internal.newObject();u.push(h);var f=n.internal.getPageInfo(i+1);n.internal.write("<< /D["+f.objId+" 0 R /XYZ null null null]>> endobj")}var p=n.internal.newObject();for(n.internal.write("<< /Names [ "),i=0;i<u.length;i++)n.internal.write("(page_"+(i+1)+")"+u[i]+" 0 R");n.internal.write(" ] >>","endobj"),t=n.internal.newObject(),n.internal.write("<< /Dests "+p+" 0 R"),n.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var n=this;n.outline={createNamedDestinations:!1,root:{children:[]}},n.outline.add=function(r,a,i){var o={title:a,options:i,children:[]};return r==null&&(r=this.root),r.children.push(o),o},n.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=n,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},n.outline.genIds_r=function(r){r.id=n.internal.newObjectDeferred();for(var a=0;a<r.children.length;a++)this.genIds_r(r.children[a])},n.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},n.outline.renderItems=function(r){for(var a=this.ctx.pdf.internal.getVerticalCoordinateString,i=0;i<r.children.length;i++){var o=r.children[i];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(r)),i>0&&this.line("/Prev "+this.makeRef(r.children[i-1])),i<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[i+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var l=this.count=this.count_r({count:0},o);if(l>0&&this.line("/Count "+l),o.options&&o.options.pageNumber){var c=n.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+c.objId+" 0 R /XYZ 0 "+a(0)+" 0]")}this.objEnd()}for(var d=0;d<r.children.length;d++)this.renderItems(r.children[d])},n.outline.line=function(r){this.ctx.val+=r+`\r
`},n.outline.makeRef=function(r){return r.id+" 0 R"},n.outline.makeString=function(r){return"("+n.internal.pdfEscape(r)+")"},n.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},n.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},n.outline.count_r=function(r,a){for(var i=0;i<a.children.length;i++)r.count++,this.count_r(r,a.children[i]);return r.count}}])}(Ot.API),function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(n,r,a,i,o,l){var c,d=this.decode.DCT_DECODE,u=null;if(typeof n=="string"||this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n)){switch(n=o||n,n=this.__addimage__.isArrayBuffer(n)?new Uint8Array(n):n,(c=function(h){for(var f,p=256*h.charCodeAt(4)+h.charCodeAt(5),y=h.length,g={width:0,height:0,numcomponents:1},x=4;x<y;x+=2){if(x+=p,t.indexOf(h.charCodeAt(x+1))!==-1){f=256*h.charCodeAt(x+5)+h.charCodeAt(x+6),g={width:256*h.charCodeAt(x+7)+h.charCodeAt(x+8),height:f,numcomponents:h.charCodeAt(x+9)};break}p=256*h.charCodeAt(x+2)+h.charCodeAt(x+3)}return g}(n=this.__addimage__.isArrayBufferView(n)?this.__addimage__.arrayBufferToBinaryString(n):n)).numcomponents){case 1:l=this.color_spaces.DEVICE_GRAY;break;case 4:l=this.color_spaces.DEVICE_CMYK;break;case 3:l=this.color_spaces.DEVICE_RGB}u={data:n,width:c.width,height:c.height,colorSpace:l,bitsPerComponent:8,filter:d,index:r,alias:a}}return u}}(Ot.API);var $h,Fx,kE,EE,TE,ane=function(){var e,t,n;function r(i){var o,l,c,d,u,h,f,p,y,g,x,m,v,b;for(this.data=i,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},h=null;;){switch(o=this.readUInt32(),y=(function(){var C,S;for(S=[],C=0;C<4;++C)S.push(String.fromCharCode(this.data[this.pos++]));return S}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(o);break;case"fcTL":h&&this.animation.frames.push(h),this.pos+=4,h={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},u=this.readUInt16(),d=this.readUInt16()||100,h.delay=1e3*u/d,h.disposeOp=this.data[this.pos++],h.blendOp=this.data[this.pos++],h.data=[];break;case"IDAT":case"fdAT":for(y==="fdAT"&&(this.pos+=4,o-=4),i=(h!=null?h.data:void 0)||this.imgData,m=0;0<=o?m<o:m>o;0<=o?++m:--m)i.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(c=this.palette.length/3,this.transparency.indexed=this.read(o),this.transparency.indexed.length>c)throw new Error("More transparent colors than palette size");if((g=c-this.transparency.indexed.length)>0)for(v=0;0<=g?v<g:v>g;0<=g?++v:--v)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(o)[0];break;case 2:this.transparency.rgb=this.read(o)}break;case"tEXt":f=(x=this.read(o)).indexOf(0),p=String.fromCharCode.apply(String,x.slice(0,f)),this.text[p]=String.fromCharCode.apply(String,x.slice(f+1));break;case"IEND":return h&&this.animation.frames.push(h),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(b=this.colorType)===4||b===6,l=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*l,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=o}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}r.prototype.read=function(i){var o,l;for(l=[],o=0;0<=i?o<i:o>i;0<=i?++o:--o)l.push(this.data[this.pos++]);return l},r.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.decodePixels=function(i){var o=this.pixelBitlength/8,l=new Uint8Array(this.width*this.height*o),c=0,d=this;if(i==null&&(i=this.imgData),i.length===0)return new Uint8Array(0);function u(h,f,p,y){var g,x,m,v,b,C,S,P,D,N,M,L,T,E,A,O,W,z,F,V,B,Y=Math.ceil((d.width-h)/p),$=Math.ceil((d.height-f)/y),I=d.width==Y&&d.height==$;for(E=o*Y,L=I?l:new Uint8Array(E*$),C=i.length,T=0,x=0;T<$&&c<C;){switch(i[c++]){case 0:for(v=W=0;W<E;v=W+=1)L[x++]=i[c++];break;case 1:for(v=z=0;z<E;v=z+=1)g=i[c++],b=v<o?0:L[x-o],L[x++]=(g+b)%256;break;case 2:for(v=F=0;F<E;v=F+=1)g=i[c++],m=(v-v%o)/o,A=T&&L[(T-1)*E+m*o+v%o],L[x++]=(A+g)%256;break;case 3:for(v=V=0;V<E;v=V+=1)g=i[c++],m=(v-v%o)/o,b=v<o?0:L[x-o],A=T&&L[(T-1)*E+m*o+v%o],L[x++]=(g+Math.floor((b+A)/2))%256;break;case 4:for(v=B=0;B<E;v=B+=1)g=i[c++],m=(v-v%o)/o,b=v<o?0:L[x-o],T===0?A=O=0:(A=L[(T-1)*E+m*o+v%o],O=m&&L[(T-1)*E+(m-1)*o+v%o]),S=b+A-O,P=Math.abs(S-b),N=Math.abs(S-A),M=Math.abs(S-O),D=P<=N&&P<=M?b:N<=M?A:O,L[x++]=(g+D)%256;break;default:throw new Error("Invalid filter algorithm: "+i[c-1])}if(!I){var U=((f+T*y)*d.width+h)*o,q=T*E;for(v=0;v<Y;v+=1){for(var X=0;X<o;X+=1)l[U++]=L[q++];U+=(p-1)*o}}T++}}return i=Ite(i),d.interlaceMethod==1?(u(0,0,8,8),u(4,0,8,8),u(0,4,4,8),u(2,0,4,4),u(0,2,2,4),u(1,0,2,2),u(0,1,1,2)):u(0,0,1,1),l},r.prototype.decodePalette=function(){var i,o,l,c,d,u,h,f,p;for(l=this.palette,u=this.transparency.indexed||[],d=new Uint8Array((u.length||0)+l.length),c=0,i=0,o=h=0,f=l.length;h<f;o=h+=3)d[c++]=l[o],d[c++]=l[o+1],d[c++]=l[o+2],d[c++]=(p=u[i++])!=null?p:255;return d},r.prototype.copyToImageData=function(i,o){var l,c,d,u,h,f,p,y,g,x,m;if(c=this.colors,g=null,l=this.hasAlphaChannel,this.palette.length&&(g=(m=this._decodedPalette)!=null?m:this._decodedPalette=this.decodePalette(),c=4,l=!0),y=(d=i.data||i).length,h=g||o,u=f=0,c===1)for(;u<y;)p=g?4*o[u/4]:f,x=h[p++],d[u++]=x,d[u++]=x,d[u++]=x,d[u++]=l?h[p++]:255,f=p;else for(;u<y;)p=g?4*o[u/4]:f,d[u++]=h[p++],d[u++]=h[p++],d[u++]=h[p++],d[u++]=l?h[p++]:255,f=p},r.prototype.decode=function(){var i;return i=new Uint8Array(this.width*this.height*4),this.copyToImageData(i,this.decodePixels()),i};var a=function(){if(Object.prototype.toString.call(Wt)==="[object Window]"){try{t=Wt.document.createElement("canvas"),n=t.getContext("2d")}catch{return!1}return!0}return!1};return a(),e=function(i){var o;if(a()===!0)return n.width=i.width,n.height=i.height,n.clearRect(0,0,i.width,i.height),n.putImageData(i,0,0),(o=new Image).src=t.toDataURL(),o;throw new Error("This method requires a Browser with Canvas-capability.")},r.prototype.decodeFrames=function(i){var o,l,c,d,u,h,f,p;if(this.animation){for(p=[],l=u=0,h=(f=this.animation.frames).length;u<h;l=++u)o=f[l],c=i.createImageData(o.width,o.height),d=this.decodePixels(new Uint8Array(o.data)),this.copyToImageData(c,d),o.imageData=c,p.push(o.image=e(c));return p}},r.prototype.renderFrame=function(i,o){var l,c,d;return l=(c=this.animation.frames)[o],d=c[o-1],o===0&&i.clearRect(0,0,this.width,this.height),(d!=null?d.disposeOp:void 0)===1?i.clearRect(d.xOffset,d.yOffset,d.width,d.height):(d!=null?d.disposeOp:void 0)===2&&i.putImageData(d.imageData,d.xOffset,d.yOffset),l.blendOp===0&&i.clearRect(l.xOffset,l.yOffset,l.width,l.height),i.drawImage(l.image,l.xOffset,l.yOffset)},r.prototype.animate=function(i){var o,l,c,d,u,h,f=this;return l=0,h=this.animation,d=h.numFrames,c=h.frames,u=h.numPlays,(o=function(){var p,y;if(p=l++%d,y=c[p],f.renderFrame(i,p),d>1&&l/d<u)return f.animation._timeout=setTimeout(o,y.delay)})()},r.prototype.stopAnimation=function(){var i;return clearTimeout((i=this.animation)!=null?i._timeout:void 0)},r.prototype.render=function(i){var o,l;return i._png&&i._png.stopAnimation(),i._png=this,i.width=this.width,i.height=this.height,o=i.getContext("2d"),this.animation?(this.decodeFrames(o),this.animate(o)):(l=o.createImageData(this.width,this.height),this.copyToImageData(l,this.decodePixels()),o.putImageData(l,0,0))},r}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function ine(e){var t=0;if(e[t++]!==71||e[t++]!==73||e[t++]!==70||e[t++]!==56||(e[t++]+1&253)!=56||e[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var n=e[t++]|e[t++]<<8,r=e[t++]|e[t++]<<8,a=e[t++],i=a>>7,o=1<<(7&a)+1;e[t++],e[t++];var l=null,c=null;i&&(l=t,c=o,t+=3*o);var d=!0,u=[],h=0,f=null,p=0,y=null;for(this.width=n,this.height=r;d&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(e[t]!==11||e[t+1]==78&&e[t+2]==69&&e[t+3]==84&&e[t+4]==83&&e[t+5]==67&&e[t+6]==65&&e[t+7]==80&&e[t+8]==69&&e[t+9]==50&&e[t+10]==46&&e[t+11]==48&&e[t+12]==3&&e[t+13]==1&&e[t+16]==0)t+=14,y=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((T=e[t++])>=0))throw Error("Invalid block size");if(T===0)break;t+=T}break;case 249:if(e[t++]!==4||e[t+4]!==0)throw new Error("Invalid graphics extension block.");var g=e[t++];h=e[t++]|e[t++]<<8,f=e[t++],!(1&g)&&(f=null),p=g>>2&7,t++;break;case 254:for(;;){if(!((T=e[t++])>=0))throw Error("Invalid block size");if(T===0)break;t+=T}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var x=e[t++]|e[t++]<<8,m=e[t++]|e[t++]<<8,v=e[t++]|e[t++]<<8,b=e[t++]|e[t++]<<8,C=e[t++],S=C>>6&1,P=1<<(7&C)+1,D=l,N=c,M=!1;C>>7&&(M=!0,D=t,N=P,t+=3*P);var L=t;for(t++;;){var T;if(!((T=e[t++])>=0))throw Error("Invalid block size");if(T===0)break;t+=T}u.push({x,y:m,width:v,height:b,has_local_palette:M,palette_offset:D,palette_size:N,data_offset:L,data_length:t-L,transparent_index:f,interlaced:!!S,delay:h,disposal:p});break;case 59:d=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return u.length},this.loopCount=function(){return y},this.frameInfo=function(E){if(E<0||E>=u.length)throw new Error("Frame index out of range.");return u[E]},this.decodeAndBlitFrameBGRA=function(E,A){var O=this.frameInfo(E),W=O.width*O.height,z=new Uint8Array(W);AE(e,O.data_offset,z,W);var F=O.palette_offset,V=O.transparent_index;V===null&&(V=256);var B=O.width,Y=n-B,$=B,I=4*(O.y*n+O.x),U=4*((O.y+O.height)*n+O.x),q=I,X=4*Y;O.interlaced===!0&&(X+=4*n*7);for(var te=8,ae=0,le=z.length;ae<le;++ae){var me=z[ae];if($===0&&($=B,(q+=X)>=U&&(X=4*Y+4*n*(te-1),q=I+(B+Y)*(te<<1),te>>=1)),me===V)q+=4;else{var Le=e[F+3*me],ie=e[F+3*me+1],Ne=e[F+3*me+2];A[q++]=Ne,A[q++]=ie,A[q++]=Le,A[q++]=255}--$}},this.decodeAndBlitFrameRGBA=function(E,A){var O=this.frameInfo(E),W=O.width*O.height,z=new Uint8Array(W);AE(e,O.data_offset,z,W);var F=O.palette_offset,V=O.transparent_index;V===null&&(V=256);var B=O.width,Y=n-B,$=B,I=4*(O.y*n+O.x),U=4*((O.y+O.height)*n+O.x),q=I,X=4*Y;O.interlaced===!0&&(X+=4*n*7);for(var te=8,ae=0,le=z.length;ae<le;++ae){var me=z[ae];if($===0&&($=B,(q+=X)>=U&&(X=4*Y+4*n*(te-1),q=I+(B+Y)*(te<<1),te>>=1)),me===V)q+=4;else{var Le=e[F+3*me],ie=e[F+3*me+1],Ne=e[F+3*me+2];A[q++]=Le,A[q++]=ie,A[q++]=Ne,A[q++]=255}--$}}}function AE(e,t,n,r){for(var a=e[t++],i=1<<a,o=i+1,l=o+1,c=a+1,d=(1<<c)-1,u=0,h=0,f=0,p=e[t++],y=new Int32Array(4096),g=null;;){for(;u<16&&p!==0;)h|=e[t++]<<u,u+=8,p===1?p=e[t++]:--p;if(u<c)break;var x=h&d;if(h>>=c,u-=c,x!==i){if(x===o)break;for(var m=x<l?x:g,v=0,b=m;b>i;)b=y[b]>>8,++v;var C=b;if(f+v+(m!==x?1:0)>r)return void Ln.log("Warning, gif stream longer than expected.");n[f++]=C;var S=f+=v;for(m!==x&&(n[f++]=C),b=m;v--;)b=y[b],n[--S]=255&b,b>>=8;g!==null&&l<4096&&(y[l++]=g<<8|C,l>=d+1&&c<12&&(++c,d=d<<1|1)),g=x}else l=o+1,d=(1<<(c=a+1))-1,g=null}return f!==r&&Ln.log("Warning, gif stream shorter than expected."),n}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function p2(e){var t,n,r,a,i,o=Math.floor,l=new Array(64),c=new Array(64),d=new Array(64),u=new Array(64),h=new Array(65535),f=new Array(65535),p=new Array(64),y=new Array(64),g=[],x=0,m=7,v=new Array(64),b=new Array(64),C=new Array(64),S=new Array(256),P=new Array(2048),D=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],N=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],M=[0,1,2,3,4,5,6,7,8,9,10,11],L=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],T=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],E=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],A=[0,1,2,3,4,5,6,7,8,9,10,11],O=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],W=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function z(I,U){for(var q=0,X=0,te=new Array,ae=1;ae<=16;ae++){for(var le=1;le<=I[ae];le++)te[U[X]]=[],te[U[X]][0]=q,te[U[X]][1]=ae,X++,q++;q*=2}return te}function F(I){for(var U=I[0],q=I[1]-1;q>=0;)U&1<<q&&(x|=1<<m),q--,--m<0&&(x==255?(V(255),V(0)):V(x),m=7,x=0)}function V(I){g.push(I)}function B(I){V(I>>8&255),V(255&I)}function Y(I,U,q,X,te){for(var ae,le=te[0],me=te[240],Le=function(ve,we){var Se,De,Ie,oe,Ee,G,ge,Pe,Ve,pt,et=0;for(Ve=0;Ve<8;++Ve){Se=ve[et],De=ve[et+1],Ie=ve[et+2],oe=ve[et+3],Ee=ve[et+4],G=ve[et+5],ge=ve[et+6];var Zt=Se+(Pe=ve[et+7]),Ze=Se-Pe,jt=De+ge,ct=De-ge,yt=Ie+G,Yt=Ie-G,At=oe+Ee,On=oe-Ee,mn=Zt+At,Bt=Zt-At,Hn=jt+yt,It=jt-yt;ve[et]=mn+Hn,ve[et+4]=mn-Hn;var Mt=.707106781*(It+Bt);ve[et+2]=Bt+Mt,ve[et+6]=Bt-Mt;var nn=.382683433*((mn=On+Yt)-(It=ct+Ze)),Ye=.5411961*mn+nn,dt=1.306562965*It+nn,sn=.707106781*(Hn=Yt+ct),Xr=Ze+sn,Rt=Ze-sn;ve[et+5]=Rt+Ye,ve[et+3]=Rt-Ye,ve[et+1]=Xr+dt,ve[et+7]=Xr-dt,et+=8}for(et=0,Ve=0;Ve<8;++Ve){Se=ve[et],De=ve[et+8],Ie=ve[et+16],oe=ve[et+24],Ee=ve[et+32],G=ve[et+40],ge=ve[et+48];var Sa=Se+(Pe=ve[et+56]),Ua=Se-Pe,js=De+ge,Sr=De-ge,cr=Ie+G,Ms=Ie-G,ol=oe+Ee,fi=oe-Ee,Ca=Sa+ol,Pa=Sa-ol,Da=js+cr,Ya=js-cr;ve[et]=Ca+Da,ve[et+32]=Ca-Da;var sa=.707106781*(Ya+Pa);ve[et+16]=Pa+sa,ve[et+48]=Pa-sa;var Ga=.382683433*((Ca=fi+Ms)-(Ya=Sr+Ua)),bo=.5411961*Ca+Ga,ll=1.306562965*Ya+Ga,cl=.707106781*(Da=Ms+Sr),dl=Ua+cl,ul=Ua-cl;ve[et+40]=ul+bo,ve[et+24]=ul-bo,ve[et+8]=dl+ll,ve[et+56]=dl-ll,et++}for(Ve=0;Ve<64;++Ve)pt=ve[Ve]*we[Ve],p[Ve]=pt>0?pt+.5|0:pt-.5|0;return p}(I,U),ie=0;ie<64;++ie)y[D[ie]]=Le[ie];var Ne=y[0]-q;q=y[0],Ne==0?F(X[0]):(F(X[f[ae=32767+Ne]]),F(h[ae]));for(var Be=63;Be>0&&y[Be]==0;)Be--;if(Be==0)return F(le),q;for(var Ue,_e=1;_e<=Be;){for(var ue=_e;y[_e]==0&&_e<=Be;)++_e;var wt=_e-ue;if(wt>=16){Ue=wt>>4;for(var gt=1;gt<=Ue;++gt)F(me);wt&=15}ae=32767+y[_e],F(te[(wt<<4)+f[ae]]),F(h[ae]),_e++}return Be!=63&&F(le),q}function $(I){I=Math.min(Math.max(I,1),100),i!=I&&(function(U){for(var q=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],X=0;X<64;X++){var te=o((q[X]*U+50)/100);te=Math.min(Math.max(te,1),255),l[D[X]]=te}for(var ae=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],le=0;le<64;le++){var me=o((ae[le]*U+50)/100);me=Math.min(Math.max(me,1),255),c[D[le]]=me}for(var Le=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],ie=0,Ne=0;Ne<8;Ne++)for(var Be=0;Be<8;Be++)d[ie]=1/(l[D[ie]]*Le[Ne]*Le[Be]*8),u[ie]=1/(c[D[ie]]*Le[Ne]*Le[Be]*8),ie++}(I<50?Math.floor(5e3/I):Math.floor(200-2*I)),i=I)}this.encode=function(I,U){U&&$(U),g=new Array,x=0,m=7,B(65496),B(65504),B(16),V(74),V(70),V(73),V(70),V(0),V(1),V(1),V(0),B(1),B(1),V(0),V(0),function(){B(65499),B(132),V(0);for(var De=0;De<64;De++)V(l[De]);V(1);for(var Ie=0;Ie<64;Ie++)V(c[Ie])}(),function(De,Ie){B(65472),B(17),V(8),B(Ie),B(De),V(3),V(1),V(17),V(0),V(2),V(17),V(1),V(3),V(17),V(1)}(I.width,I.height),function(){B(65476),B(418),V(0);for(var De=0;De<16;De++)V(N[De+1]);for(var Ie=0;Ie<=11;Ie++)V(M[Ie]);V(16);for(var oe=0;oe<16;oe++)V(L[oe+1]);for(var Ee=0;Ee<=161;Ee++)V(T[Ee]);V(1);for(var G=0;G<16;G++)V(E[G+1]);for(var ge=0;ge<=11;ge++)V(A[ge]);V(17);for(var Pe=0;Pe<16;Pe++)V(O[Pe+1]);for(var Ve=0;Ve<=161;Ve++)V(W[Ve])}(),B(65498),B(12),V(3),V(1),V(0),V(2),V(17),V(3),V(17),V(0),V(63),V(0);var q=0,X=0,te=0;x=0,m=7,this.encode.displayName="_encode_";for(var ae,le,me,Le,ie,Ne,Be,Ue,_e,ue=I.data,wt=I.width,gt=I.height,ve=4*wt,we=0;we<gt;){for(ae=0;ae<ve;){for(ie=ve*we+ae,Be=-1,Ue=0,_e=0;_e<64;_e++)Ne=ie+(Ue=_e>>3)*ve+(Be=4*(7&_e)),we+Ue>=gt&&(Ne-=ve*(we+1+Ue-gt)),ae+Be>=ve&&(Ne-=ae+Be-ve+4),le=ue[Ne++],me=ue[Ne++],Le=ue[Ne++],v[_e]=(P[le]+P[me+256>>0]+P[Le+512>>0]>>16)-128,b[_e]=(P[le+768>>0]+P[me+1024>>0]+P[Le+1280>>0]>>16)-128,C[_e]=(P[le+1280>>0]+P[me+1536>>0]+P[Le+1792>>0]>>16)-128;q=Y(v,d,q,t,r),X=Y(b,u,X,n,a),te=Y(C,u,te,n,a),ae+=32}we+=8}if(m>=0){var Se=[];Se[1]=m+1,Se[0]=(1<<m+1)-1,F(Se)}return B(65497),new Uint8Array(g)},e=e||50,function(){for(var I=String.fromCharCode,U=0;U<256;U++)S[U]=I(U)}(),t=z(N,M),n=z(E,A),r=z(L,T),a=z(O,W),function(){for(var I=1,U=2,q=1;q<=15;q++){for(var X=I;X<U;X++)f[32767+X]=q,h[32767+X]=[],h[32767+X][1]=q,h[32767+X][0]=X;for(var te=-(U-1);te<=-I;te++)f[32767+te]=q,h[32767+te]=[],h[32767+te][1]=q,h[32767+te][0]=U-1+te;I<<=1,U<<=1}}(),function(){for(var I=0;I<256;I++)P[I]=19595*I,P[I+256>>0]=38470*I,P[I+512>>0]=7471*I+32768,P[I+768>>0]=-11059*I,P[I+1024>>0]=-21709*I,P[I+1280>>0]=32768*I+8421375,P[I+1536>>0]=-27439*I,P[I+1792>>0]=-5329*I}(),$(e)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Xi(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function _E(e){function t(N){if(!N)throw Error("assert :P")}function n(N,M,L){for(var T=0;4>T;T++)if(N[M+T]!=L.charCodeAt(T))return!0;return!1}function r(N,M,L,T,E){for(var A=0;A<E;A++)N[M+A]=L[T+A]}function a(N,M,L,T){for(var E=0;E<T;E++)N[M+E]=L}function i(N){return new Int32Array(N)}function o(N,M){for(var L=[],T=0;T<N;T++)L.push(new M);return L}function l(N,M){var L=[];return function T(E,A,O){for(var W=O[A],z=0;z<W&&(E.push(O.length>A+1?[]:new M),!(O.length<A+1));z++)T(E[z],A+1,O)}(L,0,N),L}var c=function(){var N=this;function M(w,k){for(var R=1<<k-1>>>0;w&R;)R>>>=1;return R?(w&R-1)+R:w}function L(w,k,R,H,J){t(!(H%R));do w[k+(H-=R)]=J;while(0<H)}function T(w,k,R,H,J){if(t(2328>=J),512>=J)var Z=i(512);else if((Z=i(J))==null)return 0;return function(ee,ne,re,ce,be,Oe){var Fe,Ae,Ke=ne,We=1<<re,je=i(16),Ce=i(16);for(t(be!=0),t(ce!=null),t(ee!=null),t(0<re),Ae=0;Ae<be;++Ae){if(15<ce[Ae])return 0;++je[ce[Ae]]}if(je[0]==be)return 0;for(Ce[1]=0,Fe=1;15>Fe;++Fe){if(je[Fe]>1<<Fe)return 0;Ce[Fe+1]=Ce[Fe]+je[Fe]}for(Ae=0;Ae<be;++Ae)Fe=ce[Ae],0<ce[Ae]&&(Oe[Ce[Fe]++]=Ae);if(Ce[15]==1)return(ce=new E).g=0,ce.value=Oe[0],L(ee,Ke,1,We,ce),We;var Ge,tt=-1,Je=We-1,Ct=0,vt=1,$t=1,bt=1<<re;for(Ae=0,Fe=1,be=2;Fe<=re;++Fe,be<<=1){if(vt+=$t<<=1,0>($t-=je[Fe]))return 0;for(;0<je[Fe];--je[Fe])(ce=new E).g=Fe,ce.value=Oe[Ae++],L(ee,Ke+Ct,be,bt,ce),Ct=M(Ct,Fe)}for(Fe=re+1,be=2;15>=Fe;++Fe,be<<=1){if(vt+=$t<<=1,0>($t-=je[Fe]))return 0;for(;0<je[Fe];--je[Fe]){if(ce=new E,(Ct&Je)!=tt){for(Ke+=bt,Ge=1<<(tt=Fe)-re;15>tt&&!(0>=(Ge-=je[tt]));)++tt,Ge<<=1;We+=bt=1<<(Ge=tt-re),ee[ne+(tt=Ct&Je)].g=Ge+re,ee[ne+tt].value=Ke-ne-tt}ce.g=Fe-re,ce.value=Oe[Ae++],L(ee,Ke+(Ct>>re),be,bt,ce),Ct=M(Ct,Fe)}}return vt!=2*Ce[15]-1?0:We}(w,k,R,H,J,Z)}function E(){this.value=this.g=0}function A(){this.value=this.g=0}function O(){this.G=o(5,E),this.H=i(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(Ns,A)}function W(w,k,R,H){t(w!=null),t(k!=null),t(2147483648>H),w.Ca=254,w.I=0,w.b=-8,w.Ka=0,w.oa=k,w.pa=R,w.Jd=k,w.Yc=R+H,w.Zc=4<=H?R+H-4+1:R,ae(w)}function z(w,k){for(var R=0;0<k--;)R|=me(w,128)<<k;return R}function F(w,k){var R=z(w,k);return le(w)?-R:R}function V(w,k,R,H){var J,Z=0;for(t(w!=null),t(k!=null),t(4294967288>H),w.Sb=H,w.Ra=0,w.u=0,w.h=0,4<H&&(H=4),J=0;J<H;++J)Z+=k[R+J]<<8*J;w.Ra=Z,w.bb=H,w.oa=k,w.pa=R}function B(w){for(;8<=w.u&&w.bb<w.Sb;)w.Ra>>>=8,w.Ra+=w.oa[w.pa+w.bb]<<wh-8>>>0,++w.bb,w.u-=8;q(w)&&(w.h=1,w.u=0)}function Y(w,k){if(t(0<=k),!w.h&&k<=bh){var R=U(w)&yh[k];return w.u+=k,B(w),R}return w.h=1,w.u=0}function $(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function I(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function U(w){return w.Ra>>>(w.u&wh-1)>>>0}function q(w){return t(w.bb<=w.Sb),w.h||w.bb==w.Sb&&w.u>wh}function X(w,k){w.u=k,w.h=q(w)}function te(w){w.u>=Tp&&(t(w.u>=Tp),B(w))}function ae(w){t(w!=null&&w.oa!=null),w.pa<w.Zc?(w.I=(w.oa[w.pa++]|w.I<<8)>>>0,w.b+=8):(t(w!=null&&w.oa!=null),w.pa<w.Yc?(w.b+=8,w.I=w.oa[w.pa++]|w.I<<8):w.Ka?w.b=0:(w.I<<=8,w.b+=8,w.Ka=1))}function le(w){return z(w,1)}function me(w,k){var R=w.Ca;0>w.b&&ae(w);var H=w.b,J=R*k>>>8,Z=(w.I>>>H>J)+0;for(Z?(R-=J,w.I-=J+1<<H>>>0):R=J+1,H=R,J=0;256<=H;)J+=8,H>>=8;return H=7^J+ka[H],w.b-=H,w.Ca=(R<<H)-1,Z}function Le(w,k,R){w[k+0]=R>>24&255,w[k+1]=R>>16&255,w[k+2]=R>>8&255,w[k+3]=R>>0&255}function ie(w,k){return w[k+0]<<0|w[k+1]<<8}function Ne(w,k){return ie(w,k)|w[k+2]<<16}function Be(w,k){return ie(w,k)|ie(w,k+2)<<16}function Ue(w,k){var R=1<<k;return t(w!=null),t(0<k),w.X=i(R),w.X==null?0:(w.Mb=32-k,w.Xa=k,1)}function _e(w,k){t(w!=null),t(k!=null),t(w.Xa==k.Xa),r(k.X,0,w.X,0,1<<k.Xa)}function ue(){this.X=[],this.Xa=this.Mb=0}function wt(w,k,R,H){t(R!=null),t(H!=null);var J=R[0],Z=H[0];return J==0&&(J=(w*Z+k/2)/k),Z==0&&(Z=(k*J+w/2)/w),0>=J||0>=Z?0:(R[0]=J,H[0]=Z,1)}function gt(w,k){return w+(1<<k)-1>>>k}function ve(w,k){return((4278255360&w)+(4278255360&k)>>>0&4278255360)+((16711935&w)+(16711935&k)>>>0&16711935)>>>0}function we(w,k){N[k]=function(R,H,J,Z,ee,ne,re){var ce;for(ce=0;ce<ee;++ce){var be=N[w](ne[re+ce-1],J,Z+ce);ne[re+ce]=ve(R[H+ce],be)}}}function Se(){this.ud=this.hd=this.jd=0}function De(w,k){return((4278124286&(w^k))>>>1)+(w&k)>>>0}function Ie(w){return 0<=w&&256>w?w:0>w?0:255<w?255:void 0}function oe(w,k){return Ie(w+(w-k+.5>>1))}function Ee(w,k,R){return Math.abs(k-R)-Math.abs(w-R)}function G(w,k,R,H,J,Z,ee){for(H=Z[ee-1],R=0;R<J;++R)Z[ee+R]=H=ve(w[k+R],H)}function ge(w,k,R,H,J){var Z;for(Z=0;Z<R;++Z){var ee=w[k+Z],ne=ee>>8&255,re=16711935&(re=(re=16711935&ee)+((ne<<16)+ne));H[J+Z]=(4278255360&ee)+re>>>0}}function Pe(w,k){k.jd=w>>0&255,k.hd=w>>8&255,k.ud=w>>16&255}function Ve(w,k,R,H,J,Z){var ee;for(ee=0;ee<H;++ee){var ne=k[R+ee],re=ne>>>8,ce=ne,be=255&(be=(be=ne>>>16)+((w.jd<<24>>24)*(re<<24>>24)>>>5));ce=255&(ce=(ce=ce+((w.hd<<24>>24)*(re<<24>>24)>>>5))+((w.ud<<24>>24)*(be<<24>>24)>>>5)),J[Z+ee]=(4278255360&ne)+(be<<16)+ce}}function pt(w,k,R,H,J){N[k]=function(Z,ee,ne,re,ce,be,Oe,Fe,Ae){for(re=Oe;re<Fe;++re)for(Oe=0;Oe<Ae;++Oe)ce[be++]=J(ne[H(Z[ee++])])},N[w]=function(Z,ee,ne,re,ce,be,Oe){var Fe=8>>Z.b,Ae=Z.Ea,Ke=Z.K[0],We=Z.w;if(8>Fe)for(Z=(1<<Z.b)-1,We=(1<<Fe)-1;ee<ne;++ee){var je,Ce=0;for(je=0;je<Ae;++je)je&Z||(Ce=H(re[ce++])),be[Oe++]=J(Ke[Ce&We]),Ce>>=Fe}else N["VP8LMapColor"+R](re,ce,Ke,We,be,Oe,ee,ne,Ae)}}function et(w,k,R,H,J){for(R=k+R;k<R;){var Z=w[k++];H[J++]=Z>>16&255,H[J++]=Z>>8&255,H[J++]=Z>>0&255}}function Zt(w,k,R,H,J){for(R=k+R;k<R;){var Z=w[k++];H[J++]=Z>>16&255,H[J++]=Z>>8&255,H[J++]=Z>>0&255,H[J++]=Z>>24&255}}function Ze(w,k,R,H,J){for(R=k+R;k<R;){var Z=(ee=w[k++])>>16&240|ee>>12&15,ee=ee>>0&240|ee>>28&15;H[J++]=Z,H[J++]=ee}}function jt(w,k,R,H,J){for(R=k+R;k<R;){var Z=(ee=w[k++])>>16&248|ee>>13&7,ee=ee>>5&224|ee>>3&31;H[J++]=Z,H[J++]=ee}}function ct(w,k,R,H,J){for(R=k+R;k<R;){var Z=w[k++];H[J++]=Z>>0&255,H[J++]=Z>>8&255,H[J++]=Z>>16&255}}function yt(w,k,R,H,J,Z){if(Z==0)for(R=k+R;k<R;)Le(H,((Z=w[k++])[0]>>24|Z[1]>>8&65280|Z[2]<<8&16711680|Z[3]<<24)>>>0),J+=32;else r(H,J,w,k,R)}function Yt(w,k){N[k][0]=N[w+"0"],N[k][1]=N[w+"1"],N[k][2]=N[w+"2"],N[k][3]=N[w+"3"],N[k][4]=N[w+"4"],N[k][5]=N[w+"5"],N[k][6]=N[w+"6"],N[k][7]=N[w+"7"],N[k][8]=N[w+"8"],N[k][9]=N[w+"9"],N[k][10]=N[w+"10"],N[k][11]=N[w+"11"],N[k][12]=N[w+"12"],N[k][13]=N[w+"13"],N[k][14]=N[w+"0"],N[k][15]=N[w+"0"]}function At(w){return w==zb||w==Wb||w==$v||w==Hb}function On(){this.eb=[],this.size=this.A=this.fb=0}function mn(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Bt(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new On,this.f.kb=new mn,this.sd=null}function Hn(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function It(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Mt(w){return alert("todo:WebPSamplerProcessPlane"),w.T}function nn(w,k){var R=w.T,H=k.ba.f.RGBA,J=H.eb,Z=H.fb+w.ka*H.A,ee=yi[k.ba.S],ne=w.y,re=w.O,ce=w.f,be=w.N,Oe=w.ea,Fe=w.W,Ae=k.cc,Ke=k.dc,We=k.Mc,je=k.Nc,Ce=w.ka,Ge=w.ka+w.T,tt=w.U,Je=tt+1>>1;for(Ce==0?ee(ne,re,null,null,ce,be,Oe,Fe,ce,be,Oe,Fe,J,Z,null,null,tt):(ee(k.ec,k.fc,ne,re,Ae,Ke,We,je,ce,be,Oe,Fe,J,Z-H.A,J,Z,tt),++R);Ce+2<Ge;Ce+=2)Ae=ce,Ke=be,We=Oe,je=Fe,be+=w.Rc,Fe+=w.Rc,Z+=2*H.A,ee(ne,(re+=2*w.fa)-w.fa,ne,re,Ae,Ke,We,je,ce,be,Oe,Fe,J,Z-H.A,J,Z,tt);return re+=w.fa,w.j+Ge<w.o?(r(k.ec,k.fc,ne,re,tt),r(k.cc,k.dc,ce,be,Je),r(k.Mc,k.Nc,Oe,Fe,Je),R--):1&Ge||ee(ne,re,null,null,ce,be,Oe,Fe,ce,be,Oe,Fe,J,Z+H.A,null,null,tt),R}function Ye(w,k,R){var H=w.F,J=[w.J];if(H!=null){var Z=w.U,ee=k.ba.S,ne=ee==Fv||ee==$v;k=k.ba.f.RGBA;var re=[0],ce=w.ka;re[0]=w.T,w.Kb&&(ce==0?--re[0]:(--ce,J[0]-=w.width),w.j+w.ka+w.T==w.o&&(re[0]=w.o-w.j-ce));var be=k.eb;ce=k.fb+ce*k.A,w=$n(H,J[0],w.width,Z,re,be,ce+(ne?0:3),k.A),t(R==re),w&&At(ee)&&vi(be,ce,ne,Z,re,k.A)}return 0}function dt(w){var k=w.ma,R=k.ba.S,H=11>R,J=R==Iv||R==Ov||R==Fv||R==Bb||R==12||At(R);if(k.memory=null,k.Ib=null,k.Jb=null,k.Nd=null,!kp(k.Oa,w,J?11:12))return 0;if(J&&At(R)&&ot(),w.da)alert("todo:use_scaling");else{if(H){if(k.Ib=Mt,w.Kb){if(R=w.U+1>>1,k.memory=i(w.U+2*R),k.memory==null)return 0;k.ec=k.memory,k.fc=0,k.cc=k.ec,k.dc=k.fc+w.U,k.Mc=k.cc,k.Nc=k.dc+R,k.Ib=nn,ot()}}else alert("todo:EmitYUV");J&&(k.Jb=Ye,H&&Re())}if(H&&!CP){for(w=0;256>w;++w)b7[w]=89858*(w-128)+zv>>Bv,N7[w]=-22014*(w-128)+zv,j7[w]=-45773*(w-128),w7[w]=113618*(w-128)+zv>>Bv;for(w=Op;w<Ub;++w)k=76283*(w-16)+zv>>Bv,S7[w-Op]=Ka(k,255),C7[w-Op]=Ka(k+8>>4,15);CP=1}return 1}function sn(w){var k=w.ma,R=w.U,H=w.T;return t(!(1&w.ka)),0>=R||0>=H?0:(R=k.Ib(w,k),k.Jb!=null&&k.Jb(w,k,R),k.Dc+=R,1)}function Xr(w){w.ma.memory=null}function Rt(w,k,R,H){return Y(w,8)!=47?0:(k[0]=Y(w,14)+1,R[0]=Y(w,14)+1,H[0]=Y(w,1),Y(w,3)!=0?0:!w.h)}function Sa(w,k){if(4>w)return w+1;var R=w-2>>1;return(2+(1&w)<<R)+Y(k,R)+1}function Ua(w,k){return 120<k?k-120:1<=(R=((R=i7[k-1])>>4)*w+(8-(15&R)))?R:1;var R}function js(w,k,R){var H=U(R),J=w[k+=255&H].g-8;return 0<J&&(X(R,R.u+8),H=U(R),k+=w[k].value,k+=H&(1<<J)-1),X(R,R.u+w[k].g),w[k].value}function Sr(w,k,R){return R.g+=w.g,R.value+=w.value<<k>>>0,t(8>=R.g),w.g}function cr(w,k,R){var H=w.xc;return t((k=H==0?0:w.vc[w.md*(R>>H)+(k>>H)])<w.Wb),w.Ya[k]}function Ms(w,k,R,H){var J=w.ab,Z=w.c*k,ee=w.C;k=ee+k;var ne=R,re=H;for(H=w.Ta,R=w.Ua;0<J--;){var ce=w.gc[J],be=ee,Oe=k,Fe=ne,Ae=re,Ke=(re=H,ne=R,ce.Ea);switch(t(be<Oe),t(Oe<=ce.nc),ce.hc){case 2:Ev(Fe,Ae,(Oe-be)*Ke,re,ne);break;case 0:var We=be,je=Oe,Ce=re,Ge=ne,tt=(bt=ce).Ea;We==0&&(Fb(Fe,Ae,null,null,1,Ce,Ge),G(Fe,Ae+1,0,0,tt-1,Ce,Ge+1),Ae+=tt,Ge+=tt,++We);for(var Je=1<<bt.b,Ct=Je-1,vt=gt(tt,bt.b),$t=bt.K,bt=bt.w+(We>>bt.b)*vt;We<je;){var xn=$t,Nn=bt,fn=1;for(Ap(Fe,Ae,Ce,Ge-tt,1,Ce,Ge);fn<tt;){var cn=(fn&~Ct)+Je;cn>tt&&(cn=tt),(0,fc[xn[Nn++]>>8&15])(Fe,Ae+ +fn,Ce,Ge+fn-tt,cn-fn,Ce,Ge+fn),fn=cn}Ae+=tt,Ge+=tt,++We&Ct||(bt+=vt)}Oe!=ce.nc&&r(re,ne-Ke,re,ne+(Oe-be-1)*Ke,Ke);break;case 1:for(Ke=Fe,je=Ae,tt=(Fe=ce.Ea)-(Ge=Fe&~(Ce=(Ae=1<<ce.b)-1)),We=gt(Fe,ce.b),Je=ce.K,ce=ce.w+(be>>ce.b)*We;be<Oe;){for(Ct=Je,vt=ce,$t=new Se,bt=je+Ge,xn=je+Fe;je<bt;)Pe(Ct[vt++],$t),Hd($t,Ke,je,Ae,re,ne),je+=Ae,ne+=Ae;je<xn&&(Pe(Ct[vt++],$t),Hd($t,Ke,je,tt,re,ne),je+=tt,ne+=tt),++be&Ce||(ce+=We)}break;case 3:if(Fe==re&&Ae==ne&&0<ce.b){for(je=re,Fe=Ke=ne+(Oe-be)*Ke-(Ge=(Oe-be)*gt(ce.Ea,ce.b)),Ae=re,Ce=ne,We=[],Ge=(tt=Ge)-1;0<=Ge;--Ge)We[Ge]=Ae[Ce+Ge];for(Ge=tt-1;0<=Ge;--Ge)je[Fe+Ge]=We[Ge];pi(ce,be,Oe,re,Ke,re,ne)}else pi(ce,be,Oe,Fe,Ae,re,ne)}ne=H,re=R}re!=R&&r(H,R,ne,re,Z)}function ol(w,k){var R=w.V,H=w.Ba+w.c*w.C,J=k-w.C;if(t(k<=w.l.o),t(16>=J),0<J){var Z=w.l,ee=w.Ta,ne=w.Ua,re=Z.width;if(Ms(w,J,R,H),J=ne=[ne],t((R=w.C)<(H=k)),t(Z.v<Z.va),H>Z.o&&(H=Z.o),R<Z.j){var ce=Z.j-R;R=Z.j,J[0]+=ce*re}if(R>=H?R=0:(J[0]+=4*Z.v,Z.ka=R-Z.j,Z.U=Z.va-Z.v,Z.T=H-R,R=1),R){if(ne=ne[0],11>(R=w.ca).S){var be=R.f.RGBA,Oe=(H=R.S,J=Z.U,Z=Z.T,ce=be.eb,be.A),Fe=Z;for(be=be.fb+w.Ma*be.A;0<Fe--;){var Ae=ee,Ke=ne,We=J,je=ce,Ce=be;switch(H){case Lv:Ea(Ae,Ke,We,je,Ce);break;case Iv:ia(Ae,Ke,We,je,Ce);break;case zb:ia(Ae,Ke,We,je,Ce),vi(je,Ce,0,We,1,0);break;case mP:xl(Ae,Ke,We,je,Ce);break;case Ov:yt(Ae,Ke,We,je,Ce,1);break;case Wb:yt(Ae,Ke,We,je,Ce,1),vi(je,Ce,0,We,1,0);break;case Fv:yt(Ae,Ke,We,je,Ce,0);break;case $v:yt(Ae,Ke,We,je,Ce,0),vi(je,Ce,1,We,1,0);break;case Bb:pc(Ae,Ke,We,je,Ce);break;case Hb:pc(Ae,Ke,We,je,Ce),Fn(je,Ce,We,1,0);break;case gP:vl(Ae,Ke,We,je,Ce);break;default:t(0)}ne+=re,be+=Oe}w.Ma+=Z}else alert("todo:EmitRescaledRowsYUVA");t(w.Ma<=R.height)}}w.C=k,t(w.C<=w.i)}function fi(w){var k;if(0<w.ua)return 0;for(k=0;k<w.Wb;++k){var R=w.Ya[k].G,H=w.Ya[k].H;if(0<R[1][H[1]+0].g||0<R[2][H[2]+0].g||0<R[3][H[3]+0].g)return 0}return 1}function Ca(w,k,R,H,J,Z){if(w.Z!=0){var ee=w.qd,ne=w.rd;for(t(xc[w.Z]!=null);k<R;++k)xc[w.Z](ee,ne,H,J,H,J,Z),ee=H,ne=J,J+=Z;w.qd=ee,w.rd=ne}}function Pa(w,k){var R=w.l.ma,H=R.Z==0||R.Z==1?w.l.j:w.C;if(H=w.C<H?H:w.C,t(k<=w.l.o),k>H){var J=w.l.width,Z=R.ca,ee=R.tb+J*H,ne=w.V,re=w.Ba+w.c*H,ce=w.gc;t(w.ab==1),t(ce[0].hc==3),Tv(ce[0],H,k,ne,re,Z,ee),Ca(R,H,k,Z,ee,J)}w.C=w.Ma=k}function Da(w,k,R,H,J,Z,ee){var ne=w.$/H,re=w.$%H,ce=w.m,be=w.s,Oe=R+w.$,Fe=Oe;J=R+H*J;var Ae=R+H*Z,Ke=280+be.ua,We=w.Pb?ne:16777216,je=0<be.ua?be.Wa:null,Ce=be.wc,Ge=Oe<Ae?cr(be,re,ne):null;t(w.C<Z),t(Ae<=J);var tt=!1;e:for(;;){for(;tt||Oe<Ae;){var Je=0;if(ne>=We){var Ct=Oe-R;t((We=w).Pb),We.wd=We.m,We.xd=Ct,0<We.s.ua&&_e(We.s.Wa,We.s.vb),We=ne+l7}if(re&Ce||(Ge=cr(be,re,ne)),t(Ge!=null),Ge.Qb&&(k[Oe]=Ge.qb,tt=!0),!tt)if(te(ce),Ge.jc){Je=ce,Ct=k;var vt=Oe,$t=Ge.pd[U(Je)&Ns-1];t(Ge.jc),256>$t.g?(X(Je,Je.u+$t.g),Ct[vt]=$t.value,Je=0):(X(Je,Je.u+$t.g-256),t(256<=$t.value),Je=$t.value),Je==0&&(tt=!0)}else Je=js(Ge.G[0],Ge.H[0],ce);if(ce.h)break;if(tt||256>Je){if(!tt)if(Ge.nd)k[Oe]=(Ge.qb|Je<<8)>>>0;else{if(te(ce),tt=js(Ge.G[1],Ge.H[1],ce),te(ce),Ct=js(Ge.G[2],Ge.H[2],ce),vt=js(Ge.G[3],Ge.H[3],ce),ce.h)break;k[Oe]=(vt<<24|tt<<16|Je<<8|Ct)>>>0}if(tt=!1,++Oe,++re>=H&&(re=0,++ne,ee!=null&&ne<=Z&&!(ne%16)&&ee(w,ne),je!=null))for(;Fe<Oe;)Je=k[Fe++],je.X[(506832829*Je&4294967295)>>>je.Mb]=Je}else if(280>Je){if(Je=Sa(Je-256,ce),Ct=js(Ge.G[4],Ge.H[4],ce),te(ce),Ct=Ua(H,Ct=Sa(Ct,ce)),ce.h)break;if(Oe-R<Ct||J-Oe<Je)break e;for(vt=0;vt<Je;++vt)k[Oe+vt]=k[Oe+vt-Ct];for(Oe+=Je,re+=Je;re>=H;)re-=H,++ne,ee!=null&&ne<=Z&&!(ne%16)&&ee(w,ne);if(t(Oe<=J),re&Ce&&(Ge=cr(be,re,ne)),je!=null)for(;Fe<Oe;)Je=k[Fe++],je.X[(506832829*Je&4294967295)>>>je.Mb]=Je}else{if(!(Je<Ke))break e;for(tt=Je-280,t(je!=null);Fe<Oe;)Je=k[Fe++],je.X[(506832829*Je&4294967295)>>>je.Mb]=Je;Je=Oe,t(!(tt>>>(Ct=je).Xa)),k[Je]=Ct.X[tt],tt=!0}tt||t(ce.h==q(ce))}if(w.Pb&&ce.h&&Oe<J)t(w.m.h),w.a=5,w.m=w.wd,w.$=w.xd,0<w.s.ua&&_e(w.s.vb,w.s.Wa);else{if(ce.h)break e;ee!=null&&ee(w,ne>Z?Z:ne),w.a=0,w.$=Oe-R}return 1}return w.a=3,0}function Ya(w){t(w!=null),w.vc=null,w.yc=null,w.Ya=null;var k=w.Wa;k!=null&&(k.X=null),w.vb=null,t(w!=null)}function sa(){var w=new Ob;return w==null?null:(w.a=0,w.xb=yP,Yt("Predictor","VP8LPredictors"),Yt("Predictor","VP8LPredictors_C"),Yt("PredictorAdd","VP8LPredictorsAdd"),Yt("PredictorAdd","VP8LPredictorsAdd_C"),Ev=ge,Hd=Ve,Ea=et,ia=Zt,pc=Ze,vl=jt,xl=ct,N.VP8LMapColor32b=jh,N.VP8LMapColor8b=Av,w)}function Ga(w,k,R,H,J){var Z=1,ee=[w],ne=[k],re=H.m,ce=H.s,be=null,Oe=0;e:for(;;){if(R)for(;Z&&Y(re,1);){var Fe=ee,Ae=ne,Ke=H,We=1,je=Ke.m,Ce=Ke.gc[Ke.ab],Ge=Y(je,2);if(Ke.Oc&1<<Ge)Z=0;else{switch(Ke.Oc|=1<<Ge,Ce.hc=Ge,Ce.Ea=Fe[0],Ce.nc=Ae[0],Ce.K=[null],++Ke.ab,t(4>=Ke.ab),Ge){case 0:case 1:Ce.b=Y(je,3)+2,We=Ga(gt(Ce.Ea,Ce.b),gt(Ce.nc,Ce.b),0,Ke,Ce.K),Ce.K=Ce.K[0];break;case 3:var tt,Je=Y(je,8)+1,Ct=16<Je?0:4<Je?1:2<Je?2:3;if(Fe[0]=gt(Ce.Ea,Ct),Ce.b=Ct,tt=We=Ga(Je,1,0,Ke,Ce.K)){var vt,$t=Je,bt=Ce,xn=1<<(8>>bt.b),Nn=i(xn);if(Nn==null)tt=0;else{var fn=bt.K[0],cn=bt.w;for(Nn[0]=bt.K[0][0],vt=1;vt<1*$t;++vt)Nn[vt]=ve(fn[cn+vt],Nn[vt-1]);for(;vt<4*xn;++vt)Nn[vt]=0;bt.K[0]=null,bt.K[0]=Nn,tt=1}}We=tt;break;case 2:break;default:t(0)}Z=We}}if(ee=ee[0],ne=ne[0],Z&&Y(re,1)&&!(Z=1<=(Oe=Y(re,4))&&11>=Oe)){H.a=3;break e}var Rn;if(Rn=Z)t:{var Tn,Qt,Yr,Ta=H,Gr=ee,Aa=ne,Sn=Oe,Qa=R,Za=Ta.m,hs=Ta.s,Ss=[null],la=1,bi=0,Co=o7[Sn];n:for(;;){if(Qa&&Y(Za,1)){var fs=Y(Za,3)+2,jl=gt(Gr,fs),Gd=gt(Aa,fs),Dh=jl*Gd;if(!Ga(jl,Gd,0,Ta,Ss))break n;for(Ss=Ss[0],hs.xc=fs,Tn=0;Tn<Dh;++Tn){var yc=Ss[Tn]>>8&65535;Ss[Tn]=yc,yc>=la&&(la=yc+1)}}if(Za.h)break n;for(Qt=0;5>Qt;++Qt){var Pr=vP[Qt];!Qt&&0<Sn&&(Pr+=1<<Sn),bi<Pr&&(bi=Pr)}var Yb=o(la*Co,E),kP=la,EP=o(kP,O);if(EP==null)var Hv=null;else t(65536>=kP),Hv=EP;var Fp=i(bi);if(Hv==null||Fp==null||Yb==null){Ta.a=1;break n}var qv=Yb;for(Tn=Yr=0;Tn<la;++Tn){var Yi=Hv[Tn],kh=Yi.G,Eh=Yi.H,TP=0,Vv=1,AP=0;for(Qt=0;5>Qt;++Qt){Pr=vP[Qt],kh[Qt]=qv,Eh[Qt]=Yr,!Qt&&0<Sn&&(Pr+=1<<Sn);s:{var Uv,Gb=Pr,Yv=Ta,$p=Fp,k7=qv,E7=Yr,Jb=0,bc=Yv.m,T7=Y(bc,1);if(a($p,0,0,Gb),T7){var A7=Y(bc,1)+1,_7=Y(bc,1),_P=Y(bc,_7==0?1:8);$p[_P]=1,A7==2&&($p[_P=Y(bc,8)]=1);var Gv=1}else{var MP=i(19),RP=Y(bc,4)+4;if(19<RP){Yv.a=3;var Jv=0;break s}for(Uv=0;Uv<RP;++Uv)MP[a7[Uv]]=Y(bc,3);var Kb=void 0,Bp=void 0,LP=Yv,M7=MP,Kv=Gb,IP=$p,Xb=0,wc=LP.m,OP=8,FP=o(128,E);r:for(;T(FP,0,7,M7,19);){if(Y(wc,1)){var R7=2+2*Y(wc,3);if((Kb=2+Y(wc,R7))>Kv)break r}else Kb=Kv;for(Bp=0;Bp<Kv&&Kb--;){te(wc);var $P=FP[0+(127&U(wc))];X(wc,wc.u+$P.g);var Th=$P.value;if(16>Th)IP[Bp++]=Th,Th!=0&&(OP=Th);else{var L7=Th==16,BP=Th-16,I7=r7[BP],zP=Y(wc,n7[BP])+I7;if(Bp+zP>Kv)break r;for(var O7=L7?OP:0;0<zP--;)IP[Bp++]=O7}}Xb=1;break r}Xb||(LP.a=3),Gv=Xb}(Gv=Gv&&!bc.h)&&(Jb=T(k7,E7,8,$p,Gb)),Gv&&Jb!=0?Jv=Jb:(Yv.a=3,Jv=0)}if(Jv==0)break n;if(Vv&&s7[Qt]==1&&(Vv=qv[Yr].g==0),TP+=qv[Yr].g,Yr+=Jv,3>=Qt){var zp,Qb=Fp[0];for(zp=1;zp<Pr;++zp)Fp[zp]>Qb&&(Qb=Fp[zp]);AP+=Qb}}if(Yi.nd=Vv,Yi.Qb=0,Vv&&(Yi.qb=(kh[3][Eh[3]+0].value<<24|kh[1][Eh[1]+0].value<<16|kh[2][Eh[2]+0].value)>>>0,TP==0&&256>kh[0][Eh[0]+0].value&&(Yi.Qb=1,Yi.qb+=kh[0][Eh[0]+0].value<<8)),Yi.jc=!Yi.Qb&&6>AP,Yi.jc){var Xv,Nl=Yi;for(Xv=0;Xv<Ns;++Xv){var jc=Xv,Nc=Nl.pd[jc],Qv=Nl.G[0][Nl.H[0]+jc];256<=Qv.value?(Nc.g=Qv.g+256,Nc.value=Qv.value):(Nc.g=0,Nc.value=0,jc>>=Sr(Qv,8,Nc),jc>>=Sr(Nl.G[1][Nl.H[1]+jc],16,Nc),jc>>=Sr(Nl.G[2][Nl.H[2]+jc],0,Nc),Sr(Nl.G[3][Nl.H[3]+jc],24,Nc))}}}hs.vc=Ss,hs.Wb=la,hs.Ya=Hv,hs.yc=Yb,Rn=1;break t}Rn=0}if(!(Z=Rn)){H.a=3;break e}if(0<Oe){if(ce.ua=1<<Oe,!Ue(ce.Wa,Oe)){H.a=1,Z=0;break e}}else ce.ua=0;var Zb=H,WP=ee,F7=ne,ew=Zb.s,tw=ew.xc;if(Zb.c=WP,Zb.i=F7,ew.md=gt(WP,tw),ew.wc=tw==0?-1:(1<<tw)-1,R){H.xb=m7;break e}if((be=i(ee*ne))==null){H.a=1,Z=0;break e}Z=(Z=Da(H,be,0,ee,ne,ne,null))&&!re.h;break e}return Z?(J!=null?J[0]=be:(t(be==null),t(R)),H.$=0,R||Ya(ce)):Ya(ce),Z}function bo(w,k){var R=w.c*w.i,H=R+k+16*k;return t(w.c<=k),w.V=i(H),w.V==null?(w.Ta=null,w.Ua=0,w.a=1,0):(w.Ta=w.V,w.Ua=w.Ba+R+k,1)}function ll(w,k){var R=w.C,H=k-R,J=w.V,Z=w.Ba+w.c*R;for(t(k<=w.l.o);0<H;){var ee=16<H?16:H,ne=w.l.ma,re=w.l.width,ce=re*ee,be=ne.ca,Oe=ne.tb+re*R,Fe=w.Ta,Ae=w.Ua;Ms(w,ee,J,Z),Lr(Fe,Ae,be,Oe,ce),Ca(ne,R,R+ee,be,Oe,re),H-=ee,J+=ee*w.c,R+=ee}t(R==k),w.C=w.Ma=k}function cl(){this.ub=this.yd=this.td=this.Rb=0}function dl(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function ul(){this.Fb=this.Bb=this.Cb=0,this.Zb=i(4),this.Lb=i(4)}function Id(){this.Yb=function(){var w=[];return function k(R,H,J){for(var Z=J[H],ee=0;ee<Z&&(R.push(J.length>H+1?[]:0),!(J.length<H+1));ee++)k(R[ee],H+1,J)}(w,0,[3,11]),w}()}function oh(){this.jb=i(3),this.Wc=l([4,8],Id),this.Xc=l([4,17],Id)}function lh(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new i(4),this.od=new i(4)}function hl(){this.ld=this.La=this.dd=this.tc=0}function Od(){this.Na=this.la=0}function ch(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function lc(){this.ad=i(384),this.Za=0,this.Ob=i(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function dh(){this.uc=this.M=this.Nb=0,this.wa=Array(new hl),this.Y=0,this.ya=Array(new lc),this.aa=0,this.l=new mt}function Fd(){this.y=i(16),this.f=i(8),this.ea=i(8)}function ke(){this.cb=this.a=0,this.sc="",this.m=new $,this.Od=new cl,this.Kc=new dl,this.ed=new lh,this.Qa=new ul,this.Ic=this.$c=this.Aa=0,this.D=new dh,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,$),this.ia=0,this.pb=o(4,ch),this.Pa=new oh,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Fd),this.Hd=0,this.rb=Array(new Od),this.sb=0,this.wa=Array(new hl),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new lc),this.L=this.aa=0,this.gd=l([4,2],hl),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function mt(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function xt(){var w=new ke;return w!=null&&(w.a=0,w.sc="OK",w.cb=0,w.Xb=0,Ip||(Ip=vn)),w}function it(w,k,R){return w.a==0&&(w.a=k,w.sc=R,w.cb=0),0}function _t(w,k,R){return 3<=R&&w[k+0]==157&&w[k+1]==1&&w[k+2]==42}function Xt(w,k){if(w==null)return 0;if(w.a=0,w.sc="OK",k==null)return it(w,2,"null VP8Io passed to VP8GetHeaders()");var R=k.data,H=k.w,J=k.ha;if(4>J)return it(w,7,"Truncated header.");var Z=R[H+0]|R[H+1]<<8|R[H+2]<<16,ee=w.Od;if(ee.Rb=!(1&Z),ee.td=Z>>1&7,ee.yd=Z>>4&1,ee.ub=Z>>5,3<ee.td)return it(w,3,"Incorrect keyframe parameters.");if(!ee.yd)return it(w,4,"Frame not displayable.");H+=3,J-=3;var ne=w.Kc;if(ee.Rb){if(7>J)return it(w,7,"cannot parse picture header");if(!_t(R,H,J))return it(w,3,"Bad code word");ne.c=16383&(R[H+4]<<8|R[H+3]),ne.Td=R[H+4]>>6,ne.i=16383&(R[H+6]<<8|R[H+5]),ne.Ud=R[H+6]>>6,H+=7,J-=7,w.za=ne.c+15>>4,w.Ub=ne.i+15>>4,k.width=ne.c,k.height=ne.i,k.Da=0,k.j=0,k.v=0,k.va=k.width,k.o=k.height,k.da=0,k.ib=k.width,k.hb=k.height,k.U=k.width,k.T=k.height,a((Z=w.Pa).jb,0,255,Z.jb.length),t((Z=w.Qa)!=null),Z.Cb=0,Z.Bb=0,Z.Fb=1,a(Z.Zb,0,0,Z.Zb.length),a(Z.Lb,0,0,Z.Lb)}if(ee.ub>J)return it(w,7,"bad partition length");W(Z=w.m,R,H,ee.ub),H+=ee.ub,J-=ee.ub,ee.Rb&&(ne.Ld=le(Z),ne.Kd=le(Z)),ne=w.Qa;var re,ce=w.Pa;if(t(Z!=null),t(ne!=null),ne.Cb=le(Z),ne.Cb){if(ne.Bb=le(Z),le(Z)){for(ne.Fb=le(Z),re=0;4>re;++re)ne.Zb[re]=le(Z)?F(Z,7):0;for(re=0;4>re;++re)ne.Lb[re]=le(Z)?F(Z,6):0}if(ne.Bb)for(re=0;3>re;++re)ce.jb[re]=le(Z)?z(Z,8):255}else ne.Bb=0;if(Z.Ka)return it(w,3,"cannot parse segment header");if((ne=w.ed).zd=le(Z),ne.Tb=z(Z,6),ne.wb=z(Z,3),ne.Pc=le(Z),ne.Pc&&le(Z)){for(ce=0;4>ce;++ce)le(Z)&&(ne.vd[ce]=F(Z,6));for(ce=0;4>ce;++ce)le(Z)&&(ne.od[ce]=F(Z,6))}if(w.L=ne.Tb==0?0:ne.zd?1:2,Z.Ka)return it(w,3,"cannot parse filter header");var be=J;if(J=re=H,H=re+be,ne=be,w.Xb=(1<<z(w.m,2))-1,be<3*(ce=w.Xb))R=7;else{for(re+=3*ce,ne-=3*ce,be=0;be<ce;++be){var Oe=R[J+0]|R[J+1]<<8|R[J+2]<<16;Oe>ne&&(Oe=ne),W(w.Jc[+be],R,re,Oe),re+=Oe,ne-=Oe,J+=3}W(w.Jc[+ce],R,re,ne),R=re<H?0:5}if(R!=0)return it(w,R,"cannot parse partitions");for(R=z(re=w.m,7),J=le(re)?F(re,4):0,H=le(re)?F(re,4):0,ne=le(re)?F(re,4):0,ce=le(re)?F(re,4):0,re=le(re)?F(re,4):0,be=w.Qa,Oe=0;4>Oe;++Oe){if(be.Cb){var Fe=be.Zb[Oe];be.Fb||(Fe+=R)}else{if(0<Oe){w.pb[Oe]=w.pb[0];continue}Fe=R}var Ae=w.pb[Oe];Ae.Sc[0]=qb[Ka(Fe+J,127)],Ae.Sc[1]=Vb[Ka(Fe+0,127)],Ae.Eb[0]=2*qb[Ka(Fe+H,127)],Ae.Eb[1]=101581*Vb[Ka(Fe+ne,127)]>>16,8>Ae.Eb[1]&&(Ae.Eb[1]=8),Ae.Qc[0]=qb[Ka(Fe+ce,117)],Ae.Qc[1]=Vb[Ka(Fe+re,127)],Ae.lc=Fe+re}if(!ee.Rb)return it(w,4,"Not a key frame.");for(le(Z),ee=w.Pa,R=0;4>R;++R){for(J=0;8>J;++J)for(H=0;3>H;++H)for(ne=0;11>ne;++ne)ce=me(Z,f7[R][J][H][ne])?z(Z,8):u7[R][J][H][ne],ee.Wc[R][J].Yb[H][ne]=ce;for(J=0;17>J;++J)ee.Xc[R][J]=ee.Wc[R][p7[J]]}return w.kc=le(Z),w.kc&&(w.Bd=z(Z,8)),w.cb=1}function vn(w,k,R,H,J,Z,ee){var ne=k[J].Yb[R];for(R=0;16>J;++J){if(!me(w,ne[R+0]))return J;for(;!me(w,ne[R+1]);)if(ne=k[++J].Yb[0],R=0,J==16)return 16;var re=k[J+1].Yb;if(me(w,ne[R+2])){var ce=w,be=0;if(me(ce,(Fe=ne)[(Oe=R)+3]))if(me(ce,Fe[Oe+6])){for(ne=0,Oe=2*(be=me(ce,Fe[Oe+8]))+(Fe=me(ce,Fe[Oe+9+be])),be=0,Fe=c7[Oe];Fe[ne];++ne)be+=be+me(ce,Fe[ne]);be+=3+(8<<Oe)}else me(ce,Fe[Oe+7])?(be=7+2*me(ce,165),be+=me(ce,145)):be=5+me(ce,159);else be=me(ce,Fe[Oe+4])?3+me(ce,Fe[Oe+5]):2;ne=re[2]}else be=1,ne=re[1];re=ee+d7[J],0>(ce=w).b&&ae(ce);var Oe,Fe=ce.b,Ae=(Oe=ce.Ca>>1)-(ce.I>>Fe)>>31;--ce.b,ce.Ca+=Ae,ce.Ca|=1,ce.I-=(Oe+1&Ae)<<Fe,Z[re]=((be^Ae)-Ae)*H[(0<J)+0]}return 16}function os(w){var k=w.rb[w.sb-1];k.la=0,k.Na=0,a(w.zc,0,0,w.zc.length),w.ja=0}function aa(w,k){if(w==null)return 0;if(k==null)return it(w,2,"NULL VP8Io parameter in VP8Decode().");if(!w.cb&&!Xt(w,k))return 0;if(t(w.cb),k.ac==null||k.ac(k)){k.ob&&(w.L=0);var R=Wv[w.L];if(w.L==2?(w.yb=0,w.zb=0):(w.yb=k.v-R>>4,w.zb=k.j-R>>4,0>w.yb&&(w.yb=0),0>w.zb&&(w.zb=0)),w.Va=k.o+15+R>>4,w.Hb=k.va+15+R>>4,w.Hb>w.za&&(w.Hb=w.za),w.Va>w.Ub&&(w.Va=w.Ub),0<w.L){var H=w.ed;for(R=0;4>R;++R){var J;if(w.Qa.Cb){var Z=w.Qa.Lb[R];w.Qa.Fb||(Z+=H.Tb)}else Z=H.Tb;for(J=0;1>=J;++J){var ee=w.gd[R][J],ne=Z;if(H.Pc&&(ne+=H.vd[0],J&&(ne+=H.od[0])),0<(ne=0>ne?0:63<ne?63:ne)){var re=ne;0<H.wb&&(re=4<H.wb?re>>2:re>>1)>9-H.wb&&(re=9-H.wb),1>re&&(re=1),ee.dd=re,ee.tc=2*ne+re,ee.ld=40<=ne?2:15<=ne?1:0}else ee.tc=0;ee.La=J}}}R=0}else it(w,6,"Frame setup failed"),R=w.a;if(R=R==0){if(R){w.$c=0,0<w.Aa||(w.Ic=D7);e:{R=w.Ic,H=4*(re=w.za);var ce=32*re,be=re+1,Oe=0<w.L?re*(0<w.Aa?2:1):0,Fe=(w.Aa==2?2:1)*re;if((ee=H+832+(J=3*(16*R+Wv[w.L])/2*ce)+(Z=w.Fa!=null&&0<w.Fa.length?w.Kc.c*w.Kc.i:0))!=ee)R=0;else{if(ee>w.Vb){if(w.Vb=0,w.Ec=i(ee),w.Fc=0,w.Ec==null){R=it(w,1,"no memory during frame initialization.");break e}w.Vb=ee}ee=w.Ec,ne=w.Fc,w.Ac=ee,w.Bc=ne,ne+=H,w.Gd=o(ce,Fd),w.Hd=0,w.rb=o(be+1,Od),w.sb=1,w.wa=Oe?o(Oe,hl):null,w.Y=0,w.D.Nb=0,w.D.wa=w.wa,w.D.Y=w.Y,0<w.Aa&&(w.D.Y+=re),t(!0),w.oc=ee,w.pc=ne,ne+=832,w.ya=o(Fe,lc),w.aa=0,w.D.ya=w.ya,w.D.aa=w.aa,w.Aa==2&&(w.D.aa+=re),w.R=16*re,w.B=8*re,re=(ce=Wv[w.L])*w.R,ce=ce/2*w.B,w.sa=ee,w.ta=ne+re,w.qa=w.sa,w.ra=w.ta+16*R*w.R+ce,w.Ha=w.qa,w.Ia=w.ra+8*R*w.B+ce,w.$c=0,ne+=J,w.mb=Z?ee:null,w.nb=Z?ne:null,t(ne+Z<=w.Fc+w.Vb),os(w),a(w.Ac,w.Bc,0,H),R=1}}if(R){if(k.ka=0,k.y=w.sa,k.O=w.ta,k.f=w.qa,k.N=w.ra,k.ea=w.Ha,k.Vd=w.Ia,k.fa=w.R,k.Rc=w.B,k.F=null,k.J=0,!Mv){for(R=-255;255>=R;++R)Zr[255+R]=0>R?-R:R;for(R=-1020;1020>=R;++R)bl[1020+R]=-128>R?-128:127<R?127:R;for(R=-112;112>=R;++R)Lp[112+R]=-16>R?-16:15<R?15:R;for(R=-255;510>=R;++R)Ph[255+R]=0>R?0:255<R?255:R;Mv=1}Nh=fl,yl=Qr,_p=Ls,oa=Ja,mi=wo,Rr=Rs,Sh=yp,_v=zd,Mp=Ib,qd=bp,Vd=Lb,mc=ph,Ud=wp,Ch=Pv,Yd=Cv,gc=No,Rp=gl,gi=Rb,Ui[0]=jo,Ui[1]=pl,Ui[2]=kb,Ui[3]=Eb,Ui[4]=bv,Ui[5]=hh,Ui[6]=wv,Ui[7]=gp,Ui[8]=Ab,Ui[9]=Tb,vc[0]=xv,vc[1]=ds,vc[2]=ur,vc[3]=cc,vc[4]=Is,vc[5]=Db,vc[6]=yv,wl[0]=dc,wl[1]=ml,wl[2]=_b,wl[3]=vp,wl[4]=Bd,wl[5]=Mb,wl[6]=xp,R=1}else R=0}R&&(R=function(Ae,Ke){for(Ae.M=0;Ae.M<Ae.Va;++Ae.M){var We,je=Ae.Jc[Ae.M&Ae.Xb],Ce=Ae.m,Ge=Ae;for(We=0;We<Ge.za;++We){var tt=Ce,Je=Ge,Ct=Je.Ac,vt=Je.Bc+4*We,$t=Je.zc,bt=Je.ya[Je.aa+We];if(Je.Qa.Bb?bt.$b=me(tt,Je.Pa.jb[0])?2+me(tt,Je.Pa.jb[2]):me(tt,Je.Pa.jb[1]):bt.$b=0,Je.kc&&(bt.Ad=me(tt,Je.Bd)),bt.Za=!me(tt,145)+0,bt.Za){var xn=bt.Ob,Nn=0;for(Je=0;4>Je;++Je){var fn,cn=$t[0+Je];for(fn=0;4>fn;++fn){cn=h7[Ct[vt+fn]][cn];for(var Rn=xP[me(tt,cn[0])];0<Rn;)Rn=xP[2*Rn+me(tt,cn[Rn])];cn=-Rn,Ct[vt+fn]=cn}r(xn,Nn,Ct,vt,4),Nn+=4,$t[0+Je]=cn}}else cn=me(tt,156)?me(tt,128)?1:3:me(tt,163)?2:0,bt.Ob[0]=cn,a(Ct,vt,cn,4),a($t,0,cn,4);bt.Dd=me(tt,142)?me(tt,114)?me(tt,183)?1:3:2:0}if(Ge.m.Ka)return it(Ae,7,"Premature end-of-partition0 encountered.");for(;Ae.ja<Ae.za;++Ae.ja){if(Ge=je,tt=(Ce=Ae).rb[Ce.sb-1],Ct=Ce.rb[Ce.sb+Ce.ja],We=Ce.ya[Ce.aa+Ce.ja],vt=Ce.kc?We.Ad:0)tt.la=Ct.la=0,We.Za||(tt.Na=Ct.Na=0),We.Hc=0,We.Gc=0,We.ia=0;else{var Tn,Qt;if(tt=Ct,Ct=Ge,vt=Ce.Pa.Xc,$t=Ce.ya[Ce.aa+Ce.ja],bt=Ce.pb[$t.$b],Je=$t.ad,xn=0,Nn=Ce.rb[Ce.sb-1],cn=fn=0,a(Je,xn,0,384),$t.Za)var Yr=0,Ta=vt[3];else{Rn=i(16);var Gr=tt.Na+Nn.Na;if(Gr=Ip(Ct,vt[1],Gr,bt.Eb,0,Rn,0),tt.Na=Nn.Na=(0<Gr)+0,1<Gr)Nh(Rn,0,Je,xn);else{var Aa=Rn[0]+3>>3;for(Rn=0;256>Rn;Rn+=16)Je[xn+Rn]=Aa}Yr=1,Ta=vt[0]}var Sn=15&tt.la,Qa=15&Nn.la;for(Rn=0;4>Rn;++Rn){var Za=1&Qa;for(Aa=Qt=0;4>Aa;++Aa)Sn=Sn>>1|(Za=(Gr=Ip(Ct,Ta,Gr=Za+(1&Sn),bt.Sc,Yr,Je,xn))>Yr)<<7,Qt=Qt<<2|(3<Gr?3:1<Gr?2:Je[xn+0]!=0),xn+=16;Sn>>=4,Qa=Qa>>1|Za<<7,fn=(fn<<8|Qt)>>>0}for(Ta=Sn,Yr=Qa>>4,Tn=0;4>Tn;Tn+=2){for(Qt=0,Sn=tt.la>>4+Tn,Qa=Nn.la>>4+Tn,Rn=0;2>Rn;++Rn){for(Za=1&Qa,Aa=0;2>Aa;++Aa)Gr=Za+(1&Sn),Sn=Sn>>1|(Za=0<(Gr=Ip(Ct,vt[2],Gr,bt.Qc,0,Je,xn)))<<3,Qt=Qt<<2|(3<Gr?3:1<Gr?2:Je[xn+0]!=0),xn+=16;Sn>>=2,Qa=Qa>>1|Za<<5}cn|=Qt<<4*Tn,Ta|=Sn<<4<<Tn,Yr|=(240&Qa)<<Tn}tt.la=Ta,Nn.la=Yr,$t.Hc=fn,$t.Gc=cn,$t.ia=43690&cn?0:bt.ia,vt=!(fn|cn)}if(0<Ce.L&&(Ce.wa[Ce.Y+Ce.ja]=Ce.gd[We.$b][We.Za],Ce.wa[Ce.Y+Ce.ja].La|=!vt),Ge.Ka)return it(Ae,7,"Premature end-of-file encountered.")}if(os(Ae),Ce=Ke,Ge=1,We=(je=Ae).D,tt=0<je.L&&je.M>=je.zb&&je.M<=je.Va,je.Aa==0)e:{if(We.M=je.M,We.uc=tt,Dp(je,We),Ge=1,We=(Qt=je.D).Nb,tt=(cn=Wv[je.L])*je.R,Ct=cn/2*je.B,Rn=16*We*je.R,Aa=8*We*je.B,vt=je.sa,$t=je.ta-tt+Rn,bt=je.qa,Je=je.ra-Ct+Aa,xn=je.Ha,Nn=je.Ia-Ct+Aa,Qa=(Sn=Qt.M)==0,fn=Sn>=je.Va-1,je.Aa==2&&Dp(je,Qt),Qt.uc)for(Za=(Gr=je).D.M,t(Gr.D.uc),Qt=Gr.yb;Qt<Gr.Hb;++Qt){Yr=Qt,Ta=Za;var hs=(Ss=(Pr=Gr).D).Nb;Tn=Pr.R;var Ss=Ss.wa[Ss.Y+Yr],la=Pr.sa,bi=Pr.ta+16*hs*Tn+16*Yr,Co=Ss.dd,fs=Ss.tc;if(fs!=0)if(t(3<=fs),Pr.L==1)0<Yr&&gc(la,bi,Tn,fs+4),Ss.La&&gi(la,bi,Tn,fs),0<Ta&&Yd(la,bi,Tn,fs+4),Ss.La&&Rp(la,bi,Tn,fs);else{var jl=Pr.B,Gd=Pr.qa,Dh=Pr.ra+8*hs*jl+8*Yr,yc=Pr.Ha,Pr=Pr.Ia+8*hs*jl+8*Yr;hs=Ss.ld,0<Yr&&(_v(la,bi,Tn,fs+4,Co,hs),qd(Gd,Dh,yc,Pr,jl,fs+4,Co,hs)),Ss.La&&(mc(la,bi,Tn,fs,Co,hs),Ch(Gd,Dh,yc,Pr,jl,fs,Co,hs)),0<Ta&&(Sh(la,bi,Tn,fs+4,Co,hs),Mp(Gd,Dh,yc,Pr,jl,fs+4,Co,hs)),Ss.La&&(Vd(la,bi,Tn,fs,Co,hs),Ud(Gd,Dh,yc,Pr,jl,fs,Co,hs))}}if(je.ia&&alert("todo:DitherRow"),Ce.put!=null){if(Qt=16*Sn,Sn=16*(Sn+1),Qa?(Ce.y=je.sa,Ce.O=je.ta+Rn,Ce.f=je.qa,Ce.N=je.ra+Aa,Ce.ea=je.Ha,Ce.W=je.Ia+Aa):(Qt-=cn,Ce.y=vt,Ce.O=$t,Ce.f=bt,Ce.N=Je,Ce.ea=xn,Ce.W=Nn),fn||(Sn-=cn),Sn>Ce.o&&(Sn=Ce.o),Ce.F=null,Ce.J=null,je.Fa!=null&&0<je.Fa.length&&Qt<Sn&&(Ce.J=Cp(je,Ce,Qt,Sn-Qt),Ce.F=je.mb,Ce.F==null&&Ce.F.length==0)){Ge=it(je,3,"Could not decode alpha data.");break e}Qt<Ce.j&&(cn=Ce.j-Qt,Qt=Ce.j,t(!(1&cn)),Ce.O+=je.R*cn,Ce.N+=je.B*(cn>>1),Ce.W+=je.B*(cn>>1),Ce.F!=null&&(Ce.J+=Ce.width*cn)),Qt<Sn&&(Ce.O+=Ce.v,Ce.N+=Ce.v>>1,Ce.W+=Ce.v>>1,Ce.F!=null&&(Ce.J+=Ce.v),Ce.ka=Qt-Ce.j,Ce.U=Ce.va-Ce.v,Ce.T=Sn-Qt,Ge=Ce.put(Ce))}We+1!=je.Ic||fn||(r(je.sa,je.ta-tt,vt,$t+16*je.R,tt),r(je.qa,je.ra-Ct,bt,Je+8*je.B,Ct),r(je.Ha,je.Ia-Ct,xn,Nn+8*je.B,Ct))}if(!Ge)return it(Ae,6,"Output aborted.")}return 1}(w,k)),k.bc!=null&&k.bc(k),R&=1}return R?(w.cb=0,R):0}function dr(w,k,R,H,J){J=w[k+R+32*H]+(J>>3),w[k+R+32*H]=-256&J?0>J?0:255:J}function ls(w,k,R,H,J,Z){dr(w,k,0,R,H+J),dr(w,k,1,R,H+Z),dr(w,k,2,R,H-Z),dr(w,k,3,R,H-J)}function qn(w){return(20091*w>>16)+w}function cs(w,k,R,H){var J,Z=0,ee=i(16);for(J=0;4>J;++J){var ne=w[k+0]+w[k+8],re=w[k+0]-w[k+8],ce=(35468*w[k+4]>>16)-qn(w[k+12]),be=qn(w[k+4])+(35468*w[k+12]>>16);ee[Z+0]=ne+be,ee[Z+1]=re+ce,ee[Z+2]=re-ce,ee[Z+3]=ne-be,Z+=4,k++}for(J=Z=0;4>J;++J)ne=(w=ee[Z+0]+4)+ee[Z+8],re=w-ee[Z+8],ce=(35468*ee[Z+4]>>16)-qn(ee[Z+12]),dr(R,H,0,0,ne+(be=qn(ee[Z+4])+(35468*ee[Z+12]>>16))),dr(R,H,1,0,re+ce),dr(R,H,2,0,re-ce),dr(R,H,3,0,ne-be),Z++,H+=32}function Rs(w,k,R,H){var J=w[k+0]+4,Z=35468*w[k+4]>>16,ee=qn(w[k+4]),ne=35468*w[k+1]>>16;ls(R,H,0,J+ee,w=qn(w[k+1]),ne),ls(R,H,1,J+Z,w,ne),ls(R,H,2,J-Z,w,ne),ls(R,H,3,J-ee,w,ne)}function Qr(w,k,R,H,J){cs(w,k,R,H),J&&cs(w,k+16,R,H+4)}function Ls(w,k,R,H){yl(w,k+0,R,H,1),yl(w,k+32,R,H+128,1)}function Ja(w,k,R,H){var J;for(w=w[k+0]+4,J=0;4>J;++J)for(k=0;4>k;++k)dr(R,H,k,J,w)}function wo(w,k,R,H){w[k+0]&&oa(w,k+0,R,H),w[k+16]&&oa(w,k+16,R,H+4),w[k+32]&&oa(w,k+32,R,H+128),w[k+48]&&oa(w,k+48,R,H+128+4)}function fl(w,k,R,H){var J,Z=i(16);for(J=0;4>J;++J){var ee=w[k+0+J]+w[k+12+J],ne=w[k+4+J]+w[k+8+J],re=w[k+4+J]-w[k+8+J],ce=w[k+0+J]-w[k+12+J];Z[0+J]=ee+ne,Z[8+J]=ee-ne,Z[4+J]=ce+re,Z[12+J]=ce-re}for(J=0;4>J;++J)ee=(w=Z[0+4*J]+3)+Z[3+4*J],ne=Z[1+4*J]+Z[2+4*J],re=Z[1+4*J]-Z[2+4*J],ce=w-Z[3+4*J],R[H+0]=ee+ne>>3,R[H+16]=ce+re>>3,R[H+32]=ee-ne>>3,R[H+48]=ce-re>>3,H+=64}function Hi(w,k,R){var H,J=k-32,Z=Xa,ee=255-w[J-1];for(H=0;H<R;++H){var ne,re=Z,ce=ee+w[k-1];for(ne=0;ne<R;++ne)w[k+ne]=re[ce+w[J+ne]];k+=32}}function pl(w,k){Hi(w,k,4)}function ml(w,k){Hi(w,k,8)}function ds(w,k){Hi(w,k,16)}function ur(w,k){var R;for(R=0;16>R;++R)r(w,k+32*R,w,k-32,16)}function cc(w,k){var R;for(R=16;0<R;--R)a(w,k,w[k-1],16),k+=32}function uh(w,k,R){var H;for(H=0;16>H;++H)a(k,R+32*H,w,16)}function xv(w,k){var R,H=16;for(R=0;16>R;++R)H+=w[k-1+32*R]+w[k+R-32];uh(H>>5,w,k)}function Is(w,k){var R,H=8;for(R=0;16>R;++R)H+=w[k-1+32*R];uh(H>>4,w,k)}function Db(w,k){var R,H=8;for(R=0;16>R;++R)H+=w[k+R-32];uh(H>>4,w,k)}function yv(w,k){uh(128,w,k)}function qt(w,k,R){return w+2*k+R+2>>2}function kb(w,k){var R,H=k-32;for(H=new Uint8Array([qt(w[H-1],w[H+0],w[H+1]),qt(w[H+0],w[H+1],w[H+2]),qt(w[H+1],w[H+2],w[H+3]),qt(w[H+2],w[H+3],w[H+4])]),R=0;4>R;++R)r(w,k+32*R,H,0,H.length)}function Eb(w,k){var R=w[k-1],H=w[k-1+32],J=w[k-1+64],Z=w[k-1+96];Le(w,k+0,16843009*qt(w[k-1-32],R,H)),Le(w,k+32,16843009*qt(R,H,J)),Le(w,k+64,16843009*qt(H,J,Z)),Le(w,k+96,16843009*qt(J,Z,Z))}function jo(w,k){var R,H=4;for(R=0;4>R;++R)H+=w[k+R-32]+w[k-1+32*R];for(H>>=3,R=0;4>R;++R)a(w,k+32*R,H,4)}function bv(w,k){var R=w[k-1+0],H=w[k-1+32],J=w[k-1+64],Z=w[k-1-32],ee=w[k+0-32],ne=w[k+1-32],re=w[k+2-32],ce=w[k+3-32];w[k+0+96]=qt(H,J,w[k-1+96]),w[k+1+96]=w[k+0+64]=qt(R,H,J),w[k+2+96]=w[k+1+64]=w[k+0+32]=qt(Z,R,H),w[k+3+96]=w[k+2+64]=w[k+1+32]=w[k+0+0]=qt(ee,Z,R),w[k+3+64]=w[k+2+32]=w[k+1+0]=qt(ne,ee,Z),w[k+3+32]=w[k+2+0]=qt(re,ne,ee),w[k+3+0]=qt(ce,re,ne)}function wv(w,k){var R=w[k+1-32],H=w[k+2-32],J=w[k+3-32],Z=w[k+4-32],ee=w[k+5-32],ne=w[k+6-32],re=w[k+7-32];w[k+0+0]=qt(w[k+0-32],R,H),w[k+1+0]=w[k+0+32]=qt(R,H,J),w[k+2+0]=w[k+1+32]=w[k+0+64]=qt(H,J,Z),w[k+3+0]=w[k+2+32]=w[k+1+64]=w[k+0+96]=qt(J,Z,ee),w[k+3+32]=w[k+2+64]=w[k+1+96]=qt(Z,ee,ne),w[k+3+64]=w[k+2+96]=qt(ee,ne,re),w[k+3+96]=qt(ne,re,re)}function hh(w,k){var R=w[k-1+0],H=w[k-1+32],J=w[k-1+64],Z=w[k-1-32],ee=w[k+0-32],ne=w[k+1-32],re=w[k+2-32],ce=w[k+3-32];w[k+0+0]=w[k+1+64]=Z+ee+1>>1,w[k+1+0]=w[k+2+64]=ee+ne+1>>1,w[k+2+0]=w[k+3+64]=ne+re+1>>1,w[k+3+0]=re+ce+1>>1,w[k+0+96]=qt(J,H,R),w[k+0+64]=qt(H,R,Z),w[k+0+32]=w[k+1+96]=qt(R,Z,ee),w[k+1+32]=w[k+2+96]=qt(Z,ee,ne),w[k+2+32]=w[k+3+96]=qt(ee,ne,re),w[k+3+32]=qt(ne,re,ce)}function gp(w,k){var R=w[k+0-32],H=w[k+1-32],J=w[k+2-32],Z=w[k+3-32],ee=w[k+4-32],ne=w[k+5-32],re=w[k+6-32],ce=w[k+7-32];w[k+0+0]=R+H+1>>1,w[k+1+0]=w[k+0+64]=H+J+1>>1,w[k+2+0]=w[k+1+64]=J+Z+1>>1,w[k+3+0]=w[k+2+64]=Z+ee+1>>1,w[k+0+32]=qt(R,H,J),w[k+1+32]=w[k+0+96]=qt(H,J,Z),w[k+2+32]=w[k+1+96]=qt(J,Z,ee),w[k+3+32]=w[k+2+96]=qt(Z,ee,ne),w[k+3+64]=qt(ee,ne,re),w[k+3+96]=qt(ne,re,ce)}function Tb(w,k){var R=w[k-1+0],H=w[k-1+32],J=w[k-1+64],Z=w[k-1+96];w[k+0+0]=R+H+1>>1,w[k+2+0]=w[k+0+32]=H+J+1>>1,w[k+2+32]=w[k+0+64]=J+Z+1>>1,w[k+1+0]=qt(R,H,J),w[k+3+0]=w[k+1+32]=qt(H,J,Z),w[k+3+32]=w[k+1+64]=qt(J,Z,Z),w[k+3+64]=w[k+2+64]=w[k+0+96]=w[k+1+96]=w[k+2+96]=w[k+3+96]=Z}function Ab(w,k){var R=w[k-1+0],H=w[k-1+32],J=w[k-1+64],Z=w[k-1+96],ee=w[k-1-32],ne=w[k+0-32],re=w[k+1-32],ce=w[k+2-32];w[k+0+0]=w[k+2+32]=R+ee+1>>1,w[k+0+32]=w[k+2+64]=H+R+1>>1,w[k+0+64]=w[k+2+96]=J+H+1>>1,w[k+0+96]=Z+J+1>>1,w[k+3+0]=qt(ne,re,ce),w[k+2+0]=qt(ee,ne,re),w[k+1+0]=w[k+3+32]=qt(R,ee,ne),w[k+1+32]=w[k+3+64]=qt(H,R,ee),w[k+1+64]=w[k+3+96]=qt(J,H,R),w[k+1+96]=qt(Z,J,H)}function _b(w,k){var R;for(R=0;8>R;++R)r(w,k+32*R,w,k-32,8)}function vp(w,k){var R;for(R=0;8>R;++R)a(w,k,w[k-1],8),k+=32}function $d(w,k,R){var H;for(H=0;8>H;++H)a(k,R+32*H,w,8)}function dc(w,k){var R,H=8;for(R=0;8>R;++R)H+=w[k+R-32]+w[k-1+32*R];$d(H>>4,w,k)}function Mb(w,k){var R,H=4;for(R=0;8>R;++R)H+=w[k+R-32];$d(H>>3,w,k)}function Bd(w,k){var R,H=4;for(R=0;8>R;++R)H+=w[k-1+32*R];$d(H>>3,w,k)}function xp(w,k){$d(128,w,k)}function fh(w,k,R){var H=w[k-R],J=w[k+0],Z=3*(J-H)+$b[1020+w[k-2*R]-w[k+R]],ee=Rv[112+(Z+4>>3)];w[k-R]=Xa[255+H+Rv[112+(Z+3>>3)]],w[k+0]=Xa[255+J-ee]}function jv(w,k,R,H){var J=w[k+0],Z=w[k+R];return xi[255+w[k-2*R]-w[k-R]]>H||xi[255+Z-J]>H}function Nv(w,k,R,H){return 4*xi[255+w[k-R]-w[k+0]]+xi[255+w[k-2*R]-w[k+R]]<=H}function Sv(w,k,R,H,J){var Z=w[k-3*R],ee=w[k-2*R],ne=w[k-R],re=w[k+0],ce=w[k+R],be=w[k+2*R],Oe=w[k+3*R];return 4*xi[255+ne-re]+xi[255+ee-ce]>H?0:xi[255+w[k-4*R]-Z]<=J&&xi[255+Z-ee]<=J&&xi[255+ee-ne]<=J&&xi[255+Oe-be]<=J&&xi[255+be-ce]<=J&&xi[255+ce-re]<=J}function Cv(w,k,R,H){var J=2*H+1;for(H=0;16>H;++H)Nv(w,k+H,R,J)&&fh(w,k+H,R)}function No(w,k,R,H){var J=2*H+1;for(H=0;16>H;++H)Nv(w,k+H*R,1,J)&&fh(w,k+H*R,1)}function gl(w,k,R,H){var J;for(J=3;0<J;--J)Cv(w,k+=4*R,R,H)}function Rb(w,k,R,H){var J;for(J=3;0<J;--J)No(w,k+=4,R,H)}function uc(w,k,R,H,J,Z,ee,ne){for(Z=2*Z+1;0<J--;){if(Sv(w,k,R,Z,ee))if(jv(w,k,R,ne))fh(w,k,R);else{var re=w,ce=k,be=R,Oe=re[ce-2*be],Fe=re[ce-be],Ae=re[ce+0],Ke=re[ce+be],We=re[ce+2*be],je=27*(Ge=$b[1020+3*(Ae-Fe)+$b[1020+Oe-Ke]])+63>>7,Ce=18*Ge+63>>7,Ge=9*Ge+63>>7;re[ce-3*be]=Xa[255+re[ce-3*be]+Ge],re[ce-2*be]=Xa[255+Oe+Ce],re[ce-be]=Xa[255+Fe+je],re[ce+0]=Xa[255+Ae-je],re[ce+be]=Xa[255+Ke-Ce],re[ce+2*be]=Xa[255+We-Ge]}k+=H}}function qi(w,k,R,H,J,Z,ee,ne){for(Z=2*Z+1;0<J--;){if(Sv(w,k,R,Z,ee))if(jv(w,k,R,ne))fh(w,k,R);else{var re=w,ce=k,be=R,Oe=re[ce-be],Fe=re[ce+0],Ae=re[ce+be],Ke=Rv[112+((We=3*(Fe-Oe))+4>>3)],We=Rv[112+(We+3>>3)],je=Ke+1>>1;re[ce-2*be]=Xa[255+re[ce-2*be]+je],re[ce-be]=Xa[255+Oe+We],re[ce+0]=Xa[255+Fe-Ke],re[ce+be]=Xa[255+Ae-je]}k+=H}}function yp(w,k,R,H,J,Z){uc(w,k,R,1,16,H,J,Z)}function zd(w,k,R,H,J,Z){uc(w,k,1,R,16,H,J,Z)}function Lb(w,k,R,H,J,Z){var ee;for(ee=3;0<ee;--ee)qi(w,k+=4*R,R,1,16,H,J,Z)}function ph(w,k,R,H,J,Z){var ee;for(ee=3;0<ee;--ee)qi(w,k+=4,1,R,16,H,J,Z)}function Ib(w,k,R,H,J,Z,ee,ne){uc(w,k,J,1,8,Z,ee,ne),uc(R,H,J,1,8,Z,ee,ne)}function bp(w,k,R,H,J,Z,ee,ne){uc(w,k,1,J,8,Z,ee,ne),uc(R,H,1,J,8,Z,ee,ne)}function wp(w,k,R,H,J,Z,ee,ne){qi(w,k+4*J,J,1,8,Z,ee,ne),qi(R,H+4*J,J,1,8,Z,ee,ne)}function Pv(w,k,R,H,J,Z,ee,ne){qi(w,k+4,1,J,8,Z,ee,ne),qi(R,H+4,1,J,8,Z,ee,ne)}function mh(){this.ba=new Bt,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new It,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function jp(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Np(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Dv(){this.ua=0,this.Wa=new ue,this.vb=new ue,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new O,this.yc=new E}function Ob(){this.xb=this.a=0,this.l=new mt,this.ca=new Bt,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new I,this.Pb=0,this.wd=new I,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Dv,this.ab=0,this.gc=o(4,Np),this.Oc=0}function gh(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new mt,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Wd(w,k,R,H,J,Z,ee){for(w=w==null?0:w[k+0],k=0;k<ee;++k)J[Z+k]=w+R[H+k]&255,w=J[Z+k]}function Sp(w,k,R,H,J,Z,ee){var ne;if(w==null)Wd(null,null,R,H,J,Z,ee);else for(ne=0;ne<ee;++ne)J[Z+ne]=w[k+ne]+R[H+ne]&255}function hc(w,k,R,H,J,Z,ee){if(w==null)Wd(null,null,R,H,J,Z,ee);else{var ne,re=w[k+0],ce=re,be=re;for(ne=0;ne<ee;++ne)ce=be+(re=w[k+ne])-ce,be=R[H+ne]+(-256&ce?0>ce?0:255:ce)&255,ce=re,J[Z+ne]=be}}function Cp(w,k,R,H){var J=k.width,Z=k.o;if(t(w!=null&&k!=null),0>R||0>=H||R+H>Z)return null;if(!w.Cc){if(w.ga==null){var ee;if(w.ga=new gh,(ee=w.ga==null)||(ee=k.width*k.o,t(w.Gb.length==0),w.Gb=i(ee),w.Uc=0,w.Gb==null?ee=0:(w.mb=w.Gb,w.nb=w.Uc,w.rc=null,ee=1),ee=!ee),!ee){ee=w.ga;var ne=w.Fa,re=w.P,ce=w.qc,be=w.mb,Oe=w.nb,Fe=re+1,Ae=ce-1,Ke=ee.l;if(t(ne!=null&&be!=null&&k!=null),xc[0]=null,xc[1]=Wd,xc[2]=Sp,xc[3]=hc,ee.ca=be,ee.tb=Oe,ee.c=k.width,ee.i=k.height,t(0<ee.c&&0<ee.i),1>=ce)k=0;else if(ee.$a=ne[re+0]>>0&3,ee.Z=ne[re+0]>>2&3,ee.Lc=ne[re+0]>>4&3,re=ne[re+0]>>6&3,0>ee.$a||1<ee.$a||4<=ee.Z||1<ee.Lc||re)k=0;else if(Ke.put=sn,Ke.ac=dt,Ke.bc=Xr,Ke.ma=ee,Ke.width=k.width,Ke.height=k.height,Ke.Da=k.Da,Ke.v=k.v,Ke.va=k.va,Ke.j=k.j,Ke.o=k.o,ee.$a)e:{t(ee.$a==1),k=sa();t:for(;;){if(k==null){k=0;break e}if(t(ee!=null),ee.mc=k,k.c=ee.c,k.i=ee.i,k.l=ee.l,k.l.ma=ee,k.l.width=ee.c,k.l.height=ee.i,k.a=0,V(k.m,ne,Fe,Ae),!Ga(ee.c,ee.i,1,k,null)||(k.ab==1&&k.gc[0].hc==3&&fi(k.s)?(ee.ic=1,ne=k.c*k.i,k.Ta=null,k.Ua=0,k.V=i(ne),k.Ba=0,k.V==null?(k.a=1,k=0):k=1):(ee.ic=0,k=bo(k,ee.c)),!k))break t;k=1;break e}ee.mc=null,k=0}else k=Ae>=ee.c*ee.i;ee=!k}if(ee)return null;w.ga.Lc!=1?w.Ga=0:H=Z-R}t(w.ga!=null),t(R+H<=Z);e:{if(k=(ne=w.ga).c,Z=ne.l.o,ne.$a==0){if(Fe=w.rc,Ae=w.Vc,Ke=w.Fa,re=w.P+1+R*k,ce=w.mb,be=w.nb+R*k,t(re<=w.P+w.qc),ne.Z!=0)for(t(xc[ne.Z]!=null),ee=0;ee<H;++ee)xc[ne.Z](Fe,Ae,Ke,re,ce,be,k),Fe=ce,Ae=be,be+=k,re+=k;else for(ee=0;ee<H;++ee)r(ce,be,Ke,re,k),Fe=ce,Ae=be,be+=k,re+=k;w.rc=Fe,w.Vc=Ae}else{if(t(ne.mc!=null),k=R+H,t((ee=ne.mc)!=null),t(k<=ee.i),ee.C>=k)k=1;else if(ne.ic||Re(),ne.ic){ne=ee.V,Fe=ee.Ba,Ae=ee.c;var We=ee.i,je=(Ke=1,re=ee.$/Ae,ce=ee.$%Ae,be=ee.m,Oe=ee.s,ee.$),Ce=Ae*We,Ge=Ae*k,tt=Oe.wc,Je=je<Ge?cr(Oe,ce,re):null;t(je<=Ce),t(k<=We),t(fi(Oe));t:for(;;){for(;!be.h&&je<Ge;){if(ce&tt||(Je=cr(Oe,ce,re)),t(Je!=null),te(be),256>(We=js(Je.G[0],Je.H[0],be)))ne[Fe+je]=We,++je,++ce>=Ae&&(ce=0,++re<=k&&!(re%16)&&Pa(ee,re));else{if(!(280>We)){Ke=0;break t}We=Sa(We-256,be);var Ct,vt=js(Je.G[4],Je.H[4],be);if(te(be),!(je>=(vt=Ua(Ae,vt=Sa(vt,be)))&&Ce-je>=We)){Ke=0;break t}for(Ct=0;Ct<We;++Ct)ne[Fe+je+Ct]=ne[Fe+je+Ct-vt];for(je+=We,ce+=We;ce>=Ae;)ce-=Ae,++re<=k&&!(re%16)&&Pa(ee,re);je<Ge&&ce&tt&&(Je=cr(Oe,ce,re))}t(be.h==q(be))}Pa(ee,re>k?k:re);break t}!Ke||be.h&&je<Ce?(Ke=0,ee.a=be.h?5:3):ee.$=je,k=Ke}else k=Da(ee,ee.V,ee.Ba,ee.c,ee.i,k,ll);if(!k){H=0;break e}}R+H>=Z&&(w.Cc=1),H=1}if(!H)return null;if(w.Cc&&((H=w.ga)!=null&&(H.mc=null),w.ga=null,0<w.Ga))return alert("todo:WebPDequantizeLevels"),null}return w.nb+R*J}function _(w,k,R,H,J,Z){for(;0<J--;){var ee,ne=w,re=k+(R?1:0),ce=w,be=k+(R?0:3);for(ee=0;ee<H;++ee){var Oe=ce[be+4*ee];Oe!=255&&(Oe*=32897,ne[re+4*ee+0]=ne[re+4*ee+0]*Oe>>23,ne[re+4*ee+1]=ne[re+4*ee+1]*Oe>>23,ne[re+4*ee+2]=ne[re+4*ee+2]*Oe>>23)}k+=Z}}function K(w,k,R,H,J){for(;0<H--;){var Z;for(Z=0;Z<R;++Z){var ee=w[k+2*Z+0],ne=15&(ce=w[k+2*Z+1]),re=4369*ne,ce=(240&ce|ce>>4)*re>>16;w[k+2*Z+0]=(240&ee|ee>>4)*re>>16&240|(15&ee|ee<<4)*re>>16>>4&15,w[k+2*Z+1]=240&ce|ne}k+=J}}function fe(w,k,R,H,J,Z,ee,ne){var re,ce,be=255;for(ce=0;ce<J;++ce){for(re=0;re<H;++re){var Oe=w[k+re];Z[ee+4*re]=Oe,be&=Oe}k+=R,ee+=ne}return be!=255}function ye(w,k,R,H,J){var Z;for(Z=0;Z<J;++Z)R[H+Z]=w[k+Z]>>8}function Re(){vi=_,Fn=K,$n=fe,Lr=ye}function He(w,k,R){N[w]=function(H,J,Z,ee,ne,re,ce,be,Oe,Fe,Ae,Ke,We,je,Ce,Ge,tt){var Je,Ct=tt-1>>1,vt=ne[re+0]|ce[be+0]<<16,$t=Oe[Fe+0]|Ae[Ke+0]<<16;t(H!=null);var bt=3*vt+$t+131074>>2;for(k(H[J+0],255&bt,bt>>16,We,je),Z!=null&&(bt=3*$t+vt+131074>>2,k(Z[ee+0],255&bt,bt>>16,Ce,Ge)),Je=1;Je<=Ct;++Je){var xn=ne[re+Je]|ce[be+Je]<<16,Nn=Oe[Fe+Je]|Ae[Ke+Je]<<16,fn=vt+xn+$t+Nn+524296,cn=fn+2*(xn+$t)>>3;bt=cn+vt>>1,vt=(fn=fn+2*(vt+Nn)>>3)+xn>>1,k(H[J+2*Je-1],255&bt,bt>>16,We,je+(2*Je-1)*R),k(H[J+2*Je-0],255&vt,vt>>16,We,je+(2*Je-0)*R),Z!=null&&(bt=fn+$t>>1,vt=cn+Nn>>1,k(Z[ee+2*Je-1],255&bt,bt>>16,Ce,Ge+(2*Je-1)*R),k(Z[ee+2*Je+0],255&vt,vt>>16,Ce,Ge+(2*Je+0)*R)),vt=xn,$t=Nn}1&tt||(bt=3*vt+$t+131074>>2,k(H[J+tt-1],255&bt,bt>>16,We,je+(tt-1)*R),Z!=null&&(bt=3*$t+vt+131074>>2,k(Z[ee+tt-1],255&bt,bt>>16,Ce,Ge+(tt-1)*R)))}}function ot(){yi[Lv]=g7,yi[Iv]=bP,yi[mP]=v7,yi[Ov]=wP,yi[Fv]=jP,yi[Bb]=NP,yi[gP]=x7,yi[zb]=bP,yi[Wb]=wP,yi[$v]=jP,yi[Hb]=NP}function Nt(w){return w&~y7?0>w?0:255:w>>SP}function Lt(w,k){return Nt((19077*w>>8)+(26149*k>>8)-14234)}function Gt(w,k,R){return Nt((19077*w>>8)-(6419*k>>8)-(13320*R>>8)+8708)}function Vt(w,k){return Nt((19077*w>>8)+(33050*k>>8)-17685)}function hn(w,k,R,H,J){H[J+0]=Lt(w,R),H[J+1]=Gt(w,k,R),H[J+2]=Vt(w,k)}function hr(w,k,R,H,J){H[J+0]=Vt(w,k),H[J+1]=Gt(w,k,R),H[J+2]=Lt(w,R)}function Cr(w,k,R,H,J){var Z=Gt(w,k,R);k=Z<<3&224|Vt(w,k)>>3,H[J+0]=248&Lt(w,R)|Z>>5,H[J+1]=k}function Ur(w,k,R,H,J){var Z=240&Vt(w,k)|15;H[J+0]=240&Lt(w,R)|Gt(w,k,R)>>4,H[J+1]=Z}function Os(w,k,R,H,J){H[J+0]=255,hn(w,k,R,H,J+1)}function us(w,k,R,H,J){hr(w,k,R,H,J),H[J+3]=255}function Vi(w,k,R,H,J){hn(w,k,R,H,J),H[J+3]=255}function Ka(w,k){return 0>w?0:w>k?k:w}function So(w,k,R){N[w]=function(H,J,Z,ee,ne,re,ce,be,Oe){for(var Fe=be+(-2&Oe)*R;be!=Fe;)k(H[J+0],Z[ee+0],ne[re+0],ce,be),k(H[J+1],Z[ee+0],ne[re+0],ce,be+R),J+=2,++ee,++re,be+=2*R;1&Oe&&k(H[J+0],Z[ee+0],ne[re+0],ce,be)}}function kv(w,k,R){return R==0?w==0?k==0?6:5:k==0?4:0:R}function Pp(w,k,R,H,J){switch(w>>>30){case 3:yl(k,R,H,J,0);break;case 2:Rr(k,R,H,J);break;case 1:oa(k,R,H,J)}}function Dp(w,k){var R,H,J=k.M,Z=k.Nb,ee=w.oc,ne=w.pc+40,re=w.oc,ce=w.pc+584,be=w.oc,Oe=w.pc+600;for(R=0;16>R;++R)ee[ne+32*R-1]=129;for(R=0;8>R;++R)re[ce+32*R-1]=129,be[Oe+32*R-1]=129;for(0<J?ee[ne-1-32]=re[ce-1-32]=be[Oe-1-32]=129:(a(ee,ne-32-1,127,21),a(re,ce-32-1,127,9),a(be,Oe-32-1,127,9)),H=0;H<w.za;++H){var Fe=k.ya[k.aa+H];if(0<H){for(R=-1;16>R;++R)r(ee,ne+32*R-4,ee,ne+32*R+12,4);for(R=-1;8>R;++R)r(re,ce+32*R-4,re,ce+32*R+4,4),r(be,Oe+32*R-4,be,Oe+32*R+4,4)}var Ae=w.Gd,Ke=w.Hd+H,We=Fe.ad,je=Fe.Hc;if(0<J&&(r(ee,ne-32,Ae[Ke].y,0,16),r(re,ce-32,Ae[Ke].f,0,8),r(be,Oe-32,Ae[Ke].ea,0,8)),Fe.Za){var Ce=ee,Ge=ne-32+16;for(0<J&&(H>=w.za-1?a(Ce,Ge,Ae[Ke].y[15],4):r(Ce,Ge,Ae[Ke+1].y,0,4)),R=0;4>R;R++)Ce[Ge+128+R]=Ce[Ge+256+R]=Ce[Ge+384+R]=Ce[Ge+0+R];for(R=0;16>R;++R,je<<=2)Ce=ee,Ge=ne+PP[R],Ui[Fe.Ob[R]](Ce,Ge),Pp(je,We,16*+R,Ce,Ge)}else if(Ce=kv(H,J,Fe.Ob[0]),vc[Ce](ee,ne),je!=0)for(R=0;16>R;++R,je<<=2)Pp(je,We,16*+R,ee,ne+PP[R]);for(R=Fe.Gc,Ce=kv(H,J,Fe.Dd),wl[Ce](re,ce),wl[Ce](be,Oe),je=We,Ce=re,Ge=ce,255&(Fe=R>>0)&&(170&Fe?_p(je,256,Ce,Ge):mi(je,256,Ce,Ge)),Fe=be,je=Oe,255&(R>>=8)&&(170&R?_p(We,320,Fe,je):mi(We,320,Fe,je)),J<w.Ub-1&&(r(Ae[Ke].y,0,ee,ne+480,16),r(Ae[Ke].f,0,re,ce+224,8),r(Ae[Ke].ea,0,be,Oe+224,8)),R=8*Z*w.B,Ae=w.sa,Ke=w.ta+16*H+16*Z*w.R,We=w.qa,Fe=w.ra+8*H+R,je=w.Ha,Ce=w.Ia+8*H+R,R=0;16>R;++R)r(Ae,Ke+R*w.R,ee,ne+32*R,16);for(R=0;8>R;++R)r(We,Fe+R*w.B,re,ce+32*R,8),r(je,Ce+R*w.B,be,Oe+32*R,8)}}function vh(w,k,R,H,J,Z,ee,ne,re){var ce=[0],be=[0],Oe=0,Fe=re!=null?re.kd:0,Ae=re??new jp;if(w==null||12>R)return 7;Ae.data=w,Ae.w=k,Ae.ha=R,k=[k],R=[R],Ae.gb=[Ae.gb];e:{var Ke=k,We=R,je=Ae.gb;if(t(w!=null),t(We!=null),t(je!=null),je[0]=0,12<=We[0]&&!n(w,Ke[0],"RIFF")){if(n(w,Ke[0]+8,"WEBP")){je=3;break e}var Ce=Be(w,Ke[0]+4);if(12>Ce||4294967286<Ce){je=3;break e}if(Fe&&Ce>We[0]-8){je=7;break e}je[0]=Ce,Ke[0]+=12,We[0]-=12}je=0}if(je!=0)return je;for(Ce=0<Ae.gb[0],R=R[0];;){e:{var Ge=w;We=k,je=R;var tt=ce,Je=be,Ct=Ke=[0];if((bt=Oe=[Oe])[0]=0,8>je[0])je=7;else{if(!n(Ge,We[0],"VP8X")){if(Be(Ge,We[0]+4)!=10){je=3;break e}if(18>je[0]){je=7;break e}var vt=Be(Ge,We[0]+8),$t=1+Ne(Ge,We[0]+12);if(2147483648<=$t*(Ge=1+Ne(Ge,We[0]+15))){je=3;break e}Ct!=null&&(Ct[0]=vt),tt!=null&&(tt[0]=$t),Je!=null&&(Je[0]=Ge),We[0]+=18,je[0]-=18,bt[0]=1}je=0}}if(Oe=Oe[0],Ke=Ke[0],je!=0)return je;if(We=!!(2&Ke),!Ce&&Oe)return 3;if(Z!=null&&(Z[0]=!!(16&Ke)),ee!=null&&(ee[0]=We),ne!=null&&(ne[0]=0),ee=ce[0],Ke=be[0],Oe&&We&&re==null){je=0;break}if(4>R){je=7;break}if(Ce&&Oe||!Ce&&!Oe&&!n(w,k[0],"ALPH")){R=[R],Ae.na=[Ae.na],Ae.P=[Ae.P],Ae.Sa=[Ae.Sa];e:{vt=w,je=k,Ce=R;var bt=Ae.gb;tt=Ae.na,Je=Ae.P,Ct=Ae.Sa,$t=22,t(vt!=null),t(Ce!=null),Ge=je[0];var xn=Ce[0];for(t(tt!=null),t(Ct!=null),tt[0]=null,Je[0]=null,Ct[0]=0;;){if(je[0]=Ge,Ce[0]=xn,8>xn){je=7;break e}var Nn=Be(vt,Ge+4);if(4294967286<Nn){je=3;break e}var fn=8+Nn+1&-2;if($t+=fn,0<bt&&$t>bt){je=3;break e}if(!n(vt,Ge,"VP8 ")||!n(vt,Ge,"VP8L")){je=0;break e}if(xn[0]<fn){je=7;break e}n(vt,Ge,"ALPH")||(tt[0]=vt,Je[0]=Ge+8,Ct[0]=Nn),Ge+=fn,xn-=fn}}if(R=R[0],Ae.na=Ae.na[0],Ae.P=Ae.P[0],Ae.Sa=Ae.Sa[0],je!=0)break}R=[R],Ae.Ja=[Ae.Ja],Ae.xa=[Ae.xa];e:if(bt=w,je=k,Ce=R,tt=Ae.gb[0],Je=Ae.Ja,Ct=Ae.xa,vt=je[0],Ge=!n(bt,vt,"VP8 "),$t=!n(bt,vt,"VP8L"),t(bt!=null),t(Ce!=null),t(Je!=null),t(Ct!=null),8>Ce[0])je=7;else{if(Ge||$t){if(bt=Be(bt,vt+4),12<=tt&&bt>tt-12){je=3;break e}if(Fe&&bt>Ce[0]-8){je=7;break e}Je[0]=bt,je[0]+=8,Ce[0]-=8,Ct[0]=$t}else Ct[0]=5<=Ce[0]&&bt[vt+0]==47&&!(bt[vt+4]>>5),Je[0]=Ce[0];je=0}if(R=R[0],Ae.Ja=Ae.Ja[0],Ae.xa=Ae.xa[0],k=k[0],je!=0)break;if(4294967286<Ae.Ja)return 3;if(ne==null||We||(ne[0]=Ae.xa?2:1),ee=[ee],Ke=[Ke],Ae.xa){if(5>R){je=7;break}ne=ee,Fe=Ke,We=Z,w==null||5>R?w=0:5<=R&&w[k+0]==47&&!(w[k+4]>>5)?(Ce=[0],bt=[0],tt=[0],V(Je=new I,w,k,R),Rt(Je,Ce,bt,tt)?(ne!=null&&(ne[0]=Ce[0]),Fe!=null&&(Fe[0]=bt[0]),We!=null&&(We[0]=tt[0]),w=1):w=0):w=0}else{if(10>R){je=7;break}ne=Ke,w==null||10>R||!_t(w,k+3,R-3)?w=0:(Fe=w[k+0]|w[k+1]<<8|w[k+2]<<16,We=16383&(w[k+7]<<8|w[k+6]),w=16383&(w[k+9]<<8|w[k+8]),1&Fe||3<(Fe>>1&7)||!(Fe>>4&1)||Fe>>5>=Ae.Ja||!We||!w?w=0:(ee&&(ee[0]=We),ne&&(ne[0]=w),w=1))}if(!w||(ee=ee[0],Ke=Ke[0],Oe&&(ce[0]!=ee||be[0]!=Ke)))return 3;re!=null&&(re[0]=Ae,re.offset=k-re.w,t(4294967286>k-re.w),t(re.offset==re.ha-R));break}return je==0||je==7&&Oe&&re==null?(Z!=null&&(Z[0]|=Ae.na!=null&&0<Ae.na.length),H!=null&&(H[0]=ee),J!=null&&(J[0]=Ke),0):je}function kp(w,k,R){var H=k.width,J=k.height,Z=0,ee=0,ne=H,re=J;if(k.Da=w!=null&&0<w.Da,k.Da&&(ne=w.cd,re=w.bd,Z=w.v,ee=w.j,11>R||(Z&=-2,ee&=-2),0>Z||0>ee||0>=ne||0>=re||Z+ne>H||ee+re>J))return 0;if(k.v=Z,k.j=ee,k.va=Z+ne,k.o=ee+re,k.U=ne,k.T=re,k.da=w!=null&&0<w.da,k.da){if(!wt(ne,re,R=[w.ib],Z=[w.hb]))return 0;k.ib=R[0],k.hb=Z[0]}return k.ob=w!=null&&w.ob,k.Kb=w==null||!w.Sd,k.da&&(k.ob=k.ib<3*H/4&&k.hb<3*J/4,k.Kb=0),1}function Ep(w){if(w==null)return 2;if(11>w.S){var k=w.f.RGBA;k.fb+=(w.height-1)*k.A,k.A=-k.A}else k=w.f.kb,w=w.height,k.O+=(w-1)*k.fa,k.fa=-k.fa,k.N+=(w-1>>1)*k.Ab,k.Ab=-k.Ab,k.W+=(w-1>>1)*k.Db,k.Db=-k.Db,k.F!=null&&(k.J+=(w-1)*k.lb,k.lb=-k.lb);return 0}function xh(w,k,R,H){if(H==null||0>=w||0>=k)return 2;if(R!=null){if(R.Da){var J=R.cd,Z=R.bd,ee=-2&R.v,ne=-2&R.j;if(0>ee||0>ne||0>=J||0>=Z||ee+J>w||ne+Z>k)return 2;w=J,k=Z}if(R.da){if(!wt(w,k,J=[R.ib],Z=[R.hb]))return 2;w=J[0],k=Z[0]}}H.width=w,H.height=k;e:{var re=H.width,ce=H.height;if(w=H.S,0>=re||0>=ce||!(w>=Lv&&13>w))w=2;else{if(0>=H.Rd&&H.sd==null){ee=Z=J=k=0;var be=(ne=re*DP[w])*ce;if(11>w||(Z=(ce+1)/2*(k=(re+1)/2),w==12&&(ee=(J=re)*ce)),(ce=i(be+2*Z+ee))==null){w=1;break e}H.sd=ce,11>w?((re=H.f.RGBA).eb=ce,re.fb=0,re.A=ne,re.size=be):((re=H.f.kb).y=ce,re.O=0,re.fa=ne,re.Fd=be,re.f=ce,re.N=0+be,re.Ab=k,re.Cd=Z,re.ea=ce,re.W=0+be+Z,re.Db=k,re.Ed=Z,w==12&&(re.F=ce,re.J=0+be+2*Z),re.Tc=ee,re.lb=J)}if(k=1,J=H.S,Z=H.width,ee=H.height,J>=Lv&&13>J)if(11>J)w=H.f.RGBA,k&=(ne=Math.abs(w.A))*(ee-1)+Z<=w.size,k&=ne>=Z*DP[J],k&=w.eb!=null;else{w=H.f.kb,ne=(Z+1)/2,be=(ee+1)/2,re=Math.abs(w.fa),ce=Math.abs(w.Ab);var Oe=Math.abs(w.Db),Fe=Math.abs(w.lb),Ae=Fe*(ee-1)+Z;k&=re*(ee-1)+Z<=w.Fd,k&=ce*(be-1)+ne<=w.Cd,k=(k&=Oe*(be-1)+ne<=w.Ed)&re>=Z&ce>=ne&Oe>=ne,k&=w.y!=null,k&=w.f!=null,k&=w.ea!=null,J==12&&(k&=Fe>=Z,k&=Ae<=w.Tc,k&=w.F!=null)}else k=0;w=k?0:2}}return w!=0||R!=null&&R.fd&&(w=Ep(H)),w}var Ns=64,yh=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],bh=24,wh=32,Tp=8,ka=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];we("Predictor0","PredictorAdd0"),N.Predictor0=function(){return 4278190080},N.Predictor1=function(w){return w},N.Predictor2=function(w,k,R){return k[R+0]},N.Predictor3=function(w,k,R){return k[R+1]},N.Predictor4=function(w,k,R){return k[R-1]},N.Predictor5=function(w,k,R){return De(De(w,k[R+1]),k[R+0])},N.Predictor6=function(w,k,R){return De(w,k[R-1])},N.Predictor7=function(w,k,R){return De(w,k[R+0])},N.Predictor8=function(w,k,R){return De(k[R-1],k[R+0])},N.Predictor9=function(w,k,R){return De(k[R+0],k[R+1])},N.Predictor10=function(w,k,R){return De(De(w,k[R-1]),De(k[R+0],k[R+1]))},N.Predictor11=function(w,k,R){var H=k[R+0];return 0>=Ee(H>>24&255,w>>24&255,(k=k[R-1])>>24&255)+Ee(H>>16&255,w>>16&255,k>>16&255)+Ee(H>>8&255,w>>8&255,k>>8&255)+Ee(255&H,255&w,255&k)?H:w},N.Predictor12=function(w,k,R){var H=k[R+0];return(Ie((w>>24&255)+(H>>24&255)-((k=k[R-1])>>24&255))<<24|Ie((w>>16&255)+(H>>16&255)-(k>>16&255))<<16|Ie((w>>8&255)+(H>>8&255)-(k>>8&255))<<8|Ie((255&w)+(255&H)-(255&k)))>>>0},N.Predictor13=function(w,k,R){var H=k[R-1];return(oe((w=De(w,k[R+0]))>>24&255,H>>24&255)<<24|oe(w>>16&255,H>>16&255)<<16|oe(w>>8&255,H>>8&255)<<8|oe(w>>0&255,H>>0&255))>>>0};var Fb=N.PredictorAdd0;N.PredictorAdd1=G,we("Predictor2","PredictorAdd2"),we("Predictor3","PredictorAdd3"),we("Predictor4","PredictorAdd4"),we("Predictor5","PredictorAdd5"),we("Predictor6","PredictorAdd6"),we("Predictor7","PredictorAdd7"),we("Predictor8","PredictorAdd8"),we("Predictor9","PredictorAdd9"),we("Predictor10","PredictorAdd10"),we("Predictor11","PredictorAdd11"),we("Predictor12","PredictorAdd12"),we("Predictor13","PredictorAdd13");var Ap=N.PredictorAdd2;pt("ColorIndexInverseTransform","MapARGB","32b",function(w){return w>>8&255},function(w){return w}),pt("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(w){return w},function(w){return w>>8&255});var Ev,pi=N.ColorIndexInverseTransform,jh=N.MapARGB,Tv=N.VP8LColorIndexInverseTransformAlpha,Av=N.MapAlpha,fc=N.VP8LPredictorsAdd=[];fc.length=16,(N.VP8LPredictors=[]).length=16,(N.VP8LPredictorsAdd_C=[]).length=16,(N.VP8LPredictors_C=[]).length=16;var Hd,Ea,ia,pc,vl,xl,Nh,yl,Rr,_p,oa,mi,Sh,_v,Mp,qd,Vd,mc,Ud,Ch,Yd,gc,Rp,gi,vi,Fn,$n,Lr,Zr=i(511),bl=i(2041),Lp=i(225),Ph=i(767),Mv=0,$b=bl,Rv=Lp,Xa=Ph,xi=Zr,Lv=0,Iv=1,mP=2,Ov=3,Fv=4,Bb=5,gP=6,zb=7,Wb=8,$v=9,Hb=10,n7=[2,3,7],r7=[3,3,11],vP=[280,256,256,256,40],s7=[0,1,1,1,0],a7=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],i7=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],o7=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],l7=8,qb=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Vb=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Ip=null,c7=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],d7=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],xP=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],u7=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],h7=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],f7=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],p7=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],vc=[],Ui=[],wl=[],m7=1,yP=2,xc=[],yi=[];He("UpsampleRgbLinePair",hn,3),He("UpsampleBgrLinePair",hr,3),He("UpsampleRgbaLinePair",Vi,4),He("UpsampleBgraLinePair",us,4),He("UpsampleArgbLinePair",Os,4),He("UpsampleRgba4444LinePair",Ur,2),He("UpsampleRgb565LinePair",Cr,2);var g7=N.UpsampleRgbLinePair,v7=N.UpsampleBgrLinePair,bP=N.UpsampleRgbaLinePair,wP=N.UpsampleBgraLinePair,jP=N.UpsampleArgbLinePair,NP=N.UpsampleRgba4444LinePair,x7=N.UpsampleRgb565LinePair,Bv=16,zv=1<<Bv-1,Op=-227,Ub=482,SP=6,y7=(256<<SP)-1,CP=0,b7=i(256),w7=i(256),j7=i(256),N7=i(256),S7=i(Ub-Op),C7=i(Ub-Op);So("YuvToRgbRow",hn,3),So("YuvToBgrRow",hr,3),So("YuvToRgbaRow",Vi,4),So("YuvToBgraRow",us,4),So("YuvToArgbRow",Os,4),So("YuvToRgba4444Row",Ur,2),So("YuvToRgb565Row",Cr,2);var PP=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Wv=[0,2,8],P7=[8,7,6,4,4,2,2,2,1,1,1,1],D7=1;this.WebPDecodeRGBA=function(w,k,R,H,J){var Z=Iv,ee=new mh,ne=new Bt;ee.ba=ne,ne.S=Z,ne.width=[ne.width],ne.height=[ne.height];var re=ne.width,ce=ne.height,be=new Hn;if(be==null||w==null)var Oe=2;else t(be!=null),Oe=vh(w,k,R,be.width,be.height,be.Pd,be.Qd,be.format,null);if(Oe!=0?re=0:(re!=null&&(re[0]=be.width[0]),ce!=null&&(ce[0]=be.height[0]),re=1),re){ne.width=ne.width[0],ne.height=ne.height[0],H!=null&&(H[0]=ne.width),J!=null&&(J[0]=ne.height);e:{if(H=new mt,(J=new jp).data=w,J.w=k,J.ha=R,J.kd=1,k=[0],t(J!=null),((w=vh(J.data,J.w,J.ha,null,null,null,k,null,J))==0||w==7)&&k[0]&&(w=4),(k=w)==0){if(t(ee!=null),H.data=J.data,H.w=J.w+J.offset,H.ha=J.ha-J.offset,H.put=sn,H.ac=dt,H.bc=Xr,H.ma=ee,J.xa){if((w=sa())==null){ee=1;break e}if(function(Fe,Ae){var Ke=[0],We=[0],je=[0];t:for(;;){if(Fe==null)return 0;if(Ae==null)return Fe.a=2,0;if(Fe.l=Ae,Fe.a=0,V(Fe.m,Ae.data,Ae.w,Ae.ha),!Rt(Fe.m,Ke,We,je)){Fe.a=3;break t}if(Fe.xb=yP,Ae.width=Ke[0],Ae.height=We[0],!Ga(Ke[0],We[0],1,Fe,null))break t;return 1}return t(Fe.a!=0),0}(w,H)){if(H=(k=xh(H.width,H.height,ee.Oa,ee.ba))==0){t:{H=w;n:for(;;){if(H==null){H=0;break t}if(t(H.s.yc!=null),t(H.s.Ya!=null),t(0<H.s.Wb),t((R=H.l)!=null),t((J=R.ma)!=null),H.xb!=0){if(H.ca=J.ba,H.tb=J.tb,t(H.ca!=null),!kp(J.Oa,R,Ov)){H.a=2;break n}if(!bo(H,R.width)||R.da)break n;if((R.da||At(H.ca.S))&&Re(),11>H.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),H.ca.f.kb.F!=null&&Re()),H.Pb&&0<H.s.ua&&H.s.vb.X==null&&!Ue(H.s.vb,H.s.Wa.Xa)){H.a=1;break n}H.xb=0}if(!Da(H,H.V,H.Ba,H.c,H.i,R.o,ol))break n;J.Dc=H.Ma,H=1;break t}t(H.a!=0),H=0}H=!H}H&&(k=w.a)}else k=w.a}else{if((w=new xt)==null){ee=1;break e}if(w.Fa=J.na,w.P=J.P,w.qc=J.Sa,Xt(w,H)){if((k=xh(H.width,H.height,ee.Oa,ee.ba))==0){if(w.Aa=0,R=ee.Oa,t((J=w)!=null),R!=null){if(0<(re=0>(re=R.Md)?0:100<re?255:255*re/100)){for(ce=be=0;4>ce;++ce)12>(Oe=J.pb[ce]).lc&&(Oe.ia=re*P7[0>Oe.lc?0:Oe.lc]>>3),be|=Oe.ia;be&&(alert("todo:VP8InitRandom"),J.ia=1)}J.Ga=R.Id,100<J.Ga?J.Ga=100:0>J.Ga&&(J.Ga=0)}aa(w,H)||(k=w.a)}}else k=w.a}k==0&&ee.Oa!=null&&ee.Oa.fd&&(k=Ep(ee.ba))}ee=k}Z=ee!=0?null:11>Z?ne.f.RGBA.eb:ne.f.kb.y}else Z=null;return Z};var DP=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function d(N,M){for(var L="",T=0;T<4;T++)L+=String.fromCharCode(N[M++]);return L}function u(N,M){return(N[M+0]<<0|N[M+1]<<8|N[M+2]<<16)>>>0}function h(N,M){return(N[M+0]<<0|N[M+1]<<8|N[M+2]<<16|N[M+3]<<24)>>>0}new c;var f=[0],p=[0],y=[],g=new c,x=e,m=function(N,M){var L={},T=0,E=!1,A=0,O=0;if(L.frames=[],!function(U,q,X,te){for(var ae=0;ae<te;ae++)if(U[q+ae]!=X.charCodeAt(ae))return!0;return!1}(N,M,"RIFF",4)){var W,z;for(h(N,M+=4),M+=8;M<N.length;){var F=d(N,M),V=h(N,M+=4);M+=4;var B=V+(1&V);switch(F){case"VP8 ":case"VP8L":L.frames[T]===void 0&&(L.frames[T]={}),(I=L.frames[T]).src_off=E?O:M-8,I.src_size=A+V+8,T++,E&&(E=!1,A=0,O=0);break;case"VP8X":(I=L.header={}).feature_flags=N[M];var Y=M+4;I.canvas_width=1+u(N,Y),Y+=3,I.canvas_height=1+u(N,Y),Y+=3;break;case"ALPH":E=!0,A=B+8,O=M-8;break;case"ANIM":(I=L.header).bgcolor=h(N,M),Y=M+4,I.loop_count=(W=N)[(z=Y)+0]<<0|W[z+1]<<8,Y+=2;break;case"ANMF":var $,I;(I=L.frames[T]={}).offset_x=2*u(N,M),M+=3,I.offset_y=2*u(N,M),M+=3,I.width=1+u(N,M),M+=3,I.height=1+u(N,M),M+=3,I.duration=u(N,M),M+=3,$=N[M++],I.dispose=1&$,I.blend=$>>1&1}F!="ANMF"&&(M+=B)}return L}}(x,0);m.response=x,m.rgbaoutput=!0,m.dataurl=!1;var v=m.header?m.header:null,b=m.frames?m.frames:null;if(v){v.loop_counter=v.loop_count,f=[v.canvas_height],p=[v.canvas_width];for(var C=0;C<b.length&&b[C].blend!=0;C++);}var S=b[0],P=g.WebPDecodeRGBA(x,S.src_off,S.src_size,p,f);S.rgba=P,S.imgwidth=p[0],S.imgheight=f[0];for(var D=0;D<p[0]*f[0]*4;D++)y[D]=P[D];return this.width=p,this.height=f,this.data=y,this}(function(e){var t=function(){return typeof SN=="function"},n=function(f,p,y,g){var x=4,m=o;switch(g){case e.image_compression.FAST:x=1,m=i;break;case e.image_compression.MEDIUM:x=6,m=l;break;case e.image_compression.SLOW:x=9,m=c}f=r(f,p,y,m);var v=SN(f,{level:x});return e.__addimage__.arrayBufferToBinaryString(v)},r=function(f,p,y,g){for(var x,m,v,b=f.length/p,C=new Uint8Array(f.length+b),S=u(),P=0;P<b;P+=1){if(v=P*p,x=f.subarray(v,v+p),g)C.set(g(x,y,m),v+P);else{for(var D,N=S.length,M=[];D<N;D+=1)M[D]=S[D](x,y,m);var L=h(M.concat());C.set(M[L],v+P)}m=x}return C},a=function(f){var p=Array.apply([],f);return p.unshift(0),p},i=function(f,p){var y,g=[],x=f.length;g[0]=1;for(var m=0;m<x;m+=1)y=f[m-p]||0,g[m+1]=f[m]-y+256&255;return g},o=function(f,p,y){var g,x=[],m=f.length;x[0]=2;for(var v=0;v<m;v+=1)g=y&&y[v]||0,x[v+1]=f[v]-g+256&255;return x},l=function(f,p,y){var g,x,m=[],v=f.length;m[0]=3;for(var b=0;b<v;b+=1)g=f[b-p]||0,x=y&&y[b]||0,m[b+1]=f[b]+256-(g+x>>>1)&255;return m},c=function(f,p,y){var g,x,m,v,b=[],C=f.length;b[0]=4;for(var S=0;S<C;S+=1)g=f[S-p]||0,x=y&&y[S]||0,m=y&&y[S-p]||0,v=d(g,x,m),b[S+1]=f[S]-v+256&255;return b},d=function(f,p,y){if(f===p&&p===y)return f;var g=Math.abs(p-y),x=Math.abs(f-y),m=Math.abs(f+p-y-y);return g<=x&&g<=m?f:x<=m?p:y},u=function(){return[a,i,o,l,c]},h=function(f){var p=f.map(function(y){return y.reduce(function(g,x){return g+Math.abs(x)},0)});return p.indexOf(Math.min.apply(null,p))};e.processPNG=function(f,p,y,g){var x,m,v,b,C,S,P,D,N,M,L,T,E,A,O,W=this.decode.FLATE_DECODE,z="";if(this.__addimage__.isArrayBuffer(f)&&(f=new Uint8Array(f)),this.__addimage__.isArrayBufferView(f)){if(f=(v=new ane(f)).imgData,m=v.bits,x=v.colorSpace,C=v.colors,[4,6].indexOf(v.colorType)!==-1){if(v.bits===8){N=(D=v.pixelBitlength==32?new Uint32Array(v.decodePixels().buffer):v.pixelBitlength==16?new Uint16Array(v.decodePixels().buffer):new Uint8Array(v.decodePixels().buffer)).length,L=new Uint8Array(N*v.colors),M=new Uint8Array(N);var F,V=v.pixelBitlength-v.bits;for(A=0,O=0;A<N;A++){for(E=D[A],F=0;F<V;)L[O++]=E>>>F&255,F+=v.bits;M[A]=E>>>F&255}}if(v.bits===16){N=(D=new Uint32Array(v.decodePixels().buffer)).length,L=new Uint8Array(N*(32/v.pixelBitlength)*v.colors),M=new Uint8Array(N*(32/v.pixelBitlength)),T=v.colors>1,A=0,O=0;for(var B=0;A<N;)E=D[A++],L[O++]=E>>>0&255,T&&(L[O++]=E>>>16&255,E=D[A++],L[O++]=E>>>0&255),M[B++]=E>>>16&255;m=8}g!==e.image_compression.NONE&&t()?(f=n(L,v.width*v.colors,v.colors,g),P=n(M,v.width,1,g)):(f=L,P=M,W=void 0)}if(v.colorType===3&&(x=this.color_spaces.INDEXED,S=v.palette,v.transparency.indexed)){var Y=v.transparency.indexed,$=0;for(A=0,N=Y.length;A<N;++A)$+=Y[A];if(($/=255)===N-1&&Y.indexOf(0)!==-1)b=[Y.indexOf(0)];else if($!==N){for(D=v.decodePixels(),M=new Uint8Array(D.length),A=0,N=D.length;A<N;A++)M[A]=Y[D[A]];P=n(M,v.width,1)}}var I=function(U){var q;switch(U){case e.image_compression.FAST:q=11;break;case e.image_compression.MEDIUM:q=13;break;case e.image_compression.SLOW:q=14;break;default:q=12}return q}(g);return W===this.decode.FLATE_DECODE&&(z="/Predictor "+I+" "),z+="/Colors "+C+" /BitsPerComponent "+m+" /Columns "+v.width,(this.__addimage__.isArrayBuffer(f)||this.__addimage__.isArrayBufferView(f))&&(f=this.__addimage__.arrayBufferToBinaryString(f)),(P&&this.__addimage__.isArrayBuffer(P)||this.__addimage__.isArrayBufferView(P))&&(P=this.__addimage__.arrayBufferToBinaryString(P)),{alias:y,data:f,index:p,filter:W,decodeParameters:z,transparency:b,palette:S,sMask:P,predictor:I,width:v.width,height:v.height,bitsPerComponent:m,colorSpace:x}}}})(Ot.API),function(e){e.processGIF89A=function(t,n,r,a){var i=new ine(t),o=i.width,l=i.height,c=[];i.decodeAndBlitFrameRGBA(0,c);var d={data:c,width:o,height:l},u=new p2(100).encode(d,100);return e.processJPEG.call(this,u,n,r,a)},e.processGIF87A=e.processGIF89A}(Ot.API),Xi.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var n=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:a,green:r,blue:n,quad:i}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Xi.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[e]()}catch(n){Ln.log("bit decode error:"+n)}},Xi.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),n=t%4;for(e=this.height-1;e>=0;e--){for(var r=this.bottom_up?e:this.height-1-e,a=0;a<t;a++)for(var i=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+8*a*4,l=0;l<8&&8*a+l<this.width;l++){var c=this.palette[i>>7-l&1];this.data[o+4*l]=c.blue,this.data[o+4*l+1]=c.green,this.data[o+4*l+2]=c.red,this.data[o+4*l+3]=255}n!==0&&(this.pos+=4-n)}},Xi.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,a=0;a<e;a++){var i=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+2*a*4,l=i>>4,c=15&i,d=this.palette[l];if(this.data[o]=d.blue,this.data[o+1]=d.green,this.data[o+2]=d.red,this.data[o+3]=255,2*a+1>=this.width)break;d=this.palette[c],this.data[o+4]=d.blue,this.data[o+4+1]=d.green,this.data[o+4+2]=d.red,this.data[o+4+3]=255}t!==0&&(this.pos+=4-t)}},Xi.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var a=this.datav.getUint8(this.pos++,!0),i=n*this.width*4+4*r;if(a<this.palette.length){var o=this.palette[a];this.data[i]=o.red,this.data[i+1]=o.green,this.data[i+2]=o.blue,this.data[i+3]=255}else this.data[i]=255,this.data[i+1]=255,this.data[i+2]=255,this.data[i+3]=255}e!==0&&(this.pos+=4-e)}},Xi.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,a=0;a<this.width;a++){var i=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(i&t)/t*255|0,l=(i>>5&t)/t*255|0,c=(i>>10&t)/t*255|0,d=i>>15?255:0,u=r*this.width*4+4*a;this.data[u]=c,this.data[u+1]=l,this.data[u+2]=o,this.data[u+3]=d}this.pos+=e}},Xi.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),n=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var a=this.bottom_up?r:this.height-1-r,i=0;i<this.width;i++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var l=(o&t)/t*255|0,c=(o>>5&n)/n*255|0,d=(o>>11)/t*255|0,u=a*this.width*4+4*i;this.data[u]=d,this.data[u+1]=c,this.data[u+2]=l,this.data[u+3]=255}this.pos+=e}},Xi.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*n;this.data[o]=i,this.data[o+1]=a,this.data[o+2]=r,this.data[o+3]=255}this.pos+=this.width%4}},Xi.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),l=t*this.width*4+4*n;this.data[l]=i,this.data[l+1]=a,this.data[l+2]=r,this.data[l+3]=o}},Xi.prototype.getData=function(){return this.data},function(e){e.processBMP=function(t,n,r,a){var i=new Xi(t,!1),o=i.width,l=i.height,c={data:i.getData(),width:o,height:l},d=new p2(100).encode(c,100);return e.processJPEG.call(this,d,n,r,a)}}(Ot.API),_E.prototype.getData=function(){return this.data},function(e){e.processWEBP=function(t,n,r,a){var i=new _E(t),o=i.width,l=i.height,c={data:i.getData(),width:o,height:l},d=new p2(100).encode(c,100);return e.processJPEG.call(this,d,n,r,a)}}(Ot.API),Ot.API.processRGBA=function(e,t,n){for(var r=e.data,a=r.length,i=new Uint8Array(a/4*3),o=new Uint8Array(a/4),l=0,c=0,d=0;d<a;d+=4){var u=r[d],h=r[d+1],f=r[d+2],p=r[d+3];i[l++]=u,i[l++]=h,i[l++]=f,o[c++]=p}var y=this.__addimage__.arrayBufferToBinaryString(i);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:y,index:t,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},Ot.API.setLanguage=function(e){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]!==void 0&&(this.internal.languageSettings.languageCode=e,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},$h=Ot.API,Fx=$h.getCharWidthsArray=function(e,t){var n,r,a=(t=t||{}).font||this.internal.getFont(),i=t.fontSize||this.internal.getFontSize(),o=t.charSpace||this.internal.getCharSpace(),l=t.widths?t.widths:a.metadata.Unicode.widths,c=l.fof?l.fof:1,d=t.kerning?t.kerning:a.metadata.Unicode.kerning,u=d.fof?d.fof:1,h=t.doKerning!==!1,f=0,p=e.length,y=0,g=l[0]||c,x=[];for(n=0;n<p;n++)r=e.charCodeAt(n),typeof a.metadata.widthOfString=="function"?x.push((a.metadata.widthOfGlyph(a.metadata.characterToGlyph(r))+o*(1e3/i)||0)/1e3):(f=h&&on(d[r])==="object"&&!isNaN(parseInt(d[r][y],10))?d[r][y]/u:0,x.push((l[r]||g)/c+f)),y=r;return x},kE=$h.getStringUnitWidth=function(e,t){var n=(t=t||{}).fontSize||this.internal.getFontSize(),r=t.font||this.internal.getFont(),a=t.charSpace||this.internal.getCharSpace();return $h.processArabic&&(e=$h.processArabic(e)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(e,n,a)/n:Fx.apply(this,arguments).reduce(function(i,o){return i+o},0)},EE=function(e,t,n,r){for(var a=[],i=0,o=e.length,l=0;i!==o&&l+t[i]<n;)l+=t[i],i++;a.push(e.slice(0,i));var c=i;for(l=0;i!==o;)l+t[i]>r&&(a.push(e.slice(c,i)),l=0,c=i),l+=t[i],i++;return c!==i&&a.push(e.slice(c,i)),a},TE=function(e,t,n){n||(n={});var r,a,i,o,l,c,d,u=[],h=[u],f=n.textIndent||0,p=0,y=0,g=e.split(" "),x=Fx.apply(this,[" ",n])[0];if(c=n.lineIndent===-1?g[0].length+2:n.lineIndent||0){var m=Array(c).join(" "),v=[];g.map(function(C){(C=C.split(/\s*\n/)).length>1?v=v.concat(C.map(function(S,P){return(P&&S.length?`
`:"")+S})):v.push(C[0])}),g=v,c=kE.apply(this,[m,n])}for(i=0,o=g.length;i<o;i++){var b=0;if(r=g[i],c&&r[0]==`
`&&(r=r.substr(1),b=1),f+p+(y=(a=Fx.apply(this,[r,n])).reduce(function(C,S){return C+S},0))>t||b){if(y>t){for(l=EE.apply(this,[r,a,t-(f+p),t]),u.push(l.shift()),u=[l.pop()];l.length;)h.push([l.shift()]);y=a.slice(r.length-(u[0]?u[0].length:0)).reduce(function(C,S){return C+S},0)}else u=[r];h.push(u),f=y+c,p=x}else u.push(r),f+=p+y,p=x}return d=c?function(C,S){return(S?m:"")+C.join(" ")}:function(C){return C.join(" ")},h.map(d)},$h.splitTextToSize=function(e,t,n){var r,a=(n=n||{}).fontSize||this.internal.getFontSize(),i=(function(u){if(u.widths&&u.kerning)return{widths:u.widths,kerning:u.kerning};var h=this.internal.getFont(u.fontName,u.fontStyle);return h.metadata.Unicode?{widths:h.metadata.Unicode.widths||{0:1},kerning:h.metadata.Unicode.kerning||{}}:{font:h.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,n);r=Array.isArray(e)?e:String(e).split(/\r?\n/);var o=1*this.internal.scaleFactor*t/a;i.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/a:0,i.lineIndent=n.lineIndent;var l,c,d=[];for(l=0,c=r.length;l<c;l++)d=d.concat(TE.apply(this,[r[l],o,i]));return d},function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="klmnopqrstuvwxyz",n={},r={},a=0;a<t.length;a++)n[t[a]]="0123456789abcdef"[a],r["0123456789abcdef"[a]]=t[a];var i=function(h){return"0x"+parseInt(h,10).toString(16)},o=e.__fontmetrics__.compress=function(h){var f,p,y,g,x=["{"];for(var m in h){if(f=h[m],isNaN(parseInt(m,10))?p="'"+m+"'":(m=parseInt(m,10),p=(p=i(m).slice(2)).slice(0,-1)+r[p.slice(-1)]),typeof f=="number")f<0?(y=i(f).slice(3),g="-"):(y=i(f).slice(2),g=""),y=g+y.slice(0,-1)+r[y.slice(-1)];else{if(on(f)!=="object")throw new Error("Don't know what to do with value type "+on(f)+".");y=o(f)}x.push(p+y)}return x.push("}"),x.join("")},l=e.__fontmetrics__.uncompress=function(h){if(typeof h!="string")throw new Error("Invalid argument passed to uncompress.");for(var f,p,y,g,x={},m=1,v=x,b=[],C="",S="",P=h.length-1,D=1;D<P;D+=1)(g=h[D])=="'"?f?(y=f.join(""),f=void 0):f=[]:f?f.push(g):g=="{"?(b.push([v,y]),v={},y=void 0):g=="}"?((p=b.pop())[0][p[1]]=v,y=void 0,v=p[0]):g=="-"?m=-1:y===void 0?n.hasOwnProperty(g)?(C+=n[g],y=parseInt(C,16)*m,m=1,C=""):C+=g:n.hasOwnProperty(g)?(S+=n[g],v[y]=parseInt(S,16)*m,m=1,y=void 0,S=""):S+=g;return x},c={codePages:["WinAnsiEncoding"],WinAnsiEncoding:l("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},d={Unicode:{Courier:c,"Courier-Bold":c,"Courier-BoldOblique":c,"Courier-Oblique":c,Helvetica:c,"Helvetica-Bold":c,"Helvetica-BoldOblique":c,"Helvetica-Oblique":c,"Times-Roman":c,"Times-Bold":c,"Times-BoldItalic":c,"Times-Italic":c}},u={Unicode:{"Courier-Oblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":l("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":l("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:l("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:l("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":l("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":l("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(h){var f=h.font,p=u.Unicode[f.postScriptName];p&&(f.metadata.Unicode={},f.metadata.Unicode.widths=p.widths,f.metadata.Unicode.kerning=p.kerning);var y=d.Unicode[f.postScriptName];y&&(f.metadata.Unicode.encoding=y,f.encoding=y.codePages[0])}])}(Ot.API),function(e){var t=function(n){for(var r=n.length,a=new Uint8Array(r),i=0;i<r;i++)a[i]=n.charCodeAt(i);return a};e.API.events.push(["addFont",function(n){var r=void 0,a=n.font,i=n.instance;if(!a.isStandardFont){if(i===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");if(typeof(r=i.existsFileInVFS(a.postScriptName)===!1?i.loadFile(a.postScriptName):i.getFileFromVFS(a.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");(function(o,l){l=/^\x00\x01\x00\x00/.test(l)?t(l):t(Fm(l)),o.metadata=e.API.TTFFont.open(l),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(a,r)}}])}(Ot),function(e){function t(){return(Wt.canvg?Promise.resolve(Wt.canvg):yN(()=>import("./index.es-3277c502.js"),[])).catch(function(n){return Promise.reject(new Error("Could not load canvg: "+n))}).then(function(n){return n.default?n.default:n})}Ot.API.addSvgAsImage=function(n,r,a,i,o,l,c,d){if(isNaN(r)||isNaN(a))throw Ln.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(i)||isNaN(o))throw Ln.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var u=document.createElement("canvas");u.width=i,u.height=o;var h=u.getContext("2d");h.fillStyle="#fff",h.fillRect(0,0,u.width,u.height);var f={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},p=this;return t().then(function(y){return y.fromString(h,n,f)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(y){return y.render(f)}).then(function(){p.addImage(u.toDataURL("image/jpeg",1),r,a,i,o,c,d)})}}(),Ot.API.putTotalPages=function(e){var t,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),n=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var a=0;a<this.internal.pages[r].length;a++)this.internal.pages[r][a]=this.internal.pages[r][a].replace(t,n);return this},Ot.API.viewerPreferences=function(e,t){var n;e=e||{},t=t||!1;var r,a,i,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},l=Object.keys(o),c=[],d=0,u=0,h=0;function f(y,g){var x,m=!1;for(x=0;x<y.length;x+=1)y[x]===g&&(m=!0);return m}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,e==="reset"||t===!0){var p=l.length;for(h=0;h<p;h+=1)n[l[h]].value=n[l[h]].defaultValue,n[l[h]].explicitSet=!1}if(on(e)==="object"){for(a in e)if(i=e[a],f(l,a)&&i!==void 0){if(n[a].type==="boolean"&&typeof i=="boolean")n[a].value=i;else if(n[a].type==="name"&&f(n[a].valueSet,i))n[a].value=i;else if(n[a].type==="integer"&&Number.isInteger(i))n[a].value=i;else if(n[a].type==="array"){for(d=0;d<i.length;d+=1)if(r=!0,i[d].length===1&&typeof i[d][0]=="number")c.push(String(i[d]-1));else if(i[d].length>1){for(u=0;u<i[d].length;u+=1)typeof i[d][u]!="number"&&(r=!1);r===!0&&c.push([i[d][0]-1,i[d][1]-1].join(" "))}n[a].value="["+c.join(" ")+"]"}else n[a].value=n[a].defaultValue;n[a].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var y,g=[];for(y in n)n[y].explicitSet===!0&&(n[y].type==="name"?g.push("/"+y+" /"+n[y].value):g.push("/"+y+" "+n[y].value));g.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+g.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},function(e){var t=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',a=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),i=unescape(encodeURIComponent(r)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),l=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),c=unescape(encodeURIComponent("</x:xmpmeta>")),d=i.length+o.length+l.length+a.length+c.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+d+" >>"),this.internal.write("stream"),this.internal.write(a+i+o+l+c),this.internal.write("endstream"),this.internal.write("endobj")},n=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(r,a){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:a||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",n),this.internal.events.subscribe("postPutResources",t)),this}}(Ot.API),function(e){var t=e.API,n=t.pdfEscape16=function(i,o){for(var l,c=o.metadata.Unicode.widths,d=["","0","00","000","0000"],u=[""],h=0,f=i.length;h<f;++h){if(l=o.metadata.characterToGlyph(i.charCodeAt(h)),o.metadata.glyIdsUsed.push(l),o.metadata.toUnicode[l]=i.charCodeAt(h),c.indexOf(l)==-1&&(c.push(l),c.push([parseInt(o.metadata.widthOfGlyph(l),10)])),l=="0")return u.join("");l=l.toString(16),u.push(d[4-l.length],l)}return u.join("")},r=function(i){var o,l,c,d,u,h,f;for(u=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,c=[],h=0,f=(l=Object.keys(i).sort(function(p,y){return p-y})).length;h<f;h++)o=l[h],c.length>=100&&(u+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar`,c=[]),i[o]!==void 0&&i[o]!==null&&typeof i[o].toString=="function"&&(d=("0000"+i[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),c.push("<"+o+"><"+d+">"));return c.length&&(u+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar
`),u+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(i){(function(o){var l=o.font,c=o.out,d=o.newObject,u=o.putStream;if(l.metadata instanceof e.API.TTFFont&&l.encoding==="Identity-H"){for(var h=l.metadata.Unicode.widths,f=l.metadata.subset.encode(l.metadata.glyIdsUsed,1),p="",y=0;y<f.length;y++)p+=String.fromCharCode(f[y]);var g=d();u({data:p,addLength1:!0,objectId:g}),c("endobj");var x=d();u({data:r(l.metadata.toUnicode),addLength1:!0,objectId:x}),c("endobj");var m=d();c("<<"),c("/Type /FontDescriptor"),c("/FontName /"+Vh(l.fontName)),c("/FontFile2 "+g+" 0 R"),c("/FontBBox "+e.API.PDFObject.convert(l.metadata.bbox)),c("/Flags "+l.metadata.flags),c("/StemV "+l.metadata.stemV),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c(">>"),c("endobj");var v=d();c("<<"),c("/Type /Font"),c("/BaseFont /"+Vh(l.fontName)),c("/FontDescriptor "+m+" 0 R"),c("/W "+e.API.PDFObject.convert(h)),c("/CIDToGIDMap /Identity"),c("/DW 1000"),c("/Subtype /CIDFontType2"),c("/CIDSystemInfo"),c("<<"),c("/Supplement 0"),c("/Registry (Adobe)"),c("/Ordering ("+l.encoding+")"),c(">>"),c(">>"),c("endobj"),l.objectNumber=d(),c("<<"),c("/Type /Font"),c("/Subtype /Type0"),c("/ToUnicode "+x+" 0 R"),c("/BaseFont /"+Vh(l.fontName)),c("/Encoding /"+l.encoding),c("/DescendantFonts ["+v+" 0 R]"),c(">>"),c("endobj"),l.isAlreadyPutted=!0}})(i)}]),t.events.push(["putFont",function(i){(function(o){var l=o.font,c=o.out,d=o.newObject,u=o.putStream;if(l.metadata instanceof e.API.TTFFont&&l.encoding==="WinAnsiEncoding"){for(var h=l.metadata.rawData,f="",p=0;p<h.length;p++)f+=String.fromCharCode(h[p]);var y=d();u({data:f,addLength1:!0,objectId:y}),c("endobj");var g=d();u({data:r(l.metadata.toUnicode),addLength1:!0,objectId:g}),c("endobj");var x=d();c("<<"),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c("/StemV "+l.metadata.stemV),c("/Type /FontDescriptor"),c("/FontFile2 "+y+" 0 R"),c("/Flags 96"),c("/FontBBox "+e.API.PDFObject.convert(l.metadata.bbox)),c("/FontName /"+Vh(l.fontName)),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c(">>"),c("endobj"),l.objectNumber=d();for(var m=0;m<l.metadata.hmtx.widths.length;m++)l.metadata.hmtx.widths[m]=parseInt(l.metadata.hmtx.widths[m]*(1e3/l.metadata.head.unitsPerEm));c("<</Subtype/TrueType/Type/Font/ToUnicode "+g+" 0 R/BaseFont/"+Vh(l.fontName)+"/FontDescriptor "+x+" 0 R/Encoding/"+l.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(l.metadata.hmtx.widths)+">>"),c("endobj"),l.isAlreadyPutted=!0}})(i)}]);var a=function(i){var o,l=i.text||"",c=i.x,d=i.y,u=i.options||{},h=i.mutex||{},f=h.pdfEscape,p=h.activeFontKey,y=h.fonts,g=p,x="",m=0,v="",b=y[g].encoding;if(y[g].encoding!=="Identity-H")return{text:l,x:c,y:d,options:u,mutex:h};for(v=l,g=p,Array.isArray(l)&&(v=l[0]),m=0;m<v.length;m+=1)y[g].metadata.hasOwnProperty("cmap")&&(o=y[g].metadata.cmap.unicode.codeMap[v[m].charCodeAt(0)]),o||v[m].charCodeAt(0)<256&&y[g].metadata.hasOwnProperty("Unicode")?x+=v[m]:x+="";var C="";return parseInt(g.slice(1))<14||b==="WinAnsiEncoding"?C=f(x,g).split("").map(function(S){return S.charCodeAt(0).toString(16)}).join(""):b==="Identity-H"&&(C=n(x,y[g])),h.isHex=!0,{text:C,x:c,y:d,options:u,mutex:h}};t.events.push(["postProcessText",function(i){var o=i.text||"",l=[],c={text:o,x:i.x,y:i.y,options:i.options,mutex:i.mutex};if(Array.isArray(o)){var d=0;for(d=0;d<o.length;d+=1)Array.isArray(o[d])&&o[d].length===3?l.push([a(Object.assign({},c,{text:o[d][0]})).text,o[d][1],o[d][2]]):l.push(a(Object.assign({},c,{text:o[d]})).text);i.text=l}else i.text=a(Object.assign({},c,{text:o})).text}])}(Ot),function(e){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(n){return t.call(this),this.internal.vFS[n]!==void 0},e.addFileToVFS=function(n,r){return t.call(this),this.internal.vFS[n]=r,this},e.getFileFromVFS=function(n){return t.call(this),this.internal.vFS[n]!==void 0?this.internal.vFS[n]:null}}(Ot.API),function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(r){var a,i,o,l,c,d,u,h=t,f=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],p=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],y={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},g={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},x=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],m=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),v=!1,b=0;this.__bidiEngine__={};var C=function(T){var E=T.charCodeAt(),A=E>>8,O=g[A];return O!==void 0?h[256*O+(255&E)]:A===252||A===253?"AL":m.test(A)?"L":A===8?"R":"N"},S=function(T){for(var E,A=0;A<T.length;A++){if((E=C(T.charAt(A)))==="L")return!1;if(E==="R")return!0}return!1},P=function(T,E,A,O){var W,z,F,V,B=E[O];switch(B){case"L":case"R":v=!1;break;case"N":case"AN":break;case"EN":v&&(B="AN");break;case"AL":v=!0,B="R";break;case"WS":B="N";break;case"CS":O<1||O+1>=E.length||(W=A[O-1])!=="EN"&&W!=="AN"||(z=E[O+1])!=="EN"&&z!=="AN"?B="N":v&&(z="AN"),B=z===W?z:"N";break;case"ES":B=(W=O>0?A[O-1]:"B")==="EN"&&O+1<E.length&&E[O+1]==="EN"?"EN":"N";break;case"ET":if(O>0&&A[O-1]==="EN"){B="EN";break}if(v){B="N";break}for(F=O+1,V=E.length;F<V&&E[F]==="ET";)F++;B=F<V&&E[F]==="EN"?"EN":"N";break;case"NSM":if(o&&!l){for(V=E.length,F=O+1;F<V&&E[F]==="NSM";)F++;if(F<V){var Y=T[O],$=Y>=1425&&Y<=2303||Y===64286;if(W=E[F],$&&(W==="R"||W==="AL")){B="R";break}}}B=O<1||(W=E[O-1])==="B"?"N":A[O-1];break;case"B":v=!1,a=!0,B=b;break;case"S":i=!0,B="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":v=!1;break;case"BN":B="N"}return B},D=function(T,E,A){var O=T.split("");return A&&N(O,A,{hiLevel:b}),O.reverse(),E&&E.reverse(),O.join("")},N=function(T,E,A){var O,W,z,F,V,B=-1,Y=T.length,$=0,I=[],U=b?p:f,q=[];for(v=!1,a=!1,i=!1,W=0;W<Y;W++)q[W]=C(T[W]);for(z=0;z<Y;z++){if(V=$,I[z]=P(T,q,I,z),O=240&($=U[V][y[I[z]]]),$&=15,E[z]=F=U[$][5],O>0)if(O===16){for(W=B;W<z;W++)E[W]=1;B=-1}else B=-1;if(U[$][6])B===-1&&(B=z);else if(B>-1){for(W=B;W<z;W++)E[W]=F;B=-1}q[z]==="B"&&(E[z]=0),A.hiLevel|=F}i&&function(X,te,ae){for(var le=0;le<ae;le++)if(X[le]==="S"){te[le]=b;for(var me=le-1;me>=0&&X[me]==="WS";me--)te[me]=b}}(q,E,Y)},M=function(T,E,A,O,W){if(!(W.hiLevel<T)){if(T===1&&b===1&&!a)return E.reverse(),void(A&&A.reverse());for(var z,F,V,B,Y=E.length,$=0;$<Y;){if(O[$]>=T){for(V=$+1;V<Y&&O[V]>=T;)V++;for(B=$,F=V-1;B<F;B++,F--)z=E[B],E[B]=E[F],E[F]=z,A&&(z=A[B],A[B]=A[F],A[F]=z);$=V}$++}}},L=function(T,E,A){var O=T.split(""),W={hiLevel:b};return A||(A=[]),N(O,A,W),function(z,F,V){if(V.hiLevel!==0&&u)for(var B,Y=0;Y<z.length;Y++)F[Y]===1&&(B=x.indexOf(z[Y]))>=0&&(z[Y]=x[B+1])}(O,A,W),M(2,O,E,A,W),M(1,O,E,A,W),O.join("")};return this.__bidiEngine__.doBidiReorder=function(T,E,A){if(function(W,z){if(z)for(var F=0;F<W.length;F++)z[F]=F;l===void 0&&(l=S(W)),d===void 0&&(d=S(W))}(T,E),o||!c||d)if(o&&c&&l^d)b=l?1:0,T=D(T,E,A);else if(!o&&c&&d)b=l?1:0,T=L(T,E,A),T=D(T,E);else if(!o||l||c||d){if(o&&!c&&l^d)T=D(T,E),l?(b=0,T=L(T,E,A)):(b=1,T=L(T,E,A),T=D(T,E));else if(o&&l&&!c&&d)b=1,T=L(T,E,A),T=D(T,E);else if(!o&&!c&&l^d){var O=u;l?(b=1,T=L(T,E,A),b=0,u=!1,T=L(T,E,A),u=O):(b=0,T=L(T,E,A),T=D(T,E),b=1,u=!1,T=L(T,E,A),u=O,T=D(T,E))}}else b=0,T=L(T,E,A);else b=l?1:0,T=L(T,E,A);return T},this.__bidiEngine__.setOptions=function(T){T&&(o=T.isInputVisual,c=T.isOutputVisual,l=T.isInputRtl,d=T.isOutputRtl,u=T.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(r){var a=r.text,i=(r.x,r.y,r.options||{}),o=(r.mutex,i.lang,[]);if(i.isInputVisual=typeof i.isInputVisual!="boolean"||i.isInputVisual,n.setOptions(i),Object.prototype.toString.call(a)==="[object Array]"){var l=0;for(o=[],l=0;l<a.length;l+=1)Object.prototype.toString.call(a[l])==="[object Array]"?o.push([n.doBidiReorder(a[l][0]),a[l][1],a[l][2]]):o.push([n.doBidiReorder(a[l])]);r.text=o}else r.text=n.doBidiReorder(a);n.setOptions({isInputVisual:!0})}])}(Ot),Ot.API.TTFFont=function(){function e(t){var n;if(this.rawData=t,n=this.contents=new gd(t),this.contents.pos=4,n.readString(4)==="ttcf")throw new Error("TTCF not supported.");n.pos=0,this.parse(),this.subset=new wne(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new one(this.contents),this.head=new cne(this),this.name=new pne(this),this.cmap=new RO(this),this.toUnicode={},this.hhea=new dne(this),this.maxp=new mne(this),this.hmtx=new gne(this),this.post=new hne(this),this.os2=new une(this),this.loca=new bne(this),this.glyf=new vne(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var t,n,r,a,i;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var o,l,c,d;for(d=[],o=0,l=(c=this.bbox).length;o<l;o++)t=c[o],d.push(Math.round(t*this.scaleFactor));return d}).call(this),this.stemV=0,this.post.exists?(r=255&(a=this.post.italic_angle),32768&(n=a>>16)&&(n=-(1+(65535^n))),this.italicAngle=+(n+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(i=this.familyClass)===1||i===2||i===3||i===4||i===5||i===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(t){var n;return((n=this.cmap.unicode)!=null?n.codeMap[t]:void 0)||0},e.prototype.widthOfGlyph=function(t){var n;return n=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*n},e.prototype.widthOfString=function(t,n,r){var a,i,o,l;for(o=0,i=0,l=(t=""+t).length;0<=l?i<l:i>l;i=0<=l?++i:--i)a=t.charCodeAt(i),o+=this.widthOfGlyph(this.characterToGlyph(a))+r*(1e3/n)||0;return o*(n/1e3)},e.prototype.lineHeight=function(t,n){var r;return n==null&&(n=!1),r=n?this.lineGap:0,(this.ascender+r-this.decender)/1e3*t},e}();var vo,gd=function(){function e(t){this.data=t??[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(t){return this.data[this.pos++]=t},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},e.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},e.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},e.prototype.readString=function(t){var n,r;for(r=[],n=0;0<=t?n<t:n>t;n=0<=t?++n:--n)r[n]=String.fromCharCode(this.readByte());return r.join("")},e.prototype.writeString=function(t){var n,r,a;for(a=[],n=0,r=t.length;0<=r?n<r:n>r;n=0<=r?++n:--n)a.push(this.writeByte(t.charCodeAt(n)));return a},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(t){return this.writeInt16(t)},e.prototype.readLongLong=function(){var t,n,r,a,i,o,l,c;return t=this.readByte(),n=this.readByte(),r=this.readByte(),a=this.readByte(),i=this.readByte(),o=this.readByte(),l=this.readByte(),c=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^n)+1099511627776*(255^r)+4294967296*(255^a)+16777216*(255^i)+65536*(255^o)+256*(255^l)+(255^c)+1):72057594037927940*t+281474976710656*n+1099511627776*r+4294967296*a+16777216*i+65536*o+256*l+c},e.prototype.writeLongLong=function(t){var n,r;return n=Math.floor(t/4294967296),r=4294967295&t,this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(t){return this.writeInt32(t)},e.prototype.read=function(t){var n,r;for(n=[],r=0;0<=t?r<t:r>t;r=0<=t?++r:--r)n.push(this.readByte());return n},e.prototype.write=function(t){var n,r,a,i;for(i=[],r=0,a=t.length;r<a;r++)n=t[r],i.push(this.writeByte(n));return i},e}(),one=function(){var e;function t(n){var r,a,i;for(this.scalarType=n.readInt(),this.tableCount=n.readShort(),this.searchRange=n.readShort(),this.entrySelector=n.readShort(),this.rangeShift=n.readShort(),this.tables={},a=0,i=this.tableCount;0<=i?a<i:a>i;a=0<=i?++a:--a)r={tag:n.readString(4),checksum:n.readInt(),offset:n.readInt(),length:n.readInt()},this.tables[r.tag]=r}return t.prototype.encode=function(n){var r,a,i,o,l,c,d,u,h,f,p,y,g;for(g in p=Object.keys(n).length,c=Math.log(2),h=16*Math.floor(Math.log(p)/c),o=Math.floor(h/c),u=16*p-h,(a=new gd).writeInt(this.scalarType),a.writeShort(p),a.writeShort(h),a.writeShort(o),a.writeShort(u),i=16*p,d=a.pos+i,l=null,y=[],n)for(f=n[g],a.writeString(g),a.writeInt(e(f)),a.writeInt(d),a.writeInt(f.length),y=y.concat(f),g==="head"&&(l=d),d+=f.length;d%4;)y.push(0),d++;return a.write(y),r=2981146554-e(a.data),a.pos=l+8,a.writeUInt32(r),a.data},e=function(n){var r,a,i,o;for(n=LO.call(n);n.length%4;)n.push(0);for(i=new gd(n),a=0,r=0,o=n.length;r<o;r=r+=4)a+=i.readUInt32();return 4294967295&a},t}(),lne={}.hasOwnProperty,al=function(e,t){for(var n in t)lne.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};vo=function(){function e(t){var n;this.file=t,n=this.file.directory.tables[this.tag],this.exists=!!n,n&&(this.offset=n.offset,this.length=n.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e}();var cne=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return al(t,vo),t.prototype.tag="head",t.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.revision=n.readInt(),this.checkSumAdjustment=n.readInt(),this.magicNumber=n.readInt(),this.flags=n.readShort(),this.unitsPerEm=n.readShort(),this.created=n.readLongLong(),this.modified=n.readLongLong(),this.xMin=n.readShort(),this.yMin=n.readShort(),this.xMax=n.readShort(),this.yMax=n.readShort(),this.macStyle=n.readShort(),this.lowestRecPPEM=n.readShort(),this.fontDirectionHint=n.readShort(),this.indexToLocFormat=n.readShort(),this.glyphDataFormat=n.readShort()},t.prototype.encode=function(n){var r;return(r=new gd).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(n),r.writeShort(this.glyphDataFormat),r.data},t}(),ME=function(){function e(t,n){var r,a,i,o,l,c,d,u,h,f,p,y,g,x,m,v,b;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=n+t.readInt(),h=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(c=0;c<256;++c)this.codeMap[c]=t.readByte();break;case 4:for(p=t.readUInt16(),f=p/2,t.pos+=6,i=function(){var C,S;for(S=[],c=C=0;0<=f?C<f:C>f;c=0<=f?++C:--C)S.push(t.readUInt16());return S}(),t.pos+=2,g=function(){var C,S;for(S=[],c=C=0;0<=f?C<f:C>f;c=0<=f?++C:--C)S.push(t.readUInt16());return S}(),d=function(){var C,S;for(S=[],c=C=0;0<=f?C<f:C>f;c=0<=f?++C:--C)S.push(t.readUInt16());return S}(),u=function(){var C,S;for(S=[],c=C=0;0<=f?C<f:C>f;c=0<=f?++C:--C)S.push(t.readUInt16());return S}(),a=(this.length-t.pos+this.offset)/2,l=function(){var C,S;for(S=[],c=C=0;0<=a?C<a:C>a;c=0<=a?++C:--C)S.push(t.readUInt16());return S}(),c=m=0,b=i.length;m<b;c=++m)for(x=i[c],r=v=y=g[c];y<=x?v<=x:v>=x;r=y<=x?++v:--v)u[c]===0?o=r+d[c]:(o=l[u[c]/2+(r-y)-(f-c)]||0)!==0&&(o+=d[c]),this.codeMap[r]=65535&o}t.pos=h}return e.encode=function(t,n){var r,a,i,o,l,c,d,u,h,f,p,y,g,x,m,v,b,C,S,P,D,N,M,L,T,E,A,O,W,z,F,V,B,Y,$,I,U,q,X,te,ae,le,me,Le,ie,Ne;switch(O=new gd,o=Object.keys(t).sort(function(Be,Ue){return Be-Ue}),n){case"macroman":for(g=0,x=function(){var Be=[];for(y=0;y<256;++y)Be.push(0);return Be}(),v={0:0},i={},W=0,B=o.length;W<B;W++)v[me=t[a=o[W]]]==null&&(v[me]=++g),i[a]={old:t[a],new:v[t[a]]},x[a]=v[t[a]];return O.writeUInt16(1),O.writeUInt16(0),O.writeUInt32(12),O.writeUInt16(0),O.writeUInt16(262),O.writeUInt16(0),O.write(x),{charMap:i,subtable:O.data,maxGlyphID:g+1};case"unicode":for(E=[],h=[],b=0,v={},r={},m=d=null,z=0,Y=o.length;z<Y;z++)v[S=t[a=o[z]]]==null&&(v[S]=++b),r[a]={old:S,new:v[S]},l=v[S]-a,m!=null&&l===d||(m&&h.push(m),E.push(a),d=l),m=a;for(m&&h.push(m),h.push(65535),E.push(65535),L=2*(M=E.length),N=2*Math.pow(Math.log(M)/Math.LN2,2),f=Math.log(N/2)/Math.LN2,D=2*M-N,c=[],P=[],p=[],y=F=0,$=E.length;F<$;y=++F){if(T=E[y],u=h[y],T===65535){c.push(0),P.push(0);break}if(T-(A=r[T].new)>=32768)for(c.push(0),P.push(2*(p.length+M-y)),a=V=T;T<=u?V<=u:V>=u;a=T<=u?++V:--V)p.push(r[a].new);else c.push(A-T),P.push(0)}for(O.writeUInt16(3),O.writeUInt16(1),O.writeUInt32(12),O.writeUInt16(4),O.writeUInt16(16+8*M+2*p.length),O.writeUInt16(0),O.writeUInt16(L),O.writeUInt16(N),O.writeUInt16(f),O.writeUInt16(D),ae=0,I=h.length;ae<I;ae++)a=h[ae],O.writeUInt16(a);for(O.writeUInt16(0),le=0,U=E.length;le<U;le++)a=E[le],O.writeUInt16(a);for(Le=0,q=c.length;Le<q;Le++)l=c[Le],O.writeUInt16(l);for(ie=0,X=P.length;ie<X;ie++)C=P[ie],O.writeUInt16(C);for(Ne=0,te=p.length;Ne<te;Ne++)g=p[Ne],O.writeUInt16(g);return{charMap:r,subtable:O.data,maxGlyphID:b+1}}},e}(),RO=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return al(t,vo),t.prototype.tag="cmap",t.prototype.parse=function(n){var r,a,i;for(n.pos=this.offset,this.version=n.readUInt16(),i=n.readUInt16(),this.tables=[],this.unicode=null,a=0;0<=i?a<i:a>i;a=0<=i?++a:--a)r=new ME(n,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},t.encode=function(n,r){var a,i;return r==null&&(r="macroman"),a=ME.encode(n,r),(i=new gd).writeUInt16(0),i.writeUInt16(1),a.table=i.data.concat(a.subtable),a},t}(),dne=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return al(t,vo),t.prototype.tag="hhea",t.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.ascender=n.readShort(),this.decender=n.readShort(),this.lineGap=n.readShort(),this.advanceWidthMax=n.readShort(),this.minLeftSideBearing=n.readShort(),this.minRightSideBearing=n.readShort(),this.xMaxExtent=n.readShort(),this.caretSlopeRise=n.readShort(),this.caretSlopeRun=n.readShort(),this.caretOffset=n.readShort(),n.pos+=8,this.metricDataFormat=n.readShort(),this.numberOfMetrics=n.readUInt16()},t}(),une=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return al(t,vo),t.prototype.tag="OS/2",t.prototype.parse=function(n){if(n.pos=this.offset,this.version=n.readUInt16(),this.averageCharWidth=n.readShort(),this.weightClass=n.readUInt16(),this.widthClass=n.readUInt16(),this.type=n.readShort(),this.ySubscriptXSize=n.readShort(),this.ySubscriptYSize=n.readShort(),this.ySubscriptXOffset=n.readShort(),this.ySubscriptYOffset=n.readShort(),this.ySuperscriptXSize=n.readShort(),this.ySuperscriptYSize=n.readShort(),this.ySuperscriptXOffset=n.readShort(),this.ySuperscriptYOffset=n.readShort(),this.yStrikeoutSize=n.readShort(),this.yStrikeoutPosition=n.readShort(),this.familyClass=n.readShort(),this.panose=function(){var r,a;for(a=[],r=0;r<10;++r)a.push(n.readByte());return a}(),this.charRange=function(){var r,a;for(a=[],r=0;r<4;++r)a.push(n.readInt());return a}(),this.vendorID=n.readString(4),this.selection=n.readShort(),this.firstCharIndex=n.readShort(),this.lastCharIndex=n.readShort(),this.version>0&&(this.ascent=n.readShort(),this.descent=n.readShort(),this.lineGap=n.readShort(),this.winAscent=n.readShort(),this.winDescent=n.readShort(),this.codePageRange=function(){var r,a;for(a=[],r=0;r<2;r=++r)a.push(n.readInt());return a}(),this.version>1))return this.xHeight=n.readShort(),this.capHeight=n.readShort(),this.defaultChar=n.readShort(),this.breakChar=n.readShort(),this.maxContext=n.readShort()},t}(),hne=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return al(t,vo),t.prototype.tag="post",t.prototype.parse=function(n){var r,a,i;switch(n.pos=this.offset,this.format=n.readInt(),this.italicAngle=n.readInt(),this.underlinePosition=n.readShort(),this.underlineThickness=n.readShort(),this.isFixedPitch=n.readInt(),this.minMemType42=n.readInt(),this.maxMemType42=n.readInt(),this.minMemType1=n.readInt(),this.maxMemType1=n.readInt(),this.format){case 65536:break;case 131072:var o;for(a=n.readUInt16(),this.glyphNameIndex=[],o=0;0<=a?o<a:o>a;o=0<=a?++o:--o)this.glyphNameIndex.push(n.readUInt16());for(this.names=[],i=[];n.pos<this.offset+this.length;)r=n.readByte(),i.push(this.names.push(n.readString(r)));return i;case 151552:return a=n.readUInt16(),this.offsets=n.read(a);case 196608:break;case 262144:return this.map=(function(){var l,c,d;for(d=[],o=l=0,c=this.file.maxp.numGlyphs;0<=c?l<c:l>c;o=0<=c?++l:--l)d.push(n.readUInt32());return d}).call(this)}},t}(),fne=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},pne=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return al(t,vo),t.prototype.tag="name",t.prototype.parse=function(n){var r,a,i,o,l,c,d,u,h,f,p;for(n.pos=this.offset,n.readShort(),r=n.readShort(),c=n.readShort(),a=[],o=0;0<=r?o<r:o>r;o=0<=r?++o:--o)a.push({platformID:n.readShort(),encodingID:n.readShort(),languageID:n.readShort(),nameID:n.readShort(),length:n.readShort(),offset:this.offset+c+n.readShort()});for(d={},o=h=0,f=a.length;h<f;o=++h)i=a[o],n.pos=i.offset,u=n.readString(i.length),l=new fne(u,i),d[p=i.nameID]==null&&(d[p]=[]),d[i.nameID].push(l);this.strings=d,this.copyright=d[0],this.fontFamily=d[1],this.fontSubfamily=d[2],this.uniqueSubfamily=d[3],this.fontName=d[4],this.version=d[5];try{this.postscriptName=d[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=d[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=d[7],this.manufacturer=d[8],this.designer=d[9],this.description=d[10],this.vendorUrl=d[11],this.designerUrl=d[12],this.license=d[13],this.licenseUrl=d[14],this.preferredFamily=d[15],this.preferredSubfamily=d[17],this.compatibleFull=d[18],this.sampleText=d[19]},t}(),mne=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return al(t,vo),t.prototype.tag="maxp",t.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.numGlyphs=n.readUInt16(),this.maxPoints=n.readUInt16(),this.maxContours=n.readUInt16(),this.maxCompositePoints=n.readUInt16(),this.maxComponentContours=n.readUInt16(),this.maxZones=n.readUInt16(),this.maxTwilightPoints=n.readUInt16(),this.maxStorage=n.readUInt16(),this.maxFunctionDefs=n.readUInt16(),this.maxInstructionDefs=n.readUInt16(),this.maxStackElements=n.readUInt16(),this.maxSizeOfInstructions=n.readUInt16(),this.maxComponentElements=n.readUInt16(),this.maxComponentDepth=n.readUInt16()},t}(),gne=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return al(t,vo),t.prototype.tag="hmtx",t.prototype.parse=function(n){var r,a,i,o,l,c,d;for(n.pos=this.offset,this.metrics=[],r=0,c=this.file.hhea.numberOfMetrics;0<=c?r<c:r>c;r=0<=c?++r:--r)this.metrics.push({advance:n.readUInt16(),lsb:n.readInt16()});for(i=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var u,h;for(h=[],r=u=0;0<=i?u<i:u>i;r=0<=i?++u:--u)h.push(n.readInt16());return h}(),this.widths=(function(){var u,h,f,p;for(p=[],u=0,h=(f=this.metrics).length;u<h;u++)o=f[u],p.push(o.advance);return p}).call(this),a=this.widths[this.widths.length-1],d=[],r=l=0;0<=i?l<i:l>i;r=0<=i?++l:--l)d.push(this.widths.push(a));return d},t.prototype.forGlyph=function(n){return n in this.metrics?this.metrics[n]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[n-this.metrics.length]}},t}(),LO=[].slice,vne=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return al(t,vo),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(n){var r,a,i,o,l,c,d,u,h,f;return n in this.cache?this.cache[n]:(o=this.file.loca,r=this.file.contents,a=o.indexOf(n),(i=o.lengthOf(n))===0?this.cache[n]=null:(r.pos=this.offset+a,l=(c=new gd(r.read(i))).readShort(),u=c.readShort(),f=c.readShort(),d=c.readShort(),h=c.readShort(),this.cache[n]=l===-1?new yne(c,u,f,d,h):new xne(c,l,u,f,d,h),this.cache[n]))},t.prototype.encode=function(n,r,a){var i,o,l,c,d;for(l=[],o=[],c=0,d=r.length;c<d;c++)i=n[r[c]],o.push(l.length),i&&(l=l.concat(i.encode(a)));return o.push(l.length),{table:l,offsets:o}},t}(),xne=function(){function e(t,n,r,a,i,o){this.raw=t,this.numberOfContours=n,this.xMin=r,this.yMin=a,this.xMax=i,this.yMax=o,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e}(),yne=function(){function e(t,n,r,a,i){var o,l;for(this.raw=t,this.xMin=n,this.yMin=r,this.xMax=a,this.yMax=i,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;l=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&l;)o.pos+=1&l?4:2,128&l?o.pos+=8:64&l?o.pos+=4:8&l&&(o.pos+=2)}return e.prototype.encode=function(){var t,n,r;for(n=new gd(LO.call(this.raw.data)),t=0,r=this.glyphIDs.length;t<r;++t)n.pos=this.glyphOffsets[t];return n.data},e}(),bne=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return al(t,vo),t.prototype.tag="loca",t.prototype.parse=function(n){var r,a;return n.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var i,o;for(o=[],a=0,i=this.length;a<i;a+=2)o.push(2*n.readUInt16());return o}).call(this):(function(){var i,o;for(o=[],a=0,i=this.length;a<i;a+=4)o.push(n.readUInt32());return o}).call(this)},t.prototype.indexOf=function(n){return this.offsets[n]},t.prototype.lengthOf=function(n){return this.offsets[n+1]-this.offsets[n]},t.prototype.encode=function(n,r){for(var a=new Uint32Array(this.offsets.length),i=0,o=0,l=0;l<a.length;++l)if(a[l]=i,o<r.length&&r[o]==l){++o,a[l]=i;var c=this.offsets[l],d=this.offsets[l+1]-c;d>0&&(i+=d)}for(var u=new Array(4*a.length),h=0;h<a.length;++h)u[4*h+3]=255&a[h],u[4*h+2]=(65280&a[h])>>8,u[4*h+1]=(16711680&a[h])>>16,u[4*h]=(4278190080&a[h])>>24;return u},t}(),wne=function(){function e(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var t,n,r,a,i;for(n in a=this.font.cmap.tables[0].codeMap,t={},i=this.subset)r=i[n],t[n]=a[r];return t},e.prototype.glyphsFor=function(t){var n,r,a,i,o,l,c;for(a={},o=0,l=t.length;o<l;o++)a[i=t[o]]=this.font.glyf.glyphFor(i);for(i in n=[],a)(r=a[i])!=null&&r.compound&&n.push.apply(n,r.glyphIDs);if(n.length>0)for(i in c=this.glyphsFor(n))r=c[i],a[i]=r;return a},e.prototype.encode=function(t,n){var r,a,i,o,l,c,d,u,h,f,p,y,g,x,m;for(a in r=RO.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(t),p={0:0},m=r.charMap)p[(c=m[a]).old]=c.new;for(y in f=r.maxGlyphID,o)y in p||(p[y]=f++);return u=function(v){var b,C;for(b in C={},v)C[v[b]]=b;return C}(p),h=Object.keys(u).sort(function(v,b){return v-b}),g=function(){var v,b,C;for(C=[],v=0,b=h.length;v<b;v++)l=h[v],C.push(u[l]);return C}(),i=this.font.glyf.encode(o,g,p),d=this.font.loca.encode(i.offsets,g),x={cmap:this.font.cmap.raw(),glyf:i.table,loca:d,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(n)},this.font.os2.exists&&(x["OS/2"]=this.font.os2.raw()),this.font.directory.encode(x)},e}();Ot.API.PDFObject=function(){var e;function t(){}return e=function(n,r){return(Array(r+1).join("0")+n).slice(-r)},t.convert=function(n){var r,a,i,o;if(Array.isArray(n))return"["+function(){var l,c,d;for(d=[],l=0,c=n.length;l<c;l++)r=n[l],d.push(t.convert(r));return d}().join(" ")+"]";if(typeof n=="string")return"/"+n;if(n!=null&&n.isString)return"("+n+")";if(n instanceof Date)return"(D:"+e(n.getUTCFullYear(),4)+e(n.getUTCMonth(),2)+e(n.getUTCDate(),2)+e(n.getUTCHours(),2)+e(n.getUTCMinutes(),2)+e(n.getUTCSeconds(),2)+"Z)";if({}.toString.call(n)==="[object Object]"){for(a in i=["<<"],n)o=n[a],i.push("/"+a+" "+t.convert(o));return i.push(">>"),i.join(`
`)}return""+n},t}();const jne=Object.freeze(Object.defineProperty({__proto__:null,AcroForm:Zte,AcroFormAppearance:Tt,AcroFormButton:ts,AcroFormCheckBox:zm,AcroFormChoiceField:yu,AcroFormComboBox:wu,AcroFormEditBox:$m,AcroFormListBox:bu,AcroFormPasswordField:Wm,AcroFormPushButton:Bm,AcroFormRadioButton:ju,AcroFormTextField:id,GState:bg,ShadingPattern:Wc,TilingPattern:uu,default:Ot,jsPDF:Ot},Symbol.toStringTag,{value:"Module"}));var Nne={exports:{}};const Sne=bd(jne);/*!
 * 
 *               jsPDF AutoTable plugin v3.8.4
 *
 *               Copyright (c) 2024 Simon Bengtsson, https://github.com/simonbengtsson/jsPDF-AutoTable
 *               Licensed under the MIT License.
 *               http://opensource.org/licenses/mit-license
 *
 */(function(e,t){(function(r,a){e.exports=a(function(){try{return Sne}catch{}}())})(typeof globalThis<"u"?globalThis:typeof pa<"u"?pa:typeof window<"u"?window:typeof self<"u"?self:pa,function(n){return function(){var r={172:function(l,c){var d=this&&this.__extends||function(){var f=function(p,y){return f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,x){g.__proto__=x}||function(g,x){for(var m in x)Object.prototype.hasOwnProperty.call(x,m)&&(g[m]=x[m])},f(p,y)};return function(p,y){if(typeof y!="function"&&y!==null)throw new TypeError("Class extends value "+String(y)+" is not a constructor or null");f(p,y);function g(){this.constructor=p}p.prototype=y===null?Object.create(y):(g.prototype=y.prototype,new g)}}();Object.defineProperty(c,"__esModule",{value:!0}),c.CellHookData=c.HookData=void 0;var u=function(){function f(p,y,g){this.table=y,this.pageNumber=y.pageNumber,this.pageCount=this.pageNumber,this.settings=y.settings,this.cursor=g,this.doc=p.getDocument()}return f}();c.HookData=u;var h=function(f){d(p,f);function p(y,g,x,m,v,b){var C=f.call(this,y,g,b)||this;return C.cell=x,C.row=m,C.column=v,C.section=m.section,C}return p}(u);c.CellHookData=h},340:function(l,c,d){Object.defineProperty(c,"__esModule",{value:!0});var u=d(4),h=d(136),f=d(744),p=d(776),y=d(664),g=d(972);function x(m){m.API.autoTable=function(){for(var v=[],b=0;b<arguments.length;b++)v[b]=arguments[b];var C;v.length===1?C=v[0]:(console.error("Use of deprecated autoTable initiation"),C=v[2]||{},C.columns=v[0],C.body=v[1]);var S=(0,p.parseInput)(this,C),P=(0,g.createTable)(this,S);return(0,y.drawTable)(this,P),this},m.API.lastAutoTable=!1,m.API.previousAutoTable=!1,m.API.autoTable.previous=!1,m.API.autoTableText=function(v,b,C,S){(0,h.default)(v,b,C,S,this)},m.API.autoTableSetDefaults=function(v){return f.DocHandler.setDefaults(v,this),this},m.autoTableSetDefaults=function(v,b){f.DocHandler.setDefaults(v,b)},m.API.autoTableHtmlToJson=function(v,b){var C;if(b===void 0&&(b=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var S=new f.DocHandler(this),P=(0,u.parseHtml)(S,v,window,b,!1),D=P.head,N=P.body,M=((C=D[0])===null||C===void 0?void 0:C.map(function(L){return L.content}))||[];return{columns:M,rows:N,data:N}},m.API.autoTableEndPosY=function(){console.error("Use of deprecated function: autoTableEndPosY. Use doc.lastAutoTable.finalY instead.");var v=this.lastAutoTable;return v&&v.finalY?v.finalY:0},m.API.autoTableAddPageContent=function(v){return console.error("Use of deprecated function: autoTableAddPageContent. Use jsPDF.autoTableSetDefaults({didDrawPage: () => {}}) instead."),m.API.autoTable.globalDefaults||(m.API.autoTable.globalDefaults={}),m.API.autoTable.globalDefaults.addPageContent=v,this},m.API.autoTableAddPage=function(){return console.error("Use of deprecated function: autoTableAddPage. Use doc.addPage()"),this.addPage(),this}}c.default=x},136:function(l,c){Object.defineProperty(c,"__esModule",{value:!0});function d(u,h,f,p,y){p=p||{};var g=1.15,x=y.internal.scaleFactor,m=y.internal.getFontSize()/x,v=y.getLineHeightFactor?y.getLineHeightFactor():g,b=m*v,C=/\r\n|\r|\n/g,S="",P=1;if((p.valign==="middle"||p.valign==="bottom"||p.halign==="center"||p.halign==="right")&&(S=typeof u=="string"?u.split(C):u,P=S.length||1),f+=m*(2-g),p.valign==="middle"?f-=P/2*b:p.valign==="bottom"&&(f-=P*b),p.halign==="center"||p.halign==="right"){var D=m;if(p.halign==="center"&&(D*=.5),S&&P>=1){for(var N=0;N<S.length;N++)y.text(S[N],h-y.getStringUnitWidth(S[N])*D,f),f+=b;return y}h-=y.getStringUnitWidth(u)*D}return p.halign==="justify"?y.text(u,h,f,{maxWidth:p.maxWidth||100,align:"justify"}):y.text(u,h,f),y}c.default=d},420:function(l,c){Object.defineProperty(c,"__esModule",{value:!0}),c.getPageAvailableWidth=c.parseSpacing=c.getFillStyle=c.addTableBorder=c.getStringWidth=void 0;function d(y,g,x){x.applyStyles(g,!0);var m=Array.isArray(y)?y:[y],v=m.map(function(b){return x.getTextWidth(b)}).reduce(function(b,C){return Math.max(b,C)},0);return v}c.getStringWidth=d;function u(y,g,x,m){var v=g.settings.tableLineWidth,b=g.settings.tableLineColor;y.applyStyles({lineWidth:v,lineColor:b});var C=h(v,!1);C&&y.rect(x.x,x.y,g.getWidth(y.pageSize().width),m.y-x.y,C)}c.addTableBorder=u;function h(y,g){var x=y>0,m=g||g===0;return x&&m?"DF":x?"S":m?"F":null}c.getFillStyle=h;function f(y,g){var x,m,v,b;if(y=y||g,Array.isArray(y)){if(y.length>=4)return{top:y[0],right:y[1],bottom:y[2],left:y[3]};if(y.length===3)return{top:y[0],right:y[1],bottom:y[2],left:y[1]};if(y.length===2)return{top:y[0],right:y[1],bottom:y[0],left:y[1]};y.length===1?y=y[0]:y=g}return typeof y=="object"?(typeof y.vertical=="number"&&(y.top=y.vertical,y.bottom=y.vertical),typeof y.horizontal=="number"&&(y.right=y.horizontal,y.left=y.horizontal),{left:(x=y.left)!==null&&x!==void 0?x:g,top:(m=y.top)!==null&&m!==void 0?m:g,right:(v=y.right)!==null&&v!==void 0?v:g,bottom:(b=y.bottom)!==null&&b!==void 0?b:g}):(typeof y!="number"&&(y=g),{top:y,right:y,bottom:y,left:y})}c.parseSpacing=f;function p(y,g){var x=f(g.settings.margin,0);return y.pageSize().width-(x.left+x.right)}c.getPageAvailableWidth=p},796:function(l,c){var d=this&&this.__extends||function(){var p=function(y,g){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,m){x.__proto__=m}||function(x,m){for(var v in m)Object.prototype.hasOwnProperty.call(m,v)&&(x[v]=m[v])},p(y,g)};return function(y,g){if(typeof g!="function"&&g!==null)throw new TypeError("Class extends value "+String(g)+" is not a constructor or null");p(y,g);function x(){this.constructor=y}y.prototype=g===null?Object.create(g):(x.prototype=g.prototype,new x)}}();Object.defineProperty(c,"__esModule",{value:!0}),c.getTheme=c.defaultStyles=c.HtmlRowInput=void 0;var u=function(p){d(y,p);function y(g){var x=p.call(this)||this;return x._element=g,x}return y}(Array);c.HtmlRowInput=u;function h(p){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/p,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}c.defaultStyles=h;function f(p){var y={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return y[p]}c.getTheme=f},903:function(l,c,d){Object.defineProperty(c,"__esModule",{value:!0}),c.parseCss=void 0;var u=d(420);function h(x,m,v,b,C){var S={},P=1.3333333333333333,D=p(m,function(B){return C.getComputedStyle(B).backgroundColor});D!=null&&(S.fillColor=D);var N=p(m,function(B){return C.getComputedStyle(B).color});N!=null&&(S.textColor=N);var M=g(b,v);M&&(S.cellPadding=M);var L="borderTopColor",T=P*v,E=b.borderTopWidth;if(b.borderBottomWidth===E&&b.borderRightWidth===E&&b.borderLeftWidth===E){var A=(parseFloat(E)||0)/T;A&&(S.lineWidth=A)}else S.lineWidth={top:(parseFloat(b.borderTopWidth)||0)/T,right:(parseFloat(b.borderRightWidth)||0)/T,bottom:(parseFloat(b.borderBottomWidth)||0)/T,left:(parseFloat(b.borderLeftWidth)||0)/T},S.lineWidth.top||(S.lineWidth.right?L="borderRightColor":S.lineWidth.bottom?L="borderBottomColor":S.lineWidth.left&&(L="borderLeftColor"));var O=p(m,function(B){return C.getComputedStyle(B)[L]});O!=null&&(S.lineColor=O);var W=["left","right","center","justify"];W.indexOf(b.textAlign)!==-1&&(S.halign=b.textAlign),W=["middle","bottom","top"],W.indexOf(b.verticalAlign)!==-1&&(S.valign=b.verticalAlign);var z=parseInt(b.fontSize||"");isNaN(z)||(S.fontSize=z/P);var F=f(b);F&&(S.fontStyle=F);var V=(b.fontFamily||"").toLowerCase();return x.indexOf(V)!==-1&&(S.font=V),S}c.parseCss=h;function f(x){var m="";return(x.fontWeight==="bold"||x.fontWeight==="bolder"||parseInt(x.fontWeight)>=700)&&(m="bold"),(x.fontStyle==="italic"||x.fontStyle==="oblique")&&(m+="italic"),m}function p(x,m){var v=y(x,m);if(!v)return null;var b=v.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!b||!Array.isArray(b))return null;var C=[parseInt(b[1]),parseInt(b[2]),parseInt(b[3])],S=parseInt(b[4]);return S===0||isNaN(C[0])||isNaN(C[1])||isNaN(C[2])?null:C}function y(x,m){var v=m(x);return v==="rgba(0, 0, 0, 0)"||v==="transparent"||v==="initial"||v==="inherit"?x.parentElement==null?null:y(x.parentElement,m):v}function g(x,m){var v=[x.paddingTop,x.paddingRight,x.paddingBottom,x.paddingLeft],b=96/(72/m),C=(parseInt(x.lineHeight)-parseInt(x.fontSize))/m/2,S=v.map(function(D){return parseInt(D||"0")/b}),P=(0,u.parseSpacing)(S,0);return C>P.top&&(P.top=C),C>P.bottom&&(P.bottom=C),P}},744:function(l,c){Object.defineProperty(c,"__esModule",{value:!0}),c.DocHandler=void 0;var d={},u=function(){function h(f){this.jsPDFDocument=f,this.userStyles={textColor:f.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:f.internal.getFontSize(),fontStyle:f.internal.getFont().fontStyle,font:f.internal.getFont().fontName,lineWidth:f.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:f.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return h.setDefaults=function(f,p){p===void 0&&(p=null),p?p.__autoTableDocumentDefaults=f:d=f},h.unifyColor=function(f){return Array.isArray(f)?f:typeof f=="number"?[f,f,f]:typeof f=="string"?[f]:null},h.prototype.applyStyles=function(f,p){var y,g,x;p===void 0&&(p=!1),f.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(f.fontStyle);var m=this.jsPDFDocument.internal.getFont(),v=m.fontStyle,b=m.fontName;if(f.font&&(b=f.font),f.fontStyle){v=f.fontStyle;var C=this.getFontList()[b];C&&C.indexOf(v)===-1&&(this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(C[0]),v=C[0])}if(this.jsPDFDocument.setFont(b,v),f.fontSize&&this.jsPDFDocument.setFontSize(f.fontSize),!p){var S=h.unifyColor(f.fillColor);S&&(y=this.jsPDFDocument).setFillColor.apply(y,S),S=h.unifyColor(f.textColor),S&&(g=this.jsPDFDocument).setTextColor.apply(g,S),S=h.unifyColor(f.lineColor),S&&(x=this.jsPDFDocument).setDrawColor.apply(x,S),typeof f.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(f.lineWidth)}},h.prototype.splitTextToSize=function(f,p,y){return this.jsPDFDocument.splitTextToSize(f,p,y)},h.prototype.rect=function(f,p,y,g,x){return this.jsPDFDocument.rect(f,p,y,g,x)},h.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},h.prototype.getTextWidth=function(f){return this.jsPDFDocument.getTextWidth(f)},h.prototype.getDocument=function(){return this.jsPDFDocument},h.prototype.setPage=function(f){this.jsPDFDocument.setPage(f)},h.prototype.addPage=function(){return this.jsPDFDocument.addPage()},h.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},h.prototype.getGlobalOptions=function(){return d||{}},h.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},h.prototype.pageSize=function(){var f=this.jsPDFDocument.internal.pageSize;return f.width==null&&(f={width:f.getWidth(),height:f.getHeight()}),f},h.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},h.prototype.getLineHeightFactor=function(){var f=this.jsPDFDocument;return f.getLineHeightFactor?f.getLineHeightFactor():1.15},h.prototype.getLineHeight=function(f){return f/this.scaleFactor()*this.getLineHeightFactor()},h.prototype.pageNumber=function(){var f=this.jsPDFDocument.internal.getCurrentPageInfo();return f?f.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},h}();c.DocHandler=u},4:function(l,c,d){Object.defineProperty(c,"__esModule",{value:!0}),c.parseHtml=void 0;var u=d(903),h=d(796);function f(g,x,m,v,b){var C,S;v===void 0&&(v=!1),b===void 0&&(b=!1);var P;typeof x=="string"?P=m.document.querySelector(x):P=x;var D=Object.keys(g.getFontList()),N=g.scaleFactor(),M=[],L=[],T=[];if(!P)return console.error("Html table could not be found with input: ",x),{head:M,body:L,foot:T};for(var E=0;E<P.rows.length;E++){var A=P.rows[E],O=(S=(C=A==null?void 0:A.parentElement)===null||C===void 0?void 0:C.tagName)===null||S===void 0?void 0:S.toLowerCase(),W=p(D,N,m,A,v,b);W&&(O==="thead"?M.push(W):O==="tfoot"?T.push(W):L.push(W))}return{head:M,body:L,foot:T}}c.parseHtml=f;function p(g,x,m,v,b,C){for(var S=new h.HtmlRowInput(v),P=0;P<v.cells.length;P++){var D=v.cells[P],N=m.getComputedStyle(D);if(b||N.display!=="none"){var M=void 0;C&&(M=(0,u.parseCss)(g,D,x,N,m)),S.push({rowSpan:D.rowSpan,colSpan:D.colSpan,styles:M,_element:D,content:y(D)})}}var L=m.getComputedStyle(v);if(S.length>0&&(b||L.display!=="none"))return S}function y(g){var x=g.cloneNode(!0);return x.innerHTML=x.innerHTML.replace(/\n/g,"").replace(/ +/g," "),x.innerHTML=x.innerHTML.split(/<br.*?>/).map(function(m){return m.trim()}).join(`
`),x.innerText||x.textContent||""}},776:function(l,c,d){Object.defineProperty(c,"__esModule",{value:!0}),c.parseInput=void 0;var u=d(4),h=d(356),f=d(420),p=d(744),y=d(792);function g(P,D){var N=new p.DocHandler(P),M=N.getDocumentOptions(),L=N.getGlobalOptions();(0,y.default)(N,L,M,D);var T=(0,h.assign)({},L,M,D),E;typeof window<"u"&&(E=window);var A=x(L,M,D),O=m(L,M,D),W=v(N,T),z=C(N,T,E);return{id:D.tableId,content:z,hooks:O,styles:A,settings:W}}c.parseInput=g;function x(P,D,N){for(var M={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},L=function(O){if(O==="columnStyles"){var W=P[O],z=D[O],F=N[O];M.columnStyles=(0,h.assign)({},W,z,F)}else{var V=[P,D,N],B=V.map(function(Y){return Y[O]||{}});M[O]=(0,h.assign)({},B[0],B[1],B[2])}},T=0,E=Object.keys(M);T<E.length;T++){var A=E[T];L(A)}return M}function m(P,D,N){for(var M=[P,D,N],L={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},T=0,E=M;T<E.length;T++){var A=E[T];A.didParseCell&&L.didParseCell.push(A.didParseCell),A.willDrawCell&&L.willDrawCell.push(A.willDrawCell),A.didDrawCell&&L.didDrawCell.push(A.didDrawCell),A.willDrawPage&&L.willDrawPage.push(A.willDrawPage),A.didDrawPage&&L.didDrawPage.push(A.didDrawPage)}return L}function v(P,D){var N,M,L,T,E,A,O,W,z,F,V,B,Y=(0,f.parseSpacing)(D.margin,40/P.scaleFactor()),$=(N=b(P,D.startY))!==null&&N!==void 0?N:Y.top,I;D.showFoot===!0?I="everyPage":D.showFoot===!1?I="never":I=(M=D.showFoot)!==null&&M!==void 0?M:"everyPage";var U;D.showHead===!0?U="everyPage":D.showHead===!1?U="never":U=(L=D.showHead)!==null&&L!==void 0?L:"everyPage";var q=(T=D.useCss)!==null&&T!==void 0?T:!1,X=D.theme||(q?"plain":"striped"),te=!!D.horizontalPageBreak,ae=(E=D.horizontalPageBreakRepeat)!==null&&E!==void 0?E:null;return{includeHiddenHtml:(A=D.includeHiddenHtml)!==null&&A!==void 0?A:!1,useCss:q,theme:X,startY:$,margin:Y,pageBreak:(O=D.pageBreak)!==null&&O!==void 0?O:"auto",rowPageBreak:(W=D.rowPageBreak)!==null&&W!==void 0?W:"auto",tableWidth:(z=D.tableWidth)!==null&&z!==void 0?z:"auto",showHead:U,showFoot:I,tableLineWidth:(F=D.tableLineWidth)!==null&&F!==void 0?F:0,tableLineColor:(V=D.tableLineColor)!==null&&V!==void 0?V:200,horizontalPageBreak:te,horizontalPageBreakRepeat:ae,horizontalPageBreakBehaviour:(B=D.horizontalPageBreakBehaviour)!==null&&B!==void 0?B:"afterAllRows"}}function b(P,D){var N=P.getLastAutoTable(),M=P.scaleFactor(),L=P.pageNumber(),T=!1;if(N&&N.startPageNumber){var E=N.startPageNumber+N.pageNumber-1;T=E===L}return typeof D=="number"?D:(D==null||D===!1)&&T&&(N==null?void 0:N.finalY)!=null?N.finalY+20/M:null}function C(P,D,N){var M=D.head||[],L=D.body||[],T=D.foot||[];if(D.html){var E=D.includeHiddenHtml;if(N){var A=(0,u.parseHtml)(P,D.html,N,E,D.useCss)||{};M=A.head||M,L=A.body||M,T=A.foot||M}else console.error("Cannot parse html in non browser environment")}var O=D.columns||S(M,L,T);return{columns:O,head:M,body:L,foot:T}}function S(P,D,N){var M=P[0]||D[0]||N[0]||[],L=[];return Object.keys(M).filter(function(T){return T!=="_element"}).forEach(function(T){var E=1,A;Array.isArray(M)?A=M[parseInt(T)]:A=M[T],typeof A=="object"&&!Array.isArray(A)&&(E=(A==null?void 0:A.colSpan)||1);for(var O=0;O<E;O++){var W=void 0;Array.isArray(M)?W=L.length:W=T+(O>0?"_".concat(O):"");var z={dataKey:W};L.push(z)}}),L}},792:function(l,c){Object.defineProperty(c,"__esModule",{value:!0});function d(h,f,p,y){for(var g=function(b){b&&typeof b!="object"&&console.error("The options parameter should be of type object, is: "+typeof b),typeof b.extendWidth<"u"&&(b.tableWidth=b.extendWidth?"auto":"wrap",console.error("Use of deprecated option: extendWidth, use tableWidth instead.")),typeof b.margins<"u"&&(typeof b.margin>"u"&&(b.margin=b.margins),console.error("Use of deprecated option: margins, use margin instead.")),b.startY&&typeof b.startY!="number"&&(console.error("Invalid value for startY option",b.startY),delete b.startY),!b.didDrawPage&&(b.afterPageContent||b.beforePageContent||b.afterPageAdd)&&(console.error("The afterPageContent, beforePageContent and afterPageAdd hooks are deprecated. Use didDrawPage instead"),b.didDrawPage=function(T){h.applyStyles(h.userStyles),b.beforePageContent&&b.beforePageContent(T),h.applyStyles(h.userStyles),b.afterPageContent&&b.afterPageContent(T),h.applyStyles(h.userStyles),b.afterPageAdd&&T.pageNumber>1&&T.afterPageAdd(T),h.applyStyles(h.userStyles)}),["createdHeaderCell","drawHeaderRow","drawRow","drawHeaderCell"].forEach(function(T){b[T]&&console.error('The "'.concat(T,'" hook has changed in version 3.0, check the changelog for how to migrate.'))}),[["showFoot","showFooter"],["showHead","showHeader"],["didDrawPage","addPageContent"],["didParseCell","createdCell"],["headStyles","headerStyles"]].forEach(function(T){var E=T[0],A=T[1];b[A]&&(console.error("Use of deprecated option ".concat(A,". Use ").concat(E," instead")),b[E]=b[A])}),[["padding","cellPadding"],["lineHeight","rowHeight"],"fontSize","overflow"].forEach(function(T){var E=typeof T=="string"?T:T[0],A=typeof T=="string"?T:T[1];typeof b[E]<"u"&&(typeof b.styles[A]>"u"&&(b.styles[A]=b[E]),console.error("Use of deprecated option: "+E+", use the style "+A+" instead."))});for(var C=0,S=["styles","bodyStyles","headStyles","footStyles"];C<S.length;C++){var P=S[C];u(b[P]||{})}for(var D=b.columnStyles||{},N=0,M=Object.keys(D);N<M.length;N++){var L=M[N];u(D[L]||{})}},x=0,m=[f,p,y];x<m.length;x++){var v=m[x];g(v)}}c.default=d;function u(h){h.rowHeight?(console.error("Use of deprecated style rowHeight. It is renamed to minCellHeight."),h.minCellHeight||(h.minCellHeight=h.rowHeight)):h.columnWidth&&(console.error("Use of deprecated style columnWidth. It is renamed to cellWidth."),h.cellWidth||(h.cellWidth=h.columnWidth))}},260:function(l,c,d){Object.defineProperty(c,"__esModule",{value:!0}),c.Column=c.Cell=c.Row=c.Table=void 0;var u=d(796),h=d(172),f=d(420),p=function(){function m(v,b){this.pageNumber=1,this.pageCount=1,this.id=v.id,this.settings=v.settings,this.styles=v.styles,this.hooks=v.hooks,this.columns=b.columns,this.head=b.head,this.body=b.body,this.foot=b.foot}return m.prototype.getHeadHeight=function(v){return this.head.reduce(function(b,C){return b+C.getMaxCellHeight(v)},0)},m.prototype.getFootHeight=function(v){return this.foot.reduce(function(b,C){return b+C.getMaxCellHeight(v)},0)},m.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},m.prototype.callCellHooks=function(v,b,C,S,P,D){for(var N=0,M=b;N<M.length;N++){var L=M[N],T=new h.CellHookData(v,this,C,S,P,D),E=L(T)===!1;if(C.text=Array.isArray(C.text)?C.text:[C.text],E)return!1}return!0},m.prototype.callEndPageHooks=function(v,b){v.applyStyles(v.userStyles);for(var C=0,S=this.hooks.didDrawPage;C<S.length;C++){var P=S[C];P(new h.HookData(v,this,b))}},m.prototype.callWillDrawPageHooks=function(v,b){for(var C=0,S=this.hooks.willDrawPage;C<S.length;C++){var P=S[C];P(new h.HookData(v,this,b))}},m.prototype.getWidth=function(v){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var b=this.columns.reduce(function(S,P){return S+P.wrappedWidth},0);return b}else{var C=this.settings.margin;return v-C.left-C.right}},m}();c.Table=p;var y=function(){function m(v,b,C,S,P){P===void 0&&(P=!1),this.height=0,this.raw=v,v instanceof u.HtmlRowInput&&(this.raw=v._element,this.element=v._element),this.index=b,this.section=C,this.cells=S,this.spansMultiplePages=P}return m.prototype.getMaxCellHeight=function(v){var b=this;return v.reduce(function(C,S){var P;return Math.max(C,((P=b.cells[S.index])===null||P===void 0?void 0:P.height)||0)},0)},m.prototype.hasRowSpan=function(v){var b=this;return v.filter(function(C){var S=b.cells[C.index];return S?S.rowSpan>1:!1}).length>0},m.prototype.canEntireRowFit=function(v,b){return this.getMaxCellHeight(b)<=v},m.prototype.getMinimumRowHeight=function(v,b){var C=this;return v.reduce(function(S,P){var D=C.cells[P.index];if(!D)return 0;var N=b.getLineHeight(D.styles.fontSize),M=D.padding("vertical"),L=M+N;return L>S?L:S},0)},m}();c.Row=y;var g=function(){function m(v,b,C){var S,P;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=b,this.section=C,this.raw=v;var D=v;v!=null&&typeof v=="object"&&!Array.isArray(v)?(this.rowSpan=v.rowSpan||1,this.colSpan=v.colSpan||1,D=(P=(S=v.content)!==null&&S!==void 0?S:v.title)!==null&&P!==void 0?P:v,v._element&&(this.raw=v._element)):(this.rowSpan=1,this.colSpan=1);var N=D!=null?""+D:"",M=/\r\n|\r|\n/g;this.text=N.split(M)}return m.prototype.getTextPos=function(){var v;if(this.styles.valign==="top")v=this.y+this.padding("top");else if(this.styles.valign==="bottom")v=this.y+this.height-this.padding("bottom");else{var b=this.height-this.padding("vertical");v=this.y+b/2+this.padding("top")}var C;if(this.styles.halign==="right")C=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var S=this.width-this.padding("horizontal");C=this.x+S/2+this.padding("left")}else C=this.x+this.padding("left");return{x:C,y:v}},m.prototype.getContentHeight=function(v,b){b===void 0&&(b=1.15);var C=Array.isArray(this.text)?this.text.length:1,S=this.styles.fontSize/v*b,P=C*S+this.padding("vertical");return Math.max(P,this.styles.minCellHeight)},m.prototype.padding=function(v){var b=(0,f.parseSpacing)(this.styles.cellPadding,0);return v==="vertical"?b.top+b.bottom:v==="horizontal"?b.left+b.right:b[v]},m}();c.Cell=g;var x=function(){function m(v,b,C){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=v,this.raw=b,this.index=C}return m.prototype.getMaxCustomCellWidth=function(v){for(var b=0,C=0,S=v.allRows();C<S.length;C++){var P=S[C],D=P.cells[this.index];D&&typeof D.styles.cellWidth=="number"&&(b=Math.max(b,D.styles.cellWidth))}return b},m}();c.Column=x},356:function(l,c){Object.defineProperty(c,"__esModule",{value:!0}),c.assign=void 0;function d(u,h,f,p,y){if(u==null)throw new TypeError("Cannot convert undefined or null to object");for(var g=Object(u),x=1;x<arguments.length;x++){var m=arguments[x];if(m!=null)for(var v in m)Object.prototype.hasOwnProperty.call(m,v)&&(g[v]=m[v])}return g}c.assign=d},972:function(l,c,d){Object.defineProperty(c,"__esModule",{value:!0}),c.createTable=void 0;var u=d(744),h=d(260),f=d(324),p=d(796),y=d(356);function g(P,D){var N=new u.DocHandler(P),M=x(D,N.scaleFactor()),L=new h.Table(D,M);return(0,f.calculateWidths)(N,L),N.applyStyles(N.userStyles),L}c.createTable=g;function x(P,D){var N=P.content,M=C(N.columns);if(N.head.length===0){var L=v(M,"head");L&&N.head.push(L)}if(N.foot.length===0){var L=v(M,"foot");L&&N.foot.push(L)}var T=P.settings.theme,E=P.styles;return{columns:M,head:m("head",N.head,M,E,T,D),body:m("body",N.body,M,E,T,D),foot:m("foot",N.foot,M,E,T,D)}}function m(P,D,N,M,L,T){var E={},A=D.map(function(O,W){for(var z=0,F={},V=0,B=0,Y=0,$=N;Y<$.length;Y++){var I=$[Y];if(E[I.index]==null||E[I.index].left===0)if(B===0){var U=void 0;Array.isArray(O)?U=O[I.index-V-z]:U=O[I.dataKey];var q={};typeof U=="object"&&!Array.isArray(U)&&(q=(U==null?void 0:U.styles)||{});var X=S(P,I,W,L,M,T,q),te=new h.Cell(U,X,P);F[I.dataKey]=te,F[I.index]=te,B=te.colSpan-1,E[I.index]={left:te.rowSpan-1,times:B}}else B--,V++;else E[I.index].left--,B=E[I.index].times,z++}return new h.Row(O,W,P,F)});return A}function v(P,D){var N={};return P.forEach(function(M){if(M.raw!=null){var L=b(D,M.raw);L!=null&&(N[M.dataKey]=L)}}),Object.keys(N).length>0?N:null}function b(P,D){if(P==="head"){if(typeof D=="object")return D.header||D.title||null;if(typeof D=="string"||typeof D=="number")return D}else if(P==="foot"&&typeof D=="object")return D.footer;return null}function C(P){return P.map(function(D,N){var M,L,T;return typeof D=="object"?T=(L=(M=D.dataKey)!==null&&M!==void 0?M:D.key)!==null&&L!==void 0?L:N:T=N,new h.Column(T,D,N)})}function S(P,D,N,M,L,T,E){var A=(0,p.getTheme)(M),O;P==="head"?O=L.headStyles:P==="body"?O=L.bodyStyles:P==="foot"&&(O=L.footStyles);var W=(0,y.assign)({},A.table,A[P],L.styles,O),z=L.columnStyles[D.dataKey]||L.columnStyles[D.index]||{},F=P==="body"?z:{},V=P==="body"&&N%2===0?(0,y.assign)({},A.alternateRow,L.alternateRowStyles):{},B=(0,p.defaultStyles)(T),Y=(0,y.assign)({},B,W,V,F);return(0,y.assign)(Y,E)}},664:function(l,c,d){Object.defineProperty(c,"__esModule",{value:!0}),c.addPage=c.drawTable=void 0;var u=d(420),h=d(260),f=d(744),p=d(356),y=d(136),g=d(224);function x(z,F){var V=F.settings,B=V.startY,Y=V.margin,$={x:Y.left,y:B},I=F.getHeadHeight(F.columns)+F.getFootHeight(F.columns),U=B+Y.bottom+I;if(V.pageBreak==="avoid"){var q=F.body,X=q.reduce(function(le,me){return le+me.height},0);U+=X}var te=new f.DocHandler(z);(V.pageBreak==="always"||V.startY!=null&&U>te.pageSize().height)&&(W(te),$.y=Y.top),F.callWillDrawPageHooks(te,$);var ae=(0,p.assign)({},$);F.startPageNumber=te.pageNumber(),V.horizontalPageBreak?m(te,F,ae,$):(te.applyStyles(te.userStyles),(V.showHead==="firstPage"||V.showHead==="everyPage")&&F.head.forEach(function(le){return L(te,F,le,$,F.columns)}),te.applyStyles(te.userStyles),F.body.forEach(function(le,me){var Le=me===F.body.length-1;M(te,F,le,Le,ae,$,F.columns)}),te.applyStyles(te.userStyles),(V.showFoot==="lastPage"||V.showFoot==="everyPage")&&F.foot.forEach(function(le){return L(te,F,le,$,F.columns)})),(0,u.addTableBorder)(te,F,ae,$),F.callEndPageHooks(te,$),F.finalY=$.y,z.lastAutoTable=F,z.previousAutoTable=F,z.autoTable&&(z.autoTable.previous=F),te.applyStyles(te.userStyles)}c.drawTable=x;function m(z,F,V,B){var Y=(0,g.calculateAllColumnsCanFitInPage)(z,F),$=F.settings;if($.horizontalPageBreakBehaviour==="afterAllRows")Y.forEach(function(X,te){z.applyStyles(z.userStyles),te>0?O(z,F,V,B,X.columns,!0):v(z,F,B,X.columns),b(z,F,V,B,X.columns),S(z,F,B,X.columns)});else for(var I=-1,U=Y[0],q=function(){var X=I;if(U){z.applyStyles(z.userStyles);var te=U.columns;I>=0?O(z,F,V,B,te,!0):v(z,F,B,te),X=C(z,F,I+1,B,te),S(z,F,B,te)}var ae=X-I;Y.slice(1).forEach(function(le){z.applyStyles(z.userStyles),O(z,F,V,B,le.columns,!0),C(z,F,I+1,B,le.columns,ae),S(z,F,B,le.columns)}),I=X};I<F.body.length-1;)q()}function v(z,F,V,B){var Y=F.settings;z.applyStyles(z.userStyles),(Y.showHead==="firstPage"||Y.showHead==="everyPage")&&F.head.forEach(function($){return L(z,F,$,V,B)})}function b(z,F,V,B,Y){z.applyStyles(z.userStyles),F.body.forEach(function($,I){var U=I===F.body.length-1;M(z,F,$,U,V,B,Y)})}function C(z,F,V,B,Y,$){z.applyStyles(z.userStyles),$=$??F.body.length;var I=Math.min(V+$,F.body.length),U=-1;return F.body.slice(V,I).forEach(function(q,X){var te=V+X===F.body.length-1,ae=A(z,F,te,B);q.canEntireRowFit(ae,Y)&&(L(z,F,q,B,Y),U=V+X)}),U}function S(z,F,V,B){var Y=F.settings;z.applyStyles(z.userStyles),(Y.showFoot==="lastPage"||Y.showFoot==="everyPage")&&F.foot.forEach(function($){return L(z,F,$,V,B)})}function P(z,F,V){var B=V.getLineHeight(z.styles.fontSize),Y=z.padding("vertical"),$=Math.floor((F-Y)/B);return Math.max(0,$)}function D(z,F,V,B){var Y={};z.spansMultiplePages=!0,z.height=0;for(var $=0,I=0,U=V.columns;I<U.length;I++){var q=U[I],X=z.cells[q.index];if(X){Array.isArray(X.text)||(X.text=[X.text]);var te=new h.Cell(X.raw,X.styles,X.section);te=(0,p.assign)(te,X),te.text=[];var ae=P(X,F,B);X.text.length>ae&&(te.text=X.text.splice(ae,X.text.length));var le=B.scaleFactor(),me=B.getLineHeightFactor();X.contentHeight=X.getContentHeight(le,me),X.contentHeight>=F&&(X.contentHeight=F,te.styles.minCellHeight-=F),X.contentHeight>z.height&&(z.height=X.contentHeight),te.contentHeight=te.getContentHeight(le,me),te.contentHeight>$&&($=te.contentHeight),Y[q.index]=te}}var Le=new h.Row(z.raw,-1,z.section,Y,!0);Le.height=$;for(var ie=0,Ne=V.columns;ie<Ne.length;ie++){var q=Ne[ie],te=Le.cells[q.index];te&&(te.height=Le.height);var X=z.cells[q.index];X&&(X.height=z.height)}return Le}function N(z,F,V,B){var Y=z.pageSize().height,$=B.settings.margin,I=$.top+$.bottom,U=Y-I;F.section==="body"&&(U-=B.getHeadHeight(B.columns)+B.getFootHeight(B.columns));var q=F.getMinimumRowHeight(B.columns,z),X=q<V;if(q>U)return console.error("Will not be able to print row ".concat(F.index," correctly since it's minimum height is larger than page height")),!0;if(!X)return!1;var te=F.hasRowSpan(B.columns),ae=F.getMaxCellHeight(B.columns)>U;return ae?(te&&console.error("The content of row ".concat(F.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(te||B.settings.rowPageBreak==="avoid")}function M(z,F,V,B,Y,$,I){var U=A(z,F,B,$);if(V.canEntireRowFit(U,I))L(z,F,V,$,I);else if(N(z,V,U,F)){var q=D(V,U,F,z);L(z,F,V,$,I),O(z,F,Y,$,I),M(z,F,q,B,Y,$,I)}else O(z,F,Y,$,I),M(z,F,V,B,Y,$,I)}function L(z,F,V,B,Y){B.x=F.settings.margin.left;for(var $=0,I=Y;$<I.length;$++){var U=I[$],q=V.cells[U.index];if(!q){B.x+=U.width;continue}z.applyStyles(q.styles),q.x=B.x,q.y=B.y;var X=F.callCellHooks(z,F.hooks.willDrawCell,q,V,U,B);if(X===!1){B.x+=U.width;continue}T(z,q,B);var te=q.getTextPos();(0,y.default)(q.text,te.x,te.y,{halign:q.styles.halign,valign:q.styles.valign,maxWidth:Math.ceil(q.width-q.padding("left")-q.padding("right"))},z.getDocument()),F.callCellHooks(z,F.hooks.didDrawCell,q,V,U,B),B.x+=U.width}B.y+=V.height}function T(z,F,V){var B=F.styles;if(z.getDocument().setFillColor(z.getDocument().getFillColor()),typeof B.lineWidth=="number"){var Y=(0,u.getFillStyle)(B.lineWidth,B.fillColor);Y&&z.rect(F.x,V.y,F.width,F.height,Y)}else typeof B.lineWidth=="object"&&(B.fillColor&&z.rect(F.x,V.y,F.width,F.height,"F"),E(z,F,V,B.lineWidth))}function E(z,F,V,B){var Y,$,I,U;B.top&&(Y=V.x,$=V.y,I=V.x+F.width,U=V.y,B.right&&(I+=.5*B.right),B.left&&(Y-=.5*B.left),q(B.top,Y,$,I,U)),B.bottom&&(Y=V.x,$=V.y+F.height,I=V.x+F.width,U=V.y+F.height,B.right&&(I+=.5*B.right),B.left&&(Y-=.5*B.left),q(B.bottom,Y,$,I,U)),B.left&&(Y=V.x,$=V.y,I=V.x,U=V.y+F.height,B.top&&($-=.5*B.top),B.bottom&&(U+=.5*B.bottom),q(B.left,Y,$,I,U)),B.right&&(Y=V.x+F.width,$=V.y,I=V.x+F.width,U=V.y+F.height,B.top&&($-=.5*B.top),B.bottom&&(U+=.5*B.bottom),q(B.right,Y,$,I,U));function q(X,te,ae,le,me){z.getDocument().setLineWidth(X),z.getDocument().line(te,ae,le,me,"S")}}function A(z,F,V,B){var Y=F.settings.margin.bottom,$=F.settings.showFoot;return($==="everyPage"||$==="lastPage"&&V)&&(Y+=F.getFootHeight(F.columns)),z.pageSize().height-B.y-Y}function O(z,F,V,B,Y,$){Y===void 0&&(Y=[]),$===void 0&&($=!1),z.applyStyles(z.userStyles),F.settings.showFoot==="everyPage"&&!$&&F.foot.forEach(function(U){return L(z,F,U,B,Y)}),F.callEndPageHooks(z,B);var I=F.settings.margin;(0,u.addTableBorder)(z,F,V,B),W(z),F.pageNumber++,F.pageCount++,B.x=I.left,B.y=I.top,V.y=I.top,F.callWillDrawPageHooks(z,B),F.settings.showHead==="everyPage"&&(F.head.forEach(function(U){return L(z,F,U,B,Y)}),z.applyStyles(z.userStyles))}c.addPage=O;function W(z){var F=z.pageNumber();z.setPage(F+1);var V=z.pageNumber();return V===F?(z.addPage(),!0):!1}},224:function(l,c,d){Object.defineProperty(c,"__esModule",{value:!0}),c.calculateAllColumnsCanFitInPage=void 0;var u=d(420);function h(p,y,g){var x;g===void 0&&(g={});var m=(0,u.getPageAvailableWidth)(p,y),v=new Map,b=[],C=[],S=[];y.settings.horizontalPageBreakRepeat,Array.isArray(y.settings.horizontalPageBreakRepeat)?S=y.settings.horizontalPageBreakRepeat:(typeof y.settings.horizontalPageBreakRepeat=="string"||typeof y.settings.horizontalPageBreakRepeat=="number")&&(S=[y.settings.horizontalPageBreakRepeat]),S.forEach(function(M){var L=y.columns.find(function(T){return T.dataKey===M||T.index===M});L&&!v.has(L.index)&&(v.set(L.index,!0),b.push(L.index),C.push(y.columns[L.index]),m-=L.wrappedWidth)});for(var P=!0,D=(x=g==null?void 0:g.start)!==null&&x!==void 0?x:0;D<y.columns.length;){if(v.has(D)){D++;continue}var N=y.columns[D].wrappedWidth;if(P||m>=N)P=!1,b.push(D),C.push(y.columns[D]),m-=N;else break;D++}return{colIndexes:b,columns:C,lastIndex:D-1}}function f(p,y){for(var g=[],x=0;x<y.columns.length;x++){var m=h(p,y,{start:x});m.columns.length&&(g.push(m),x=m.lastIndex)}return g}c.calculateAllColumnsCanFitInPage=f},324:function(l,c,d){Object.defineProperty(c,"__esModule",{value:!0}),c.ellipsize=c.resizeColumns=c.calculateWidths=void 0;var u=d(420);function h(b,C){f(b,C);var S=[],P=0;C.columns.forEach(function(N){var M=N.getMaxCustomCellWidth(C);M?N.width=M:(N.width=N.wrappedWidth,S.push(N)),P+=N.width});var D=C.getWidth(b.pageSize().width)-P;D&&(D=p(S,D,function(N){return Math.max(N.minReadableWidth,N.minWidth)})),D&&(D=p(S,D,function(N){return N.minWidth})),D=Math.abs(D),!C.settings.horizontalPageBreak&&D>.1/b.scaleFactor()&&(D=D<1?D:Math.round(D),console.warn("Of the table content, ".concat(D," units width could not fit page"))),g(C),x(C,b),y(C)}c.calculateWidths=h;function f(b,C){var S=b.scaleFactor(),P=C.settings.horizontalPageBreak,D=(0,u.getPageAvailableWidth)(b,C);C.allRows().forEach(function(N){for(var M=0,L=C.columns;M<L.length;M++){var T=L[M],E=N.cells[T.index];if(E){var A=C.hooks.didParseCell;C.callCellHooks(b,A,E,N,T,null);var O=E.padding("horizontal");E.contentWidth=(0,u.getStringWidth)(E.text,E.styles,b)+O;var W=(0,u.getStringWidth)(E.text.join(" ").split(/[^\S\u00A0]+/),E.styles,b);if(E.minReadableWidth=W+E.padding("horizontal"),typeof E.styles.cellWidth=="number")E.minWidth=E.styles.cellWidth,E.wrappedWidth=E.styles.cellWidth;else if(E.styles.cellWidth==="wrap"||P===!0)E.contentWidth>D?(E.minWidth=D,E.wrappedWidth=D):(E.minWidth=E.contentWidth,E.wrappedWidth=E.contentWidth);else{var z=10/S;E.minWidth=E.styles.minCellWidth||z,E.wrappedWidth=E.contentWidth,E.minWidth>E.wrappedWidth&&(E.wrappedWidth=E.minWidth)}}}}),C.allRows().forEach(function(N){for(var M=0,L=C.columns;M<L.length;M++){var T=L[M],E=N.cells[T.index];if(E&&E.colSpan===1)T.wrappedWidth=Math.max(T.wrappedWidth,E.wrappedWidth),T.minWidth=Math.max(T.minWidth,E.minWidth),T.minReadableWidth=Math.max(T.minReadableWidth,E.minReadableWidth);else{var A=C.styles.columnStyles[T.dataKey]||C.styles.columnStyles[T.index]||{},O=A.cellWidth||A.minCellWidth;O&&typeof O=="number"&&(T.minWidth=O,T.wrappedWidth=O)}E&&(E.colSpan>1&&!T.minWidth&&(T.minWidth=E.minWidth),E.colSpan>1&&!T.wrappedWidth&&(T.wrappedWidth=E.minWidth))}})}function p(b,C,S){for(var P=C,D=b.reduce(function(z,F){return z+F.wrappedWidth},0),N=0;N<b.length;N++){var M=b[N],L=M.wrappedWidth/D,T=P*L,E=M.width+T,A=S(M),O=E<A?A:E;C-=O-M.width,M.width=O}if(C=Math.round(C*1e10)/1e10,C){var W=b.filter(function(z){return C<0?z.width>S(z):!0});W.length&&(C=p(W,C,S))}return C}c.resizeColumns=p;function y(b){for(var C={},S=1,P=b.allRows(),D=0;D<P.length;D++)for(var N=P[D],M=0,L=b.columns;M<L.length;M++){var T=L[M],E=C[T.index];if(S>1)S--,delete N.cells[T.index];else if(E)E.cell.height+=N.height,S=E.cell.colSpan,delete N.cells[T.index],E.left--,E.left<=1&&delete C[T.index];else{var A=N.cells[T.index];if(!A)continue;if(A.height=N.height,A.rowSpan>1){var O=P.length-D,W=A.rowSpan>O?O:A.rowSpan;C[T.index]={cell:A,left:W,row:N}}}}}function g(b){for(var C=b.allRows(),S=0;S<C.length;S++)for(var P=C[S],D=null,N=0,M=0,L=0;L<b.columns.length;L++){var T=b.columns[L];if(M-=1,M>1&&b.columns[L+1])N+=T.width,delete P.cells[T.index];else if(D){var E=D;delete P.cells[T.index],D=null,E.width=T.width+N}else{var E=P.cells[T.index];if(!E)continue;if(M=E.colSpan,N=0,E.colSpan>1){D=E,N+=T.width;continue}E.width=T.width+N}}}function x(b,C){for(var S={count:0,height:0},P=0,D=b.allRows();P<D.length;P++){for(var N=D[P],M=0,L=b.columns;M<L.length;M++){var T=L[M],E=N.cells[T.index];if(E){C.applyStyles(E.styles,!0);var A=E.width-E.padding("horizontal");if(E.styles.overflow==="linebreak")E.text=C.splitTextToSize(E.text,A+1/C.scaleFactor(),{fontSize:E.styles.fontSize});else if(E.styles.overflow==="ellipsize")E.text=m(E.text,A,E.styles,C,"...");else if(E.styles.overflow==="hidden")E.text=m(E.text,A,E.styles,C,"");else if(typeof E.styles.overflow=="function"){var O=E.styles.overflow(E.text,A);typeof O=="string"?E.text=[O]:E.text=O}E.contentHeight=E.getContentHeight(C.scaleFactor(),C.getLineHeightFactor());var W=E.contentHeight/E.rowSpan;E.rowSpan>1&&S.count*S.height<W*E.rowSpan?S={height:W,count:E.rowSpan}:S&&S.count>0&&S.height>W&&(W=S.height),W>N.height&&(N.height=W)}}S.count--}}function m(b,C,S,P,D){return b.map(function(N){return v(N,C,S,P,D)})}c.ellipsize=m;function v(b,C,S,P,D){var N=1e4*P.scaleFactor();if(C=Math.ceil(C*N)/N,C>=(0,u.getStringWidth)(b,S,P))return b;for(;C<(0,u.getStringWidth)(b+D,S,P)&&!(b.length<=1);)b=b.substring(0,b.length-1);return b.trim()+D}},964:function(l){if(typeof n>"u"){var c=new Error("Cannot find module 'undefined'");throw c.code="MODULE_NOT_FOUND",c}l.exports=n}},a={};function i(l){var c=a[l];if(c!==void 0)return c.exports;var d=a[l]={exports:{}};return r[l].call(d.exports,d,d.exports,i),d.exports}var o={};return function(){var l=o;Object.defineProperty(l,"__esModule",{value:!0}),l.Cell=l.Column=l.Row=l.Table=l.CellHookData=l.__drawTable=l.__createTable=l.applyPlugin=void 0;var c=i(340),d=i(776),u=i(664),h=i(972),f=i(260);Object.defineProperty(l,"Table",{enumerable:!0,get:function(){return f.Table}});var p=i(172);Object.defineProperty(l,"CellHookData",{enumerable:!0,get:function(){return p.CellHookData}});var y=i(260);Object.defineProperty(l,"Cell",{enumerable:!0,get:function(){return y.Cell}}),Object.defineProperty(l,"Column",{enumerable:!0,get:function(){return y.Column}}),Object.defineProperty(l,"Row",{enumerable:!0,get:function(){return y.Row}});function g(C){(0,c.default)(C)}l.applyPlugin=g;function x(C,S){var P=(0,d.parseInput)(C,S),D=(0,h.createTable)(C,P);(0,u.drawTable)(C,D)}function m(C,S){var P=(0,d.parseInput)(C,S);return(0,h.createTable)(C,P)}l.__createTable=m;function v(C,S){(0,u.drawTable)(C,S)}l.__drawTable=v;try{var b=i(964);b.jsPDF&&(b=b.jsPDF),g(b)}catch{}l.default=x}(),o}()})})(Nne);class Cne{constructor(){this.loadSupplierData()}loadSupplierData(){const t=localStorage.getItem("supplierData");t?this.supplierData=JSON.parse(t):(this.supplierData={suppliers:[],deliveries:[],takeoffRequests:[]},this.saveSupplierData())}saveSupplierData(){localStorage.setItem("supplierData",JSON.stringify(this.supplierData))}addSupplier(t){const n={id:Date.now()+Math.random(),name:t.name,contactPerson:t.contactPerson,phone:t.phone,email:t.email,address:t.address,materialCategories:t.materialCategories||[],deliveryPreferences:t.deliveryPreferences||"",isPrimary:t.isPrimary||!1,quarterlyPricing:t.quarterlyPricing||{},createdAt:new Date().toISOString(),isActive:!0};return n.isPrimary&&this.supplierData.suppliers.forEach(r=>r.isPrimary=!1),this.supplierData.suppliers.push(n),this.saveSupplierData(),n}updateSupplier(t,n){const r=this.supplierData.suppliers.findIndex(a=>a.id===t);return r!==-1?(n.isPrimary&&this.supplierData.suppliers.forEach(a=>a.isPrimary=!1),this.supplierData.suppliers[r]={...this.supplierData.suppliers[r],...n},this.saveSupplierData(),this.supplierData.suppliers[r]):null}deleteSupplier(t){this.supplierData.suppliers=this.supplierData.suppliers.filter(n=>n.id!==t),this.saveSupplierData()}getSuppliers(){return this.supplierData.suppliers.filter(t=>t.isActive)}getPrimarySupplier(){return this.supplierData.suppliers.find(t=>t.isPrimary&&t.isActive)}sendTakeoffToSupplier(t){const n={id:Date.now()+Math.random(),jobId:t.jobId,jobName:t.jobName,supplierId:t.supplierId,supplierName:t.supplierName,materials:t.materials||[],deliveryAddress:t.deliveryAddress,contactPerson:t.contactPerson,contactPhone:t.contactPhone,deliveryInstructions:t.deliveryInstructions||"",neededBy:t.neededBy,status:"sent",sentAt:new Date().toISOString(),deliveredAt:null,deliveryNotes:"",deliveryPhotos:[]};return this.supplierData.takeoffRequests.push(n),this.saveSupplierData(),n}getTakeoffRequests(t=null,n=null,r=null){let a=this.supplierData.takeoffRequests;return t&&(a=a.filter(i=>i.jobId===t)),n&&(a=a.filter(i=>i.supplierId===n)),r&&(a=a.filter(i=>i.status===r)),a.sort((i,o)=>new Date(o.sentAt)-new Date(i.sentAt))}confirmDelivery(t,n){const r=this.supplierData.takeoffRequests.findIndex(a=>a.id===t);if(r!==-1){const a=this.supplierData.takeoffRequests[r];this.supplierData.takeoffRequests[r]={...a,status:"delivered",deliveredAt:new Date().toISOString(),deliveryNotes:n.notes||"",deliveryPhotos:n.photos||[]};const i={id:Date.now()+Math.random(),takeoffRequestId:t,jobId:a.jobId,jobName:a.jobName,supplierId:a.supplierId,supplierName:a.supplierName,materials:a.materials,deliveredAt:new Date().toISOString(),notes:n.notes||"",photos:n.photos||[],confirmedBy:n.confirmedBy||"Supplier"};return this.supplierData.deliveries.push(i),this.saveSupplierData(),{takeoffRequest:this.supplierData.takeoffRequests[r],delivery:i}}return null}getDeliveries(t=null,n=null,r=50){let a=this.supplierData.deliveries;return t&&(a=a.filter(i=>i.jobId===t)),n&&(a=a.filter(i=>i.supplierId===n)),a.slice(-r).reverse()}getPendingDeliveries(){return this.supplierData.takeoffRequests.filter(t=>t.status==="sent")}getRecentDeliveries(t=10){return this.supplierData.deliveries.slice(-t).reverse()}getMaterialCategories(){return["drywall","joint_compound","tape","screws","channel","studs","insulation","act_tiles","grid_system","other"]}exportSupplierData(){return this.supplierData}importSupplierData(t){this.supplierData={...this.supplierData,...t},this.saveSupplierData()}formatMaterialList(t){return!t||t.length===0?"No materials specified":t.map(n=>{const r=n.quantity||0,a=n.unit||"ea";return`${n.name}: ${r} ${a}`}).join(", ")}getDeliveryStatus(t){if(t.status==="delivered")return"Delivered";if(t.status==="sent"){const n=new Date(t.sentAt),r=Math.floor((Date.now()-n.getTime())/(1e3*60*60*24));return r>7?"Overdue":r>3?"Pending":"Recent"}return"Unknown"}}const ei=new Cne,Pne=({job:e,isOpen:t,onClose:n})=>{const[r,a]=j.useState(!1),[i,o]=j.useState(""),[l,c]=j.useState(""),[d,u]=j.useState([]);if(j.useEffect(()=>{if(t)try{u(ei.getSuppliers())}catch(x){console.error("Error loading suppliers:",x),u([])}},[t]),!e)return null;const h=e.jobType||"residential",f=()=>{const x=new Ot;let m=45;const v=x.internal.pageSize.height,b=20,C=L=>{m+L>v-b&&(x.addPage(),m=20)};x.setFontSize(18),x.text(`Takeoff Report: ${e.jobName}`,14,22),x.setFontSize(11),x.setTextColor(100),x.text(`GC: ${e.generalContractor}`,14,30),e.address&&x.text(`Address: ${e.address}`,14,36),x.setFontSize(12),x.setTextColor(h==="residential"?34:59),x.text(`${h.charAt(0).toUpperCase()+h.slice(1)} Project`,14,42),x.setTextColor(0);const S=["Material Type","Dimensions","Quantity (pcs)","SqFt/Board","Total SqFt"],P=["Accessory Type","Specific Item","Details","Quantity","Unit"];let D=0,N=0;(e.takeoffPhases||[]).forEach(L=>{if(C(20),x.setFontSize(14),x.setFont(void 0,"bold"),x.text(`Phase: ${L.name}`,14,m),x.setFont(void 0,"normal"),m+=8,L.materials&&L.materials.length>0){C(20),x.setFontSize(12),x.setFont(void 0,"bolditalic"),x.text("Phase Accessories:",16,m),x.setFont(void 0,"normal"),m+=7;const T=[];L.materials.forEach(E=>{let A="";E.length&&(A+=`${E.length} `),E.threadType&&(A+=`${E.threadType}`);const O=[E.type,E.subtype||"",A.trim(),E.quantity.toString(),E.unit];T.push(O)}),T.length>0&&(C(T.length*10+20),x.autoTable({head:[P],body:T,startY:m,theme:"grid",headStyles:{fillColor:[207,83,62]},didDrawPage:E=>{m=E.cursor.y+5}}),m=x.lastAutoTable.finalY+10)}h==="residential"?(L.entries||[]).forEach(T=>{C(20),x.setFontSize(12),x.setFont(void 0,"bolditalic"),x.text(`Floor/Space: ${T.floorSpace}`,16,m),x.setFont(void 0,"normal"),m+=7;const E=[];let A=0,O=0;(T.boards||[]).forEach(W=>{const z=parseFloat(W.width)/12*parseFloat(W.length),F=parseInt(W.quantity,10)*z;A+=parseInt(W.quantity,10),O+=F;const V=[W.boardType,`${W.thickness}" x ${W.width}" x ${W.length}'`,W.quantity.toString(),z.toFixed(2),F.toFixed(2)];E.push(V)}),D+=A,N+=O,E.length>0?(C(E.length*10+20),x.autoTable({head:[S],body:E,startY:m,theme:"grid",headStyles:{fillColor:[92,140,235]},foot:[["Subtotal for "+T.floorSpace,"",A.toString()+" pcs","",O.toFixed(2)+" SqFt"]],footStyles:{fillColor:[240,240,240],textColor:0,fontStyle:"bold"},didDrawPage:W=>{m=W.cursor.y+5}}),m=x.lastAutoTable.finalY+10):(x.setFontSize(10),x.setTextColor(150),x.text("No board entries for this floor/space.",18,m),m+=7)}):(L.entries||[]).forEach(T=>{if(!T.unitType||!T.unitNumbers)return;const E=T.unitNumbers.split(",").map(z=>z.trim()).filter(Boolean);if(E.length===0)return;C(20),x.setFontSize(12),x.setFont(void 0,"bolditalic"),x.text(`Unit Type: ${T.unitType} (${E.length} units)`,16,m),x.setFont(void 0,"normal"),m+=7,x.setFontSize(10),x.text(`Units: ${E.join(", ")}`,18,m),m+=7;const A=[];let O=0,W=0;(T.boards||[]).forEach(z=>{const F=parseFloat(z.width)/12*parseFloat(z.length),V=parseInt(z.quantity,10)*F;O+=parseInt(z.quantity,10),W+=V;const B=[z.boardType,`${z.thickness}" x ${z.width}" x ${z.length}'`,z.quantity.toString(),F.toFixed(2),V.toFixed(2)];A.push(B)}),D+=O*E.length,N+=W*E.length,A.length>0?(C(A.length*10+20),x.autoTable({head:[S],body:A,startY:m,theme:"grid",headStyles:{fillColor:[92,140,235]},foot:[["Subtotal per unit","",O.toString()+" pcs","",W.toFixed(2)+" SqFt"],["Total for all "+E.length+" units","",(O*E.length).toString()+" pcs","",(W*E.length).toFixed(2)+" SqFt"]],footStyles:{fillColor:[240,240,240],textColor:0,fontStyle:"bold"},didDrawPage:z=>{m=z.cursor.y+5}}),m=x.lastAutoTable.finalY+10,E.length>1&&(C(10),x.setFontSize(11),x.setFont(void 0,"bold"),x.text("Individual Unit Breakdown:",16,m),x.setFont(void 0,"normal"),m+=7,E.forEach((z,F)=>{C(10),x.setFontSize(10),x.text(`Unit ${z}:`,18,m),m+=5,x.text(`• Total Boards: ${O} pcs`,20,m),m+=5,x.text(`• Total Square Footage: ${W.toFixed(2)} SqFt`,20,m),m+=7}))):(x.setFontSize(10),x.setTextColor(150),x.text("No board entries for this unit type.",18,m),m+=7)}),m+=5}),C(20),x.setFontSize(14),x.setFont(void 0,"bold"),x.text("Overall Project Totals:",14,m),m+=8,x.setFontSize(11),x.setFont(void 0,"normal"),x.text(`Total Board Count: ${D} pcs`,14,m),m+=6,x.text(`Total Square Footage: ${N.toFixed(2)} SqFt`,14,m),m+=10;const M=new Date().toLocaleDateString();C(10),x.setFontSize(10),x.text(`Report generated on: ${M}`,14,x.internal.pageSize.height-10),x.save(`Takeoff_Report_${h}_${e.jobName.replace(/\s+/g,"_")}.pdf`)},p=()=>{if(!i){pe({title:"Missing Supplier",description:"Please select a supplier to send the takeoff to.",variant:"destructive"});return}try{const x=d.find(v=>v.id===i),m={jobId:e.id,jobName:e.jobName,supplierId:i,supplierName:(x==null?void 0:x.name)||"Unknown Supplier",notes:l,sentAt:new Date().toISOString(),status:"sent"};ei.sendTakeoffToSupplier(m),pe({title:"Takeoff Sent! 📤",description:`Takeoff has been sent to ${x==null?void 0:x.name}. They will be notified to confirm delivery.`}),o(""),c(""),a(!1)}catch(x){pe({title:"Error",description:x.message||"Failed to send takeoff to supplier.",variant:"destructive"})}};let y=0,g=0;return(e.takeoffPhases||[]).forEach(x=>{(x.entries||[]).forEach(m=>{if(h==="commercial"&&m.unitNumbers){const v=m.unitNumbers.split(",").filter(b=>b.trim()).length;(m.boards||[]).forEach(b=>{const C=parseFloat(b.width)/12*parseFloat(b.length),S=parseInt(b.quantity,10)*C*v;y+=parseInt(b.quantity,10)*v,g+=S})}else(m.boards||[]).forEach(v=>{const b=parseFloat(v.width)/12*parseFloat(v.length),C=parseInt(v.quantity,10)*b;y+=parseInt(v.quantity,10),g+=C})})}),s.jsx(Es,{children:t&&s.jsxs(Er,{open:t,onOpenChange:n,children:[s.jsx(Pt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-40",onClick:n}),s.jsx(pr,{className:"fixed z-50 top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-white p-0 shadow-2xl rounded-xl w-[90vw] max-w-4xl max-h-[90vh] flex flex-col",children:s.jsxs(Pt.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"h-full flex flex-col",children:[s.jsxs(mr,{className:"p-6 border-b bg-gradient-to-r from-brandPrimary to-brandSecondary text-white rounded-t-lg flex-shrink-0",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(tn,{className:"h-6 w-6"}),s.jsxs(gr,{className:"text-2xl font-bold",children:["Material Takeoff Report",h==="commercial"?s.jsx("span",{className:"ml-2 text-sm bg-white/20 px-2 py-1 rounded",children:"Commercial"}):s.jsx("span",{className:"ml-2 text-sm bg-white/20 px-2 py-1 rounded",children:"Residential"})]})]}),s.jsx(se,{variant:"ghost",size:"icon",onClick:n,className:"text-white hover:bg-white/20",children:s.jsx(rn,{className:"h-5 w-5"})})]}),s.jsxs(oN,{className:"text-white/80 mt-1",children:["Summary of materials for: ",s.jsx("strong",{children:e.jobName}),h==="commercial"?", broken down by Unit Type and Unit Number.":", broken down by Floor/Space."]})]}),s.jsx("div",{className:"flex-1 overflow-hidden",children:s.jsx(fO,{className:"h-full",children:s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6 text-sm",children:[s.jsxs("div",{className:"bg-slate-100 p-3 rounded-lg",children:[s.jsx("p",{className:"font-semibold text-slate-700",children:"Job Name:"}),s.jsx("p",{className:"text-slate-900",children:e.jobName})]}),s.jsxs("div",{className:"bg-slate-100 p-3 rounded-lg",children:[s.jsx("p",{className:"font-semibold text-slate-700",children:"General Contractor:"}),s.jsx("p",{className:"text-slate-900",children:e.generalContractor})]}),s.jsxs("div",{className:"bg-slate-100 p-3 rounded-lg",children:[s.jsx("p",{className:"font-semibold text-slate-700",children:"Job Type:"}),s.jsx("p",{className:"text-slate-900 flex items-center",children:h==="residential"?s.jsxs(s.Fragment,{children:[s.jsx($l,{className:"h-4 w-4 mr-1 text-green-600"}),s.jsx("span",{className:"capitalize",children:"Residential"})]}):s.jsxs(s.Fragment,{children:[s.jsx(or,{className:"h-4 w-4 mr-1 text-blue-600"}),s.jsx("span",{className:"capitalize",children:"Commercial"})]})})]}),e.address&&s.jsxs("div",{className:"bg-slate-100 p-3 rounded-lg",children:[s.jsx("p",{className:"font-semibold text-slate-700",children:"Job Address:"}),s.jsx("p",{className:"text-slate-900",children:e.address})]})]}),(e.takeoffPhases||[]).map(x=>s.jsxs("div",{className:"mb-6 p-4 border rounded-lg bg-gray-50 shadow-sm",children:[s.jsxs("h3",{className:"text-xl font-bold text-gray-800 mb-3 flex items-center",children:[s.jsx(uy,{className:"h-5 w-5 mr-2 text-brandSecondary"}),"Phase: ",x.name]}),x.materials&&x.materials.length>0&&s.jsxs("div",{className:"mb-4 p-3 bg-brandPrimary/10 rounded-lg border border-brandPrimary/20",children:[s.jsxs("h4",{className:"text-lg font-semibold text-brandPrimary mb-2 flex items-center",children:[s.jsx(ya,{className:"h-5 w-5 mr-2"}),"Phase Accessories"]}),s.jsxs(Hr,{children:[s.jsx(qr,{children:s.jsxs(Jt,{children:[s.jsx(qe,{className:"font-bold",children:"Type"}),s.jsx(qe,{className:"font-bold",children:"Item"}),s.jsx(qe,{className:"font-bold",children:"Details"}),s.jsx(qe,{className:"font-bold text-right",children:"Qty"}),s.jsx(qe,{className:"font-bold",children:"Unit"})]})}),s.jsx(Vr,{children:x.materials.map((m,v)=>{let b="";return m.length&&(b+=`${m.length} `),m.threadType&&(b+=`${m.threadType}`),s.jsxs(Jt,{children:[s.jsx(ze,{className:"font-medium text-sm",children:m.type}),s.jsx(ze,{className:"text-sm",children:m.subtype||"-"}),s.jsx(ze,{className:"text-sm",children:b.trim()||"-"}),s.jsx(ze,{className:"text-right text-sm",children:m.quantity}),s.jsx(ze,{className:"text-sm",children:m.unit})]},v)})})]})]}),(x.entries||[]).length>0?h==="residential"?(x.entries||[]).map(m=>s.jsxs("div",{className:"mb-4 p-3 border rounded-md bg-white",children:[s.jsxs("h4",{className:"text-lg font-semibold text-gray-700 mb-2 flex items-center",children:[s.jsx($l,{className:"h-5 w-5 mr-2 text-green-600"}),"Floor/Space: ",m.floorSpace]}),m.notes&&s.jsxs("p",{className:"text-xs text-gray-500 italic mb-2",children:["Notes: ",m.notes]}),s.jsxs(Hr,{children:[s.jsx(qr,{children:s.jsxs(Jt,{children:[s.jsx(qe,{className:"font-bold",children:"Material"}),s.jsx(qe,{className:"font-bold text-right",children:"Qty"}),s.jsx(qe,{className:"font-bold text-right",children:"SqFt/Board"}),s.jsx(qe,{className:"font-bold text-right",children:"Total SqFt"})]})}),s.jsx(Vr,{children:(m.boards||[]).map((v,b)=>{const C=parseFloat(v.width)/12*parseFloat(v.length),S=parseInt(v.quantity,10)*C;return s.jsxs(Jt,{children:[s.jsxs(ze,{children:[s.jsx("p",{className:"font-medium text-sm",children:v.boardType}),s.jsxs("p",{className:"text-xs text-gray-600",children:[v.thickness,'" x ',v.width,'" x ',v.length,"'"]})]}),s.jsxs(ze,{className:"text-right text-sm",children:[v.quantity," pcs"]}),s.jsx(ze,{className:"text-right text-sm",children:C.toFixed(2)}),s.jsx(ze,{className:"text-right text-sm",children:S.toFixed(2)})]},b)})})]})]},m.id)):(x.entries||[]).map(m=>{if(!m.unitType||!m.unitNumbers)return null;const v=m.unitNumbers.split(",").map(S=>S.trim()).filter(Boolean);if(v.length===0)return null;let b=0,C=0;return(m.boards||[]).forEach(S=>{const P=parseFloat(S.width)/12*parseFloat(S.length),D=parseInt(S.quantity,10)*P;b+=parseInt(S.quantity,10),C+=D}),s.jsxs("div",{className:"mb-4 p-3 border rounded-md bg-white",children:[s.jsxs("h4",{className:"text-lg font-semibold text-gray-700 mb-2 flex items-center",children:[s.jsx(or,{className:"h-5 w-5 mr-2 text-blue-600"}),"Unit Type: ",m.unitType]}),s.jsx("div",{className:"bg-blue-50 p-2 rounded mb-3",children:s.jsxs("p",{className:"text-sm text-blue-800 font-medium",children:["Units: ",v.join(", ")," (",v.length," units)"]})}),m.notes&&s.jsxs("p",{className:"text-xs text-gray-500 italic mb-2",children:["Notes: ",m.notes]}),s.jsxs(Hr,{children:[s.jsx(qr,{children:s.jsxs(Jt,{children:[s.jsx(qe,{className:"font-bold",children:"Material"}),s.jsx(qe,{className:"font-bold text-right",children:"Qty/Unit"}),s.jsx(qe,{className:"font-bold text-right",children:"SqFt/Board"}),s.jsx(qe,{className:"font-bold text-right",children:"SqFt/Unit"}),s.jsxs(qe,{className:"font-bold text-right",children:["Total (",v.length," units)"]})]})}),s.jsxs(Vr,{children:[(m.boards||[]).map((S,P)=>{const D=parseFloat(S.width)/12*parseFloat(S.length),N=parseInt(S.quantity,10)*D,M=N*v.length;return s.jsxs(Jt,{children:[s.jsxs(ze,{children:[s.jsx("p",{className:"font-medium text-sm",children:S.boardType}),s.jsxs("p",{className:"text-xs text-gray-600",children:[S.thickness,'" x ',S.width,'" x ',S.length,"'"]})]}),s.jsxs(ze,{className:"text-right text-sm",children:[S.quantity," pcs"]}),s.jsx(ze,{className:"text-right text-sm",children:D.toFixed(2)}),s.jsx(ze,{className:"text-right text-sm",children:N.toFixed(2)}),s.jsx(ze,{className:"text-right text-sm font-medium",children:M.toFixed(2)})]},P)}),s.jsxs(Jt,{className:"bg-blue-50",children:[s.jsx(ze,{colSpan:2,className:"font-medium",children:"Totals per unit"}),s.jsxs(ze,{className:"text-right",children:[b," pcs"]}),s.jsxs(ze,{className:"text-right",children:[C.toFixed(2)," SqFt"]}),s.jsxs(ze,{className:"text-right font-bold",children:[(C*v.length).toFixed(2)," SqFt"]})]})]})]})]},m.id)}):s.jsx("p",{className:"text-gray-600 italic text-sm",children:"No takeoff entries for this phase."})]},x.id)),s.jsxs("div",{className:"mt-8 p-6 border-2 border-brandSecondary/20 rounded-lg bg-brandSecondary/10",children:[s.jsx("h3",{className:"text-xl font-bold text-brandSecondary mb-4",children:"Overall Project Totals"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[s.jsx("p",{className:"text-brandSecondary font-semibold text-sm",children:"Total Board Count"}),s.jsxs("p",{className:"text-2xl font-bold text-gray-800",children:[y," pcs"]})]}),s.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[s.jsx("p",{className:"text-brandSecondary font-semibold text-sm",children:"Total Square Footage"}),s.jsxs("p",{className:"text-2xl font-bold text-gray-800",children:[g.toFixed(2)," SqFt"]})]})]})]}),(!e.takeoffPhases||e.takeoffPhases.length===0)&&s.jsx("p",{className:"text-gray-600 italic text-center py-8",children:"No takeoff phases or entries found for this job."})]})})}),s.jsx(Tr,{className:"p-6 border-t bg-gray-50 rounded-b-lg flex-shrink-0",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs(se,{variant:"outline",onClick:n,className:"hover:bg-gray-100",children:[s.jsx(rn,{className:"h-4 w-4 mr-2"})," Close"]}),s.jsxs(se,{onClick:f,className:"bg-gradient-to-r from-brandPrimary to-brandSecondary text-white hover:opacity-90",children:[s.jsx(Ri,{className:"h-4 w-4 mr-2"})," Download PDF"]}),s.jsxs(se,{onClick:()=>a(!0),className:"bg-green-600 hover:bg-green-700 text-white",disabled:d.length===0,children:[s.jsx(hy,{className:"h-4 w-4 mr-2"})," Send to Supplier"]})]})})]})}),r&&s.jsx(Er,{open:r,onOpenChange:a,children:s.jsxs(pr,{className:"sm:max-w-md",children:[s.jsxs(mr,{children:[s.jsxs(gr,{className:"flex items-center space-x-2",children:[s.jsx(hg,{className:"h-5 w-5 text-green-600"}),s.jsx("span",{children:"Send Takeoff to Supplier"})]}),s.jsx(oN,{children:"Send this takeoff report to a supplier for material delivery."})]}),s.jsxs("div",{className:"space-y-4 py-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"supplier-select",children:"Select Supplier *"}),s.jsxs(st,{value:i,onValueChange:o,children:[s.jsx(nt,{children:s.jsx(at,{placeholder:"Choose a supplier"})}),s.jsx(rt,{children:d.map(x=>s.jsx(xe,{value:x.id,children:x.name},x.id))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"delivery-notes",children:"Delivery Instructions"}),s.jsx(_n,{id:"delivery-notes",placeholder:"Special delivery instructions, site access info, contact person, etc.",value:l,onChange:x=>c(x.target.value),rows:3})]})]}),s.jsxs(Tr,{children:[s.jsx(se,{variant:"outline",onClick:()=>a(!1),children:"Cancel"}),s.jsxs(se,{onClick:p,className:"bg-green-600 hover:bg-green-700",children:[s.jsx(hy,{className:"h-4 w-4 mr-2"}),"Send Takeoff"]})]})]})})]})})},RE=({employees:e})=>{var we,Se,De,Ie;const[t,n]=j.useState(""),[r,a]=j.useState(""),[i,o]=j.useState(""),[l,c]=j.useState("hourly"),[d,u]=j.useState(""),[h,f]=j.useState(""),[p,y]=j.useState(""),[g,x]=j.useState(""),[m,v]=j.useState("none"),[b,C]=j.useState(null);j.useState(!1);const[S,P]=j.useState(null),{clockIn:D,clockOut:N,punchInPieceRate:M,completePieceRateEntry:L,getEmployeeActiveEntry:T,getEmployeeActivePieceRateEntry:E,getJobPieceRateProgress:A,getAvailableCoats:O,getRemainingCoatPercentage:W,getJobHangProgress:z}=ep(),{jobs:F}=rc(),V=e.filter(oe=>oe.isActive),B=F.filter(oe=>oe.status==="active"),Y=e.filter(oe=>oe.role==="Finisher"&&oe.id!==t),$=j.useMemo(()=>e.find(oe=>oe.id===t)||null,[e,t]),I=j.useMemo(()=>$?T(t):null,[$,t,T]),U=j.useMemo(()=>$?E(t):null,[$,t,E]),q=!!(I||U),X=async()=>{if(!(!t||!r))try{const oe=await Gs.getCurrentLocation();C(oe);const Ee=Gs.validateLocationForJob(oe.latitude,oe.longitude,r);if(P(Ee),!Ee.valid){pe({title:"Location Out of Range",description:Ee.message,variant:"destructive"});return}if(l==="hourly")D(t,r,()=>{const G=Gs.findNearestJobSite(oe.latitude,oe.longitude,r);Gs.addLocationHistory(t,r,oe.latitude,oe.longitude,"punch-in",G==null?void 0:G.id),n(""),a(""),c("hourly"),C(null),P(null)});else{const G=($==null?void 0:$.role)==="Hanger"?"hang":d;if(!G)return;M(t,r,G,()=>{const ge=Gs.findNearestJobSite(oe.latitude,oe.longitude,r);Gs.addLocationHistory(t,r,oe.latitude,oe.longitude,"punch-in",ge==null?void 0:ge.id),n(""),a(""),u(""),c("hourly"),C(null),P(null)})}}catch{pe({title:"Location Error",description:"Unable to get your location. Please ensure location services are enabled and try again.",variant:"destructive"})}},te=async()=>{if(t)try{const oe=await Gs.getCurrentLocation();C(oe),N(t,i,()=>{if(I){const Ee=Gs.findNearestJobSite(oe.latitude,oe.longitude,I.jobId);Gs.addLocationHistory(t,I.jobId,oe.latitude,oe.longitude,"punch-out",Ee==null?void 0:Ee.id)}n(""),o(""),C(null),P(null)})}catch{pe({title:"Location Warning",description:"Unable to get your location, but clock out completed.",variant:"default"}),N(t,i,()=>{n(""),o(""),C(null),P(null)})}},ae=()=>{var et,Zt,Ze,jt;if(!U||!h)return;const oe=F.find(ct=>ct.id===U.jobId);let Ee=0;(et=oe==null?void 0:oe.financials)!=null&&et.fieldRevised&&($!=null&&$.role)&&($.role==="Hanger"?Ee=oe.financials.fieldRevised.hangerRate||0:$.role==="Finisher"&&(Ee=oe.financials.fieldRevised.finisherRate||0));const G=((Ze=(Zt=oe==null?void 0:oe.financials)==null?void 0:Zt.fieldRevised)==null?void 0:Ze.sqft)||0;console.log("=== PIECE RATE CALCULATION DEBUG ==="),console.log("Job:",oe==null?void 0:oe.jobName),console.log("Employee:",$==null?void 0:$.firstName,$==null?void 0:$.lastName,$==null?void 0:$.role),console.log("Piece Rate:",Ee,"/sqft"),console.log("ACTUAL Square Footage from field revised:",G,"sqft"),console.log("Completion Percentage:",h,"%");let ge=0;if(m!=="none"&&g){const ct=e.find(yt=>yt.id===m);ct&&(ge=parseFloat(g)*ct.hourlyRate)}let Pe=0;const Ve=parseFloat(h);if(($==null?void 0:$.role)==="Hanger"){const ct=Ee*G,yt=z(oe.id,t),Yt=Ve-yt;Pe=ct*(Yt/100),console.log("Total Job Value:",ct.toFixed(2)),console.log("Current Progress:",yt,"%"),console.log("Today Completion:",Yt,"%"),console.log("Gross Earnings:",Pe.toFixed(2))}else{const ct=(jt=oe==null?void 0:oe.scopes)==null?void 0:jt.find(At=>At.name.toLowerCase().includes("finish"));let yt=4;if(ct){const At=ct.ceilingFinish||"",On=ct.wallFinish||"";(At.includes("Level 5")||On.includes("Level 5")||At.includes("Stomp")||At.includes("Knockdown")||At.includes("Splatter")||At.includes("Texture"))&&(yt=5)}const Yt=Ee*G/yt;Pe=Yt*(Ve/100),console.log("Total Coats:",yt),console.log("Coat Value:",Yt.toFixed(2)),console.log("Gross Earnings:",Pe.toFixed(2))}const pt=Pe-ge;console.log("Apprentice Cost:",ge.toFixed(2)),console.log("NET EARNINGS:",pt.toFixed(2)),console.log("=== END DEBUG ==="),L(U.id,h,Ee,pt,p,m!=="none"?m:null,g,ge,()=>{n(""),f(""),y(""),v("none"),x("")})},le=oe=>{n(oe);const Ee=e.find(ge=>ge.id===oe),G=E(oe);if((Ee==null?void 0:Ee.role)==="Hanger"&&G){const ge=z(G.jobId,oe);f(ge.toString())}a(""),c("hourly"),u(""),y(""),v("none"),x(""),o("")},me=oe=>new Date(oe).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),Le=oe=>{const Ee=new Date,G=new Date(oe),ge=Ee-G,Pe=Math.floor(ge/(1e3*60*60)),Ve=Math.floor(ge%(1e3*60*60)/(1e3*60));return`${Pe}h ${Ve}m`},ie=$&&$.role!=="Laborer",Ne=j.useMemo(()=>{var Ve,pt,et,Zt;if(!r||!$||$.role==="Laborer")return null;const oe=F.find(Ze=>Ze.id===r);if(!((Ve=oe==null?void 0:oe.financials)!=null&&Ve.fieldRevised))return{rate:0,sqft:0,available:!1,totalCoats:0};const Ee=oe.financials.fieldRevised;let G=0;$.role==="Hanger"?G=Ee.hangerRate||0:$.role==="Finisher"&&(G=Ee.finisherRate||0);const ge=((et=(pt=oe==null?void 0:oe.financials)==null?void 0:pt.fieldRevised)==null?void 0:et.sqft)||0;let Pe=1;if($.role==="Finisher"){Pe=4;const Ze=(Zt=oe.scopes)==null?void 0:Zt.find(jt=>jt.name.toLowerCase().includes("finish"));if(Ze){const jt=Ze.ceilingFinish||"",ct=Ze.wallFinish||"";jt.includes("Level 5")||ct.includes("Level 5")?Pe=5:jt.includes("Level 4")&&ct.includes("Level 4")?Pe=4:(jt.includes("Stomp")||jt.includes("Knockdown")||jt.includes("Splatter")||jt.includes("Texture"))&&(Pe=5)}}return console.log("Piece Rate Info for UI:",{rate:G,sqft:Math.round(ge),available:G>0&&ge>0,totalCoats:Pe}),{rate:G,sqft:Math.round(ge),available:G>0&&ge>0,totalCoats:Pe}},[r,$,F]),Be=j.useMemo(()=>!r||!$||$.role!=="Hanger"?0:z(r,t),[r,$,t,z]),Ue=j.useMemo(()=>!r||!$||$.role!=="Finisher"?[]:O(r,t,F),[r,$,t,O,F]),_e=j.useMemo(()=>{var et,Zt,Ze,jt;if(console.log("=== EARNINGS CALCULATION START ==="),console.log("activePieceRateEntry:",U),console.log("completionPercentage:",h),console.log("selectedEmployeeData:",$),!U||!h||!$)return console.log("Missing required data for earnings calculation"),{grossEarnings:0,apprenticeCost:0,netEarnings:0};const oe=F.find(ct=>ct.id===U.jobId);if(!oe)return console.log("Job not found for earnings calculation"),{grossEarnings:0,apprenticeCost:0,netEarnings:0};let Ee=0;(et=oe.financials)!=null&&et.fieldRevised&&($.role==="Hanger"?Ee=oe.financials.fieldRevised.hangerRate||0:$.role==="Finisher"&&(Ee=oe.financials.fieldRevised.finisherRate||0));const G=((Ze=(Zt=oe==null?void 0:oe.financials)==null?void 0:Zt.fieldRevised)==null?void 0:Ze.sqft)||0;console.log("Piece Rate:",Ee),console.log("ACTUAL Square Footage from field revised:",G);const ge=parseFloat(h);let Pe=0;if($.role==="Hanger"){const ct=Ee*G,yt=z(oe.id,t),Yt=ge-yt;Pe=ct*(Yt/100),console.log("Hanger calculation:"),console.log("Total Job Value:",ct),console.log("Current Progress:",yt),console.log("Today Completion Percent:",Yt),console.log("Gross Earnings:",Pe)}else{let ct=4;const yt=(jt=oe.scopes)==null?void 0:jt.find(At=>At.name.toLowerCase().includes("finish"));if(yt){const At=yt.ceilingFinish||"",On=yt.wallFinish||"";(At.includes("Level 5")||On.includes("Level 5")||At.includes("Stomp")||At.includes("Knockdown")||At.includes("Splatter")||At.includes("Texture"))&&(ct=5)}const Yt=Ee*G/ct;Pe=Yt*(ge/100),console.log("Finisher calculation:"),console.log("Total Coats:",ct),console.log("Coat Value:",Yt),console.log("Completion Percent:",ge),console.log("Gross Earnings:",Pe)}let Ve=0;if(m!=="none"&&g){const ct=e.find(yt=>yt.id===m);ct&&(Ve=parseFloat(g)*ct.hourlyRate)}const pt=Pe-Ve;return console.log("Final earnings:"),console.log("Gross Earnings:",Pe),console.log("Apprentice Cost:",Ve),console.log("Net Earnings:",pt),console.log("=== EARNINGS CALCULATION END ==="),{grossEarnings:Math.round(Pe*100)/100,apprenticeCost:Math.round(Ve*100)/100,netEarnings:Math.round(pt*100)/100}},[U,h,$,m,g,e,F,z,t]),ue=()=>{const oe=[{value:"tape",label:"Tape Coat"},{value:"bed",label:"Bed Coat"},{value:"skim",label:"Skim Coat"},{value:"level5",label:"Level 5 Coat"},{value:"texture",label:"Texture Coat"},{value:"sand",label:"Sand Coat"}];return r&&($==null?void 0:$.role)==="Finisher"?oe.filter(Ee=>Ue.includes(Ee.value)):oe},wt=(oe,Ee)=>{var G;return oe==="Hanger"?"Hanging":((G=ue().find(ge=>ge.value===Ee))==null?void 0:G.label)||Ee},ve=(()=>{if(($==null?void 0:$.role)==="Hanger")return{min:Be,max:100,placeholder:`Enter new total % completed (${Be}-100)`,helpText:`Enter the new total percentage of hanging completed. For example, if you were at ${Be}% and completed 25% more work today, enter ${Be+25}% as the new total.`};if(U){const oe=W(U.jobId,t,U.coat);return{min:0,max:oe,placeholder:`Enter % completed (0-${oe})`,helpText:`Enter the percentage of the ${wt($==null?void 0:$.role,U.coat)} completed today (${oe}% remaining)`}}else return{min:0,max:100,placeholder:"Enter % completed (0-100)",helpText:"Enter the percentage completed today"}})();return s.jsx("div",{className:"space-y-6",children:s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs(Te,{className:"shadow-xl border-0 bg-white/90 backdrop-blur-sm",children:[s.jsx(Xe,{className:"bg-gradient-to-r from-brandPrimary to-brandSecondary text-white rounded-t-lg",children:s.jsxs(Qe,{className:"flex items-center",children:[s.jsx(kn,{className:"h-6 w-6 mr-2"}),"Time Clock"]})}),s.jsxs(Me,{className:"p-6 space-y-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{className:"text-sm font-semibold text-gray-700",children:"Select Employee *"}),s.jsxs(st,{value:t,onValueChange:n,children:[s.jsx(nt,{className:"border-2 focus:border-brandPrimary",children:s.jsx(at,{placeholder:"Choose employee..."})}),s.jsx(rt,{children:V.map(oe=>s.jsx(xe,{value:oe.id,children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(ss,{className:"h-4 w-4"}),s.jsxs("span",{children:[oe.firstName," ",oe.lastName]}),s.jsx(ht,{variant:"outline",className:"text-xs",children:oe.role})]})},oe.id))})]})]}),$&&s.jsxs("div",{className:"p-4 bg-brandSecondary/10 rounded-lg border border-brandSecondary/20",children:[s.jsx("h4",{className:"font-semibold text-brandSecondary mb-2",children:"Employee Info"}),s.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-brandSecondary font-medium",children:"Name:"}),s.jsxs("p",{children:[$.firstName," ",$.lastName]})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-brandSecondary font-medium",children:"Role:"}),s.jsx("p",{children:$.role})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-brandSecondary font-medium",children:"Hourly Rate:"}),s.jsxs("p",{children:["$",$.hourlyRate,"/hr"]})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-brandSecondary font-medium",children:"Status:"}),s.jsx("p",{className:`font-medium ${q?"text-green-600":"text-gray-600"}`,children:I?"Working (Hourly)":U?`Working (${wt($.role,U.coat)})`:"Not Working"})]})]})]}),q?s.jsxs("div",{className:"space-y-4",children:[I&&s.jsxs("div",{className:"p-4 bg-green-50 rounded-lg border border-green-200",children:[s.jsx("h4",{className:"font-semibold text-green-800 mb-2",children:"Currently Working (Hourly)"}),s.jsxs("div",{className:"space-y-1 text-sm",children:[s.jsxs("p",{children:[s.jsx("span",{className:"text-green-600 font-medium",children:"Clocked in at:"})," ",me(I.clockInTime)]}),s.jsxs("p",{children:[s.jsx("span",{className:"text-green-600 font-medium",children:"Working for:"})," ",Le(I.clockInTime)]}),s.jsxs("p",{children:[s.jsx("span",{className:"text-green-600 font-medium",children:"Job:"})," ",((Se=F.find(oe=>oe.id===I.jobId))==null?void 0:Se.jobName)||"Unknown"]})]})]}),U&&s.jsxs("div",{className:"p-4 bg-brandPrimary/10 rounded-lg border border-brandPrimary/20",children:[s.jsx("h4",{className:"font-semibold text-brandPrimary mb-2",children:"Currently Working (Piece Rate)"}),s.jsxs("div",{className:"space-y-1 text-sm",children:[s.jsxs("p",{children:[s.jsx("span",{className:"text-brandPrimary font-medium",children:"Started at:"})," ",me(U.startTime)]}),s.jsxs("p",{children:[s.jsx("span",{className:"text-brandPrimary font-medium",children:"Working for:"})," ",Le(U.startTime)]}),s.jsxs("p",{children:[s.jsx("span",{className:"text-brandPrimary font-medium",children:"Job:"})," ",((De=F.find(oe=>oe.id===U.jobId))==null?void 0:De.jobName)||"Unknown"]}),s.jsxs("p",{children:[s.jsx("span",{className:"text-brandPrimary font-medium",children:"Work Type:"})," ",wt(U.role,U.coat)]}),s.jsxs("p",{children:[s.jsx("span",{className:"text-brandPrimary font-medium",children:"Role:"})," ",U.role]})]})]}),I&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{className:"text-sm font-semibold text-gray-700",children:"Clock Out Notes (Optional)"}),s.jsx(_n,{value:i,onChange:oe=>o(oe.target.value),placeholder:"Add any notes about the work completed...",className:"border-2 focus:border-red-500 min-h-[80px]"})]}),s.jsxs(se,{onClick:te,disabled:!t,className:"w-full bg-gradient-to-r from-red-500 to-orange-600 hover:from-red-600 hover:to-orange-700 text-white font-semibold py-3 text-lg",children:[s.jsx(AM,{className:"h-5 w-5 mr-2"}),"Clock Out"]})]}),U&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{className:"text-sm font-semibold text-gray-700",children:($==null?void 0:$.role)==="Hanger"?"Total Completion Percentage *":"Completion Percentage *"}),s.jsx($e,{type:"number",step:"1",min:ve.min,max:ve.max,value:h,onChange:oe=>{const Ee=parseFloat(oe.target.value);if(($==null?void 0:$.role)==="Hanger")Ee>100?f("100"):Ee<Be?f(Be.toString()):f(oe.target.value);else{const G=W(U.jobId,t,U.coat);Ee>G?f(G.toString()):Ee<0?f("0"):f(oe.target.value)}},placeholder:ve.placeholder,className:"border-2 focus:border-brandPrimary"}),s.jsx("p",{className:"text-xs text-gray-500",children:ve.helpText})]}),($==null?void 0:$.role)==="Finisher"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{className:"text-sm font-semibold text-gray-700",children:"Apprentice (Optional)"}),s.jsxs(st,{value:m,onValueChange:v,children:[s.jsx(nt,{className:"border-2 focus:border-brandPrimary",children:s.jsx(at,{placeholder:"Select apprentice..."})}),s.jsxs(rt,{children:[s.jsx(xe,{value:"none",children:"No Apprentice"}),Y.map(oe=>s.jsx(xe,{value:oe.id,children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(vr,{className:"h-4 w-4"}),s.jsxs("span",{children:[oe.firstName," ",oe.lastName]}),s.jsxs("span",{className:"text-xs text-gray-500",children:["($",oe.hourlyRate,"/hr)"]})]})},oe.id))]})]})]}),m!=="none"&&s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{className:"text-sm font-semibold text-gray-700",children:"Apprentice Hours *"}),s.jsx($e,{type:"number",step:"0.5",min:"0",max:"24",value:g,onChange:oe=>x(oe.target.value),placeholder:"Enter hours worked",className:"border-2 focus:border-brandPrimary"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{className:"text-sm font-semibold text-gray-700",children:"Notes (Optional)"}),s.jsx(_n,{value:p,onChange:oe=>y(oe.target.value),placeholder:"Add any notes about the work completed...",className:"border-2 focus:border-brandPrimary min-h-[80px]"})]}),h&&s.jsxs("div",{className:"p-4 bg-green-50 rounded-lg border border-green-200",children:[s.jsx("h4",{className:"font-semibold text-green-800 mb-2",children:"Earnings Breakdown"}),s.jsxs("div",{className:"space-y-1 text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:($==null?void 0:$.role)==="Hanger"?`Gross Earnings (${Math.max(0,h-Be)}% of total job):`:`Gross Earnings (${h}% of coat):`}),s.jsxs("span",{className:"font-bold",children:["$",_e.grossEarnings]})]}),m!=="none"&&g&&s.jsxs("div",{className:"flex justify-between text-red-600",children:[s.jsxs("span",{children:["Apprentice Cost (",g,"h @ $",(Ie=e.find(oe=>oe.id===m))==null?void 0:Ie.hourlyRate,"/hr):"]}),s.jsxs("span",{className:"font-bold",children:["-$",_e.apprenticeCost]})]}),s.jsxs("div",{className:"flex justify-between text-lg font-bold text-green-700 border-t pt-1",children:[s.jsx("span",{children:"Net Earnings:"}),s.jsxs("span",{children:["$",_e.netEarnings]})]})]})]})]}),s.jsxs(se,{onClick:ae,disabled:!t||!h,className:"w-full bg-gradient-to-r from-brandPrimary to-brandSecondary hover:from-brandPrimary-600 hover:to-brandSecondary-600 text-white font-semibold py-3 text-lg",children:[s.jsx(_r,{className:"h-5 w-5 mr-2"}),"Complete ",wt($==null?void 0:$.role,U==null?void 0:U.coat)," Work"]})]})]}):s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{className:"text-sm font-semibold text-gray-700",children:"Select Job *"}),s.jsxs(st,{value:r,onValueChange:a,children:[s.jsx(nt,{className:"border-2 focus:border-brandPrimary",children:s.jsx(at,{placeholder:"Choose job..."})}),s.jsx(rt,{children:B.map(oe=>s.jsx(xe,{value:oe.id,children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Vo,{className:"h-4 w-4"}),s.jsx("span",{children:oe.jobName})]})},oe.id))})]})]}),r&&ie&&s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{className:"text-sm font-semibold text-gray-700",children:"Work Type"}),s.jsxs(st,{value:l,onValueChange:c,children:[s.jsx(nt,{className:"border-2 focus:border-brandPrimary",children:s.jsx(at,{})}),s.jsxs(rt,{children:[s.jsx(xe,{value:"hourly",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(kn,{className:"h-4 w-4"}),s.jsx("span",{children:"Hourly Time"})]})}),s.jsx(xe,{value:"piece-rate",disabled:!(Ne!=null&&Ne.available),children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(vs,{className:"h-4 w-4"}),s.jsx("span",{children:"Piece Rate"}),!(Ne!=null&&Ne.available)&&s.jsx("span",{className:"text-xs text-red-500",children:"(No rates/takeoffs available)"})]})})]})]})]}),l==="piece-rate"&&(Ne==null?void 0:Ne.available)&&s.jsxs(s.Fragment,{children:[($==null?void 0:$.role)==="Finisher"&&s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{className:"text-sm font-semibold text-gray-700",children:"Select Coat *"}),s.jsxs(st,{value:d,onValueChange:u,children:[s.jsx(nt,{className:"border-2 focus:border-brandPrimary",children:s.jsx(at,{placeholder:"Choose coat..."})}),s.jsx(rt,{children:ue().map(oe=>{const Ee=W(r,t,oe.value);return s.jsx(xe,{value:oe.value,children:s.jsxs("div",{className:"flex items-center justify-between w-full",children:[s.jsx("span",{children:oe.label}),s.jsxs("span",{className:"text-xs text-gray-500 ml-2",children:["(",Ee,"% remaining)"]})]})},oe.value)})})]}),Ue.length===0&&s.jsx("div",{className:"p-3 bg-red-50 rounded-lg border border-red-200",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(co,{className:"h-4 w-4 text-red-600"}),s.jsx("p",{className:"text-sm text-red-800 font-medium",children:"All coats are 100% complete for this job."})]})})]}),($==null?void 0:$.role)==="Hanger"&&Be>0&&s.jsxs("div",{className:"p-4 bg-orange-50 rounded-lg border border-orange-200",children:[s.jsx("h4",{className:"font-semibold text-orange-800 mb-2",children:"Current Progress"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"flex-1 bg-gray-200 rounded-full h-3",children:s.jsx("div",{className:"bg-orange-500 h-3 rounded-full transition-all duration-300",style:{width:`${Be}%`}})}),s.jsxs("span",{className:"text-sm font-medium text-orange-800",children:[Be,"%"]})]}),s.jsxs("p",{className:"text-xs text-orange-700 mt-1",children:["You'll continue from ",Be,"% completion"]})]}),($==null?void 0:$.role)==="Hanger"&&Be>=100&&s.jsxs("div",{className:"p-4 bg-red-50 rounded-lg border border-red-200",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(co,{className:"h-4 w-4 text-red-600"}),s.jsx("h4",{className:"font-semibold text-red-800",children:"Job Complete"})]}),s.jsx("p",{className:"text-sm text-red-700 mt-1",children:"This job is already 100% complete for hanging."})]}),s.jsxs("div",{className:"p-4 bg-brandPrimary/10 rounded-lg border border-brandPrimary/20",children:[s.jsx("h4",{className:"font-semibold text-brandPrimary mb-2",children:"Piece Rate Info"}),s.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-brandPrimary font-medium",children:"Rate:"}),s.jsxs("p",{children:["$",Ne.rate,"/sqft"]})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-brandPrimary font-medium",children:"Total SqFt:"}),s.jsxs("p",{className:"font-bold text-brandSecondary",children:[Ne.sqft," sqft"]}),s.jsx("p",{className:"text-xs text-gray-500",children:"From Field Takeoffs"})]}),($==null?void 0:$.role)==="Finisher"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-brandPrimary font-medium",children:"Total Coats:"}),s.jsxs("p",{children:[Ne.totalCoats," coats"]})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-brandPrimary font-medium",children:"Per Coat Value:"}),s.jsxs("p",{className:"text-lg font-bold text-green-600",children:["$",(Ne.rate*Ne.sqft/Ne.totalCoats).toFixed(2)]})]})]}),($==null?void 0:$.role)==="Hanger"&&s.jsxs("div",{className:"col-span-2",children:[s.jsx("span",{className:"text-brandPrimary font-medium",children:"Total Job Value:"}),s.jsxs("p",{className:"text-lg font-bold text-green-600",children:["$",(Ne.rate*Ne.sqft).toFixed(2)]})]})]})]})]}),s.jsx(se,{onClick:X,disabled:!t||!r||l==="piece-rate"&&(!(Ne!=null&&Ne.available)||($==null?void 0:$.role)==="Finisher"&&(!d||Ue.length===0)||($==null?void 0:$.role)==="Hanger"&&Be>=100),className:"w-full bg-gradient-to-r from-brandPrimary to-brandSecondary hover:from-brandPrimary-600 hover:to-brandSecondary-600 text-white font-semibold py-3 text-lg",children:l==="piece-rate"?s.jsxs(s.Fragment,{children:[s.jsx(vs,{className:"h-5 w-5 mr-2"}),"Punch In (",($==null?void 0:$.role)==="Hanger"?"Hanging":d?(we=ue().find(oe=>oe.value===d))==null?void 0:we.label:"Piece Rate",")"]}):s.jsxs(s.Fragment,{children:[s.jsx(Oo,{className:"h-5 w-5 mr-2"}),"Clock In (Hourly)"]})})]})]})]}),s.jsxs(Te,{className:"shadow-xl border-0 bg-white/90 backdrop-blur-sm",children:[s.jsx(Xe,{className:"bg-gradient-to-r from-brandPrimary to-brandSecondary text-white rounded-t-lg",children:s.jsxs(Qe,{className:"flex items-center",children:[s.jsx(Oo,{className:"h-6 w-6 mr-2"}),"Currently Working"]})}),s.jsx(Me,{className:"p-6",children:V.length===0?s.jsxs("div",{className:"text-center py-8",children:[s.jsx(ss,{className:"h-12 w-12 mx-auto text-gray-400 mb-4"}),s.jsx("p",{className:"text-gray-600 font-medium",children:"No employees added yet"}),s.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"Add employees to start tracking time"})]}):s.jsx("div",{className:"space-y-4",children:V.map(oe=>{const Ee=T(oe.id),G=E(oe.id),ge=Ee?F.find(Pe=>Pe.id===Ee.jobId):G?F.find(Pe=>Pe.id===G.jobId):null;return s.jsx(Pt.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:`p-4 rounded-lg border-2 ${Ee||G?"bg-green-50 border-green-200":"bg-gray-50 border-gray-200"}`,children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs("h4",{className:`font-semibold text-gray-800 ${Ee||G?"cursor-pointer hover:text-brandPrimary transition-colors":""}`,onClick:()=>{(Ee||G)&&le(oe.id)},children:[oe.firstName," ",oe.lastName,(Ee||G)&&s.jsx("span",{className:"text-xs text-brandPrimary ml-2",children:"(click to clock out)"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("p",{className:"text-sm text-gray-600",children:oe.role}),s.jsx(ht,{variant:"outline",className:"text-xs",children:oe.employeeType})]})]}),s.jsx("div",{className:"text-right",children:Ee?s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center space-x-1 text-green-600",children:[s.jsx(kn,{className:"w-3 h-3"}),s.jsx("span",{className:"text-sm font-medium",children:"Hourly"})]}),s.jsx("p",{className:"text-xs text-gray-600 mt-1",children:Le(Ee.clockInTime)}),ge&&s.jsxs("p",{className:"text-xs text-gray-500",children:["on ",ge.jobName]})]}):G?s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center space-x-1 text-brandPrimary",children:[s.jsx(vs,{className:"w-3 h-3"}),s.jsx("span",{className:"text-sm font-medium",children:wt(oe.role,G.coat)})]}),s.jsx("p",{className:"text-xs text-gray-600 mt-1",children:Le(G.startTime)}),ge&&s.jsxs("p",{className:"text-xs text-gray-500",children:["on ",ge.jobName]})]}):s.jsx("span",{className:"text-sm text-gray-500",children:"Not working"})})]})},oe.id)})})})]})]})})},Dne=({employees:e})=>{const[t,n]=j.useState("employee"),[r,a]=j.useState(""),[i,o]=j.useState(""),[l,c]=j.useState(""),[d,u]=j.useState(""),{timeEntries:h,pieceRateEntries:f,getEmployeeTimeEntries:p,getEmployeePieceRateEntries:y,getJobTimeEntries:g,getTotalHoursForEmployee:x,getTotalEarningsForEmployee:m,getTotalHoursForJob:v}=ep(),{jobs:b}=rc();Q.useEffect(()=>{const A=new Date,O=new Date(A.setDate(A.getDate()-A.getDay())),W=new Date(A.setDate(A.getDate()-A.getDay()+6));c(O.toISOString().split("T")[0]),u(W.toISOString().split("T")[0])},[]);const C=j.useMemo(()=>{let A=h;return t==="employee"&&r?A=p(r,l,d):t==="job"&&i?A=g(i,l,d):(l&&(A=A.filter(O=>new Date(O.clockInTime)>=new Date(l))),d&&(A=A.filter(O=>new Date(O.clockInTime)<=new Date(d))),A=A.sort((O,W)=>new Date(W.clockInTime)-new Date(O.clockInTime))),A},[t,r,i,l,d,h,p,g]),S=j.useMemo(()=>{let A=f;return t==="employee"&&r?A=y(r,l,d):t==="job"&&i?(A=A.filter(O=>O.jobId===i),l&&(A=A.filter(O=>new Date(O.startTime)>=new Date(l))),d&&(A=A.filter(O=>new Date(O.startTime)<=new Date(d)))):(l&&(A=A.filter(O=>new Date(O.startTime)>=new Date(l))),d&&(A=A.filter(O=>new Date(O.startTime)<=new Date(d)))),A.sort((O,W)=>new Date(W.startTime)-new Date(O.startTime))},[t,r,i,l,d,f,y]),P=j.useMemo(()=>{const A=C.reduce((Y,$)=>Y+($.totalHours||0),0),O=C.length+S.length,W=C.filter(Y=>Y.clockOutTime).length+S.filter(Y=>Y.status==="completed").length;let z=0;C.forEach(Y=>{const $=e.find(I=>I.id===Y.employeeId);$&&Y.totalHours&&(z+=Y.totalHours*$.hourlyRate)});const F=S.reduce((Y,$)=>Y+($.totalEarnings||0),0),V=S.reduce((Y,$)=>Y+($.apprenticeCost||0),0),B=z+F+V;return{totalHours:Math.round(A*100)/100,totalEntries:O,completedEntries:W,totalCost:Math.round(B*100)/100,totalPieceRateEarnings:Math.round(F*100)/100,totalApprenticeCosts:Math.round(V*100)/100}},[C,S,e]),D=A=>new Date(A).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),N=A=>new Date(A).toLocaleDateString(),M=A=>{const O=e.find(W=>W.id===A);return O?`${O.firstName} ${O.lastName}`:"Unknown"},L=A=>{const O=b.find(W=>W.id===A);return O?O.jobName:"Unknown"},T=(A,O)=>A==="Hanger"?"Hanging":{tape:"Tape Coat",bed:"Bed Coat",skim:"Skim Coat",level5:"Level 5 Coat",texture:"Texture Coat",sand:"Sand Coat"}[O]||O,E=()=>{const A=["Date","Employee","Job","Type","Start Time","End Time","Hours/Completion","Rate","Gross Earnings","Apprentice","Apprentice Cost","Net Earnings","Notes"],O=[];C.forEach(B=>{const Y=e.find(I=>I.id===B.employeeId),$=B.totalHours?(B.totalHours*((Y==null?void 0:Y.hourlyRate)||0)).toFixed(2):"0";O.push([N(B.clockInTime),M(B.employeeId),L(B.jobId),"Hourly",D(B.clockInTime),B.clockOutTime?D(B.clockOutTime):"Still Working",B.totalHours||"0",`$${(Y==null?void 0:Y.hourlyRate)||0}/hr`,$,"","0",$,B.notes||""])}),S.forEach(B=>{const Y=B.apprenticeId?M(B.apprenticeId):"",$=(B.totalEarnings||0)+(B.apprenticeCost||0);O.push([N(B.startTime),M(B.employeeId),L(B.jobId),`Piece Rate (${T(B.role,B.coat)})`,D(B.startTime),B.endTime?D(B.endTime):"In Progress",`${B.completionPercentage||0}%`,`$${B.pieceRate||0}/sqft`,$.toFixed(2),Y,(B.apprenticeCost||0).toFixed(2),(B.totalEarnings||0).toFixed(2),B.notes||""])});const W=[A,...O].map(B=>B.map(Y=>`"${Y}"`).join(",")).join(`
`),z=new Blob([W],{type:"text/csv"}),F=window.URL.createObjectURL(z),V=document.createElement("a");V.href=F,V.download=`time_report_${new Date().toISOString().split("T")[0]}.csv`,V.click(),window.URL.revokeObjectURL(F)};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs(Te,{children:[s.jsx(Xe,{children:s.jsxs(Qe,{className:"flex items-center",children:[s.jsx(Jf,{className:"h-5 w-5 mr-2"}),"Time Reports"]})}),s.jsx(Me,{children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{children:"Report Type"}),s.jsxs(st,{value:t,onValueChange:n,children:[s.jsx(nt,{children:s.jsx(at,{})}),s.jsxs(rt,{children:[s.jsx(xe,{value:"all",children:"All Entries"}),s.jsx(xe,{value:"employee",children:"By Employee"}),s.jsx(xe,{value:"job",children:"By Job"})]})]})]}),t==="employee"&&s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{children:"Employee"}),s.jsxs(st,{value:r,onValueChange:a,children:[s.jsx(nt,{children:s.jsx(at,{placeholder:"Select employee"})}),s.jsx(rt,{children:e.map(A=>s.jsxs(xe,{value:A.id,children:[A.firstName," ",A.lastName," (",A.role,")"]},A.id))})]})]}),t==="job"&&s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{children:"Job"}),s.jsxs(st,{value:i,onValueChange:o,children:[s.jsx(nt,{children:s.jsx(at,{placeholder:"Select job"})}),s.jsx(rt,{children:b.map(A=>s.jsx(xe,{value:A.id,children:A.jobName},A.id))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{children:"Start Date"}),s.jsx($e,{type:"date",value:l,onChange:A=>c(A.target.value)})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{children:"End Date"}),s.jsx($e,{type:"date",value:d,onChange:A=>u(A.target.value)})]})]})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-4",children:[s.jsx(Te,{children:s.jsx(Me,{className:"p-6",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(kn,{className:"h-5 w-5 text-brandSecondary"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Total Hours"}),s.jsxs("p",{className:"text-2xl font-bold",children:[P.totalHours,"h"]})]})]})})}),s.jsx(Te,{children:s.jsx(Me,{className:"p-6",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(An,{className:"h-5 w-5 text-green-500"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Total Entries"}),s.jsx("p",{className:"text-2xl font-bold",children:P.totalEntries})]})]})})}),s.jsx(Te,{children:s.jsx(Me,{className:"p-6",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(ss,{className:"h-5 w-5 text-brandPrimary"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Completed"}),s.jsx("p",{className:"text-2xl font-bold",children:P.completedEntries})]})]})})}),s.jsx(Te,{children:s.jsx(Me,{className:"p-6",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(vs,{className:"h-5 w-5 text-brandPrimary"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Piece Rate"}),s.jsxs("p",{className:"text-2xl font-bold",children:["$",P.totalPieceRateEarnings]})]})]})})}),s.jsx(Te,{children:s.jsx(Me,{className:"p-6",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(vr,{className:"h-5 w-5 text-red-500"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Apprentice"}),s.jsxs("p",{className:"text-2xl font-bold",children:["$",P.totalApprenticeCosts]})]})]})})}),s.jsx(Te,{children:s.jsx(Me,{className:"p-6",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(_r,{className:"h-5 w-5 text-green-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Total Cost"}),s.jsxs("p",{className:"text-2xl font-bold",children:["$",P.totalCost]})]})]})})})]}),s.jsxs(Te,{children:[s.jsx(Xe,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(Qe,{children:"Time & Piece Rate Entries"}),s.jsxs(se,{onClick:E,variant:"outline",children:[s.jsx(Ri,{className:"h-4 w-4 mr-2"}),"Export CSV"]})]})}),s.jsx(Me,{children:C.length===0&&S.length===0?s.jsxs("div",{className:"text-center py-8",children:[s.jsx(kn,{className:"h-12 w-12 mx-auto text-gray-400 mb-4"}),s.jsx("p",{className:"text-gray-600 font-medium",children:"No entries found"}),s.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"Try adjusting your filters or date range"})]}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs(Hr,{children:[s.jsx(qr,{children:s.jsxs(Jt,{children:[s.jsx(qe,{children:"Date"}),s.jsx(qe,{children:"Employee"}),s.jsx(qe,{children:"Job"}),s.jsx(qe,{children:"Type"}),s.jsx(qe,{children:"Start"}),s.jsx(qe,{children:"End"}),s.jsx(qe,{children:"Hours/Completion"}),s.jsx(qe,{children:"Rate"}),s.jsx(qe,{children:"Gross"}),s.jsx(qe,{children:"Apprentice"}),s.jsx(qe,{children:"Net"}),s.jsx(qe,{children:"Notes"})]})}),s.jsx(Vr,{children:[...C.map(A=>({...A,type:"hourly"})),...S.map(A=>({...A,type:"piece-rate"}))].sort((A,O)=>{const W=new Date(A.type==="hourly"?A.clockInTime:A.startTime);return new Date(O.type==="hourly"?O.clockInTime:O.startTime)-W}).map((A,O)=>{const W=e.find(F=>F.id===A.employeeId);b.find(F=>F.id===A.jobId);const z=A.apprenticeId?e.find(F=>F.id===A.apprenticeId):null;return s.jsxs(Pt.tr,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:O*.05},className:"hover:bg-gray-50",children:[s.jsx(ze,{children:N(A.type==="hourly"?A.clockInTime:A.startTime)}),s.jsx(ze,{children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(ss,{className:"h-4 w-4 text-gray-400"}),s.jsx("span",{children:M(A.employeeId)}),s.jsx(ht,{variant:"outline",className:"text-xs",children:W==null?void 0:W.role})]})}),s.jsx(ze,{children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Vo,{className:"h-4 w-4 text-gray-400"}),s.jsx("span",{children:L(A.jobId)})]})}),s.jsx(ze,{children:s.jsx(ht,{className:A.type==="hourly"?"bg-brandSecondary/10 text-brandSecondary":"bg-brandPrimary/10 text-brandPrimary",children:A.type==="hourly"?s.jsxs(s.Fragment,{children:[s.jsx(kn,{className:"h-3 w-3 mr-1"}),"Hourly"]}):s.jsxs(s.Fragment,{children:[s.jsx(vs,{className:"h-3 w-3 mr-1"}),T(A.role,A.coat)]})})}),s.jsx(ze,{children:D(A.type==="hourly"?A.clockInTime:A.startTime)}),s.jsx(ze,{children:A.type==="hourly"?A.clockOutTime?D(A.clockOutTime):s.jsx("span",{className:"text-green-600 font-medium",children:"Still Working"}):A.endTime?D(A.endTime):s.jsx("span",{className:"text-brandPrimary font-medium",children:"In Progress"})}),s.jsx(ze,{children:s.jsx("span",{className:"font-medium",children:A.type==="hourly"?A.totalHours?`${A.totalHours}h`:"-":A.completionPercentage?`${A.completionPercentage}%`:"-"})}),s.jsx(ze,{children:s.jsx("span",{className:"font-medium",children:A.type==="hourly"?`$${(W==null?void 0:W.hourlyRate)||0}/hr`:`$${A.pieceRate||0}/sqft`})}),s.jsx(ze,{children:s.jsx("span",{className:"font-bold text-green-600",children:A.type==="hourly"?A.totalHours&&W?`$${(A.totalHours*W.hourlyRate).toFixed(2)}`:"-":`$${((A.totalEarnings||0)+(A.apprenticeCost||0)).toFixed(2)}`})}),s.jsx(ze,{children:A.type==="piece-rate"&&A.apprenticeId?s.jsxs("div",{className:"text-xs",children:[s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(vr,{className:"h-3 w-3 text-gray-400"}),s.jsxs("span",{children:[z==null?void 0:z.firstName," ",z==null?void 0:z.lastName]})]}),s.jsxs("div",{className:"text-red-600",children:[A.apprenticeHours,"h @ $",z==null?void 0:z.hourlyRate,"/hr"]}),s.jsxs("div",{className:"font-medium text-red-600",children:["-$",A.apprenticeCost||0]})]}):s.jsx("span",{className:"text-gray-400",children:"-"})}),s.jsx(ze,{children:s.jsx("span",{className:"font-bold text-green-600",children:A.type==="hourly"?A.totalHours&&W?`$${(A.totalHours*W.hourlyRate).toFixed(2)}`:"-":`$${A.totalEarnings||0}`})}),s.jsx(ze,{children:s.jsx("span",{className:"text-sm text-gray-600",children:A.notes||"-"})})]},`${A.type}-${A.id}`)})})]})})})]})]})},kne=({isOpen:e,onClose:t,employees:n=[],jobs:r=[]})=>{const[a,i]=j.useState({employeeId:"",jobId:"",type:"",severity:"",description:"",witnesses:""}),[o,l]=j.useState(!1),c=["injury","near-miss","property-damage","hazard","equipment-failure","weather-related"],d=["minor","moderate","serious","critical"],u=async f=>{var p;if(f.preventDefault(),!a.employeeId||!a.jobId||!a.type||!a.severity||!a.description){pe({title:"Missing Information",description:"Please fill in all required fields.",variant:"destructive"});return}l(!0);try{const y=await Gs.getCurrentLocation(),g=Gs.findNearestJobSite(y.latitude,y.longitude,a.jobId);Gs.addSafetyIncident({...a,latitude:y.latitude,longitude:y.longitude,siteId:g==null?void 0:g.id,reportedBy:((p=n.find(x=>x.id===a.employeeId))==null?void 0:p.name)||"Unknown"}),pe({title:"Safety Incident Reported! 🚨",description:"The incident has been logged and will be investigated."}),i({employeeId:"",jobId:"",type:"",severity:"",description:"",witnesses:""}),t()}catch(y){pe({title:"Error",description:y.message,variant:"destructive"})}finally{l(!1)}},h=(f,p)=>{i(y=>({...y,[f]:p}))};return e?s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:s.jsxs(Te,{className:"w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[s.jsx(Xe,{className:"bg-red-50 border-b border-red-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"p-2 bg-red-100 rounded-lg",children:s.jsx(co,{className:"h-6 w-6 text-red-600"})}),s.jsxs("div",{children:[s.jsx(Qe,{className:"text-xl font-bold text-red-800",children:"Report Safety Incident"}),s.jsx("p",{className:"text-red-600 text-sm",children:"Quick incident reporting with location tracking"})]})]}),s.jsx(se,{variant:"ghost",size:"sm",onClick:t,children:s.jsx(rn,{className:"h-4 w-4"})})]})}),s.jsx(Me,{className:"p-6",children:s.jsxs("form",{onSubmit:u,className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"incident-employee",children:"Employee *"}),s.jsxs(st,{value:a.employeeId,onValueChange:f=>h("employeeId",f),children:[s.jsx(nt,{children:s.jsx(at,{placeholder:"Select employee"})}),s.jsx(rt,{children:n.map(f=>s.jsxs(xe,{value:f.id,children:[f.firstName," ",f.lastName]},f.id))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"incident-job",children:"Job Site *"}),s.jsxs(st,{value:a.jobId,onValueChange:f=>h("jobId",f),children:[s.jsx(nt,{children:s.jsx(at,{placeholder:"Select job"})}),s.jsx(rt,{children:r.filter(f=>f.status==="active").map(f=>s.jsx(xe,{value:f.id,children:f.jobName},f.id))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"incident-type",children:"Incident Type *"}),s.jsxs(st,{value:a.type,onValueChange:f=>h("type",f),children:[s.jsx(nt,{children:s.jsx(at,{placeholder:"Select type"})}),s.jsx(rt,{children:c.map(f=>s.jsx(xe,{value:f,children:f.replace("-"," ")},f))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"incident-severity",children:"Severity *"}),s.jsxs(st,{value:a.severity,onValueChange:f=>h("severity",f),children:[s.jsx(nt,{children:s.jsx(at,{placeholder:"Select severity"})}),s.jsx(rt,{children:d.map(f=>s.jsx(xe,{value:f,children:f},f))})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"incident-description",children:"Description *"}),s.jsx(_n,{id:"incident-description",value:a.description,onChange:f=>h("description",f.target.value),placeholder:"Describe what happened...",className:"min-h-[100px]"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"incident-witnesses",children:"Witnesses (optional)"}),s.jsx($e,{id:"incident-witnesses",value:a.witnesses,onChange:f=>h("witnesses",f.target.value),placeholder:"Names of any witnesses..."})]}),s.jsxs("div",{className:"p-3 bg-blue-50 rounded-lg border border-blue-200",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[s.jsx(Kf,{className:"h-4 w-4 text-blue-600"}),s.jsx("span",{className:"text-sm font-medium text-blue-800",children:"Location Tracking"})]}),s.jsx("p",{className:"text-xs text-blue-600",children:"Your current location will be automatically captured when you submit this report."})]}),s.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[s.jsx(se,{variant:"outline",onClick:t,disabled:o,children:"Cancel"}),s.jsxs(se,{type:"submit",disabled:o,children:[s.jsx(Qn,{className:"h-4 w-4 mr-2"}),o?"Reporting...":"Report Incident"]})]})]})})]})}):null},Ene=({employees:e})=>{const[t,n]=j.useState("clock"),[r,a]=j.useState(!1),{timeEntries:i,pieceRateEntries:o,loading:l,resetAllTimeAndPayrollData:c}=ep(),{jobs:d,resetAllJobLaborCosts:u}=rc();if(console.log("TimeClock component rendering with employees:",e),l)return s.jsxs("div",{className:"text-center py-16",children:[s.jsx(kn,{className:"h-16 w-16 mx-auto text-gray-400 mb-4 animate-pulse"}),s.jsx("p",{className:"text-gray-600 font-medium",children:"Loading time clock..."})]});const h=e.filter(g=>g.isActive),f=i.filter(g=>!g.clockOutTime).length,p=i.length+o.length,y=()=>{switch(t){case"clock":return s.jsx(RE,{employees:e});case"reports":return s.jsx(Dne,{employees:e});default:return s.jsx(RE,{employees:e})}};return s.jsxs("div",{className:"space-y-6",children:[s.jsx(Pt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:s.jsxs(Te,{className:"border-0 bg-gradient-to-r from-brandPrimary to-brandSecondary text-white shadow-2xl",children:[s.jsx(Xe,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"p-3 bg-white/20 rounded-xl",children:s.jsx(kn,{className:"h-8 w-8"})}),s.jsxs("div",{children:[s.jsx(Qe,{className:"text-3xl font-bold",children:"Time Clock System"}),s.jsx("p",{className:"text-white/80 mt-1",children:"Employee & Contractor Time Tracking"})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs(se,{onClick:()=>a(!0),variant:"ghost",className:"text-white hover:bg-white/20 border border-white/30",children:[s.jsx(co,{className:"h-4 w-4 mr-2"}),"Report Incident"]}),p>0&&s.jsxs(yr,{children:[s.jsx(br,{asChild:!0,children:s.jsxs(se,{variant:"ghost",className:"text-white hover:bg-white/20 border border-white/30",children:[s.jsx(Kt,{className:"h-4 w-4 mr-2"}),"Clear All Data"]})}),s.jsxs(er,{children:[s.jsxs(tr,{children:[s.jsx(rr,{children:"Clear All Time Entries?"}),s.jsx(sr,{children:"This will permanently delete all time entries, piece rate entries, payroll reports, job labor costs, and progress data. This action cannot be undone. Are you sure you want to start fresh?"})]}),s.jsxs(nr,{children:[s.jsx(ir,{children:"Cancel"}),s.jsx(ar,{onClick:()=>c(u),className:"bg-red-600 hover:bg-red-700",children:"Yes, Clear All Data"})]})]})]})]})]})}),s.jsxs(Me,{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(ss,{className:"h-5 w-5 text-white/70"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-white/70 text-sm",children:"Active Employees"}),s.jsx("p",{className:"font-semibold text-2xl",children:h.length})]})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Oo,{className:"h-5 w-5 text-white/70"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-white/70 text-sm",children:"Currently Working"}),s.jsx("p",{className:"font-semibold text-2xl",children:f})]})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(An,{className:"h-5 w-5 text-white/70"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-white/70 text-sm",children:"Total Entries"}),s.jsx("p",{className:"font-semibold text-2xl",children:p})]})]})]})]})}),s.jsxs("div",{className:"flex space-x-4 mb-6",children:[s.jsxs(se,{onClick:()=>n("clock"),variant:t==="clock"?"default":"outline",className:t==="clock"?"bg-gradient-to-r from-brandPrimary to-brandSecondary text-white":"",children:[s.jsx(kn,{className:"h-4 w-4 mr-2"}),"Clock In/Out"]}),s.jsxs(se,{onClick:()=>n("reports"),variant:t==="reports"?"default":"outline",className:t==="reports"?"bg-gradient-to-r from-brandPrimary to-brandSecondary text-white":"",children:[s.jsx(Jf,{className:"h-4 w-4 mr-2"}),"Time Reports"]})]}),y(),s.jsx(kne,{isOpen:r,onClose:()=>a(!1),employees:e,jobs:d})]})},Tne=({employees:e})=>{var D;console.log("PayrollReports component rendering");const[t,n]=j.useState(""),[r,a]=j.useState(""),[i,o]=j.useState(null),[l,c]=j.useState(!1),[d,u]=j.useState(null),{generatePayroll:h,payrollEntries:f,updatePayrollEntry:p}=ep();Q.useEffect(()=>{const N=new Date,M=new Date(N.setDate(N.getDate()-N.getDay())),L=new Date(N.setDate(N.getDate()-N.getDay()+6));n(M.toISOString().split("T")[0]),a(L.toISOString().split("T")[0])},[]),j.useEffect(()=>{console.log("generatedPayroll state updated:",i)},[i]),j.useEffect(()=>{l&&i&&(u(JSON.parse(JSON.stringify(i))),console.log("Initialized editedPayrollReport with a deep copy of generatedPayroll"))},[l,i]);const y=()=>{!t||!r||h(t,r,N=>{console.log("generatePayroll callback received data:",N),o(N)})},g=()=>{if(!d||!d.payrollData)return;const N=d.payrollData.reduce((O,W)=>O+W.perDiemTotal,0),M=d.payrollData.reduce((O,W)=>O+W.fuelAllowance,0),L=d.payrollData.reduce((O,W)=>O+W.toolDeductionsTotal,0),T=d.payrollData.reduce((O,W)=>O+(W.childSupportDeduction||0),0),E=d.payrollData.reduce((O,W)=>O+(W.miscDeduction||0),0),A={payrollData:d.payrollData,perDiemTotal:N,fuelAllowance:M,toolDeductionsTotal:L,childSupportDeductionTotal:T,miscDeductionTotal:E,updatedAt:new Date().toISOString()};console.log("Saving payroll edits:",A),p(d.id,A,()=>{o({...d,perDiemTotal:N,fuelAllowance:M,toolDeductionsTotal:L,childSupportDeductionTotal:T,miscDeductionTotal:E,updatedAt:new Date().toISOString()}),c(!1),u(null)})},x=l?d:i,m=(N,M,L)=>{if(console.log(`Updating ${M} for employee ${N} to ${L}`),!d||!d.payrollData)return;const T=parseFloat(L)||0;u(E=>{if(!E||!E.payrollData)return E;const A=E.payrollData.map(O=>{if(O.employeeId===N){const W={...O,[M]:T},z=W.basePay+W.pieceRateEarnings+W.perDiemTotal+W.fuelAllowance,F=W.toolDeductionsTotal+(W.childSupportDeduction||0)+(W.miscDeduction||0),V=z-F;return{...W,grossPay:z,netPay:V}}return O});return{...E,payrollData:A}})},v=(N,M)=>{console.log(`Updating misc deduction note for employee ${N} to "${M}"`),!(!d||!d.payrollData)&&u(L=>{if(!L||!L.payrollData)return L;const T=L.payrollData.map(E=>E.employeeId===N?{...E,miscDeductionNote:M}:E);return{...L,payrollData:T}})},b=N=>{if(!N||!N.payrollData){console.error("Cannot export CSV: Invalid payroll data");return}const M=["Employee Name","Employee Type","Pay Type","Regular Hours","Overtime Hours","Total Hours","Hourly Rate","Weekly Salary","Base Pay","Piece Rate Earnings","Per Diem Days","Per Diem Rate","Per Diem Total","Fuel Allowance","Tool Deductions","Child Support","Misc. Deduction","Misc. Note","Gross Pay","Net Pay","Banked Hours"],L=N.payrollData.map(W=>[W.employeeName,W.employeeType,W.payType,W.regularHours,W.overtimeHours,W.totalHours,W.hourlyRate,W.salaryAmount,W.basePay.toFixed(2),W.pieceRateEarnings.toFixed(2),W.perDiemDays,W.perDiemRate,W.perDiemTotal.toFixed(2),W.fuelAllowance.toFixed(2),W.toolDeductionsTotal.toFixed(2),(W.childSupportDeduction||0).toFixed(2),(W.miscDeduction||0).toFixed(2),W.miscDeductionNote||"",W.grossPay.toFixed(2),W.netPay.toFixed(2),W.bankedHours]),T=[M,...L].map(W=>W.map(z=>`"${z}"`).join(",")).join(`
`),E=new Blob([T],{type:"text/csv"}),A=window.URL.createObjectURL(E),O=document.createElement("a");O.href=A,O.download=`payroll_${t}_to_${r}.csv`,O.click(),window.URL.revokeObjectURL(A)},C=()=>{if(!x||!x.payrollData){console.error("Cannot generate PDF: Invalid payroll data");return}const N=new Ot,M=N.internal.pageSize.getWidth();N.setFontSize(20),N.setTextColor(207,83,62),N.text("HSH Drywall Management",M/2,20,{align:"center"}),N.setFontSize(16),N.setTextColor(0,0,0),N.text("Payroll Report",M/2,30,{align:"center"}),N.setFontSize(12),N.text(`Period: ${new Date(x.startDate).toLocaleDateString()} - ${new Date(x.endDate).toLocaleDateString()}`,M/2,40,{align:"center"}),N.setFontSize(14),N.text("Payroll Summary",14,55);const L=x.payrollData.reduce((Y,$)=>Y+$.grossPay,0),T=x.payrollData.reduce((Y,$)=>Y+$.netPay,0),E=x.payrollData.reduce((Y,$)=>Y+$.totalHours,0),A=x.payrollData.reduce((Y,$)=>Y+$.toolDeductionsTotal+($.childSupportDeduction||0)+($.miscDeduction||0),0);N.setFontSize(10),N.text(`Total Employees: ${x.payrollData.length}`,14,65),N.text(`Total Hours: ${E.toFixed(1)}`,14,72),N.text(`Total Gross Pay: $${L.toFixed(2)}`,14,79),N.text(`Total Deductions: $${A.toFixed(2)}`,14,86),N.text(`Total Net Pay: $${T.toFixed(2)}`,14,93),N.setFontSize(14),N.text("Employee Details",14,107);const O=["Employee","Type","Hours","Base","Piece Rate","Allowances","Deductions","Net Pay"],W=x.payrollData.map(Y=>{const $=Y.toolDeductionsTotal+(Y.childSupportDeduction||0)+(Y.miscDeduction||0);return[Y.employeeName,Y.payType==="salary"?"Salary":"Hourly",Y.totalHours.toFixed(1),`$${Y.basePay.toFixed(2)}`,`$${Y.pieceRateEarnings.toFixed(2)}`,`$${(Y.perDiemTotal+Y.fuelAllowance).toFixed(2)}`,`$${$.toFixed(2)}`,`$${Y.netPay.toFixed(2)}`]});N.autoTable({head:[O],body:W,startY:112,theme:"grid",headStyles:{fillColor:[207,83,62]},styles:{fontSize:9},columnStyles:{0:{cellWidth:40},7:{cellWidth:25,halign:"right",fontStyle:"bold"}}});const z=N.lastAutoTable.finalY+15;N.setFontSize(14),N.text("Deduction Details",14,z);const F=["Employee","Tool Deductions","Child Support","Misc. Deduction","Misc. Note"],V=x.payrollData.map(Y=>[Y.employeeName,`$${Y.toolDeductionsTotal.toFixed(2)}`,`$${(Y.childSupportDeduction||0).toFixed(2)}`,`$${(Y.miscDeduction||0).toFixed(2)}`,Y.miscDeductionNote||"-"]);N.autoTable({head:[F],body:V,startY:z+5,theme:"grid",headStyles:{fillColor:[92,140,235]},styles:{fontSize:9},columnStyles:{0:{cellWidth:40},4:{cellWidth:60}}});const B=N.lastAutoTable.finalY+20;N.setFontSize(10),N.text("Approved By: _______________________________",14,B),N.text("Date: _______________________________",14,B+10),N.setFontSize(8),N.setTextColor(100,100,100),N.text(`Generated on ${new Date().toLocaleDateString()} ${new Date().toLocaleTimeString()}`,M/2,N.internal.pageSize.getHeight()-10,{align:"center"}),N.save(`HSH_Payroll_${t}_to_${r}.pdf`)},S=j.useMemo(()=>{if(console.log("Computing payrollSummary with:",{isEditingReport:l,editedPayrollReport:d?"exists":"null",generatedPayroll:i?"exists":"null",currentPayrollReport:x?"exists":"null"}),!x)return console.log("No currentPayrollReport available, returning null"),null;if(!x.payrollData||!Array.isArray(x.payrollData))return console.log("currentPayrollReport.payrollData is not a valid array, returning null"),null;console.log("currentPayrollReport.payrollData length:",x.payrollData.length);const N=x.payrollData.reduce((F,V)=>F+(V.grossPay||0),0),M=x.payrollData.reduce((F,V)=>F+(V.netPay||0),0),L=x.payrollData.reduce((F,V)=>F+(V.toolDeductionsTotal||0),0),T=x.payrollData.reduce((F,V)=>F+(V.childSupportDeduction||0),0),E=x.payrollData.reduce((F,V)=>F+(V.miscDeduction||0),0),A=L+T+E,O=x.payrollData.reduce((F,V)=>F+(V.totalHours||0),0),W=x.payrollData.reduce((F,V)=>F+(V.pieceRateEarnings||0),0),z={totalGrossPay:N,totalNetPay:M,totalDeductions:A,totalToolDeductions:L,totalChildSupportDeductions:T,totalMiscDeductions:E,totalHours:O,totalPieceRate:W,employeeCount:x.payrollData.length};return console.log("Computed payrollSummary:",z),z},[x]),P=()=>(console.log("hasPayrollData check with currentPayrollReport:",x),x&&x.payrollData&&Array.isArray(x.payrollData));return s.jsxs("div",{className:"space-y-6",children:[s.jsxs(Te,{children:[s.jsx(Xe,{children:s.jsxs(Qe,{className:"flex items-center",children:[s.jsx(_r,{className:"h-5 w-5 mr-2"}),"Generate Payroll Report"]})}),s.jsx(Me,{children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{children:"Start Date"}),s.jsx($e,{type:"date",value:t,onChange:N=>n(N.target.value)})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{children:"End Date"}),s.jsx($e,{type:"date",value:r,onChange:N=>a(N.target.value)})]}),s.jsxs(se,{onClick:y,disabled:!t||!r,className:"bg-gradient-to-r from-brandPrimary to-brandSecondary text-white",children:[s.jsx(vs,{className:"h-4 w-4 mr-2"}),"Generate Payroll"]})]})})]}),S&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("h2",{className:"text-2xl font-bold",children:"Payroll Summary"}),s.jsx("div",{className:"flex space-x-2",children:l?s.jsxs(s.Fragment,{children:[s.jsxs(se,{onClick:()=>c(!1),variant:"outline",children:[s.jsx(rn,{className:"h-4 w-4 mr-2"}),"Cancel"]}),s.jsxs(se,{onClick:g,className:"bg-gradient-to-r from-brandPrimary to-brandSecondary text-white",children:[s.jsx(Qn,{className:"h-4 w-4 mr-2"}),"Save Changes"]})]}):s.jsxs(s.Fragment,{children:[s.jsxs(se,{onClick:()=>c(!0),variant:"outline",children:[s.jsx(Ai,{className:"h-4 w-4 mr-2"}),"Edit Report"]}),s.jsxs(se,{onClick:C,variant:"outline",children:[s.jsx(Ri,{className:"h-4 w-4 mr-2"}),"Download PDF"]}),s.jsxs(se,{onClick:()=>b(x),variant:"outline",children:[s.jsx(Ri,{className:"h-4 w-4 mr-2"}),"Export CSV"]})]})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-4",children:[s.jsx(Te,{children:s.jsx(Me,{className:"p-6",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(ss,{className:"h-5 w-5 text-brandSecondary"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Employees"}),s.jsx("p",{className:"text-2xl font-bold",children:S.employeeCount})]})]})})}),s.jsx(Te,{children:s.jsx(Me,{className:"p-6",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(kn,{className:"h-5 w-5 text-green-500"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Total Hours"}),s.jsx("p",{className:"text-2xl font-bold",children:S.totalHours.toFixed(1)})]})]})})}),s.jsx(Te,{children:s.jsx(Me,{className:"p-6",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(vs,{className:"h-5 w-5 text-brandPrimary"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Piece Rate"}),s.jsxs("p",{className:"text-2xl font-bold",children:["$",S.totalPieceRate.toFixed(0)]})]})]})})}),s.jsx(Te,{children:s.jsx(Me,{className:"p-6",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(jS,{className:"h-5 w-5 text-red-500"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Deductions"}),s.jsxs("p",{className:"text-2xl font-bold",children:["$",S.totalDeductions.toFixed(0)]})]})]})})}),s.jsx(Te,{children:s.jsx(Me,{className:"p-6",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(_r,{className:"h-5 w-5 text-green-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Gross Pay"}),s.jsxs("p",{className:"text-2xl font-bold",children:["$",S.totalGrossPay.toFixed(0)]})]})]})})}),s.jsx(Te,{children:s.jsx(Me,{className:"p-6",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(_r,{className:"h-5 w-5 text-brandPrimary"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Net Pay"}),s.jsxs("p",{className:"text-2xl font-bold",children:["$",S.totalNetPay.toFixed(0)]})]})]})})})]})]}),P()&&s.jsxs(Te,{children:[s.jsx(Xe,{children:s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs(Qe,{children:["Payroll Report: ",new Date(x.startDate).toLocaleDateString()," - ",new Date(x.endDate).toLocaleDateString()]})})}),s.jsx(Me,{children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs(Hr,{children:[s.jsx(qr,{children:s.jsxs(Jt,{children:[s.jsx(qe,{children:"Employee"}),s.jsx(qe,{children:"Type"}),s.jsx(qe,{children:"Pay Type"}),s.jsx(qe,{children:"Hours"}),s.jsx(qe,{children:"Base Pay"}),s.jsx(qe,{children:"Piece Rate"}),s.jsx(qe,{children:"Allowances"}),s.jsx(qe,{children:"Deductions"}),s.jsx(qe,{children:"Gross Pay"}),s.jsx(qe,{children:"Net Pay"}),s.jsx(qe,{children:"Banked"})]})}),s.jsx(Vr,{children:(D=x==null?void 0:x.payrollData)==null?void 0:D.map((N,M)=>s.jsxs(Pt.tr,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:M*.05},className:"hover:bg-gray-50",children:[s.jsx(ze,{children:s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:N.employeeName}),s.jsx(ht,{variant:"outline",className:"text-xs mt-1",children:N.employeeType})]})}),s.jsx(ze,{children:s.jsx(ht,{className:N.payType==="salary"?"bg-brandPrimary/10 text-brandPrimary":"bg-brandSecondary/10 text-brandSecondary",children:N.payType==="salary"?"Salary":"Hourly"})}),s.jsx(ze,{children:s.jsx("div",{className:"text-sm",children:N.payType==="salary"?s.jsxs("span",{className:"font-medium",children:["$",N.salaryAmount,"/week"]}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:["Reg: ",N.regularHours,"h"]}),N.overtimeHours>0&&s.jsxs("div",{className:"text-orange-600",children:["OT: ",N.overtimeHours,"h"]}),s.jsxs("div",{className:"text-xs text-gray-500",children:["@$",N.hourlyRate,"/hr"]})]})})}),s.jsx(ze,{children:s.jsxs("span",{className:"font-medium",children:[N.totalHours,"h"]})}),s.jsx(ze,{children:s.jsxs("span",{className:"font-bold",children:["$",N.basePay.toFixed(2)]})}),s.jsx(ze,{children:N.pieceRateEarnings>0?s.jsxs("span",{className:"font-bold text-brandPrimary",children:["$",N.pieceRateEarnings.toFixed(2)]}):s.jsx("span",{className:"text-gray-400",children:"-"})}),s.jsx(ze,{children:l?s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(de,{className:"text-xs w-16",children:"Per Diem:"}),s.jsx($e,{type:"number",value:N.perDiemTotal,onChange:L=>m(N.employeeId,"perDiemTotal",L.target.value),className:"h-7 text-sm"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(de,{className:"text-xs w-16",children:"Fuel:"}),s.jsx($e,{type:"number",value:N.fuelAllowance,onChange:L=>m(N.employeeId,"fuelAllowance",L.target.value),className:"h-7 text-sm"})]})]}):s.jsxs("div",{className:"text-sm",children:[N.perDiemTotal>0&&s.jsxs("div",{children:["Per Diem: $",N.perDiemTotal.toFixed(2)]}),N.fuelAllowance>0&&s.jsxs("div",{children:["Fuel: $",N.fuelAllowance.toFixed(2)]}),N.perDiemTotal===0&&N.fuelAllowance===0&&s.jsx("span",{className:"text-gray-400",children:"-"})]})}),s.jsx(ze,{children:l?s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(de,{className:"text-xs w-16",children:"Tools:"}),s.jsx($e,{type:"number",value:N.toolDeductionsTotal,onChange:L=>m(N.employeeId,"toolDeductionsTotal",L.target.value),className:"h-7 text-sm"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(de,{className:"text-xs w-16",children:"Child Supp:"}),s.jsx($e,{type:"number",value:N.childSupportDeduction||0,onChange:L=>m(N.employeeId,"childSupportDeduction",L.target.value),className:"h-7 text-sm"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(de,{className:"text-xs w-16",children:"Misc:"}),s.jsx($e,{type:"number",value:N.miscDeduction||0,onChange:L=>m(N.employeeId,"miscDeduction",L.target.value),className:"h-7 text-sm"})]}),(N.miscDeduction>0||N.miscDeductionNote)&&s.jsxs("div",{className:"flex items-start space-x-2",children:[s.jsx(de,{className:"text-xs w-16 pt-1",children:"Note:"}),s.jsx(_n,{value:N.miscDeductionNote||"",onChange:L=>v(N.employeeId,L.target.value),placeholder:"Explanation for misc deduction",className:"text-xs min-h-[60px]"})]})]}):s.jsxs("div",{className:"text-sm",children:[N.toolDeductionsTotal>0&&s.jsxs("div",{className:"text-red-600",children:["Tools: -$",N.toolDeductionsTotal.toFixed(2)]}),N.childSupportDeduction>0&&s.jsxs("div",{className:"text-red-600",children:["Child Support: -$",(N.childSupportDeduction||0).toFixed(2)]}),N.miscDeduction>0&&s.jsxs("div",{className:"text-red-600",children:["Misc: -$",(N.miscDeduction||0).toFixed(2),N.miscDeductionNote&&s.jsxs("span",{className:"text-xs ml-1 text-gray-500",children:["(",N.miscDeductionNote,")"]})]}),N.toolDeductionsTotal===0&&(N.childSupportDeduction||0)===0&&(N.miscDeduction||0)===0&&s.jsx("span",{className:"text-gray-400",children:"-"})]})}),s.jsx(ze,{children:s.jsxs("span",{className:"font-bold text-green-600",children:["$",N.grossPay.toFixed(2)]})}),s.jsx(ze,{children:s.jsxs("span",{className:"font-bold text-lg text-green-700",children:["$",N.netPay.toFixed(2)]})}),s.jsx(ze,{children:s.jsxs("span",{className:"text-sm",children:[N.bankedHours,"h"]})})]},N.employeeId))})]})})})]}),f&&f.length>0&&s.jsxs(Te,{children:[s.jsx(Xe,{children:s.jsxs(Qe,{className:"flex items-center",children:[s.jsx(tn,{className:"h-5 w-5 mr-2"}),"Previous Payroll Reports"]})}),s.jsx(Me,{children:s.jsx("div",{className:"space-y-3",children:f.slice().reverse().map(N=>s.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-gray-50",children:[s.jsxs("div",{children:[s.jsxs("p",{className:"font-medium",children:[new Date(N.startDate).toLocaleDateString()," - ",new Date(N.endDate).toLocaleDateString()]}),s.jsxs("p",{className:"text-sm text-gray-600",children:[N.payrollData&&N.payrollData.length," employees • Generated ",new Date(N.generatedDate).toLocaleDateString()]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(ht,{variant:"outline",children:N.status}),s.jsx(se,{variant:"outline",size:"sm",onClick:()=>{console.log("View Report button clicked for payroll:",N),o(N),console.log("After setGeneratedPayroll call, current value:",i)},children:"View Report"})]})]},N.id))})})]})]})},Ane=({employee:e,updateEmployee:t,addToolDeduction:n,removeToolDeduction:r,bankHours:a,useBankedHours:i,isOpen:o,onClose:l})=>{const[c,d]=j.useState({firstName:"",lastName:"",email:"",phone:"",employeeType:"",role:"",payType:"hourly",hourlyRate:"",salaryAmount:"",perDiem:"",fuelAllowance:"",isActive:!0}),[u,h]=j.useState({description:"",totalAmount:"",weeklyDeduction:""}),[f,p]=j.useState(""),[y,g]=j.useState("");j.useEffect(()=>{var S,P,D,N;e&&d({firstName:e.firstName||"",lastName:e.lastName||"",email:e.email||"",phone:e.phone||"",employeeType:e.employeeType||"",role:e.role||"",payType:e.payType||"hourly",hourlyRate:((S=e.hourlyRate)==null?void 0:S.toString())||"",salaryAmount:((P=e.salaryAmount)==null?void 0:P.toString())||"",perDiem:((D=e.perDiem)==null?void 0:D.toString())||"",fuelAllowance:((N=e.fuelAllowance)==null?void 0:N.toString())||"",isActive:e.isActive!==!1})},[e]);const x=S=>{if(S.preventDefault(),console.log("=== EDIT EMPLOYEE MODAL SUBMIT ==="),console.log("Employee ID:",e.id),console.log("Form Data (updates):",c),!c.firstName.trim()){pe({title:"Missing Information",description:"Please enter the employee's first name.",variant:"destructive"});return}if(!c.lastName.trim()){pe({title:"Missing Information",description:"Please enter the employee's last name.",variant:"destructive"});return}if(!c.employeeType){pe({title:"Missing Information",description:"Please select the employee type.",variant:"destructive"});return}if(!c.role){pe({title:"Missing Information",description:"Please select the employee role.",variant:"destructive"});return}if(c.payType==="hourly"&&(!c.hourlyRate||parseFloat(c.hourlyRate)<=0)){pe({title:"Invalid Rate",description:"Please enter a valid hourly rate.",variant:"destructive"});return}if(c.payType==="salary"&&(!c.salaryAmount||parseFloat(c.salaryAmount)<=0)){pe({title:"Invalid Salary",description:"Please enter a valid weekly salary amount.",variant:"destructive"});return}const P={...c,hourlyRate:c.payType==="hourly"?parseFloat(c.hourlyRate):0,salaryAmount:c.payType==="salary"?parseFloat(c.salaryAmount):0,perDiem:parseFloat(c.perDiem)||0,fuelAllowance:parseFloat(c.fuelAllowance)||0};console.log("Processed updates object:",P),console.log("About to call updateEmployee..."),t(e.id,P,()=>{console.log("updateEmployee callback executed - closing modal"),l()})},m=(S,P)=>{d(D=>({...D,[S]:P}))},v=()=>{if(!u.description.trim()){pe({title:"Missing Information",description:"Please enter a tool description.",variant:"destructive"});return}if(!u.totalAmount||parseFloat(u.totalAmount)<=0){pe({title:"Invalid Amount",description:"Please enter a valid total amount.",variant:"destructive"});return}if(!u.weeklyDeduction||parseFloat(u.weeklyDeduction)<=0){pe({title:"Invalid Deduction",description:"Please enter a valid weekly deduction amount.",variant:"destructive"});return}n(e.id,u,()=>{h({description:"",totalAmount:"",weeklyDeduction:""})})},b=()=>{if(!f||parseFloat(f)<=0){pe({title:"Invalid Hours",description:"Please enter valid hours to bank.",variant:"destructive"});return}a(e.id,f,()=>{p("")})},C=()=>{if(!y||parseFloat(y)<=0){pe({title:"Invalid Hours",description:"Please enter valid hours to use.",variant:"destructive"});return}i(e.id,y,()=>{g("")})};return e?s.jsx(Es,{children:o&&s.jsxs(Er,{open:o,onOpenChange:l,children:[s.jsx(Pt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-40",onClick:l}),s.jsx(pr,{className:"fixed z-50 top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-white p-0 shadow-2xl rounded-xl w-[90vw] max-w-4xl max-h-[90vh] flex flex-col",children:s.jsxs(Pt.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"h-full flex flex-col",children:[s.jsx(mr,{className:"p-6 border-b bg-gradient-to-r from-brandPrimary to-brandSecondary text-white rounded-t-lg",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(ss,{className:"h-6 w-6"}),s.jsxs(gr,{className:"text-2xl font-bold",children:["Edit Employee - ",e.firstName," ",e.lastName]})]})}),s.jsx("div",{className:"flex-1 overflow-y-auto",children:s.jsxs(uo,{defaultValue:"basic",className:"h-full",children:[s.jsxs(Oi,{className:"grid w-full grid-cols-4 m-6 mb-0",children:[s.jsx(Ht,{value:"basic",children:"Basic Info"}),s.jsx(Ht,{value:"pay",children:"Pay & Allowances"}),s.jsx(Ht,{value:"tools",children:"Tool Deductions"}),s.jsx(Ht,{value:"banking",children:"Hour Banking"})]}),s.jsx(en,{value:"basic",className:"p-6 pt-4",children:s.jsxs("form",{onSubmit:x,className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx(de,{htmlFor:"firstName",className:"text-sm font-semibold text-gray-700",children:"First Name *"}),s.jsx($e,{id:"firstName",value:c.firstName,onChange:S=>m("firstName",S.target.value),placeholder:"Enter first name",className:"border-2 focus:border-brandPrimary transition-colors"})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx(de,{htmlFor:"lastName",className:"text-sm font-semibold text-gray-700",children:"Last Name *"}),s.jsx($e,{id:"lastName",value:c.lastName,onChange:S=>m("lastName",S.target.value),placeholder:"Enter last name",className:"border-2 focus:border-brandPrimary transition-colors"})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx(de,{htmlFor:"email",className:"text-sm font-semibold text-gray-700",children:"Email"}),s.jsx($e,{id:"email",type:"email",value:c.email,onChange:S=>m("email",S.target.value),placeholder:"Enter email address",className:"border-2 focus:border-brandPrimary transition-colors"})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx(de,{htmlFor:"phone",className:"text-sm font-semibold text-gray-700",children:"Phone"}),s.jsx($e,{id:"phone",type:"tel",value:c.phone,onChange:S=>m("phone",S.target.value),placeholder:"Enter phone number",className:"border-2 focus:border-brandPrimary transition-colors"})]})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx(de,{className:"text-sm font-semibold text-gray-700",children:"Employee Type *"}),s.jsxs(st,{value:c.employeeType||"",onValueChange:S=>m("employeeType",S),children:[s.jsx(nt,{className:"border-2 focus:border-brandPrimary",children:s.jsx(at,{placeholder:"Select type"})}),s.jsxs(rt,{children:[s.jsx(xe,{value:"Employee",children:"Employee"}),s.jsx(xe,{value:"1099 Contractor",children:"1099 Contractor"})]})]})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx(de,{className:"text-sm font-semibold text-gray-700",children:"Role *"}),s.jsxs(st,{value:c.role||"",onValueChange:S=>m("role",S),children:[s.jsx(nt,{className:"border-2 focus:border-brandPrimary",children:s.jsx(at,{placeholder:"Select role"})}),s.jsxs(rt,{children:[s.jsx(xe,{value:"Admin",children:"Admin"}),s.jsx(xe,{value:"Project Manager",children:"Project Manager"}),s.jsx(xe,{value:"Foreman",children:"Foreman"}),s.jsx(xe,{value:"Hanger",children:"Hanger"}),s.jsx(xe,{value:"Finisher",children:"Finisher"}),s.jsx(xe,{value:"Laborer",children:"Laborer"})]})]})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx(de,{className:"text-sm font-semibold text-gray-700",children:"Status"}),s.jsxs(st,{value:c.isActive?"active":"inactive",onValueChange:S=>m("isActive",S==="active"),children:[s.jsx(nt,{className:"border-2 focus:border-brandPrimary",children:s.jsx(at,{})}),s.jsxs(rt,{children:[s.jsx(xe,{value:"active",children:"Active"}),s.jsx(xe,{value:"inactive",children:"Inactive"})]})]})]})]})]})}),s.jsx(en,{value:"pay",className:"p-6 pt-4",children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx(de,{className:"text-sm font-semibold text-gray-700",children:"Pay Type *"}),s.jsxs(st,{value:c.payType,onValueChange:S=>m("payType",S),children:[s.jsx(nt,{className:"border-2 focus:border-brandPrimary",children:s.jsx(at,{placeholder:"Select pay type"})}),s.jsxs(rt,{children:[s.jsx(xe,{value:"hourly",children:"Hourly"}),s.jsx(xe,{value:"salary",children:"Salary (Weekly)"})]})]})]}),c.payType==="hourly"&&s.jsxs("div",{className:"space-y-1",children:[s.jsx(de,{htmlFor:"hourlyRate",className:"text-sm font-semibold text-gray-700",children:"Hourly Rate *"}),s.jsx($e,{id:"hourlyRate",type:"number",step:"0.01",min:"0",value:c.hourlyRate,onChange:S=>m("hourlyRate",S.target.value),placeholder:"0.00",className:"border-2 focus:border-brandPrimary transition-colors"})]}),c.payType==="salary"&&s.jsxs("div",{className:"space-y-1",children:[s.jsx(de,{htmlFor:"salaryAmount",className:"text-sm font-semibold text-gray-700",children:"Weekly Salary Amount *"}),s.jsx($e,{id:"salaryAmount",type:"number",step:"0.01",min:"0",value:c.salaryAmount,onChange:S=>m("salaryAmount",S.target.value),placeholder:"2431.00",className:"border-2 focus:border-brandPrimary transition-colors"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx(de,{htmlFor:"perDiem",className:"text-sm font-semibold text-gray-700",children:"Per Diem (Daily)"}),s.jsx($e,{id:"perDiem",type:"number",step:"0.01",min:"0",value:c.perDiem,onChange:S=>m("perDiem",S.target.value),placeholder:"0.00",className:"border-2 focus:border-brandPrimary transition-colors"})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx(de,{htmlFor:"fuelAllowance",className:"text-sm font-semibold text-gray-700",children:"Fuel Allowance (Weekly)"}),s.jsx($e,{id:"fuelAllowance",type:"number",step:"0.01",min:"0",value:c.fuelAllowance,onChange:S=>m("fuelAllowance",S.target.value),placeholder:"0.00",className:"border-2 focus:border-brandPrimary transition-colors"})]})]})]})}),s.jsx(en,{value:"tools",className:"p-6 pt-4",children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs(Te,{children:[s.jsx(Xe,{children:s.jsxs(Qe,{className:"flex items-center",children:[s.jsx(jS,{className:"h-5 w-5 mr-2"}),"Add New Tool Deduction"]})}),s.jsxs(Me,{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx(de,{children:"Tool Description"}),s.jsx($e,{value:u.description,onChange:S=>h(P=>({...P,description:S.target.value})),placeholder:"e.g., Drywall Lift, Screw Gun",className:"border-2 focus:border-brandPrimary"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx(de,{children:"Total Amount"}),s.jsx($e,{type:"number",step:"0.01",min:"0",value:u.totalAmount,onChange:S=>h(P=>({...P,totalAmount:S.target.value})),placeholder:"1000.00",className:"border-2 focus:border-brandPrimary"})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx(de,{children:"Weekly Deduction"}),s.jsx($e,{type:"number",step:"0.01",min:"0",value:u.weeklyDeduction,onChange:S=>h(P=>({...P,weeklyDeduction:S.target.value})),placeholder:"100.00",className:"border-2 focus:border-brandPrimary"})]})]}),s.jsxs(se,{onClick:v,className:"w-full",children:[s.jsx(un,{className:"h-4 w-4 mr-2"}),"Add Tool Deduction"]})]})]}),s.jsxs(Te,{children:[s.jsx(Xe,{children:s.jsx(Qe,{children:"Current Tool Deductions"})}),s.jsx(Me,{children:(e.toolDeductions||[]).length===0?s.jsx("p",{className:"text-gray-500 text-center py-4",children:"No tool deductions"}):s.jsx("div",{className:"space-y-3",children:e.toolDeductions.map(S=>s.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:S.description}),s.jsxs("p",{className:"text-sm text-gray-600",children:["$",S.weeklyDeduction,"/week • $",S.remainingBalance," remaining"]})]}),s.jsx(se,{variant:"destructive",size:"sm",onClick:()=>r(e.id,S.id),children:s.jsx(Kt,{className:"h-4 w-4"})})]},S.id))})})]})]})}),s.jsx(en,{value:"banking",className:"p-6 pt-4",children:s.jsx("div",{className:"space-y-6",children:s.jsxs(Te,{children:[s.jsx(Xe,{children:s.jsxs(Qe,{className:"flex items-center",children:[s.jsx(kn,{className:"h-5 w-5 mr-2"}),"Current Banked Hours: ",e.bankedHours||0," hours"]})}),s.jsxs(Me,{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsx("h4",{className:"font-semibold text-brandPrimary",children:"Bank Hours"}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{children:"Hours to Bank"}),s.jsx($e,{type:"number",step:"0.5",min:"0",value:f,onChange:S=>p(S.target.value),placeholder:"8.0",className:"border-2 focus:border-brandPrimary"})]}),s.jsxs(se,{onClick:b,className:"w-full",children:[s.jsx(_r,{className:"h-4 w-4 mr-2"}),"Bank Hours"]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h4",{className:"font-semibold text-brandSecondary",children:"Use Banked Hours"}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{children:"Hours to Use"}),s.jsx($e,{type:"number",step:"0.5",min:"0",max:e.bankedHours||0,value:y,onChange:S=>g(S.target.value),placeholder:"8.0",className:"border-2 focus:border-brandSecondary"})]}),s.jsxs(se,{onClick:C,className:"w-full bg-brandSecondary hover:bg-brandSecondary/90",children:[s.jsx(kn,{className:"h-4 w-4 mr-2"}),"Use Banked Hours"]})]})]}),s.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg border border-blue-200",children:[s.jsx("h5",{className:"font-semibold text-blue-800 mb-2",children:"How Hour Banking Works"}),s.jsxs("ul",{className:"text-sm text-blue-700 space-y-1",children:[s.jsx("li",{children:"• Bank hours when an employee works overtime but wants to save some for later"}),s.jsx("li",{children:"• Use banked hours for paid time off or when they want to cash out"}),s.jsx("li",{children:"• Banked hours are paid at the employee's current rate when used"}),s.jsx("li",{children:"• Example: Work 60 hours, get paid for 40, bank 20 for later use"})]})]})]})]})})})]})}),s.jsxs(Tr,{className:"p-6 border-t bg-gray-50 rounded-b-lg",children:[s.jsxs(se,{type:"button",variant:"outline",onClick:l,className:"hover:bg-gray-100",children:[s.jsx(rn,{className:"h-4 w-4 mr-2"})," Close"]}),s.jsxs(se,{onClick:x,className:"bg-gradient-to-r from-brandPrimary to-brandSecondary text-white hover:opacity-90",children:[s.jsx(Qn,{className:"h-4 w-4 mr-2"})," Save Changes"]})]})]})})]})}):null},_ne=({employee:e,documents:t=[],onUploadDocument:n,onDeleteDocument:r,onClose:a})=>{const[i,o]=j.useState(!1),l=j.useRef(null),{toast:c}=S1(),d=async u=>{const h=Array.from(u.target.files);if(h.length!==0){o(!0);try{for(const f of h){if(f.size>10*1024*1024){c({title:"File Too Large",description:`${f.name} is larger than 10MB. Please choose a smaller file.`,variant:"destructive"});continue}const p={id:Date.now().toString(36)+Math.random().toString(36).substr(2),name:f.name,type:f.type,size:f.size,uploadedAt:new Date().toISOString(),category:"Other",file:f};await n(e.id,p)}c({title:"Documents Uploaded! 📄",description:`Successfully uploaded ${h.length} document(s) for ${e.firstName} ${e.lastName}.`}),l.current&&(l.current.value="")}catch{c({title:"Upload Failed",description:"There was an error uploading the documents. Please try again.",variant:"destructive"})}finally{o(!1)}}};return s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[80vh] overflow-hidden",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:s.jsx(tn,{className:"h-6 w-6 text-blue-600"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Employee Documents"}),s.jsxs("p",{className:"text-gray-600",children:[e.firstName," ",e.lastName]})]})]}),s.jsx(se,{variant:"ghost",size:"icon",onClick:a,className:"text-gray-500 hover:text-gray-700",children:s.jsx(rn,{className:"h-5 w-5"})})]}),s.jsx("div",{className:"p-6 border-b bg-gray-50",children:s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs(se,{onClick:()=>{var u;return(u=l.current)==null?void 0:u.click()},disabled:i,className:"bg-blue-600 hover:bg-blue-700",children:[s.jsx(Gl,{className:"h-4 w-4 mr-2"}),i?"Uploading...":"Upload Documents"]}),s.jsx("input",{ref:l,type:"file",multiple:!0,onChange:d,className:"hidden",accept:".pdf,.doc,.docx,.jpg,.jpeg,.png,.gif,.txt,.zip,.rar"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Supported formats: PDF, DOC, DOCX, JPG, PNG, GIF, TXT, ZIP, RAR (Max 10MB each)"})]})}),s.jsx("div",{className:"p-6",children:t.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(tn,{className:"h-12 w-12 mx-auto text-gray-400 mb-4"}),s.jsx("p",{className:"text-gray-600 font-medium",children:"No documents uploaded yet"}),s.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"Upload onboarding paperwork, tax forms, licenses, and other important documents"})]}):s.jsx("div",{className:"space-y-3",children:t.map(u=>s.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 border rounded-lg",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(tn,{className:"h-5 w-5 text-blue-500"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-900",children:u.name}),s.jsxs("p",{className:"text-sm text-gray-500",children:[(u.size/1024/1024).toFixed(2)," MB • ",new Date(u.uploadedAt).toLocaleDateString()]})]})]}),s.jsx(se,{variant:"ghost",size:"sm",onClick:()=>r(e.id,u.id),className:"text-red-600 hover:bg-red-100",children:"Delete"})]},u.id))})})]})})},Mne=({employees:e,updateEmployee:t,deleteEmployee:n,addToolDeduction:r,removeToolDeduction:a,bankHours:i,useBankedHours:o,addEmployeeDocument:l,removeEmployeeDocument:c})=>{const[d,u]=j.useState(null),[h,f]=j.useState(null);j.useEffect(()=>{if(h){const P=e.find(D=>D.id===h.id);P&&f(P)}},[e,h]);const{getEmployeeActiveEntry:p,getEmployeeActivePieceRateEntry:y,getTotalHoursForEmployee:g,getTotalEarningsForEmployee:x}=ep(),m=P=>{n(P)},v=P=>{switch(P){case"Employee":return"bg-brandSecondary/10 text-brandSecondary";case"1099 Contractor":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},b=P=>{switch(P){case"Hanger":return"bg-brandPrimary/10 text-brandPrimary";case"Finisher":return"bg-purple-100 text-purple-800";case"Laborer":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},C=P=>{switch(P){case"salary":return"bg-green-100 text-green-800";case"hourly":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}},S=P=>new Date(P).toLocaleDateString();return e.length===0?s.jsx(Te,{children:s.jsxs(Me,{className:"text-center py-12",children:[s.jsx(ss,{className:"h-12 w-12 mx-auto text-gray-400 mb-4"}),s.jsx("p",{className:"text-gray-600 font-medium",children:"No employees added yet"}),s.jsx("p",{className:"text-gray-500 text-sm mt-1",children:'Click "Add Employee" to get started'})]})}):s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map((P,D)=>{const N=p(P.id),M=y(P.id),L=!!(N||M),T=g(P.id),E=x(P.id);return s.jsx(Pt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:D*.1},children:s.jsxs(Te,{className:`hover:shadow-lg transition-all duration-300 ${L?"border-l-4 border-l-green-500":"border-l-4 border-l-gray-300"}`,children:[s.jsx(Xe,{className:"pb-3",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:`p-2 rounded-lg ${L?"bg-green-100":"bg-gray-100"}`,children:s.jsx(ss,{className:`h-5 w-5 ${L?"text-green-600":"text-gray-600"}`})}),s.jsxs("div",{children:[s.jsxs(Qe,{className:"text-lg font-bold text-gray-900",children:[P.firstName," ",P.lastName]}),s.jsxs("div",{className:"flex items-center space-x-2 mt-1 flex-wrap gap-1",children:[s.jsx(ht,{className:v(P.employeeType),children:P.employeeType}),s.jsx(ht,{className:b(P.role),children:P.role}),s.jsx(ht,{className:C(P.payType),children:P.payType==="salary"?"Salary":"Hourly"}),L&&s.jsxs(ht,{className:"bg-green-100 text-green-800",children:[s.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse mr-1"}),N?"Hourly":"Piece Rate"]})]})]})]}),s.jsxs("div",{className:"flex space-x-1",children:[s.jsxs(se,{variant:"default",size:"sm",onClick:()=>f(P),className:"bg-blue-500 hover:bg-blue-600 text-white",title:"View Documents",children:[s.jsx(tn,{className:"h-4 w-4 mr-1"}),"Docs"]}),s.jsx(se,{variant:"ghost",size:"icon",onClick:()=>u(P),className:"text-brandSecondary hover:bg-brandSecondary/10",children:s.jsx(Ai,{className:"h-4 w-4"})}),s.jsxs(yr,{children:[s.jsx(br,{asChild:!0,children:s.jsx(se,{variant:"ghost",size:"icon",className:"text-red-600 hover:bg-red-100",children:s.jsx(Kt,{className:"h-4 w-4"})})}),s.jsxs(er,{children:[s.jsxs(tr,{children:[s.jsx(rr,{children:"Delete Employee"}),s.jsxs(sr,{children:["Are you sure you want to delete ",P.firstName," ",P.lastName,"? This action cannot be undone and will remove all associated time entries."]})]}),s.jsxs(nr,{children:[s.jsx(ir,{children:"Cancel"}),s.jsx(ar,{onClick:()=>m(P.id),className:"bg-red-600 hover:bg-red-700",children:"Delete Employee"})]})]})]})]})]})}),s.jsxs(Me,{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[s.jsx(_r,{className:"h-4 w-4 text-green-500"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-600",children:P.payType==="salary"?"Weekly Salary":"Hourly Rate"}),s.jsx("p",{className:"font-semibold",children:P.payType==="salary"?`$${P.salaryAmount}`:`$${P.hourlyRate}`})]})]}),s.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[s.jsx(kn,{className:"h-4 w-4 text-brandSecondary"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-600",children:"Total Hours"}),s.jsxs("p",{className:"font-semibold",children:[T.toFixed(1),"h"]})]})]})]}),P.role!=="Laborer"&&E>0&&s.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[s.jsx(vs,{className:"h-4 w-4 text-brandPrimary"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-600",children:"Piece Rate Earnings"}),s.jsxs("p",{className:"font-semibold text-green-600",children:["$",E.toFixed(2)]})]})]}),(P.bankedHours||0)>0&&s.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[s.jsx(_V,{className:"h-4 w-4 text-purple-500"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-600",children:"Banked Hours"}),s.jsxs("p",{className:"font-semibold text-purple-600",children:[P.bankedHours," hours"]})]})]}),((P.perDiem||0)>0||(P.fuelAllowance||0)>0)&&s.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(P.perDiem||0)>0&&s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-600",children:"Per Diem"}),s.jsxs("p",{className:"font-medium",children:["$",P.perDiem,"/day"]})]}),(P.fuelAllowance||0)>0&&s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-600",children:"Fuel Allowance"}),s.jsxs("p",{className:"font-medium",children:["$",P.fuelAllowance,"/week"]})]})]}),(P.toolDeductions||[]).length>0&&s.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[s.jsx(jS,{className:"h-4 w-4 text-red-500"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-600",children:"Tool Deductions"}),s.jsxs("p",{className:"font-medium text-red-600",children:[P.toolDeductions.length," active",P.toolDeductions.length>0&&s.jsxs("span",{className:"ml-1",children:["($",P.toolDeductions.reduce((A,O)=>A+(O.weeklyDeduction||0),0),"/week)"]})]})]})]}),P.email&&s.jsxs("div",{className:"text-sm",children:[s.jsx("p",{className:"text-gray-600",children:"Email"}),s.jsx("p",{className:"font-medium",children:P.email})]}),P.phone&&s.jsxs("div",{className:"text-sm",children:[s.jsx("p",{className:"text-gray-600",children:"Phone"}),s.jsx("p",{className:"font-medium",children:P.phone})]}),s.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(An,{className:"h-3 w-3"}),s.jsxs("span",{children:["Added ",S(P.createdAt)]})]}),(P.documents||[]).length>0&&s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(tn,{className:"h-3 w-3"}),s.jsxs("span",{children:[P.documents.length," document",(P.documents||[]).length!==1?"s":""]})]})]})]})]})},P.id)})}),d&&s.jsx(Ane,{employee:d,updateEmployee:t,addToolDeduction:r,removeToolDeduction:a,bankHours:i,useBankedHours:o,isOpen:!!d,onClose:()=>u(null)}),h&&s.jsx(_ne,{employee:h,documents:h.documents||[],onUploadDocument:l,onDeleteDocument:c,onClose:()=>f(null)})]})},Rne=({addEmployee:e,onSubmit:t,onCancel:n})=>{const[r,a]=j.useState({firstName:"",lastName:"",email:"",phone:"",employeeType:"",role:"",payType:"hourly",hourlyRate:"",salaryAmount:"",perDiem:"",fuelAllowance:""}),i=l=>{if(l.preventDefault(),!r.firstName.trim()){pe({title:"Missing Information",description:"Please enter the employee's first name.",variant:"destructive"});return}if(!r.lastName.trim()){pe({title:"Missing Information",description:"Please enter the employee's last name.",variant:"destructive"});return}if(!r.employeeType){pe({title:"Missing Information",description:"Please select the employee type.",variant:"destructive"});return}if(!r.role){pe({title:"Missing Information",description:"Please select the employee role.",variant:"destructive"});return}if(!r.payType){pe({title:"Missing Information",description:"Please select the pay type.",variant:"destructive"});return}if(r.payType==="hourly"&&(!r.hourlyRate||parseFloat(r.hourlyRate)<=0)){pe({title:"Invalid Rate",description:"Please enter a valid hourly rate.",variant:"destructive"});return}if(r.payType==="salary"&&(!r.salaryAmount||parseFloat(r.salaryAmount)<=0)){pe({title:"Invalid Salary",description:"Please enter a valid weekly salary amount.",variant:"destructive"});return}const c={...r,hourlyRate:r.payType==="hourly"?parseFloat(r.hourlyRate):0,salaryAmount:r.payType==="salary"?parseFloat(r.salaryAmount):0,perDiem:parseFloat(r.perDiem)||0,fuelAllowance:parseFloat(r.fuelAllowance)||0};console.log("About to add employee with data:",c),e(c,()=>{console.log("Employee added successfully, calling onSubmit callback"),t&&t()})},o=(l,c)=>{a(d=>({...d,[l]:c}))};return s.jsx(Es,{children:s.jsxs(Er,{open:!0,onOpenChange:n,children:[s.jsx(Pt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-40",onClick:n}),s.jsx(pr,{className:"fixed z-50 top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-white p-0 shadow-2xl rounded-xl w-[90vw] max-w-2xl flex flex-col max-h-[90vh] overflow-y-auto",children:s.jsxs(Pt.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"h-full flex flex-col",children:[s.jsx(mr,{className:"p-6 border-b bg-gradient-to-r from-brandPrimary to-brandSecondary text-white rounded-t-lg",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(ss,{className:"h-6 w-6"}),s.jsx(gr,{className:"text-2xl font-bold",children:"Add New Employee"})]})}),s.jsxs("form",{onSubmit:i,children:[s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-700 border-b pb-2",children:"Basic Information"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx(de,{htmlFor:"firstName",className:"text-sm font-semibold text-gray-700",children:"First Name *"}),s.jsx($e,{id:"firstName",value:r.firstName,onChange:l=>o("firstName",l.target.value),placeholder:"Enter first name",className:"border-2 focus:border-brandPrimary transition-colors"})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx(de,{htmlFor:"lastName",className:"text-sm font-semibold text-gray-700",children:"Last Name *"}),s.jsx($e,{id:"lastName",value:r.lastName,onChange:l=>o("lastName",l.target.value),placeholder:"Enter last name",className:"border-2 focus:border-brandPrimary transition-colors"})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx(de,{htmlFor:"email",className:"text-sm font-semibold text-gray-700",children:"Email"}),s.jsx($e,{id:"email",type:"email",value:r.email,onChange:l=>o("email",l.target.value),placeholder:"Enter email address",className:"border-2 focus:border-brandPrimary transition-colors"})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx(de,{htmlFor:"phone",className:"text-sm font-semibold text-gray-700",children:"Phone"}),s.jsx($e,{id:"phone",type:"tel",value:r.phone,onChange:l=>o("phone",l.target.value),placeholder:"Enter phone number",className:"border-2 focus:border-brandPrimary transition-colors"})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx(de,{className:"text-sm font-semibold text-gray-700",children:"Employee Type *"}),s.jsxs(st,{value:r.employeeType,onValueChange:l=>o("employeeType",l),children:[s.jsx(nt,{className:"border-2 focus:border-brandPrimary",children:s.jsx(at,{placeholder:"Select type"})}),s.jsxs(rt,{children:[s.jsx(xe,{value:"Employee",children:"Employee"}),s.jsx(xe,{value:"1099 Contractor",children:"1099 Contractor"})]})]})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx(de,{className:"text-sm font-semibold text-gray-700",children:"Role *"}),s.jsxs(st,{value:r.role,onValueChange:l=>o("role",l),children:[s.jsx(nt,{className:"border-2 focus:border-brandPrimary",children:s.jsx(at,{placeholder:"Select role"})}),s.jsxs(rt,{children:[s.jsx(xe,{value:"Admin",children:"Admin"}),s.jsx(xe,{value:"Project Manager",children:"Project Manager"}),s.jsx(xe,{value:"Foreman",children:"Foreman"}),s.jsx(xe,{value:"Hanger",children:"Hanger"}),s.jsx(xe,{value:"Finisher",children:"Finisher"}),s.jsx(xe,{value:"Laborer",children:"Laborer"})]})]})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-700 border-b pb-2",children:"Pay Information"}),s.jsxs("div",{className:"space-y-1",children:[s.jsx(de,{className:"text-sm font-semibold text-gray-700",children:"Pay Type *"}),s.jsxs(st,{value:r.payType,onValueChange:l=>o("payType",l),children:[s.jsx(nt,{className:"border-2 focus:border-brandPrimary",children:s.jsx(at,{placeholder:"Select pay type"})}),s.jsxs(rt,{children:[s.jsx(xe,{value:"hourly",children:"Hourly"}),s.jsx(xe,{value:"salary",children:"Salary (Weekly)"})]})]})]}),r.payType==="hourly"&&s.jsxs("div",{className:"space-y-1",children:[s.jsx(de,{htmlFor:"hourlyRate",className:"text-sm font-semibold text-gray-700",children:"Hourly Rate *"}),s.jsx($e,{id:"hourlyRate",type:"number",step:"0.01",min:"0",value:r.hourlyRate,onChange:l=>o("hourlyRate",l.target.value),placeholder:"0.00",className:"border-2 focus:border-brandPrimary transition-colors"})]}),r.payType==="salary"&&s.jsxs("div",{className:"space-y-1",children:[s.jsx(de,{htmlFor:"salaryAmount",className:"text-sm font-semibold text-gray-700",children:"Weekly Salary Amount *"}),s.jsx($e,{id:"salaryAmount",type:"number",step:"0.01",min:"0",value:r.salaryAmount,onChange:l=>o("salaryAmount",l.target.value),placeholder:"2431.00",className:"border-2 focus:border-brandPrimary transition-colors"})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-700 border-b pb-2",children:"Allowances"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx(de,{htmlFor:"perDiem",className:"text-sm font-semibold text-gray-700",children:"Per Diem (Daily)"}),s.jsx($e,{id:"perDiem",type:"number",step:"0.01",min:"0",value:r.perDiem,onChange:l=>o("perDiem",l.target.value),placeholder:"0.00",className:"border-2 focus:border-brandPrimary transition-colors"})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx(de,{htmlFor:"fuelAllowance",className:"text-sm font-semibold text-gray-700",children:"Fuel Allowance (Weekly)"}),s.jsx($e,{id:"fuelAllowance",type:"number",step:"0.01",min:"0",value:r.fuelAllowance,onChange:l=>o("fuelAllowance",l.target.value),placeholder:"0.00",className:"border-2 focus:border-brandPrimary transition-colors"})]})]})]}),r.role==="Laborer"&&s.jsx("div",{className:"p-3 bg-yellow-50 rounded-lg border border-yellow-200",children:s.jsxs("p",{className:"text-sm text-yellow-800",children:[s.jsx("strong",{children:"Note:"})," Laborers can only work hourly time and cannot use piece rate."]})})]}),s.jsxs(Tr,{className:"p-6 border-t bg-gray-50 rounded-b-lg",children:[s.jsxs(se,{type:"button",variant:"outline",onClick:n,className:"hover:bg-gray-100",children:[s.jsx(rn,{className:"h-4 w-4 mr-2"})," Cancel"]}),s.jsxs(se,{type:"submit",className:"bg-gradient-to-r from-brandPrimary to-brandSecondary text-white hover:opacity-90",children:[s.jsx(Qn,{className:"h-4 w-4 mr-2"})," Add Employee"]})]})]})]})})]})})},Lne=({employees:e,addEmployee:t,updateEmployee:n,deleteEmployee:r,addToolDeduction:a,removeToolDeduction:i,bankHours:o,useBankedHours:l,updateEmployeeToolDeductions:c,addEmployeeDocument:d,removeEmployeeDocument:u})=>{const[h,f]=j.useState("employees"),[p,y]=j.useState(!1);return console.log("PayrollDashboard rendering with employees:",e),s.jsxs("div",{className:"space-y-6",children:[s.jsx(Pt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:s.jsxs(Te,{className:"border-0 bg-gradient-to-r from-brandPrimary to-brandSecondary text-white shadow-2xl",children:[s.jsx(Xe,{children:s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"p-3 bg-white/20 rounded-xl",children:s.jsx(_r,{className:"h-8 w-8"})}),s.jsxs("div",{children:[s.jsx(Qe,{className:"text-3xl font-bold",children:"Payroll Management"}),s.jsx("p",{className:"text-white/80 mt-1",children:"Employee & Contractor Payroll Processing"})]})]})})}),s.jsxs(Me,{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(vr,{className:"h-5 w-5 text-white/70"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-white/70 text-sm",children:"Total Employees"}),s.jsx("p",{className:"font-semibold text-2xl",children:e.length})]})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(_r,{className:"h-5 w-5 text-white/70"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-white/70 text-sm",children:"Active Employees"}),s.jsx("p",{className:"font-semibold text-2xl",children:e.filter(g=>g.isActive).length})]})]})]})]})}),s.jsxs("div",{className:"flex space-x-4 mb-6",children:[s.jsxs(se,{onClick:()=>f("employees"),variant:h==="employees"?"default":"outline",className:h==="employees"?"bg-gradient-to-r from-brandPrimary to-brandSecondary text-white":"",children:[s.jsx(vr,{className:"h-4 w-4 mr-2"}),"Employees"]}),s.jsxs(se,{onClick:()=>f("payroll"),variant:h==="payroll"?"default":"outline",className:h==="payroll"?"bg-gradient-to-r from-brandPrimary to-brandSecondary text-white":"",children:[s.jsx(_r,{className:"h-4 w-4 mr-2"}),"Payroll Reports"]})]}),h==="employees"?s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Employee Management"}),s.jsxs(se,{onClick:()=>y(!0),className:"bg-gradient-to-r from-brandPrimary to-brandSecondary hover:from-brandPrimary-600 hover:to-brandSecondary-600 text-white font-semibold",children:[s.jsx(un,{className:"h-4 w-4 mr-2"}),"Add Employee"]})]}),s.jsx(Mne,{employees:e,updateEmployee:n,deleteEmployee:r,addToolDeduction:a,removeToolDeduction:i,bankHours:o,useBankedHours:l,addEmployeeDocument:d,removeEmployeeDocument:u})]}):s.jsx(Tne,{employees:e}),p&&s.jsx(Rne,{addEmployee:t,onSubmit:()=>{console.log("AddEmployeeForm onSubmit callback triggered in PayrollDashboard"),y(!1)},onCancel:()=>{console.log("AddEmployeeForm onCancel callback triggered in PayrollDashboard"),y(!1)}})]})},LE="hsh_drywall_schedules",Ine=(e,t)=>{try{localStorage.setItem(e,JSON.stringify(t))}catch(n){console.error("Failed to save to localStorage:",n)}},One=(e,t=null)=>{try{const n=localStorage.getItem(e);return n?JSON.parse(n):t}catch(n){return console.error("Failed to load from localStorage:",n),t}},Fne=()=>Date.now().toString(36)+Math.random().toString(36).substr(2),IE=(e,t)=>{if(!e||!t)return[];const n=[],r=[e],a=new Set;for(;r.length>0;){const i=r.shift();if(a.has(i))continue;a.add(i);const o=t.filter(l=>l.predecessorId===i);n.push(...o),r.push(...o.map(l=>l.id))}return n},$ne=(e,t,n)=>{if(!e||!t||!n)return!1;if(e===t)return!0;const r=new Set,a=[t];for(;a.length>0;){const i=a.shift();if(r.has(i))continue;r.add(i);const o=n.find(l=>l.id===i);if(o&&o.predecessorId){if(o.predecessorId===e)return!0;a.push(o.predecessorId)}}return!1},IO=j.createContext();function Bne({children:e}){const[t,n]=j.useState([]),[r,a]=j.useState(!0);j.useEffect(()=>{const v=One(LE,[]);n(v),a(!1)},[]),j.useEffect(()=>{r||Ine(LE,t)},[t,r]);const i=j.useCallback((v,b,C,S=null)=>{const P=[];return t.forEach(D=>{if(!(S&&D.id===S)&&v.some(N=>D.employeeIds.includes(N))){const N=l(D.startDate),M=l(D.endDate),L=new Date(b),T=new Date(C);(L>=N&&L<M||T>N&&T<=M||L<=N&&T>=M)&&P.push({employeeId:D.employeeIds.find(E=>v.includes(E)),conflictingSchedule:D})}}),P},[t]),o=j.useCallback((v,b)=>{try{if(v.employeeIds&&v.employeeIds.length>0){const S=i(v.employeeIds,v.startDate,v.endDate);if(S.length>0)return pe({title:"Scheduling Conflict",description:"One or more employees already have assignments during this time period.",variant:"destructive"}),{success:!1,conflicts:S}}const C={id:Fne(),...v,predecessorId:v.predecessorId||null,predecessorLag:v.predecessorLag||0,duration:v.duration||1,useDuration:v.useDuration||!1,status:v.status||"scheduled",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return n(S=>[...S,C]),pe({title:"Schedule Created! 📅",description:`New schedule for "${v.title}" has been created.`}),b&&b(C),{success:!0,schedule:C}}catch(C){return console.error("Error creating schedule:",C),pe({title:"Error",description:"Failed to create schedule. Please try again.",variant:"destructive"}),{success:!1,error:C.message}}},[i]),l=v=>{if(typeof v=="string"){const[b,C,S]=v.split("-").map(Number);return new Date(b,C-1,S)}return new Date(v)},c=v=>{if(v instanceof Date){const b=v.getFullYear(),C=String(v.getMonth()+1).padStart(2,"0"),S=String(v.getDate()).padStart(2,"0");return`${b}-${C}-${S}`}return v},d=j.useCallback((v,b,C)=>{n(S=>{const P=IE(v,S);if(P.length===0)return S;const D=S.find(W=>W.id===v);if(!D)return S;const N=l(D.startDate),M=l(D.endDate),L=l(b),T=l(C),E=Math.floor((L-N)/(1e3*60*60*24)),A=Math.floor((T-M)/(1e3*60*60*24)),O=S.map(W=>{if(P.some(z=>z.id===W.id))if(W.predecessorId===v){const z=W.predecessorLag||0,[F,V,B]=C.split("-").map(Number),Y=new Date(F,V-1,B,12,0,0,0),$=new Date(Y);$.setDate($.getDate()+z+1);let I;if(W.useDuration&&W.duration)I=new Date($),I.setDate(I.getDate()+W.duration-1);else{const U=Math.floor((l(W.endDate)-l(W.startDate))/864e5)+1;I=new Date($),I.setDate(I.getDate()+U-1)}return{...W,startDate:c($),endDate:c(I),updatedAt:new Date().toISOString()}}else{const z=l(W.startDate),F=l(W.endDate),V=new Date(z);V.setDate(V.getDate()+E);const B=new Date(F);return B.setDate(B.getDate()+A),{...W,startDate:c(V),endDate:c(B),updatedAt:new Date().toISOString()}}return W});return P.length>0&&pe({title:"Dependent Schedules Updated! 🔗",description:`${P.length} dependent schedule${P.length>1?"s":""} have been automatically adjusted.`}),O})},[]),u=j.useCallback((v,b,C)=>{try{const S=t.find(P=>P.id===v);if(!S)return pe({title:"Error",description:"Schedule not found.",variant:"destructive"}),{success:!1};if(b.startDate&&b.startDate!==S.startDate||b.endDate&&b.endDate!==S.endDate||b.employeeIds&&JSON.stringify(b.employeeIds)!==JSON.stringify(S.employeeIds)){const P=i(b.employeeIds||S.employeeIds,b.startDate||S.startDate,b.endDate||S.endDate,v);if(P.length>0)return pe({title:"Scheduling Conflict",description:"One or more employees already have assignments during this time period.",variant:"destructive"}),{success:!1,conflicts:P}}return n(P=>P.map(D=>D.id===v?{...D,...b,updatedAt:new Date().toISOString()}:D)),(b.startDate&&b.startDate!==S.startDate||b.endDate&&b.endDate!==S.endDate)&&d(v,b.startDate||S.startDate,b.endDate||S.endDate),pe({title:"Schedule Updated! ✅",description:"Schedule has been updated successfully."}),C&&C(v,b),{success:!0}}catch(S){return console.error("Error updating schedule:",S),pe({title:"Error",description:"Failed to update schedule. Please try again.",variant:"destructive"}),{success:!1,error:S.message}}},[t,i,d]),h=j.useCallback((v,b)=>(n(C=>C.filter(S=>S.id!==v)),pe({title:"Schedule Deleted! 🗑️",description:"The schedule has been removed.",variant:"destructive"}),b&&b(v),{success:!0}),[]),f=j.useCallback(v=>t.filter(b=>b.jobId===v),[t]),p=j.useCallback(v=>t.filter(b=>b.employeeIds.includes(v)),[t]),y=j.useCallback((v,b)=>{const C=new Date(v),S=new Date(b);return t.filter(P=>{const D=l(P.startDate),N=l(P.endDate);return D>=C&&D<=S||N>=C&&N<=S||D<=C&&N>=S})},[t]),g=j.useCallback(v=>{const b=new Date(v);return t.filter(C=>{const S=l(C.startDate),P=l(C.endDate);return Mf(b,{start:S,end:P})||_f(b,S)||_f(b,P)})},[t]),x=j.useCallback((v=[],b=[])=>t.map(C=>{const S=v.find(L=>L.id===C.jobId)||{},D=C.employeeIds.map(L=>b.find(T=>T.id===L)).filter(Boolean).map(L=>`${L.firstName} ${L.lastName}`).join(", ");let N;switch(C.status){case"completed":N="#22c55e";break;case"in-progress":N="#eab308";break;case"cancelled":N="#ef4444";break;default:N="#5c8ceb"}const M=L=>{if(typeof L=="string"){const[T,E,A]=L.split("-").map(Number);return new Date(T,E-1,A,12,0,0,0)}return new Date(L)};return{id:C.id,title:C.title,start:M(C.startDate),end:M(C.endDate),allDay:!0,jobName:S.jobName||"Unknown Job",jobId:C.jobId,employeeIds:C.employeeIds,employeeNames:D,notes:C.notes,status:C.status,predecessorId:C.predecessorId,backgroundColor:N,borderColor:N}}),[t]),m={schedules:t,loading:r,createSchedule:o,updateSchedule:u,deleteSchedule:h,getJobSchedules:f,getEmployeeSchedules:p,getSchedulesInDateRange:y,getSchedulesForDay:g,getCalendarEvents:x,checkForConflicts:i,updateDependentSchedules:d,getDependentSchedules:v=>IE(v,t),hasCircularDependency:(v,b)=>$ne(v,b,t)};return s.jsx(IO.Provider,{value:m,children:e})}function nv(){return j.useContext(IO)}function zne(e,t){if(on(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(on(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function OO(e){var t=zne(e,"string");return on(t)=="symbol"?t:t+""}function Hc(e,t,n){return(t=OO(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Wne=Object.freeze(Object.defineProperty({__proto__:null,default:Hc},Symbol.toStringTag,{value:"Module"}));function OE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function In(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?OE(Object(n),!0).forEach(function(r){Hc(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):OE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function O1(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function nl(e,t){if(e==null)return{};var n,r,a=O1(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function as(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function FE(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,OO(r.key),r)}}function is(e,t,n){return t&&FE(e.prototype,t),n&&FE(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Dy(e){return Dy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Dy(e)}function FO(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(FO=function(){return!!e})()}function Hne(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function qne(e,t){if(t&&(on(t)=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Hne(e)}function ta(e,t,n){return t=Dy(t),qne(e,FO()?Reflect.construct(t,n||[],Dy(e).constructor):t.apply(e,n))}function ky(e,t){return ky=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},ky(e,t)}function na(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ky(e,t)}function $O(e){if(Array.isArray(e))return e}function Vne(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,a,i,o,l=[],c=!0,d=!1;try{if(i=(n=n.call(e)).next,t===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw a}}return l}}function AN(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function cC(e,t){if(e){if(typeof e=="string")return AN(e,t);var n={}.toString.call(e).slice(8,-1);return n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set"?Array.from(e):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?AN(e,t):void 0}}function BO(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ou(e,t){return $O(e)||Vne(e,t)||cC(e,t)||BO()}function zO(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=zO(e[t]))&&(r&&(r+=" "),r+=n);else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}function lr(){for(var e,t,n=0,r="";n<arguments.length;)(e=arguments[n++])&&(t=zO(e))&&(r&&(r+=" "),r+=t);return r}const Une=Object.freeze(Object.defineProperty({__proto__:null,clsx:lr,default:lr},Symbol.toStringTag,{value:"Module"}));var Yne=function(e,t,n,r,a,i,o,l){if(!e){var c;if(t===void 0)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var d=[n,r,a,i,o,l],u=0;c=new Error(t.replace(/%s/g,function(){return d[u++]})),c.name="Invariant Violation"}throw c.framesToPop=1,c}},Gne=Yne;const wg=qa(Gne);var Jne=function(){};function Kne(e,t){var n={};return Object.keys(e).forEach(function(r){n[S0(r)]=Jne}),n}function $E(e,t){return e[t]!==void 0}function S0(e){return"default"+e.charAt(0).toUpperCase()+e.substr(1)}function Xne(e){return!!e&&(typeof e!="function"||e.prototype&&e.prototype.isReactComponent)}function Qne(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,ky(e,t)}function WO(){var e=this.constructor.getDerivedStateFromProps(this.props,this.state);e!=null&&this.setState(e)}function HO(e){function t(n){var r=this.constructor.getDerivedStateFromProps(e,n);return r??null}this.setState(t.bind(this))}function qO(e,t){try{var n=this.props,r=this.state;this.props=e,this.state=t,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(n,r)}finally{this.props=n,this.state=r}}WO.__suppressDeprecationWarning=!0;HO.__suppressDeprecationWarning=!0;qO.__suppressDeprecationWarning=!0;function Zne(e){var t=e.prototype;if(!t||!t.isReactComponent)throw new Error("Can only polyfill class components");if(typeof e.getDerivedStateFromProps!="function"&&typeof t.getSnapshotBeforeUpdate!="function")return e;var n=null,r=null,a=null;if(typeof t.componentWillMount=="function"?n="componentWillMount":typeof t.UNSAFE_componentWillMount=="function"&&(n="UNSAFE_componentWillMount"),typeof t.componentWillReceiveProps=="function"?r="componentWillReceiveProps":typeof t.UNSAFE_componentWillReceiveProps=="function"&&(r="UNSAFE_componentWillReceiveProps"),typeof t.componentWillUpdate=="function"?a="componentWillUpdate":typeof t.UNSAFE_componentWillUpdate=="function"&&(a="UNSAFE_componentWillUpdate"),n!==null||r!==null||a!==null){var i=e.displayName||e.name,o=typeof e.getDerivedStateFromProps=="function"?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error(`Unsafe legacy lifecycles will not be called for components using new component APIs.

`+i+" uses "+o+" but also contains the following legacy lifecycles:"+(n!==null?`
  `+n:"")+(r!==null?`
  `+r:"")+(a!==null?`
  `+a:"")+`

The above lifecycles should be removed. Learn more about this warning here:
https://fb.me/react-async-component-lifecycle-hooks`)}if(typeof e.getDerivedStateFromProps=="function"&&(t.componentWillMount=WO,t.componentWillReceiveProps=HO),typeof t.getSnapshotBeforeUpdate=="function"){if(typeof t.componentDidUpdate!="function")throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");t.componentWillUpdate=qO;var l=t.componentDidUpdate;t.componentDidUpdate=function(d,u,h){var f=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:h;l.call(this,d,u,f)}}return e}var ere="/Users/jquense/src/uncontrollable/src/uncontrollable.js";function VO(e,t,n){n===void 0&&(n=[]);var r=e.displayName||e.name||"Component",a=Xne(e),i=Object.keys(t),o=i.map(S0);a||!n.length||wg(!1);var l=function(d){Qne(u,d);function u(){for(var f,p=arguments.length,y=new Array(p),g=0;g<p;g++)y[g]=arguments[g];f=d.call.apply(d,[this].concat(y))||this,f.handlers=Object.create(null),i.forEach(function(m){var v=t[m],b=function(S){if(f.props[v]){var P;f._notifying=!0;for(var D=arguments.length,N=new Array(D>1?D-1:0),M=1;M<D;M++)N[M-1]=arguments[M];(P=f.props)[v].apply(P,[S].concat(N)),f._notifying=!1}f.unmounted||f.setState(function(L){var T,E=L.values;return{values:St(Object.create(null),E,(T={},T[m]=S,T))}})};f.handlers[v]=b}),n.length&&(f.attachRef=function(m){f.inner=m});var x=Object.create(null);return i.forEach(function(m){x[m]=f.props[S0(m)]}),f.state={values:x,prevProps:{}},f}var h=u.prototype;return h.shouldComponentUpdate=function(){return!this._notifying},u.getDerivedStateFromProps=function(p,y){var g=y.values,x=y.prevProps,m={values:St(Object.create(null),g),prevProps:{}};return i.forEach(function(v){m.prevProps[v]=p[v],!$E(p,v)&&$E(x,v)&&(m.values[v]=p[S0(v)])}),m},h.componentWillUnmount=function(){this.unmounted=!0},h.render=function(){var p=this,y=this.props,g=y.innerRef,x=O1(y,["innerRef"]);o.forEach(function(v){delete x[v]});var m={};return i.forEach(function(v){var b=p.props[v];m[v]=b!==void 0?b:p.state.values[v]}),Q.createElement(e,St({},x,m,this.handlers,{ref:g||this.attachRef}))},u}(Q.Component);Zne(l),l.displayName="Uncontrolled("+r+")",l.propTypes=St({innerRef:function(){}},Kne(t)),n.forEach(function(d){l.prototype[d]=function(){var h;return(h=this.inner)[d].apply(h,arguments)}});var c=l;return Q.forwardRef&&(c=Q.forwardRef(function(d,u){return Q.createElement(l,St({},d,{innerRef:u,__source:{fileName:ere,lineNumber:128},__self:this}))}),c.propTypes=l.propTypes),c.ControlledComponent=e,c.deferControlTo=function(d,u,h){return u===void 0&&(u={}),VO(d,St({},t,u),h)},c}var UO={exports:{}},tre="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",nre=tre,rre=nre;function YO(){}function GO(){}GO.resetWarningCache=YO;var sre=function(){function e(r,a,i,o,l,c){if(c!==rre){var d=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw d.name="Invariant Violation",d}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:GO,resetWarningCache:YO};return n.PropTypes=n,n};UO.exports=sre();var dC=UO.exports;const ut=qa(dC);var Ey="milliseconds",jg="seconds",Ng="minutes",Sg="hours",Fu="day",Ff="week",Cg="month",$u="year",Bu="decade",zu="century",JO={milliseconds:1,seconds:1e3,minutes:60*1e3,hours:60*60*1e3,day:24*60*60*1e3,week:7*24*60*60*1e3},are={month:1,year:12,decade:10*12,century:100*12};function ire(e){return[31,ore(e),31,30,31,30,31,31,30,31,30,31]}function ore(e){return e%4===0&&e%100!==0||e%400===0?29:28}function po(e,t,n){switch(e=new Date(e),n){case Ey:case jg:case Ng:case Sg:case Fu:case Ff:return lre(e,t*JO[n]);case Cg:case $u:case Bu:case zu:return cre(e,t*are[n])}throw new TypeError('Invalid units: "'+n+'"')}function lre(e,t){var n=new Date(+e+t);return dre(e,n)}function cre(e,t){var n=e.getFullYear(),r=e.getMonth(),a=e.getDate(),i=n*12+r+t,o=Math.trunc(i/12),l=i%12,c=Math.min(a,ire(o)[l]),d=new Date(e);return d.setFullYear(o),d.setDate(1),d.setMonth(l),d.setDate(c),d}function dre(e,t){var n=e.getTimezoneOffset(),r=t.getTimezoneOffset(),a=r-n;return new Date(+t+a*JO.minutes)}function Pg(e,t,n){return po(e,-t,n)}function Ts(e,t,n){switch(e=new Date(e),t){case zu:case Bu:case $u:e=Ay(e,0);case Cg:e=eF(e,1);case Ff:case Fu:e=Eg(e,0);case Sg:e=$f(e,0);case Ng:e=kg(e,0);case jg:e=Dg(e,0)}return t===Bu&&(e=Pg(e,Wu(e)%10,"year")),t===zu&&(e=Pg(e,Wu(e)%100,"year")),t===Ff&&(e=tF(e,0,n)),e}function Ty(e,t,n){switch(e=new Date(e),e=Ts(e,t,n),t){case zu:case Bu:case $u:case Cg:case Ff:e=po(e,1,t),e=Pg(e,1,Fu),e.setHours(23,59,59,999);break;case Fu:e.setHours(23,59,59,999);break;case Sg:case Ng:case jg:e=po(e,1,t),e=Pg(e,1,Ey)}return e}var tp=rp(function(e,t){return e===t}),uC=rp(function(e,t){return e!==t}),F1=rp(function(e,t){return e>t}),rv=rp(function(e,t){return e>=t}),hC=rp(function(e,t){return e<t}),np=rp(function(e,t){return e<=t});function KO(){return new Date(Math.min.apply(Math,arguments))}function XO(){return new Date(Math.max.apply(Math,arguments))}function QO(e,t,n,r){return r=r||"day",(!t||rv(e,t,r))&&(!n||np(e,n,r))}var Dg=Pd("Milliseconds"),kg=Pd("Seconds"),$f=Pd("Minutes"),Eg=Pd("Hours"),ZO=Pd("Day"),eF=Pd("Date"),Ay=Pd("Month"),Wu=Pd("FullYear");function ure(e,t){return t===void 0?Wu(Ts(e,Bu)):po(e,t+10,$u)}function hre(e,t){return t===void 0?Wu(Ts(e,zu)):po(e,t+100,$u)}function tF(e,t,n){var r=(ZO(e)+7-(n||0))%7;return t===void 0?r:po(e,t-r,Fu)}function fre(e,t,n,r){var a,i,o;switch(n){case Ey:case jg:case Ng:case Sg:case Fu:case Ff:a=t.getTime()-e.getTime();break;case Cg:case $u:case Bu:case zu:a=(Wu(t)-Wu(e))*12+Ay(t)-Ay(e);break;default:throw new TypeError('Invalid units: "'+n+'"')}switch(n){case Ey:i=1;break;case jg:i=1e3;break;case Ng:i=1e3*60;break;case Sg:i=1e3*60*60;break;case Fu:i=1e3*60*60*24;break;case Ff:i=1e3*60*60*24*7;break;case Cg:i=1;break;case $u:i=12;break;case Bu:i=120;break;case zu:i=1200;break;default:throw new TypeError('Invalid units: "'+n+'"')}return o=a/i,r?o:Math.round(o)}function Pd(e){var t=function(n){switch(n){case"Milliseconds":return 36e5;case"Seconds":return 3600;case"Minutes":return 60;case"Hours":return 1;default:return null}}(e);return function(n,r){if(r===void 0)return n["get"+e]();var a=new Date(n);return a["set"+e](r),t&&a["get"+e]()!=r&&(e==="Hours"||r>=t&&a.getHours()-n.getHours()<Math.floor(r/t))&&a["set"+e](r+t),a}}function rp(e){return function(t,n,r){return e(+Ts(t,r),+Ts(n,r))}}const BE=Object.freeze(Object.defineProperty({__proto__:null,add:po,century:hre,date:eF,day:ZO,decade:ure,diff:fre,endOf:Ty,eq:tp,gt:F1,gte:rv,hours:Eg,inRange:QO,lt:hC,lte:np,max:XO,milliseconds:Dg,min:KO,minutes:$f,month:Ay,neq:uC,seconds:kg,startOf:Ts,subtract:Pg,weekday:tF,year:Wu},Symbol.toStringTag,{value:"Module"}));function pre(e){if(Array.isArray(e))return AN(e)}function nF(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function mre(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function C0(e){return pre(e)||nF(e)||cC(e)||mre()}function gre(e,t,n){var r=-1,a=e.length;t<0&&(t=-t>a?0:a+t),n=n>a?a:n,n<0&&(n+=a),a=t>n?0:n-t>>>0,t>>>=0;for(var i=Array(a);++r<a;)i[r]=e[r+t];return i}var rF=gre;function vre(e,t){return e===t||e!==e&&t!==t}var sv=vre,xre=typeof pa=="object"&&pa&&pa.Object===Object&&pa,sF=xre,yre=sF,bre=typeof self=="object"&&self&&self.Object===Object&&self,wre=yre||bre||Function("return this")(),il=wre,jre=il,Nre=jre.Symbol,sp=Nre,zE=sp,aF=Object.prototype,Sre=aF.hasOwnProperty,Cre=aF.toString,am=zE?zE.toStringTag:void 0;function Pre(e){var t=Sre.call(e,am),n=e[am];try{e[am]=void 0;var r=!0}catch{}var a=Cre.call(e);return r&&(t?e[am]=n:delete e[am]),a}var Dre=Pre,kre=Object.prototype,Ere=kre.toString;function Tre(e){return Ere.call(e)}var Are=Tre,WE=sp,_re=Dre,Mre=Are,Rre="[object Null]",Lre="[object Undefined]",HE=WE?WE.toStringTag:void 0;function Ire(e){return e==null?e===void 0?Lre:Rre:HE&&HE in Object(e)?_re(e):Mre(e)}var ap=Ire;function Ore(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var ac=Ore,Fre=ap,$re=ac,Bre="[object AsyncFunction]",zre="[object Function]",Wre="[object GeneratorFunction]",Hre="[object Proxy]";function qre(e){if(!$re(e))return!1;var t=Fre(e);return t==zre||t==Wre||t==Bre||t==Hre}var fC=qre,Vre=9007199254740991;function Ure(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Vre}var pC=Ure,Yre=fC,Gre=pC;function Jre(e){return e!=null&&Gre(e.length)&&!Yre(e)}var av=Jre,Kre=9007199254740991,Xre=/^(?:0|[1-9]\d*)$/;function Qre(e,t){var n=typeof e;return t=t??Kre,!!t&&(n=="number"||n!="symbol"&&Xre.test(e))&&e>-1&&e%1==0&&e<t}var mC=Qre,Zre=sv,ese=av,tse=mC,nse=ac;function rse(e,t,n){if(!nse(n))return!1;var r=typeof t;return(r=="number"?ese(n)&&tse(t,n.length):r=="string"&&t in n)?Zre(n[t],e):!1}var $1=rse,sse=/\s/;function ase(e){for(var t=e.length;t--&&sse.test(e.charAt(t)););return t}var ise=ase,ose=ise,lse=/^\s+/;function cse(e){return e&&e.slice(0,ose(e)+1).replace(lse,"")}var dse=cse;function use(e){return e!=null&&typeof e=="object"}var Dd=use,hse=ap,fse=Dd,pse="[object Symbol]";function mse(e){return typeof e=="symbol"||fse(e)&&hse(e)==pse}var iv=mse,gse=dse,qE=ac,vse=iv,VE=0/0,xse=/^[-+]0x[0-9a-f]+$/i,yse=/^0b[01]+$/i,bse=/^0o[0-7]+$/i,wse=parseInt;function jse(e){if(typeof e=="number")return e;if(vse(e))return VE;if(qE(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=qE(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=gse(e);var n=yse.test(e);return n||bse.test(e)?wse(e.slice(2),n?2:8):xse.test(e)?VE:+e}var Nse=jse,Sse=Nse,UE=1/0,Cse=17976931348623157e292;function Pse(e){if(!e)return e===0?e:0;if(e=Sse(e),e===UE||e===-UE){var t=e<0?-1:1;return t*Cse}return e===e?e:0}var iF=Pse,Dse=iF;function kse(e){var t=Dse(e),n=t%1;return t===t?n?t-n:t:0}var oF=kse,Ese=rF,Tse=$1,Ase=oF,_se=Math.ceil,Mse=Math.max;function Rse(e,t,n){(n?Tse(e,t,n):t===void 0)?t=1:t=Mse(Ase(t),0);var r=e==null?0:e.length;if(!r||t<1)return[];for(var a=0,i=0,o=Array(_se(r/t));a<r;)o[i++]=Ese(e,a,a+=t);return o}var Lse=Rse;const Ise=qa(Lse);function kd(e){return e&&e.ownerDocument||document}function gC(e){var t=kd(e);return t&&t.defaultView||window}function vC(e,t){return gC(e).getComputedStyle(e,t)}var Ose=/([A-Z])/g;function lF(e){return e.replace(Ose,"-$1").toLowerCase()}var Fse=/^ms-/;function $x(e){return lF(e).replace(Fse,"-ms-")}var $se=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;function cF(e){return!!(e&&$se.test(e))}function Ps(e,t){var n="",r="";if(typeof t=="string")return e.style.getPropertyValue($x(t))||vC(e).getPropertyValue($x(t));Object.keys(t).forEach(function(a){var i=t[a];!i&&i!==0?e.style.removeProperty($x(a)):cF(a)?r+=a+"("+i+") ":n+=$x(a)+": "+i+";"}),r&&(n+="transform: "+r+";"),e.style.cssText+=";"+n}function Zl(e,t){if(e.contains)return e.contains(t);if(e.compareDocumentPosition)return e===t||!!(e.compareDocumentPosition(t)&16)}const Bse=Object.freeze(Object.defineProperty({__proto__:null,default:Zl},Symbol.toStringTag,{value:"Module"}));function dF(e){return"nodeType"in e&&e.nodeType===document.DOCUMENT_NODE}function B1(e){return"window"in e&&e.window===e?e:dF(e)&&e.defaultView||!1}function uF(e){var t=e==="pageXOffset"?"scrollLeft":"scrollTop";function n(r,a){var i=B1(r);if(a===void 0)return i?i[e]:r[t];i?i.scrollTo(i[e],a):r[t]=a}return n}const z1=uF("pageXOffset"),Bf=uF("pageYOffset");function oo(e){var t=kd(e),n={top:0,left:0,height:0,width:0},r=t&&t.documentElement;return!r||!Zl(r,e)||(e.getBoundingClientRect!==void 0&&(n=e.getBoundingClientRect()),n={top:n.top+Bf(r)-(r.clientTop||0),left:n.left+z1(r)-(r.clientLeft||0),width:n.width,height:n.height}),n}var zse=function(t){return!!t&&"offsetParent"in t};function xC(e){for(var t=kd(e),n=e&&e.offsetParent;zse(n)&&n.nodeName!=="HTML"&&Ps(n,"position")==="static";)n=n.offsetParent;return n||t.documentElement}var Wse=function(t){return t.nodeName&&t.nodeName.toLowerCase()};function W1(e,t){var n={top:0,left:0},r;if(Ps(e,"position")==="fixed")r=e.getBoundingClientRect();else{var a=t||xC(e);r=oo(e),Wse(a)!=="html"&&(n=oo(a));var i=String(Ps(a,"borderTopWidth")||0);n.top+=parseInt(i,10)-Bf(a)||0;var o=String(Ps(a,"borderLeftWidth")||0);n.left+=parseInt(o,10)-z1(a)||0}var l=String(Ps(e,"marginTop")||0),c=String(Ps(e,"marginLeft")||0);return St({},r,{top:r.top-n.top-(parseInt(l,10)||0),left:r.left-n.left-(parseInt(c,10)||0)})}const yC=!!(typeof window<"u"&&window.document&&window.document.createElement);var YE=new Date().getTime();function Hse(e){var t=new Date().getTime(),n=Math.max(0,16-(t-YE)),r=setTimeout(e,n);return YE=t,r}var qse=["","webkit","moz","o","ms"],_N="clearTimeout",MN=Hse,GE=function(t,n){return t+(t?n[0].toUpperCase()+n.substr(1):n)+"AnimationFrame"};yC&&qse.some(function(e){var t=GE(e,"request");return t in window&&(_N=GE(e,"cancel"),MN=function(r){return window[t](r)}),!!MN});var Tg=function(t){typeof window[_N]=="function"&&window[_N](t)},ov=MN,m2;function H1(e,t){if(!m2){var n=document.body,r=n.matches||n.matchesSelector||n.webkitMatchesSelector||n.mozMatchesSelector||n.msMatchesSelector;m2=function(i,o){return r.call(i,o)}}return m2(e,t)}var Vse=Function.prototype.bind.call(Function.prototype.call,[].slice);function q1(e,t){return Vse(e.querySelectorAll(t))}var RN=!1,LN=!1;try{var g2={get passive(){return RN=!0},get once(){return LN=RN=!0}};yC&&(window.addEventListener("test",g2,g2),window.removeEventListener("test",g2,!0))}catch{}function bC(e,t,n,r){if(r&&typeof r!="boolean"&&!LN){var a=r.once,i=r.capture,o=n;!LN&&a&&(o=n.__once||function l(c){this.removeEventListener(t,l,i),n.call(this,c)},n.__once=o),e.addEventListener(t,o,RN?r:i)}e.addEventListener(t,n,r)}function Use(e){const t=j.useRef(e);return j.useEffect(()=>{t.current=e},[e]),t}function JE(e){const t=Use(e);return j.useCallback(function(...n){return t.current&&t.current(...n)},[t])}function KE(){return j.useState(null)}function Yse(){const e=j.useRef(!0),t=j.useRef(()=>e.current);return j.useEffect(()=>(e.current=!0,()=>{e.current=!1}),[]),t.current}function Gse(e){const t=Yse();return[e[0],j.useCallback(n=>{if(t())return e[1](n)},[t,e[1]])]}var Ba="top",$i="bottom",Bi="right",za="left",wC="auto",lv=[Ba,$i,Bi,za],zf="start",Ag="end",Jse="clippingParents",hF="viewport",im="popper",Kse="reference",XE=lv.reduce(function(e,t){return e.concat([t+"-"+zf,t+"-"+Ag])},[]),jC=[].concat(lv,[wC]).reduce(function(e,t){return e.concat([t,t+"-"+zf,t+"-"+Ag])},[]),Xse="beforeRead",Qse="read",Zse="afterRead",eae="beforeMain",tae="main",nae="afterMain",rae="beforeWrite",sae="write",aae="afterWrite",iae=[Xse,Qse,Zse,eae,tae,nae,rae,sae,aae];function Xo(e){return e.split("-")[0]}function di(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function Hu(e){var t=di(e).Element;return e instanceof t||e instanceof Element}function Qo(e){var t=di(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function NC(e){if(typeof ShadowRoot>"u")return!1;var t=di(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}var Nu=Math.max,_y=Math.min,Wf=Math.round;function IN(){var e=navigator.userAgentData;return e!=null&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function fF(){return!/^((?!chrome|android).)*safari/i.test(IN())}function Hf(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!1);var r=e.getBoundingClientRect(),a=1,i=1;t&&Qo(e)&&(a=e.offsetWidth>0&&Wf(r.width)/e.offsetWidth||1,i=e.offsetHeight>0&&Wf(r.height)/e.offsetHeight||1);var o=Hu(e)?di(e):window,l=o.visualViewport,c=!fF()&&n,d=(r.left+(c&&l?l.offsetLeft:0))/a,u=(r.top+(c&&l?l.offsetTop:0))/i,h=r.width/a,f=r.height/i;return{width:h,height:f,top:u,right:d+h,bottom:u+f,left:d,x:d,y:u}}function SC(e){var t=Hf(e),n=e.offsetWidth,r=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-r)<=1&&(r=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:r}}function pF(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&NC(n)){var r=t;do{if(r&&e.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function vd(e){return e?(e.nodeName||"").toLowerCase():null}function ec(e){return di(e).getComputedStyle(e)}function oae(e){return["table","td","th"].indexOf(vd(e))>=0}function Ed(e){return((Hu(e)?e.ownerDocument:e.document)||window.document).documentElement}function V1(e){return vd(e)==="html"?e:e.assignedSlot||e.parentNode||(NC(e)?e.host:null)||Ed(e)}function QE(e){return!Qo(e)||ec(e).position==="fixed"?null:e.offsetParent}function lae(e){var t=/firefox/i.test(IN()),n=/Trident/i.test(IN());if(n&&Qo(e)){var r=ec(e);if(r.position==="fixed")return null}var a=V1(e);for(NC(a)&&(a=a.host);Qo(a)&&["html","body"].indexOf(vd(a))<0;){var i=ec(a);if(i.transform!=="none"||i.perspective!=="none"||i.contain==="paint"||["transform","perspective"].indexOf(i.willChange)!==-1||t&&i.willChange==="filter"||t&&i.filter&&i.filter!=="none")return a;a=a.parentNode}return null}function cv(e){for(var t=di(e),n=QE(e);n&&oae(n)&&ec(n).position==="static";)n=QE(n);return n&&(vd(n)==="html"||vd(n)==="body"&&ec(n).position==="static")?t:n||lae(e)||t}function CC(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function Hm(e,t,n){return Nu(e,_y(t,n))}function cae(e,t,n){var r=Hm(e,t,n);return r>n?n:r}function mF(){return{top:0,right:0,bottom:0,left:0}}function gF(e){return Object.assign({},mF(),e)}function vF(e,t){return t.reduce(function(n,r){return n[r]=e,n},{})}var dae=function(t,n){return t=typeof t=="function"?t(Object.assign({},n.rects,{placement:n.placement})):t,gF(typeof t!="number"?t:vF(t,lv))};function uae(e){var t,n=e.state,r=e.name,a=e.options,i=n.elements.arrow,o=n.modifiersData.popperOffsets,l=Xo(n.placement),c=CC(l),d=[za,Bi].indexOf(l)>=0,u=d?"height":"width";if(!(!i||!o)){var h=dae(a.padding,n),f=SC(i),p=c==="y"?Ba:za,y=c==="y"?$i:Bi,g=n.rects.reference[u]+n.rects.reference[c]-o[c]-n.rects.popper[u],x=o[c]-n.rects.reference[c],m=cv(i),v=m?c==="y"?m.clientHeight||0:m.clientWidth||0:0,b=g/2-x/2,C=h[p],S=v-f[u]-h[y],P=v/2-f[u]/2+b,D=Hm(C,P,S),N=c;n.modifiersData[r]=(t={},t[N]=D,t.centerOffset=D-P,t)}}function hae(e){var t=e.state,n=e.options,r=n.element,a=r===void 0?"[data-popper-arrow]":r;a!=null&&(typeof a=="string"&&(a=t.elements.popper.querySelector(a),!a)||pF(t.elements.popper,a)&&(t.elements.arrow=a))}const fae={name:"arrow",enabled:!0,phase:"main",fn:uae,effect:hae,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function qf(e){return e.split("-")[1]}var pae={top:"auto",right:"auto",bottom:"auto",left:"auto"};function mae(e,t){var n=e.x,r=e.y,a=t.devicePixelRatio||1;return{x:Wf(n*a)/a||0,y:Wf(r*a)/a||0}}function ZE(e){var t,n=e.popper,r=e.popperRect,a=e.placement,i=e.variation,o=e.offsets,l=e.position,c=e.gpuAcceleration,d=e.adaptive,u=e.roundOffsets,h=e.isFixed,f=o.x,p=f===void 0?0:f,y=o.y,g=y===void 0?0:y,x=typeof u=="function"?u({x:p,y:g}):{x:p,y:g};p=x.x,g=x.y;var m=o.hasOwnProperty("x"),v=o.hasOwnProperty("y"),b=za,C=Ba,S=window;if(d){var P=cv(n),D="clientHeight",N="clientWidth";if(P===di(n)&&(P=Ed(n),ec(P).position!=="static"&&l==="absolute"&&(D="scrollHeight",N="scrollWidth")),P=P,a===Ba||(a===za||a===Bi)&&i===Ag){C=$i;var M=h&&P===S&&S.visualViewport?S.visualViewport.height:P[D];g-=M-r.height,g*=c?1:-1}if(a===za||(a===Ba||a===$i)&&i===Ag){b=Bi;var L=h&&P===S&&S.visualViewport?S.visualViewport.width:P[N];p-=L-r.width,p*=c?1:-1}}var T=Object.assign({position:l},d&&pae),E=u===!0?mae({x:p,y:g},di(n)):{x:p,y:g};if(p=E.x,g=E.y,c){var A;return Object.assign({},T,(A={},A[C]=v?"0":"",A[b]=m?"0":"",A.transform=(S.devicePixelRatio||1)<=1?"translate("+p+"px, "+g+"px)":"translate3d("+p+"px, "+g+"px, 0)",A))}return Object.assign({},T,(t={},t[C]=v?g+"px":"",t[b]=m?p+"px":"",t.transform="",t))}function gae(e){var t=e.state,n=e.options,r=n.gpuAcceleration,a=r===void 0?!0:r,i=n.adaptive,o=i===void 0?!0:i,l=n.roundOffsets,c=l===void 0?!0:l,d={placement:Xo(t.placement),variation:qf(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:a,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,ZE(Object.assign({},d,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:o,roundOffsets:c})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,ZE(Object.assign({},d,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:c})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}const vae={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:gae,data:{}};var Bx={passive:!0};function xae(e){var t=e.state,n=e.instance,r=e.options,a=r.scroll,i=a===void 0?!0:a,o=r.resize,l=o===void 0?!0:o,c=di(t.elements.popper),d=[].concat(t.scrollParents.reference,t.scrollParents.popper);return i&&d.forEach(function(u){u.addEventListener("scroll",n.update,Bx)}),l&&c.addEventListener("resize",n.update,Bx),function(){i&&d.forEach(function(u){u.removeEventListener("scroll",n.update,Bx)}),l&&c.removeEventListener("resize",n.update,Bx)}}const yae={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:xae,data:{}};var bae={left:"right",right:"left",bottom:"top",top:"bottom"};function P0(e){return e.replace(/left|right|bottom|top/g,function(t){return bae[t]})}var wae={start:"end",end:"start"};function e3(e){return e.replace(/start|end/g,function(t){return wae[t]})}function PC(e){var t=di(e),n=t.pageXOffset,r=t.pageYOffset;return{scrollLeft:n,scrollTop:r}}function DC(e){return Hf(Ed(e)).left+PC(e).scrollLeft}function jae(e,t){var n=di(e),r=Ed(e),a=n.visualViewport,i=r.clientWidth,o=r.clientHeight,l=0,c=0;if(a){i=a.width,o=a.height;var d=fF();(d||!d&&t==="fixed")&&(l=a.offsetLeft,c=a.offsetTop)}return{width:i,height:o,x:l+DC(e),y:c}}function Nae(e){var t,n=Ed(e),r=PC(e),a=(t=e.ownerDocument)==null?void 0:t.body,i=Nu(n.scrollWidth,n.clientWidth,a?a.scrollWidth:0,a?a.clientWidth:0),o=Nu(n.scrollHeight,n.clientHeight,a?a.scrollHeight:0,a?a.clientHeight:0),l=-r.scrollLeft+DC(e),c=-r.scrollTop;return ec(a||n).direction==="rtl"&&(l+=Nu(n.clientWidth,a?a.clientWidth:0)-i),{width:i,height:o,x:l,y:c}}function kC(e){var t=ec(e),n=t.overflow,r=t.overflowX,a=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+a+r)}function xF(e){return["html","body","#document"].indexOf(vd(e))>=0?e.ownerDocument.body:Qo(e)&&kC(e)?e:xF(V1(e))}function qm(e,t){var n;t===void 0&&(t=[]);var r=xF(e),a=r===((n=e.ownerDocument)==null?void 0:n.body),i=di(r),o=a?[i].concat(i.visualViewport||[],kC(r)?r:[]):r,l=t.concat(o);return a?l:l.concat(qm(V1(o)))}function ON(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function Sae(e,t){var n=Hf(e,!1,t==="fixed");return n.top=n.top+e.clientTop,n.left=n.left+e.clientLeft,n.bottom=n.top+e.clientHeight,n.right=n.left+e.clientWidth,n.width=e.clientWidth,n.height=e.clientHeight,n.x=n.left,n.y=n.top,n}function t3(e,t,n){return t===hF?ON(jae(e,n)):Hu(t)?Sae(t,n):ON(Nae(Ed(e)))}function Cae(e){var t=qm(V1(e)),n=["absolute","fixed"].indexOf(ec(e).position)>=0,r=n&&Qo(e)?cv(e):e;return Hu(r)?t.filter(function(a){return Hu(a)&&pF(a,r)&&vd(a)!=="body"}):[]}function Pae(e,t,n,r){var a=t==="clippingParents"?Cae(e):[].concat(t),i=[].concat(a,[n]),o=i[0],l=i.reduce(function(c,d){var u=t3(e,d,r);return c.top=Nu(u.top,c.top),c.right=_y(u.right,c.right),c.bottom=_y(u.bottom,c.bottom),c.left=Nu(u.left,c.left),c},t3(e,o,r));return l.width=l.right-l.left,l.height=l.bottom-l.top,l.x=l.left,l.y=l.top,l}function yF(e){var t=e.reference,n=e.element,r=e.placement,a=r?Xo(r):null,i=r?qf(r):null,o=t.x+t.width/2-n.width/2,l=t.y+t.height/2-n.height/2,c;switch(a){case Ba:c={x:o,y:t.y-n.height};break;case $i:c={x:o,y:t.y+t.height};break;case Bi:c={x:t.x+t.width,y:l};break;case za:c={x:t.x-n.width,y:l};break;default:c={x:t.x,y:t.y}}var d=a?CC(a):null;if(d!=null){var u=d==="y"?"height":"width";switch(i){case zf:c[d]=c[d]-(t[u]/2-n[u]/2);break;case Ag:c[d]=c[d]+(t[u]/2-n[u]/2);break}}return c}function _g(e,t){t===void 0&&(t={});var n=t,r=n.placement,a=r===void 0?e.placement:r,i=n.strategy,o=i===void 0?e.strategy:i,l=n.boundary,c=l===void 0?Jse:l,d=n.rootBoundary,u=d===void 0?hF:d,h=n.elementContext,f=h===void 0?im:h,p=n.altBoundary,y=p===void 0?!1:p,g=n.padding,x=g===void 0?0:g,m=gF(typeof x!="number"?x:vF(x,lv)),v=f===im?Kse:im,b=e.rects.popper,C=e.elements[y?v:f],S=Pae(Hu(C)?C:C.contextElement||Ed(e.elements.popper),c,u,o),P=Hf(e.elements.reference),D=yF({reference:P,element:b,strategy:"absolute",placement:a}),N=ON(Object.assign({},b,D)),M=f===im?N:P,L={top:S.top-M.top+m.top,bottom:M.bottom-S.bottom+m.bottom,left:S.left-M.left+m.left,right:M.right-S.right+m.right},T=e.modifiersData.offset;if(f===im&&T){var E=T[a];Object.keys(L).forEach(function(A){var O=[Bi,$i].indexOf(A)>=0?1:-1,W=[Ba,$i].indexOf(A)>=0?"y":"x";L[A]+=E[W]*O})}return L}function Dae(e,t){t===void 0&&(t={});var n=t,r=n.placement,a=n.boundary,i=n.rootBoundary,o=n.padding,l=n.flipVariations,c=n.allowedAutoPlacements,d=c===void 0?jC:c,u=qf(r),h=u?l?XE:XE.filter(function(y){return qf(y)===u}):lv,f=h.filter(function(y){return d.indexOf(y)>=0});f.length===0&&(f=h);var p=f.reduce(function(y,g){return y[g]=_g(e,{placement:g,boundary:a,rootBoundary:i,padding:o})[Xo(g)],y},{});return Object.keys(p).sort(function(y,g){return p[y]-p[g]})}function kae(e){if(Xo(e)===wC)return[];var t=P0(e);return[e3(e),t,e3(t)]}function Eae(e){var t=e.state,n=e.options,r=e.name;if(!t.modifiersData[r]._skip){for(var a=n.mainAxis,i=a===void 0?!0:a,o=n.altAxis,l=o===void 0?!0:o,c=n.fallbackPlacements,d=n.padding,u=n.boundary,h=n.rootBoundary,f=n.altBoundary,p=n.flipVariations,y=p===void 0?!0:p,g=n.allowedAutoPlacements,x=t.options.placement,m=Xo(x),v=m===x,b=c||(v||!y?[P0(x)]:kae(x)),C=[x].concat(b).reduce(function(q,X){return q.concat(Xo(X)===wC?Dae(t,{placement:X,boundary:u,rootBoundary:h,padding:d,flipVariations:y,allowedAutoPlacements:g}):X)},[]),S=t.rects.reference,P=t.rects.popper,D=new Map,N=!0,M=C[0],L=0;L<C.length;L++){var T=C[L],E=Xo(T),A=qf(T)===zf,O=[Ba,$i].indexOf(E)>=0,W=O?"width":"height",z=_g(t,{placement:T,boundary:u,rootBoundary:h,altBoundary:f,padding:d}),F=O?A?Bi:za:A?$i:Ba;S[W]>P[W]&&(F=P0(F));var V=P0(F),B=[];if(i&&B.push(z[E]<=0),l&&B.push(z[F]<=0,z[V]<=0),B.every(function(q){return q})){M=T,N=!1;break}D.set(T,B)}if(N)for(var Y=y?3:1,$=function(X){var te=C.find(function(ae){var le=D.get(ae);if(le)return le.slice(0,X).every(function(me){return me})});if(te)return M=te,"break"},I=Y;I>0;I--){var U=$(I);if(U==="break")break}t.placement!==M&&(t.modifiersData[r]._skip=!0,t.placement=M,t.reset=!0)}}const Tae={name:"flip",enabled:!0,phase:"main",fn:Eae,requiresIfExists:["offset"],data:{_skip:!1}};function n3(e,t,n){return n===void 0&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function r3(e){return[Ba,Bi,$i,za].some(function(t){return e[t]>=0})}function Aae(e){var t=e.state,n=e.name,r=t.rects.reference,a=t.rects.popper,i=t.modifiersData.preventOverflow,o=_g(t,{elementContext:"reference"}),l=_g(t,{altBoundary:!0}),c=n3(o,r),d=n3(l,a,i),u=r3(c),h=r3(d);t.modifiersData[n]={referenceClippingOffsets:c,popperEscapeOffsets:d,isReferenceHidden:u,hasPopperEscaped:h},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":h})}const _ae={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:Aae};function Mae(e,t,n){var r=Xo(e),a=[za,Ba].indexOf(r)>=0?-1:1,i=typeof n=="function"?n(Object.assign({},t,{placement:e})):n,o=i[0],l=i[1];return o=o||0,l=(l||0)*a,[za,Bi].indexOf(r)>=0?{x:l,y:o}:{x:o,y:l}}function Rae(e){var t=e.state,n=e.options,r=e.name,a=n.offset,i=a===void 0?[0,0]:a,o=jC.reduce(function(u,h){return u[h]=Mae(h,t.rects,i),u},{}),l=o[t.placement],c=l.x,d=l.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=c,t.modifiersData.popperOffsets.y+=d),t.modifiersData[r]=o}const Lae={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:Rae};function Iae(e){var t=e.state,n=e.name;t.modifiersData[n]=yF({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})}const Oae={name:"popperOffsets",enabled:!0,phase:"read",fn:Iae,data:{}};function Fae(e){return e==="x"?"y":"x"}function $ae(e){var t=e.state,n=e.options,r=e.name,a=n.mainAxis,i=a===void 0?!0:a,o=n.altAxis,l=o===void 0?!1:o,c=n.boundary,d=n.rootBoundary,u=n.altBoundary,h=n.padding,f=n.tether,p=f===void 0?!0:f,y=n.tetherOffset,g=y===void 0?0:y,x=_g(t,{boundary:c,rootBoundary:d,padding:h,altBoundary:u}),m=Xo(t.placement),v=qf(t.placement),b=!v,C=CC(m),S=Fae(C),P=t.modifiersData.popperOffsets,D=t.rects.reference,N=t.rects.popper,M=typeof g=="function"?g(Object.assign({},t.rects,{placement:t.placement})):g,L=typeof M=="number"?{mainAxis:M,altAxis:M}:Object.assign({mainAxis:0,altAxis:0},M),T=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,E={x:0,y:0};if(P){if(i){var A,O=C==="y"?Ba:za,W=C==="y"?$i:Bi,z=C==="y"?"height":"width",F=P[C],V=F+x[O],B=F-x[W],Y=p?-N[z]/2:0,$=v===zf?D[z]:N[z],I=v===zf?-N[z]:-D[z],U=t.elements.arrow,q=p&&U?SC(U):{width:0,height:0},X=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:mF(),te=X[O],ae=X[W],le=Hm(0,D[z],q[z]),me=b?D[z]/2-Y-le-te-L.mainAxis:$-le-te-L.mainAxis,Le=b?-D[z]/2+Y+le+ae+L.mainAxis:I+le+ae+L.mainAxis,ie=t.elements.arrow&&cv(t.elements.arrow),Ne=ie?C==="y"?ie.clientTop||0:ie.clientLeft||0:0,Be=(A=T==null?void 0:T[C])!=null?A:0,Ue=F+me-Be-Ne,_e=F+Le-Be,ue=Hm(p?_y(V,Ue):V,F,p?Nu(B,_e):B);P[C]=ue,E[C]=ue-F}if(l){var wt,gt=C==="x"?Ba:za,ve=C==="x"?$i:Bi,we=P[S],Se=S==="y"?"height":"width",De=we+x[gt],Ie=we-x[ve],oe=[Ba,za].indexOf(m)!==-1,Ee=(wt=T==null?void 0:T[S])!=null?wt:0,G=oe?De:we-D[Se]-N[Se]-Ee+L.altAxis,ge=oe?we+D[Se]+N[Se]-Ee-L.altAxis:Ie,Pe=p&&oe?cae(G,we,ge):Hm(p?G:De,we,p?ge:Ie);P[S]=Pe,E[S]=Pe-we}t.modifiersData[r]=E}}const Bae={name:"preventOverflow",enabled:!0,phase:"main",fn:$ae,requiresIfExists:["offset"]};function zae(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function Wae(e){return e===di(e)||!Qo(e)?PC(e):zae(e)}function Hae(e){var t=e.getBoundingClientRect(),n=Wf(t.width)/e.offsetWidth||1,r=Wf(t.height)/e.offsetHeight||1;return n!==1||r!==1}function qae(e,t,n){n===void 0&&(n=!1);var r=Qo(t),a=Qo(t)&&Hae(t),i=Ed(t),o=Hf(e,a,n),l={scrollLeft:0,scrollTop:0},c={x:0,y:0};return(r||!r&&!n)&&((vd(t)!=="body"||kC(i))&&(l=Wae(t)),Qo(t)?(c=Hf(t,!0),c.x+=t.clientLeft,c.y+=t.clientTop):i&&(c.x=DC(i))),{x:o.left+l.scrollLeft-c.x,y:o.top+l.scrollTop-c.y,width:o.width,height:o.height}}function Vae(e){var t=new Map,n=new Set,r=[];e.forEach(function(i){t.set(i.name,i)});function a(i){n.add(i.name);var o=[].concat(i.requires||[],i.requiresIfExists||[]);o.forEach(function(l){if(!n.has(l)){var c=t.get(l);c&&a(c)}}),r.push(i)}return e.forEach(function(i){n.has(i.name)||a(i)}),r}function Uae(e){var t=Vae(e);return iae.reduce(function(n,r){return n.concat(t.filter(function(a){return a.phase===r}))},[])}function Yae(e){var t;return function(){return t||(t=new Promise(function(n){Promise.resolve().then(function(){t=void 0,n(e())})})),t}}function Gae(e){var t=e.reduce(function(n,r){var a=n[r.name];return n[r.name]=a?Object.assign({},a,r,{options:Object.assign({},a.options,r.options),data:Object.assign({},a.data,r.data)}):r,n},{});return Object.keys(t).map(function(n){return t[n]})}var s3={placement:"bottom",modifiers:[],strategy:"absolute"};function a3(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function Jae(e){e===void 0&&(e={});var t=e,n=t.defaultModifiers,r=n===void 0?[]:n,a=t.defaultOptions,i=a===void 0?s3:a;return function(l,c,d){d===void 0&&(d=i);var u={placement:"bottom",orderedModifiers:[],options:Object.assign({},s3,i),modifiersData:{},elements:{reference:l,popper:c},attributes:{},styles:{}},h=[],f=!1,p={state:u,setOptions:function(m){var v=typeof m=="function"?m(u.options):m;g(),u.options=Object.assign({},i,u.options,v),u.scrollParents={reference:Hu(l)?qm(l):l.contextElement?qm(l.contextElement):[],popper:qm(c)};var b=Uae(Gae([].concat(r,u.options.modifiers)));return u.orderedModifiers=b.filter(function(C){return C.enabled}),y(),p.update()},forceUpdate:function(){if(!f){var m=u.elements,v=m.reference,b=m.popper;if(a3(v,b)){u.rects={reference:qae(v,cv(b),u.options.strategy==="fixed"),popper:SC(b)},u.reset=!1,u.placement=u.options.placement,u.orderedModifiers.forEach(function(L){return u.modifiersData[L.name]=Object.assign({},L.data)});for(var C=0;C<u.orderedModifiers.length;C++){if(u.reset===!0){u.reset=!1,C=-1;continue}var S=u.orderedModifiers[C],P=S.fn,D=S.options,N=D===void 0?{}:D,M=S.name;typeof P=="function"&&(u=P({state:u,options:N,name:M,instance:p})||u)}}}},update:Yae(function(){return new Promise(function(x){p.forceUpdate(),x(u)})}),destroy:function(){g(),f=!0}};if(!a3(l,c))return p;p.setOptions(d).then(function(x){!f&&d.onFirstUpdate&&d.onFirstUpdate(x)});function y(){u.orderedModifiers.forEach(function(x){var m=x.name,v=x.options,b=v===void 0?{}:v,C=x.effect;if(typeof C=="function"){var S=C({state:u,name:m,instance:p,options:b}),P=function(){};h.push(S||P)}})}function g(){h.forEach(function(x){return x()}),h=[]}return p}}var Kae=Jae({defaultModifiers:[_ae,Oae,vae,yae,Lae,Tae,Bae,fae]}),i3=function(t){return{position:t,top:"0",left:"0",opacity:"0",pointerEvents:"none"}},Xae={name:"applyStyles",enabled:!1},Qae={name:"ariaDescribedBy",enabled:!0,phase:"afterWrite",effect:function(t){var n=t.state;return function(){var r=n.elements,a=r.reference,i=r.popper;if("removeAttribute"in a){var o=(a.getAttribute("aria-describedby")||"").split(",").filter(function(l){return l.trim()!==i.id});o.length?a.setAttribute("aria-describedby",o.join(",")):a.removeAttribute("aria-describedby")}}},fn:function(t){var n,r=t.state,a=r.elements,i=a.popper,o=a.reference,l=(n=i.getAttribute("role"))==null?void 0:n.toLowerCase();if(i.id&&l==="tooltip"&&"setAttribute"in o){var c=o.getAttribute("aria-describedby");if(c&&c.split(",").indexOf(i.id)!==-1)return;o.setAttribute("aria-describedby",c?c+","+i.id:i.id)}}},Zae=[];function eie(e,t,n){var r=n===void 0?{}:n,a=r.enabled,i=a===void 0?!0:a,o=r.placement,l=o===void 0?"bottom":o,c=r.strategy,d=c===void 0?"absolute":c,u=r.modifiers,h=u===void 0?Zae:u,f=O1(r,["enabled","placement","strategy","modifiers"]),p=j.useRef(),y=j.useCallback(function(){var C;(C=p.current)==null||C.update()},[]),g=j.useCallback(function(){var C;(C=p.current)==null||C.forceUpdate()},[]),x=Gse(j.useState({placement:l,update:y,forceUpdate:g,attributes:{},styles:{popper:i3(d),arrow:{}}})),m=x[0],v=x[1],b=j.useMemo(function(){return{name:"updateStateModifier",enabled:!0,phase:"write",requires:["computeStyles"],fn:function(S){var P=S.state,D={},N={};Object.keys(P.elements).forEach(function(M){D[M]=P.styles[M],N[M]=P.attributes[M]}),v({state:P,styles:D,attributes:N,update:y,forceUpdate:g,placement:P.placement})}}},[y,g,v]);return j.useEffect(function(){!p.current||!i||p.current.setOptions({placement:l,strategy:d,modifiers:[].concat(h,[b,Xae])})},[d,l,b,i]),j.useEffect(function(){if(!(!i||e==null||t==null))return p.current=Kae(e,t,St({},f,{placement:l,strategy:d,modifiers:[].concat(h,[Qae,b])})),function(){p.current!=null&&(p.current.destroy(),p.current=void 0,v(function(C){return St({},C,{attributes:{},styles:{popper:i3(d)}})}))}},[i,e,t]),m}function EC(e,t,n,r){var a=r&&typeof r!="boolean"?r.capture:r;e.removeEventListener(t,n,a),n.__once&&e.removeEventListener(t,n.__once,a)}function zo(e,t,n,r){return bC(e,t,n,r),function(){EC(e,t,n,r)}}const tie=Object.freeze(Object.defineProperty({__proto__:null,default:zo},Symbol.toStringTag,{value:"Module"}));var nie=function(){},rie=nie;const sie=qa(rie);function aie(e){return e&&"setState"in e?Hg.findDOMNode(e):e??null}const iie=function(e){return kd(aie(e))};var oie=27,o3=function(){};function lie(e){return e.button===0}function cie(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}var l3=function(t){return t&&("current"in t?t.current:t)};function die(e,t,n){var r=n===void 0?{}:n,a=r.disabled,i=r.clickTrigger,o=i===void 0?"click":i,l=j.useRef(!1),c=t||o3,d=j.useCallback(function(f){var p,y=l3(e);sie(!!y,"RootClose captured a close event but does not have a ref to compare it to. useRootClose(), should be passed a ref that resolves to a DOM node"),l.current=!y||cie(f)||!lie(f)||!!Zl(y,(p=f.composedPath==null?void 0:f.composedPath()[0])!=null?p:f.target)},[e]),u=JE(function(f){l.current||c(f)}),h=JE(function(f){f.keyCode===oie&&c(f)});j.useEffect(function(){if(!(a||e==null)){var f=window.event,p=iie(l3(e)),y=zo(p,o,d,!0),g=zo(p,o,function(v){if(v===f){f=void 0;return}u(v)}),x=zo(p,"keyup",function(v){if(v===f){f=void 0;return}h(v)}),m=[];return"ontouchstart"in p.documentElement&&(m=[].slice.call(p.body.children).map(function(v){return zo(v,"mousemove",o3)})),function(){y(),g(),x(),m.forEach(function(v){return v()})}}},[e,a,o,d,u,h])}function uie(e){var t={};return Array.isArray(e)?(e==null||e.forEach(function(n){t[n.name]=n}),t):e||t}function hie(e){return e===void 0&&(e={}),Array.isArray(e)?e:Object.keys(e).map(function(t){return e[t].name=t,e[t]})}function fie(e){var t,n,r,a,i=e.enabled,o=e.enableEvents,l=e.placement,c=e.flip,d=e.offset,u=e.fixed,h=e.containerPadding,f=e.arrowElement,p=e.popperConfig,y=p===void 0?{}:p,g=uie(y.modifiers);return St({},y,{placement:l,enabled:i,strategy:u?"fixed":y.strategy,modifiers:hie(St({},g,{eventListeners:{enabled:o},preventOverflow:St({},g.preventOverflow,{options:h?St({padding:h},(t=g.preventOverflow)==null?void 0:t.options):(n=g.preventOverflow)==null?void 0:n.options}),offset:{options:St({offset:d},(r=g.offset)==null?void 0:r.options)},arrow:St({},g.arrow,{enabled:!!f,options:St({},(a=g.arrow)==null?void 0:a.options,{element:f})}),flip:St({enabled:!!c},g.flip)}))})}function bF(e){e===void 0&&(e=kd());try{var t=e.activeElement;return!t||!t.nodeName?null:t}catch{return e.body}}function U1(e,t){return e.classList?!!t&&e.classList.contains(t):(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")!==-1}function Y1(e,t){e.classList?e.classList.add(t):U1(e,t)||(typeof e.className=="string"?e.className=e.className+" "+t:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+t))}function c3(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function G1(e,t){e.classList?e.classList.remove(t):typeof e.className=="string"?e.className=c3(e.className,t):e.setAttribute("class",c3(e.className&&e.className.baseVal||"",t))}var zx;function dv(e){if((!zx&&zx!==0||e)&&yC){var t=document.createElement("div");t.style.position="absolute",t.style.top="-9999px",t.style.width="50px",t.style.height="50px",t.style.overflow="scroll",document.body.appendChild(t),zx=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return zx}var v2=function(t){var n;return typeof document>"u"?null:t==null?kd().body:(typeof t=="function"&&(t=t()),t&&"current"in t&&(t=t.current),(n=t)!=null&&n.nodeType&&t||null)};function d3(e,t){var n=j.useState(function(){return v2(e)}),r=n[0],a=n[1];if(!r){var i=v2(e);i&&a(i)}return j.useEffect(function(){t&&r&&t(r)},[t,r]),j.useEffect(function(){var o=v2(e);o!==r&&a(o)},[e,r]),r}const u3=e=>!e||typeof e=="function"?e:t=>{e.current=t};function pie(e,t){const n=u3(e),r=u3(t);return a=>{n&&n(a),r&&r(a)}}function mie(e,t){return j.useMemo(()=>pie(e,t),[e,t])}var TC=Q.forwardRef(function(e,t){var n=e.flip,r=e.offset,a=e.placement,i=e.containerPadding,o=i===void 0?5:i,l=e.popperConfig,c=l===void 0?{}:l,d=e.transition,u=KE(),h=u[0],f=u[1],p=KE(),y=p[0],g=p[1],x=mie(f,t),m=d3(e.container),v=d3(e.target),b=j.useState(!e.show),C=b[0],S=b[1],P=eie(v,h,fie({placement:a,enableEvents:!!e.show,containerPadding:o||5,flip:n,offset:r,arrowElement:y,popperConfig:c})),D=P.styles,N=P.attributes,M=O1(P,["styles","attributes"]);e.show?C&&S(!1):!e.transition&&!C&&S(!0);var L=function(){S(!0),e.onExited&&e.onExited.apply(e,arguments)},T=e.show||d&&!C;if(die(h,e.onHide,{disabled:!e.rootClose||e.rootCloseDisabled,clickTrigger:e.rootCloseEvent}),!T)return null;var E=e.children(St({},M,{show:!!e.show,props:St({},N.popper,{style:D.popper,ref:x}),arrowProps:St({},N.arrow,{style:D.arrow,ref:g})}));if(d){var A=e.onExit,O=e.onExiting,W=e.onEnter,z=e.onEntering,F=e.onEntered;E=Q.createElement(d,{in:e.show,appear:!0,onExit:A,onExiting:O,onExited:L,onEnter:W,onEntering:z,onEntered:F},E)}return m?Hg.createPortal(E,m):null});TC.displayName="Overlay";TC.propTypes={show:ut.bool,placement:ut.oneOf(jC),target:ut.any,container:ut.any,flip:ut.bool,children:ut.func.isRequired,containerPadding:ut.number,popperConfig:ut.object,rootClose:ut.bool,rootCloseEvent:ut.oneOf(["click","mousedown"]),rootCloseDisabled:ut.bool,onHide:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];if(t.rootClose){var i;return(i=ut.func).isRequired.apply(i,[t].concat(r))}return ut.func.apply(ut,[t].concat(r))},transition:ut.elementType,onEnter:ut.func,onEntering:ut.func,onEntered:ut.func,onExit:ut.func,onExiting:ut.func,onExited:ut.func};const gie=TC;function vie(){this.__data__=[],this.size=0}var xie=vie,yie=sv;function bie(e,t){for(var n=e.length;n--;)if(yie(e[n][0],t))return n;return-1}var J1=bie,wie=J1,jie=Array.prototype,Nie=jie.splice;function Sie(e){var t=this.__data__,n=wie(t,e);if(n<0)return!1;var r=t.length-1;return n==r?t.pop():Nie.call(t,n,1),--this.size,!0}var Cie=Sie,Pie=J1;function Die(e){var t=this.__data__,n=Pie(t,e);return n<0?void 0:t[n][1]}var kie=Die,Eie=J1;function Tie(e){return Eie(this.__data__,e)>-1}var Aie=Tie,_ie=J1;function Mie(e,t){var n=this.__data__,r=_ie(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}var Rie=Mie,Lie=xie,Iie=Cie,Oie=kie,Fie=Aie,$ie=Rie;function ip(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}ip.prototype.clear=Lie;ip.prototype.delete=Iie;ip.prototype.get=Oie;ip.prototype.has=Fie;ip.prototype.set=$ie;var K1=ip,Bie=K1;function zie(){this.__data__=new Bie,this.size=0}var Wie=zie;function Hie(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}var qie=Hie;function Vie(e){return this.__data__.get(e)}var Uie=Vie;function Yie(e){return this.__data__.has(e)}var Gie=Yie,Jie=il,Kie=Jie["__core-js_shared__"],Xie=Kie,x2=Xie,h3=function(){var e=/[^.]+$/.exec(x2&&x2.keys&&x2.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function Qie(e){return!!h3&&h3 in e}var Zie=Qie,eoe=Function.prototype,toe=eoe.toString;function noe(e){if(e!=null){try{return toe.call(e)}catch{}try{return e+""}catch{}}return""}var wF=noe,roe=fC,soe=Zie,aoe=ac,ioe=wF,ooe=/[\\^$.*+?()[\]{}|]/g,loe=/^\[object .+?Constructor\]$/,coe=Function.prototype,doe=Object.prototype,uoe=coe.toString,hoe=doe.hasOwnProperty,foe=RegExp("^"+uoe.call(hoe).replace(ooe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function poe(e){if(!aoe(e)||soe(e))return!1;var t=roe(e)?foe:loe;return t.test(ioe(e))}var moe=poe;function goe(e,t){return e==null?void 0:e[t]}var voe=goe,xoe=moe,yoe=voe;function boe(e,t){var n=yoe(e,t);return xoe(n)?n:void 0}var nh=boe,woe=nh,joe=il,Noe=woe(joe,"Map"),AC=Noe,Soe=nh,Coe=Soe(Object,"create"),X1=Coe,f3=X1;function Poe(){this.__data__=f3?f3(null):{},this.size=0}var Doe=Poe;function koe(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var Eoe=koe,Toe=X1,Aoe="__lodash_hash_undefined__",_oe=Object.prototype,Moe=_oe.hasOwnProperty;function Roe(e){var t=this.__data__;if(Toe){var n=t[e];return n===Aoe?void 0:n}return Moe.call(t,e)?t[e]:void 0}var Loe=Roe,Ioe=X1,Ooe=Object.prototype,Foe=Ooe.hasOwnProperty;function $oe(e){var t=this.__data__;return Ioe?t[e]!==void 0:Foe.call(t,e)}var Boe=$oe,zoe=X1,Woe="__lodash_hash_undefined__";function Hoe(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=zoe&&t===void 0?Woe:t,this}var qoe=Hoe,Voe=Doe,Uoe=Eoe,Yoe=Loe,Goe=Boe,Joe=qoe;function op(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}op.prototype.clear=Voe;op.prototype.delete=Uoe;op.prototype.get=Yoe;op.prototype.has=Goe;op.prototype.set=Joe;var Koe=op,p3=Koe,Xoe=K1,Qoe=AC;function Zoe(){this.size=0,this.__data__={hash:new p3,map:new(Qoe||Xoe),string:new p3}}var ele=Zoe;function tle(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var nle=tle,rle=nle;function sle(e,t){var n=e.__data__;return rle(t)?n[typeof t=="string"?"string":"hash"]:n.map}var Q1=sle,ale=Q1;function ile(e){var t=ale(this,e).delete(e);return this.size-=t?1:0,t}var ole=ile,lle=Q1;function cle(e){return lle(this,e).get(e)}var dle=cle,ule=Q1;function hle(e){return ule(this,e).has(e)}var fle=hle,ple=Q1;function mle(e,t){var n=ple(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}var gle=mle,vle=ele,xle=ole,yle=dle,ble=fle,wle=gle;function lp(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}lp.prototype.clear=vle;lp.prototype.delete=xle;lp.prototype.get=yle;lp.prototype.has=ble;lp.prototype.set=wle;var _C=lp,jle=K1,Nle=AC,Sle=_C,Cle=200;function Ple(e,t){var n=this.__data__;if(n instanceof jle){var r=n.__data__;if(!Nle||r.length<Cle-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new Sle(r)}return n.set(e,t),this.size=n.size,this}var Dle=Ple,kle=K1,Ele=Wie,Tle=qie,Ale=Uie,_le=Gie,Mle=Dle;function cp(e){var t=this.__data__=new kle(e);this.size=t.size}cp.prototype.clear=Ele;cp.prototype.delete=Tle;cp.prototype.get=Ale;cp.prototype.has=_le;cp.prototype.set=Mle;var MC=cp,Rle="__lodash_hash_undefined__";function Lle(e){return this.__data__.set(e,Rle),this}var Ile=Lle;function Ole(e){return this.__data__.has(e)}var Fle=Ole,$le=_C,Ble=Ile,zle=Fle;function My(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new $le;++t<n;)this.add(e[t])}My.prototype.add=My.prototype.push=Ble;My.prototype.has=zle;var Wle=My;function Hle(e,t){for(var n=-1,r=e==null?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}var qle=Hle;function Vle(e,t){return e.has(t)}var Ule=Vle,Yle=Wle,Gle=qle,Jle=Ule,Kle=1,Xle=2;function Qle(e,t,n,r,a,i){var o=n&Kle,l=e.length,c=t.length;if(l!=c&&!(o&&c>l))return!1;var d=i.get(e),u=i.get(t);if(d&&u)return d==t&&u==e;var h=-1,f=!0,p=n&Xle?new Yle:void 0;for(i.set(e,t),i.set(t,e);++h<l;){var y=e[h],g=t[h];if(r)var x=o?r(g,y,h,t,e,i):r(y,g,h,e,t,i);if(x!==void 0){if(x)continue;f=!1;break}if(p){if(!Gle(t,function(m,v){if(!Jle(p,v)&&(y===m||a(y,m,n,r,i)))return p.push(v)})){f=!1;break}}else if(!(y===g||a(y,g,n,r,i))){f=!1;break}}return i.delete(e),i.delete(t),f}var jF=Qle,Zle=il,ece=Zle.Uint8Array,NF=ece;function tce(e){var t=-1,n=Array(e.size);return e.forEach(function(r,a){n[++t]=[a,r]}),n}var nce=tce;function rce(e){var t=-1,n=Array(e.size);return e.forEach(function(r){n[++t]=r}),n}var sce=rce,m3=sp,g3=NF,ace=sv,ice=jF,oce=nce,lce=sce,cce=1,dce=2,uce="[object Boolean]",hce="[object Date]",fce="[object Error]",pce="[object Map]",mce="[object Number]",gce="[object RegExp]",vce="[object Set]",xce="[object String]",yce="[object Symbol]",bce="[object ArrayBuffer]",wce="[object DataView]",v3=m3?m3.prototype:void 0,y2=v3?v3.valueOf:void 0;function jce(e,t,n,r,a,i,o){switch(n){case wce:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case bce:return!(e.byteLength!=t.byteLength||!i(new g3(e),new g3(t)));case uce:case hce:case mce:return ace(+e,+t);case fce:return e.name==t.name&&e.message==t.message;case gce:case xce:return e==t+"";case pce:var l=oce;case vce:var c=r&cce;if(l||(l=lce),e.size!=t.size&&!c)return!1;var d=o.get(e);if(d)return d==t;r|=dce,o.set(e,t);var u=ice(l(e),l(t),r,a,i,o);return o.delete(e),u;case yce:if(y2)return y2.call(e)==y2.call(t)}return!1}var Nce=jce;function Sce(e,t){for(var n=-1,r=t.length,a=e.length;++n<r;)e[a+n]=t[n];return e}var RC=Sce,Cce=Array.isArray,Wi=Cce,Pce=RC,Dce=Wi;function kce(e,t,n){var r=t(e);return Dce(e)?r:Pce(r,n(e))}var SF=kce;function Ece(e,t){for(var n=-1,r=e==null?0:e.length,a=0,i=[];++n<r;){var o=e[n];t(o,n,e)&&(i[a++]=o)}return i}var Tce=Ece;function Ace(){return[]}var CF=Ace,_ce=Tce,Mce=CF,Rce=Object.prototype,Lce=Rce.propertyIsEnumerable,x3=Object.getOwnPropertySymbols,Ice=x3?function(e){return e==null?[]:(e=Object(e),_ce(x3(e),function(t){return Lce.call(e,t)}))}:Mce,LC=Ice;function Oce(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}var Fce=Oce,$ce=ap,Bce=Dd,zce="[object Arguments]";function Wce(e){return Bce(e)&&$ce(e)==zce}var Hce=Wce,y3=Hce,qce=Dd,PF=Object.prototype,Vce=PF.hasOwnProperty,Uce=PF.propertyIsEnumerable,Yce=y3(function(){return arguments}())?y3:function(e){return qce(e)&&Vce.call(e,"callee")&&!Uce.call(e,"callee")},IC=Yce,Ry={exports:{}};function Gce(){return!1}var Jce=Gce;Ry.exports;(function(e,t){var n=il,r=Jce,a=t&&!t.nodeType&&t,i=a&&!0&&e&&!e.nodeType&&e,o=i&&i.exports===a,l=o?n.Buffer:void 0,c=l?l.isBuffer:void 0,d=c||r;e.exports=d})(Ry,Ry.exports);var Z1=Ry.exports,Kce=ap,Xce=pC,Qce=Dd,Zce="[object Arguments]",ede="[object Array]",tde="[object Boolean]",nde="[object Date]",rde="[object Error]",sde="[object Function]",ade="[object Map]",ide="[object Number]",ode="[object Object]",lde="[object RegExp]",cde="[object Set]",dde="[object String]",ude="[object WeakMap]",hde="[object ArrayBuffer]",fde="[object DataView]",pde="[object Float32Array]",mde="[object Float64Array]",gde="[object Int8Array]",vde="[object Int16Array]",xde="[object Int32Array]",yde="[object Uint8Array]",bde="[object Uint8ClampedArray]",wde="[object Uint16Array]",jde="[object Uint32Array]",Yn={};Yn[pde]=Yn[mde]=Yn[gde]=Yn[vde]=Yn[xde]=Yn[yde]=Yn[bde]=Yn[wde]=Yn[jde]=!0;Yn[Zce]=Yn[ede]=Yn[hde]=Yn[tde]=Yn[fde]=Yn[nde]=Yn[rde]=Yn[sde]=Yn[ade]=Yn[ide]=Yn[ode]=Yn[lde]=Yn[cde]=Yn[dde]=Yn[ude]=!1;function Nde(e){return Qce(e)&&Xce(e.length)&&!!Yn[Kce(e)]}var Sde=Nde;function Cde(e){return function(t){return e(t)}}var eb=Cde,Ly={exports:{}};Ly.exports;(function(e,t){var n=sF,r=t&&!t.nodeType&&t,a=r&&!0&&e&&!e.nodeType&&e,i=a&&a.exports===r,o=i&&n.process,l=function(){try{var c=a&&a.require&&a.require("util").types;return c||o&&o.binding&&o.binding("util")}catch{}}();e.exports=l})(Ly,Ly.exports);var OC=Ly.exports,Pde=Sde,Dde=eb,b3=OC,w3=b3&&b3.isTypedArray,kde=w3?Dde(w3):Pde,FC=kde,Ede=Fce,Tde=IC,Ade=Wi,_de=Z1,Mde=mC,Rde=FC,Lde=Object.prototype,Ide=Lde.hasOwnProperty;function Ode(e,t){var n=Ade(e),r=!n&&Tde(e),a=!n&&!r&&_de(e),i=!n&&!r&&!a&&Rde(e),o=n||r||a||i,l=o?Ede(e.length,String):[],c=l.length;for(var d in e)(t||Ide.call(e,d))&&!(o&&(d=="length"||a&&(d=="offset"||d=="parent")||i&&(d=="buffer"||d=="byteLength"||d=="byteOffset")||Mde(d,c)))&&l.push(d);return l}var DF=Ode,Fde=Object.prototype;function $de(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||Fde;return e===n}var $C=$de;function Bde(e,t){return function(n){return e(t(n))}}var kF=Bde,zde=kF,Wde=zde(Object.keys,Object),Hde=Wde,qde=$C,Vde=Hde,Ude=Object.prototype,Yde=Ude.hasOwnProperty;function Gde(e){if(!qde(e))return Vde(e);var t=[];for(var n in Object(e))Yde.call(e,n)&&n!="constructor"&&t.push(n);return t}var Jde=Gde,Kde=DF,Xde=Jde,Qde=av;function Zde(e){return Qde(e)?Kde(e):Xde(e)}var uv=Zde,eue=SF,tue=LC,nue=uv;function rue(e){return eue(e,nue,tue)}var EF=rue,j3=EF,sue=1,aue=Object.prototype,iue=aue.hasOwnProperty;function oue(e,t,n,r,a,i){var o=n&sue,l=j3(e),c=l.length,d=j3(t),u=d.length;if(c!=u&&!o)return!1;for(var h=c;h--;){var f=l[h];if(!(o?f in t:iue.call(t,f)))return!1}var p=i.get(e),y=i.get(t);if(p&&y)return p==t&&y==e;var g=!0;i.set(e,t),i.set(t,e);for(var x=o;++h<c;){f=l[h];var m=e[f],v=t[f];if(r)var b=o?r(v,m,f,t,e,i):r(m,v,f,e,t,i);if(!(b===void 0?m===v||a(m,v,n,r,i):b)){g=!1;break}x||(x=f=="constructor")}if(g&&!x){var C=e.constructor,S=t.constructor;C!=S&&"constructor"in e&&"constructor"in t&&!(typeof C=="function"&&C instanceof C&&typeof S=="function"&&S instanceof S)&&(g=!1)}return i.delete(e),i.delete(t),g}var lue=oue,cue=nh,due=il,uue=cue(due,"DataView"),hue=uue,fue=nh,pue=il,mue=fue(pue,"Promise"),gue=mue,vue=nh,xue=il,yue=vue(xue,"Set"),bue=yue,wue=nh,jue=il,Nue=wue(jue,"WeakMap"),Sue=Nue,FN=hue,$N=AC,BN=gue,zN=bue,WN=Sue,TF=ap,dp=wF,N3="[object Map]",Cue="[object Object]",S3="[object Promise]",C3="[object Set]",P3="[object WeakMap]",D3="[object DataView]",Pue=dp(FN),Due=dp($N),kue=dp(BN),Eue=dp(zN),Tue=dp(WN),su=TF;(FN&&su(new FN(new ArrayBuffer(1)))!=D3||$N&&su(new $N)!=N3||BN&&su(BN.resolve())!=S3||zN&&su(new zN)!=C3||WN&&su(new WN)!=P3)&&(su=function(e){var t=TF(e),n=t==Cue?e.constructor:void 0,r=n?dp(n):"";if(r)switch(r){case Pue:return D3;case Due:return N3;case kue:return S3;case Eue:return C3;case Tue:return P3}return t});var tb=su,b2=MC,Aue=jF,_ue=Nce,Mue=lue,k3=tb,E3=Wi,T3=Z1,Rue=FC,Lue=1,A3="[object Arguments]",_3="[object Array]",Wx="[object Object]",Iue=Object.prototype,M3=Iue.hasOwnProperty;function Oue(e,t,n,r,a,i){var o=E3(e),l=E3(t),c=o?_3:k3(e),d=l?_3:k3(t);c=c==A3?Wx:c,d=d==A3?Wx:d;var u=c==Wx,h=d==Wx,f=c==d;if(f&&T3(e)){if(!T3(t))return!1;o=!0,u=!1}if(f&&!u)return i||(i=new b2),o||Rue(e)?Aue(e,t,n,r,a,i):_ue(e,t,c,n,r,a,i);if(!(n&Lue)){var p=u&&M3.call(e,"__wrapped__"),y=h&&M3.call(t,"__wrapped__");if(p||y){var g=p?e.value():e,x=y?t.value():t;return i||(i=new b2),a(g,x,n,r,i)}}return f?(i||(i=new b2),Mue(e,t,n,r,a,i)):!1}var Fue=Oue,$ue=Fue,R3=Dd;function AF(e,t,n,r,a){return e===t?!0:e==null||t==null||!R3(e)&&!R3(t)?e!==e&&t!==t:$ue(e,t,n,r,AF,a)}var BC=AF,Bue=BC;function zue(e,t){return Bue(e,t)}var _F=zue;const Wue=qa(_F);function Su(e,t){var n=B1(e);return n?n.innerHeight:t?e.clientHeight:oo(e).height}function hv(e,t,n){e.closest&&!n&&e.closest(t);var r=e;do{if(H1(r,t))return r;r=r.parentElement}while(r&&r!==n&&r.nodeType===document.ELEMENT_NODE);return null}const Hue=Object.freeze(Object.defineProperty({__proto__:null,default:hv},Symbol.toStringTag,{value:"Module"}));function que(e,t,n,r){for(var a=e.length,i=n+(r?1:-1);r?i--:++i<a;)if(t(e[i],i,e))return i;return-1}var Vue=que,Uue=MC,Yue=BC,Gue=1,Jue=2;function Kue(e,t,n,r){var a=n.length,i=a,o=!r;if(e==null)return!i;for(e=Object(e);a--;){var l=n[a];if(o&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++a<i;){l=n[a];var c=l[0],d=e[c],u=l[1];if(o&&l[2]){if(d===void 0&&!(c in e))return!1}else{var h=new Uue;if(r)var f=r(d,u,c,e,t,h);if(!(f===void 0?Yue(u,d,Gue|Jue,r,h):f))return!1}}return!0}var Xue=Kue,Que=ac;function Zue(e){return e===e&&!Que(e)}var MF=Zue,ehe=MF,the=uv;function nhe(e){for(var t=the(e),n=t.length;n--;){var r=t[n],a=e[r];t[n]=[r,a,ehe(a)]}return t}var rhe=nhe;function she(e,t){return function(n){return n==null?!1:n[e]===t&&(t!==void 0||e in Object(n))}}var RF=she,ahe=Xue,ihe=rhe,ohe=RF;function lhe(e){var t=ihe(e);return t.length==1&&t[0][2]?ohe(t[0][0],t[0][1]):function(n){return n===e||ahe(n,e,t)}}var che=lhe,dhe=Wi,uhe=iv,hhe=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,fhe=/^\w*$/;function phe(e,t){if(dhe(e))return!1;var n=typeof e;return n=="number"||n=="symbol"||n=="boolean"||e==null||uhe(e)?!0:fhe.test(e)||!hhe.test(e)||t!=null&&e in Object(t)}var zC=phe,LF=_C,mhe="Expected a function";function WC(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(mhe);var n=function(){var r=arguments,a=t?t.apply(this,r):r[0],i=n.cache;if(i.has(a))return i.get(a);var o=e.apply(this,r);return n.cache=i.set(a,o)||i,o};return n.cache=new(WC.Cache||LF),n}WC.Cache=LF;var ghe=WC,vhe=ghe,xhe=500;function yhe(e){var t=vhe(e,function(r){return n.size===xhe&&n.clear(),r}),n=t.cache;return t}var bhe=yhe,whe=bhe,jhe=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Nhe=/\\(\\)?/g,She=whe(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(jhe,function(n,r,a,i){t.push(a?i.replace(Nhe,"$1"):r||n)}),t}),Che=She;function Phe(e,t){for(var n=-1,r=e==null?0:e.length,a=Array(r);++n<r;)a[n]=t(e[n],n,e);return a}var HC=Phe,L3=sp,Dhe=HC,khe=Wi,Ehe=iv,The=1/0,I3=L3?L3.prototype:void 0,O3=I3?I3.toString:void 0;function IF(e){if(typeof e=="string")return e;if(khe(e))return Dhe(e,IF)+"";if(Ehe(e))return O3?O3.call(e):"";var t=e+"";return t=="0"&&1/e==-The?"-0":t}var Ahe=IF,_he=Ahe;function Mhe(e){return e==null?"":_he(e)}var Rhe=Mhe,Lhe=Wi,Ihe=zC,Ohe=Che,Fhe=Rhe;function $he(e,t){return Lhe(e)?e:Ihe(e,t)?[e]:Ohe(Fhe(e))}var nb=$he,Bhe=iv,zhe=1/0;function Whe(e){if(typeof e=="string"||Bhe(e))return e;var t=e+"";return t=="0"&&1/e==-zhe?"-0":t}var fv=Whe,Hhe=nb,qhe=fv;function Vhe(e,t){t=Hhe(t,e);for(var n=0,r=t.length;e!=null&&n<r;)e=e[qhe(t[n++])];return n&&n==r?e:void 0}var rb=Vhe,Uhe=rb;function Yhe(e,t,n){var r=e==null?void 0:Uhe(e,t);return r===void 0?n:r}var Ghe=Yhe;function Jhe(e,t){return e!=null&&t in Object(e)}var Khe=Jhe,Xhe=nb,Qhe=IC,Zhe=Wi,efe=mC,tfe=pC,nfe=fv;function rfe(e,t,n){t=Xhe(t,e);for(var r=-1,a=t.length,i=!1;++r<a;){var o=nfe(t[r]);if(!(i=e!=null&&n(e,o)))break;e=e[o]}return i||++r!=a?i:(a=e==null?0:e.length,!!a&&tfe(a)&&efe(o,a)&&(Zhe(e)||Qhe(e)))}var sfe=rfe,afe=Khe,ife=sfe;function ofe(e,t){return e!=null&&ife(e,t,afe)}var lfe=ofe,cfe=BC,dfe=Ghe,ufe=lfe,hfe=zC,ffe=MF,pfe=RF,mfe=fv,gfe=1,vfe=2;function xfe(e,t){return hfe(e)&&ffe(t)?pfe(mfe(e),t):function(n){var r=dfe(n,e);return r===void 0&&r===t?ufe(n,e):cfe(t,r,gfe|vfe)}}var yfe=xfe;function bfe(e){return e}var sb=bfe;function wfe(e){return function(t){return t==null?void 0:t[e]}}var jfe=wfe,Nfe=rb;function Sfe(e){return function(t){return Nfe(t,e)}}var Cfe=Sfe,Pfe=jfe,Dfe=Cfe,kfe=zC,Efe=fv;function Tfe(e){return kfe(e)?Pfe(Efe(e)):Dfe(e)}var Afe=Tfe,_fe=che,Mfe=yfe,Rfe=sb,Lfe=Wi,Ife=Afe;function Ofe(e){return typeof e=="function"?e:e==null?Rfe:typeof e=="object"?Lfe(e)?Mfe(e[0],e[1]):_fe(e):Ife(e)}var ab=Ofe,Ffe=Vue,$fe=ab,Bfe=oF,zfe=Math.max;function Wfe(e,t,n){var r=e==null?0:e.length;if(!r)return-1;var a=n==null?0:Bfe(n);return a<0&&(a=zfe(r+a,0)),Ffe(e,$fe(t),a)}var OF=Wfe;const Hfe=qa(OF);var qfe=Math.ceil,Vfe=Math.max;function Ufe(e,t,n,r){for(var a=-1,i=Vfe(qfe((t-e)/(n||1)),0),o=Array(i);i--;)o[r?i:++a]=e,e+=n;return o}var Yfe=Ufe,Gfe=Yfe,Jfe=$1,w2=iF;function Kfe(e){return function(t,n,r){return r&&typeof r!="number"&&Jfe(t,n,r)&&(n=r=void 0),t=w2(t),n===void 0?(n=t,t=0):n=w2(n),r=r===void 0?t<n?1:-1:w2(r),Gfe(t,n,r,e)}}var Xfe=Kfe,Qfe=Xfe,Zfe=Qfe(),epe=Zfe;const tpe=qa(epe);var F3=Number.isNaN||function(t){return typeof t=="number"&&t!==t};function npe(e,t){return!!(e===t||F3(e)&&F3(t))}function rpe(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!npe(e[n],t[n]))return!1;return!0}function FF(e,t){t===void 0&&(t=rpe);var n=null;function r(){for(var a=[],i=0;i<arguments.length;i++)a[i]=arguments[i];if(n&&n.lastThis===this&&t(a,n.lastArgs))return n.lastResult;var o=e.apply(this,a);return n={lastResult:o,lastArgs:a,lastThis:this},o}return r.clear=function(){n=null},r}function Mg(e,t){var n=B1(e);return n?n.innerWidth:t?e.clientWidth:oo(e).width}var $3=sp,spe=IC,ape=Wi,B3=$3?$3.isConcatSpreadable:void 0;function ipe(e){return ape(e)||spe(e)||!!(B3&&e&&e[B3])}var ope=ipe,lpe=RC,cpe=ope;function $F(e,t,n,r,a){var i=-1,o=e.length;for(n||(n=cpe),a||(a=[]);++i<o;){var l=e[i];t>0&&n(l)?t>1?$F(l,t-1,n,r,a):lpe(a,l):r||(a[a.length]=l)}return a}var BF=$F;function dpe(e){return function(t,n,r){for(var a=-1,i=Object(t),o=r(t),l=o.length;l--;){var c=o[e?l:++a];if(n(i[c],c,i)===!1)break}return t}}var upe=dpe,hpe=upe,fpe=hpe(),ppe=fpe,mpe=ppe,gpe=uv;function vpe(e,t){return e&&mpe(e,t,gpe)}var qC=vpe,xpe=av;function ype(e,t){return function(n,r){if(n==null)return n;if(!xpe(n))return e(n,r);for(var a=n.length,i=t?a:-1,o=Object(n);(t?i--:++i<a)&&r(o[i],i,o)!==!1;);return n}}var bpe=ype,wpe=qC,jpe=bpe,Npe=jpe(wpe),Spe=Npe,Cpe=Spe,Ppe=av;function Dpe(e,t){var n=-1,r=Ppe(e)?Array(e.length):[];return Cpe(e,function(a,i,o){r[++n]=t(a,i,o)}),r}var kpe=Dpe;function Epe(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}var Tpe=Epe,z3=iv;function Ape(e,t){if(e!==t){var n=e!==void 0,r=e===null,a=e===e,i=z3(e),o=t!==void 0,l=t===null,c=t===t,d=z3(t);if(!l&&!d&&!i&&e>t||i&&o&&c&&!l&&!d||r&&o&&c||!n&&c||!a)return 1;if(!r&&!i&&!d&&e<t||d&&n&&a&&!r&&!i||l&&n&&a||!o&&a||!c)return-1}return 0}var _pe=Ape,Mpe=_pe;function Rpe(e,t,n){for(var r=-1,a=e.criteria,i=t.criteria,o=a.length,l=n.length;++r<o;){var c=Mpe(a[r],i[r]);if(c){if(r>=l)return c;var d=n[r];return c*(d=="desc"?-1:1)}}return e.index-t.index}var Lpe=Rpe,j2=HC,Ipe=rb,Ope=ab,Fpe=kpe,$pe=Tpe,Bpe=eb,zpe=Lpe,Wpe=sb,Hpe=Wi;function qpe(e,t,n){t.length?t=j2(t,function(i){return Hpe(i)?function(o){return Ipe(o,i.length===1?i[0]:i)}:i}):t=[Wpe];var r=-1;t=j2(t,Bpe(Ope));var a=Fpe(e,function(i,o,l){var c=j2(t,function(d){return d(i)});return{criteria:c,index:++r,value:i}});return $pe(a,function(i,o){return zpe(i,o,n)})}var Vpe=qpe;function Upe(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}var Ype=Upe,Gpe=Ype,W3=Math.max;function Jpe(e,t,n){return t=W3(t===void 0?e.length-1:t,0),function(){for(var r=arguments,a=-1,i=W3(r.length-t,0),o=Array(i);++a<i;)o[a]=r[t+a];a=-1;for(var l=Array(t+1);++a<t;)l[a]=r[a];return l[t]=n(o),Gpe(e,this,l)}}var zF=Jpe;function Kpe(e){return function(){return e}}var Xpe=Kpe,Qpe=nh,Zpe=function(){try{var e=Qpe(Object,"defineProperty");return e({},"",{}),e}catch{}}(),WF=Zpe,eme=Xpe,H3=WF,tme=sb,nme=H3?function(e,t){return H3(e,"toString",{configurable:!0,enumerable:!1,value:eme(t),writable:!0})}:tme,rme=nme,sme=800,ame=16,ime=Date.now;function ome(e){var t=0,n=0;return function(){var r=ime(),a=ame-(r-n);if(n=r,a>0){if(++t>=sme)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var lme=ome,cme=rme,dme=lme,ume=dme(cme),HF=ume,hme=sb,fme=zF,pme=HF;function mme(e,t){return pme(fme(e,t,hme),e+"")}var qF=mme,gme=BF,vme=Vpe,xme=qF,q3=$1,yme=xme(function(e,t){if(e==null)return[];var n=t.length;return n>1&&q3(e,t[0],t[1])?t=[]:n>2&&q3(t[0],t[1],t[2])&&(t=[t[0]]),vme(e,gme(t,1),[])}),bme=yme;const wme=qa(bme);function VF(e){return $O(e)||nF(e)||cC(e)||BO()}function jme(e){var t=[];if(e!=null)for(var n in Object(e))t.push(n);return t}var Nme=jme,Sme=ac,Cme=$C,Pme=Nme,Dme=Object.prototype,kme=Dme.hasOwnProperty;function Eme(e){if(!Sme(e))return Pme(e);var t=Cme(e),n=[];for(var r in e)r=="constructor"&&(t||!kme.call(e,r))||n.push(r);return n}var Tme=Eme,Ame=DF,_me=Tme,Mme=av;function Rme(e){return Mme(e)?Ame(e,!0):_me(e)}var ib=Rme,Lme=qF,Ime=sv,Ome=$1,Fme=ib,UF=Object.prototype,$me=UF.hasOwnProperty,Bme=Lme(function(e,t){e=Object(e);var n=-1,r=t.length,a=r>2?t[2]:void 0;for(a&&Ome(t[0],t[1],a)&&(r=1);++n<r;)for(var i=t[n],o=Fme(i),l=-1,c=o.length;++l<c;){var d=o[l],u=e[d];(u===void 0||Ime(u,UF[d])&&!$me.call(e,d))&&(e[d]=i[d])}return e}),zme=Bme;const Wme=qa(zme);var V3=WF;function Hme(e,t,n){t=="__proto__"&&V3?V3(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}var VC=Hme,qme=VC,Vme=qC,Ume=ab;function Yme(e,t){var n={};return t=Ume(t),Vme(e,function(r,a,i){qme(n,a,t(r,a,i))}),n}var Gme=Yme;const Jme=qa(Gme);function Kme(e,t){for(var n=-1,r=e==null?0:e.length;++n<r&&t(e[n],n,e)!==!1;);return e}var YF=Kme,Xme=VC,Qme=sv,Zme=Object.prototype,ege=Zme.hasOwnProperty;function tge(e,t,n){var r=e[t];(!(ege.call(e,t)&&Qme(r,n))||n===void 0&&!(t in e))&&Xme(e,t,n)}var GF=tge,nge=GF,rge=VC;function sge(e,t,n,r){var a=!n;n||(n={});for(var i=-1,o=t.length;++i<o;){var l=t[i],c=r?r(n[l],e[l],l,n,e):void 0;c===void 0&&(c=e[l]),a?rge(n,l,c):nge(n,l,c)}return n}var pv=sge,age=pv,ige=uv;function oge(e,t){return e&&age(t,ige(t),e)}var lge=oge,cge=pv,dge=ib;function uge(e,t){return e&&cge(t,dge(t),e)}var hge=uge,Iy={exports:{}};Iy.exports;(function(e,t){var n=il,r=t&&!t.nodeType&&t,a=r&&!0&&e&&!e.nodeType&&e,i=a&&a.exports===r,o=i?n.Buffer:void 0,l=o?o.allocUnsafe:void 0;function c(d,u){if(u)return d.slice();var h=d.length,f=l?l(h):new d.constructor(h);return d.copy(f),f}e.exports=c})(Iy,Iy.exports);var fge=Iy.exports;function pge(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}var mge=pge,gge=pv,vge=LC;function xge(e,t){return gge(e,vge(e),t)}var yge=xge,bge=kF,wge=bge(Object.getPrototypeOf,Object),ob=wge,jge=RC,Nge=ob,Sge=LC,Cge=CF,Pge=Object.getOwnPropertySymbols,Dge=Pge?function(e){for(var t=[];e;)jge(t,Sge(e)),e=Nge(e);return t}:Cge,JF=Dge,kge=pv,Ege=JF;function Tge(e,t){return kge(e,Ege(e),t)}var Age=Tge,_ge=SF,Mge=JF,Rge=ib;function Lge(e){return _ge(e,Rge,Mge)}var KF=Lge,Ige=Object.prototype,Oge=Ige.hasOwnProperty;function Fge(e){var t=e.length,n=new e.constructor(t);return t&&typeof e[0]=="string"&&Oge.call(e,"index")&&(n.index=e.index,n.input=e.input),n}var $ge=Fge,U3=NF;function Bge(e){var t=new e.constructor(e.byteLength);return new U3(t).set(new U3(e)),t}var UC=Bge,zge=UC;function Wge(e,t){var n=t?zge(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}var Hge=Wge,qge=/\w*$/;function Vge(e){var t=new e.constructor(e.source,qge.exec(e));return t.lastIndex=e.lastIndex,t}var Uge=Vge,Y3=sp,G3=Y3?Y3.prototype:void 0,J3=G3?G3.valueOf:void 0;function Yge(e){return J3?Object(J3.call(e)):{}}var Gge=Yge,Jge=UC;function Kge(e,t){var n=t?Jge(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}var Xge=Kge,Qge=UC,Zge=Hge,eve=Uge,tve=Gge,nve=Xge,rve="[object Boolean]",sve="[object Date]",ave="[object Map]",ive="[object Number]",ove="[object RegExp]",lve="[object Set]",cve="[object String]",dve="[object Symbol]",uve="[object ArrayBuffer]",hve="[object DataView]",fve="[object Float32Array]",pve="[object Float64Array]",mve="[object Int8Array]",gve="[object Int16Array]",vve="[object Int32Array]",xve="[object Uint8Array]",yve="[object Uint8ClampedArray]",bve="[object Uint16Array]",wve="[object Uint32Array]";function jve(e,t,n){var r=e.constructor;switch(t){case uve:return Qge(e);case rve:case sve:return new r(+e);case hve:return Zge(e,n);case fve:case pve:case mve:case gve:case vve:case xve:case yve:case bve:case wve:return nve(e,n);case ave:return new r;case ive:case cve:return new r(e);case ove:return eve(e);case lve:return new r;case dve:return tve(e)}}var Nve=jve,Sve=ac,K3=Object.create,Cve=function(){function e(){}return function(t){if(!Sve(t))return{};if(K3)return K3(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}(),XF=Cve,Pve=XF,Dve=ob,kve=$C;function Eve(e){return typeof e.constructor=="function"&&!kve(e)?Pve(Dve(e)):{}}var Tve=Eve,Ave=tb,_ve=Dd,Mve="[object Map]";function Rve(e){return _ve(e)&&Ave(e)==Mve}var Lve=Rve,Ive=Lve,Ove=eb,X3=OC,Q3=X3&&X3.isMap,Fve=Q3?Ove(Q3):Ive,$ve=Fve,Bve=tb,zve=Dd,Wve="[object Set]";function Hve(e){return zve(e)&&Bve(e)==Wve}var qve=Hve,Vve=qve,Uve=eb,Z3=OC,eT=Z3&&Z3.isSet,Yve=eT?Uve(eT):Vve,Gve=Yve,Jve=MC,Kve=YF,Xve=GF,Qve=lge,Zve=hge,exe=fge,txe=mge,nxe=yge,rxe=Age,sxe=EF,axe=KF,ixe=tb,oxe=$ge,lxe=Nve,cxe=Tve,dxe=Wi,uxe=Z1,hxe=$ve,fxe=ac,pxe=Gve,mxe=uv,gxe=ib,vxe=1,xxe=2,yxe=4,QF="[object Arguments]",bxe="[object Array]",wxe="[object Boolean]",jxe="[object Date]",Nxe="[object Error]",ZF="[object Function]",Sxe="[object GeneratorFunction]",Cxe="[object Map]",Pxe="[object Number]",e8="[object Object]",Dxe="[object RegExp]",kxe="[object Set]",Exe="[object String]",Txe="[object Symbol]",Axe="[object WeakMap]",_xe="[object ArrayBuffer]",Mxe="[object DataView]",Rxe="[object Float32Array]",Lxe="[object Float64Array]",Ixe="[object Int8Array]",Oxe="[object Int16Array]",Fxe="[object Int32Array]",$xe="[object Uint8Array]",Bxe="[object Uint8ClampedArray]",zxe="[object Uint16Array]",Wxe="[object Uint32Array]",Bn={};Bn[QF]=Bn[bxe]=Bn[_xe]=Bn[Mxe]=Bn[wxe]=Bn[jxe]=Bn[Rxe]=Bn[Lxe]=Bn[Ixe]=Bn[Oxe]=Bn[Fxe]=Bn[Cxe]=Bn[Pxe]=Bn[e8]=Bn[Dxe]=Bn[kxe]=Bn[Exe]=Bn[Txe]=Bn[$xe]=Bn[Bxe]=Bn[zxe]=Bn[Wxe]=!0;Bn[Nxe]=Bn[ZF]=Bn[Axe]=!1;function D0(e,t,n,r,a,i){var o,l=t&vxe,c=t&xxe,d=t&yxe;if(n&&(o=a?n(e,r,a,i):n(e)),o!==void 0)return o;if(!fxe(e))return e;var u=dxe(e);if(u){if(o=oxe(e),!l)return txe(e,o)}else{var h=ixe(e),f=h==ZF||h==Sxe;if(uxe(e))return exe(e,l);if(h==e8||h==QF||f&&!a){if(o=c||f?{}:cxe(e),!l)return c?rxe(e,Zve(o,e)):nxe(e,Qve(o,e))}else{if(!Bn[h])return a?e:{};o=lxe(e,h,l)}}i||(i=new Jve);var p=i.get(e);if(p)return p;i.set(e,o),pxe(e)?e.forEach(function(x){o.add(D0(x,t,n,x,e,i))}):hxe(e)&&e.forEach(function(x,m){o.set(m,D0(x,t,n,m,e,i))});var y=d?c?axe:sxe:c?gxe:mxe,g=u?void 0:y(e);return Kve(g||e,function(x,m){g&&(m=x,x=e[m]),Xve(o,m,D0(x,t,n,m,e,i))}),o}var Hxe=D0;function qxe(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var Vxe=qxe,Uxe=rb,Yxe=rF;function Gxe(e,t){return t.length<2?e:Uxe(e,Yxe(t,0,-1))}var Jxe=Gxe,Kxe=nb,Xxe=Vxe,Qxe=Jxe,Zxe=fv;function e0e(e,t){return t=Kxe(t,e),e=Qxe(e,t),e==null||delete e[Zxe(Xxe(t))]}var t0e=e0e,n0e=ap,r0e=ob,s0e=Dd,a0e="[object Object]",i0e=Function.prototype,o0e=Object.prototype,t8=i0e.toString,l0e=o0e.hasOwnProperty,c0e=t8.call(Object);function d0e(e){if(!s0e(e)||n0e(e)!=a0e)return!1;var t=r0e(e);if(t===null)return!0;var n=l0e.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&t8.call(n)==c0e}var u0e=d0e,h0e=u0e;function f0e(e){return h0e(e)?void 0:e}var p0e=f0e,m0e=BF;function g0e(e){var t=e==null?0:e.length;return t?m0e(e,1):[]}var v0e=g0e,x0e=v0e,y0e=zF,b0e=HF;function w0e(e){return b0e(y0e(e,void 0,x0e),e+"")}var j0e=w0e,N0e=HC,S0e=Hxe,C0e=t0e,P0e=nb,D0e=pv,k0e=p0e,E0e=j0e,T0e=KF,A0e=1,_0e=2,M0e=4,R0e=E0e(function(e,t){var n={};if(e==null)return n;var r=!1;t=N0e(t,function(i){return i=P0e(i,e),r||(r=i.length>1),i}),D0e(e,T0e(e),n),r&&(n=S0e(n,A0e|_0e|M0e,k0e));for(var a=t.length;a--;)C0e(n,t[a]);return n}),L0e=R0e;const I0e=qa(L0e);var O0e=YF,F0e=XF,$0e=qC,B0e=ab,z0e=ob,W0e=Wi,H0e=Z1,q0e=fC,V0e=ac,U0e=FC;function Y0e(e,t,n){var r=W0e(e),a=r||H0e(e)||U0e(e);if(t=B0e(t),n==null){var i=e&&e.constructor;a?n=r?new i:[]:V0e(e)?n=q0e(i)?F0e(z0e(e)):{}:n={}}return(a?O0e:$0e)(e,function(o,l,c){return t(n,o,l,c)}),n}var G0e=Y0e;const J0e=qa(G0e);var K0e={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(pa,function(){return function(n,r,a){r.prototype.isBetween=function(i,o,l,c){var d=a(i),u=a(o),h=(c=c||"()")[0]==="(",f=c[1]===")";return(h?this.isAfter(d,l):!this.isBefore(d,l))&&(f?this.isBefore(u,l):!this.isAfter(u,l))||(h?this.isBefore(d,l):!this.isAfter(d,l))&&(f?this.isAfter(u,l):!this.isBefore(u,l))}}})})(K0e);var X0e={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(pa,function(){return function(n,r){r.prototype.isSameOrAfter=function(a,i){return this.isSame(a,i)||this.isAfter(a,i)}}})})(X0e);var Q0e={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(pa,function(){return function(n,r){r.prototype.isSameOrBefore=function(a,i){return this.isSame(a,i)||this.isBefore(a,i)}}})})(Q0e);var Z0e={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(pa,function(){return function(n,r,a){var i=r.prototype,o=function(h){return h&&(h.indexOf?h:h.s)},l=function(h,f,p,y,g){var x=h.name?h:h.$locale(),m=o(x[f]),v=o(x[p]),b=m||v.map(function(S){return S.slice(0,y)});if(!g)return b;var C=x.weekStart;return b.map(function(S,P){return b[(P+(C||0))%7]})},c=function(){return a.Ls[a.locale()]},d=function(h,f){return h.formats[f]||function(p){return p.replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(y,g,x){return g||x.slice(1)})}(h.formats[f.toUpperCase()])},u=function(){var h=this;return{months:function(f){return f?f.format("MMMM"):l(h,"months")},monthsShort:function(f){return f?f.format("MMM"):l(h,"monthsShort","months",3)},firstDayOfWeek:function(){return h.$locale().weekStart||0},weekdays:function(f){return f?f.format("dddd"):l(h,"weekdays")},weekdaysMin:function(f){return f?f.format("dd"):l(h,"weekdaysMin","weekdays",2)},weekdaysShort:function(f){return f?f.format("ddd"):l(h,"weekdaysShort","weekdays",3)},longDateFormat:function(f){return d(h.$locale(),f)},meridiem:this.$locale().meridiem,ordinal:this.$locale().ordinal}};i.localeData=function(){return u.bind(this)()},a.localeData=function(){var h=c();return{firstDayOfWeek:function(){return h.weekStart||0},weekdays:function(){return a.weekdays()},weekdaysShort:function(){return a.weekdaysShort()},weekdaysMin:function(){return a.weekdaysMin()},months:function(){return a.months()},monthsShort:function(){return a.monthsShort()},longDateFormat:function(f){return d(h,f)},meridiem:h.meridiem,ordinal:h.ordinal}},a.months=function(){return l(c(),"months")},a.monthsShort=function(){return l(c(),"monthsShort","months",3)},a.weekdays=function(h){return l(c(),"weekdays",null,null,h)},a.weekdaysShort=function(h){return l(c(),"weekdaysShort","weekdays",3,h)},a.weekdaysMin=function(h){return l(c(),"weekdaysMin","weekdays",2,h)}}})})(Z0e);var eye={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(pa,function(){var n={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};return function(r,a,i){var o=a.prototype,l=o.format;i.en.formats=n,o.format=function(c){c===void 0&&(c="YYYY-MM-DDTHH:mm:ssZ");var d=this.$locale().formats,u=function(h,f){return h.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(p,y,g){var x=g&&g.toUpperCase();return y||f[g]||n[g]||f[x].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(m,v,b){return v||b.slice(1)})})}(c,d===void 0?{}:d);return l.call(this,u)}}})})(eye);var tye={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(pa,function(){return function(n,r,a){var i=function(o,l){if(!l||!l.length||l.length===1&&!l[0]||l.length===1&&Array.isArray(l[0])&&!l[0].length)return null;var c;l.length===1&&l[0].length>0&&(l=l[0]),c=(l=l.filter(function(u){return u}))[0];for(var d=1;d<l.length;d+=1)l[d].isValid()&&!l[d][o](c)||(c=l[d]);return c};a.max=function(){var o=[].slice.call(arguments,0);return i("isAfter",o)},a.min=function(){var o=[].slice.call(arguments,0);return i("isBefore",o)}}})})(tye);var nye={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(pa,function(){var n="minute",r=/[+-]\d\d(?::?\d\d)?/g,a=/([+-]|\d\d)/g;return function(i,o,l){var c=o.prototype;l.utc=function(g){var x={date:g,utc:!0,args:arguments};return new o(x)},c.utc=function(g){var x=l(this.toDate(),{locale:this.$L,utc:!0});return g?x.add(this.utcOffset(),n):x},c.local=function(){return l(this.toDate(),{locale:this.$L,utc:!1})};var d=c.parse;c.parse=function(g){g.utc&&(this.$u=!0),this.$utils().u(g.$offset)||(this.$offset=g.$offset),d.call(this,g)};var u=c.init;c.init=function(){if(this.$u){var g=this.$d;this.$y=g.getUTCFullYear(),this.$M=g.getUTCMonth(),this.$D=g.getUTCDate(),this.$W=g.getUTCDay(),this.$H=g.getUTCHours(),this.$m=g.getUTCMinutes(),this.$s=g.getUTCSeconds(),this.$ms=g.getUTCMilliseconds()}else u.call(this)};var h=c.utcOffset;c.utcOffset=function(g,x){var m=this.$utils().u;if(m(g))return this.$u?0:m(this.$offset)?h.call(this):this.$offset;if(typeof g=="string"&&(g=function(S){S===void 0&&(S="");var P=S.match(r);if(!P)return null;var D=(""+P[0]).match(a)||["-",0,0],N=D[0],M=60*+D[1]+ +D[2];return M===0?0:N==="+"?M:-M}(g),g===null))return this;var v=Math.abs(g)<=16?60*g:g,b=this;if(x)return b.$offset=v,b.$u=g===0,b;if(g!==0){var C=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(b=this.local().add(v+C,n)).$offset=v,b.$x.$localOffset=C}else b=this.utc();return b};var f=c.format;c.format=function(g){var x=g||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return f.call(this,x)},c.valueOf=function(){var g=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*g},c.isUTC=function(){return!!this.$u},c.toISOString=function(){return this.toDate().toISOString()},c.toString=function(){return this.toDate().toUTCString()};var p=c.toDate;c.toDate=function(g){return g==="s"&&this.$offset?l(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():p.call(this)};var y=c.diff;c.diff=function(g,x,m){if(g&&this.$u===g.$u)return y.call(this,g,x,m);var v=this.local(),b=l(g).local();return y.call(v,b,x,m)}}})})(nye);var rye={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(pa,function(){return function(n,r){r.prototype.isLeapYear=function(){return this.$y%4==0&&this.$y%100!=0||this.$y%400==0}}})})(rye);function To(e){return e.children}var Wa={PREVIOUS:"PREV",NEXT:"NEXT",TODAY:"TODAY",DATE:"DATE"},fa={MONTH:"month",WEEK:"week",WORK_WEEK:"work_week",DAY:"day",AGENDA:"agenda"},tT=Object.keys(fa).map(function(e){return fa[e]});ut.oneOfType([ut.string,ut.func]);ut.any;ut.func;ut.oneOfType([ut.arrayOf(ut.oneOf(tT)),ut.objectOf(function(e,t){var n=tT.indexOf(t)!==-1&&typeof e[t]=="boolean";if(n)return null;for(var r=arguments.length,a=new Array(r>2?r-2:0),i=2;i<r;i++)a[i-2]=arguments[i];return ut.elementType.apply(ut,[e,t].concat(a))})]);ut.oneOfType([ut.oneOf(["overlap","no-overlap"]),ut.func]);var nT={seconds:1e3,minutes:1e3*60,hours:1e3*60*60,day:1e3*60*60*24};function n8(e,t){var n=Ts(e,"month");return Ts(n,"week",t.startOfWeek())}function r8(e,t){var n=Ty(e,"month");return Ty(n,"week",t.startOfWeek())}function sye(e,t){for(var n=n8(e,t),r=r8(e,t),a=[];np(n,r,"day");)a.push(n),n=po(n,1,"day");return a}function aye(e,t){var n=Ts(e,t);return tp(n,e)?n:po(n,1,t)}function iye(e,t){for(var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"day",r=e,a=[];np(r,t,n);)a.push(r),r=po(r,1,n);return a}function oye(e,t){return t==null&&e==null?null:(t==null&&(t=new Date),e==null&&(e=new Date),e=Ts(e,"day"),e=Eg(e,Eg(t)),e=$f(e,$f(t)),e=kg(e,kg(t)),Dg(e,Dg(t)))}function rT(e){return Eg(e)===0&&$f(e)===0&&kg(e)===0&&Dg(e)===0}function lye(e,t,n,r){return n==="day"&&(n="date"),Math.abs(BE[n](e,void 0,r)-BE[n](t,void 0,r))}function YC(e,t,n){return!n||n==="milliseconds"?Math.abs(+e-+t):Math.round(Math.abs(+Ts(e,n)/nT[n]-+Ts(t,n)/nT[n]))}var cye=ut.oneOfType([ut.string,ut.func]);function dye(e,t,n,r,a){var i=typeof r=="function"?r(n,a,e):t.call(e,n,r,a);return wg(i==null||typeof i=="string","`localizer format(..)` must return a string, null, or undefined"),i}function uye(e,t,n){return new Date(e.getFullYear(),e.getMonth(),e.getDate(),0,t+n,0,0)}function GC(e,t){return e.getTimezoneOffset()-t.getTimezoneOffset()}function hye(e,t){return YC(e,t,"minutes")+GC(e,t)}function fye(e){var t=Ts(e,"day");return YC(t,e,"minutes")+GC(t,e)}function pye(e,t){return hC(e,t,"day")}function mye(e,t,n){var r=tp(e,t,"minutes");return r?rv(t,n,"minutes"):F1(t,n,"minutes")}function HN(e,t){return lye(e,t,"day")}function gye(e){var t=e.evtA,n=t.start,r=t.end,a=t.allDay,i=e.evtB,o=i.start,l=i.end,c=i.allDay,d=+Ts(n,"day")-+Ts(o,"day"),u=HN(n,r),h=HN(o,l);return d||h-u||!!c-!!a||+n-+o||+r-+l}function vye(e){var t=e.event,n=t.start,r=t.end,a=e.range,i=a.start,o=a.end,l=Ts(n,"day"),c=np(l,o,"day"),d=uC(l,r,"minutes"),u=d?F1(r,i,"minutes"):rv(r,i,"minutes");return c&&u}function xye(e,t){return tp(e,t,"day")}function yye(e,t){return rT(e)&&rT(t)}var bye=is(function e(t){var n=this;as(this,e),wg(typeof t.format=="function","date localizer `format(..)` must be a function"),wg(typeof t.firstOfWeek=="function","date localizer `firstOfWeek(..)` must be a function"),this.propType=t.propType||cye,this.formats=t.formats,this.format=function(){for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return dye.apply(void 0,[n,t.format].concat(a))},this.startOfWeek=t.firstOfWeek,this.merge=t.merge||oye,this.inRange=t.inRange||QO,this.lt=t.lt||hC,this.lte=t.lte||np,this.gt=t.gt||F1,this.gte=t.gte||rv,this.eq=t.eq||tp,this.neq=t.neq||uC,this.startOf=t.startOf||Ts,this.endOf=t.endOf||Ty,this.add=t.add||po,this.range=t.range||iye,this.diff=t.diff||YC,this.ceil=t.ceil||aye,this.min=t.min||KO,this.max=t.max||XO,this.minutes=t.minutes||$f,this.daySpan=t.daySpan||HN,this.firstVisibleDay=t.firstVisibleDay||n8,this.lastVisibleDay=t.lastVisibleDay||r8,this.visibleDays=t.visibleDays||sye,this.getSlotDate=t.getSlotDate||uye,this.getTimezoneOffset=t.getTimezoneOffset||function(r){return r.getTimezoneOffset()},this.getDstOffset=t.getDstOffset||GC,this.getTotalMin=t.getTotalMin||hye,this.getMinutesFromMidnight=t.getMinutesFromMidnight||fye,this.continuesPrior=t.continuesPrior||pye,this.continuesAfter=t.continuesAfter||mye,this.sortEvents=t.sortEvents||gye,this.inEventRange=t.inEventRange||vye,this.isSameDate=t.isSameDate||xye,this.startAndEndAreDateOnly=t.startAndEndAreDateOnly||yye,this.segmentOffset=t.browserTZOffset?t.browserTZOffset():0});function wye(e,t,n,r){var a=In(In({},e.formats),n);return In(In({},e),{},{messages:r,startOfWeek:function(){return e.startOfWeek(t)},format:function(o,l){return e.format(o,a[l]||l,t)}})}var jye=function(e){function t(){var n;as(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return n=ta(this,t,[].concat(a)),n.navigate=function(o){n.props.onNavigate(o)},n.view=function(o){n.props.onView(o)},n}return na(t,e),is(t,[{key:"render",value:function(){var r=this.props,a=r.localizer.messages,i=r.label;return Q.createElement("div",{className:"rbc-toolbar"},Q.createElement("span",{className:"rbc-btn-group"},Q.createElement("button",{type:"button",onClick:this.navigate.bind(null,Wa.TODAY)},a.today),Q.createElement("button",{type:"button",onClick:this.navigate.bind(null,Wa.PREVIOUS)},a.previous),Q.createElement("button",{type:"button",onClick:this.navigate.bind(null,Wa.NEXT)},a.next)),Q.createElement("span",{className:"rbc-toolbar-label"},i),Q.createElement("span",{className:"rbc-btn-group"},this.viewNamesGroup(a)))}},{key:"viewNamesGroup",value:function(r){var a=this,i=this.props.views,o=this.props.view;if(i.length>1)return i.map(function(l){return Q.createElement("button",{type:"button",key:l,className:lr({"rbc-active":o===l}),onClick:a.view.bind(null,l)},r[l])})}}])}(Q.Component);function Gn(e,t){e&&e.apply(null,[].concat(t))}var Nye={date:"Date",time:"Time",event:"Event",allDay:"All Day",week:"Week",work_week:"Work Week",day:"Day",month:"Month",previous:"Back",next:"Next",yesterday:"Yesterday",tomorrow:"Tomorrow",today:"Today",agenda:"Agenda",noEventsInRange:"There are no events in this range.",showMore:function(t){return"+".concat(t," more")}};function Sye(e){return In(In({},Nye),e)}function Cye(e){var t=e.ref,n=e.callback;j.useEffect(function(){var r=function(i){t.current&&!t.current.contains(i.target)&&n()};return document.addEventListener("mousedown",r),function(){document.removeEventListener("mousedown",r)}},[t,n])}var Pye=["style","className","event","selected","isAllDay","onSelect","onDoubleClick","onKeyPress","localizer","continuesPrior","continuesAfter","accessors","getters","children","components","slotStart","slotEnd"],s8=function(e){function t(){return as(this,t),ta(this,t,arguments)}return na(t,e),is(t,[{key:"render",value:function(){var r=this.props,a=r.style,i=r.className,o=r.event,l=r.selected,c=r.isAllDay,d=r.onSelect,u=r.onDoubleClick,h=r.onKeyPress,f=r.localizer,p=r.continuesPrior,y=r.continuesAfter,g=r.accessors,x=r.getters,m=r.children,v=r.components,b=v.event,C=v.eventWrapper,S=r.slotStart,P=r.slotEnd,D=nl(r,Pye);delete D.resizable;var N=g.title(o),M=g.tooltip(o),L=g.end(o),T=g.start(o),E=g.allDay(o),A=c||E||f.diff(T,f.ceil(L,"day"),"day")>1,O=x.eventProp(o,T,L,l),W=Q.createElement("div",{className:"rbc-event-content",title:M||void 0},b?Q.createElement(b,{event:o,continuesPrior:p,continuesAfter:y,title:N,isAllDay:E,localizer:f,slotStart:S,slotEnd:P}):N);return Q.createElement(C,Object.assign({},this.props,{type:"date"}),Q.createElement("div",Object.assign({},D,{style:In(In({},O.style),a),className:lr("rbc-event",i,O.className,{"rbc-selected":l,"rbc-event-allday":A,"rbc-event-continues-prior":p,"rbc-event-continues-after":y}),onClick:function(F){return d&&d(o,F)},onDoubleClick:function(F){return u&&u(o,F)},onKeyDown:function(F){return h&&h(o,F)}}),typeof m=="function"?m(W):W))}}])}(Q.Component);function lb(e,t){return!e||t==null?!1:Wue(e,t)}function a8(e,t){var n=e.right-e.left,r=n/t;return r}function i8(e,t,n,r){var a=a8(e,r);return n?r-1-Math.floor((t-e.left)/a):Math.floor((t-e.left)/a)}function Dye(e,t){var n=t.x,r=t.y;return r>=e.top&&r<=e.bottom&&n>=e.left&&n<=e.right}function kye(e,t,n,r,a){var i=-1,o=-1,l=r-1,c=a8(t,r),d=i8(t,n.x,a,r),u=t.top<n.y&&t.bottom>n.y,h=t.top<e.y&&t.bottom>e.y,f=e.y>t.bottom,p=t.top>e.y,y=n.top<t.top&&n.bottom>t.bottom;return y&&(i=0,o=l),u&&(p?(i=0,o=d):f&&(i=d,o=l)),h&&(i=o=a?l-Math.floor((e.x-t.left)/c):Math.floor((e.x-t.left)/c),u?d<i?i=d:o=d:e.y<n.y?o=l:i=0),{startIdx:i,endIdx:o}}function Eye(e){var t=e.target,n=e.offset,r=e.container,a=e.box,i=oo(t),o=i.top,l=i.left,c=i.width,d=i.height,u=oo(r),h=u.top,f=u.left,p=u.width,y=u.height,g=oo(a),x=g.width,m=g.height,v=h+y,b=f+p,C=o+m,S=l+x,P=n.x,D=n.y,N=C>v?o-m-D:o+D+d,M=S>b?l+P-x+c:l+P;return{topOffset:N,leftOffset:M}}function Tye(e){var t=e.containerRef,n=e.accessors,r=e.getters,a=e.selected,i=e.components,o=e.localizer,l=e.position,c=e.show,d=e.events,u=e.slotStart,h=e.slotEnd,f=e.onSelect,p=e.onDoubleClick,y=e.onKeyPress,g=e.handleDragStart,x=e.popperRef,m=e.target,v=e.offset;Cye({ref:x,callback:c}),j.useLayoutEffect(function(){var S=Eye({target:m,offset:v,container:t.current,box:x.current}),P=S.topOffset,D=S.leftOffset;x.current.style.top="".concat(P,"px"),x.current.style.left="".concat(D,"px")},[v.x,v.y,m]);var b=l.width,C={minWidth:b+b/2};return Q.createElement("div",{style:C,className:"rbc-overlay",ref:x},Q.createElement("div",{className:"rbc-overlay-header"},o.format(u,"dayHeaderFormat")),d.map(function(S,P){return Q.createElement(s8,{key:P,type:"popup",localizer:o,event:S,getters:r,onSelect:f,accessors:n,components:i,onDoubleClick:p,onKeyPress:y,continuesPrior:o.lt(n.end(S),u,"day"),continuesAfter:o.gte(n.start(S),h,"day"),slotStart:u,slotEnd:h,selected:lb(S,a),draggable:!0,onDragStart:function(){return g(S)},onDragEnd:function(){return c()}})}))}var o8=Q.forwardRef(function(e,t){return Q.createElement(Tye,Object.assign({},e,{popperRef:t}))});o8.propTypes={accessors:ut.object.isRequired,getters:ut.object.isRequired,selected:ut.object,components:ut.object.isRequired,localizer:ut.object.isRequired,position:ut.object.isRequired,show:ut.func.isRequired,events:ut.array.isRequired,slotStart:ut.instanceOf(Date).isRequired,slotEnd:ut.instanceOf(Date),onSelect:ut.func,onDoubleClick:ut.func,onKeyPress:ut.func,handleDragStart:ut.func,style:ut.object,offset:ut.shape({x:ut.number,y:ut.number})};function Aye(e){var t=e.containerRef,n=e.popupOffset,r=n===void 0?5:n,a=e.overlay,i=e.accessors,o=e.localizer,l=e.components,c=e.getters,d=e.selected,u=e.handleSelectEvent,h=e.handleDoubleClickEvent,f=e.handleKeyPressEvent,p=e.handleDragStart,y=e.onHide,g=e.overlayDisplay,x=j.useRef(null);if(!a.position)return null;var m=r;isNaN(r)||(m={x:r,y:r});var v=a.position,b=a.events,C=a.date,S=a.end;return Q.createElement(gie,{rootClose:!0,flip:!0,show:!0,placement:"bottom",onHide:y,target:a.target},function(P){var D=P.props;return Q.createElement(o8,Object.assign({},D,{containerRef:t,ref:x,target:a.target,offset:m,accessors:i,getters:c,selected:d,components:l,localizer:o,position:v,show:g,events:b,slotStart:C,slotEnd:S,onSelect:u,onDoubleClick:h,onKeyPress:f,handleDragStart:p}))})}var JC=Q.forwardRef(function(e,t){return Q.createElement(Aye,Object.assign({},e,{containerRef:t}))});JC.propTypes={popupOffset:ut.oneOfType([ut.number,ut.shape({x:ut.number,y:ut.number})]),overlay:ut.shape({position:ut.object,events:ut.array,date:ut.instanceOf(Date),end:ut.instanceOf(Date)}),accessors:ut.object.isRequired,localizer:ut.object.isRequired,components:ut.object.isRequired,getters:ut.object.isRequired,selected:ut.object,handleSelectEvent:ut.func,handleDoubleClickEvent:ut.func,handleKeyPressEvent:ut.func,handleDragStart:ut.func,onHide:ut.func,overlayDisplay:ut.func};function qs(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:document;return zo(n,e,t,{passive:!1})}function _ye(e,t,n){return!e||Zl(e,document.elementFromPoint(t,n))}function Mye(e,t){var n=t.clientX,r=t.clientY,a=document.elementFromPoint(n,r);return hv(a,".rbc-event",e)}function Rye(e,t){var n=t.clientX,r=t.clientY,a=document.elementFromPoint(n,r);return hv(a,".rbc-show-more",e)}function Oy(e,t){return!!Mye(e,t)}function Lye(e,t){return!!Rye(e,t)}function om(e){var t=e;return e.touches&&e.touches.length&&(t=e.touches[0]),{clientX:t.clientX,clientY:t.clientY,pageX:t.pageX,pageY:t.pageY}}var sT=5,Iye=250,l8=function(){function e(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=n.global,a=r===void 0?!1:r,i=n.longPressThreshold,o=i===void 0?250:i,l=n.validContainers,c=l===void 0?[]:l;as(this,e),this._initialEvent=null,this.selecting=!1,this.isDetached=!1,this.container=t,this.globalMouse=!t||a,this.longPressThreshold=o,this.validContainers=c,this._listeners=Object.create(null),this._handleInitialEvent=this._handleInitialEvent.bind(this),this._handleMoveEvent=this._handleMoveEvent.bind(this),this._handleTerminatingEvent=this._handleTerminatingEvent.bind(this),this._keyListener=this._keyListener.bind(this),this._dropFromOutsideListener=this._dropFromOutsideListener.bind(this),this._dragOverFromOutsideListener=this._dragOverFromOutsideListener.bind(this),this._removeTouchMoveWindowListener=qs("touchmove",function(){},window),this._removeKeyDownListener=qs("keydown",this._keyListener),this._removeKeyUpListener=qs("keyup",this._keyListener),this._removeDropFromOutsideListener=qs("drop",this._dropFromOutsideListener),this._removeDragOverFromOutsideListener=qs("dragover",this._dragOverFromOutsideListener),this._addInitialEventListener()}return is(e,[{key:"on",value:function(n,r){var a=this._listeners[n]||(this._listeners[n]=[]);return a.push(r),{remove:function(){var o=a.indexOf(r);o!==-1&&a.splice(o,1)}}}},{key:"emit",value:function(n){for(var r=arguments.length,a=new Array(r>1?r-1:0),i=1;i<r;i++)a[i-1]=arguments[i];var o,l=this._listeners[n]||[];return l.forEach(function(c){o===void 0&&(o=c.apply(void 0,a))}),o}},{key:"teardown",value:function(){this._initialEvent=null,this._initialEventData=null,this._selectRect=null,this.selecting=!1,this._lastClickData=null,this.isDetached=!0,this._listeners=Object.create(null),this._removeTouchMoveWindowListener&&this._removeTouchMoveWindowListener(),this._removeInitialEventListener&&this._removeInitialEventListener(),this._removeEndListener&&this._removeEndListener(),this._onEscListener&&this._onEscListener(),this._removeMoveListener&&this._removeMoveListener(),this._removeKeyUpListener&&this._removeKeyUpListener(),this._removeKeyDownListener&&this._removeKeyDownListener(),this._removeDropFromOutsideListener&&this._removeDropFromOutsideListener(),this._removeDragOverFromOutsideListener&&this._removeDragOverFromOutsideListener()}},{key:"isSelected",value:function(n){var r=this._selectRect;return!r||!this.selecting?!1:aT(r,qu(n))}},{key:"filter",value:function(n){var r=this._selectRect;return!r||!this.selecting?[]:n.filter(this.isSelected,this)}},{key:"_addLongPressListener",value:function(n,r){var a=this,i=null,o=null,l=null,c=function(f){i=setTimeout(function(){u(),n(f)},a.longPressThreshold),o=qs("touchmove",function(){return u()}),l=qs("touchend",function(){return u()})},d=qs("touchstart",c),u=function(){i&&clearTimeout(i),o&&o(),l&&l(),i=null,o=null,l=null};return r&&c(r),function(){u(),d()}}},{key:"_addInitialEventListener",value:function(){var n=this,r=qs("mousedown",function(i){n._removeInitialEventListener(),n._handleInitialEvent(i),n._removeInitialEventListener=qs("mousedown",n._handleInitialEvent)}),a=qs("touchstart",function(i){n._removeInitialEventListener(),n._removeInitialEventListener=n._addLongPressListener(n._handleInitialEvent,i)});this._removeInitialEventListener=function(){r(),a()}}},{key:"_dropFromOutsideListener",value:function(n){var r=om(n),a=r.pageX,i=r.pageY,o=r.clientX,l=r.clientY;this.emit("dropFromOutside",{x:a,y:i,clientX:o,clientY:l}),n.preventDefault()}},{key:"_dragOverFromOutsideListener",value:function(n){var r=om(n),a=r.pageX,i=r.pageY,o=r.clientX,l=r.clientY;this.emit("dragOverFromOutside",{x:a,y:i,clientX:o,clientY:l}),n.preventDefault()}},{key:"_handleInitialEvent",value:function(n){if(this._initialEvent=n,!this.isDetached){var r=om(n),a=r.clientX,i=r.clientY,o=r.pageX,l=r.pageY,c=this.container(),d,u;if(!(n.which===3||n.button===2||!_ye(c,a,i))){if(!this.globalMouse&&c&&!Zl(c,n.target)){var h=Oye(0),f=h.top,p=h.left,y=h.bottom,g=h.right;if(u=qu(c),d=aT({top:u.top-f,left:u.left-p,bottom:u.bottom+y,right:u.right+g},{top:l,left:o}),!d)return}var x=this.emit("beforeSelect",this._initialEventData={isTouch:/^touch/.test(n.type),x:o,y:l,clientX:a,clientY:i});if(x!==!1)switch(n.type){case"mousedown":this._removeEndListener=qs("mouseup",this._handleTerminatingEvent),this._onEscListener=qs("keydown",this._handleTerminatingEvent),this._removeMoveListener=qs("mousemove",this._handleMoveEvent);break;case"touchstart":this._handleMoveEvent(n),this._removeEndListener=qs("touchend",this._handleTerminatingEvent),this._removeMoveListener=qs("touchmove",this._handleMoveEvent);break}}}}},{key:"_isWithinValidContainer",value:function(n){var r=n.target,a=this.validContainers;return!a||!a.length||!r?!0:a.some(function(i){return!!r.closest(i)})}},{key:"_handleTerminatingEvent",value:function(n){var r=this.selecting,a=this._selectRect;if(!r&&n.type.includes("key")&&(n=this._initialEvent),this.selecting=!1,this._removeEndListener&&this._removeEndListener(),this._removeMoveListener&&this._removeMoveListener(),this._selectRect=null,this._initialEvent=null,this._initialEventData=null,!!n){var i=!this.container||Zl(this.container(),n.target),o=this._isWithinValidContainer(n);return n.key==="Escape"||!o?this.emit("reset"):!r&&i?this._handleClickEvent(n):r?this.emit("select",a):this.emit("reset")}}},{key:"_handleClickEvent",value:function(n){var r=om(n),a=r.pageX,i=r.pageY,o=r.clientX,l=r.clientY,c=new Date().getTime();return this._lastClickData&&c-this._lastClickData.timestamp<Iye?(this._lastClickData=null,this.emit("doubleClick",{x:a,y:i,clientX:o,clientY:l})):(this._lastClickData={timestamp:c},this.emit("click",{x:a,y:i,clientX:o,clientY:l}))}},{key:"_handleMoveEvent",value:function(n){if(!(this._initialEventData===null||this.isDetached)){var r=this._initialEventData,a=r.x,i=r.y,o=om(n),l=o.pageX,c=o.pageY,d=Math.abs(a-l),u=Math.abs(i-c),h=Math.min(l,a),f=Math.min(c,i),p=this.selecting,y=this.isClick(l,c);y&&!p&&!(d||u)||(!p&&!y&&this.emit("selectStart",this._initialEventData),y||(this.selecting=!0,this._selectRect={top:f,left:h,x:l,y:c,right:h+d,bottom:f+u},this.emit("selecting",this._selectRect)),n.preventDefault())}}},{key:"_keyListener",value:function(n){this.ctrl=n.metaKey||n.ctrlKey}},{key:"isClick",value:function(n,r){var a=this._initialEventData,i=a.x,o=a.y,l=a.isTouch;return!l&&Math.abs(n-i)<=sT&&Math.abs(r-o)<=sT}}])}();function Oye(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return on(e)!=="object"&&(e={top:e,left:e,right:e,bottom:e}),e}function aT(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,r=qu(e),a=r.top,i=r.left,o=r.right,l=o===void 0?i:o,c=r.bottom,d=c===void 0?a:c,u=qu(t),h=u.top,f=u.left,p=u.right,y=p===void 0?f:p,g=u.bottom,x=g===void 0?h:g;return!(d-n<h||a+n>x||l-n<f||i+n>y)}function qu(e){if(!e.getBoundingClientRect)return e;var t=e.getBoundingClientRect(),n=t.left+iT("left"),r=t.top+iT("top");return{top:r,left:n,right:(e.offsetWidth||0)+n,bottom:(e.offsetHeight||0)+r}}function iT(e){if(e==="left")return window.pageXOffset||document.body.scrollLeft||0;if(e==="top")return window.pageYOffset||document.body.scrollTop||0}var Fye=function(e){function t(n,r){var a;return as(this,t),a=ta(this,t,[n,r]),a.state={selecting:!1},a.containerRef=j.createRef(),a}return na(t,e),is(t,[{key:"componentDidMount",value:function(){this.props.selectable&&this._selectable()}},{key:"componentWillUnmount",value:function(){this._teardownSelectable()}},{key:"componentDidUpdate",value:function(r){!r.selectable&&this.props.selectable&&this._selectable(),r.selectable&&!this.props.selectable&&this._teardownSelectable()}},{key:"render",value:function(){var r=this.props,a=r.range,i=r.getNow,o=r.getters,l=r.date,c=r.components.dateCellWrapper,d=r.localizer,u=this.state,h=u.selecting,f=u.startIdx,p=u.endIdx,y=i();return Q.createElement("div",{className:"rbc-row-bg",ref:this.containerRef},a.map(function(g,x){var m=h&&x>=f&&x<=p,v=o.dayProp(g),b=v.className,C=v.style;return Q.createElement(c,{key:x,value:g,range:a},Q.createElement("div",{style:C,className:lr("rbc-day-bg",b,m&&"rbc-selected-cell",d.isSameDate(g,y)&&"rbc-today",l&&d.neq(l,g,"month")&&"rbc-off-range-bg")}))}))}},{key:"_selectable",value:function(){var r=this,a=this.containerRef.current,i=this._selector=new l8(this.props.container,{longPressThreshold:this.props.longPressThreshold}),o=function(c,d){if(!Oy(a,c)&&!Lye(a,c)){var u=qu(a),h=r.props,f=h.range,p=h.rtl;if(Dye(u,c)){var y=i8(u,c.x,p,f.length);r._selectSlot({startIdx:y,endIdx:y,action:d,box:c})}}r._initial={},r.setState({selecting:!1})};i.on("selecting",function(l){var c=r.props,d=c.range,u=c.rtl,h=-1,f=-1;if(r.state.selecting||(Gn(r.props.onSelectStart,[l]),r._initial={x:l.x,y:l.y}),i.isSelected(a)){var p=qu(a),y=kye(r._initial,p,l,d.length,u);h=y.startIdx,f=y.endIdx}r.setState({selecting:!0,startIdx:h,endIdx:f})}),i.on("beforeSelect",function(l){if(r.props.selectable==="ignoreEvents")return!Oy(r.containerRef.current,l)}),i.on("click",function(l){return o(l,"click")}),i.on("doubleClick",function(l){return o(l,"doubleClick")}),i.on("select",function(l){r._selectSlot(In(In({},r.state),{},{action:"select",bounds:l})),r._initial={},r.setState({selecting:!1}),Gn(r.props.onSelectEnd,[r.state])})}},{key:"_teardownSelectable",value:function(){this._selector&&(this._selector.teardown(),this._selector=null)}},{key:"_selectSlot",value:function(r){var a=r.endIdx,i=r.startIdx,o=r.action,l=r.bounds,c=r.box;a!==-1&&i!==-1&&this.props.onSelectSlot&&this.props.onSelectSlot({start:i,end:a,action:o,bounds:l,box:c,resourceId:this.props.resourceId})}}])}(Q.Component),Si={propTypes:{slotMetrics:ut.object.isRequired,selected:ut.object,isAllDay:ut.bool,accessors:ut.object.isRequired,localizer:ut.object.isRequired,components:ut.object.isRequired,getters:ut.object.isRequired,onSelect:ut.func,onDoubleClick:ut.func,onKeyPress:ut.func},defaultProps:{segments:[],selected:{}},renderEvent:function(t,n){var r=t.selected;t.isAllDay;var a=t.accessors,i=t.getters,o=t.onSelect,l=t.onDoubleClick,c=t.onKeyPress,d=t.localizer,u=t.slotMetrics,h=t.components,f=t.resizable,p=u.continuesPrior(n),y=u.continuesAfter(n);return Q.createElement(s8,{event:n,getters:i,localizer:d,accessors:a,components:h,onSelect:o,onDoubleClick:l,onKeyPress:c,continuesPrior:p,continuesAfter:y,slotStart:u.first,slotEnd:u.last,selected:lb(n,r),resizable:f})},renderSpan:function(t,n,r){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:" ",i=Math.abs(n)/t*100+"%";return Q.createElement("div",{key:r,className:"rbc-row-segment",style:{WebkitFlexBasis:i,flexBasis:i,maxWidth:i}},a)}},c8=function(e){function t(){return as(this,t),ta(this,t,arguments)}return na(t,e),is(t,[{key:"render",value:function(){var r=this,a=this.props,i=a.segments,o=a.slotMetrics.slots,l=a.className,c=1;return Q.createElement("div",{className:lr(l,"rbc-row")},i.reduce(function(d,u,h){var f=u.event,p=u.left,y=u.right,g=u.span,x="_lvl_"+h,m=p-c,v=Si.renderEvent(r.props,f);return m&&d.push(Si.renderSpan(o,m,"".concat(x,"_gap"))),d.push(Si.renderSpan(o,g,x,v)),c=y+1,d},[]))}}])}(Q.Component);c8.defaultProps=In({},Si.defaultProps);function d8(e){var t=e.dateRange,n=e.unit,r=n===void 0?"day":n,a=e.localizer;return{first:t[0],last:a.add(t[t.length-1],1,r)}}function $ye(e,t,n,r){var a=d8({dateRange:t,localizer:r}),i=a.first,o=a.last,l=r.diff(i,o,"day"),c=r.max(r.startOf(n.start(e),"day"),i),d=r.min(r.ceil(n.end(e),"day"),o),u=Hfe(t,function(f){return r.isSameDate(f,c)}),h=r.diff(c,d,"day");return h=Math.min(h,l),h=Math.max(h-r.segmentOffset,1),{event:e,span:h,left:u+1,right:Math.max(u+h,1)}}function qN(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1/0,n,r,a,i=[],o=[];for(n=0;n<e.length;n++){for(a=e[n],r=0;r<i.length&&Bye(a,i[r]);r++);r>=t?o.push(a):(i[r]||(i[r]=[])).push(a)}for(n=0;n<i.length;n++)i[n].sort(function(l,c){return l.left-c.left});return{levels:i,extra:o}}function Rg(e,t,n,r,a){var i={start:r.start(e),end:r.end(e)},o={start:t,end:n};return a.inEventRange({event:i,range:o})}function Bye(e,t){return t.some(function(n){return n.left<=e.right&&n.right>=e.left})}function zye(e,t,n){var r=C0(e),a=[],i=[];r.forEach(function(c){var d=t.start(c),u=t.end(c);n.daySpan(d,u)>1?a.push(c):i.push(c)});var o=a.sort(function(c,d){return VN(c,d,t,n)}),l=i.sort(function(c,d){return VN(c,d,t,n)});return[].concat(C0(o),C0(l))}function VN(e,t,n,r){var a={start:n.start(e),end:n.end(e),allDay:n.allDay(e)},i={start:n.start(t),end:n.end(t),allDay:n.allDay(t)};return r.sortEvents({evtA:a,evtB:i})}var UN=function(t,n){return t.left<=n&&t.right>=n},N2=function(t,n){return t.filter(function(r){return UN(r,n)}).map(function(r){return r.event})},u8=function(e){function t(){return as(this,t),ta(this,t,arguments)}return na(t,e),is(t,[{key:"render",value:function(){for(var r=this.props,a=r.segments,i=r.slotMetrics.slots,o=qN(a).levels[0],l=1,c=1,d=[];l<=i;){var u="_lvl_"+l,h=o.filter(function(C){return UN(C,l)})[0]||{},f=h.event,p=h.left,y=h.right,g=h.span;if(!f){var x=this.getHiddenEventsForSlot(a,l);if(x.length>0){var m=l-c;m&&d.push(Si.renderSpan(i,m,u+"_gap")),d.push(Si.renderSpan(i,1,u,this.renderShowMore(a,l))),c=l=l+1;continue}l++;continue}var v=Math.max(0,p-c);if(this.canRenderSlotEvent(p,g)){var b=Si.renderEvent(this.props,f);v&&d.push(Si.renderSpan(i,v,u+"_gap")),d.push(Si.renderSpan(i,g,u,b)),c=l=y+1}else v&&d.push(Si.renderSpan(i,v,u+"_gap")),d.push(Si.renderSpan(i,1,u,this.renderShowMore(a,l))),c=l=l+1}return Q.createElement("div",{className:"rbc-row"},d)}},{key:"getHiddenEventsForSlot",value:function(r,a){var i=N2(r,a),o=qN(r).levels[0],l=o.filter(function(c){return UN(c,a)}).map(function(c){return c.event});return i.filter(function(c){return!l.some(function(d){return d===c})})}},{key:"canRenderSlotEvent",value:function(r,a){var i=this.props.segments;return tpe(r,r+a).every(function(o){var l=N2(i,o).length;return l===1})}},{key:"renderShowMore",value:function(r,a){var i=this,o=this.props,l=o.localizer,c=o.slotMetrics,d=o.components,u=c.getEventsForSlot(a),h=N2(r,a),f=h.length;if(d!=null&&d.showMore){var p=d.showMore,y=c.getDateForSlot(a-1);return f?Q.createElement(p,{localizer:l,slotDate:y,slot:a,count:f,events:u,remainingEvents:h}):!1}return f?Q.createElement("button",{type:"button",key:"sm_"+a,className:lr("rbc-button-link","rbc-show-more"),onClick:function(x){return i.showMore(a,x)}},l.messages.showMore(f,h,u)):!1}},{key:"showMore",value:function(r,a){a.preventDefault(),a.stopPropagation(),this.props.onShowMore(r,a.target)}}])}(Q.Component);u8.defaultProps=In({},Si.defaultProps);var Wye=function(t){var n=t.children;return Q.createElement("div",{className:"rbc-row-content-scroll-container"},n)},Hye=function(t,n){return t.left<=n&&t.right>=n},qye=function(t,n){return t[0].range===n[0].range&&t[0].events===n[0].events};function h8(){return FF(function(e){for(var t=e.range,n=e.events,r=e.maxRows,a=e.minRows,i=e.accessors,o=e.localizer,l=d8({dateRange:t,localizer:o}),c=l.first,d=l.last,u=n.map(function(g){return $ye(g,t,i,o)}),h=qN(u,Math.max(r-1,1)),f=h.levels,p=h.extra,y=p.length>0?a-1:a;f.length<y;)f.push([]);return{first:c,last:d,levels:f,extra:p,range:t,slots:t.length,clone:function(x){var m=h8();return m(In(In({},e),x))},getDateForSlot:function(x){return t[x]},getSlotForDate:function(x){return t.find(function(m){return o.isSameDate(m,x)})},getEventsForSlot:function(x){return u.filter(function(m){return Hye(m,x)}).map(function(m){return m.event})},continuesPrior:function(x){return o.continuesPrior(i.start(x),c)},continuesAfter:function(x){var m=i.start(x),v=i.end(x);return o.continuesAfter(m,v,d)}}},qye)}var Lg=function(e){function t(){var n;as(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return n=ta(this,t,[].concat(a)),n.handleSelectSlot=function(o){var l=n.props,c=l.range,d=l.onSelectSlot;d(c.slice(o.start,o.end+1),o)},n.handleShowMore=function(o,l){var c=n.props,d=c.range,u=c.onShowMore,h=n.slotMetrics(n.props),f=q1(n.containerRef.current,".rbc-row-bg")[0],p;f&&(p=f.children[o-1]);var y=h.getEventsForSlot(o);u(y,d[o-1],p,o,l)},n.getContainer=function(){var o=n.props.container;return o?o():n.containerRef.current},n.renderHeadingCell=function(o,l){var c=n.props,d=c.renderHeader,u=c.getNow,h=c.localizer;return d({date:o,key:"header_".concat(l),className:lr("rbc-date-cell",h.isSameDate(o,u())&&"rbc-now")})},n.renderDummy=function(){var o=n.props,l=o.className,c=o.range,d=o.renderHeader,u=o.showAllEvents;return Q.createElement("div",{className:l,ref:n.containerRef},Q.createElement("div",{className:lr("rbc-row-content",u&&"rbc-row-content-scrollable")},d&&Q.createElement("div",{className:"rbc-row",ref:n.headingRowRef},c.map(n.renderHeadingCell)),Q.createElement("div",{className:"rbc-row",ref:n.eventRowRef},Q.createElement("div",{className:"rbc-row-segment"},Q.createElement("div",{className:"rbc-event"},Q.createElement("div",{className:"rbc-event-content"}," "))))))},n.containerRef=j.createRef(),n.headingRowRef=j.createRef(),n.eventRowRef=j.createRef(),n.slotMetrics=h8(),n}return na(t,e),is(t,[{key:"getRowLimit",value:function(){var r,a=Su(this.eventRowRef.current),i=(r=this.headingRowRef)!==null&&r!==void 0&&r.current?Su(this.headingRowRef.current):0,o=Su(this.containerRef.current)-i;return Math.max(Math.floor(o/a),1)}},{key:"render",value:function(){var r=this.props,a=r.date,i=r.rtl,o=r.range,l=r.className,c=r.selected,d=r.selectable,u=r.renderForMeasure,h=r.accessors,f=r.getters,p=r.components,y=r.getNow,g=r.renderHeader,x=r.onSelect,m=r.localizer,v=r.onSelectStart,b=r.onSelectEnd,C=r.onDoubleClick,S=r.onKeyPress,P=r.resourceId,D=r.longPressThreshold,N=r.isAllDay,M=r.resizable,L=r.showAllEvents;if(u)return this.renderDummy();var T=this.slotMetrics(this.props),E=T.levels,A=T.extra,O=L?Wye:To,W=p.weekWrapper,z={selected:c,accessors:h,getters:f,localizer:m,components:p,onSelect:x,onDoubleClick:C,onKeyPress:S,resourceId:P,slotMetrics:T,resizable:M};return Q.createElement("div",{className:l,role:"rowgroup",ref:this.containerRef},Q.createElement(Fye,{localizer:m,date:a,getNow:y,rtl:i,range:o,selectable:d,container:this.getContainer,getters:f,onSelectStart:v,onSelectEnd:b,onSelectSlot:this.handleSelectSlot,components:p,longPressThreshold:D,resourceId:P}),Q.createElement("div",{className:lr("rbc-row-content",L&&"rbc-row-content-scrollable"),role:"row"},g&&Q.createElement("div",{className:"rbc-row ",ref:this.headingRowRef},o.map(this.renderHeadingCell)),Q.createElement(O,null,Q.createElement(W,Object.assign({isAllDay:N},z,{rtl:this.props.rtl}),E.map(function(F,V){return Q.createElement(c8,Object.assign({key:V,segments:F},z))}),!!A.length&&Q.createElement(u8,Object.assign({segments:A,onShowMore:this.handleShowMore},z))))))}}])}(Q.Component);Lg.defaultProps={minRows:0,maxRows:1/0};var KC=function(t){var n=t.label;return Q.createElement("span",{role:"columnheader","aria-sort":"none"},n)},Vye=function(t){var n=t.label,r=t.drilldownView,a=t.onDrillDown;return r?Q.createElement("button",{type:"button",className:"rbc-button-link",onClick:a},n):Q.createElement("span",null,n)},Uye=["date","className"],Yye=function(t,n,r,a,i){return t.filter(function(o){return Rg(o,n,r,a,i)})},cb=function(e){function t(){var n;as(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return n=ta(this,t,[].concat(a)),n.getContainer=function(){return n.containerRef.current},n.renderWeek=function(o,l){var c=n.props,d=c.events,u=c.components,h=c.selectable,f=c.getNow,p=c.selected,y=c.date,g=c.localizer,x=c.longPressThreshold,m=c.accessors,v=c.getters,b=c.showAllEvents,C=n.state,S=C.needLimitMeasure,P=C.rowLimit,D=Yye(C0(d),o[0],o[o.length-1],m,g),N=zye(D,m,g);return Q.createElement(Lg,{key:l,ref:l===0?n.slotRowRef:void 0,container:n.getContainer,className:"rbc-month-row",getNow:f,date:y,range:o,events:N,maxRows:b?1/0:P,selected:p,selectable:h,components:u,accessors:m,getters:v,localizer:g,renderHeader:n.readerDateHeading,renderForMeasure:S,onShowMore:n.handleShowMore,onSelect:n.handleSelectEvent,onDoubleClick:n.handleDoubleClickEvent,onKeyPress:n.handleKeyPressEvent,onSelectSlot:n.handleSelectSlot,longPressThreshold:x,rtl:n.props.rtl,resizable:n.props.resizable,showAllEvents:b})},n.readerDateHeading=function(o){var l=o.date,c=o.className,d=nl(o,Uye),u=n.props,h=u.date,f=u.getDrilldownView,p=u.localizer,y=p.neq(h,l,"month"),g=p.isSameDate(l,h),x=f(l),m=p.format(l,"dateFormat"),v=n.props.components.dateHeader||Vye;return Q.createElement("div",Object.assign({},d,{className:lr(c,y&&"rbc-off-range",g&&"rbc-current"),role:"cell"}),Q.createElement(v,{label:m,date:l,drilldownView:x,isOffRange:y,onDrillDown:function(C){return n.handleHeadingClick(l,x,C)}}))},n.handleSelectSlot=function(o,l){n._pendingSelection=n._pendingSelection.concat(o),clearTimeout(n._selectTimer),n._selectTimer=setTimeout(function(){return n.selectDates(l)})},n.handleHeadingClick=function(o,l,c){c.preventDefault(),n.clearSelection(),Gn(n.props.onDrillDown,[o,l])},n.handleSelectEvent=function(){n.clearSelection();for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];Gn(n.props.onSelectEvent,l)},n.handleDoubleClickEvent=function(){n.clearSelection();for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];Gn(n.props.onDoubleClickEvent,l)},n.handleKeyPressEvent=function(){n.clearSelection();for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];Gn(n.props.onKeyPressEvent,l)},n.handleShowMore=function(o,l,c,d,u){var h=n.props,f=h.popup,p=h.onDrillDown,y=h.onShowMore,g=h.getDrilldownView,x=h.doShowMoreDrillDown;if(n.clearSelection(),f){var m=W1(c,n.containerRef.current);n.setState({overlay:{date:l,events:o,position:m,target:u}})}else x&&Gn(p,[l,g(l)||fa.DAY]);Gn(y,[o,l,d])},n.overlayDisplay=function(){n.setState({overlay:null})},n.state={rowLimit:5,needLimitMeasure:!0,date:null},n.containerRef=j.createRef(),n.slotRowRef=j.createRef(),n._bgRows=[],n._pendingSelection=[],n}return na(t,e),is(t,[{key:"componentDidMount",value:function(){var r=this,a;this.state.needLimitMeasure&&this.measureRowLimit(this.props),window.addEventListener("resize",this._resizeListener=function(){a||ov(function(){a=!1,r.setState({needLimitMeasure:!0})})},!1)}},{key:"componentDidUpdate",value:function(){this.state.needLimitMeasure&&this.measureRowLimit(this.props)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this._resizeListener,!1)}},{key:"render",value:function(){var r=this.props,a=r.date,i=r.localizer,o=r.className,l=i.visibleDays(a,i),c=Ise(l,7);return this._weekCount=c.length,Q.createElement("div",{className:lr("rbc-month-view",o),role:"table","aria-label":"Month View",ref:this.containerRef},Q.createElement("div",{className:"rbc-row rbc-month-header",role:"row"},this.renderHeaders(c[0])),c.map(this.renderWeek),this.props.popup&&this.renderOverlay())}},{key:"renderHeaders",value:function(r){var a=this.props,i=a.localizer,o=a.components,l=r[0],c=r[r.length-1],d=o.header||KC;return i.range(l,c,"day").map(function(u,h){return Q.createElement("div",{key:"header_"+h,className:"rbc-header"},Q.createElement(d,{date:u,localizer:i,label:i.format(u,"weekdayFormat")}))})}},{key:"renderOverlay",value:function(){var r,a,i=this,o=(r=(a=this.state)===null||a===void 0?void 0:a.overlay)!==null&&r!==void 0?r:{},l=this.props,c=l.accessors,d=l.localizer,u=l.components,h=l.getters,f=l.selected,p=l.popupOffset,y=l.handleDragStart,g=function(){return i.setState({overlay:null})};return Q.createElement(JC,{overlay:o,accessors:c,localizer:d,components:u,getters:h,selected:f,popupOffset:p,ref:this.containerRef,handleKeyPressEvent:this.handleKeyPressEvent,handleSelectEvent:this.handleSelectEvent,handleDoubleClickEvent:this.handleDoubleClickEvent,handleDragStart:y,show:!!o.position,overlayDisplay:this.overlayDisplay,onHide:g})}},{key:"measureRowLimit",value:function(){this.setState({needLimitMeasure:!1,rowLimit:this.slotRowRef.current.getRowLimit()})}},{key:"selectDates",value:function(r){var a=this._pendingSelection.slice();this._pendingSelection=[],a.sort(function(l,c){return+l-+c});var i=new Date(a[0]),o=new Date(a[a.length-1]);o.setDate(a[a.length-1].getDate()+1),Gn(this.props.onSelectSlot,{slots:a,start:i,end:o,action:r.action,bounds:r.bounds,box:r.box})}},{key:"clearSelection",value:function(){clearTimeout(this._selectTimer),this._pendingSelection=[]}}],[{key:"getDerivedStateFromProps",value:function(r,a){var i=r.date,o=r.localizer;return{date:i,needLimitMeasure:o.neq(i,a.date,"month")}}}])}(Q.Component);cb.range=function(e,t){var n=t.localizer,r=n.firstVisibleDay(e,n),a=n.lastVisibleDay(e,n);return{start:r,end:a}};cb.navigate=function(e,t,n){var r=n.localizer;switch(t){case Wa.PREVIOUS:return r.add(e,-1,"month");case Wa.NEXT:return r.add(e,1,"month");default:return e}};cb.title=function(e,t){var n=t.localizer;return n.format(e,"monthHeaderFormat")};var oT=function(t){var n=t.min,r=t.max,a=t.step,i=t.slots,o=t.localizer;return"".concat(+o.startOf(n,"minutes"))+"".concat(+o.startOf(r,"minutes"))+"".concat(a,"-").concat(i)};function XC(e){for(var t=e.min,n=e.max,r=e.step,a=e.timeslots,i=e.localizer,o=oT({start:t,end:n,step:r,timeslots:a,localizer:i}),l=1+i.getTotalMin(t,n),c=i.getMinutesFromMidnight(t),d=Math.ceil((l-1)/(r*a)),u=d*a,h=new Array(d),f=new Array(u),p=0;p<d;p++){h[p]=new Array(a);for(var y=0;y<a;y++){var g=p*a+y,x=g*r;f[g]=h[p][y]=i.getSlotDate(t,c,x)}}var m=f.length*r;f.push(i.getSlotDate(t,c,m));function v(b){var C=i.diff(t,b,"minutes")+i.getDstOffset(t,b);return Math.min(C,l)}return{groups:h,update:function(C){return oT(C)!==o?XC(C):this},dateIsInGroup:function(C,S){var P=h[S+1];return i.inRange(C,h[S][0],P?P[0]:n,"minutes")},nextSlot:function(C){var S=f[Math.min(f.findIndex(function(P){return P===C||i.eq(P,C)})+1,f.length-1)];return i.eq(S,C)&&(S=i.add(C,r,"minutes")),S},closestSlotToPosition:function(C){var S=Math.min(f.length-1,Math.max(0,Math.floor(C*u)));return f[S]},closestSlotFromPoint:function(C,S){var P=Math.abs(S.top-S.bottom);return this.closestSlotToPosition((C.y-S.top)/P)},closestSlotFromDate:function(C){var S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(i.lt(C,t,"minutes"))return f[0];if(i.gt(C,n,"minutes"))return f[f.length-1];var P=i.diff(t,C,"minutes");return f[(P-P%r)/r+S]},startsBeforeDay:function(C){return i.lt(C,t,"day")},startsAfterDay:function(C){return i.gt(C,n,"day")},startsBefore:function(C){return i.lt(i.merge(t,C),t,"minutes")},startsAfter:function(C){return i.gt(i.merge(n,C),n,"minutes")},getRange:function(C,S,P,D){P||(C=i.min(n,i.max(t,C))),D||(S=i.min(n,i.max(t,S)));var N=v(C),M=v(S),L=M>r*u&&!i.eq(n,S)?(N-r)/(r*u)*100:N/(r*u)*100;return{top:L,height:M/(r*u)*100-L,start:v(C),startDate:C,end:v(S),endDate:S}},getCurrentTimePosition:function(C){var S=v(C),P=S/(r*u)*100;return P}}}var Gye=function(){function e(t,n){var r=n.accessors,a=n.slotMetrics;as(this,e);var i=a.getRange(r.start(t),r.end(t)),o=i.start,l=i.startDate,c=i.end,d=i.endDate,u=i.top,h=i.height;this.start=o,this.end=c,this.startMs=+l,this.endMs=+d,this.top=u,this.height=h,this.data=t}return is(e,[{key:"_width",get:function(){if(this.rows){var n=this.rows.reduce(function(a,i){return Math.max(a,i.leaves.length+1)},0)+1;return 100/n}if(this.leaves){var r=100-this.container._width;return r/(this.leaves.length+1)}return this.row._width}},{key:"width",get:function(){var n=this._width,r=Math.min(100,this._width*1.7);if(this.rows)return r;if(this.leaves)return this.leaves.length>0?r:n;var a=this.row.leaves,i=a.indexOf(this);return i===a.length-1?n:r}},{key:"xOffset",get:function(){if(this.rows)return 0;if(this.leaves)return this.container._width;var n=this.row,r=n.leaves,a=n.xOffset,i=n._width,o=r.indexOf(this)+1;return a+o*i}}])}();function Jye(e,t,n){return Math.abs(t.start-e.start)<n||t.start>e.start&&t.start<e.end}function Kye(e){for(var t=wme(e,["startMs",function(l){return-l.endMs}]),n=[];t.length>0;){var r=t.shift();n.push(r);for(var a=0;a<t.length;a++){var i=t[a];if(!(r.endMs>i.startMs)){if(a>0){var o=t.splice(a,1)[0];n.push(o)}break}}}return n}function f8(e){for(var t=e.events,n=e.minimumStartDifference,r=e.slotMetrics,a=e.accessors,i=t.map(function(u){return new Gye(u,{slotMetrics:r,accessors:a})}),o=Kye(i),l=[],c=function(){var h=o[d],f=l.find(function(g){return g.end>h.start||Math.abs(h.start-g.start)<n});if(!f)return h.rows=[],l.push(h),1;h.container=f;for(var p=null,y=f.rows.length-1;!p&&y>=0;y--)Jye(f.rows[y],h,n)&&(p=f.rows[y]);p?(p.leaves.push(h),h.row=p):(h.leaves=[],f.rows.push(h))},d=0;d<o.length;d++)c();return o.map(function(u){return{event:u.data,style:{top:u.top,height:u.height,width:u.width,xOffset:Math.max(0,u.xOffset)}}})}function p8(e,t,n){for(var r=0;r<e.friends.length;++r)if(!(n.indexOf(e.friends[r])>-1)){t=t>e.friends[r].idx?t:e.friends[r].idx,n.push(e.friends[r]);var a=p8(e.friends[r],t,n);t=t>a?t:a}return t}function Xye(e){var t=e.events,n=e.minimumStartDifference,r=e.slotMetrics,a=e.accessors,i=f8({events:t,minimumStartDifference:n,slotMetrics:r,accessors:a});i.sort(function(W,z){return W=W.style,z=z.style,W.top!==z.top?W.top>z.top?1:-1:W.height!==z.height?W.top+W.height<z.top+z.height?1:-1:0});for(var o=0;o<i.length;++o)i[o].friends=[],delete i[o].style.left,delete i[o].style.left,delete i[o].idx,delete i[o].size;for(var l=0;l<i.length-1;++l)for(var c=i[l],d=c.style.top,u=c.style.top+c.style.height,h=l+1;h<i.length;++h){var f=i[h],p=f.style.top,y=f.style.top+f.style.height;(p>=d&&y<=u||y>d&&y<=u||p>=d&&p<u)&&(c.friends.push(f),f.friends.push(c))}for(var g=0;g<i.length;++g){for(var x=i[g],m=[],v=0;v<100;++v)m.push(1);for(var b=0;b<x.friends.length;++b)x.friends[b].idx!==void 0&&(m[x.friends[b].idx]=0);x.idx=m.indexOf(1)}for(var C=0;C<i.length;++C){var S=0;if(!i[C].size){var P=[],D=p8(i[C],0,P);S=100/(D+1),i[C].size=S;for(var N=0;N<P.length;++N)P[N].size=S}}for(var M=0;M<i.length;++M){var L=i[M];L.style.left=L.idx*L.size;for(var T=0,E=0;E<L.friends.length;++E){var A=L.friends[E].idx;T=T>A?T:A}T<=L.idx&&(L.size=100-L.idx*L.size);var O=L.idx===0?0:3;L.style.width="calc(".concat(L.size,"% - ").concat(O,"px)"),L.style.height="calc(".concat(L.style.height,"% - 2px)"),L.style.xOffset="calc(".concat(L.style.left,"% + ").concat(O,"px)")}return i}var lT={overlap:f8,"no-overlap":Xye};function Qye(e){return!!(e&&e.constructor&&e.call&&e.apply)}function Zye(e){e.events,e.minimumStartDifference,e.slotMetrics,e.accessors;var t=e.dayLayoutAlgorithm,n=t;return t in lT&&(n=lT[t]),Qye(n)?n.apply(this,arguments):[]}var m8=function(e){function t(){return as(this,t),ta(this,t,arguments)}return na(t,e),is(t,[{key:"render",value:function(){var r=this.props,a=r.renderSlot,i=r.resource,o=r.group,l=r.getters,c=r.components,d=c===void 0?{}:c,u=d.timeSlotWrapper,h=u===void 0?To:u,f=l?l.slotGroupProp(o):{};return Q.createElement("div",Object.assign({className:"rbc-timeslot-group"},f),o.map(function(p,y){var g=l?l.slotProp(p,i):{};return Q.createElement(h,{key:y,value:p,resource:i},Q.createElement("div",Object.assign({},g,{className:lr("rbc-time-slot",g.className)}),a&&a(p,y)))}))}}])}(j.Component);function Hx(e){return typeof e=="string"?e:e+"%"}function e1e(e){var t=e.style,n=e.className,r=e.event,a=e.accessors,i=e.rtl,o=e.selected,l=e.label,c=e.continuesPrior,d=e.continuesAfter,u=e.getters,h=e.onClick,f=e.onDoubleClick,p=e.isBackgroundEvent,y=e.onKeyPress,g=e.components,x=g.event,m=g.eventWrapper,v=a.title(r),b=a.tooltip(r),C=a.end(r),S=a.start(r),P=u.eventProp(r,S,C,o),D=[Q.createElement("div",{key:"1",className:"rbc-event-label"},l),Q.createElement("div",{key:"2",className:"rbc-event-content"},x?Q.createElement(x,{event:r,title:v}):v)],N=t.height,M=t.top,L=t.width,T=t.xOffset,E=In(In({},P.style),{},Hc({top:Hx(M),height:Hx(N),width:Hx(L)},i?"right":"left",Hx(T)));return Q.createElement(m,Object.assign({type:"time"},e),Q.createElement("div",{role:"button",tabIndex:0,onClick:h,onDoubleClick:f,style:E,onKeyDown:y,title:b?(typeof l=="string"?l+": ":"")+b:void 0,className:lr(p?"rbc-background-event":"rbc-event",n,P.className,{"rbc-selected":o,"rbc-event-continues-earlier":c,"rbc-event-continues-later":d})},D))}var t1e=function(t){var n=t.children,r=t.className,a=t.style,i=t.innerRef;return Q.createElement("div",{className:r,style:a,ref:i},n)},n1e=Q.forwardRef(function(e,t){return Q.createElement(t1e,Object.assign({},e,{innerRef:t}))}),r1e=["dayProp"],s1e=["eventContainerWrapper","timeIndicatorWrapper"],g8=function(e){function t(){var n;as(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return n=ta(this,t,[].concat(a)),n.state={selecting:!1,timeIndicatorPosition:null},n.intervalTriggered=!1,n.renderEvents=function(o){var l=o.events,c=o.isBackgroundEvent,d=n.props,u=d.rtl,h=d.selected,f=d.accessors,p=d.localizer,y=d.getters,g=d.components,x=d.step,m=d.timeslots,v=d.dayLayoutAlgorithm,b=d.resizable,C=n,S=C.slotMetrics,P=p.messages,D=Zye({events:l,accessors:f,slotMetrics:S,minimumStartDifference:Math.ceil(x*m/2),dayLayoutAlgorithm:v});return D.map(function(N,M){var L,T=N.event,E=N.style,A=f.end(T),O=f.start(T),W=(L=f.eventId(T))!==null&&L!==void 0?L:"evt_"+M,z="eventTimeRangeFormat",F,V=S.startsBeforeDay(O),B=S.startsAfterDay(A);V?z="eventTimeRangeEndFormat":B&&(z="eventTimeRangeStartFormat"),V&&B?F=P.allDay:F=p.format({start:O,end:A},z);var Y=V||S.startsBefore(O),$=B||S.startsAfter(A);return Q.createElement(e1e,{style:E,event:T,label:F,key:W,getters:y,rtl:u,components:g,continuesPrior:Y,continuesAfter:$,accessors:f,resource:n.props.resource,selected:lb(T,h),onClick:function(U){return n._select(In(In(In({},T),n.props.resource&&{sourceResource:n.props.resource}),c&&{isBackgroundEvent:!0}),U)},onDoubleClick:function(U){return n._doubleClick(T,U)},isBackgroundEvent:c,onKeyPress:function(U){return n._keyPress(T,U)},resizable:b})})},n._selectable=function(){var o=n.containerRef.current,l=n.props,c=l.longPressThreshold,d=l.localizer,u=n._selector=new l8(function(){return o},{longPressThreshold:c}),h=function(g){var x=n.props.onSelecting,m=n.state||{},v=f(g),b=v.startDate,C=v.endDate;x&&(d.eq(m.startDate,b,"minutes")&&d.eq(m.endDate,C,"minutes")||x({start:b,end:C,resourceId:n.props.resource})===!1)||(n.state.start!==v.start||n.state.end!==v.end||n.state.selecting!==v.selecting)&&n.setState(v)},f=function(g){var x=n.slotMetrics.closestSlotFromPoint(g,qu(o));n.state.selecting||(n._initialSlot=x);var m=n._initialSlot;d.lte(m,x)?x=n.slotMetrics.nextSlot(x):d.gt(m,x)&&(m=n.slotMetrics.nextSlot(m));var v=n.slotMetrics.getRange(d.min(m,x),d.max(m,x));return In(In({},v),{},{selecting:!0,top:"".concat(v.top,"%"),height:"".concat(v.height,"%")})},p=function(g,x){if(!Oy(n.containerRef.current,g)){var m=f(g),v=m.startDate,b=m.endDate;n._selectSlot({startDate:v,endDate:b,action:x,box:g})}n.setState({selecting:!1})};u.on("selecting",h),u.on("selectStart",h),u.on("beforeSelect",function(y){if(n.props.selectable==="ignoreEvents")return!Oy(n.containerRef.current,y)}),u.on("click",function(y){return p(y,"click")}),u.on("doubleClick",function(y){return p(y,"doubleClick")}),u.on("select",function(y){n.state.selecting&&(n._selectSlot(In(In({},n.state),{},{action:"select",bounds:y})),n.setState({selecting:!1}))}),u.on("reset",function(){n.state.selecting&&n.setState({selecting:!1})})},n._teardownSelectable=function(){n._selector&&(n._selector.teardown(),n._selector=null)},n._selectSlot=function(o){for(var l=o.startDate,c=o.endDate,d=o.action,u=o.bounds,h=o.box,f=l,p=[];n.props.localizer.lte(f,c);)p.push(f),f=new Date(+f+n.props.step*60*1e3);Gn(n.props.onSelectSlot,{slots:p,start:l,end:c,resourceId:n.props.resource,action:d,bounds:u,box:h})},n._select=function(){for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];Gn(n.props.onSelectEvent,l)},n._doubleClick=function(){for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];Gn(n.props.onDoubleClickEvent,l)},n._keyPress=function(){for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];Gn(n.props.onKeyPressEvent,l)},n.slotMetrics=XC(n.props),n.containerRef=j.createRef(),n}return na(t,e),is(t,[{key:"componentDidMount",value:function(){this.props.selectable&&this._selectable(),this.props.isNow&&this.setTimeIndicatorPositionUpdateInterval()}},{key:"componentWillUnmount",value:function(){this._teardownSelectable(),this.clearTimeIndicatorInterval()}},{key:"componentDidUpdate",value:function(r,a){this.props.selectable&&!r.selectable&&this._selectable(),!this.props.selectable&&r.selectable&&this._teardownSelectable();var i=this.props,o=i.getNow,l=i.isNow,c=i.localizer,d=i.date,u=i.min,h=i.max,f=c.neq(r.getNow(),o(),"minutes");if(r.isNow!==l||f){if(this.clearTimeIndicatorInterval(),l){var p=!f&&c.eq(r.date,d,"minutes")&&a.timeIndicatorPosition===this.state.timeIndicatorPosition;this.setTimeIndicatorPositionUpdateInterval(p)}}else l&&(c.neq(r.min,u,"minutes")||c.neq(r.max,h,"minutes"))&&this.positionTimeIndicator()}},{key:"setTimeIndicatorPositionUpdateInterval",value:function(){var r=this,a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;!this.intervalTriggered&&!a&&this.positionTimeIndicator(),this._timeIndicatorTimeout=window.setTimeout(function(){r.intervalTriggered=!0,r.positionTimeIndicator(),r.setTimeIndicatorPositionUpdateInterval()},6e4)}},{key:"clearTimeIndicatorInterval",value:function(){this.intervalTriggered=!1,window.clearTimeout(this._timeIndicatorTimeout)}},{key:"positionTimeIndicator",value:function(){var r=this.props,a=r.min,i=r.max,o=r.getNow,l=o();if(l>=a&&l<=i){var c=this.slotMetrics.getCurrentTimePosition(l);this.intervalTriggered=!0,this.setState({timeIndicatorPosition:c})}else this.clearTimeIndicatorInterval()}},{key:"render",value:function(){var r=this.props,a=r.date,i=r.max,o=r.rtl,l=r.isNow,c=r.resource,d=r.accessors,u=r.localizer,h=r.getters,f=h.dayProp,p=nl(h,r1e),y=r.components,g=y.eventContainerWrapper,x=y.timeIndicatorWrapper,m=nl(y,s1e);this.slotMetrics=this.slotMetrics.update(this.props);var v=this.slotMetrics,b=this.state,C=b.selecting,S=b.top,P=b.height,D=b.startDate,N=b.endDate,M={start:D,end:N},L=f(i,c),T=L.className,E=L.style,A={className:"rbc-current-time-indicator",style:{top:"".concat(this.state.timeIndicatorPosition,"%")}},O=m.dayColumnWrapper||n1e;return Q.createElement(O,{ref:this.containerRef,date:a,style:E,className:lr(T,"rbc-day-slot","rbc-time-column",l&&"rbc-now",l&&"rbc-today",C&&"rbc-slot-selecting"),slotMetrics:v,resource:c},v.groups.map(function(W,z){return Q.createElement(m8,{key:z,group:W,resource:c,getters:p,components:m})}),Q.createElement(g,{localizer:u,resource:c,accessors:d,getters:p,components:m,slotMetrics:v},Q.createElement("div",{className:lr("rbc-events-container",o&&"rtl")},this.renderEvents({events:this.props.backgroundEvents,isBackgroundEvent:!0}),this.renderEvents({events:this.props.events}))),C&&Q.createElement("div",{className:"rbc-slot-selection",style:{top:S,height:P}},Q.createElement("span",null,u.format(M,"selectRangeFormat"))),l&&this.intervalTriggered&&Q.createElement(x,A,Q.createElement("div",A)))}}])}(Q.Component);g8.defaultProps={dragThroughEvents:!0,timeslots:2};var v8=function(t){var n=t.label;return Q.createElement(Q.Fragment,null,n)},a1e=function(e){function t(){var n;as(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return n=ta(this,t,[].concat(a)),n.handleHeaderClick=function(o,l,c){c.preventDefault(),Gn(n.props.onDrillDown,[o,l])},n.renderRow=function(o){var l=n.props,c=l.events,d=l.rtl,u=l.selectable,h=l.getNow,f=l.range,p=l.getters,y=l.localizer,g=l.accessors,x=l.components,m=l.resizable,v=g.resourceId(o),b=o?c.filter(function(C){return g.resource(C)===v}):c;return Q.createElement(Lg,{isAllDay:!0,rtl:d,getNow:h,minRows:2,maxRows:n.props.allDayMaxRows+1,range:f,events:b,resourceId:v,className:"rbc-allday-cell",selectable:u,selected:n.props.selected,components:x,accessors:g,getters:p,localizer:y,onSelect:n.props.onSelectEvent,onShowMore:n.props.onShowMore,onDoubleClick:n.props.onDoubleClickEvent,onKeyPress:n.props.onKeyPressEvent,onSelectSlot:n.props.onSelectSlot,longPressThreshold:n.props.longPressThreshold,resizable:m})},n}return na(t,e),is(t,[{key:"renderHeaderCells",value:function(r){var a=this,i=this.props,o=i.localizer,l=i.getDrilldownView,c=i.getNow,d=i.getters.dayProp,u=i.components.header,h=u===void 0?KC:u,f=c();return r.map(function(p,y){var g=l(p),x=o.format(p,"dayFormat"),m=d(p),v=m.className,b=m.style,C=Q.createElement(h,{date:p,label:x,localizer:o});return Q.createElement("div",{key:y,style:b,className:lr("rbc-header",v,o.isSameDate(p,f)&&"rbc-today")},g?Q.createElement("button",{type:"button",className:"rbc-button-link",onClick:function(P){return a.handleHeaderClick(p,g,P)}},C):Q.createElement("span",null,C))})}},{key:"render",value:function(){var r=this,a=this.props,i=a.width,o=a.rtl,l=a.resources,c=a.range,d=a.events,u=a.getNow,h=a.accessors,f=a.selectable,p=a.components,y=a.getters,g=a.scrollRef,x=a.localizer,m=a.isOverflowing,v=a.components,b=v.timeGutterHeader,C=v.resourceHeader,S=C===void 0?v8:C,P=a.resizable,D={};m&&(D[o?"marginLeft":"marginRight"]="".concat(dv()-1,"px"));var N=l.groupEvents(d);return Q.createElement("div",{style:D,ref:g,className:lr("rbc-time-header",m&&"rbc-overflowing")},Q.createElement("div",{className:"rbc-label rbc-time-header-gutter",style:{width:i,minWidth:i,maxWidth:i}},b&&Q.createElement(b,null)),l.map(function(M,L){var T=Ou(M,2),E=T[0],A=T[1];return Q.createElement("div",{className:"rbc-time-header-content",key:E||L},A&&Q.createElement("div",{className:"rbc-row rbc-row-resource",key:"resource_".concat(L)},Q.createElement("div",{className:"rbc-header"},Q.createElement(S,{index:L,label:h.resourceTitle(A),resource:A}))),Q.createElement("div",{className:"rbc-row rbc-time-header-cell".concat(c.length<=1?" rbc-time-header-cell-single-day":"")},r.renderHeaderCells(c)),Q.createElement(Lg,{isAllDay:!0,rtl:o,getNow:u,minRows:2,maxRows:r.props.allDayMaxRows+1,range:c,events:N.get(E)||[],resourceId:A&&E,className:"rbc-allday-cell",selectable:f,selected:r.props.selected,components:p,accessors:h,getters:y,localizer:x,onSelect:r.props.onSelectEvent,onShowMore:r.props.onShowMore,onDoubleClick:r.props.onDoubleClickEvent,onKeyDown:r.props.onKeyPressEvent,onSelectSlot:r.props.onSelectSlot,longPressThreshold:r.props.longPressThreshold,resizable:P}))}))}}])}(Q.Component),i1e=function(e){function t(){var n;as(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return n=ta(this,t,[].concat(a)),n.handleHeaderClick=function(o,l,c){c.preventDefault(),Gn(n.props.onDrillDown,[o,l])},n}return na(t,e),is(t,[{key:"renderHeaderCells",value:function(r){var a=this,i=this.props,o=i.localizer,l=i.getDrilldownView,c=i.getNow,d=i.getters.dayProp,u=i.components,h=u.header,f=h===void 0?KC:h,p=u.resourceHeader,y=p===void 0?v8:p,g=i.resources,x=i.accessors,m=i.events,v=i.rtl,b=i.selectable,C=i.components,S=i.getters,P=i.resizable,D=c(),N=g.groupEvents(m);return r.map(function(M,L){var T=l(M),E=o.format(M,"dayFormat"),A=d(M),O=A.className,W=A.style,z=Q.createElement(f,{date:M,label:E,localizer:o});return Q.createElement("div",{key:L,className:"rbc-time-header-content rbc-resource-grouping"},Q.createElement("div",{className:"rbc-row rbc-time-header-cell".concat(r.length<=1?" rbc-time-header-cell-single-day":"")},Q.createElement("div",{style:W,className:lr("rbc-header",O,o.isSameDate(M,D)&&"rbc-today")},T?Q.createElement("button",{type:"button",className:"rbc-button-link",onClick:function(V){return a.handleHeaderClick(M,T,V)}},z):Q.createElement("span",null,z))),Q.createElement("div",{className:"rbc-row"},g.map(function(F,V){var B=Ou(F,2),Y=B[0],$=B[1];return Q.createElement("div",{key:"resource_".concat(Y,"_").concat(V),className:lr("rbc-header",O,o.isSameDate(M,D)&&"rbc-today")},Q.createElement(y,{index:V,label:x.resourceTitle($),resource:$}))})),Q.createElement("div",{className:"rbc-row rbc-m-b-negative-3 rbc-h-full"},g.map(function(F,V){var B=Ou(F,2),Y=B[0],$=B[1],I=(N.get(Y)||[]).filter(function(U){return o.isSameDate(U.start,M)||o.isSameDate(U.end,M)});return Q.createElement(Lg,{key:"resource_".concat(Y,"_").concat(V),isAllDay:!0,rtl:v,getNow:c,minRows:2,maxRows:a.props.allDayMaxRows+1,range:[M],events:I,resourceId:$&&Y,className:"rbc-allday-cell",selectable:b,selected:a.props.selected,components:C,accessors:x,getters:S,localizer:o,onSelect:a.props.onSelectEvent,onShowMore:a.props.onShowMore,onDoubleClick:a.props.onDoubleClickEvent,onKeyDown:a.props.onKeyPressEvent,onSelectSlot:a.props.onSelectSlot,longPressThreshold:a.props.longPressThreshold,resizable:P})})))})}},{key:"render",value:function(){var r=this.props,a=r.width,i=r.rtl,o=r.range,l=r.scrollRef,c=r.isOverflowing,d=r.components.timeGutterHeader,u={};return c&&(u[i?"marginLeft":"marginRight"]="".concat(dv()-1,"px")),Q.createElement("div",{style:u,ref:l,className:lr("rbc-time-header",c&&"rbc-overflowing")},Q.createElement("div",{className:"rbc-label rbc-time-header-gutter",style:{width:a,minWidth:a,maxWidth:a}},d&&Q.createElement(d,null)),this.renderHeaderCells(o))}}])}(Q.Component);function o1e(e){var t=e.min,n=e.max,r=e.localizer;return r.getTimezoneOffset(t)!==r.getTimezoneOffset(n)?{start:r.add(t,-1,"day"),end:r.add(n,-1,"day")}:{start:t,end:n}}var l1e=function(t){var n=t.min,r=t.max,a=t.timeslots,i=t.step,o=t.localizer,l=t.getNow,c=t.resource,d=t.components,u=t.getters,h=t.gutterRef,f=d.timeGutterWrapper,p=j.useMemo(function(){return o1e({min:n,max:r,localizer:o})},[n==null?void 0:n.toISOString(),r==null?void 0:r.toISOString(),o]),y=p.start,g=p.end,x=j.useState(XC({min:y,max:g,timeslots:a,step:i,localizer:o})),m=Ou(x,2),v=m[0],b=m[1];j.useEffect(function(){v&&b(v.update({min:y,max:g,timeslots:a,step:i,localizer:o}))},[y==null?void 0:y.toISOString(),g==null?void 0:g.toISOString(),a,i]);var C=j.useCallback(function(S,P){if(P)return null;var D=v.dateIsInGroup(l(),P);return Q.createElement("span",{className:lr("rbc-label",D&&"rbc-now")},o.format(S,"timeGutterFormat"))},[v,o,l]);return Q.createElement(f,{slotMetrics:v},Q.createElement("div",{className:"rbc-time-gutter rbc-time-column",ref:h},v.groups.map(function(S,P){return Q.createElement(m8,{key:P,group:S,resource:c,components:d,renderSlot:C,getters:u})})))},c1e=Q.forwardRef(function(e,t){return Q.createElement(l1e,Object.assign({gutterRef:t},e))}),S2={};function d1e(e,t){return{map:function(r){return e?e.map(function(a,i){return r([t.resourceId(a),a],i)}):[r([S2,null],0)]},groupEvents:function(r){var a=new Map;return e?(r.forEach(function(i){var o=t.resource(i)||S2;if(Array.isArray(o))o.forEach(function(c){var d=a.get(c)||[];d.push(i),a.set(c,d)});else{var l=a.get(o)||[];l.push(i),a.set(o,l)}}),a):(a.set(S2,r),a)}}}var up=function(e){function t(n){var r;return as(this,t),r=ta(this,t,[n]),r.handleScroll=function(a){r.scrollRef.current&&(r.scrollRef.current.scrollLeft=a.target.scrollLeft)},r.handleResize=function(){Tg(r.rafHandle),r.rafHandle=ov(r.checkOverflow)},r.handleKeyPressEvent=function(){r.clearSelection();for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];Gn(r.props.onKeyPressEvent,i)},r.handleSelectEvent=function(){r.clearSelection();for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];Gn(r.props.onSelectEvent,i)},r.handleDoubleClickEvent=function(){r.clearSelection();for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];Gn(r.props.onDoubleClickEvent,i)},r.handleShowMore=function(a,i,o,l,c){var d=r.props,u=d.popup,h=d.onDrillDown,f=d.onShowMore,p=d.getDrilldownView,y=d.doShowMoreDrillDown;if(r.clearSelection(),u){var g=W1(o,r.containerRef.current);r.setState({overlay:{date:i,events:a,position:In(In({},g),{},{width:"200px"}),target:c}})}else y&&Gn(h,[i,p(i)||fa.DAY]);Gn(f,[a,i,l])},r.handleSelectAllDaySlot=function(a,i){var o=r.props.onSelectSlot,l=new Date(a[0]),c=new Date(a[a.length-1]);c.setDate(a[a.length-1].getDate()+1),Gn(o,{slots:a,start:l,end:c,action:i.action,resourceId:i.resourceId})},r.overlayDisplay=function(){r.setState({overlay:null})},r.checkOverflow=function(){if(!r._updatingOverflow){var a=r.contentRef.current;if(a!=null&&a.scrollHeight){var i=a.scrollHeight>a.clientHeight;r.state.isOverflowing!==i&&(r._updatingOverflow=!0,r.setState({isOverflowing:i},function(){r._updatingOverflow=!1}))}}},r.memoizedResources=FF(function(a,i){return d1e(a,i)}),r.state={gutterWidth:void 0,isOverflowing:null},r.scrollRef=Q.createRef(),r.contentRef=Q.createRef(),r.containerRef=Q.createRef(),r._scrollRatio=null,r.gutterRef=j.createRef(),r}return na(t,e),is(t,[{key:"getSnapshotBeforeUpdate",value:function(){return this.checkOverflow(),null}},{key:"componentDidMount",value:function(){this.props.width==null&&this.measureGutter(),this.calculateScroll(),this.applyScroll(),window.addEventListener("resize",this.handleResize)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleResize),Tg(this.rafHandle),this.measureGutterAnimationFrameRequest&&window.cancelAnimationFrame(this.measureGutterAnimationFrameRequest)}},{key:"componentDidUpdate",value:function(){this.applyScroll()}},{key:"renderDayColumn",value:function(r,a,i,o,l,c,d,u,h,f){var p=this.props,y=p.min,g=p.max,x=(o.get(a)||[]).filter(function(v){return c.inRange(r,d.start(v),d.end(v),"day")}),m=(l.get(a)||[]).filter(function(v){return c.inRange(r,d.start(v),d.end(v),"day")});return Q.createElement(g8,Object.assign({},this.props,{localizer:c,min:c.merge(r,y),max:c.merge(r,g),resource:i&&a,components:u,isNow:c.isSameDate(r,f),key:"".concat(a,"-").concat(r),date:r,events:x,backgroundEvents:m,dayLayoutAlgorithm:h}))}},{key:"renderResourcesFirst",value:function(r,a,i,o,l,c,d,u,h){var f=this;return a.map(function(p){var y=Ou(p,2),g=y[0],x=y[1];return r.map(function(m){return f.renderDayColumn(m,g,x,i,o,l,c,u,h,d)})})}},{key:"renderRangeFirst",value:function(r,a,i,o,l,c,d,u,h){var f=this;return r.map(function(p){return Q.createElement("div",{style:{display:"flex",minHeight:"100%",flex:1},key:p},a.map(function(y){var g=Ou(y,2),x=g[0],m=g[1];return Q.createElement("div",{style:{flex:1},key:c.resourceId(m)},f.renderDayColumn(p,x,m,i,o,l,c,u,h,d))}))})}},{key:"renderEvents",value:function(r,a,i,o){var l=this.props,c=l.accessors,d=l.localizer,u=l.resourceGroupingLayout,h=l.components,f=l.dayLayoutAlgorithm,p=this.memoizedResources(this.props.resources,c),y=p.groupEvents(a),g=p.groupEvents(i);return u?this.renderRangeFirst(r,p,y,g,d,c,o,h,f):this.renderResourcesFirst(r,p,y,g,d,c,o,h,f)}},{key:"render",value:function(){var r,a=this.props,i=a.events,o=a.backgroundEvents,l=a.range,c=a.width,d=a.rtl,u=a.selected,h=a.getNow,f=a.resources,p=a.components,y=a.accessors,g=a.getters,x=a.localizer,m=a.min,v=a.max,b=a.showMultiDayTimes,C=a.longPressThreshold,S=a.resizable,P=a.resourceGroupingLayout;c=c||this.state.gutterWidth;var D=l[0],N=l[l.length-1];this.slots=l.length;var M=[],L=[],T=[];i.forEach(function(A){if(Rg(A,D,N,y,x)){var O=y.start(A),W=y.end(A);y.allDay(A)||x.startAndEndAreDateOnly(O,W)||!b&&!x.isSameDate(O,W)?M.push(A):L.push(A)}}),o.forEach(function(A){Rg(A,D,N,y,x)&&T.push(A)}),M.sort(function(A,O){return VN(A,O,y,x)});var E={range:l,events:M,width:c,rtl:d,getNow:h,localizer:x,selected:u,allDayMaxRows:this.props.showAllEvents?1/0:(r=this.props.allDayMaxRows)!==null&&r!==void 0?r:1/0,resources:this.memoizedResources(f,y),selectable:this.props.selectable,accessors:y,getters:g,components:p,scrollRef:this.scrollRef,isOverflowing:this.state.isOverflowing,longPressThreshold:C,onSelectSlot:this.handleSelectAllDaySlot,onSelectEvent:this.handleSelectEvent,onShowMore:this.handleShowMore,onDoubleClickEvent:this.props.onDoubleClickEvent,onKeyPressEvent:this.props.onKeyPressEvent,onDrillDown:this.props.onDrillDown,getDrilldownView:this.props.getDrilldownView,resizable:S};return Q.createElement("div",{className:lr("rbc-time-view",f&&"rbc-time-view-resources"),ref:this.containerRef},f&&f.length>1&&P?Q.createElement(i1e,E):Q.createElement(a1e,E),this.props.popup&&this.renderOverlay(),Q.createElement("div",{ref:this.contentRef,className:"rbc-time-content",onScroll:this.handleScroll},Q.createElement(c1e,{date:D,ref:this.gutterRef,localizer:x,min:x.merge(D,m),max:x.merge(D,v),step:this.props.step,getNow:this.props.getNow,timeslots:this.props.timeslots,components:p,className:"rbc-time-gutter",getters:g}),this.renderEvents(l,L,T,h())))}},{key:"renderOverlay",value:function(){var r,a,i=this,o=(r=(a=this.state)===null||a===void 0?void 0:a.overlay)!==null&&r!==void 0?r:{},l=this.props,c=l.accessors,d=l.localizer,u=l.components,h=l.getters,f=l.selected,p=l.popupOffset,y=l.handleDragStart,g=function(){return i.setState({overlay:null})};return Q.createElement(JC,{overlay:o,accessors:c,localizer:d,components:u,getters:h,selected:f,popupOffset:p,ref:this.containerRef,handleKeyPressEvent:this.handleKeyPressEvent,handleSelectEvent:this.handleSelectEvent,handleDoubleClickEvent:this.handleDoubleClickEvent,handleDragStart:y,show:!!o.position,overlayDisplay:this.overlayDisplay,onHide:g})}},{key:"clearSelection",value:function(){clearTimeout(this._selectTimer),this._pendingSelection=[]}},{key:"measureGutter",value:function(){var r=this;this.measureGutterAnimationFrameRequest&&window.cancelAnimationFrame(this.measureGutterAnimationFrameRequest),this.measureGutterAnimationFrameRequest=window.requestAnimationFrame(function(){var a,i=(a=r.gutterRef)!==null&&a!==void 0&&a.current?Mg(r.gutterRef.current):void 0;i&&r.state.gutterWidth!==i&&r.setState({gutterWidth:i})})}},{key:"applyScroll",value:function(){if(this._scrollRatio!=null&&this.props.enableAutoScroll===!0){var r=this.contentRef.current;r.scrollTop=r.scrollHeight*this._scrollRatio,this._scrollRatio=null}}},{key:"calculateScroll",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.props,a=r.min,i=r.max,o=r.scrollToTime,l=r.localizer,c=l.diff(l.merge(o,a),o,"milliseconds"),d=l.diff(a,i,"milliseconds");this._scrollRatio=c/d}}])}(j.Component);up.defaultProps={step:30,timeslots:2,resourceGroupingLayout:!1};var u1e=["date","localizer","min","max","scrollToTime","enableAutoScroll"],db=function(e){function t(){return as(this,t),ta(this,t,arguments)}return na(t,e),is(t,[{key:"render",value:function(){var r=this.props,a=r.date,i=r.localizer,o=r.min,l=o===void 0?i.startOf(new Date,"day"):o,c=r.max,d=c===void 0?i.endOf(new Date,"day"):c,u=r.scrollToTime,h=u===void 0?i.startOf(new Date,"day"):u,f=r.enableAutoScroll,p=f===void 0?!0:f,y=nl(r,u1e),g=t.range(a,{localizer:i});return Q.createElement(up,Object.assign({},y,{range:g,eventOffset:10,localizer:i,min:l,max:d,scrollToTime:h,enableAutoScroll:p}))}}])}(Q.Component);db.range=function(e,t){var n=t.localizer;return[n.startOf(e,"day")]};db.navigate=function(e,t,n){var r=n.localizer;switch(t){case Wa.PREVIOUS:return r.add(e,-1,"day");case Wa.NEXT:return r.add(e,1,"day");default:return e}};db.title=function(e,t){var n=t.localizer;return n.format(e,"dayHeaderFormat")};var h1e=["date","localizer","min","max","scrollToTime","enableAutoScroll"],xd=function(e){function t(){return as(this,t),ta(this,t,arguments)}return na(t,e),is(t,[{key:"render",value:function(){var r=this.props,a=r.date,i=r.localizer,o=r.min,l=o===void 0?i.startOf(new Date,"day"):o,c=r.max,d=c===void 0?i.endOf(new Date,"day"):c,u=r.scrollToTime,h=u===void 0?i.startOf(new Date,"day"):u,f=r.enableAutoScroll,p=f===void 0?!0:f,y=nl(r,h1e),g=t.range(a,this.props);return Q.createElement(up,Object.assign({},y,{range:g,eventOffset:15,localizer:i,min:l,max:d,scrollToTime:h,enableAutoScroll:p}))}}])}(Q.Component);xd.defaultProps=up.defaultProps;xd.navigate=function(e,t,n){var r=n.localizer;switch(t){case Wa.PREVIOUS:return r.add(e,-1,"week");case Wa.NEXT:return r.add(e,1,"week");default:return e}};xd.range=function(e,t){var n=t.localizer,r=n.startOfWeek(),a=n.startOf(e,"week",r),i=n.endOf(e,"week",r);return n.range(a,i)};xd.title=function(e,t){var n=t.localizer,r=xd.range(e,{localizer:n}),a=VF(r),i=a[0],o=a.slice(1);return n.format({start:i,end:o.pop()},"dayRangeHeaderFormat")};var f1e=["date","localizer","min","max","scrollToTime","enableAutoScroll"];function QC(e,t){return xd.range(e,t).filter(function(n){return[6,0].indexOf(n.getDay())===-1})}var mv=function(e){function t(){return as(this,t),ta(this,t,arguments)}return na(t,e),is(t,[{key:"render",value:function(){var r=this.props,a=r.date,i=r.localizer,o=r.min,l=o===void 0?i.startOf(new Date,"day"):o,c=r.max,d=c===void 0?i.endOf(new Date,"day"):c,u=r.scrollToTime,h=u===void 0?i.startOf(new Date,"day"):u,f=r.enableAutoScroll,p=f===void 0?!0:f,y=nl(r,f1e),g=QC(a,this.props);return Q.createElement(up,Object.assign({},y,{range:g,eventOffset:15,localizer:i,min:l,max:d,scrollToTime:h,enableAutoScroll:p}))}}])}(Q.Component);mv.defaultProps=up.defaultProps;mv.range=QC;mv.navigate=xd.navigate;mv.title=function(e,t){var n=t.localizer,r=QC(e,{localizer:n}),a=VF(r),i=a[0],o=a.slice(1);return n.format({start:i,end:o.pop()},"dayRangeHeaderFormat")};var ub=30;function hb(e){var t=e.accessors,n=e.components,r=e.date,a=e.events,i=e.getters,o=e.length,l=o===void 0?ub:o,c=e.localizer,d=e.onDoubleClickEvent,u=e.onSelectEvent,h=e.selected,f=j.useRef(null),p=j.useRef(null),y=j.useRef(null),g=j.useRef(null),x=j.useRef(null);j.useEffect(function(){b()});var m=function(N,M,L){var T=n.event,E=n.date;return M=M.filter(function(A){return Rg(A,c.startOf(N,"day"),c.endOf(N,"day"),t,c)}),M.map(function(A,O){var W=t.title(A),z=t.end(A),F=t.start(A),V=i.eventProp(A,F,z,lb(A,h)),B=O===0&&c.format(N,"agendaDateFormat"),Y=O===0?Q.createElement("td",{rowSpan:M.length,className:"rbc-agenda-date-cell"},E?Q.createElement(E,{day:N,label:B}):B):!1;return Q.createElement("tr",{key:L+"_"+O,className:V.className,style:V.style},Y,Q.createElement("td",{className:"rbc-agenda-time-cell"},v(N,A)),Q.createElement("td",{className:"rbc-agenda-event-cell",onClick:function(I){return u&&u(A,I)},onDoubleClick:function(I){return d&&d(A,I)}},T?Q.createElement(T,{event:A,title:W}):W))},[])},v=function(N,M){var L="",T=n.time,E=c.messages.allDay,A=t.end(M),O=t.start(M);return t.allDay(M)||(c.eq(O,A)?E=c.format(O,"agendaTimeFormat"):c.isSameDate(O,A)?E=c.format({start:O,end:A},"agendaTimeRangeFormat"):c.isSameDate(N,O)?E=c.format(O,"agendaTimeFormat"):c.isSameDate(N,A)&&(E=c.format(A,"agendaTimeFormat"))),c.gt(N,O,"day")&&(L="rbc-continues-prior"),c.lt(N,A,"day")&&(L+=" rbc-continues-after"),Q.createElement("span",{className:L.trim()},T?Q.createElement(T,{event:M,day:N,label:E}):E)},b=function(){if(x.current){var N=f.current,M=x.current.firstChild;if(M){var L=g.current.scrollHeight>g.current.clientHeight,T=[],E=T;T=[Mg(M.children[0]),Mg(M.children[1])],(E[0]!==T[0]||E[1]!==T[1])&&(p.current.style.width=T[0]+"px",y.current.style.width=T[1]+"px"),L?(Y1(N,"rbc-header-overflowing"),N.style.marginRight=dv()+"px"):G1(N,"rbc-header-overflowing")}}},C=c.messages,S=c.add(r,l,"day"),P=c.range(r,S,"day");return a=a.filter(function(D){return Rg(D,c.startOf(r,"day"),c.endOf(S,"day"),t,c)}),a.sort(function(D,N){return+t.start(D)-+t.start(N)}),Q.createElement("div",{className:"rbc-agenda-view"},a.length!==0?Q.createElement(Q.Fragment,null,Q.createElement("table",{ref:f,className:"rbc-agenda-table"},Q.createElement("thead",null,Q.createElement("tr",null,Q.createElement("th",{className:"rbc-header",ref:p},C.date),Q.createElement("th",{className:"rbc-header",ref:y},C.time),Q.createElement("th",{className:"rbc-header"},C.event)))),Q.createElement("div",{className:"rbc-agenda-content",ref:g},Q.createElement("table",{className:"rbc-agenda-table"},Q.createElement("tbody",{ref:x},P.map(function(D,N){return m(D,a,N)}))))):Q.createElement("span",{className:"rbc-agenda-empty"},C.noEventsInRange))}hb.range=function(e,t){var n=t.length,r=n===void 0?ub:n,a=t.localizer,i=a.add(e,r,"day");return{start:e,end:i}};hb.navigate=function(e,t,n){var r=n.length,a=r===void 0?ub:r,i=n.localizer;switch(t){case Wa.PREVIOUS:return i.add(e,-a,"day");case Wa.NEXT:return i.add(e,a,"day");default:return e}};hb.title=function(e,t){var n=t.length,r=n===void 0?ub:n,a=t.localizer,i=a.add(e,r,"day");return a.format({start:e,end:i},"agendaHeaderFormat")};var k0=Hc(Hc(Hc(Hc(Hc({},fa.MONTH,cb),fa.WEEK,xd),fa.WORK_WEEK,mv),fa.DAY,db),fa.AGENDA,hb),p1e=["action","date","today"];function m1e(e,t){var n=t.action,r=t.date,a=t.today,i=nl(t,p1e);switch(e=typeof e=="string"?k0[e]:e,n){case Wa.TODAY:r=a||new Date;break;case Wa.DATE:break;default:wg(e&&typeof e.navigate=="function","Calendar View components must implement a static `.navigate(date, action)` method.s"),r=e.navigate(r,n,i)}return r}function g1e(e,t){var n=null;return typeof t=="function"?n=t(e):typeof t=="string"&&on(e)==="object"&&e!=null&&t in e&&(n=e[t]),n}var Cl=function(t){return function(n){return g1e(n,t)}},v1e=["view","date","getNow","onNavigate"],x1e=["view","toolbar","events","backgroundEvents","resourceGroupingLayout","style","className","elementProps","date","getNow","length","showMultiDayTimes","onShowMore","doShowMoreDrillDown","components","formats","messages","culture"];function x8(e){if(Array.isArray(e))return e;for(var t=[],n=0,r=Object.entries(e);n<r.length;n++){var a=Ou(r[n],2),i=a[0],o=a[1];o&&t.push(i)}return t}function y1e(e,t){var n=t.views,r=x8(n);return r.indexOf(e)!==-1}var y8=function(e){function t(){var n;as(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return n=ta(this,t,[].concat(a)),n.getViews=function(){var o=n.props.views;return Array.isArray(o)?J0e(o,function(l,c){return l[c]=k0[c]},{}):on(o)==="object"?Jme(o,function(l,c){return l===!0?k0[c]:l}):k0},n.getView=function(){var o=n.getViews();return o[n.props.view]},n.getDrilldownView=function(o){var l=n.props,c=l.view,d=l.drilldownView,u=l.getDrilldownView;return u?u(o,c,Object.keys(n.getViews())):d},n.handleRangeChange=function(o,l,c){var d=n.props,u=d.onRangeChange,h=d.localizer;u&&l.range&&u(l.range(o,{localizer:h}),c)},n.handleNavigate=function(o,l){var c=n.props,d=c.view,u=c.date,h=c.getNow,f=c.onNavigate,p=nl(c,v1e),y=n.getView(),g=h();u=m1e(y,In(In({},p),{},{action:o,date:l||u||g,today:g})),f(u,d,o),n.handleRangeChange(u,y)},n.handleViewChange=function(o){o!==n.props.view&&y1e(o,n.props)&&n.props.onView(o);var l=n.getViews();n.handleRangeChange(n.props.date||n.props.getNow(),l[o],o)},n.handleSelectEvent=function(){for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];Gn(n.props.onSelectEvent,l)},n.handleDoubleClickEvent=function(){for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];Gn(n.props.onDoubleClickEvent,l)},n.handleKeyPressEvent=function(){for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];Gn(n.props.onKeyPressEvent,l)},n.handleSelectSlot=function(o){Gn(n.props.onSelectSlot,o)},n.handleDrillDown=function(o,l){var c=n.props.onDrillDown;if(c){c(o,l,n.drilldownView);return}l&&n.handleViewChange(l),n.handleNavigate(Wa.DATE,o)},n.state={context:t.getContext(n.props)},n}return na(t,e),is(t,[{key:"render",value:function(){var r=this.props,a=r.view,i=r.toolbar,o=r.events,l=r.backgroundEvents,c=r.resourceGroupingLayout,d=r.style,u=r.className,h=r.elementProps,f=r.date,p=r.getNow,y=r.length,g=r.showMultiDayTimes,x=r.onShowMore,m=r.doShowMoreDrillDown;r.components,r.formats,r.messages,r.culture;var v=nl(r,x1e);f=f||p();var b=this.getView(),C=this.state.context,S=C.accessors,P=C.components,D=C.getters,N=C.localizer,M=C.viewNames,L=P.toolbar||jye,T=b.title(f,{localizer:N,length:y});return Q.createElement("div",Object.assign({},h,{className:lr(u,"rbc-calendar",v.rtl&&"rbc-rtl"),style:d}),i&&Q.createElement(L,{date:f,view:a,views:M,label:T,onView:this.handleViewChange,onNavigate:this.handleNavigate,localizer:N}),Q.createElement(b,Object.assign({},v,{events:o,backgroundEvents:l,date:f,getNow:p,length:y,localizer:N,getters:D,components:P,accessors:S,showMultiDayTimes:g,getDrilldownView:this.getDrilldownView,onNavigate:this.handleNavigate,onDrillDown:this.handleDrillDown,onSelectEvent:this.handleSelectEvent,onDoubleClickEvent:this.handleDoubleClickEvent,onKeyPressEvent:this.handleKeyPressEvent,onSelectSlot:this.handleSelectSlot,onShowMore:x,doShowMoreDrillDown:m,resourceGroupingLayout:c})))}}],[{key:"getDerivedStateFromProps",value:function(r){return{context:t.getContext(r)}}},{key:"getContext",value:function(r){var a=r.startAccessor,i=r.endAccessor,o=r.allDayAccessor,l=r.tooltipAccessor,c=r.titleAccessor,d=r.resourceAccessor,u=r.resourceIdAccessor,h=r.resourceTitleAccessor,f=r.eventIdAccessor,p=r.eventPropGetter,y=r.backgroundEventPropGetter,g=r.slotPropGetter,x=r.slotGroupPropGetter,m=r.dayPropGetter,v=r.view,b=r.views,C=r.localizer,S=r.culture,P=r.messages,D=P===void 0?{}:P,N=r.components,M=N===void 0?{}:N,L=r.formats,T=L===void 0?{}:L,E=x8(b),A=Sye(D);return{viewNames:E,localizer:wye(C,S,T,A),getters:{eventProp:function(){return p&&p.apply(void 0,arguments)||{}},backgroundEventProp:function(){return y&&y.apply(void 0,arguments)||{}},slotProp:function(){return g&&g.apply(void 0,arguments)||{}},slotGroupProp:function(){return x&&x.apply(void 0,arguments)||{}},dayProp:function(){return m&&m.apply(void 0,arguments)||{}}},components:Wme(M[v]||{},I0e(M,E),{eventWrapper:To,backgroundEventWrapper:To,eventContainerWrapper:To,dateCellWrapper:To,weekWrapper:To,timeSlotWrapper:To,timeGutterWrapper:To,timeIndicatorWrapper:To}),accessors:{start:Cl(a),end:Cl(i),allDay:Cl(o),tooltip:Cl(l),title:Cl(c),resource:Cl(d),resourceId:Cl(u),resourceTitle:Cl(h),eventId:Cl(f)}}}}])}(Q.Component);y8.defaultProps={events:[],backgroundEvents:[],elementProps:{},popup:!1,toolbar:!0,view:fa.MONTH,views:[fa.MONTH,fa.WEEK,fa.DAY,fa.AGENDA],step:30,length:30,allDayMaxRows:1/0,doShowMoreDrillDown:!0,drilldownView:fa.DAY,titleAccessor:"title",tooltipAccessor:"title",allDayAccessor:"allDay",startAccessor:"start",endAccessor:"end",resourceAccessor:"resourceId",resourceIdAccessor:"id",resourceTitleAccessor:"title",eventIdAccessor:"id",longPressThreshold:250,getNow:function(){return new Date},dayLayoutAlgorithm:"overlap"};var b1e=VO(y8,{view:"onView",date:"onNavigate",selected:"onSelectEvent"}),w1e=function(t,n,r){var a=t.start,i=t.end;return"".concat(r.format(a,"P",n)," – ").concat(r.format(i,"P",n))},C2=function(t,n,r){var a=t.start,i=t.end;return"".concat(r.format(a,"p",n)," – ").concat(r.format(i,"p",n))},j1e=function(t,n,r){var a=t.start;return"".concat(r.format(a,"h:mma",n)," – ")},N1e=function(t,n,r){var a=t.end;return" – ".concat(r.format(a,"h:mma",n))},S1e=function(t,n,r){var a=t.start,i=t.end;return"".concat(r.format(a,"MMMM dd",n)," – ").concat(r.format(i,tp(a,i,"month")?"dd":"MMMM dd",n))},C1e={dateFormat:"dd",dayFormat:"dd eee",weekdayFormat:"ccc",selectRangeFormat:C2,eventTimeRangeFormat:C2,eventTimeRangeStartFormat:j1e,eventTimeRangeEndFormat:N1e,timeGutterFormat:"p",monthHeaderFormat:"MMMM yyyy",dayHeaderFormat:"cccc MMM dd",dayRangeHeaderFormat:S1e,agendaHeaderFormat:w1e,agendaDateFormat:"ccc MMM dd",agendaTimeFormat:"p",agendaTimeRangeFormat:C2},P1e=function(t){var n=t.startOfWeek,r=t.getDay,a=t.format,i=t.locales;return new bye({formats:C1e,firstOfWeek:function(l){return r(n(new Date,{locale:i[l]}))},format:function(l,c,d){return a(new Date(l),c,{locale:i[d]})}})},ZC={},b8={exports:{}};(function(e){function t(n){return n&&n.__esModule?n:{default:n}}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports})(b8);var ra=b8.exports,eP={},w8={exports:{}},j8={exports:{}},N8={exports:{}},S8={exports:{}};(function(e){function t(n){"@babel/helpers - typeof";return e.exports=t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports})(S8);var fb=S8.exports,C8={exports:{}};(function(e){var t=fb.default;function n(r,a){if(t(r)!="object"||!r)return r;var i=r[Symbol.toPrimitive];if(i!==void 0){var o=i.call(r,a||"default");if(t(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(r)}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports})(C8);var D1e=C8.exports;(function(e){var t=fb.default,n=D1e;function r(a){var i=n(a,"string");return t(i)=="symbol"?i:i+""}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports})(N8);var P8=N8.exports;(function(e){var t=P8;function n(r,a,i){return(a=t(a))in r?Object.defineProperty(r,a,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[a]=i,r}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports})(j8);var k1e=j8.exports;(function(e){var t=k1e;function n(a,i){var o=Object.keys(a);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(a);i&&(l=l.filter(function(c){return Object.getOwnPropertyDescriptor(a,c).enumerable})),o.push.apply(o,l)}return o}function r(a){for(var i=1;i<arguments.length;i++){var o=arguments[i]!=null?arguments[i]:{};i%2?n(Object(o),!0).forEach(function(l){t(a,l,o[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(o)):n(Object(o)).forEach(function(l){Object.defineProperty(a,l,Object.getOwnPropertyDescriptor(o,l))})}return a}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports})(w8);var Td=w8.exports,D8={exports:{}},k8={exports:{}};(function(e){function t(n,r){if(n==null)return{};var a={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(r.indexOf(i)!==-1)continue;a[i]=n[i]}return a}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports})(k8);var E1e=k8.exports;(function(e){var t=E1e;function n(r,a){if(r==null)return{};var i,o,l=t(r,a);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(r);for(o=0;o<c.length;o++)i=c[o],a.indexOf(i)===-1&&{}.propertyIsEnumerable.call(r,i)&&(l[i]=r[i])}return l}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports})(D8);var tP=D8.exports,E8={exports:{}};(function(e){function t(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports})(E8);var rh=E8.exports,T8={exports:{}};(function(e){var t=P8;function n(a,i){for(var o=0;o<i.length;o++){var l=i[o];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(a,t(l.key),l)}}function r(a,i,o){return i&&n(a.prototype,i),o&&n(a,o),Object.defineProperty(a,"prototype",{writable:!1}),a}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports})(T8);var sh=T8.exports,A8={exports:{}},_8={exports:{}};(function(e){function t(n){return e.exports=t=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports})(_8);var T1e=_8.exports,M8={exports:{}};(function(e){function t(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(e.exports=t=function(){return!!n},e.exports.__esModule=!0,e.exports.default=e.exports)()}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports})(M8);var A1e=M8.exports,R8={exports:{}},L8={exports:{}};(function(e){function t(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports})(L8);var _1e=L8.exports;(function(e){var t=fb.default,n=_1e;function r(a,i){if(i&&(t(i)=="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return n(a)}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports})(R8);var M1e=R8.exports;(function(e){var t=T1e,n=A1e,r=M1e;function a(i,o,l){return o=t(o),r(i,n()?Reflect.construct(o,l||[],t(i).constructor):o.apply(i,l))}e.exports=a,e.exports.__esModule=!0,e.exports.default=e.exports})(A8);var hp=A8.exports,I8={exports:{}},O8={exports:{}};(function(e){function t(n,r){return e.exports=t=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,i){return a.__proto__=i,a},e.exports.__esModule=!0,e.exports.default=e.exports,t(n,r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports})(O8);var R1e=O8.exports;(function(e){var t=R1e;function n(r,a){if(typeof a!="function"&&a!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(a&&a.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),a&&t(r,a)}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports})(I8);var fp=I8.exports;const gv=bd(Une);var ro={},Vf={};Object.defineProperty(Vf,"__esModule",{value:!0});Vf.views=Vf.navigate=void 0;Vf.navigate={PREVIOUS:"PREV",NEXT:"NEXT",TODAY:"TODAY",DATE:"DATE"};Vf.views={MONTH:"month",WEEK:"week",WORK_WEEK:"work_week",DAY:"day",AGENDA:"agenda"};var L1e=ra.default;Object.defineProperty(ro,"__esModule",{value:!0});ro.views=ro.dateRangeFormat=ro.dateFormat=ro.accessor=ro.DayLayoutAlgorithmPropType=void 0;var Ra=L1e(dC),cT=Vf,dT=Object.keys(cT.views).map(function(e){return cT.views[e]});ro.accessor=Ra.default.oneOfType([Ra.default.string,Ra.default.func]);ro.dateFormat=Ra.default.any;ro.dateRangeFormat=Ra.default.func;ro.views=Ra.default.oneOfType([Ra.default.arrayOf(Ra.default.oneOf(dT)),Ra.default.objectOf(function(e,t){var n=dT.indexOf(t)!==-1&&typeof e[t]=="boolean";if(n)return null;for(var r=arguments.length,a=new Array(r>2?r-2:0),i=2;i<r;i++)a[i-2]=arguments[i];return Ra.default.elementType.apply(Ra.default,[e,t].concat(a))})]);ro.DayLayoutAlgorithmPropType=Ra.default.oneOfType([Ra.default.oneOf(["overlap","no-overlap"]),Ra.default.func]);var pb={},pp={};const F8=bd(Nte);var I1e=ra.default;Object.defineProperty(pp,"__esModule",{value:!0});pp.accessor=$8;pp.wrapAccessor=void 0;var O1e=I1e(F8);function $8(e,t){var n=null;return typeof t=="function"?n=t(e):typeof t=="string"&&(0,O1e.default)(e)==="object"&&e!=null&&t in e&&(n=e[t]),n}pp.wrapAccessor=function(t){return function(n){return $8(n,t)}};var ah={},F1e=ra.default;Object.defineProperty(ah,"__esModule",{value:!0});ah.DnDContext=void 0;var $1e=F1e(j);ah.DnDContext=$1e.default.createContext();var ih=ra.default;Object.defineProperty(pb,"__esModule",{value:!0});pb.default=void 0;var B1e=ih(Td),z1e=ih(rh),W1e=ih(sh),H1e=ih(hp),q1e=ih(fp),Bh=ih(j),uT=ih(gv),hT=pp,V1e=ah,B8=function(e){function t(){var n;(0,z1e.default)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return n=(0,H1e.default)(this,t,[].concat(a)),n.handleResizeUp=function(o){o.button===0&&n.context.draggable.onBeginAction(n.props.event,"resize","UP")},n.handleResizeDown=function(o){o.button===0&&n.context.draggable.onBeginAction(n.props.event,"resize","DOWN")},n.handleResizeLeft=function(o){o.button===0&&n.context.draggable.onBeginAction(n.props.event,"resize","LEFT")},n.handleResizeRight=function(o){o.button===0&&n.context.draggable.onBeginAction(n.props.event,"resize","RIGHT")},n.handleStartDragging=function(o){var l;if(o.button===0){var c=(l=o.target.getAttribute("class"))===null||l===void 0?void 0:l.includes("rbc-addons-dnd-resize");if(!c){var d=(0,B1e.default)({},n.props.event);d.sourceResource=n.props.resource,n.context.draggable.onBeginAction(n.props.event,"move")}}},n}return(0,q1e.default)(t,e),(0,W1e.default)(t,[{key:"renderAnchor",value:function(r){var a=r==="Up"||r==="Down"?"ns":"ew";return Bh.default.createElement("div",{className:"rbc-addons-dnd-resize-".concat(a,"-anchor"),onMouseDown:this["handleResize".concat(r)]},Bh.default.createElement("div",{className:"rbc-addons-dnd-resize-".concat(a,"-icon")}))}},{key:"render",value:function(){var r=this.props,a=r.event,i=r.type,o=r.continuesPrior,l=r.continuesAfter,c=r.resizable,d=this.props.children;if(a.__isPreview)return Bh.default.cloneElement(d,{className:(0,uT.default)(d.props.className,"rbc-addons-dnd-drag-preview")});var u=this.context.draggable,h=u.draggableAccessor,f=u.resizableAccessor,p=h?!!(0,hT.accessor)(a,h):!0;if(!p)return d;var y=c&&(f?!!(0,hT.accessor)(a,f):!0);if(y||p){var g={onMouseDown:this.handleStartDragging,onTouchStart:this.handleStartDragging};if(y){var x=null,m=null;i==="date"?(x=!o&&this.renderAnchor("Left"),m=!l&&this.renderAnchor("Right")):(x=!o&&this.renderAnchor("Up"),m=!l&&this.renderAnchor("Down")),g.children=Bh.default.createElement("div",{className:"rbc-addons-dnd-resizable"},x,d.props.children,m)}u.dragAndDropAction.interacting&&u.dragAndDropAction.event===a&&(g.className=(0,uT.default)(d.props.className,"rbc-addons-dnd-dragged-event")),d=Bh.default.cloneElement(d,g)}return d}}])}(Bh.default.Component);B8.contextType=V1e.DnDContext;pb.default=B8;var mb={},z8={exports:{}};(function(e){var t=fb.default;function n(r,a){if(typeof WeakMap=="function")var i=new WeakMap,o=new WeakMap;return(e.exports=n=function(c,d){if(!d&&c&&c.__esModule)return c;var u,h,f={__proto__:null,default:c};if(c===null||t(c)!="object"&&typeof c!="function")return f;if(u=d?o:i){if(u.has(c))return u.get(c);u.set(c,f)}for(var p in c)p!=="default"&&{}.hasOwnProperty.call(c,p)&&((h=(u=Object.defineProperty)&&Object.getOwnPropertyDescriptor(c,p))&&(h.get||h.set)?u(f,p,h):f[p]=c[p]);return f},e.exports.__esModule=!0,e.exports.default=e.exports)(r,a)}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports})(z8);var W8=z8.exports;function nP(e,t,n,r){if(n===void 0&&(n=!1),r===void 0&&(r=!0),e){var a=document.createEvent("HTMLEvents");a.initEvent(t,n,r),e.dispatchEvent(a)}}function U1e(e){var t=Ps(e,"transitionDuration")||"",n=t.indexOf("ms")===-1?1e3:1;return parseFloat(t)*n}function Y1e(e,t,n){n===void 0&&(n=5);var r=!1,a=setTimeout(function(){r||nP(e,"transitionend",!0)},t+n),i=zo(e,"transitionend",function(){r=!0},{once:!0});return function(){clearTimeout(a),i()}}function rP(e,t,n,r){n==null&&(n=U1e(e)||0);var a=Y1e(e,n,r),i=zo(e,"transitionend",t);return function(){a(),i()}}var fT={transition:"","transition-duration":"","transition-delay":"","transition-timing-function":""};function pT(e){var t=e.node,n=e.properties,r=e.duration,a=r===void 0?200:r,i=e.easing,o=e.callback,l=[],c={},d="";Object.keys(n).forEach(function(f){var p=n[f];cF(f)?d+=f+"("+p+") ":(c[f]=p,l.push(lF(f)))}),d&&(c.transform=d,l.push("transform"));function u(f){f.target===f.currentTarget&&(Ps(t,fT),o&&o.call(this,f))}a>0&&(c.transition=l.join(", "),c["transition-duration"]=a/1e3+"s",c["transition-delay"]="0s",c["transition-timing-function"]=i||"linear");var h=rP(t,u,a);return t.clientLeft,Ps(t,c),{cancel:function(){h(),Ps(t,fT)}}}function H8(e,t,n,r,a){if(!("nodeType"in e))return pT(e);if(!t)throw new Error("must include properties to animate");return typeof r=="function"&&(a=r,r=""),pT({node:e,properties:t,duration:n,easing:r,callback:a})}function q8(e,t,n){if(e){if(typeof n>"u")return e.getAttribute(t);!n&&n!==""?e.removeAttribute(t):e.setAttribute(t,String(n))}}function V8(e){return e?Array.from(e.children):[]}function U8(e){if(e){for(;e.firstChild;)e.removeChild(e.firstChild);return e}return null}var G1e=Function.prototype.bind.call(Function.prototype.call,[].slice);function Y8(e){return e?G1e(e.childNodes):[]}function G8(e,t){return function(r){var a=r.currentTarget,i=r.target,o=q1(a,e);o.some(function(l){return Zl(l,i)})&&t.call(this,r)}}function J8(e,t){return e&&t&&t.parentNode?(t.nextSibling?t.parentNode.insertBefore(e,t.nextSibling):t.parentNode.appendChild(e),e):null}var J1e=/^(?:input|select|textarea|button)$/i;function K8(e){return e?J1e.test(e.nodeName):!1}function X8(e){return e?!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length):!1}function Q8(e,t,n){t===void 0&&(t=null),n===void 0&&(n=null);for(var r=[];e;e=e.nextElementSibling)if(e!==t){if(n&&H1(e,n))break;r.push(e)}return r}function Z8(e,t){return Q8(e,e,t)}function K1e(e,t){var n=null,r=[];for(n=e?e[t]:null;n&&n.nodeType!==9;)r.push(n),n=n[t]||null;return r}function e$(e){return K1e(e,"parentElement")}function t$(e,t){return e&&t?(t.firstElementChild?t.insertBefore(e,t.firstElementChild):t.appendChild(e),e):null}function n$(e){return e&&e.parentNode?(e.parentNode.removeChild(e),e):null}function sP(e,t){var n=Ps(e,"position"),r=n==="absolute",a=e.ownerDocument;if(n==="fixed")return a||document;for(;(e=e.parentNode)&&!dF(e);){var i=r&&Ps(e,"position")==="static",o=(Ps(e,"overflow")||"")+(Ps(e,"overflow-y")||"")+Ps(e,"overflow-x");if(!i&&/(auto|scroll)/.test(o)&&(t||Su(e)<e.scrollHeight))return e}return a||document}function r$(e,t){var n=oo(e),r={top:0,left:0};if(e){var a=t||sP(e),i=B1(a),o=Bf(a),l=Su(a,!0);i||(r=oo(a)),n={top:n.top-r.top,left:n.left-r.left,height:n.height,width:n.width};var c=n.height,d=n.top+(i?0:o),u=d+c;o=o>d?d:u>o+l?u-l:o;var h=ov(function(){return Bf(a,o)});return function(){return Tg(h)}}}function s$(e){return Q8(e&&e.parentElement?e.parentElement.firstElementChild:null,e)}var X1e=/&nbsp;/gi,Q1e=/\xA0/g,Z1e=/\s+([^\s])/gm;function a$(e,t,n){t===void 0&&(t=!0),n===void 0&&(n=!0);var r="";return e&&(r=(e.textContent||"").replace(X1e," ").replace(Q1e," "),t&&(r=r.trim()),n&&(r=r.replace(Z1e," $1"))),r}function i$(e,t){e.classList?e.classList.toggle(t):U1(e,t)?G1(e,t):Y1(e,t)}const ebe={addEventListener:bC,removeEventListener:EC,triggerEvent:nP,animate:H8,filter:G8,listen:zo,style:Ps,getComputedStyle:vC,attribute:q8,activeElement:bF,ownerDocument:kd,ownerWindow:gC,requestAnimationFrame:ov,cancelAnimationFrame:Tg,matches:H1,height:Su,width:Mg,offset:oo,offsetParent:xC,position:W1,contains:Zl,scrollbarSize:dv,scrollLeft:z1,scrollParent:sP,scrollTo:r$,scrollTop:Bf,querySelectorAll:q1,closest:hv,addClass:Y1,removeClass:G1,hasClass:U1,toggleClass:i$,transitionEnd:rP,childNodes:Y8,childElements:V8,nextUntil:Z8,parents:e$,siblings:s$,clear:U8,insertAfter:J8,isInput:K8,isVisible:X8,prepend:t$,remove:n$,text:a$},tbe=Object.freeze(Object.defineProperty({__proto__:null,activeElement:bF,addClass:Y1,addEventListener:bC,animate:H8,attribute:q8,cancelAnimationFrame:Tg,childElements:V8,childNodes:Y8,clear:U8,closest:hv,contains:Zl,default:ebe,filter:G8,getComputedStyle:vC,hasClass:U1,height:Su,insertAfter:J8,isInput:K8,isVisible:X8,listen:zo,matches:H1,nextUntil:Z8,offset:oo,offsetParent:xC,ownerDocument:kd,ownerWindow:gC,parents:e$,position:W1,prepend:t$,querySelectorAll:q1,remove:n$,removeClass:G1,removeEventListener:EC,requestAnimationFrame:ov,scrollLeft:z1,scrollParent:sP,scrollTo:r$,scrollTop:Bf,scrollbarSize:dv,siblings:s$,style:Ps,text:a$,toggleClass:i$,transitionEnd:rP,triggerEvent:nP,width:Mg},Symbol.toStringTag,{value:"Module"})),nbe=bd(tbe);var YN={exports:{}};(function(e,t){t.__esModule=!0,t.default=r;var n=Function.prototype.bind.call(Function.prototype.call,[].slice);function r(a,i){return n(a.querySelectorAll(i))}e.exports=t.default})(YN,YN.exports);var rbe=YN.exports,xo={};const sbe=bd(Bse),abe=bd(Hue),ibe=bd(tie);var mp=ra.default;Object.defineProperty(xo,"__esModule",{value:!0});xo.default=void 0;xo.getBoundsForNode=Ig;xo.getEventNodeFromPoint=l$;xo.getShowMoreNodeFromPoint=c$;xo.isEvent=hbe;xo.isShowMore=fbe;xo.objectsCollide=JN;var obe=mp(F8),lbe=mp(rh),cbe=mp(sh),GN=mp(sbe),o$=mp(abe),dbe=mp(ibe);function Vs(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:document;return(0,dbe.default)(n,e,t,{passive:!1})}function ube(e,t,n){return!e||(0,GN.default)(e,document.elementFromPoint(t,n))}function l$(e,t){var n=t.clientX,r=t.clientY,a=document.elementFromPoint(n,r);return(0,o$.default)(a,".rbc-event",e)}function c$(e,t){var n=t.clientX,r=t.clientY,a=document.elementFromPoint(n,r);return(0,o$.default)(a,".rbc-show-more",e)}function hbe(e,t){return!!l$(e,t)}function fbe(e,t){return!!c$(e,t)}function lm(e){var t=e;return e.touches&&e.touches.length&&(t=e.touches[0]),{clientX:t.clientX,clientY:t.clientY,pageX:t.pageX,pageY:t.pageY}}var mT=5,pbe=250,mbe=function(){function e(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=n.global,a=r===void 0?!1:r,i=n.longPressThreshold,o=i===void 0?250:i,l=n.validContainers,c=l===void 0?[]:l;(0,lbe.default)(this,e),this._initialEvent=null,this.selecting=!1,this.isDetached=!1,this.container=t,this.globalMouse=!t||a,this.longPressThreshold=o,this.validContainers=c,this._listeners=Object.create(null),this._handleInitialEvent=this._handleInitialEvent.bind(this),this._handleMoveEvent=this._handleMoveEvent.bind(this),this._handleTerminatingEvent=this._handleTerminatingEvent.bind(this),this._keyListener=this._keyListener.bind(this),this._dropFromOutsideListener=this._dropFromOutsideListener.bind(this),this._dragOverFromOutsideListener=this._dragOverFromOutsideListener.bind(this),this._removeTouchMoveWindowListener=Vs("touchmove",function(){},window),this._removeKeyDownListener=Vs("keydown",this._keyListener),this._removeKeyUpListener=Vs("keyup",this._keyListener),this._removeDropFromOutsideListener=Vs("drop",this._dropFromOutsideListener),this._removeDragOverFromOutsideListener=Vs("dragover",this._dragOverFromOutsideListener),this._addInitialEventListener()}return(0,cbe.default)(e,[{key:"on",value:function(n,r){var a=this._listeners[n]||(this._listeners[n]=[]);return a.push(r),{remove:function(){var o=a.indexOf(r);o!==-1&&a.splice(o,1)}}}},{key:"emit",value:function(n){for(var r=arguments.length,a=new Array(r>1?r-1:0),i=1;i<r;i++)a[i-1]=arguments[i];var o,l=this._listeners[n]||[];return l.forEach(function(c){o===void 0&&(o=c.apply(void 0,a))}),o}},{key:"teardown",value:function(){this._initialEvent=null,this._initialEventData=null,this._selectRect=null,this.selecting=!1,this._lastClickData=null,this.isDetached=!0,this._listeners=Object.create(null),this._removeTouchMoveWindowListener&&this._removeTouchMoveWindowListener(),this._removeInitialEventListener&&this._removeInitialEventListener(),this._removeEndListener&&this._removeEndListener(),this._onEscListener&&this._onEscListener(),this._removeMoveListener&&this._removeMoveListener(),this._removeKeyUpListener&&this._removeKeyUpListener(),this._removeKeyDownListener&&this._removeKeyDownListener(),this._removeDropFromOutsideListener&&this._removeDropFromOutsideListener(),this._removeDragOverFromOutsideListener&&this._removeDragOverFromOutsideListener()}},{key:"isSelected",value:function(n){var r=this._selectRect;return!r||!this.selecting?!1:JN(r,Ig(n))}},{key:"filter",value:function(n){var r=this._selectRect;return!r||!this.selecting?[]:n.filter(this.isSelected,this)}},{key:"_addLongPressListener",value:function(n,r){var a=this,i=null,o=null,l=null,c=function(f){i=setTimeout(function(){u(),n(f)},a.longPressThreshold),o=Vs("touchmove",function(){return u()}),l=Vs("touchend",function(){return u()})},d=Vs("touchstart",c),u=function(){i&&clearTimeout(i),o&&o(),l&&l(),i=null,o=null,l=null};return r&&c(r),function(){u(),d()}}},{key:"_addInitialEventListener",value:function(){var n=this,r=Vs("mousedown",function(i){n._removeInitialEventListener(),n._handleInitialEvent(i),n._removeInitialEventListener=Vs("mousedown",n._handleInitialEvent)}),a=Vs("touchstart",function(i){n._removeInitialEventListener(),n._removeInitialEventListener=n._addLongPressListener(n._handleInitialEvent,i)});this._removeInitialEventListener=function(){r(),a()}}},{key:"_dropFromOutsideListener",value:function(n){var r=lm(n),a=r.pageX,i=r.pageY,o=r.clientX,l=r.clientY;this.emit("dropFromOutside",{x:a,y:i,clientX:o,clientY:l}),n.preventDefault()}},{key:"_dragOverFromOutsideListener",value:function(n){var r=lm(n),a=r.pageX,i=r.pageY,o=r.clientX,l=r.clientY;this.emit("dragOverFromOutside",{x:a,y:i,clientX:o,clientY:l}),n.preventDefault()}},{key:"_handleInitialEvent",value:function(n){if(this._initialEvent=n,!this.isDetached){var r=lm(n),a=r.clientX,i=r.clientY,o=r.pageX,l=r.pageY,c=this.container(),d,u;if(!(n.which===3||n.button===2||!ube(c,a,i))){if(!this.globalMouse&&c&&!(0,GN.default)(c,n.target)){var h=gbe(0),f=h.top,p=h.left,y=h.bottom,g=h.right;if(u=Ig(c),d=JN({top:u.top-f,left:u.left-p,bottom:u.bottom+y,right:u.right+g},{top:l,left:o}),!d)return}var x=this.emit("beforeSelect",this._initialEventData={isTouch:/^touch/.test(n.type),x:o,y:l,clientX:a,clientY:i});if(x!==!1)switch(n.type){case"mousedown":this._removeEndListener=Vs("mouseup",this._handleTerminatingEvent),this._onEscListener=Vs("keydown",this._handleTerminatingEvent),this._removeMoveListener=Vs("mousemove",this._handleMoveEvent);break;case"touchstart":this._handleMoveEvent(n),this._removeEndListener=Vs("touchend",this._handleTerminatingEvent),this._removeMoveListener=Vs("touchmove",this._handleMoveEvent);break}}}}},{key:"_isWithinValidContainer",value:function(n){var r=n.target,a=this.validContainers;return!a||!a.length||!r?!0:a.some(function(i){return!!r.closest(i)})}},{key:"_handleTerminatingEvent",value:function(n){var r=this.selecting,a=this._selectRect;if(!r&&n.type.includes("key")&&(n=this._initialEvent),this.selecting=!1,this._removeEndListener&&this._removeEndListener(),this._removeMoveListener&&this._removeMoveListener(),this._selectRect=null,this._initialEvent=null,this._initialEventData=null,!!n){var i=!this.container||(0,GN.default)(this.container(),n.target),o=this._isWithinValidContainer(n);return n.key==="Escape"||!o?this.emit("reset"):!r&&i?this._handleClickEvent(n):r?this.emit("select",a):this.emit("reset")}}},{key:"_handleClickEvent",value:function(n){var r=lm(n),a=r.pageX,i=r.pageY,o=r.clientX,l=r.clientY,c=new Date().getTime();return this._lastClickData&&c-this._lastClickData.timestamp<pbe?(this._lastClickData=null,this.emit("doubleClick",{x:a,y:i,clientX:o,clientY:l})):(this._lastClickData={timestamp:c},this.emit("click",{x:a,y:i,clientX:o,clientY:l}))}},{key:"_handleMoveEvent",value:function(n){if(!(this._initialEventData===null||this.isDetached)){var r=this._initialEventData,a=r.x,i=r.y,o=lm(n),l=o.pageX,c=o.pageY,d=Math.abs(a-l),u=Math.abs(i-c),h=Math.min(l,a),f=Math.min(c,i),p=this.selecting,y=this.isClick(l,c);y&&!p&&!(d||u)||(!p&&!y&&this.emit("selectStart",this._initialEventData),y||(this.selecting=!0,this._selectRect={top:f,left:h,x:l,y:c,right:h+d,bottom:f+u},this.emit("selecting",this._selectRect)),n.preventDefault())}}},{key:"_keyListener",value:function(n){this.ctrl=n.metaKey||n.ctrlKey}},{key:"isClick",value:function(n,r){var a=this._initialEventData,i=a.x,o=a.y,l=a.isTouch;return!l&&Math.abs(n-i)<=mT&&Math.abs(r-o)<=mT}}])}();function gbe(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return(0,obe.default)(e)!=="object"&&(e={top:e,left:e,right:e,bottom:e}),e}function JN(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,r=Ig(e),a=r.top,i=r.left,o=r.right,l=o===void 0?i:o,c=r.bottom,d=c===void 0?a:c,u=Ig(t),h=u.top,f=u.left,p=u.right,y=p===void 0?f:p,g=u.bottom,x=g===void 0?h:g;return!(d-n<h||a+n>x||l-n<f||i+n>y)}function Ig(e){if(!e.getBoundingClientRect)return e;var t=e.getBoundingClientRect(),n=t.left+gT("left"),r=t.top+gT("top");return{top:r,left:n,right:(e.offsetWidth||0)+n,bottom:(e.offsetHeight||0)+r}}function gT(e){if(e==="left")return window.pageXOffset||document.body.scrollLeft||0;if(e==="top")return window.pageYOffset||document.body.scrollTop||0}xo.default=mbe;var gb={};const vbe=bd(Wne);var vb=ra.default;Object.defineProperty(gb,"__esModule",{value:!0});gb.default=void 0;var xbe=vb(vbe),vT=vb(Td),ybe=vb(gv),cm=vb(j);function qx(e){return typeof e=="string"?e:e+"%"}function bbe(e){var t=e.style,n=e.className,r=e.event,a=e.accessors,i=e.rtl,o=e.selected,l=e.label,c=e.continuesPrior,d=e.continuesAfter,u=e.getters,h=e.onClick,f=e.onDoubleClick,p=e.isBackgroundEvent,y=e.onKeyPress,g=e.components,x=g.event,m=g.eventWrapper,v=a.title(r),b=a.tooltip(r),C=a.end(r),S=a.start(r),P=u.eventProp(r,S,C,o),D=[cm.default.createElement("div",{key:"1",className:"rbc-event-label"},l),cm.default.createElement("div",{key:"2",className:"rbc-event-content"},x?cm.default.createElement(x,{event:r,title:v}):v)],N=t.height,M=t.top,L=t.width,T=t.xOffset,E=(0,vT.default)((0,vT.default)({},P.style),{},(0,xbe.default)({top:qx(M),height:qx(N),width:qx(L)},i?"right":"left",qx(T)));return cm.default.createElement(m,Object.assign({type:"time"},e),cm.default.createElement("div",{role:"button",tabIndex:0,onClick:h,onDoubleClick:f,style:E,onKeyDown:y,title:b?(typeof l=="string"?l+": ":"")+b:void 0,className:(0,ybe.default)(p?"rbc-background-event":"rbc-event",n,P.className,{"rbc-selected":o,"rbc-event-continues-earlier":c,"rbc-event-continues-later":d})},D))}gb.default=bbe;var ic={},d$=ra.default;Object.defineProperty(ic,"__esModule",{value:!0});ic.dragAccessors=void 0;ic.eventTimes=kbe;ic.mergeComponents=Pbe;ic.pointInColumn=Dbe;var wbe=d$(Td),jbe=d$(tP),xT=pp,Nbe=j,Sbe=["children"];ic.dragAccessors={start:(0,xT.wrapAccessor)(function(e){return e.start}),end:(0,xT.wrapAccessor)(function(e){return e.end})};function Cbe(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=function(i){var o=i.children,l=(0,jbe.default)(i,Sbe);return t.filter(Boolean).reduceRight(function(c,d){return(0,Nbe.createElement)(d,l,c)},o)};return r}function Pbe(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=Object.keys(t),r=(0,wbe.default)({},e);return n.forEach(function(a){r[a]=e[a]?Cbe(e[a],t[a]):t[a]}),r}function Dbe(e,t){var n=e.left,r=e.right,a=e.top,i=t.x,o=t.y;return i<r+10&&i>n&&o>a}function kbe(e,t,n){var r=t.start(e),a=t.end(e),i=n.eq(r,a,"minutes")&&n.diff(r,a,"minutes")===0;i&&(a=n.add(a,1,"day"));var o=n.diff(r,a,"milliseconds");return{start:r,end:a,duration:o}}var Ebe=W8.default,Ad=ra.default;Object.defineProperty(mb,"__esModule",{value:!0});mb.default=void 0;var Tc=Ad(Td),Tbe=Ad(rh),Abe=Ad(sh),_be=Ad(hp),Mbe=Ad(fp),P2=nbe,Rbe=Ad(rbe),Kd=Ad(j),Lbe=ah,Ac=Ebe(xo),Ibe=Ad(gb),Pl=ic,u$=function(e){function t(){var n;(0,Tbe.default)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return n=(0,_be.default)(this,t,[].concat(a)),n.handleMove=function(o,l){if(!(0,Pl.pointInColumn)(l,o))return n.reset();var c=n.context.draggable.dragAndDropAction.event,d=n.props,u=d.accessors,h=d.slotMetrics,f=h.closestSlotFromPoint({y:o.y-n.eventOffsetTop,x:o.x},l),p=(0,Pl.eventTimes)(c,u,n.props.localizer),y=p.duration,g=n.props.localizer.add(f,y,"milliseconds");n.update(c,h.getRange(f,g,!1,!0))},n.handleDropFromOutside=function(o,l){var c=n.props,d=c.slotMetrics,u=c.resource,h=d.closestSlotFromPoint({y:o.y,x:o.x},l),f=n._calculateDnDEnd(h);n.context.draggable.onDropFromOutside({start:h,end:f,allDay:!1,resource:u}),n.reset()},n.handleDragOverFromOutside=function(o,l){var c=n.props.slotMetrics,d=c.closestSlotFromPoint({y:o.y,x:o.x},l),u=n._calculateDnDEnd(d),h=n.context.draggable.dragFromOutsideItem();n.update(h,c.getRange(d,u,!1,!0))},n._calculateDnDEnd=function(o){var l=n.props,c=l.accessors,d=l.slotMetrics,u=l.localizer,h=n.context.draggable.dragFromOutsideItem(),f=(0,Pl.eventTimes)(h,c,u),p=f.duration,y=d.nextSlot(o),g=!isNaN(p);if(g){var x=u.add(o,p,"milliseconds");y=new Date(Math.max(x,y))}return y},n.updateParentScroll=function(o,l){setTimeout(function(){var c=(0,Rbe.default)(l,".rbc-addons-dnd-drag-preview")[0];c&&(c.offsetTop<o.scrollTop?(0,P2.scrollTop)(o,Math.max(c.offsetTop,0)):c.offsetTop+c.offsetHeight>o.scrollTop+o.clientHeight&&(0,P2.scrollTop)(o,Math.min(c.offsetTop-o.offsetHeight+c.offsetHeight,o.scrollHeight)))})},n._selectable=function(){var o=n.ref.current,l=o.children[0],c=!1,d=n._selector=new Ac.default(function(){return o.closest(".rbc-time-view")}),u=(0,P2.scrollParent)(o);d.on("beforeSelect",function(h){var f=n.context.draggable.dragAndDropAction;if(!f.action)return!1;if(f.action==="resize")return(0,Pl.pointInColumn)((0,Ac.getBoundsForNode)(l),h);var p=(0,Ac.getEventNodeFromPoint)(l,h);if(!p)return!1;n.eventOffsetTop=h.y-(0,Ac.getBoundsForNode)(p).top}),d.on("selecting",function(h){var f=(0,Ac.getBoundsForNode)(l),p=n.context.draggable.dragAndDropAction;p.action==="move"&&(n.updateParentScroll(u,l),n.handleMove(h,f)),p.action==="resize"&&(n.updateParentScroll(u,l),n.handleResize(h,f))}),d.on("dropFromOutside",function(h){if(n.context.draggable.onDropFromOutside){var f=(0,Ac.getBoundsForNode)(l);(0,Pl.pointInColumn)(f,h)&&n.handleDropFromOutside(h,f)}}),d.on("dragOverFromOutside",function(h){var f=n.context.draggable.dragFromOutsideItem?n.context.draggable.dragFromOutsideItem():null;if(f){var p=(0,Ac.getBoundsForNode)(l);if(!(0,Pl.pointInColumn)(p,h))return n.reset();n.handleDragOverFromOutside(h,p)}}),d.on("selectStart",function(){c=!0,n.context.draggable.onStart()}),d.on("select",function(h){var f=(0,Ac.getBoundsForNode)(l);c=!1;var p=n.context.draggable.dragAndDropAction;if(p.action==="resize")n.handleInteractionEnd();else{if(!n.state.event||!(0,Pl.pointInColumn)(f,h))return;n.handleInteractionEnd()}}),d.on("click",function(){c&&n.reset(),n.context.draggable.onEnd(null)}),d.on("reset",function(){n.reset(),n.context.draggable.onEnd(null)})},n.handleInteractionEnd=function(){var o=n.props.resource,l=n.state.event;n.reset(),n.context.draggable.onEnd({start:l.start,end:l.end,resourceId:o})},n._teardownSelectable=function(){n._selector&&(n._selector.teardown(),n._selector=null)},n.state={},n.ref=Kd.default.createRef(),n}return(0,Mbe.default)(t,e),(0,Abe.default)(t,[{key:"componentDidMount",value:function(){this._selectable()}},{key:"componentWillUnmount",value:function(){this._teardownSelectable()}},{key:"reset",value:function(){this.state.event&&this.setState({event:null,top:null,height:null})}},{key:"update",value:function(r,a){var i=a.startDate,o=a.endDate,l=a.top,c=a.height,d=this.state.event;d&&i===d.start&&o===d.end||this.setState({top:l,height:c,event:(0,Tc.default)((0,Tc.default)({},r),{},{start:i,end:o})})}},{key:"handleResize",value:function(r,a){var i=this.props,o=i.accessors,l=i.slotMetrics,c=i.localizer,d=this.context.draggable.dragAndDropAction,u=d.event,h=d.direction,f=l.closestSlotFromPoint(r,a),p=(0,Pl.eventTimes)(u,o,c),y=p.start,g=p.end,x;if(h==="UP"){var m=c.min(f,l.closestSlotFromDate(g,-1));x=l.getRange(m,g),x=(0,Tc.default)((0,Tc.default)({},x),{},{endDate:g})}else if(h==="DOWN"){var v=c.max(f,l.closestSlotFromDate(y));x=l.getRange(y,v),x=(0,Tc.default)((0,Tc.default)({},x),{},{startDate:y})}this.update(u,x)}},{key:"renderContent",value:function(){var r=this.props,a=r.children,i=r.accessors,o=r.components,l=r.getters,c=r.slotMetrics,d=r.localizer,u=this.state,h=u.event,f=u.top,p=u.height;if(!h)return a;var y=a.props.children,g=h.start,x=h.end,m,v="eventTimeRangeFormat",b=c.startsBeforeDay(g),C=c.startsAfterDay(x);return b?v="eventTimeRangeEndFormat":C&&(v="eventTimeRangeStartFormat"),b&&C?m=d.messages.allDay:m=d.format({start:g,end:x},v),Kd.default.cloneElement(a,{children:Kd.default.createElement(Kd.default.Fragment,null,y,h&&Kd.default.createElement(Ibe.default,{event:h,label:m,className:"rbc-addons-dnd-drag-preview",style:{top:f,height:p,width:100},getters:l,components:o,accessors:(0,Tc.default)((0,Tc.default)({},i),Pl.dragAccessors),continuesPrior:b,continuesAfter:C}))})}},{key:"render",value:function(){return Kd.default.createElement("div",{ref:this.ref},this.renderContent())}}])}(Kd.default.Component);u$.contextType=Lbe.DnDContext;mb.default=u$;var xb={},h$={exports:{}},f$={exports:{}},p$={exports:{}};(function(e){function t(n,r){(r==null||r>n.length)&&(r=n.length);for(var a=0,i=Array(r);a<r;a++)i[a]=n[a];return i}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports})(p$);var m$=p$.exports;(function(e){var t=m$;function n(r){if(Array.isArray(r))return t(r)}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports})(f$);var Obe=f$.exports,g$={exports:{}};(function(e){function t(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports})(g$);var Fbe=g$.exports,v$={exports:{}};(function(e){var t=m$;function n(r,a){if(r){if(typeof r=="string")return t(r,a);var i={}.toString.call(r).slice(8,-1);return i==="Object"&&r.constructor&&(i=r.constructor.name),i==="Map"||i==="Set"?Array.from(r):i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?t(r,a):void 0}}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports})(v$);var $be=v$.exports,x$={exports:{}};(function(e){function t(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports})(x$);var Bbe=x$.exports;(function(e){var t=Obe,n=Fbe,r=$be,a=Bbe;function i(o){return t(o)||n(o)||r(o)||a()}e.exports=i,e.exports.__esModule=!0,e.exports.default=e.exports})(h$);var y$=h$.exports,yb={},bb={},wb={},_d=ra.default;Object.defineProperty(wb,"__esModule",{value:!0});wb.default=void 0;var yT=_d(Td),zbe=_d(tP),Wbe=_d(rh),Hbe=_d(sh),qbe=_d(hp),Vbe=_d(fp),dm=_d(j),Ube=_d(gv),Ybe=["style","className","event","selected","isAllDay","onSelect","onDoubleClick","onKeyPress","localizer","continuesPrior","continuesAfter","accessors","getters","children","components","slotStart","slotEnd"],Gbe=function(e){function t(){return(0,Wbe.default)(this,t),(0,qbe.default)(this,t,arguments)}return(0,Vbe.default)(t,e),(0,Hbe.default)(t,[{key:"render",value:function(){var r=this.props,a=r.style,i=r.className,o=r.event,l=r.selected,c=r.isAllDay,d=r.onSelect,u=r.onDoubleClick,h=r.onKeyPress,f=r.localizer,p=r.continuesPrior,y=r.continuesAfter,g=r.accessors,x=r.getters,m=r.children,v=r.components,b=v.event,C=v.eventWrapper,S=r.slotStart,P=r.slotEnd,D=(0,zbe.default)(r,Ybe);delete D.resizable;var N=g.title(o),M=g.tooltip(o),L=g.end(o),T=g.start(o),E=g.allDay(o),A=c||E||f.diff(T,f.ceil(L,"day"),"day")>1,O=x.eventProp(o,T,L,l),W=dm.default.createElement("div",{className:"rbc-event-content",title:M||void 0},b?dm.default.createElement(b,{event:o,continuesPrior:p,continuesAfter:y,title:N,isAllDay:E,localizer:f,slotStart:S,slotEnd:P}):N);return dm.default.createElement(C,Object.assign({},this.props,{type:"date"}),dm.default.createElement("div",Object.assign({},D,{style:(0,yT.default)((0,yT.default)({},O.style),a),className:(0,Ube.default)("rbc-event",i,O.className,{"rbc-selected":l,"rbc-event-allday":A,"rbc-event-continues-prior":p,"rbc-event-continues-after":y}),onClick:function(F){return d&&d(o,F)},onDoubleClick:function(F){return u&&u(o,F)},onKeyDown:function(F){return h&&h(o,F)}}),typeof m=="function"?m(W):W))}}])}(dm.default.Component);wb.default=Gbe;var Md={},Jbe=ra.default;Object.defineProperty(Md,"__esModule",{value:!0});Md.dateCellSelection=Zbe;Md.getSlotAtX=b$;Md.isSelected=Xbe;Md.pointInBox=Qbe;Md.slotWidth=aP;var Kbe=Jbe(_F);function Xbe(e,t){return!e||t==null?!1:(0,Kbe.default)(e,t)}function aP(e,t){var n=e.right-e.left,r=n/t;return r}function b$(e,t,n,r){var a=aP(e,r);return n?r-1-Math.floor((t-e.left)/a):Math.floor((t-e.left)/a)}function Qbe(e,t){var n=t.x,r=t.y;return r>=e.top&&r<=e.bottom&&n>=e.left&&n<=e.right}function Zbe(e,t,n,r,a){var i=-1,o=-1,l=r-1,c=aP(t,r),d=b$(t,n.x,a,r),u=t.top<n.y&&t.bottom>n.y,h=t.top<e.y&&t.bottom>e.y,f=e.y>t.bottom,p=t.top>e.y,y=n.top<t.top&&n.bottom>t.bottom;return y&&(i=0,o=l),u&&(p?(i=0,o=d):f&&(i=d,o=l)),h&&(i=o=a?l-Math.floor((e.x-t.left)/c):Math.floor((e.x-t.left)/c),u?d<i?i=d:o=d:e.y<n.y?o=l:i=0),{startIdx:i,endIdx:o}}var iP=ra.default;Object.defineProperty(bb,"__esModule",{value:!0});bb.default=void 0;var Do=iP(dC),bT=iP(j),ewe=iP(wb),twe=Md;bb.default={propTypes:{slotMetrics:Do.default.object.isRequired,selected:Do.default.object,isAllDay:Do.default.bool,accessors:Do.default.object.isRequired,localizer:Do.default.object.isRequired,components:Do.default.object.isRequired,getters:Do.default.object.isRequired,onSelect:Do.default.func,onDoubleClick:Do.default.func,onKeyPress:Do.default.func},defaultProps:{segments:[],selected:{}},renderEvent:function(t,n){var r=t.selected;t.isAllDay;var a=t.accessors,i=t.getters,o=t.onSelect,l=t.onDoubleClick,c=t.onKeyPress,d=t.localizer,u=t.slotMetrics,h=t.components,f=t.resizable,p=u.continuesPrior(n),y=u.continuesAfter(n);return bT.default.createElement(ewe.default,{event:n,getters:i,localizer:d,accessors:a,components:h,onSelect:o,onDoubleClick:l,onKeyPress:c,continuesPrior:p,continuesAfter:y,slotStart:u.first,slotEnd:u.last,selected:(0,twe.isSelected)(n,r),resizable:f})},renderSpan:function(t,n,r){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:" ",i=Math.abs(n)/t*100+"%";return bT.default.createElement("div",{key:r,className:"rbc-row-segment",style:{WebkitFlexBasis:i,flexBasis:i,maxWidth:i}},a)}};var Rd=ra.default;Object.defineProperty(yb,"__esModule",{value:!0});yb.default=void 0;var nwe=Rd(Td),rwe=Rd(rh),swe=Rd(sh),awe=Rd(hp),iwe=Rd(fp),owe=Rd(gv),wT=Rd(j),E0=Rd(bb),w$=function(e){function t(){return(0,rwe.default)(this,t),(0,awe.default)(this,t,arguments)}return(0,iwe.default)(t,e),(0,swe.default)(t,[{key:"render",value:function(){var r=this,a=this.props,i=a.segments,o=a.slotMetrics.slots,l=a.className,c=1;return wT.default.createElement("div",{className:(0,owe.default)(l,"rbc-row")},i.reduce(function(d,u,h){var f=u.event,p=u.left,y=u.right,g=u.span,x="_lvl_"+h,m=p-c,v=E0.default.renderEvent(r.props,f);return m&&d.push(E0.default.renderSpan(o,m,"".concat(x,"_gap"))),d.push(E0.default.renderSpan(o,g,x,v)),c=y+1,d},[]))}}])}(wT.default.Component);w$.defaultProps=(0,nwe.default)({},E0.default.defaultProps);yb.default=w$;var oc={},j$=ra.default;Object.defineProperty(oc,"__esModule",{value:!0});oc.endOfRange=N$;oc.eventLevels=dwe;oc.eventSegments=cwe;oc.inRange=uwe;oc.segsOverlap=S$;oc.sortEvents=KN;oc.sortWeekEvents=hwe;var D2=j$(y$),lwe=j$(OF);function N$(e){var t=e.dateRange,n=e.unit,r=n===void 0?"day":n,a=e.localizer;return{first:t[0],last:a.add(t[t.length-1],1,r)}}function cwe(e,t,n,r){var a=N$({dateRange:t,localizer:r}),i=a.first,o=a.last,l=r.diff(i,o,"day"),c=r.max(r.startOf(n.start(e),"day"),i),d=r.min(r.ceil(n.end(e),"day"),o),u=(0,lwe.default)(t,function(f){return r.isSameDate(f,c)}),h=r.diff(c,d,"day");return h=Math.min(h,l),h=Math.max(h-r.segmentOffset,1),{event:e,span:h,left:u+1,right:Math.max(u+h,1)}}function dwe(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1/0,n,r,a,i=[],o=[];for(n=0;n<e.length;n++){for(a=e[n],r=0;r<i.length&&S$(a,i[r]);r++);r>=t?o.push(a):(i[r]||(i[r]=[])).push(a)}for(n=0;n<i.length;n++)i[n].sort(function(l,c){return l.left-c.left});return{levels:i,extra:o}}function uwe(e,t,n,r,a){var i={start:r.start(e),end:r.end(e)},o={start:t,end:n};return a.inEventRange({event:i,range:o})}function S$(e,t){return t.some(function(n){return n.left<=e.right&&n.right>=e.left})}function hwe(e,t,n){var r=(0,D2.default)(e),a=[],i=[];r.forEach(function(c){var d=t.start(c),u=t.end(c);n.daySpan(d,u)>1?a.push(c):i.push(c)});var o=a.sort(function(c,d){return KN(c,d,t,n)}),l=i.sort(function(c,d){return KN(c,d,t,n)});return[].concat((0,D2.default)(o),(0,D2.default)(l))}function KN(e,t,n,r){var a={start:n.start(e),end:n.end(e),allDay:n.allDay(e)},i={start:n.start(t),end:n.end(t),allDay:n.allDay(t)};return r.sortEvents({evtA:a,evtB:i})}var fwe=W8.default,Ld=ra.default;Object.defineProperty(xb,"__esModule",{value:!0});xb.default=void 0;var Vx=Ld(Td),pwe=Ld(y$),mwe=Ld(rh),gwe=Ld(sh),vwe=Ld(hp),xwe=Ld(fp),Ux=Ld(j),ywe=Ld(yb),zh=fwe(xo),bwe=oc,_c=Md,Yx=ic,wwe=ah,C$=function(e){function t(){var n;(0,mwe.default)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return n=(0,vwe.default)(this,t,[].concat(a)),n.handleMove=function(o,l,c){if(!(0,_c.pointInBox)(l,o))return n.reset();var d=n.context.draggable.dragAndDropAction.event||c,u=n.props,h=u.accessors,f=u.slotMetrics,p=u.rtl,y=u.localizer,g=(0,_c.getSlotAtX)(l,o.x,p,f.slots),x=f.getDateForSlot(g),m=(0,Yx.eventTimes)(d,h,y),v=m.start,b=m.duration;v=y.merge(x,v);var C=y.add(v,b,"milliseconds");n.update(d,v,C)},n.handleDropFromOutside=function(o,l){if(n.context.draggable.onDropFromOutside){var c=n.props,d=c.slotMetrics,u=c.rtl,h=c.localizer,f=(0,_c.getSlotAtX)(l,o.x,u,d.slots),p=d.getDateForSlot(f);n.context.draggable.onDropFromOutside({start:p,end:h.add(p,1,"day"),allDay:!1})}},n.handleDragOverFromOutside=function(o,l){var c=n.context.draggable.dragFromOutsideItem?n.context.draggable.dragFromOutsideItem():null;c&&n.handleMove(o,l,c)},n._selectable=function(){var o=n.ref.current.closest(".rbc-month-row, .rbc-allday-cell"),l=o.closest(".rbc-month-view, .rbc-time-view"),c=o.classList.contains("rbc-month-row"),d=n._selector=new zh.default(function(){return l},{validContainers:(0,pwe.default)(c?[]:[".rbc-day-slot",".rbc-allday-cell"])});d.on("beforeSelect",function(u){var h=n.props.isAllDay,f=n.context.draggable.dragAndDropAction.action,p=(0,zh.getBoundsForNode)(o),y=(0,_c.pointInBox)(p,u);return f==="move"||f==="resize"&&(!h||y)}),d.on("selecting",function(u){var h=(0,zh.getBoundsForNode)(o),f=n.context.draggable.dragAndDropAction;f.action==="move"&&n.handleMove(u,h),f.action==="resize"&&n.handleResize(u,h)}),d.on("selectStart",function(){return n.context.draggable.onStart()}),d.on("select",function(u){var h=(0,zh.getBoundsForNode)(o);n.state.segment&&((0,_c.pointInBox)(h,u)?n.handleInteractionEnd():n.reset())}),d.on("dropFromOutside",function(u){if(n.context.draggable.onDropFromOutside){var h=(0,zh.getBoundsForNode)(o);(0,_c.pointInBox)(h,u)&&n.handleDropFromOutside(u,h)}}),d.on("dragOverFromOutside",function(u){if(n.context.draggable.dragFromOutsideItem){var h=(0,zh.getBoundsForNode)(o);n.handleDragOverFromOutside(u,h)}}),d.on("click",function(){return n.context.draggable.onEnd(null)}),d.on("reset",function(){n.reset(),n.context.draggable.onEnd(null)})},n.handleInteractionEnd=function(){var o=n.props,l=o.resourceId,c=o.isAllDay,d=n.state.segment.event;n.reset(),n.context.draggable.onEnd({start:d.start,end:d.end,resourceId:l,isAllDay:c})},n._teardownSelectable=function(){n._selector&&(n._selector.teardown(),n._selector=null)},n.state={},n.ref=Ux.default.createRef(),n}return(0,xwe.default)(t,e),(0,gwe.default)(t,[{key:"componentDidMount",value:function(){this._selectable()}},{key:"componentWillUnmount",value:function(){this._teardownSelectable()}},{key:"reset",value:function(){this.state.segment&&this.setState({segment:null})}},{key:"update",value:function(r,a,i){var o=(0,bwe.eventSegments)((0,Vx.default)((0,Vx.default)({},r),{},{end:i,start:a,__isPreview:!0}),this.props.slotMetrics.range,Yx.dragAccessors,this.props.localizer),l=this.state.segment;l&&o.span===l.span&&o.left===l.left&&o.right===l.right||this.setState({segment:o})}},{key:"handleResize",value:function(r,a){var i=this.context.draggable.dragAndDropAction,o=i.event,l=i.direction,c=this.props,d=c.accessors,u=c.slotMetrics,h=c.rtl,f=c.localizer,p=(0,Yx.eventTimes)(o,d,f),y=p.start,g=p.end,x=(0,_c.getSlotAtX)(a,r.x,h,u.slots),m=u.getDateForSlot(x),v=(0,_c.pointInBox)(a,r);if(l==="RIGHT"){if(v){if(u.last<y)return this.reset();f.eq(f.startOf(g,"day"),g)?g=f.add(m,1,"day"):g=m}else if(f.inRange(y,u.first,u.last)||a.bottom<r.y&&+u.first>+y)g=f.add(u.last,1,"milliseconds");else{this.setState({segment:null});return}var b=d.end(o);g=f.merge(g,b),f.lt(g,y)&&(g=b)}else if(l==="LEFT"){if(v){if(u.first>g)return this.reset();y=m}else if(f.inRange(g,u.first,u.last)||a.top>r.y&&f.lt(u.last,g))y=f.add(u.first,-1,"milliseconds");else{this.reset();return}var C=d.start(o);y=f.merge(y,C),f.gt(y,g)&&(y=C)}this.update(o,y,g)}},{key:"render",value:function(){var r=this.props,a=r.children,i=r.accessors,o=this.state.segment;return Ux.default.createElement("div",{ref:this.ref,className:"rbc-addons-dnd-row-body"},a,o&&Ux.default.createElement(ywe.default,Object.assign({},this.props,{selected:null,className:"rbc-addons-dnd-drag-row",segments:[o],accessors:(0,Vx.default)((0,Vx.default)({},i),Yx.dragAccessors)})))}}])}(Ux.default.Component);C$.contextType=wwe.DnDContext;xb.default=C$;var yo=ra.default;Object.defineProperty(eP,"__esModule",{value:!0});eP.default=Rwe;var Gx=yo(Td),jwe=yo(tP),Nwe=yo(rh),Swe=yo(sh),Cwe=yo(hp),Pwe=yo(fp),k2=yo(j),Dwe=yo(gv),kwe=yo(pb),Ewe=yo(mb),Twe=yo(xb),Awe=ic,_we=ah,Mwe=["selectable","elementProps","components"];function Rwe(e){var t=function(n){function r(){var a;(0,Nwe.default)(this,r);for(var i=arguments.length,o=new Array(i),l=0;l<i;l++)o[l]=arguments[l];return a=(0,Cwe.default)(this,r,[].concat(o)),a.defaultOnDragOver=function(c){c.preventDefault()},a.handleBeginAction=function(c,d,u){a.setState({event:c,action:d,direction:u});var h=a.props.onDragStart;h&&h({event:c,action:d,direction:u})},a.handleInteractionStart=function(){a.state.interacting===!1&&a.setState({interacting:!0})},a.handleInteractionEnd=function(c){var d=a.state,u=d.action,h=d.event;if(u&&(a.setState({action:null,event:null,interacting:!1,direction:null}),c!=null)){c.event=h;var f=a.props,p=f.onEventDrop,y=f.onEventResize;u==="move"&&p&&p(c),u==="resize"&&y&&y(c)}},a.state={interacting:!1},a}return(0,Pwe.default)(r,n),(0,Swe.default)(r,[{key:"getDnDContextValue",value:function(){return{draggable:{onStart:this.handleInteractionStart,onEnd:this.handleInteractionEnd,onBeginAction:this.handleBeginAction,onDropFromOutside:this.props.onDropFromOutside,dragFromOutsideItem:this.props.dragFromOutsideItem,draggableAccessor:this.props.draggableAccessor,resizableAccessor:this.props.resizableAccessor,dragAndDropAction:this.state}}}},{key:"render",value:function(){var i=this.props,o=i.selectable,l=i.elementProps,c=i.components,d=(0,jwe.default)(i,Mwe),u=this.state.interacting;delete d.onEventDrop,delete d.onEventResize,d.selectable=o?"ignoreEvents":!1,this.components=(0,Awe.mergeComponents)(c,{eventWrapper:kwe.default,eventContainerWrapper:Ewe.default,weekWrapper:Twe.default});var h=this.props.onDropFromOutside?(0,Gx.default)((0,Gx.default)({},l),{},{onDragOver:this.props.onDragOver||this.defaultOnDragOver}):l;d.className=(0,Dwe.default)(d.className,"rbc-addons-dnd",!!u&&"rbc-addons-dnd-is-dragging");var f=this.getDnDContextValue();return k2.default.createElement(_we.DnDContext.Provider,{value:f},k2.default.createElement(e,Object.assign({},d,{elementProps:h,components:this.components})))}}])}(k2.default.Component);return t.defaultProps=(0,Gx.default)((0,Gx.default)({},e.defaultProps),{},{draggableAccessor:null,resizableAccessor:null,resizable:!0}),t}var Lwe=ra.default;Object.defineProperty(ZC,"__esModule",{value:!0});var P$=ZC.default=void 0,Iwe=Lwe(eP);P$=ZC.default=Iwe.default;function Owe(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,XN(e,t)}function XN(e,t){return XN=Object.setPrototypeOf||function(r,a){return r.__proto__=a,r},XN(e,t)}function Fwe(e,t){if(e==null)return{};var n={},r=Object.keys(e),a,i;for(i=0;i<r.length;i++)a=r[i],!(t.indexOf(a)>=0)&&(n[a]=e[a]);return n}function jT(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $we(e,t,n){return e===t?!0:e.correspondingElement?e.correspondingElement.classList.contains(n):e.classList.contains(n)}function Bwe(e,t,n){if(e===t)return!0;for(;e.parentNode||e.host;){if(e.parentNode&&$we(e,t,n))return!0;e=e.parentNode||e.host}return e}function zwe(e){return document.documentElement.clientWidth<=e.clientX||document.documentElement.clientHeight<=e.clientY}var Wwe=function(){if(!(typeof window>"u"||typeof window.addEventListener!="function")){var t=!1,n=Object.defineProperty({},"passive",{get:function(){t=!0}}),r=function(){};return window.addEventListener("testPassiveEventSupport",r,n),window.removeEventListener("testPassiveEventSupport",r,n),t}};function Hwe(e){return e===void 0&&(e=0),function(){return++e}}var qwe=Hwe(),QN,Jx={},E2={},Vwe=["touchstart","touchmove"],Uwe="ignore-react-onclickoutside";function NT(e,t){var n={},r=Vwe.indexOf(t)!==-1;return r&&QN&&(n.passive=!e.props.preventDefault),n}function jb(e,t){var n,r,a=e.displayName||e.name||"Component";return r=n=function(i){Owe(o,i);function o(c){var d;return d=i.call(this,c)||this,d.__outsideClickHandler=function(u){if(typeof d.__clickOutsideHandlerProp=="function"){d.__clickOutsideHandlerProp(u);return}var h=d.getInstance();if(typeof h.props.handleClickOutside=="function"){h.props.handleClickOutside(u);return}if(typeof h.handleClickOutside=="function"){h.handleClickOutside(u);return}throw new Error("WrappedComponent: "+a+" lacks a handleClickOutside(event) function for processing outside click events.")},d.__getComponentNode=function(){var u=d.getInstance();return t&&typeof t.setClickOutsideRef=="function"?t.setClickOutsideRef()(u):typeof u.setClickOutsideRef=="function"?u.setClickOutsideRef():rl.findDOMNode(u)},d.enableOnClickOutside=function(){if(!(typeof document>"u"||E2[d._uid])){typeof QN>"u"&&(QN=Wwe()),E2[d._uid]=!0;var u=d.props.eventTypes;u.forEach||(u=[u]),Jx[d._uid]=function(h){if(d.componentNode!==null&&!(d.initTimeStamp>h.timeStamp)&&(d.props.preventDefault&&h.preventDefault(),d.props.stopPropagation&&h.stopPropagation(),!(d.props.excludeScrollbar&&zwe(h)))){var f=h.composed&&h.composedPath&&h.composedPath().shift()||h.target;Bwe(f,d.componentNode,d.props.outsideClickIgnoreClass)===document&&d.__outsideClickHandler(h)}},u.forEach(function(h){document.addEventListener(h,Jx[d._uid],NT(jT(d),h))})}},d.disableOnClickOutside=function(){delete E2[d._uid];var u=Jx[d._uid];if(u&&typeof document<"u"){var h=d.props.eventTypes;h.forEach||(h=[h]),h.forEach(function(f){return document.removeEventListener(f,u,NT(jT(d),f))}),delete Jx[d._uid]}},d.getRef=function(u){return d.instanceRef=u},d._uid=qwe(),d.initTimeStamp=performance.now(),d}var l=o.prototype;return l.getInstance=function(){if(e.prototype&&!e.prototype.isReactComponent)return this;var d=this.instanceRef;return d.getInstance?d.getInstance():d},l.componentDidMount=function(){if(!(typeof document>"u"||!document.createElement)){var d=this.getInstance();if(t&&typeof t.handleClickOutside=="function"&&(this.__clickOutsideHandlerProp=t.handleClickOutside(d),typeof this.__clickOutsideHandlerProp!="function"))throw new Error("WrappedComponent: "+a+" lacks a function for processing outside click events specified by the handleClickOutside config option.");this.componentNode=this.__getComponentNode(),!this.props.disableOnClickOutside&&this.enableOnClickOutside()}},l.componentDidUpdate=function(){this.componentNode=this.__getComponentNode()},l.componentWillUnmount=function(){this.disableOnClickOutside()},l.render=function(){var d=this.props;d.excludeScrollbar;var u=Fwe(d,["excludeScrollbar"]);return e.prototype&&e.prototype.isReactComponent?u.ref=this.getRef:u.wrappedRef=this.getRef,u.disableOnClickOutside=this.disableOnClickOutside,u.enableOnClickOutside=this.enableOnClickOutside,j.createElement(e,u)},o}(j.Component),n.displayName="OnClickOutside("+a+")",n.defaultProps={eventTypes:["mousedown","touchstart"],excludeScrollbar:t&&t.excludeScrollbar||!1,outsideClickIgnoreClass:Uwe,preventDefault:!1,stopPropagation:!1},n.getClass=function(){return e.getClass?e.getClass():e},r}const D$={...qy},Ywe=D$.useInsertionEffect,Gwe=Ywe||(e=>e());function Jwe(e){const t=j.useRef(()=>{});return Gwe(()=>{t.current=e}),j.useCallback(function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return t.current==null?void 0:t.current(...r)},[])}var Fy=typeof document<"u"?j.useLayoutEffect:j.useEffect;function ZN(){return ZN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ZN.apply(this,arguments)}let ST=!1,Kwe=0;const CT=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+Kwe++;function Xwe(){const[e,t]=j.useState(()=>ST?CT():void 0);return Fy(()=>{e==null&&t(CT())},[]),j.useEffect(()=>{ST=!0},[]),e}const Qwe=D$.useId,k$=Qwe||Xwe,Zwe=j.forwardRef(function(t,n){const{context:{placement:r,elements:{floating:a},middlewareData:{arrow:i,shift:o}},width:l=14,height:c=7,tipRadius:d=0,strokeWidth:u=0,staticOffset:h,stroke:f,d:p,style:{transform:y,...g}={},...x}=t,m=k$(),[v,b]=j.useState(!1);if(Fy(()=>{if(!a)return;Ii(a).direction==="rtl"&&b(!0)},[a]),!a)return null;const[C,S]=r.split("-"),P=C==="top"||C==="bottom";let D=h;(P&&o!=null&&o.x||!P&&o!=null&&o.y)&&(D=null);const N=u*2,M=N/2,L=l/2*(d/-8+1),T=c/2*d/4,E=!!p,A=D&&S==="end"?"bottom":"top";let O=D&&S==="end"?"right":"left";D&&v&&(O=S==="end"?"left":"right");const W=(i==null?void 0:i.x)!=null?D||i.x:"",z=(i==null?void 0:i.y)!=null?D||i.y:"",F=p||"M0,0"+(" H"+l)+(" L"+(l-L)+","+(c-T))+(" Q"+l/2+","+c+" "+L+","+(c-T))+" Z",V={top:E?"rotate(180deg)":"",left:E?"rotate(90deg)":"rotate(-90deg)",bottom:E?"":"rotate(180deg)",right:E?"rotate(-90deg)":"rotate(90deg)"}[C];return j.createElement("svg",ZN({},x,{"aria-hidden":!0,ref:n,width:E?l:l+N,height:l,viewBox:"0 0 "+l+" "+(c>l?c:l),style:{position:"absolute",pointerEvents:"none",[O]:W,[A]:z,[C]:P||E?"100%":"calc(100% - "+N/2+"px)",transform:[V,y].filter(B=>!!B).join(" "),...g}}),N>0&&j.createElement("path",{clipPath:"url(#"+m+")",fill:"none",stroke:f,strokeWidth:N+(p?0:1),d:F}),j.createElement("path",{stroke:N&&!p?x.fill:"none",d:F}),j.createElement("clipPath",{id:m},j.createElement("rect",{x:-M,y:M*(E?-1:1),width:l+N,height:l})))});function e2e(){const e=new Map;return{emit(t,n){var r;(r=e.get(t))==null||r.forEach(a=>a(n))},on(t,n){e.set(t,[...e.get(t)||[],n])},off(t,n){var r;e.set(t,((r=e.get(t))==null?void 0:r.filter(a=>a!==n))||[])}}}const t2e=j.createContext(null),n2e=j.createContext(null),r2e=()=>{var e;return((e=j.useContext(t2e))==null?void 0:e.id)||null},s2e=()=>j.useContext(n2e);function a2e(e){const{open:t=!1,onOpenChange:n,elements:r}=e,a=k$(),i=j.useRef({}),[o]=j.useState(()=>e2e()),l=r2e()!=null,[c,d]=j.useState(r.reference),u=Jwe((p,y,g)=>{i.current.openEvent=p?y:void 0,o.emit("openchange",{open:p,event:y,reason:g,nested:l}),n==null||n(p,y,g)}),h=j.useMemo(()=>({setPositionReference:d}),[]),f=j.useMemo(()=>({reference:c||r.reference||null,floating:r.floating||null,domReference:r.reference}),[c,r.reference,r.floating]);return j.useMemo(()=>({dataRef:i,open:t,onOpenChange:u,elements:f,events:o,floatingId:a,refs:h}),[t,u,f,o,a,h])}function i2e(e){e===void 0&&(e={});const{nodeId:t}=e,n=a2e({...e,elements:{reference:null,floating:null,...e.elements}}),r=e.rootContext||n,a=r.elements,[i,o]=j.useState(null),[l,c]=j.useState(null),u=(a==null?void 0:a.domReference)||i,h=j.useRef(null),f=s2e();Fy(()=>{u&&(h.current=u)},[u]);const p=rR({...e,elements:{...a,...l&&{reference:l}}}),y=j.useCallback(b=>{const C=ma(b)?{getBoundingClientRect:()=>b.getBoundingClientRect(),contextElement:b}:b;c(C),p.refs.setReference(C)},[p.refs]),g=j.useCallback(b=>{(ma(b)||b===null)&&(h.current=b,o(b)),(ma(p.refs.reference.current)||p.refs.reference.current===null||b!==null&&!ma(b))&&p.refs.setReference(b)},[p.refs]),x=j.useMemo(()=>({...p.refs,setReference:g,setPositionReference:y,domReference:h}),[p.refs,g,y]),m=j.useMemo(()=>({...p.elements,domReference:u}),[p.elements,u]),v=j.useMemo(()=>({...p,...r,refs:x,elements:m,nodeId:t}),[p,x,m,t,r]);return Fy(()=>{r.dataRef.current.floatingContext=v;const b=f==null?void 0:f.nodesRef.current.find(C=>C.id===t);b&&(b.context=v)}),j.useMemo(()=>({...p,context:v,refs:x,elements:m}),[p,x,m,v])}/*!
  react-datepicker v6.9.0
  https://github.com/Hacker0x01/react-datepicker
  Released under the MIT License.
*/function xs(e,t,n){return t=$y(t),c2e(e,E$()?Reflect.construct(t,n||[],$y(e).constructor):t.apply(e,n))}function E$(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(E$=function(){return!!e})()}function PT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Al(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?PT(Object(n),!0).forEach(function(r){he(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):PT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function o2e(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function T$(e){var t=o2e(e,"string");return typeof t=="symbol"?t:t+""}function e5(e){"@babel/helpers - typeof";return e5=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e5(e)}function ys(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function DT(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,T$(r.key),r)}}function bs(e,t,n){return t&&DT(e.prototype,t),n&&DT(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function he(e,t,n){return t=T$(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Og(){return Og=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Og.apply(this,arguments)}function ws(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&t5(e,t)}function $y(e){return $y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},$y(e)}function t5(e,t){return t5=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},t5(e,t)}function l2e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c2e(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return l2e(e)}function yd(e){return d2e(e)||u2e(e)||h2e(e)||f2e()}function d2e(e){if(Array.isArray(e))return n5(e)}function u2e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function h2e(e,t){if(e){if(typeof e=="string")return n5(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return n5(e,t)}}function n5(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function f2e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var vv=12,p2e=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g;function Dn(e){var t=e?typeof e=="string"||e instanceof String?fN(e):kt(e):new Date;return $c(t)?t:null}function m2e(e,t,n,r,a){var i=null,o=Wl(n)||Wl(Cu()),l=!0;return Array.isArray(t)?(t.forEach(function(c){var d=b0(e,c,new Date,{locale:o,useAdditionalWeekYearTokens:!0,useAdditionalDayOfYearTokens:!0});r&&(l=$c(d,a)&&e===Xn(d,c,n)),$c(d,a)&&l&&(i=d)}),i):(i=b0(e,t,new Date,{locale:o,useAdditionalWeekYearTokens:!0,useAdditionalDayOfYearTokens:!0}),r?l=$c(i)&&e===Xn(i,t,n):$c(i)||(t=t.match(p2e).map(function(c){var d=c[0];if(d==="p"||d==="P"){var u=Ny[d];return o?u(c,o.formatLong):d}return c}).join(""),e.length>0&&(i=b0(e,t.slice(0,e.length),new Date,{useAdditionalWeekYearTokens:!0,useAdditionalDayOfYearTokens:!0})),$c(i)||(i=new Date(e))),$c(i)&&l?i:null)}function $c(e,t){return t=t||new Date("1/1/1000"),xg(e)&&!Ql(e,t)}function Xn(e,t,n){if(n==="en")return Fi(e,t,{useAdditionalWeekYearTokens:!0,useAdditionalDayOfYearTokens:!0});var r=Wl(n);return n&&!r&&console.warn('A locale object was not found for the provided string ["'.concat(n,'"].')),!r&&Cu()&&Wl(Cu())&&(r=Wl(Cu())),Fi(e,t,{locale:r||null,useAdditionalWeekYearTokens:!0,useAdditionalDayOfYearTokens:!0})}function Ni(e,t){var n=t.dateFormat,r=t.locale;return e&&Xn(e,Array.isArray(n)?n[0]:n,r)||""}function g2e(e,t,n){if(!e)return"";var r=Ni(e,n),a=t?Ni(t,n):"";return"".concat(r," - ").concat(a)}function v2e(e,t){if(!(e!=null&&e.length))return"";var n=Ni(e[0],t);if(e.length===1)return n;if(e.length===2){var r=Ni(e[1],t);return"".concat(n,", ").concat(r)}var a=e.length-1;return"".concat(n," (+").concat(a,")")}function T2(e,t){var n=t.hour,r=n===void 0?0:n,a=t.minute,i=a===void 0?0:a,o=t.second,l=o===void 0?0:o;return w0(j0(N0(e,l),i),r)}function x2e(e,t){return t&&Wl(t)||Cu()&&Wl(Cu()),tC(e)}function y2e(e,t){return Xn(e,"ddd",t)}function b2e(e){return Yo(e)}function od(e,t,n){var r=Wl(t||Cu());return fo(e,{locale:r,weekStartsOn:n})}function ld(e){return RI(e)}function vm(e){return A1(e)}function kT(e){return dN(e)}function ET(){return Yo(Dn())}function w2e(e){return GX(e)}function _o(e,t){return e&&t?BZ(e,t):!e&&!t}function ni(e,t){return e&&t?FZ(e,t):!e&&!t}function By(e,t){return e&&t?$Z(e,t):!e&&!t}function yn(e,t){return e&&t?_f(e,t):!e&&!t}function hu(e,t){return e&&t?HQ(e,t):!e&&!t}function xm(e,t,n){var r,a=Yo(t),i=cN(n);try{r=Mf(e,{start:a,end:i})}catch{r=!1}return r}function Cu(){var e=typeof window<"u"?window:globalThis;return e.__localeId__}function Wl(e){if(typeof e=="string"){var t=typeof window<"u"?window:globalThis;return t.__localeData__?t.__localeData__[e]:null}else return e}function j2e(e,t,n){return t(Xn(e,"EEEE",n))}function N2e(e,t){return Xn(e,"EEEEEE",t)}function S2e(e,t){return Xn(e,"EEE",t)}function oP(e,t){return Xn(ha(Dn(),e),"LLLL",t)}function A$(e,t){return Xn(ha(Dn(),e),"LLL",t)}function C2e(e,t){return Xn(Hh(Dn(),e),"QQQ",t)}function Nb(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=t.minDate,r=t.maxDate,a=t.excludeDates,i=t.excludeDateIntervals,o=t.includeDates,l=t.includeDateIntervals,c=t.filterDate;return Sb(e,{minDate:n,maxDate:r})||a&&a.some(function(d){return yn(e,d.date?d.date:d)})||i&&i.some(function(d){var u=d.start,h=d.end;return Mf(e,{start:u,end:h})})||o&&!o.some(function(d){return yn(e,d)})||l&&!l.some(function(d){var u=d.start,h=d.end;return Mf(e,{start:u,end:h})})||c&&!c(Dn(e))||!1}function lP(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=t.excludeDates,r=t.excludeDateIntervals;return r&&r.length>0?r.some(function(a){var i=a.start,o=a.end;return Mf(e,{start:i,end:o})}):n&&n.some(function(a){return yn(e,a.date?a.date:a)})||!1}function T0(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=t.minDate,r=t.maxDate,a=t.excludeDates,i=t.includeDates,o=t.filterDate;return Sb(e,{minDate:RI(n),maxDate:YX(r)})||a&&a.some(function(l){return ni(e,l)})||i&&!i.some(function(l){return ni(e,l)})||o&&!o(Dn(e))||!1}function Kx(e,t,n,r){var a=an(e),i=ga(e),o=an(t),l=ga(t),c=an(r);if(a===o&&a===c)return i<=n&&n<=l;if(a<o)return c===a&&i<=n||c===o&&l>=n||c<o&&c>a}function A2(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=t.minDate,r=t.maxDate,a=t.excludeDates,i=t.includeDates,o=t.filterDate;return Sb(e,{minDate:n,maxDate:r})||a&&a.some(function(l){return By(e,l)})||i&&!i.some(function(l){return By(e,l)})||o&&!o(Dn(e))||!1}function Xx(e,t,n){if(!xg(t)||!xg(n))return!1;var r=an(t),a=an(n);return r<=e&&a>=e}function _$(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=t.minDate,r=t.maxDate,a=t.excludeDates,i=t.includeDates,o=t.filterDate,l=new Date(e,0,1);return Sb(l,{minDate:A1(n),maxDate:LI(r)})||a&&a.some(function(c){return _o(l,c)})||i&&!i.some(function(c){return _o(l,c)})||o&&!o(Dn(l))||!1}function Qx(e,t,n,r){var a=an(e),i=vu(e),o=an(t),l=vu(t),c=an(r);if(a===o&&a===c)return i<=n&&n<=l;if(a<o)return c===a&&i<=n||c===o&&l>=n||c<o&&c>a}function Sb(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=t.minDate,r=t.maxDate;return n&&vg(e,n)<0||r&&vg(e,r)>0}function TT(e,t){return t.some(function(n){return Go(n)===Go(e)&&Jo(n)===Jo(e)&&zl(n)===zl(e)})}function AT(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=t.excludeTimes,r=t.includeTimes,a=t.filterTime;return n&&TT(e,n)||r&&!TT(e,r)||a&&!a(e)||!1}function _T(e,t){var n=t.minTime,r=t.maxTime;if(!n||!r)throw new Error("Both minTime and maxTime props required");var a=Dn();a=w0(a,Go(e)),a=j0(a,Jo(e)),a=N0(a,zl(e));var i=Dn();i=w0(i,Go(n)),i=j0(i,Jo(n)),i=N0(i,zl(n));var o=Dn();o=w0(o,Go(r)),o=j0(o,Jo(r)),o=N0(o,zl(r));var l;try{l=!Mf(a,{start:i,end:o})}catch{l=!1}return l}function MT(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=t.minDate,r=t.includeDates,a=Rf(e,1);return n&&by(n,a)>0||r&&r.every(function(i){return by(i,a)>0})||!1}function RT(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=t.maxDate,r=t.includeDates,a=ho(e,1);return n&&by(a,n)>0||r&&r.every(function(i){return by(a,i)>0})||!1}function P2e(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=t.minDate,r=t.includeDates,a=A1(e),i=UI(a,1);return n&&wy(n,i)>0||r&&r.every(function(o){return wy(o,i)>0})||!1}function D2e(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=t.maxDate,r=t.includeDates,a=LI(e),i=ZS(a,1);return n&&wy(i,n)>0||r&&r.every(function(o){return wy(i,o)>0})||!1}function LT(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=t.minDate,r=t.includeDates,a=Lf(e,1);return n&&jy(n,a)>0||r&&r.every(function(i){return jy(i,a)>0})||!1}function k2e(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=t.minDate,r=t.yearItemNumber,a=r===void 0?vv:r,i=vm(Lf(e,a)),o=Gc(i,a),l=o.endPeriod,c=n&&an(n);return c&&c>l||!1}function IT(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=t.maxDate,r=t.includeDates,a=Bl(e,1);return n&&jy(a,n)>0||r&&r.every(function(i){return jy(a,i)>0})||!1}function E2e(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=t.maxDate,r=t.yearItemNumber,a=r===void 0?vv:r,i=Bl(e,a),o=Gc(i,a),l=o.startPeriod,c=n&&an(n);return c&&c<l||!1}function M$(e){var t=e.minDate,n=e.includeDates;if(n&&t){var r=n.filter(function(a){return vg(a,t)>=0});return Zk(r)}else return n?Zk(n):t}function R$(e){var t=e.maxDate,n=e.includeDates;if(n&&t){var r=n.filter(function(a){return vg(a,t)<=0});return Qk(r)}else return n?Qk(n):t}function OT(){for(var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"react-datepicker__day--highlighted",n=new Map,r=0,a=e.length;r<a;r++){var i=e[r];if(Lu(i)){var o=Xn(i,"MM.dd.yyyy"),l=n.get(o)||[];l.includes(t)||(l.push(t),n.set(o,l))}else if(e5(i)==="object"){var c=Object.keys(i),d=c[0],u=i[c[0]];if(typeof d=="string"&&u.constructor===Array)for(var h=0,f=u.length;h<f;h++){var p=Xn(u[h],"MM.dd.yyyy"),y=n.get(p)||[];y.includes(d)||(y.push(d),n.set(p,y))}}}return n}function T2e(e,t){return e.length!==t.length?!1:e.every(function(n,r){return n===t[r]})}function A2e(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"react-datepicker__day--holidays",n=new Map;return e.forEach(function(r){var a=r.date,i=r.holidayName;if(Lu(a)){var o=Xn(a,"MM.dd.yyyy"),l=n.get(o)||{};if(!("className"in l&&l.className===t&&T2e(l.holidayNames,[i]))){l.className=t;var c=l.holidayNames;l.holidayNames=c?[].concat(yd(c),[i]):[i],n.set(o,l)}}}),n}function _2e(e,t,n,r,a){for(var i=a.length,o=[],l=0;l<i;l++){var c=e;c=WX(c,Go(a[l])),c=lN(c,Jo(a[l])),c=VX(c,zl(a[l]));var d=lN(e,(n+1)*r);tl(c,t)&&Ql(c,d)&&o.push(a[l])}return o}function FT(e){return e<10?"0".concat(e):"".concat(e)}function Gc(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:vv,n=Math.ceil(an(e)/t)*t,r=n-(t-1);return{startPeriod:r,endPeriod:n}}function M2e(e){var t=new Date(e.getFullYear(),e.getMonth(),e.getDate()),n=new Date(e.getFullYear(),e.getMonth(),e.getDate(),24);return Math.round((+n-+t)/36e5)}function $T(e){var t=e.getSeconds(),n=e.getMilliseconds();return kt(e.getTime()-t*1e3-n)}function R2e(e,t){return $T(e).getTime()===$T(t).getTime()}function BT(e){if(!Lu(e))throw new Error("Invalid date");var t=new Date(e);return t.setHours(0,0,0,0),t}function zT(e,t){if(!Lu(e)||!Lu(t))throw new Error("Invalid date received");var n=BT(e),r=BT(t);return Ql(n,r)}function L$(e){var t=" ";return e.key===t}function L2e(e,t,n,r){for(var a=[],i=0;i<2*t+1;i++){var o=e+t-i,l=!0;n&&(l=an(n)<=o),r&&l&&(l=an(r)>=o),l&&a.push(o)}return a}var I2e=function(e){function t(n){var r;ys(this,t),r=xs(this,t,[n]),he(r,"renderOptions",function(){var l=r.props.year,c=r.state.yearsList.map(function(h){return Q.createElement("div",{className:l===h?"react-datepicker__year-option react-datepicker__year-option--selected_year":"react-datepicker__year-option",key:h,onClick:r.onChange.bind(r,h),"aria-selected":l===h?"true":void 0},l===h?Q.createElement("span",{className:"react-datepicker__year-option--selected"},"✓"):"",h)}),d=r.props.minDate?an(r.props.minDate):null,u=r.props.maxDate?an(r.props.maxDate):null;return(!u||!r.state.yearsList.find(function(h){return h===u}))&&c.unshift(Q.createElement("div",{className:"react-datepicker__year-option",key:"upcoming",onClick:r.incrementYears},Q.createElement("a",{className:"react-datepicker__navigation react-datepicker__navigation--years react-datepicker__navigation--years-upcoming"}))),(!d||!r.state.yearsList.find(function(h){return h===d}))&&c.push(Q.createElement("div",{className:"react-datepicker__year-option",key:"previous",onClick:r.decrementYears},Q.createElement("a",{className:"react-datepicker__navigation react-datepicker__navigation--years react-datepicker__navigation--years-previous"}))),c}),he(r,"onChange",function(l){r.props.onChange(l)}),he(r,"handleClickOutside",function(){r.props.onCancel()}),he(r,"shiftYears",function(l){var c=r.state.yearsList.map(function(d){return d+l});r.setState({yearsList:c})}),he(r,"incrementYears",function(){return r.shiftYears(1)}),he(r,"decrementYears",function(){return r.shiftYears(-1)});var a=n.yearDropdownItemNumber,i=n.scrollableYearDropdown,o=a||(i?10:5);return r.state={yearsList:L2e(r.props.year,o,r.props.minDate,r.props.maxDate)},r.dropdownRef=j.createRef(),r}return ws(t,e),bs(t,[{key:"componentDidMount",value:function(){var r=this.dropdownRef.current;if(r){var a=r.children?Array.from(r.children):null,i=a?a.find(function(o){return o.ariaSelected}):null;r.scrollTop=i?i.offsetTop+(i.clientHeight-r.clientHeight)/2:(r.scrollHeight-r.clientHeight)/2}}},{key:"render",value:function(){var r=rs({"react-datepicker__year-dropdown":!0,"react-datepicker__year-dropdown--scrollable":this.props.scrollableYearDropdown});return Q.createElement("div",{className:r,ref:this.dropdownRef},this.renderOptions())}}])}(Q.Component),O2e=jb(I2e),F2e=function(e){function t(){var n;ys(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return n=xs(this,t,[].concat(a)),he(n,"state",{dropdownVisible:!1}),he(n,"renderSelectOptions",function(){for(var o=n.props.minDate?an(n.props.minDate):1900,l=n.props.maxDate?an(n.props.maxDate):2100,c=[],d=o;d<=l;d++)c.push(Q.createElement("option",{key:d,value:d},d));return c}),he(n,"onSelectChange",function(o){n.onChange(o.target.value)}),he(n,"renderSelectMode",function(){return Q.createElement("select",{value:n.props.year,className:"react-datepicker__year-select",onChange:n.onSelectChange},n.renderSelectOptions())}),he(n,"renderReadView",function(o){return Q.createElement("div",{key:"read",style:{visibility:o?"visible":"hidden"},className:"react-datepicker__year-read-view",onClick:function(c){return n.toggleDropdown(c)}},Q.createElement("span",{className:"react-datepicker__year-read-view--down-arrow"}),Q.createElement("span",{className:"react-datepicker__year-read-view--selected-year"},n.props.year))}),he(n,"renderDropdown",function(){return Q.createElement(O2e,{key:"dropdown",year:n.props.year,onChange:n.onChange,onCancel:n.toggleDropdown,minDate:n.props.minDate,maxDate:n.props.maxDate,scrollableYearDropdown:n.props.scrollableYearDropdown,yearDropdownItemNumber:n.props.yearDropdownItemNumber})}),he(n,"renderScrollMode",function(){var o=n.state.dropdownVisible,l=[n.renderReadView(!o)];return o&&l.unshift(n.renderDropdown()),l}),he(n,"onChange",function(o){n.toggleDropdown(),o!==n.props.year&&n.props.onChange(o)}),he(n,"toggleDropdown",function(o){n.setState({dropdownVisible:!n.state.dropdownVisible},function(){n.props.adjustDateOnChange&&n.handleYearChange(n.props.date,o)})}),he(n,"handleYearChange",function(o,l){n.onSelect(o,l),n.setOpen()}),he(n,"onSelect",function(o,l){n.props.onSelect&&n.props.onSelect(o,l)}),he(n,"setOpen",function(){n.props.setOpen&&n.props.setOpen(!0)}),n}return ws(t,e),bs(t,[{key:"render",value:function(){var r;switch(this.props.dropdownMode){case"scroll":r=this.renderScrollMode();break;case"select":r=this.renderSelectMode();break}return Q.createElement("div",{className:"react-datepicker__year-dropdown-container react-datepicker__year-dropdown-container--".concat(this.props.dropdownMode)},r)}}])}(Q.Component),$2e=function(e){function t(){var n;ys(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return n=xs(this,t,[].concat(a)),he(n,"isSelectedMonth",function(o){return n.props.month===o}),he(n,"renderOptions",function(){return n.props.monthNames.map(function(o,l){return Q.createElement("div",{className:n.isSelectedMonth(l)?"react-datepicker__month-option react-datepicker__month-option--selected_month":"react-datepicker__month-option",key:o,onClick:n.onChange.bind(n,l),"aria-selected":n.isSelectedMonth(l)?"true":void 0},n.isSelectedMonth(l)?Q.createElement("span",{className:"react-datepicker__month-option--selected"},"✓"):"",o)})}),he(n,"onChange",function(o){return n.props.onChange(o)}),he(n,"handleClickOutside",function(){return n.props.onCancel()}),n}return ws(t,e),bs(t,[{key:"render",value:function(){return Q.createElement("div",{className:"react-datepicker__month-dropdown"},this.renderOptions())}}])}(Q.Component),B2e=jb($2e),z2e=function(e){function t(){var n;ys(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return n=xs(this,t,[].concat(a)),he(n,"state",{dropdownVisible:!1}),he(n,"renderSelectOptions",function(o){return o.map(function(l,c){return Q.createElement("option",{key:c,value:c},l)})}),he(n,"renderSelectMode",function(o){return Q.createElement("select",{value:n.props.month,className:"react-datepicker__month-select",onChange:function(c){return n.onChange(c.target.value)}},n.renderSelectOptions(o))}),he(n,"renderReadView",function(o,l){return Q.createElement("div",{key:"read",style:{visibility:o?"visible":"hidden"},className:"react-datepicker__month-read-view",onClick:n.toggleDropdown},Q.createElement("span",{className:"react-datepicker__month-read-view--down-arrow"}),Q.createElement("span",{className:"react-datepicker__month-read-view--selected-month"},l[n.props.month]))}),he(n,"renderDropdown",function(o){return Q.createElement(B2e,{key:"dropdown",month:n.props.month,monthNames:o,onChange:n.onChange,onCancel:n.toggleDropdown})}),he(n,"renderScrollMode",function(o){var l=n.state.dropdownVisible,c=[n.renderReadView(!l,o)];return l&&c.unshift(n.renderDropdown(o)),c}),he(n,"onChange",function(o){n.toggleDropdown(),o!==n.props.month&&n.props.onChange(o)}),he(n,"toggleDropdown",function(){return n.setState({dropdownVisible:!n.state.dropdownVisible})}),n}return ws(t,e),bs(t,[{key:"render",value:function(){var r=this,a=[0,1,2,3,4,5,6,7,8,9,10,11].map(this.props.useShortMonthInDropdown?function(o){return A$(o,r.props.locale)}:function(o){return oP(o,r.props.locale)}),i;switch(this.props.dropdownMode){case"scroll":i=this.renderScrollMode(a);break;case"select":i=this.renderSelectMode(a);break}return Q.createElement("div",{className:"react-datepicker__month-dropdown-container react-datepicker__month-dropdown-container--".concat(this.props.dropdownMode)},i)}}])}(Q.Component);function W2e(e,t){for(var n=[],r=ld(e),a=ld(t);!tl(r,a);)n.push(Dn(r)),r=ho(r,1);return n}var H2e=function(e){function t(n){var r;return ys(this,t),r=xs(this,t,[n]),he(r,"renderOptions",function(){return r.state.monthYearsList.map(function(a){var i=hN(a),o=_o(r.props.date,a)&&ni(r.props.date,a);return Q.createElement("div",{className:o?"react-datepicker__month-year-option--selected_month-year":"react-datepicker__month-year-option",key:i,onClick:r.onChange.bind(r,i),"aria-selected":o?"true":void 0},o?Q.createElement("span",{className:"react-datepicker__month-year-option--selected"},"✓"):"",Xn(a,r.props.dateFormat,r.props.locale))})}),he(r,"onChange",function(a){return r.props.onChange(a)}),he(r,"handleClickOutside",function(){r.props.onCancel()}),r.state={monthYearsList:W2e(r.props.minDate,r.props.maxDate)},r}return ws(t,e),bs(t,[{key:"render",value:function(){var r=rs({"react-datepicker__month-year-dropdown":!0,"react-datepicker__month-year-dropdown--scrollable":this.props.scrollableMonthYearDropdown});return Q.createElement("div",{className:r},this.renderOptions())}}])}(Q.Component),q2e=jb(H2e),V2e=function(e){function t(){var n;ys(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return n=xs(this,t,[].concat(a)),he(n,"state",{dropdownVisible:!1}),he(n,"renderSelectOptions",function(){for(var o=ld(n.props.minDate),l=ld(n.props.maxDate),c=[];!tl(o,l);){var d=hN(o);c.push(Q.createElement("option",{key:d,value:d},Xn(o,n.props.dateFormat,n.props.locale))),o=ho(o,1)}return c}),he(n,"onSelectChange",function(o){n.onChange(o.target.value)}),he(n,"renderSelectMode",function(){return Q.createElement("select",{value:hN(ld(n.props.date)),className:"react-datepicker__month-year-select",onChange:n.onSelectChange},n.renderSelectOptions())}),he(n,"renderReadView",function(o){var l=Xn(n.props.date,n.props.dateFormat,n.props.locale);return Q.createElement("div",{key:"read",style:{visibility:o?"visible":"hidden"},className:"react-datepicker__month-year-read-view",onClick:function(d){return n.toggleDropdown(d)}},Q.createElement("span",{className:"react-datepicker__month-year-read-view--down-arrow"}),Q.createElement("span",{className:"react-datepicker__month-year-read-view--selected-month-year"},l))}),he(n,"renderDropdown",function(){return Q.createElement(q2e,{key:"dropdown",date:n.props.date,dateFormat:n.props.dateFormat,onChange:n.onChange,onCancel:n.toggleDropdown,minDate:n.props.minDate,maxDate:n.props.maxDate,scrollableMonthYearDropdown:n.props.scrollableMonthYearDropdown,locale:n.props.locale})}),he(n,"renderScrollMode",function(){var o=n.state.dropdownVisible,l=[n.renderReadView(!o)];return o&&l.unshift(n.renderDropdown()),l}),he(n,"onChange",function(o){n.toggleDropdown();var l=Dn(parseInt(o));_o(n.props.date,l)&&ni(n.props.date,l)||n.props.onChange(l)}),he(n,"toggleDropdown",function(){return n.setState({dropdownVisible:!n.state.dropdownVisible})}),n}return ws(t,e),bs(t,[{key:"render",value:function(){var r;switch(this.props.dropdownMode){case"scroll":r=this.renderScrollMode();break;case"select":r=this.renderSelectMode();break}return Q.createElement("div",{className:"react-datepicker__month-year-dropdown-container react-datepicker__month-year-dropdown-container--".concat(this.props.dropdownMode)},r)}}])}(Q.Component),U2e=function(e){function t(){var n;ys(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return n=xs(this,t,[].concat(a)),he(n,"dayEl",Q.createRef()),he(n,"handleClick",function(o){!n.isDisabled()&&n.props.onClick&&n.props.onClick(o)}),he(n,"handleMouseEnter",function(o){!n.isDisabled()&&n.props.onMouseEnter&&n.props.onMouseEnter(o)}),he(n,"handleOnKeyDown",function(o){var l=o.key;l===" "&&(o.preventDefault(),o.key="Enter"),n.props.handleOnKeyDown(o)}),he(n,"isSameDay",function(o){return yn(n.props.day,o)}),he(n,"isKeyboardSelected",function(){var o;if(n.props.disabledKeyboardNavigation)return!1;var l=n.props.selectsMultiple?(o=n.props.selectedDates)===null||o===void 0?void 0:o.some(function(c){return n.isSameDayOrWeek(c)}):n.isSameDayOrWeek(n.props.selected);return!l&&n.isSameDayOrWeek(n.props.preSelection)}),he(n,"isDisabled",function(){return Nb(n.props.day,n.props)}),he(n,"isExcluded",function(){return lP(n.props.day,n.props)}),he(n,"isStartOfWeek",function(){return yn(n.props.day,od(n.props.day,n.props.locale,n.props.calendarStartDay))}),he(n,"isSameWeek",function(o){return n.props.showWeekPicker&&yn(o,od(n.props.day,n.props.locale,n.props.calendarStartDay))}),he(n,"isSameDayOrWeek",function(o){return n.isSameDay(o)||n.isSameWeek(o)}),he(n,"getHighLightedClass",function(){var o=n.props,l=o.day,c=o.highlightDates;if(!c)return!1;var d=Xn(l,"MM.dd.yyyy");return c.get(d)}),he(n,"getHolidaysClass",function(){var o=n.props,l=o.day,c=o.holidays;if(!c)return!1;var d=Xn(l,"MM.dd.yyyy");if(c.has(d))return[c.get(d).className]}),he(n,"isInRange",function(){var o=n.props,l=o.day,c=o.startDate,d=o.endDate;return!c||!d?!1:xm(l,c,d)}),he(n,"isInSelectingRange",function(){var o,l=n.props,c=l.day,d=l.selectsStart,u=l.selectsEnd,h=l.selectsRange,f=l.selectsDisabledDaysInRange,p=l.startDate,y=l.endDate,g=(o=n.props.selectingDate)!==null&&o!==void 0?o:n.props.preSelection;return!(d||u||h)||!g||!f&&n.isDisabled()?!1:d&&y&&(Ql(g,y)||hu(g,y))?xm(c,g,y):u&&p&&(tl(g,p)||hu(g,p))||h&&p&&!y&&(tl(g,p)||hu(g,p))?xm(c,p,g):!1}),he(n,"isSelectingRangeStart",function(){var o;if(!n.isInSelectingRange())return!1;var l=n.props,c=l.day,d=l.startDate,u=l.selectsStart,h=(o=n.props.selectingDate)!==null&&o!==void 0?o:n.props.preSelection;return u?yn(c,h):yn(c,d)}),he(n,"isSelectingRangeEnd",function(){var o;if(!n.isInSelectingRange())return!1;var l=n.props,c=l.day,d=l.endDate,u=l.selectsEnd,h=l.selectsRange,f=(o=n.props.selectingDate)!==null&&o!==void 0?o:n.props.preSelection;return u||h?yn(c,f):yn(c,d)}),he(n,"isRangeStart",function(){var o=n.props,l=o.day,c=o.startDate,d=o.endDate;return!c||!d?!1:yn(c,l)}),he(n,"isRangeEnd",function(){var o=n.props,l=o.day,c=o.startDate,d=o.endDate;return!c||!d?!1:yn(d,l)}),he(n,"isWeekend",function(){var o=BI(n.props.day);return o===0||o===6}),he(n,"isAfterMonth",function(){return n.props.month!==void 0&&(n.props.month+1)%12===ga(n.props.day)}),he(n,"isBeforeMonth",function(){return n.props.month!==void 0&&(ga(n.props.day)+1)%12===n.props.month}),he(n,"isCurrentDay",function(){return n.isSameDay(Dn())}),he(n,"isSelected",function(){if(n.props.selectsMultiple){var o;return(o=n.props.selectedDates)===null||o===void 0?void 0:o.some(function(l){return n.isSameDayOrWeek(l)})}return n.isSameDayOrWeek(n.props.selected)}),he(n,"getClassNames",function(o){var l=n.props.dayClassName?n.props.dayClassName(o):void 0;return rs("react-datepicker__day",l,"react-datepicker__day--"+y2e(n.props.day),{"react-datepicker__day--disabled":n.isDisabled(),"react-datepicker__day--excluded":n.isExcluded(),"react-datepicker__day--selected":n.isSelected(),"react-datepicker__day--keyboard-selected":n.isKeyboardSelected(),"react-datepicker__day--range-start":n.isRangeStart(),"react-datepicker__day--range-end":n.isRangeEnd(),"react-datepicker__day--in-range":n.isInRange(),"react-datepicker__day--in-selecting-range":n.isInSelectingRange(),"react-datepicker__day--selecting-range-start":n.isSelectingRangeStart(),"react-datepicker__day--selecting-range-end":n.isSelectingRangeEnd(),"react-datepicker__day--today":n.isCurrentDay(),"react-datepicker__day--weekend":n.isWeekend(),"react-datepicker__day--outside-month":n.isAfterMonth()||n.isBeforeMonth()},n.getHighLightedClass("react-datepicker__day--highlighted"),n.getHolidaysClass())}),he(n,"getAriaLabel",function(){var o=n.props,l=o.day,c=o.ariaLabelPrefixWhenEnabled,d=c===void 0?"Choose":c,u=o.ariaLabelPrefixWhenDisabled,h=u===void 0?"Not available":u,f=n.isDisabled()||n.isExcluded()?h:d;return"".concat(f," ").concat(Xn(l,"PPPP",n.props.locale))}),he(n,"getTitle",function(){var o=n.props,l=o.day,c=o.holidays,d=c===void 0?new Map:c,u=o.excludeDates,h=Xn(l,"MM.dd.yyyy"),f=[];return d.has(h)&&f.push.apply(f,yd(d.get(h).holidayNames)),n.isExcluded()&&f.push(u==null?void 0:u.filter(function(p){return yn(p.date?p.date:p,l)}).map(function(p){return p.message})),f.join(", ")}),he(n,"getTabIndex",function(o,l){var c=o||n.props.selected,d=l||n.props.preSelection,u=!(n.props.showWeekPicker&&(n.props.showWeekNumber||!n.isStartOfWeek()))&&(n.isKeyboardSelected()||n.isSameDay(c)&&yn(d,c))?0:-1;return u}),he(n,"handleFocusDay",function(){var o,l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},c=!1;n.getTabIndex()===0&&!l.isInputFocused&&n.isSameDay(n.props.preSelection)&&((!document.activeElement||document.activeElement===document.body)&&(c=!0),n.props.inline&&!n.props.shouldFocusDayInline&&(c=!1),n.props.containerRef&&n.props.containerRef.current&&n.props.containerRef.current.contains(document.activeElement)&&document.activeElement.classList.contains("react-datepicker__day")&&(c=!0),n.props.monthShowsDuplicateDaysEnd&&n.isAfterMonth()&&(c=!1),n.props.monthShowsDuplicateDaysStart&&n.isBeforeMonth()&&(c=!1)),c&&((o=n.dayEl.current)===null||o===void 0||o.focus({preventScroll:!0}))}),he(n,"renderDayContents",function(){return n.props.monthShowsDuplicateDaysEnd&&n.isAfterMonth()||n.props.monthShowsDuplicateDaysStart&&n.isBeforeMonth()?null:n.props.renderDayContents?n.props.renderDayContents(sE(n.props.day),n.props.day):sE(n.props.day)}),he(n,"render",function(){return Q.createElement("div",{ref:n.dayEl,className:n.getClassNames(n.props.day),onKeyDown:n.handleOnKeyDown,onClick:n.handleClick,onMouseEnter:n.props.usePointerEvent?void 0:n.handleMouseEnter,onPointerEnter:n.props.usePointerEvent?n.handleMouseEnter:void 0,tabIndex:n.getTabIndex(),"aria-label":n.getAriaLabel(),role:"option",title:n.getTitle(),"aria-disabled":n.isDisabled(),"aria-current":n.isCurrentDay()?"date":void 0,"aria-selected":n.isSelected()||n.isInRange()},n.renderDayContents(),n.getTitle()!==""&&Q.createElement("span",{className:"overlay"},n.getTitle()))}),n}return ws(t,e),bs(t,[{key:"componentDidMount",value:function(){this.handleFocusDay()}},{key:"componentDidUpdate",value:function(r){this.handleFocusDay(r)}}])}(Q.Component),Y2e=function(e){function t(){var n;ys(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return n=xs(this,t,[].concat(a)),he(n,"weekNumberEl",Q.createRef()),he(n,"handleClick",function(o){n.props.onClick&&n.props.onClick(o)}),he(n,"handleOnKeyDown",function(o){var l=o.key;l===" "&&(o.preventDefault(),o.key="Enter"),n.props.handleOnKeyDown(o)}),he(n,"isKeyboardSelected",function(){return!n.props.disabledKeyboardNavigation&&!yn(n.props.date,n.props.selected)&&yn(n.props.date,n.props.preSelection)}),he(n,"getTabIndex",function(){return n.props.showWeekPicker&&n.props.showWeekNumber&&(n.isKeyboardSelected()||yn(n.props.date,n.props.selected)&&yn(n.props.preSelection,n.props.selected))?0:-1}),he(n,"handleFocusWeekNumber",function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},l=!1;n.getTabIndex()===0&&!o.isInputFocused&&yn(n.props.date,n.props.preSelection)&&((!document.activeElement||document.activeElement===document.body)&&(l=!0),n.props.inline&&!n.props.shouldFocusDayInline&&(l=!1),n.props.containerRef&&n.props.containerRef.current&&n.props.containerRef.current.contains(document.activeElement)&&document.activeElement&&document.activeElement.classList.contains("react-datepicker__week-number")&&(l=!0)),l&&n.weekNumberEl.current&&n.weekNumberEl.current.focus({preventScroll:!0})}),n}return ws(t,e),bs(t,[{key:"componentDidMount",value:function(){this.handleFocusWeekNumber()}},{key:"componentDidUpdate",value:function(r){this.handleFocusWeekNumber(r)}},{key:"render",value:function(){var r=this.props,a=r.weekNumber,i=r.ariaLabelPrefix,o=i===void 0?"week ":i,l=r.onClick,c={"react-datepicker__week-number":!0,"react-datepicker__week-number--clickable":!!l,"react-datepicker__week-number--selected":!!l&&yn(this.props.date,this.props.selected),"react-datepicker__week-number--keyboard-selected":this.isKeyboardSelected()};return Q.createElement("div",{ref:this.weekNumberEl,className:rs(c),"aria-label":"".concat(o," ").concat(this.props.weekNumber),onClick:this.handleClick,onKeyDown:this.handleOnKeyDown,tabIndex:this.getTabIndex()},a)}}],[{key:"defaultProps",get:function(){return{ariaLabelPrefix:"week "}}}])}(Q.Component),G2e=function(e){function t(){var n;ys(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return n=xs(this,t,[].concat(a)),he(n,"handleDayClick",function(o,l){n.props.onDayClick&&n.props.onDayClick(o,l)}),he(n,"handleDayMouseEnter",function(o){n.props.onDayMouseEnter&&n.props.onDayMouseEnter(o)}),he(n,"handleWeekClick",function(o,l,c){typeof n.props.onWeekSelect=="function"&&n.props.onWeekSelect(o,l,c),n.props.showWeekPicker&&n.handleDayClick(o,c),n.props.shouldCloseOnSelect&&n.props.setOpen(!1)}),he(n,"formatWeekNumber",function(o){return n.props.formatWeekNumber?n.props.formatWeekNumber(o):x2e(o)}),he(n,"renderDays",function(){var o=n.startOfWeek(),l=[],c=n.formatWeekNumber(o);if(n.props.showWeekNumber){var d=n.props.onWeekSelect||n.props.showWeekPicker?n.handleWeekClick.bind(n,o,c):void 0;l.push(Q.createElement(Y2e,{key:"W",weekNumber:c,date:o,onClick:d,selected:n.props.selected,preSelection:n.props.preSelection,ariaLabelPrefix:n.props.ariaLabelPrefix,showWeekPicker:n.props.showWeekPicker,showWeekNumber:n.props.showWeekNumber,disabledKeyboardNavigation:n.props.disabledKeyboardNavigation,handleOnKeyDown:n.props.handleOnKeyDown,isInputFocused:n.props.isInputFocused,containerRef:n.props.containerRef}))}return l.concat([0,1,2,3,4,5,6].map(function(u){var h=$a(o,u);return Q.createElement(U2e,{ariaLabelPrefixWhenEnabled:n.props.chooseDayAriaLabelPrefix,ariaLabelPrefixWhenDisabled:n.props.disabledDayAriaLabelPrefix,key:h.valueOf(),day:h,month:n.props.month,onClick:n.handleDayClick.bind(n,h),usePointerEvent:n.props.usePointerEvent,onMouseEnter:n.handleDayMouseEnter.bind(n,h),minDate:n.props.minDate,maxDate:n.props.maxDate,calendarStartDay:n.props.calendarStartDay,excludeDates:n.props.excludeDates,excludeDateIntervals:n.props.excludeDateIntervals,includeDates:n.props.includeDates,includeDateIntervals:n.props.includeDateIntervals,highlightDates:n.props.highlightDates,holidays:n.props.holidays,selectingDate:n.props.selectingDate,filterDate:n.props.filterDate,preSelection:n.props.preSelection,selected:n.props.selected,selectsStart:n.props.selectsStart,selectsEnd:n.props.selectsEnd,selectsRange:n.props.selectsRange,showWeekPicker:n.props.showWeekPicker,showWeekNumber:n.props.showWeekNumber,selectsDisabledDaysInRange:n.props.selectsDisabledDaysInRange,selectsMultiple:n.props.selectsMultiple,selectedDates:n.props.selectedDates,startDate:n.props.startDate,endDate:n.props.endDate,dayClassName:n.props.dayClassName,renderDayContents:n.props.renderDayContents,disabledKeyboardNavigation:n.props.disabledKeyboardNavigation,handleOnKeyDown:n.props.handleOnKeyDown,isInputFocused:n.props.isInputFocused,containerRef:n.props.containerRef,inline:n.props.inline,shouldFocusDayInline:n.props.shouldFocusDayInline,monthShowsDuplicateDaysEnd:n.props.monthShowsDuplicateDaysEnd,monthShowsDuplicateDaysStart:n.props.monthShowsDuplicateDaysStart,locale:n.props.locale})}))}),he(n,"startOfWeek",function(){return od(n.props.day,n.props.locale,n.props.calendarStartDay)}),he(n,"isKeyboardSelected",function(){return!n.props.disabledKeyboardNavigation&&!yn(n.startOfWeek(),n.props.selected)&&yn(n.startOfWeek(),n.props.preSelection)}),n}return ws(t,e),bs(t,[{key:"render",value:function(){var r={"react-datepicker__week":!0,"react-datepicker__week--selected":yn(this.startOfWeek(),this.props.selected),"react-datepicker__week--keyboard-selected":this.isKeyboardSelected()};return Q.createElement("div",{className:rs(r)},this.renderDays())}}],[{key:"defaultProps",get:function(){return{shouldCloseOnSelect:!0}}}])}(Q.Component),J2e=6,yf={TWO_COLUMNS:"two_columns",THREE_COLUMNS:"three_columns",FOUR_COLUMNS:"four_columns"},_2=he(he(he({},yf.TWO_COLUMNS,{grid:[[0,1],[2,3],[4,5],[6,7],[8,9],[10,11]],verticalNavigationOffset:2}),yf.THREE_COLUMNS,{grid:[[0,1,2],[3,4,5],[6,7,8],[9,10,11]],verticalNavigationOffset:3}),yf.FOUR_COLUMNS,{grid:[[0,1,2,3],[4,5,6,7],[8,9,10,11]],verticalNavigationOffset:4}),Zx=1;function WT(e,t){return e?yf.FOUR_COLUMNS:t?yf.TWO_COLUMNS:yf.THREE_COLUMNS}var K2e=function(e){function t(){var n;ys(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return n=xs(this,t,[].concat(a)),he(n,"MONTH_REFS",yd(Array(12)).map(function(){return Q.createRef()})),he(n,"QUARTER_REFS",yd(Array(4)).map(function(){return Q.createRef()})),he(n,"isDisabled",function(o){return Nb(o,n.props)}),he(n,"isExcluded",function(o){return lP(o,n.props)}),he(n,"handleDayClick",function(o,l){n.props.onDayClick&&n.props.onDayClick(o,l,n.props.orderInDisplay)}),he(n,"handleDayMouseEnter",function(o){n.props.onDayMouseEnter&&n.props.onDayMouseEnter(o)}),he(n,"handleMouseLeave",function(){n.props.onMouseLeave&&n.props.onMouseLeave()}),he(n,"isRangeStartMonth",function(o){var l=n.props,c=l.day,d=l.startDate,u=l.endDate;return!d||!u?!1:ni(ha(c,o),d)}),he(n,"isRangeStartQuarter",function(o){var l=n.props,c=l.day,d=l.startDate,u=l.endDate;return!d||!u?!1:By(Hh(c,o),d)}),he(n,"isRangeEndMonth",function(o){var l=n.props,c=l.day,d=l.startDate,u=l.endDate;return!d||!u?!1:ni(ha(c,o),u)}),he(n,"isRangeEndQuarter",function(o){var l=n.props,c=l.day,d=l.startDate,u=l.endDate;return!d||!u?!1:By(Hh(c,o),u)}),he(n,"isInSelectingRangeMonth",function(o){var l,c=n.props,d=c.day,u=c.selectsStart,h=c.selectsEnd,f=c.selectsRange,p=c.startDate,y=c.endDate,g=(l=n.props.selectingDate)!==null&&l!==void 0?l:n.props.preSelection;return!(u||h||f)||!g?!1:u&&y?Kx(g,y,o,d):h&&p||f&&p&&!y?Kx(p,g,o,d):!1}),he(n,"isSelectingMonthRangeStart",function(o){var l;if(!n.isInSelectingRangeMonth(o))return!1;var c=n.props,d=c.day,u=c.startDate,h=c.selectsStart,f=ha(d,o),p=(l=n.props.selectingDate)!==null&&l!==void 0?l:n.props.preSelection;return h?ni(f,p):ni(f,u)}),he(n,"isSelectingMonthRangeEnd",function(o){var l;if(!n.isInSelectingRangeMonth(o))return!1;var c=n.props,d=c.day,u=c.endDate,h=c.selectsEnd,f=c.selectsRange,p=ha(d,o),y=(l=n.props.selectingDate)!==null&&l!==void 0?l:n.props.preSelection;return h||f?ni(p,y):ni(p,u)}),he(n,"isInSelectingRangeQuarter",function(o){var l,c=n.props,d=c.day,u=c.selectsStart,h=c.selectsEnd,f=c.selectsRange,p=c.startDate,y=c.endDate,g=(l=n.props.selectingDate)!==null&&l!==void 0?l:n.props.preSelection;return!(u||h||f)||!g?!1:u&&y?Qx(g,y,o,d):h&&p||f&&p&&!y?Qx(p,g,o,d):!1}),he(n,"isWeekInMonth",function(o){var l=n.props.day,c=$a(o,6);return ni(o,l)||ni(c,l)}),he(n,"isCurrentMonth",function(o,l){return an(o)===an(Dn())&&l===ga(Dn())}),he(n,"isCurrentQuarter",function(o,l){return an(o)===an(Dn())&&l===vu(Dn())}),he(n,"isSelectedMonth",function(o,l,c){return ga(c)===l&&an(o)===an(c)}),he(n,"isSelectedQuarter",function(o,l,c){return vu(o)===l&&an(o)===an(c)}),he(n,"renderWeeks",function(){for(var o=[],l=n.props.fixedHeight,c=0,d=!1,u=od(ld(n.props.day),n.props.locale,n.props.calendarStartDay),h=n.props.showWeekPicker?od(n.props.selected,n.props.locale,n.props.calendarStartDay):n.props.selected,f=n.props.showWeekPicker?od(n.props.preSelection,n.props.locale,n.props.calendarStartDay):n.props.preSelection;o.push(Q.createElement(G2e,{ariaLabelPrefix:n.props.weekAriaLabelPrefix,chooseDayAriaLabelPrefix:n.props.chooseDayAriaLabelPrefix,disabledDayAriaLabelPrefix:n.props.disabledDayAriaLabelPrefix,key:c,day:u,month:ga(n.props.day),onDayClick:n.handleDayClick,usePointerEvent:n.props.usePointerEvent,onDayMouseEnter:n.handleDayMouseEnter,onWeekSelect:n.props.onWeekSelect,formatWeekNumber:n.props.formatWeekNumber,locale:n.props.locale,minDate:n.props.minDate,maxDate:n.props.maxDate,excludeDates:n.props.excludeDates,excludeDateIntervals:n.props.excludeDateIntervals,includeDates:n.props.includeDates,includeDateIntervals:n.props.includeDateIntervals,inline:n.props.inline,shouldFocusDayInline:n.props.shouldFocusDayInline,highlightDates:n.props.highlightDates,holidays:n.props.holidays,selectingDate:n.props.selectingDate,filterDate:n.props.filterDate,preSelection:f,selected:h,selectsStart:n.props.selectsStart,selectsEnd:n.props.selectsEnd,selectsRange:n.props.selectsRange,selectsDisabledDaysInRange:n.props.selectsDisabledDaysInRange,selectsMultiple:n.props.selectsMultiple,selectedDates:n.props.selectedDates,showWeekNumber:n.props.showWeekNumbers,showWeekPicker:n.props.showWeekPicker,startDate:n.props.startDate,endDate:n.props.endDate,dayClassName:n.props.dayClassName,setOpen:n.props.setOpen,shouldCloseOnSelect:n.props.shouldCloseOnSelect,disabledKeyboardNavigation:n.props.disabledKeyboardNavigation,renderDayContents:n.props.renderDayContents,handleOnKeyDown:n.props.handleOnKeyDown,isInputFocused:n.props.isInputFocused,containerRef:n.props.containerRef,calendarStartDay:n.props.calendarStartDay,monthShowsDuplicateDaysEnd:n.props.monthShowsDuplicateDaysEnd,monthShowsDuplicateDaysStart:n.props.monthShowsDuplicateDaysStart})),!d;){c++,u=yy(u,1);var p=l&&c>=J2e,y=!l&&!n.isWeekInMonth(u);if(p||y)if(n.props.peekNextMonth)d=!0;else break}return o}),he(n,"onMonthClick",function(o,l){var c=ha(n.props.day,l);T0(c,n.props)||n.handleDayClick(ld(c),o)}),he(n,"onMonthMouseEnter",function(o){var l=ha(n.props.day,o);T0(l,n.props)||n.handleDayMouseEnter(ld(l))}),he(n,"handleMonthNavigation",function(o,l){n.isDisabled(l)||n.isExcluded(l)||(n.props.setPreSelection(l),n.MONTH_REFS[o].current&&n.MONTH_REFS[o].current.focus())}),he(n,"onMonthKeyDown",function(o,l){var c=n.props,d=c.selected,u=c.preSelection,h=c.disabledKeyboardNavigation,f=c.showTwoColumnMonthYearPicker,p=c.showFourColumnMonthYearPicker,y=c.setPreSelection,g=c.handleOnMonthKeyDown,x=o.key;if(x!=="Tab"&&o.preventDefault(),!h){var m=WT(p,f),v=_2[m].verticalNavigationOffset,b=_2[m].grid;switch(x){case"Enter":n.onMonthClick(o,l),y(d);break;case"ArrowRight":n.handleMonthNavigation(l===11?0:l+Zx,ho(u,Zx));break;case"ArrowLeft":n.handleMonthNavigation(l===0?11:l-Zx,Rf(u,Zx));break;case"ArrowUp":n.handleMonthNavigation(b[0].includes(l)?l+12-v:l-v,Rf(u,v));break;case"ArrowDown":n.handleMonthNavigation(b[b.length-1].includes(l)?l-12+v:l+v,ho(u,v));break}}g&&g(o)}),he(n,"onQuarterClick",function(o,l){var c=Hh(n.props.day,l);A2(c,n.props)||n.handleDayClick(kT(c),o)}),he(n,"onQuarterMouseEnter",function(o){var l=Hh(n.props.day,o);A2(l,n.props)||n.handleDayMouseEnter(kT(l))}),he(n,"handleQuarterNavigation",function(o,l){n.isDisabled(l)||n.isExcluded(l)||(n.props.setPreSelection(l),n.QUARTER_REFS[o-1].current&&n.QUARTER_REFS[o-1].current.focus())}),he(n,"onQuarterKeyDown",function(o,l){var c=o.key;if(!n.props.disabledKeyboardNavigation)switch(c){case"Enter":n.onQuarterClick(o,l),n.props.setPreSelection(n.props.selected);break;case"ArrowRight":n.handleQuarterNavigation(l===4?1:l+1,ZS(n.props.preSelection,1));break;case"ArrowLeft":n.handleQuarterNavigation(l===1?4:l-1,UI(n.props.preSelection,1));break}}),he(n,"isMonthDisabled",function(o){var l=n.props,c=l.day,d=l.minDate,u=l.maxDate,h=l.excludeDates,f=l.includeDates,p=ha(c,o);return(d||u||h||f)&&T0(p,n.props)}),he(n,"getMonthClassNames",function(o){var l=n.props,c=l.day,d=l.startDate,u=l.endDate,h=l.selected,f=l.preSelection,p=l.monthClassName,y=p?p(ha(c,o)):void 0;return rs("react-datepicker__month-text","react-datepicker__month-".concat(o),y,{"react-datepicker__month-text--disabled":n.isMonthDisabled(o),"react-datepicker__month-text--selected":n.isSelectedMonth(c,o,h),"react-datepicker__month-text--keyboard-selected":!n.props.disabledKeyboardNavigation&&n.isSelectedMonth(c,o,f),"react-datepicker__month-text--in-selecting-range":n.isInSelectingRangeMonth(o),"react-datepicker__month-text--in-range":Kx(d,u,o,c),"react-datepicker__month-text--range-start":n.isRangeStartMonth(o),"react-datepicker__month-text--range-end":n.isRangeEndMonth(o),"react-datepicker__month-text--selecting-range-start":n.isSelectingMonthRangeStart(o),"react-datepicker__month-text--selecting-range-end":n.isSelectingMonthRangeEnd(o),"react-datepicker__month-text--today":n.isCurrentMonth(c,o)})}),he(n,"getTabIndex",function(o){var l=ga(n.props.preSelection),c=!n.props.disabledKeyboardNavigation&&o===l?"0":"-1";return c}),he(n,"getQuarterTabIndex",function(o){var l=vu(n.props.preSelection),c=!n.props.disabledKeyboardNavigation&&o===l?"0":"-1";return c}),he(n,"getAriaLabel",function(o){var l=n.props,c=l.chooseDayAriaLabelPrefix,d=c===void 0?"Choose":c,u=l.disabledDayAriaLabelPrefix,h=u===void 0?"Not available":u,f=l.day,p=l.locale,y=ha(f,o),g=n.isDisabled(y)||n.isExcluded(y)?h:d;return"".concat(g," ").concat(Xn(y,"MMMM yyyy",p))}),he(n,"getQuarterClassNames",function(o){var l=n.props,c=l.day,d=l.startDate,u=l.endDate,h=l.selected,f=l.minDate,p=l.maxDate,y=l.preSelection,g=l.disabledKeyboardNavigation;return rs("react-datepicker__quarter-text","react-datepicker__quarter-".concat(o),{"react-datepicker__quarter-text--disabled":(f||p)&&A2(Hh(c,o),n.props),"react-datepicker__quarter-text--selected":n.isSelectedQuarter(c,o,h),"react-datepicker__quarter-text--keyboard-selected":!g&&n.isSelectedQuarter(c,o,y),"react-datepicker__quarter-text--in-selecting-range":n.isInSelectingRangeQuarter(o),"react-datepicker__quarter-text--in-range":Qx(d,u,o,c),"react-datepicker__quarter-text--range-start":n.isRangeStartQuarter(o),"react-datepicker__quarter-text--range-end":n.isRangeEndQuarter(o)})}),he(n,"getMonthContent",function(o){var l=n.props,c=l.showFullMonthYearPicker,d=l.renderMonthContent,u=l.locale,h=l.day,f=A$(o,u),p=oP(o,u);return d?d(o,f,p,h):c?p:f}),he(n,"getQuarterContent",function(o){var l=n.props,c=l.renderQuarterContent,d=l.locale,u=C2e(o,d);return c?c(o,u):u}),he(n,"renderMonths",function(){var o=n.props,l=o.showTwoColumnMonthYearPicker,c=o.showFourColumnMonthYearPicker,d=o.day,u=o.selected,h=_2[WT(c,l)].grid;return h.map(function(f,p){return Q.createElement("div",{className:"react-datepicker__month-wrapper",key:p},f.map(function(y,g){return Q.createElement("div",{ref:n.MONTH_REFS[y],key:g,onClick:function(m){n.onMonthClick(m,y)},onKeyDown:function(m){L$(m)&&(m.preventDefault(),m.key="Enter"),n.onMonthKeyDown(m,y)},onMouseEnter:n.props.usePointerEvent?void 0:function(){return n.onMonthMouseEnter(y)},onPointerEnter:n.props.usePointerEvent?function(){return n.onMonthMouseEnter(y)}:void 0,tabIndex:n.getTabIndex(y),className:n.getMonthClassNames(y),"aria-disabled":n.isMonthDisabled(y),role:"option","aria-label":n.getAriaLabel(y),"aria-current":n.isCurrentMonth(d,y)?"date":void 0,"aria-selected":n.isSelectedMonth(d,y,u)},n.getMonthContent(y))}))})}),he(n,"renderQuarters",function(){var o=n.props,l=o.day,c=o.selected,d=[1,2,3,4];return Q.createElement("div",{className:"react-datepicker__quarter-wrapper"},d.map(function(u,h){return Q.createElement("div",{key:h,ref:n.QUARTER_REFS[h],role:"option",onClick:function(p){n.onQuarterClick(p,u)},onKeyDown:function(p){n.onQuarterKeyDown(p,u)},onMouseEnter:n.props.usePointerEvent?void 0:function(){return n.onQuarterMouseEnter(u)},onPointerEnter:n.props.usePointerEvent?function(){return n.onQuarterMouseEnter(u)}:void 0,className:n.getQuarterClassNames(u),"aria-selected":n.isSelectedQuarter(l,u,c),tabIndex:n.getQuarterTabIndex(u),"aria-current":n.isCurrentQuarter(l,u)?"date":void 0},n.getQuarterContent(u))}))}),he(n,"getClassNames",function(){var o=n.props,l=o.selectingDate,c=o.selectsStart,d=o.selectsEnd,u=o.showMonthYearPicker,h=o.showQuarterYearPicker,f=o.showWeekPicker;return rs("react-datepicker__month",{"react-datepicker__month--selecting-range":l&&(c||d)},{"react-datepicker__monthPicker":u},{"react-datepicker__quarterPicker":h},{"react-datepicker__weekPicker":f})}),n}return ws(t,e),bs(t,[{key:"render",value:function(){var r=this.props,a=r.showMonthYearPicker,i=r.showQuarterYearPicker,o=r.day,l=r.ariaLabelPrefix,c=l===void 0?"Month ":l,d=c?c.trim()+" ":"";return Q.createElement("div",{className:this.getClassNames(),onMouseLeave:this.props.usePointerEvent?void 0:this.handleMouseLeave,onPointerLeave:this.props.usePointerEvent?this.handleMouseLeave:void 0,"aria-label":"".concat(d).concat(Xn(o,"MMMM, yyyy",this.props.locale)),role:"listbox"},a?this.renderMonths():i?this.renderQuarters():this.renderWeeks())}}])}(Q.Component),I$=function(e){function t(){var n;ys(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return n=xs(this,t,[].concat(a)),he(n,"state",{height:null}),he(n,"scrollToTheSelectedTime",function(){requestAnimationFrame(function(){n.list&&(n.list.scrollTop=n.centerLi&&t.calcCenterPosition(n.props.monthRef?n.props.monthRef.clientHeight-n.header.clientHeight:n.list.clientHeight,n.centerLi))})}),he(n,"handleClick",function(o){(n.props.minTime||n.props.maxTime)&&_T(o,n.props)||(n.props.excludeTimes||n.props.includeTimes||n.props.filterTime)&&AT(o,n.props)||n.props.onChange(o)}),he(n,"isSelectedTime",function(o){return n.props.selected&&R2e(n.props.selected,o)}),he(n,"isDisabledTime",function(o){return(n.props.minTime||n.props.maxTime)&&_T(o,n.props)||(n.props.excludeTimes||n.props.includeTimes||n.props.filterTime)&&AT(o,n.props)}),he(n,"liClasses",function(o){var l=["react-datepicker__time-list-item",n.props.timeClassName?n.props.timeClassName(o):void 0];return n.isSelectedTime(o)&&l.push("react-datepicker__time-list-item--selected"),n.isDisabledTime(o)&&l.push("react-datepicker__time-list-item--disabled"),n.props.injectTimes&&(Go(o)*3600+Jo(o)*60+zl(o))%(n.props.intervals*60)!==0&&l.push("react-datepicker__time-list-item--injected"),l.join(" ")}),he(n,"handleOnKeyDown",function(o,l){o.key===" "&&(o.preventDefault(),o.key="Enter"),(o.key==="ArrowUp"||o.key==="ArrowLeft")&&o.target.previousSibling&&(o.preventDefault(),o.target.previousSibling.focus()),(o.key==="ArrowDown"||o.key==="ArrowRight")&&o.target.nextSibling&&(o.preventDefault(),o.target.nextSibling.focus()),o.key==="Enter"&&n.handleClick(l),n.props.handleOnKeyDown(o)}),he(n,"renderTimes",function(){for(var o=[],l=n.props.format?n.props.format:"p",c=n.props.intervals,d=n.props.selected||n.props.openToDate||Dn(),u=b2e(d),h=n.props.injectTimes&&n.props.injectTimes.sort(function(v,b){return v-b}),f=60*M2e(d),p=f/c,y=0;y<p;y++){var g=lN(u,y*c);if(o.push(g),h){var x=_2e(u,g,y,c,h);o=o.concat(x)}}var m=o.reduce(function(v,b){return b.getTime()<=d.getTime()?b:v},o[0]);return o.map(function(v,b){return Q.createElement("li",{key:b,onClick:n.handleClick.bind(n,v),className:n.liClasses(v),ref:function(S){v===m&&(n.centerLi=S)},onKeyDown:function(S){n.handleOnKeyDown(S,v)},tabIndex:v===m?0:-1,role:"option","aria-selected":n.isSelectedTime(v)?"true":void 0,"aria-disabled":n.isDisabledTime(v)?"true":void 0},Xn(v,l,n.props.locale))})}),n}return ws(t,e),bs(t,[{key:"componentDidMount",value:function(){this.scrollToTheSelectedTime(),this.props.monthRef&&this.header&&this.setState({height:this.props.monthRef.clientHeight-this.header.clientHeight})}},{key:"render",value:function(){var r=this,a=this.state.height;return Q.createElement("div",{className:"react-datepicker__time-container ".concat(this.props.todayButton?"react-datepicker__time-container--with-today-button":"")},Q.createElement("div",{className:"react-datepicker__header react-datepicker__header--time ".concat(this.props.showTimeSelectOnly?"react-datepicker__header--time--only":""),ref:function(o){r.header=o}},Q.createElement("div",{className:"react-datepicker-time__header"},this.props.timeCaption)),Q.createElement("div",{className:"react-datepicker__time"},Q.createElement("div",{className:"react-datepicker__time-box"},Q.createElement("ul",{className:"react-datepicker__time-list",ref:function(o){r.list=o},style:a?{height:a}:{},role:"listbox","aria-label":this.props.timeCaption},this.renderTimes()))))}}],[{key:"defaultProps",get:function(){return{intervals:30,onTimeChange:function(){},todayButton:null,timeCaption:"Time"}}}])}(Q.Component);he(I$,"calcCenterPosition",function(e,t){return t.offsetTop-(e/2-t.clientHeight/2)});var HT=3,X2e=function(e){function t(n){var r;return ys(this,t),r=xs(this,t,[n]),he(r,"YEAR_REFS",yd(Array(r.props.yearItemNumber)).map(function(){return Q.createRef()})),he(r,"isDisabled",function(a){return Nb(a,r.props)}),he(r,"isExcluded",function(a){return lP(a,r.props)}),he(r,"selectingDate",function(){var a;return(a=r.props.selectingDate)!==null&&a!==void 0?a:r.props.preSelection}),he(r,"updateFocusOnPaginate",function(a){var i=(function(){this.YEAR_REFS[a].current.focus()}).bind(r);window.requestAnimationFrame(i)}),he(r,"handleYearClick",function(a,i){r.props.onDayClick&&r.props.onDayClick(a,i)}),he(r,"handleYearNavigation",function(a,i){var o=r.props,l=o.date,c=o.yearItemNumber,d=Gc(l,c),u=d.startPeriod;r.isDisabled(i)||r.isExcluded(i)||(r.props.setPreSelection(i),a-u<0?r.updateFocusOnPaginate(c-(u-a)):a-u>=c?r.updateFocusOnPaginate(Math.abs(c-(a-u))):r.YEAR_REFS[a-u].current.focus())}),he(r,"isSameDay",function(a,i){return yn(a,i)}),he(r,"isCurrentYear",function(a){return a===an(Dn())}),he(r,"isRangeStart",function(a){return r.props.startDate&&r.props.endDate&&_o(Ao(Dn(),a),r.props.startDate)}),he(r,"isRangeEnd",function(a){return r.props.startDate&&r.props.endDate&&_o(Ao(Dn(),a),r.props.endDate)}),he(r,"isInRange",function(a){return Xx(a,r.props.startDate,r.props.endDate)}),he(r,"isInSelectingRange",function(a){var i=r.props,o=i.selectsStart,l=i.selectsEnd,c=i.selectsRange,d=i.startDate,u=i.endDate;return!(o||l||c)||!r.selectingDate()?!1:o&&u?Xx(a,r.selectingDate(),u):l&&d||c&&d&&!u?Xx(a,d,r.selectingDate()):!1}),he(r,"isSelectingRangeStart",function(a){if(!r.isInSelectingRange(a))return!1;var i=r.props,o=i.startDate,l=i.selectsStart,c=Ao(Dn(),a);return l?_o(c,r.selectingDate()):_o(c,o)}),he(r,"isSelectingRangeEnd",function(a){if(!r.isInSelectingRange(a))return!1;var i=r.props,o=i.endDate,l=i.selectsEnd,c=i.selectsRange,d=Ao(Dn(),a);return l||c?_o(d,r.selectingDate()):_o(d,o)}),he(r,"isKeyboardSelected",function(a){var i=vm(Ao(r.props.date,a));return!r.props.disabledKeyboardNavigation&&!r.props.inline&&!yn(i,vm(r.props.selected))&&yn(i,vm(r.props.preSelection))}),he(r,"onYearClick",function(a,i){var o=r.props.date;r.handleYearClick(vm(Ao(o,i)),a)}),he(r,"onYearKeyDown",function(a,i){var o=a.key,l=r.props,c=l.date,d=l.yearItemNumber,u=l.handleOnKeyDown;if(o!=="Tab"&&a.preventDefault(),!r.props.disabledKeyboardNavigation)switch(o){case"Enter":r.onYearClick(a,i),r.props.setPreSelection(r.props.selected);break;case"ArrowRight":r.handleYearNavigation(i+1,Bl(r.props.preSelection,1));break;case"ArrowLeft":r.handleYearNavigation(i-1,Lf(r.props.preSelection,1));break;case"ArrowUp":{var h=Gc(c,d),f=h.startPeriod,p=HT,y=i-p;if(y<f){var g=d%p;i>=f&&i<f+g?p=g:p+=g,y=i-p}r.handleYearNavigation(y,Lf(r.props.preSelection,p));break}case"ArrowDown":{var x=Gc(c,d),m=x.endPeriod,v=HT,b=i+v;if(b>m){var C=d%v;i<=m&&i>m-C?v=C:v+=C,b=i+v}r.handleYearNavigation(b,Bl(r.props.preSelection,v));break}}u&&u(a)}),he(r,"getYearClassNames",function(a){var i=r.props,o=i.date,l=i.minDate,c=i.maxDate,d=i.selected,u=i.excludeDates,h=i.includeDates,f=i.filterDate,p=i.yearClassName;return rs("react-datepicker__year-text","react-datepicker__year-".concat(a),p?p(Ao(o,a)):void 0,{"react-datepicker__year-text--selected":a===an(d),"react-datepicker__year-text--disabled":(l||c||u||h||f)&&_$(a,r.props),"react-datepicker__year-text--keyboard-selected":r.isKeyboardSelected(a),"react-datepicker__year-text--range-start":r.isRangeStart(a),"react-datepicker__year-text--range-end":r.isRangeEnd(a),"react-datepicker__year-text--in-range":r.isInRange(a),"react-datepicker__year-text--in-selecting-range":r.isInSelectingRange(a),"react-datepicker__year-text--selecting-range-start":r.isSelectingRangeStart(a),"react-datepicker__year-text--selecting-range-end":r.isSelectingRangeEnd(a),"react-datepicker__year-text--today":r.isCurrentYear(a)})}),he(r,"getYearTabIndex",function(a){if(r.props.disabledKeyboardNavigation)return"-1";var i=an(r.props.preSelection);return a===i?"0":"-1"}),he(r,"getYearContainerClassNames",function(){var a=r.props,i=a.selectingDate,o=a.selectsStart,l=a.selectsEnd,c=a.selectsRange;return rs("react-datepicker__year",{"react-datepicker__year--selecting-range":i&&(o||l||c)})}),he(r,"getYearContent",function(a){return r.props.renderYearContent?r.props.renderYearContent(a):a}),r}return ws(t,e),bs(t,[{key:"render",value:function(){for(var r=this,a=[],i=this.props,o=i.date,l=i.yearItemNumber,c=i.onYearMouseEnter,d=i.onYearMouseLeave,u=Gc(o,l),h=u.startPeriod,f=u.endPeriod,p=function(x){a.push(Q.createElement("div",{ref:r.YEAR_REFS[x-h],onClick:function(v){r.onYearClick(v,x)},onKeyDown:function(v){L$(v)&&(v.preventDefault(),v.key="Enter"),r.onYearKeyDown(v,x)},tabIndex:r.getYearTabIndex(x),className:r.getYearClassNames(x),onMouseEnter:r.props.usePointerEvent?void 0:function(m){return c(m,x)},onPointerEnter:r.props.usePointerEvent?function(m){return c(m,x)}:void 0,onMouseLeave:r.props.usePointerEvent?void 0:function(m){return d(m,x)},onPointerLeave:r.props.usePointerEvent?function(m){return d(m,x)}:void 0,key:x,"aria-current":r.isCurrentYear(x)?"date":void 0},r.getYearContent(x)))},y=h;y<=f;y++)p(y);return Q.createElement("div",{className:this.getYearContainerClassNames()},Q.createElement("div",{className:"react-datepicker__year-wrapper",onMouseLeave:this.props.usePointerEvent?void 0:this.props.clearSelectingDate,onPointerLeave:this.props.usePointerEvent?this.props.clearSelectingDate:void 0},a))}}])}(Q.Component),Q2e=function(e){function t(n){var r;return ys(this,t),r=xs(this,t,[n]),he(r,"onTimeChange",function(a){r.setState({time:a});var i=r.props.date,o=i instanceof Date&&!isNaN(i),l=o?i:new Date;l.setHours(a.split(":")[0]),l.setMinutes(a.split(":")[1]),r.props.onChange(l)}),he(r,"renderTimeInput",function(){var a=r.state.time,i=r.props,o=i.date,l=i.timeString,c=i.customTimeInput;return c?Q.cloneElement(c,{date:o,value:a,onChange:r.onTimeChange}):Q.createElement("input",{type:"time",className:"react-datepicker-time__input",placeholder:"Time",name:"time-input",required:!0,value:a,onChange:function(u){r.onTimeChange(u.target.value||l)}})}),r.state={time:r.props.timeString},r}return ws(t,e),bs(t,[{key:"render",value:function(){return Q.createElement("div",{className:"react-datepicker__input-time-container"},Q.createElement("div",{className:"react-datepicker-time__caption"},this.props.timeInputLabel),Q.createElement("div",{className:"react-datepicker-time__input-container"},Q.createElement("div",{className:"react-datepicker-time__input"},this.renderTimeInput())))}}],[{key:"getDerivedStateFromProps",value:function(r,a){return r.timeString!==a.time?{time:r.timeString}:null}}])}(Q.Component);function Z2e(e){var t=e.showTimeSelectOnly,n=t===void 0?!1:t,r=e.showTime,a=r===void 0?!1:r,i=e.className,o=e.children,l=n?"Choose Time":"Choose Date".concat(a?" and Time":"");return Q.createElement("div",{className:i,role:"dialog","aria-label":l,"aria-modal":"true"},o)}var eje=["react-datepicker__year-select","react-datepicker__month-select","react-datepicker__month-year-select"],tje=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=(t.className||"").split(/\s+/);return eje.some(function(r){return n.indexOf(r)>=0})},nje=function(e){function t(n){var r;return ys(this,t),r=xs(this,t,[n]),he(r,"handleClickOutside",function(a){r.props.onClickOutside(a)}),he(r,"setClickOutsideRef",function(){return r.containerRef.current}),he(r,"handleDropdownFocus",function(a){tje(a.target)&&r.props.onDropdownFocus()}),he(r,"getDateInView",function(){var a=r.props,i=a.preSelection,o=a.selected,l=a.openToDate,c=M$(r.props),d=R$(r.props),u=Dn(),h=l||o||i;return h||(c&&Ql(u,c)?c:d&&tl(u,d)?d:u)}),he(r,"increaseMonth",function(){r.setState(function(a){var i=a.date;return{date:ho(i,1)}},function(){return r.handleMonthChange(r.state.date)})}),he(r,"decreaseMonth",function(){r.setState(function(a){var i=a.date;return{date:Rf(i,1)}},function(){return r.handleMonthChange(r.state.date)})}),he(r,"handleDayClick",function(a,i,o){r.props.onSelect(a,i,o),r.props.setPreSelection&&r.props.setPreSelection(a)}),he(r,"handleDayMouseEnter",function(a){r.setState({selectingDate:a}),r.props.onDayMouseEnter&&r.props.onDayMouseEnter(a)}),he(r,"handleMonthMouseLeave",function(){r.setState({selectingDate:null}),r.props.onMonthMouseLeave&&r.props.onMonthMouseLeave()}),he(r,"handleYearMouseEnter",function(a,i){r.setState({selectingDate:Ao(Dn(),i)}),r.props.onYearMouseEnter&&r.props.onYearMouseEnter(a,i)}),he(r,"handleYearMouseLeave",function(a,i){r.props.onYearMouseLeave&&r.props.onYearMouseLeave(a,i)}),he(r,"handleYearChange",function(a){r.props.onYearChange&&(r.props.onYearChange(a),r.setState({isRenderAriaLiveMessage:!0})),r.props.adjustDateOnChange&&(r.props.onSelect&&r.props.onSelect(a),r.props.setOpen&&r.props.setOpen(!0)),r.props.setPreSelection&&r.props.setPreSelection(a)}),he(r,"handleMonthChange",function(a){r.handleCustomMonthChange(a),r.props.adjustDateOnChange&&(r.props.onSelect&&r.props.onSelect(a),r.props.setOpen&&r.props.setOpen(!0)),r.props.setPreSelection&&r.props.setPreSelection(a)}),he(r,"handleCustomMonthChange",function(a){r.props.onMonthChange&&(r.props.onMonthChange(a),r.setState({isRenderAriaLiveMessage:!0}))}),he(r,"handleMonthYearChange",function(a){r.handleYearChange(a),r.handleMonthChange(a)}),he(r,"changeYear",function(a){r.setState(function(i){var o=i.date;return{date:Ao(o,a)}},function(){return r.handleYearChange(r.state.date)})}),he(r,"changeMonth",function(a){r.setState(function(i){var o=i.date;return{date:ha(o,a)}},function(){return r.handleMonthChange(r.state.date)})}),he(r,"changeMonthYear",function(a){r.setState(function(i){var o=i.date;return{date:Ao(ha(o,ga(a)),an(a))}},function(){return r.handleMonthYearChange(r.state.date)})}),he(r,"header",function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:r.state.date,i=od(a,r.props.locale,r.props.calendarStartDay),o=[];return r.props.showWeekNumbers&&o.push(Q.createElement("div",{key:"W",className:"react-datepicker__day-name"},r.props.weekLabel||"#")),o.concat([0,1,2,3,4,5,6].map(function(l){var c=$a(i,l),d=r.formatWeekday(c,r.props.locale),u=r.props.weekDayClassName?r.props.weekDayClassName(c):void 0;return Q.createElement("div",{key:l,"aria-label":Xn(c,"EEEE",r.props.locale),className:rs("react-datepicker__day-name",u)},d)}))}),he(r,"formatWeekday",function(a,i){return r.props.formatWeekDay?j2e(a,r.props.formatWeekDay,i):r.props.useWeekdaysShort?S2e(a,i):N2e(a,i)}),he(r,"decreaseYear",function(){r.setState(function(a){var i=a.date;return{date:Lf(i,r.props.showYearPicker?r.props.yearItemNumber:1)}},function(){return r.handleYearChange(r.state.date)})}),he(r,"clearSelectingDate",function(){r.setState({selectingDate:null})}),he(r,"renderPreviousButton",function(){if(!r.props.renderCustomHeader){var a;switch(!0){case r.props.showMonthYearPicker:a=LT(r.state.date,r.props);break;case r.props.showYearPicker:a=k2e(r.state.date,r.props);break;case r.props.showQuarterYearPicker:a=P2e(r.state.date,r.props);break;default:a=MT(r.state.date,r.props);break}if(!(!r.props.forceShowMonthNavigation&&!r.props.showDisabledMonthNavigation&&a||r.props.showTimeSelectOnly)){var i=["react-datepicker__navigation-icon","react-datepicker__navigation-icon--previous"],o=["react-datepicker__navigation","react-datepicker__navigation--previous"],l=r.decreaseMonth;(r.props.showMonthYearPicker||r.props.showQuarterYearPicker||r.props.showYearPicker)&&(l=r.decreaseYear),a&&r.props.showDisabledMonthNavigation&&(o.push("react-datepicker__navigation--previous--disabled"),l=null);var c=r.props.showMonthYearPicker||r.props.showQuarterYearPicker||r.props.showYearPicker,d=r.props,u=d.previousMonthButtonLabel,h=d.previousYearButtonLabel,f=r.props,p=f.previousMonthAriaLabel,y=p===void 0?typeof u=="string"?u:"Previous Month":p,g=f.previousYearAriaLabel,x=g===void 0?typeof h=="string"?h:"Previous Year":g;return Q.createElement("button",{type:"button",className:o.join(" "),onClick:l,onKeyDown:r.props.handleOnKeyDown,"aria-label":c?x:y},Q.createElement("span",{className:i.join(" ")},c?r.props.previousYearButtonLabel:r.props.previousMonthButtonLabel))}}}),he(r,"increaseYear",function(){r.setState(function(a){var i=a.date;return{date:Bl(i,r.props.showYearPicker?r.props.yearItemNumber:1)}},function(){return r.handleYearChange(r.state.date)})}),he(r,"renderNextButton",function(){if(!r.props.renderCustomHeader){var a;switch(!0){case r.props.showMonthYearPicker:a=IT(r.state.date,r.props);break;case r.props.showYearPicker:a=E2e(r.state.date,r.props);break;case r.props.showQuarterYearPicker:a=D2e(r.state.date,r.props);break;default:a=RT(r.state.date,r.props);break}if(!(!r.props.forceShowMonthNavigation&&!r.props.showDisabledMonthNavigation&&a||r.props.showTimeSelectOnly)){var i=["react-datepicker__navigation","react-datepicker__navigation--next"],o=["react-datepicker__navigation-icon","react-datepicker__navigation-icon--next"];r.props.showTimeSelect&&i.push("react-datepicker__navigation--next--with-time"),r.props.todayButton&&i.push("react-datepicker__navigation--next--with-today-button");var l=r.increaseMonth;(r.props.showMonthYearPicker||r.props.showQuarterYearPicker||r.props.showYearPicker)&&(l=r.increaseYear),a&&r.props.showDisabledMonthNavigation&&(i.push("react-datepicker__navigation--next--disabled"),l=null);var c=r.props.showMonthYearPicker||r.props.showQuarterYearPicker||r.props.showYearPicker,d=r.props,u=d.nextMonthButtonLabel,h=d.nextYearButtonLabel,f=r.props,p=f.nextMonthAriaLabel,y=p===void 0?typeof u=="string"?u:"Next Month":p,g=f.nextYearAriaLabel,x=g===void 0?typeof h=="string"?h:"Next Year":g;return Q.createElement("button",{type:"button",className:i.join(" "),onClick:l,onKeyDown:r.props.handleOnKeyDown,"aria-label":c?x:y},Q.createElement("span",{className:o.join(" ")},c?r.props.nextYearButtonLabel:r.props.nextMonthButtonLabel))}}}),he(r,"renderCurrentMonth",function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:r.state.date,i=["react-datepicker__current-month"];return r.props.showYearDropdown&&i.push("react-datepicker__current-month--hasYearDropdown"),r.props.showMonthDropdown&&i.push("react-datepicker__current-month--hasMonthDropdown"),r.props.showMonthYearDropdown&&i.push("react-datepicker__current-month--hasMonthYearDropdown"),Q.createElement("div",{className:i.join(" ")},Xn(a,r.props.dateFormat,r.props.locale))}),he(r,"renderYearDropdown",function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(!(!r.props.showYearDropdown||a))return Q.createElement(F2e,{adjustDateOnChange:r.props.adjustDateOnChange,date:r.state.date,onSelect:r.props.onSelect,setOpen:r.props.setOpen,dropdownMode:r.props.dropdownMode,onChange:r.changeYear,minDate:r.props.minDate,maxDate:r.props.maxDate,year:an(r.state.date),scrollableYearDropdown:r.props.scrollableYearDropdown,yearDropdownItemNumber:r.props.yearDropdownItemNumber})}),he(r,"renderMonthDropdown",function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(!(!r.props.showMonthDropdown||a))return Q.createElement(z2e,{dropdownMode:r.props.dropdownMode,locale:r.props.locale,onChange:r.changeMonth,month:ga(r.state.date),useShortMonthInDropdown:r.props.useShortMonthInDropdown})}),he(r,"renderMonthYearDropdown",function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(!(!r.props.showMonthYearDropdown||a))return Q.createElement(V2e,{dropdownMode:r.props.dropdownMode,locale:r.props.locale,dateFormat:r.props.dateFormat,onChange:r.changeMonthYear,minDate:r.props.minDate,maxDate:r.props.maxDate,date:r.state.date,scrollableMonthYearDropdown:r.props.scrollableMonthYearDropdown})}),he(r,"handleTodayButtonClick",function(a){r.props.onSelect(ET(),a),r.props.setPreSelection&&r.props.setPreSelection(ET())}),he(r,"renderTodayButton",function(){if(!(!r.props.todayButton||r.props.showTimeSelectOnly))return Q.createElement("div",{className:"react-datepicker__today-button",onClick:function(i){return r.handleTodayButtonClick(i)}},r.props.todayButton)}),he(r,"renderDefaultHeader",function(a){var i=a.monthDate,o=a.i;return Q.createElement("div",{className:"react-datepicker__header ".concat(r.props.showTimeSelect?"react-datepicker__header--has-time-select":"")},r.renderCurrentMonth(i),Q.createElement("div",{className:"react-datepicker__header__dropdown react-datepicker__header__dropdown--".concat(r.props.dropdownMode),onFocus:r.handleDropdownFocus},r.renderMonthDropdown(o!==0),r.renderMonthYearDropdown(o!==0),r.renderYearDropdown(o!==0)),Q.createElement("div",{className:"react-datepicker__day-names"},r.header(i)))}),he(r,"renderCustomHeader",function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=a.monthDate,o=a.i;if(r.props.showTimeSelect&&!r.state.monthContainer||r.props.showTimeSelectOnly)return null;var l=MT(r.state.date,r.props),c=RT(r.state.date,r.props),d=LT(r.state.date,r.props),u=IT(r.state.date,r.props),h=!r.props.showMonthYearPicker&&!r.props.showQuarterYearPicker&&!r.props.showYearPicker;return Q.createElement("div",{className:"react-datepicker__header react-datepicker__header--custom",onFocus:r.props.onDropdownFocus},r.props.renderCustomHeader(Al(Al({},r.state),{},{customHeaderCount:o,monthDate:i,changeMonth:r.changeMonth,changeYear:r.changeYear,decreaseMonth:r.decreaseMonth,increaseMonth:r.increaseMonth,decreaseYear:r.decreaseYear,increaseYear:r.increaseYear,prevMonthButtonDisabled:l,nextMonthButtonDisabled:c,prevYearButtonDisabled:d,nextYearButtonDisabled:u})),h&&Q.createElement("div",{className:"react-datepicker__day-names"},r.header(i)))}),he(r,"renderYearHeader",function(a){var i=a.monthDate,o=r.props,l=o.showYearPicker,c=o.yearItemNumber,d=Gc(i,c),u=d.startPeriod,h=d.endPeriod;return Q.createElement("div",{className:"react-datepicker__header react-datepicker-year-header"},l?"".concat(u," - ").concat(h):an(i))}),he(r,"renderHeader",function(a){switch(!0){case r.props.renderCustomHeader!==void 0:return r.renderCustomHeader(a);case(r.props.showMonthYearPicker||r.props.showQuarterYearPicker||r.props.showYearPicker):return r.renderYearHeader(a);default:return r.renderDefaultHeader(a)}}),he(r,"renderMonths",function(){var a;if(!(r.props.showTimeSelectOnly||r.props.showYearPicker)){for(var i=[],o=r.props.showPreviousMonths?r.props.monthsShown-1:0,l=r.props.showMonthYearPicker||r.props.showQuarterYearPicker?Bl(r.state.date,o):Rf(r.state.date,o),c=(a=r.props.monthSelectedIn)!==null&&a!==void 0?a:o,d=0;d<r.props.monthsShown;++d){var u=d-c+o,h=r.props.showMonthYearPicker||r.props.showQuarterYearPicker?Bl(l,u):ho(l,u),f="month-".concat(d),p=d<r.props.monthsShown-1,y=d>0;i.push(Q.createElement("div",{key:f,ref:function(x){r.monthContainer=x},className:"react-datepicker__month-container"},r.renderHeader({monthDate:h,i:d}),Q.createElement(K2e,{chooseDayAriaLabelPrefix:r.props.chooseDayAriaLabelPrefix,disabledDayAriaLabelPrefix:r.props.disabledDayAriaLabelPrefix,weekAriaLabelPrefix:r.props.weekAriaLabelPrefix,ariaLabelPrefix:r.props.monthAriaLabelPrefix,onChange:r.changeMonthYear,day:h,dayClassName:r.props.dayClassName,calendarStartDay:r.props.calendarStartDay,monthClassName:r.props.monthClassName,onDayClick:r.handleDayClick,handleOnKeyDown:r.props.handleOnDayKeyDown,handleOnMonthKeyDown:r.props.handleOnKeyDown,usePointerEvent:r.props.usePointerEvent,onDayMouseEnter:r.handleDayMouseEnter,onMouseLeave:r.handleMonthMouseLeave,onWeekSelect:r.props.onWeekSelect,orderInDisplay:d,formatWeekNumber:r.props.formatWeekNumber,locale:r.props.locale,minDate:r.props.minDate,maxDate:r.props.maxDate,excludeDates:r.props.excludeDates,excludeDateIntervals:r.props.excludeDateIntervals,highlightDates:r.props.highlightDates,holidays:r.props.holidays,selectingDate:r.state.selectingDate,includeDates:r.props.includeDates,includeDateIntervals:r.props.includeDateIntervals,inline:r.props.inline,shouldFocusDayInline:r.props.shouldFocusDayInline,fixedHeight:r.props.fixedHeight,filterDate:r.props.filterDate,preSelection:r.props.preSelection,setPreSelection:r.props.setPreSelection,selected:r.props.selected,selectsStart:r.props.selectsStart,selectsEnd:r.props.selectsEnd,selectsRange:r.props.selectsRange,selectsDisabledDaysInRange:r.props.selectsDisabledDaysInRange,selectsMultiple:r.props.selectsMultiple,selectedDates:r.props.selectedDates,showWeekNumbers:r.props.showWeekNumbers,startDate:r.props.startDate,endDate:r.props.endDate,peekNextMonth:r.props.peekNextMonth,setOpen:r.props.setOpen,shouldCloseOnSelect:r.props.shouldCloseOnSelect,renderDayContents:r.props.renderDayContents,renderMonthContent:r.props.renderMonthContent,renderQuarterContent:r.props.renderQuarterContent,renderYearContent:r.props.renderYearContent,disabledKeyboardNavigation:r.props.disabledKeyboardNavigation,showMonthYearPicker:r.props.showMonthYearPicker,showFullMonthYearPicker:r.props.showFullMonthYearPicker,showTwoColumnMonthYearPicker:r.props.showTwoColumnMonthYearPicker,showFourColumnMonthYearPicker:r.props.showFourColumnMonthYearPicker,showYearPicker:r.props.showYearPicker,showQuarterYearPicker:r.props.showQuarterYearPicker,showWeekPicker:r.props.showWeekPicker,isInputFocused:r.props.isInputFocused,containerRef:r.containerRef,monthShowsDuplicateDaysEnd:p,monthShowsDuplicateDaysStart:y})))}return i}}),he(r,"renderYears",function(){if(!r.props.showTimeSelectOnly&&r.props.showYearPicker)return Q.createElement("div",{className:"react-datepicker__year--container"},r.renderHeader({monthDate:r.state.date}),Q.createElement(X2e,Og({onDayClick:r.handleDayClick,selectingDate:r.state.selectingDate,clearSelectingDate:r.clearSelectingDate,date:r.state.date},r.props,{onYearMouseEnter:r.handleYearMouseEnter,onYearMouseLeave:r.handleYearMouseLeave})))}),he(r,"renderTimeSection",function(){if(r.props.showTimeSelect&&(r.state.monthContainer||r.props.showTimeSelectOnly))return Q.createElement(I$,{selected:r.props.selected,openToDate:r.props.openToDate,onChange:r.props.onTimeChange,timeClassName:r.props.timeClassName,format:r.props.timeFormat,includeTimes:r.props.includeTimes,intervals:r.props.timeIntervals,minTime:r.props.minTime,maxTime:r.props.maxTime,excludeTimes:r.props.excludeTimes,filterTime:r.props.filterTime,timeCaption:r.props.timeCaption,todayButton:r.props.todayButton,showMonthDropdown:r.props.showMonthDropdown,showMonthYearDropdown:r.props.showMonthYearDropdown,showYearDropdown:r.props.showYearDropdown,withPortal:r.props.withPortal,monthRef:r.state.monthContainer,injectTimes:r.props.injectTimes,locale:r.props.locale,handleOnKeyDown:r.props.handleOnKeyDown,showTimeSelectOnly:r.props.showTimeSelectOnly})}),he(r,"renderInputTimeSection",function(){var a=new Date(r.props.selected),i=$c(a)&&!!r.props.selected,o=i?"".concat(FT(a.getHours()),":").concat(FT(a.getMinutes())):"";if(r.props.showTimeInput)return Q.createElement(Q2e,{date:a,timeString:o,timeInputLabel:r.props.timeInputLabel,onChange:r.props.onTimeChange,customTimeInput:r.props.customTimeInput})}),he(r,"renderAriaLiveRegion",function(){var a=Gc(r.state.date,r.props.yearItemNumber),i=a.startPeriod,o=a.endPeriod,l;return r.props.showYearPicker?l="".concat(i," - ").concat(o):r.props.showMonthYearPicker||r.props.showQuarterYearPicker?l=an(r.state.date):l="".concat(oP(ga(r.state.date),r.props.locale)," ").concat(an(r.state.date)),Q.createElement("span",{role:"alert","aria-live":"polite",className:"react-datepicker__aria-live"},r.state.isRenderAriaLiveMessage&&l)}),he(r,"renderChildren",function(){if(r.props.children)return Q.createElement("div",{className:"react-datepicker__children-container"},r.props.children)}),r.containerRef=Q.createRef(),r.state={date:r.getDateInView(),selectingDate:null,monthContainer:null,isRenderAriaLiveMessage:!1},r}return ws(t,e),bs(t,[{key:"componentDidMount",value:function(){var r=this;this.props.showTimeSelect&&(this.assignMonthContainer=function(){r.setState({monthContainer:r.monthContainer})}())}},{key:"componentDidUpdate",value:function(r){var a=this;if(this.props.preSelection&&(!yn(this.props.preSelection,r.preSelection)||this.props.monthSelectedIn!==r.monthSelectedIn)){var i=!ni(this.state.date,this.props.preSelection);this.setState({date:this.props.preSelection},function(){return i&&a.handleCustomMonthChange(a.state.date)})}else this.props.openToDate&&!yn(this.props.openToDate,r.openToDate)&&this.setState({date:this.props.openToDate})}},{key:"render",value:function(){var r=this.props.container||Z2e;return Q.createElement("div",{style:{display:"contents"},ref:this.containerRef},Q.createElement(r,{className:rs("react-datepicker",this.props.className,{"react-datepicker--time-only":this.props.showTimeSelectOnly}),showTime:this.props.showTimeSelect||this.props.showTimeInput,showTimeSelectOnly:this.props.showTimeSelectOnly},this.renderAriaLiveRegion(),this.renderPreviousButton(),this.renderNextButton(),this.renderMonths(),this.renderYears(),this.renderTodayButton(),this.renderTimeSection(),this.renderInputTimeSection(),this.renderChildren()))}}],[{key:"defaultProps",get:function(){return{onDropdownFocus:function(){},monthsShown:1,forceShowMonthNavigation:!1,timeCaption:"Time",previousYearButtonLabel:"Previous Year",nextYearButtonLabel:"Next Year",previousMonthButtonLabel:"Previous Month",nextMonthButtonLabel:"Next Month",customTimeInput:null,yearItemNumber:vv}}}])}(Q.Component),rje=function(t){var n=t.icon,r=t.className,a=r===void 0?"":r,i=t.onClick,o="react-datepicker__calendar-icon";return Q.isValidElement(n)?Q.cloneElement(n,{className:"".concat(n.props.className||""," ").concat(o," ").concat(a),onClick:function(c){typeof n.props.onClick=="function"&&n.props.onClick(c),typeof i=="function"&&i(c)}}):typeof n=="string"?Q.createElement("i",{className:"".concat(o," ").concat(n," ").concat(a),"aria-hidden":"true",onClick:i}):Q.createElement("svg",{className:"".concat(o," ").concat(a),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",onClick:i},Q.createElement("path",{d:"M96 32V64H48C21.5 64 0 85.5 0 112v48H448V112c0-26.5-21.5-48-48-48H352V32c0-17.7-14.3-32-32-32s-32 14.3-32 32V64H160V32c0-17.7-14.3-32-32-32S96 14.3 96 32zM448 192H0V464c0 26.5 21.5 48 48 48H400c26.5 0 48-21.5 48-48V192z"}))},sje=rje,O$=function(e){function t(n){var r;return ys(this,t),r=xs(this,t,[n]),r.el=document.createElement("div"),r}return ws(t,e),bs(t,[{key:"componentDidMount",value:function(){this.portalRoot=(this.props.portalHost||document).getElementById(this.props.portalId),this.portalRoot||(this.portalRoot=document.createElement("div"),this.portalRoot.setAttribute("id",this.props.portalId),(this.props.portalHost||document.body).appendChild(this.portalRoot)),this.portalRoot.appendChild(this.el)}},{key:"componentWillUnmount",value:function(){this.portalRoot.removeChild(this.el)}},{key:"render",value:function(){return Hg.createPortal(this.props.children,this.el)}}])}(Q.Component),aje="[tabindex], a, button, input, select, textarea",ije=function(t){return!t.disabled&&t.tabIndex!==-1},F$=function(e){function t(n){var r;return ys(this,t),r=xs(this,t,[n]),he(r,"getTabChildren",function(){return Array.prototype.slice.call(r.tabLoopRef.current.querySelectorAll(aje),1,-1).filter(ije)}),he(r,"handleFocusStart",function(){var a=r.getTabChildren();a&&a.length>1&&a[a.length-1].focus()}),he(r,"handleFocusEnd",function(){var a=r.getTabChildren();a&&a.length>1&&a[0].focus()}),r.tabLoopRef=Q.createRef(),r}return ws(t,e),bs(t,[{key:"render",value:function(){return this.props.enableTabLoop?Q.createElement("div",{className:"react-datepicker__tab-loop",ref:this.tabLoopRef},Q.createElement("div",{className:"react-datepicker__tab-loop__start",tabIndex:"0",onFocus:this.handleFocusStart}),this.props.children,Q.createElement("div",{className:"react-datepicker__tab-loop__end",tabIndex:"0",onFocus:this.handleFocusEnd})):this.props.children}}],[{key:"defaultProps",get:function(){return{enableTabLoop:!0}}}])}(Q.Component);function oje(e){var t=function(r){var a=Al(Al({},r),{},{popperModifiers:r.popperModifiers||[],popperProps:r.popperProps||{},hidePopper:typeof r.hidePopper=="boolean"?r.hidePopper:!0}),i=Q.useRef(),o=i2e(Al({open:!a.hidePopper,whileElementsMounted:tR,placement:a.popperPlacement,middleware:[aR({padding:15}),sR(10),iR({element:i})].concat(yd(a.popperModifiers))},a.popperProps));return Q.createElement(e,Og({},a,{popperProps:Al(Al({},o),{},{arrowRef:i})}))};return t}var lje=function(e){function t(){return ys(this,t),xs(this,t,arguments)}return ws(t,e),bs(t,[{key:"render",value:function(){var r=this.props,a=r.className,i=r.wrapperClassName,o=r.hidePopper,l=r.popperComponent,c=r.targetComponent,d=r.enableTabLoop,u=r.popperOnKeyDown,h=r.portalId,f=r.portalHost,p=r.popperProps,y=r.showArrow,g;if(!o){var x=rs("react-datepicker-popper",a);g=Q.createElement(F$,{enableTabLoop:d},Q.createElement("div",{ref:p.refs.setFloating,style:p.floatingStyles,className:x,"data-placement":p.placement,onKeyDown:u},l,y&&Q.createElement(Zwe,{ref:p.arrowRef,context:p.context,fill:"currentColor",strokeWidth:1,height:8,width:16,style:{transform:"translateY(-1px)"},className:"react-datepicker__triangle"})))}this.props.popperContainer&&(g=Q.createElement(this.props.popperContainer,{},g)),h&&!o&&(g=Q.createElement(O$,{portalId:h,portalHost:f},g));var m=rs("react-datepicker-wrapper",i);return Q.createElement(Q.Fragment,null,Q.createElement("div",{ref:p.refs.setReference,className:m},c),g)}}],[{key:"defaultProps",get:function(){return{hidePopper:!0}}}])}(Q.Component),cje=oje(lje),qT="react-datepicker-ignore-onclickoutside",dje=jb(nje);function uje(e,t){return e&&t?ga(e)!==ga(t)||an(e)!==an(t):e!==t}var M2="Date input not valid.",A0=function(e){function t(n){var r;return ys(this,t),r=xs(this,t,[n]),he(r,"getPreSelection",function(){return r.props.openToDate?r.props.openToDate:r.props.selectsEnd&&r.props.startDate?r.props.startDate:r.props.selectsStart&&r.props.endDate?r.props.endDate:Dn()}),he(r,"modifyHolidays",function(){var a;return(a=r.props.holidays)===null||a===void 0?void 0:a.reduce(function(i,o){var l=new Date(o.date);return xg(l)?[].concat(yd(i),[Al(Al({},o),{},{date:l})]):i},[])}),he(r,"calcInitialState",function(){var a,i=r.getPreSelection(),o=M$(r.props),l=R$(r.props),c=o&&Ql(i,Yo(o))?o:l&&tl(i,cN(l))?l:i;return{open:r.props.startOpen||!1,preventFocus:!1,preSelection:(a=r.props.selectsRange?r.props.startDate:r.props.selected)!==null&&a!==void 0?a:c,highlightDates:OT(r.props.highlightDates),focused:!1,shouldFocusDayInline:!1,isRenderAriaLiveMessage:!1}}),he(r,"clearPreventFocusTimeout",function(){r.preventFocusTimeout&&clearTimeout(r.preventFocusTimeout)}),he(r,"setFocus",function(){r.input&&r.input.focus&&r.input.focus({preventScroll:!0})}),he(r,"setBlur",function(){r.input&&r.input.blur&&r.input.blur(),r.cancelFocusInput()}),he(r,"setOpen",function(a){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;r.setState({open:a,preSelection:a&&r.state.open?r.state.preSelection:r.calcInitialState().preSelection,lastPreSelectChange:R2},function(){a||r.setState(function(o){return{focused:i?o.focused:!1}},function(){!i&&r.setBlur(),r.setState({inputValue:null})})})}),he(r,"inputOk",function(){return Lu(r.state.preSelection)}),he(r,"isCalendarOpen",function(){return r.props.open===void 0?r.state.open&&!r.props.disabled&&!r.props.readOnly:r.props.open}),he(r,"handleFocus",function(a){r.state.preventFocus||(r.props.onFocus(a),!r.props.preventOpenOnFocus&&!r.props.readOnly&&r.setOpen(!0)),r.setState({focused:!0})}),he(r,"sendFocusBackToInput",function(){r.preventFocusTimeout&&r.clearPreventFocusTimeout(),r.setState({preventFocus:!0},function(){r.preventFocusTimeout=setTimeout(function(){r.setFocus(),r.setState({preventFocus:!1})})})}),he(r,"cancelFocusInput",function(){clearTimeout(r.inputFocusTimeout),r.inputFocusTimeout=null}),he(r,"deferFocusInput",function(){r.cancelFocusInput(),r.inputFocusTimeout=setTimeout(function(){return r.setFocus()},1)}),he(r,"handleDropdownFocus",function(){r.cancelFocusInput()}),he(r,"handleBlur",function(a){(!r.state.open||r.props.withPortal||r.props.showTimeInput)&&r.props.onBlur(a),r.setState({focused:!1})}),he(r,"handleCalendarClickOutside",function(a){r.props.inline||r.setOpen(!1),r.props.onClickOutside(a),r.props.withPortal&&a.preventDefault()}),he(r,"handleChange",function(){for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];var l=i[0];if(!(r.props.onChangeRaw&&(r.props.onChangeRaw.apply(r,i),typeof l.isDefaultPrevented!="function"||l.isDefaultPrevented()))){r.setState({inputValue:l.target.value,lastPreSelectChange:hje});var c=m2e(l.target.value,r.props.dateFormat,r.props.locale,r.props.strictParsing,r.props.minDate);r.props.showTimeSelectOnly&&r.props.selected&&c&&!yn(c,r.props.selected)&&(c=ree(r.props.selected,{hours:Go(c),minutes:Jo(c),seconds:zl(c)})),(c||!l.target.value)&&r.setSelected(c,l,!0)}}),he(r,"handleSelect",function(a,i,o){if(r.props.shouldCloseOnSelect&&!r.props.showTimeSelect&&r.sendFocusBackToInput(),r.props.onChangeRaw&&r.props.onChangeRaw(i),r.setSelected(a,i,!1,o),r.props.showDateSelect&&r.setState({isRenderAriaLiveMessage:!0}),!r.props.shouldCloseOnSelect||r.props.showTimeSelect)r.setPreSelection(a);else if(!r.props.inline){r.props.selectsRange||r.setOpen(!1);var l=r.props,c=l.startDate,d=l.endDate;c&&!d&&(r.props.swapRange||!zT(a,c))&&r.setOpen(!1)}}),he(r,"setSelected",function(a,i,o,l){var c=a;if(r.props.showYearPicker){if(c!==null&&_$(an(c),r.props))return}else if(r.props.showMonthYearPicker){if(c!==null&&T0(c,r.props))return}else if(c!==null&&Nb(c,r.props))return;var d=r.props,u=d.onChange,h=d.selectsRange,f=d.startDate,p=d.endDate,y=d.selectsMultiple,g=d.selectedDates,x=d.minTime,m=d.swapRange;if(!hu(r.props.selected,c)||r.props.allowSameDay||h||y)if(c!==null&&(r.props.selected&&(!o||!r.props.showTimeSelect&&!r.props.showTimeSelectOnly&&!r.props.showTimeInput)&&(c=T2(c,{hour:Go(r.props.selected),minute:Jo(r.props.selected),second:zl(r.props.selected)})),!o&&(r.props.showTimeSelect||r.props.showTimeSelectOnly)&&x&&(c=T2(c,{hour:x.getHours(),minute:x.getMinutes(),second:x.getSeconds()})),r.props.inline||r.setState({preSelection:c}),r.props.focusSelectedMonth||r.setState({monthSelectedIn:l})),h){var v=!f&&!p,b=f&&!p,C=f&&p;v?u([c,null],i):b&&(c===null?u([null,null],i):zT(c,f)?u(m?[c,f]:[c,null],i):u([f,c],i)),C&&u([c,null],i)}else if(y)if(!(g!=null&&g.length))u([c],i);else{var S=g.some(function(D){return yn(D,c)});if(S){var P=g.filter(function(D){return!yn(D,c)});u(P,i)}else u([].concat(yd(g),[c]),i)}else u(c,i);o||(r.props.onSelect(c,i),r.setState({inputValue:null}))}),he(r,"setPreSelection",function(a){var i=typeof r.props.minDate<"u",o=typeof r.props.maxDate<"u",l=!0;if(a){var c=Yo(a);if(i&&o)l=xm(a,r.props.minDate,r.props.maxDate);else if(i){var d=Yo(r.props.minDate);l=tl(a,d)||hu(c,d)}else if(o){var u=cN(r.props.maxDate);l=Ql(a,u)||hu(c,u)}}l&&r.setState({preSelection:a})}),he(r,"toggleCalendar",function(){r.setOpen(!r.state.open)}),he(r,"handleTimeChange",function(a){var i=r.props.selected?r.props.selected:r.getPreSelection(),o=r.props.selected?a:T2(i,{hour:Go(a),minute:Jo(a)});r.setState({preSelection:o}),r.props.onChange(o),r.props.shouldCloseOnSelect&&(r.sendFocusBackToInput(),r.setOpen(!1)),r.props.showTimeInput&&r.setOpen(!0),(r.props.showTimeSelectOnly||r.props.showTimeSelect)&&r.setState({isRenderAriaLiveMessage:!0}),r.setState({inputValue:null})}),he(r,"onInputClick",function(){!r.props.disabled&&!r.props.readOnly&&r.setOpen(!0),r.props.onInputClick()}),he(r,"onInputKeyDown",function(a){r.props.onKeyDown(a);var i=a.key;if(!r.state.open&&!r.props.inline&&!r.props.preventOpenOnFocus){(i==="ArrowDown"||i==="ArrowUp"||i==="Enter")&&r.onInputClick();return}if(r.state.open){if(i==="ArrowDown"||i==="ArrowUp"){a.preventDefault();var o=r.props.showWeekPicker&&r.props.showWeekNumbers?'.react-datepicker__week-number[tabindex="0"]':r.props.showFullMonthYearPicker||r.props.showMonthYearPicker?'.react-datepicker__month-text[tabindex="0"]':'.react-datepicker__day[tabindex="0"]',l=r.calendar.componentNode&&r.calendar.componentNode.querySelector(o);l&&l.focus({preventScroll:!0});return}var c=Dn(r.state.preSelection);i==="Enter"?(a.preventDefault(),r.inputOk()&&r.state.lastPreSelectChange===R2?(r.handleSelect(c,a),!r.props.shouldCloseOnSelect&&r.setPreSelection(c)):r.setOpen(!1)):i==="Escape"?(a.preventDefault(),r.sendFocusBackToInput(),r.setOpen(!1)):i==="Tab"&&r.setOpen(!1),r.inputOk()||r.props.onInputError({code:1,msg:M2})}}),he(r,"onPortalKeyDown",function(a){var i=a.key;i==="Escape"&&(a.preventDefault(),r.setState({preventFocus:!0},function(){r.setOpen(!1),setTimeout(function(){r.setFocus(),r.setState({preventFocus:!1})})}))}),he(r,"onDayKeyDown",function(a){r.props.onKeyDown(a);var i=a.key,o=a.shiftKey,l=Dn(r.state.preSelection);if(i==="Enter")a.preventDefault(),r.handleSelect(l,a),!r.props.shouldCloseOnSelect&&r.setPreSelection(l);else if(i==="Escape")a.preventDefault(),r.setOpen(!1),r.inputOk()||r.props.onInputError({code:1,msg:M2});else if(!r.props.disabledKeyboardNavigation){var c;switch(i){case"ArrowLeft":r.props.showWeekPicker?c=iE(l,1):c=zZ(l,1);break;case"ArrowRight":r.props.showWeekPicker?c=yy(l,1):c=$a(l,1);break;case"ArrowUp":c=iE(l,1);break;case"ArrowDown":c=yy(l,1);break;case"PageUp":c=o?Lf(l,1):Rf(l,1);break;case"PageDown":c=o?Bl(l,1):ho(l,1);break;case"Home":c=od(l,r.props.locale,r.props.calendarStartDay);break;case"End":c=w2e(l);break;default:c=null;break}if(!c){r.props.onInputError&&r.props.onInputError({code:1,msg:M2});return}if(a.preventDefault(),r.setState({lastPreSelectChange:R2}),r.props.adjustDateOnChange&&r.setSelected(c),r.setPreSelection(c),r.props.inline){var d=ga(l),u=ga(c),h=an(l),f=an(c);d!==u||h!==f?r.setState({shouldFocusDayInline:!0}):r.setState({shouldFocusDayInline:!1})}}}),he(r,"onPopperKeyDown",function(a){var i=a.key;i==="Escape"&&(a.preventDefault(),r.sendFocusBackToInput())}),he(r,"onClearClick",function(a){a&&a.preventDefault&&a.preventDefault(),r.sendFocusBackToInput(),r.props.selectsRange?r.props.onChange([null,null],a):r.props.onChange(null,a),r.setState({inputValue:null})}),he(r,"clear",function(){r.onClearClick()}),he(r,"onScroll",function(a){typeof r.props.closeOnScroll=="boolean"&&r.props.closeOnScroll?(a.target===document||a.target===document.documentElement||a.target===document.body)&&r.setOpen(!1):typeof r.props.closeOnScroll=="function"&&r.props.closeOnScroll(a)&&r.setOpen(!1)}),he(r,"renderCalendar",function(){return!r.props.inline&&!r.isCalendarOpen()?null:Q.createElement(dje,{ref:function(i){r.calendar=i},locale:r.props.locale,calendarStartDay:r.props.calendarStartDay,chooseDayAriaLabelPrefix:r.props.chooseDayAriaLabelPrefix,disabledDayAriaLabelPrefix:r.props.disabledDayAriaLabelPrefix,weekAriaLabelPrefix:r.props.weekAriaLabelPrefix,monthAriaLabelPrefix:r.props.monthAriaLabelPrefix,adjustDateOnChange:r.props.adjustDateOnChange,setOpen:r.setOpen,shouldCloseOnSelect:r.props.shouldCloseOnSelect,dateFormat:r.props.dateFormatCalendar,useWeekdaysShort:r.props.useWeekdaysShort,formatWeekDay:r.props.formatWeekDay,dropdownMode:r.props.dropdownMode,selected:r.props.selected,preSelection:r.state.preSelection,onSelect:r.handleSelect,onWeekSelect:r.props.onWeekSelect,openToDate:r.props.openToDate,minDate:r.props.minDate,maxDate:r.props.maxDate,selectsStart:r.props.selectsStart,selectsEnd:r.props.selectsEnd,selectsRange:r.props.selectsRange,selectsMultiple:r.props.selectsMultiple,selectedDates:r.props.selectedDates,startDate:r.props.startDate,endDate:r.props.endDate,excludeDates:r.props.excludeDates,excludeDateIntervals:r.props.excludeDateIntervals,filterDate:r.props.filterDate,onClickOutside:r.handleCalendarClickOutside,formatWeekNumber:r.props.formatWeekNumber,highlightDates:r.state.highlightDates,holidays:A2e(r.modifyHolidays()),includeDates:r.props.includeDates,includeDateIntervals:r.props.includeDateIntervals,includeTimes:r.props.includeTimes,injectTimes:r.props.injectTimes,inline:r.props.inline,shouldFocusDayInline:r.state.shouldFocusDayInline,peekNextMonth:r.props.peekNextMonth,showMonthDropdown:r.props.showMonthDropdown,showPreviousMonths:r.props.showPreviousMonths,useShortMonthInDropdown:r.props.useShortMonthInDropdown,showMonthYearDropdown:r.props.showMonthYearDropdown,showWeekNumbers:r.props.showWeekNumbers,showYearDropdown:r.props.showYearDropdown,withPortal:r.props.withPortal,forceShowMonthNavigation:r.props.forceShowMonthNavigation,showDisabledMonthNavigation:r.props.showDisabledMonthNavigation,scrollableYearDropdown:r.props.scrollableYearDropdown,scrollableMonthYearDropdown:r.props.scrollableMonthYearDropdown,todayButton:r.props.todayButton,weekLabel:r.props.weekLabel,outsideClickIgnoreClass:qT,fixedHeight:r.props.fixedHeight,monthsShown:r.props.monthsShown,monthSelectedIn:r.state.monthSelectedIn,onDropdownFocus:r.handleDropdownFocus,onMonthChange:r.props.onMonthChange,onYearChange:r.props.onYearChange,dayClassName:r.props.dayClassName,weekDayClassName:r.props.weekDayClassName,monthClassName:r.props.monthClassName,timeClassName:r.props.timeClassName,showDateSelect:r.props.showDateSelect,showTimeSelect:r.props.showTimeSelect,showTimeSelectOnly:r.props.showTimeSelectOnly,onTimeChange:r.handleTimeChange,timeFormat:r.props.timeFormat,timeIntervals:r.props.timeIntervals,minTime:r.props.minTime,maxTime:r.props.maxTime,excludeTimes:r.props.excludeTimes,filterTime:r.props.filterTime,timeCaption:r.props.timeCaption,className:r.props.calendarClassName,container:r.props.calendarContainer,yearItemNumber:r.props.yearItemNumber,yearDropdownItemNumber:r.props.yearDropdownItemNumber,previousMonthAriaLabel:r.props.previousMonthAriaLabel,previousMonthButtonLabel:r.props.previousMonthButtonLabel,nextMonthAriaLabel:r.props.nextMonthAriaLabel,nextMonthButtonLabel:r.props.nextMonthButtonLabel,previousYearAriaLabel:r.props.previousYearAriaLabel,previousYearButtonLabel:r.props.previousYearButtonLabel,nextYearAriaLabel:r.props.nextYearAriaLabel,nextYearButtonLabel:r.props.nextYearButtonLabel,timeInputLabel:r.props.timeInputLabel,disabledKeyboardNavigation:r.props.disabledKeyboardNavigation,renderCustomHeader:r.props.renderCustomHeader,popperProps:r.props.popperProps,renderDayContents:r.props.renderDayContents,renderMonthContent:r.props.renderMonthContent,renderQuarterContent:r.props.renderQuarterContent,renderYearContent:r.props.renderYearContent,onDayMouseEnter:r.props.onDayMouseEnter,onMonthMouseLeave:r.props.onMonthMouseLeave,onYearMouseEnter:r.props.onYearMouseEnter,onYearMouseLeave:r.props.onYearMouseLeave,selectsDisabledDaysInRange:r.props.selectsDisabledDaysInRange,showTimeInput:r.props.showTimeInput,showMonthYearPicker:r.props.showMonthYearPicker,showFullMonthYearPicker:r.props.showFullMonthYearPicker,showTwoColumnMonthYearPicker:r.props.showTwoColumnMonthYearPicker,showFourColumnMonthYearPicker:r.props.showFourColumnMonthYearPicker,showYearPicker:r.props.showYearPicker,showQuarterYearPicker:r.props.showQuarterYearPicker,showWeekPicker:r.props.showWeekPicker,excludeScrollbar:r.props.excludeScrollbar,handleOnKeyDown:r.props.onKeyDown,handleOnDayKeyDown:r.onDayKeyDown,isInputFocused:r.state.focused,customTimeInput:r.props.customTimeInput,setPreSelection:r.setPreSelection,usePointerEvent:r.props.usePointerEvent,yearClassName:r.props.yearClassName},r.props.children)}),he(r,"renderAriaLiveRegion",function(){var a=r.props,i=a.dateFormat,o=a.locale,l=r.props.showTimeInput||r.props.showTimeSelect,c=l?"PPPPp":"PPPP",d;return r.props.selectsRange?d="Selected start date: ".concat(Ni(r.props.startDate,{dateFormat:c,locale:o}),". ").concat(r.props.endDate?"End date: "+Ni(r.props.endDate,{dateFormat:c,locale:o}):""):r.props.showTimeSelectOnly?d="Selected time: ".concat(Ni(r.props.selected,{dateFormat:i,locale:o})):r.props.showYearPicker?d="Selected year: ".concat(Ni(r.props.selected,{dateFormat:"yyyy",locale:o})):r.props.showMonthYearPicker?d="Selected month: ".concat(Ni(r.props.selected,{dateFormat:"MMMM yyyy",locale:o})):r.props.showQuarterYearPicker?d="Selected quarter: ".concat(Ni(r.props.selected,{dateFormat:"yyyy, QQQ",locale:o})):d="Selected date: ".concat(Ni(r.props.selected,{dateFormat:c,locale:o})),Q.createElement("span",{role:"alert","aria-live":"polite",className:"react-datepicker__aria-live"},d)}),he(r,"renderDateInput",function(){var a,i=rs(r.props.className,he({},qT,r.state.open)),o=r.props.customInput||Q.createElement("input",{type:"text"}),l=r.props.customInputRef||"ref",c=typeof r.props.value=="string"?r.props.value:typeof r.state.inputValue=="string"?r.state.inputValue:r.props.selectsRange?g2e(r.props.startDate,r.props.endDate,r.props):r.props.selectsMultiple?v2e(r.props.selectedDates,r.props):Ni(r.props.selected,r.props);return Q.cloneElement(o,(a={},he(he(he(he(he(he(he(he(he(he(a,l,function(d){r.input=d}),"value",c),"onBlur",r.handleBlur),"onChange",r.handleChange),"onClick",r.onInputClick),"onFocus",r.handleFocus),"onKeyDown",r.onInputKeyDown),"id",r.props.id),"name",r.props.name),"form",r.props.form),he(he(he(he(he(he(he(he(he(he(a,"autoFocus",r.props.autoFocus),"placeholder",r.props.placeholderText),"disabled",r.props.disabled),"autoComplete",r.props.autoComplete),"className",rs(o.props.className,i)),"title",r.props.title),"readOnly",r.props.readOnly),"required",r.props.required),"tabIndex",r.props.tabIndex),"aria-describedby",r.props.ariaDescribedBy),he(he(he(a,"aria-invalid",r.props.ariaInvalid),"aria-labelledby",r.props.ariaLabelledBy),"aria-required",r.props.ariaRequired)))}),he(r,"renderClearButton",function(){var a=r.props,i=a.isClearable,o=a.disabled,l=a.selected,c=a.startDate,d=a.endDate,u=a.clearButtonTitle,h=a.clearButtonClassName,f=h===void 0?"":h,p=a.ariaLabelClose,y=p===void 0?"Close":p,g=a.selectedDates;return i&&(l!=null||c!=null||d!=null||g!=null&&g.length)?Q.createElement("button",{type:"button",className:rs("react-datepicker__close-icon",f,{"react-datepicker__close-icon--disabled":o}),disabled:o,"aria-label":y,onClick:r.onClearClick,title:u,tabIndex:-1}):null}),r.state=r.calcInitialState(),r.preventFocusTimeout=null,r}return ws(t,e),bs(t,[{key:"componentDidMount",value:function(){window.addEventListener("scroll",this.onScroll,!0)}},{key:"componentDidUpdate",value:function(r,a){r.inline&&uje(r.selected,this.props.selected)&&this.setPreSelection(this.props.selected),this.state.monthSelectedIn!==void 0&&r.monthsShown!==this.props.monthsShown&&this.setState({monthSelectedIn:0}),r.highlightDates!==this.props.highlightDates&&this.setState({highlightDates:OT(this.props.highlightDates)}),!a.focused&&!hu(r.selected,this.props.selected)&&this.setState({inputValue:null}),a.open!==this.state.open&&(a.open===!1&&this.state.open===!0&&this.props.onCalendarOpen(),a.open===!0&&this.state.open===!1&&this.props.onCalendarClose())}},{key:"componentWillUnmount",value:function(){this.clearPreventFocusTimeout(),window.removeEventListener("scroll",this.onScroll,!0)}},{key:"renderInputContainer",value:function(){var r=this.props,a=r.showIcon,i=r.icon,o=r.calendarIconClassname,l=r.toggleCalendarOnIconClick,c=this.state.open;return Q.createElement("div",{className:"react-datepicker__input-container".concat(a?" react-datepicker__view-calendar-icon":"")},a&&Q.createElement(sje,Og({icon:i,className:"".concat(o," ").concat(c&&"react-datepicker-ignore-onclickoutside")},l?{onClick:this.toggleCalendar}:null)),this.state.isRenderAriaLiveMessage&&this.renderAriaLiveRegion(),this.renderDateInput(),this.renderClearButton())}},{key:"render",value:function(){var r=this.renderCalendar();if(this.props.inline)return r;if(this.props.withPortal){var a=this.state.open?Q.createElement(F$,{enableTabLoop:this.props.enableTabLoop},Q.createElement("div",{className:"react-datepicker__portal",tabIndex:-1,onKeyDown:this.onPortalKeyDown},r)):null;return this.state.open&&this.props.portalId&&(a=Q.createElement(O$,{portalId:this.props.portalId,portalHost:this.props.portalHost},a)),Q.createElement("div",null,this.renderInputContainer(),a)}return Q.createElement(cje,{className:this.props.popperClassName,wrapperClassName:this.props.wrapperClassName,hidePopper:!this.isCalendarOpen(),portalId:this.props.portalId,portalHost:this.props.portalHost,popperModifiers:this.props.popperModifiers,targetComponent:this.renderInputContainer(),popperContainer:this.props.popperContainer,popperComponent:r,popperPlacement:this.props.popperPlacement,popperProps:this.props.popperProps,popperOnKeyDown:this.onPopperKeyDown,enableTabLoop:this.props.enableTabLoop,showArrow:this.props.showPopperArrow})}}],[{key:"defaultProps",get:function(){return{allowSameDay:!1,dateFormat:"MM/dd/yyyy",dateFormatCalendar:"LLLL yyyy",onChange:function(){},disabled:!1,disabledKeyboardNavigation:!1,dropdownMode:"scroll",onFocus:function(){},onBlur:function(){},onKeyDown:function(){},onInputClick:function(){},onSelect:function(){},onClickOutside:function(){},onMonthChange:function(){},onCalendarOpen:function(){},onCalendarClose:function(){},preventOpenOnFocus:!1,onYearChange:function(){},onInputError:function(){},monthsShown:1,readOnly:!1,withPortal:!1,selectsDisabledDaysInRange:!1,shouldCloseOnSelect:!0,showTimeSelect:!1,showTimeInput:!1,showPreviousMonths:!1,showMonthYearPicker:!1,showFullMonthYearPicker:!1,showTwoColumnMonthYearPicker:!1,showFourColumnMonthYearPicker:!1,showYearPicker:!1,showQuarterYearPicker:!1,showWeekPicker:!1,strictParsing:!1,swapRange:!1,timeIntervals:30,timeCaption:"Time",previousMonthAriaLabel:"Previous Month",previousMonthButtonLabel:"Previous Month",nextMonthAriaLabel:"Next Month",nextMonthButtonLabel:"Next Month",previousYearAriaLabel:"Previous Year",previousYearButtonLabel:"Previous Year",nextYearAriaLabel:"Next Year",nextYearButtonLabel:"Next Year",timeInputLabel:"Time",enableTabLoop:!0,yearItemNumber:vv,focusSelectedMonth:!1,showPopperArrow:!0,excludeScrollbar:!0,customTimeInput:null,calendarStartDay:void 0,toggleCalendarOnIconClick:!1,usePointerEvent:!1}}}])}(Q.Component),hje="input",R2="navigate";const $$=({isOpen:e,onClose:t,initialData:n,jobs:r,employees:a})=>{const[i,o]=j.useState({jobId:"",employeeIds:[],title:"",startDate:new Date,endDate:new Date,duration:1,useDuration:!1,notes:"",status:"scheduled",predecessorId:null,predecessorLag:0}),[l,c]=j.useState([]),[d,u]=j.useState(!1),[h,f]=j.useState(""),{schedules:p,createSchedule:y,updateSchedule:g,checkForConflicts:x,hasCircularDependency:m}=nv();j.useEffect(()=>{n&&(n.id?(o({jobId:n.jobId||"",employeeIds:n.employeeIds||[],title:n.title||"",startDate:n.start||new Date,endDate:n.end||new Date,duration:n.duration||1,useDuration:n.useDuration||!1,notes:n.notes||"",status:n.status||"scheduled",predecessorId:n.predecessorId||null,predecessorLag:n.predecessorLag||0}),f(n.predecessorLag===0?"":String(n.predecessorLag||""))):o(P=>({...P,startDate:n.start||new Date,endDate:n.end||new Date})))},[n,e]);const v=P=>{if(P.preventDefault(),!i.jobId){pe({title:"Missing Information",description:"Please select a job.",variant:"destructive"});return}if(i.employeeIds.length===0){pe({title:"Missing Information",description:"Please select at least one employee.",variant:"destructive"});return}if(!i.title.trim()){pe({title:"Missing Information",description:"Please enter a title for this schedule.",variant:"destructive"});return}const D=x(i.employeeIds,i.startDate,i.endDate,n==null?void 0:n.id);if(D.length>0&&!d){c(D),u(!0);return}const N=A=>{if(A instanceof Date){const O=A.getFullYear(),W=String(A.getMonth()+1).padStart(2,"0"),z=String(A.getDate()).padStart(2,"0");return`${O}-${W}-${z}`}return A},M=A=>{if(A instanceof Date){const O=new Date(A);return O.setHours(12,0,0,0),O}return A};let L,T;if(i.useDuration&&i.predecessorId){const A=p.find(O=>O.id===i.predecessorId);if(A){const[O,W,z]=A.endDate.split("-").map(Number),F=new Date(O,W-1,z,12,0,0,0),V=i.predecessorLag||0,B=new Date(F);B.setDate(B.getDate()+V+1),L=N(B);const Y=new Date(B);Y.setDate(Y.getDate()+i.duration-1),T=N(Y)}else{const O=M(i.startDate),W=M(i.endDate);L=N(O),T=N(W)}}else if(i.useDuration){const A=M(i.startDate);L=N(A);const O=new Date(A);O.setDate(O.getDate()+i.duration-1),T=N(O)}else{const A=M(i.startDate),O=M(i.endDate);L=N(A),T=N(O)}const E={...i,startDate:L,endDate:T};n!=null&&n.id?g(n.id,E,()=>{t()}):y(E,()=>{t()})},b=(P,D)=>{o(N=>({...N,[P]:D})),d&&u(!1)},C=P=>{o(D=>{const N=[...D.employeeIds];return N.includes(P)?{...D,employeeIds:N.filter(M=>M!==P)}:{...D,employeeIds:[...N,P]}}),d&&u(!1)},S=P=>new Date(P).toLocaleDateString(void 0,{month:"short",day:"numeric",year:"numeric"});return s.jsx(Es,{children:s.jsxs(Er,{open:e,onOpenChange:t,children:[s.jsx(Pt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-40",onClick:t}),s.jsx(pr,{className:"fixed z-50 top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-white p-0 shadow-2xl rounded-xl w-[90vw] max-w-lg flex flex-col max-h-[90vh] overflow-y-auto",children:s.jsxs(Pt.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"h-full flex flex-col",children:[s.jsx(mr,{className:"p-6 border-b bg-gradient-to-r from-brandPrimary to-brandSecondary text-white rounded-t-lg",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(An,{className:"h-6 w-6"}),s.jsx(gr,{className:"text-2xl font-bold",children:n!=null&&n.id?"Edit Schedule":"Create New Schedule"})]})}),s.jsxs("form",{onSubmit:v,children:[s.jsxs("div",{className:"p-6 space-y-4",children:[d&&l.length>0&&s.jsx("div",{className:"p-4 bg-yellow-50 border border-yellow-300 rounded-lg",children:s.jsxs("div",{className:"flex items-start space-x-2",children:[s.jsx(co,{className:"h-5 w-5 text-yellow-600 mt-0.5"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-yellow-800",children:"Scheduling Conflicts Detected"}),s.jsx("p",{className:"text-sm text-yellow-700 mb-2",children:"The following employees already have assignments during this time period:"}),s.jsx("ul",{className:"text-sm space-y-1",children:l.map((P,D)=>{const N=a.find(L=>L.id===P.employeeId),M=r.find(L=>L.id===P.conflictingSchedule.jobId);return s.jsxs("li",{className:"text-yellow-800",children:[s.jsxs("span",{className:"font-medium",children:[N==null?void 0:N.firstName," ",N==null?void 0:N.lastName]})," -",(M==null?void 0:M.jobName)||"Unknown Job"," (",S(P.conflictingSchedule.startDate)," -",S(P.conflictingSchedule.endDate),")"]},D)})}),s.jsxs("div",{className:"mt-3 flex justify-end space-x-2",children:[s.jsxs(se,{type:"button",variant:"outline",size:"sm",onClick:()=>u(!1),className:"border-yellow-500 text-yellow-600 hover:bg-yellow-50",children:[s.jsx(rn,{className:"h-4 w-4 mr-1"}),"Adjust Schedule"]}),s.jsxs(se,{type:"button",size:"sm",onClick:v,className:"bg-yellow-500 text-white hover:bg-yellow-600",children:[s.jsx(Gg,{className:"h-4 w-4 mr-1"}),"Schedule Anyway"]})]})]})]})}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"title",className:"text-sm font-semibold text-gray-700",children:"Schedule Title *"}),s.jsx($e,{id:"title",value:i.title,onChange:P=>b("title",P.target.value),placeholder:"e.g., Hanging Phase 1, Finishing Bedrooms",className:"border-2 focus:border-brandPrimary transition-colors"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{className:"text-sm font-semibold text-gray-700",children:"Select Job *"}),s.jsxs(st,{value:i.jobId,onValueChange:P=>b("jobId",P),children:[s.jsx(nt,{className:"border-2 focus:border-brandPrimary",children:s.jsx(at,{placeholder:"Choose job..."})}),s.jsx(rt,{children:r.map(P=>s.jsx(xe,{value:P.id,children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Vo,{className:"h-4 w-4"}),s.jsx("span",{children:P.jobName})]})},P.id))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{className:"text-sm font-semibold text-gray-700",children:"Predecessor Schedule (Optional)"}),s.jsxs(st,{value:i.predecessorId||"none",onValueChange:P=>{const D=P==="none"?null:P;if(D&&(n!=null&&n.id)&&m(n.id,D)){pe({title:"Circular Dependency Detected",description:"This would create a circular dependency. Please choose a different predecessor.",variant:"destructive"});return}b("predecessorId",D)},children:[s.jsx(nt,{className:"border-2 focus:border-brandPrimary",children:s.jsx(at,{placeholder:"Select predecessor schedule..."})}),s.jsxs(rt,{children:[s.jsx(xe,{value:"none",children:"No Predecessor"}),r.map(P=>{const D=p.filter(N=>N.jobId===P.id&&N.id!==(n==null?void 0:n.id));return D.length===0?null:s.jsxs("div",{children:[s.jsx("div",{className:"px-2 py-1 text-xs font-semibold text-gray-500 uppercase tracking-wide",children:P.jobName}),D.map(N=>s.jsx(xe,{value:N.id,children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(An,{className:"h-4 w-4"}),s.jsx("span",{children:N.title}),s.jsxs("span",{className:"text-xs text-gray-500",children:["(",new Date(N.startDate).toLocaleDateString(),")"]})]})},N.id))]},P.id)})]})]}),i.predecessorId&&s.jsxs("div",{className:"space-y-2",children:[s.jsx("p",{className:"text-xs text-gray-600",children:"This schedule will automatically adjust when the predecessor schedule is moved."}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{className:"text-sm font-semibold text-gray-700",children:"Lag Days"}),s.jsx("input",{type:"text",value:h,onChange:P=>{const D=P.target.value;if(f(D),D===""||D==="-")b("predecessorLag",0);else if(/^-?\d+$/.test(D)){const N=parseInt(D);N>=-30&&N<=30&&b("predecessorLag",N)}},onBlur:()=>{(h===""||h==="-")&&(f(""),b("predecessorLag",0))},placeholder:"0",className:"flex h-10 w-full rounded-md border-2 border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 focus:border-brandPrimary"}),s.jsxs("p",{className:"text-xs text-gray-600",children:[i.predecessorLag===0&&"Start the day after predecessor completes",i.predecessorLag===1&&"Start 1 day after predecessor completes",i.predecessorLag===-1&&"Start on the same day predecessor completes",i.predecessorLag>1&&`Start ${i.predecessorLag} days after predecessor completes`,i.predecessorLag<-1&&`Start ${Math.abs(i.predecessorLag)} days before predecessor completes`]})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{className:"text-sm font-semibold text-gray-700",children:"Assign Employees *"}),s.jsx("div",{className:"border-2 rounded-md p-2 max-h-40 overflow-y-auto",children:a.map(P=>s.jsxs("div",{className:`flex items-center space-x-2 p-2 rounded-md cursor-pointer mb-1 ${i.employeeIds.includes(P.id)?"bg-brandSecondary/10 border border-brandSecondary/20":"hover:bg-gray-100"}`,onClick:()=>C(P.id),children:[s.jsx("input",{type:"checkbox",checked:i.employeeIds.includes(P.id),onChange:()=>{},className:"h-4 w-4 text-brandSecondary"}),s.jsxs("div",{children:[s.jsxs("p",{className:"font-medium",children:[P.firstName," ",P.lastName]}),s.jsx("p",{className:"text-xs text-gray-500",children:P.role})]})]},P.id))})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{className:"text-sm font-semibold text-gray-700",children:"Scheduling Method"}),s.jsxs("div",{className:"flex space-x-4",children:[s.jsxs("label",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"radio",name:"schedulingMethod",checked:!i.useDuration,onChange:()=>b("useDuration",!1),className:"text-brandPrimary"}),s.jsx("span",{className:"text-sm",children:"Manual Start/End Dates"})]}),s.jsxs("label",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"radio",name:"schedulingMethod",checked:i.useDuration,onChange:()=>b("useDuration",!0),className:"text-brandPrimary"}),s.jsx("span",{className:"text-sm",children:"Duration-based"})]})]})]}),i.useDuration?s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{className:"text-sm font-semibold text-gray-700",children:"Start Date *"}),s.jsxs("div",{className:"relative",children:[s.jsx(A0,{selected:i.startDate,onChange:P=>b("startDate",P),dateFormat:"MMMM d, yyyy",className:"w-full border-2 rounded-md p-2 focus:border-brandPrimary transition-colors",disabled:i.predecessorId!==null}),s.jsx(An,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400 pointer-events-none"}),i.predecessorId&&s.jsx("p",{className:"text-xs text-blue-600 mt-1",children:"Start date will be calculated automatically based on predecessor"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{className:"text-sm font-semibold text-gray-700",children:"Duration (Days) *"}),s.jsx($e,{type:"number",min:"1",max:"365",value:i.duration,onChange:P=>b("duration",parseInt(P.target.value)||1),className:"border-2 focus:border-brandPrimary"})]})]}):s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{className:"text-sm font-semibold text-gray-700",children:"Start Date *"}),s.jsxs("div",{className:"relative",children:[s.jsx(A0,{selected:i.startDate,onChange:P=>b("startDate",P),dateFormat:"MMMM d, yyyy",className:"w-full border-2 rounded-md p-2 focus:border-brandPrimary transition-colors",disabled:i.predecessorId!==null}),s.jsx(An,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400 pointer-events-none"}),i.predecessorId&&s.jsx("p",{className:"text-xs text-blue-600 mt-1",children:"Start date will be calculated automatically based on predecessor"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{className:"text-sm font-semibold text-gray-700",children:"End Date *"}),s.jsxs("div",{className:"relative",children:[s.jsx(A0,{selected:i.endDate,onChange:P=>b("endDate",P),dateFormat:"MMMM d, yyyy",className:"w-full border-2 rounded-md p-2 focus:border-brandPrimary transition-colors",minDate:i.startDate,disabled:i.predecessorId!==null}),s.jsx(An,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400 pointer-events-none"}),i.predecessorId&&s.jsx("p",{className:"text-xs text-blue-600 mt-1",children:"End date will be calculated automatically based on predecessor"})]})]})]}),i.predecessorId&&s.jsxs("div",{className:"p-3 bg-green-50 border border-green-200 rounded-lg",children:[s.jsx("p",{className:"text-sm text-green-800",children:s.jsx("strong",{children:"Predecessor Schedule Preview:"})}),(()=>{const P=p.find(D=>D.id===i.predecessorId);if(P){const[D,N,M]=P.endDate.split("-").map(Number),L=new Date(D,N-1,M,12,0,0,0),T=i.predecessorLag||0,E=new Date(L);E.setDate(E.getDate()+T+1);let A;return i.useDuration&&i.duration?(A=new Date(E),A.setDate(A.getDate()+i.duration-1)):(A=new Date(E),A.setDate(A.getDate()+1)),s.jsxs("div",{className:"mt-2 space-y-1",children:[s.jsxs("p",{className:"text-xs text-green-700",children:[s.jsx("strong",{children:"Predecessor ends:"})," ",L.toLocaleDateString()]}),s.jsxs("p",{className:"text-xs text-green-700",children:[s.jsx("strong",{children:"Lag:"})," ",T," day",T!==1?"s":""]}),s.jsxs("p",{className:"text-xs text-green-700",children:[s.jsx("strong",{children:"This schedule will start:"})," ",E.toLocaleDateString()]}),s.jsxs("p",{className:"text-xs text-green-700",children:[s.jsx("strong",{children:"This schedule will end:"})," ",A.toLocaleDateString()]})]})}return s.jsx("p",{className:"text-xs text-green-700",children:"Calculating..."})})()]}),i.useDuration&&!i.predecessorId&&s.jsx("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg",children:s.jsxs("p",{className:"text-sm text-blue-800",children:[s.jsx("strong",{children:"Calculated End Date:"})," ",i.startDate instanceof Date?new Date(i.startDate.getTime()+(i.duration-1)*24*60*60*1e3).toLocaleDateString():"Select start date"]})}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{className:"text-sm font-semibold text-gray-700",children:"Status"}),s.jsxs(st,{value:i.status,onValueChange:P=>b("status",P),children:[s.jsx(nt,{className:"border-2 focus:border-brandPrimary",children:s.jsx(at,{})}),s.jsxs(rt,{children:[s.jsx(xe,{value:"scheduled",children:"Scheduled"}),s.jsx(xe,{value:"in-progress",children:"In Progress"}),s.jsx(xe,{value:"completed",children:"Completed"}),s.jsx(xe,{value:"cancelled",children:"Cancelled"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"notes",className:"text-sm font-semibold text-gray-700",children:"Notes (Optional)"}),s.jsx(_n,{id:"notes",value:i.notes,onChange:P=>b("notes",P.target.value),placeholder:"Add any notes about this schedule...",className:"border-2 focus:border-brandPrimary transition-colors min-h-[80px]"})]})]}),s.jsxs(Tr,{className:"p-6 border-t bg-gray-50 rounded-b-lg",children:[s.jsxs(se,{type:"button",variant:"outline",onClick:t,className:"hover:bg-gray-100",children:[s.jsx(rn,{className:"h-4 w-4 mr-2"})," Cancel"]}),s.jsxs(se,{type:"submit",className:"bg-gradient-to-r from-brandPrimary to-brandSecondary text-white hover:opacity-90",children:[s.jsx(Qn,{className:"h-4 w-4 mr-2"}),n!=null&&n.id?"Update Schedule":"Create Schedule"]})]})]})]})})]})})},B$=({isOpen:e,onClose:t,schedule:n,jobs:r,employees:a,onEdit:i})=>{var x;const{schedules:o,updateSchedule:l,deleteSchedule:c,getDependentSchedules:d}=nv();if(!n)return null;const u=r.find(m=>m.id===n.jobId)||{},h=n.employeeIds.map(m=>a.find(v=>v.id===m)).filter(Boolean),f=m=>Fi(new Date(m),"MMMM d, yyyy"),p=m=>{switch(m){case"completed":return s.jsxs(ht,{className:"bg-green-100 text-green-800 border-green-200 flex items-center space-x-1",children:[s.jsx(Br,{className:"h-3 w-3"}),s.jsx("span",{children:"Completed"})]});case"in-progress":return s.jsxs(ht,{className:"bg-yellow-100 text-yellow-800 border-yellow-200 flex items-center space-x-1",children:[s.jsx(Wj,{className:"h-3 w-3"}),s.jsx("span",{children:"In Progress"})]});case"cancelled":return s.jsxs(ht,{className:"bg-red-100 text-red-800 border-red-200 flex items-center space-x-1",children:[s.jsx(Au,{className:"h-3 w-3"}),s.jsx("span",{children:"Cancelled"})]});default:return s.jsxs(ht,{className:"bg-blue-100 text-blue-800 border-blue-200 flex items-center space-x-1",children:[s.jsx(An,{className:"h-3 w-3"}),s.jsx("span",{children:"Scheduled"})]})}},y=m=>{l(n.id,{status:m})},g=()=>{c(n.id,()=>{t()})};return s.jsx(Es,{children:s.jsxs(Er,{open:e,onOpenChange:t,children:[s.jsx(Pt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-40",onClick:t}),s.jsx(pr,{className:"fixed z-50 top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-white p-0 shadow-2xl rounded-xl w-[90vw] max-w-lg flex flex-col",children:s.jsxs(Pt.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"h-full flex flex-col",children:[s.jsx(mr,{className:"p-6 border-b bg-gradient-to-r from-brandPrimary to-brandSecondary text-white rounded-t-lg",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(An,{className:"h-6 w-6"}),s.jsx(gr,{className:"text-2xl font-bold",children:n.title})]}),s.jsx("div",{className:"flex items-center space-x-2",children:p(n.status)})]})}),s.jsxs("div",{className:"p-6 space-y-4",children:[s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(Vo,{className:"h-5 w-5 text-brandPrimary mt-0.5"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Job"}),s.jsx("p",{className:"font-semibold text-gray-900",children:u.jobName||"Unknown Job"})]})]}),s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(An,{className:"h-5 w-5 text-brandSecondary mt-0.5"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Start Date"}),s.jsx("p",{className:"font-semibold text-gray-900",children:f(n.start)})]})]}),s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(kn,{className:"h-5 w-5 text-brandSecondary mt-0.5"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"End Date"}),s.jsx("p",{className:"font-semibold text-gray-900",children:f(n.end)})]})]}),s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(vr,{className:"h-5 w-5 text-brandPrimary mt-0.5"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Assigned Employees"}),s.jsx("div",{className:"mt-1 space-y-1",children:h.length>0?h.map(m=>s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(ht,{variant:"outline",className:"text-xs",children:m.role}),s.jsxs("p",{className:"font-medium text-gray-900",children:[m.firstName," ",m.lastName]})]},m.id)):s.jsx("p",{className:"text-gray-500 italic",children:"No employees assigned"})})]})]}),n.notes&&s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(tn,{className:"h-5 w-5 text-gray-500 mt-0.5"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Notes"}),s.jsx("p",{className:"text-gray-700 bg-gray-50 p-3 rounded-md mt-1",children:n.notes})]})]}),n.predecessorId&&s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(TM,{className:"h-5 w-5 text-blue-600 mt-0.5"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Depends on"}),s.jsx("p",{className:"font-semibold text-blue-600",children:((x=o.find(m=>m.id===n.predecessorId))==null?void 0:x.title)||"Unknown Schedule"})]})]}),(()=>{const m=d(n.id);return m.length>0?s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(Rm,{className:"h-5 w-5 text-green-600 mt-0.5"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Leads to"}),s.jsx("div",{className:"space-y-1",children:m.map(v=>s.jsx("p",{className:"font-semibold text-green-600",children:v.title},v.id))})]})]}):null})(),s.jsxs("div",{className:"pt-4 border-t",children:[s.jsx("p",{className:"text-sm text-gray-500 mb-2",children:"Update Status"}),s.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.jsxs(se,{variant:"outline",size:"sm",onClick:()=>y("scheduled"),className:`${n.status==="scheduled"?"bg-blue-100 border-blue-300":""}`,children:[s.jsx(An,{className:"h-3.5 w-3.5 mr-1"}),"Scheduled"]}),s.jsxs(se,{variant:"outline",size:"sm",onClick:()=>y("in-progress"),className:`${n.status==="in-progress"?"bg-yellow-100 border-yellow-300":""}`,children:[s.jsx(Wj,{className:"h-3.5 w-3.5 mr-1"}),"In Progress"]}),s.jsxs(se,{variant:"outline",size:"sm",onClick:()=>y("completed"),className:`${n.status==="completed"?"bg-green-100 border-green-300":""}`,children:[s.jsx(Br,{className:"h-3.5 w-3.5 mr-1"}),"Completed"]}),s.jsxs(se,{variant:"outline",size:"sm",onClick:()=>y("cancelled"),className:`${n.status==="cancelled"?"bg-red-100 border-red-300":""}`,children:[s.jsx(Au,{className:"h-3.5 w-3.5 mr-1"}),"Cancelled"]})]})]})]}),s.jsx(Tr,{className:"p-6 border-t bg-gray-50 rounded-b-lg",children:s.jsxs("div",{className:"flex justify-between w-full",children:[s.jsxs(yr,{children:[s.jsx(br,{asChild:!0,children:s.jsxs(se,{variant:"outline",className:"border-red-500 text-red-500 hover:bg-red-50",children:[s.jsx(Kt,{className:"h-4 w-4 mr-2"})," Delete"]})}),s.jsxs(er,{children:[s.jsxs(tr,{children:[s.jsx(rr,{children:"Delete Schedule"}),s.jsx(sr,{children:"Are you sure you want to delete this schedule? This action cannot be undone."})]}),s.jsxs(nr,{children:[s.jsx(ir,{children:"Cancel"}),s.jsx(ar,{onClick:g,className:"bg-red-600 hover:bg-red-700",children:"Delete"})]})]})]}),s.jsxs("div",{className:"space-x-2",children:[s.jsxs(se,{onClick:()=>{i(n),t()},className:"bg-brandPrimary hover:bg-brandPrimary/90 text-white",children:[s.jsx(Ai,{className:"h-4 w-4 mr-2"})," Edit"]}),s.jsxs(se,{variant:"outline",onClick:t,className:"hover:bg-gray-100",children:[s.jsx(rn,{className:"h-4 w-4 mr-2"})," Close"]})]})]})})]})})]})})},zy="hsh_drywall_schedule_templates",z$=(e,t)=>{try{localStorage.setItem(e,JSON.stringify(t))}catch(n){console.error("Failed to save to localStorage:",n)}},W$=(e,t=null)=>{try{const n=localStorage.getItem(e);return n?JSON.parse(n):t}catch(n){return console.error("Failed to load from localStorage:",n),t}},H$=()=>Date.now().toString(36)+Math.random().toString(36).substr(2),VT=()=>[{id:"standard-residential",name:"Standard Residential Drywall",description:"Typical residential drywall installation workflow",jobType:"residential",estimatedDuration:11,phases:[{id:"stock",name:"Stock",description:"Material delivery and organization",duration:1,tasks:[]},{id:"scaffold-prep",name:"Scaffold/Prep",description:"Site preparation and scaffolding setup",duration:1,tasks:[]},{id:"hanging",name:"Hanging",description:"Install drywall sheets",duration:3,tasks:[]},{id:"paper-floors",name:"Paper Floors",description:"Apply paper protection to floors",duration:1,tasks:[]},{id:"finish",name:"Finish",description:"Taping, mudding, and finishing work",duration:5,tasks:[]},{id:"cleanout",name:"Cleanout",description:"Final cleanup and site preparation for next trade",duration:1,tasks:[]}]},{id:"commercial-multi-unit",name:"Commercial Multi-Unit",description:"Commercial multi-unit building drywall installation",jobType:"commercial",estimatedDuration:8,phases:[{id:"planning",name:"Planning & Coordination",description:"Project planning and coordination",duration:1,tasks:[]},{id:"prep",name:"Preparation",description:"Site preparation and setup",duration:1,tasks:[]},{id:"hanging",name:"Hanging",description:"Install drywall sheets",duration:3,tasks:[]},{id:"finishing",name:"Finishing",description:"Taping, mudding, and final touches",duration:3,tasks:[]}]}],fje=()=>(W$(zy,[]),z$(zy,VT()),VT()),Cb=()=>(fje(),W$(zy,[])),cP=e=>{z$(zy,e)},pje=e=>{const t=Cb(),n={id:H$(),...e,createdAt:new Date().toISOString()};return t.push(n),cP(t),n},q$=()=>Cb(),mje=(e,t)=>{const n=Cb(),r=n.findIndex(a=>a.id===e);return r!==-1?(n[r]={...n[r],...t,updatedAt:new Date().toISOString()},cP(n),n[r]):null},gje=e=>{const n=Cb().filter(r=>r.id!==e);cP(n)},vje=(e,t,n,r)=>{const a=[];let i=new Date(n);return e.phases.forEach((o,l)=>{const c={id:H$(),jobId:t,employeeIds:r,title:`${e.name} - ${o.name}`,startDate:new Date(i).toISOString().split("T")[0],endDate:new Date(i.getTime()+(o.duration-1)*24*60*60*1e3).toISOString().split("T")[0],duration:o.duration,notes:`${e.description}

Phase: ${o.name}
${o.description}`,status:"scheduled",predecessorId:l>0?a[a.length-1].id:null,predecessorLag:0,templateId:e.id,phaseId:o.id};a.push(c),i.setDate(i.getDate()+o.duration)}),a},V$=({isOpen:e,onClose:t,jobs:n,employees:r,onSchedulesCreated:a,onManageTemplates:i})=>{const[o,l]=j.useState([]),[c,d]=j.useState(null),[u,h]=j.useState(""),[f,p]=j.useState(new Date),[y,g]=j.useState(!1);j.useEffect(()=>{if(e){const b=q$();l(b)}},[e]);const x=async()=>{if(!c){pe({title:"Missing Template",description:"Please select a template.",variant:"destructive"});return}if(!u){pe({title:"Missing Job",description:"Please select a job.",variant:"destructive"});return}g(!0);try{const b=vje(c,u,f,[]);await a(b),pe({title:"Schedules Created",description:`Created ${b.length} schedule entries from template "${c.name}"`}),d(null),h(""),p(new Date),t()}catch{pe({title:"Error",description:"Failed to create schedules. Please try again.",variant:"destructive"})}finally{g(!1)}},m=b=>{switch(b){case"residential":return s.jsx(Vo,{className:"h-4 w-4"});case"commercial":return s.jsx(or,{className:"h-4 w-4"});default:return s.jsx(Vo,{className:"h-4 w-4"})}},v=b=>{switch(b){case"residential":return"bg-blue-100 text-blue-800 border-blue-200";case"commercial":return"bg-purple-100 text-purple-800 border-purple-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}};return s.jsx(Er,{open:e,onOpenChange:t,children:s.jsxs(pr,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[s.jsx(mr,{children:s.jsxs(gr,{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(tn,{className:"h-5 w-5 mr-2"}),"Create Schedule from Template"]}),i&&s.jsxs(se,{onClick:i,variant:"outline",size:"sm",className:"border-brandPrimary text-brandPrimary hover:bg-brandPrimary hover:text-white",children:[s.jsx(ad,{className:"h-4 w-4 mr-2"}),"Manage Templates"]})]})}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx(de,{className:"text-sm font-medium",children:"Select Template"}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-2",children:o.map(b=>s.jsxs(Te,{className:`cursor-pointer transition-all hover:shadow-md ${(c==null?void 0:c.id)===b.id?"ring-2 ring-brandPrimary bg-brandPrimary/5":"hover:bg-gray-50"}`,onClick:()=>d(b),children:[s.jsxs(Xe,{className:"pb-3",children:[s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[m(b.jobType),s.jsx(Qe,{className:"text-lg",children:b.name})]}),(c==null?void 0:c.id)===b.id&&s.jsx(Gg,{className:"h-5 w-5 text-brandPrimary"})]}),s.jsx(ht,{className:`w-fit ${v(b.jobType)}`,children:b.jobType})]}),s.jsxs(Me,{className:"pt-0",children:[s.jsx("p",{className:"text-sm text-gray-600 mb-3",children:b.description}),s.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(kn,{className:"h-4 w-4"}),s.jsxs("span",{children:[b.estimatedDuration," days"]})]}),s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(tn,{className:"h-4 w-4"}),s.jsxs("span",{children:[b.phases.length," phases"]})]})]})]})]},b.id))})]}),s.jsxs("div",{children:[s.jsx(de,{className:"text-sm font-medium",children:"Select Job"}),s.jsxs(st,{value:u,onValueChange:h,children:[s.jsx(nt,{className:"mt-2",children:s.jsx(at,{placeholder:"Choose a job"})}),s.jsx(rt,{children:n.filter(b=>b.status==="active").map(b=>s.jsx(xe,{value:b.id,children:b.jobName},b.id))})]})]}),s.jsxs("div",{children:[s.jsx(de,{className:"text-sm font-medium",children:"Start Date"}),s.jsx(A0,{selected:f,onChange:b=>p(b),className:"w-full mt-2 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-brandPrimary",dateFormat:"MMM d, yyyy",minDate:new Date})]}),c&&s.jsxs("div",{children:[s.jsx(de,{className:"text-sm font-medium",children:"Template Preview"}),s.jsx(Te,{className:"mt-2",children:s.jsx(Me,{className:"pt-4",children:s.jsx("div",{className:"space-y-3",children:c.phases.map((b,C)=>s.jsx("div",{className:"border-l-2 border-brandPrimary pl-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium",children:b.name}),s.jsx("p",{className:"text-sm text-gray-600",children:b.description})]}),s.jsxs(ht,{variant:"outline",children:[b.duration," day",b.duration!==1?"s":""]})]})},b.id))})})})]})]}),s.jsxs(Tr,{children:[s.jsx(se,{variant:"outline",onClick:t,children:"Cancel"}),s.jsx(se,{onClick:x,disabled:!c||!u||y,className:"bg-gradient-to-r from-brandPrimary to-brandSecondary text-white",children:y?"Creating...":"Create Schedules"})]})]})})},U$=({isOpen:e,onClose:t,onTemplatesUpdated:n})=>{const[r,a]=j.useState([]),[i,o]=j.useState(null),[l,c]=j.useState(!1),[d,u]=j.useState({name:"",description:"",jobType:"residential",estimatedDuration:1,phases:[]}),[h,f]=j.useState(null),[p,y]=j.useState({name:"",description:"",duration:1,tasks:[]});j.useState(null);const[g,x]=j.useState({name:"",description:"",priority:"medium"});j.useEffect(()=>{if(e){const A=q$();a(A)}},[e]);const m=()=>{if(!d.name||!d.description){pe({title:"Missing Information",description:"Please fill in template name and description.",variant:"destructive"});return}if(d.phases.length===0){pe({title:"No Phases",description:"Please add at least one phase to the template.",variant:"destructive"});return}const A=pje(d);a([...r,A]),u({name:"",description:"",jobType:"residential",estimatedDuration:1,phases:[]}),c(!1),n==null||n(),pe({title:"Template Created",description:`Template "${A.name}" has been created successfully.`})},v=()=>{if(!i)return;if(!d.name||!d.description){pe({title:"Missing Information",description:"Please fill in template name and description.",variant:"destructive"});return}const A=mje(i.id,d);A&&(a(r.map(O=>O.id===i.id?A:O)),o(null),u({name:"",description:"",jobType:"residential",estimatedDuration:1,phases:[]}),n==null||n(),pe({title:"Template Updated",description:`Template "${A.name}" has been updated successfully.`}))},b=A=>{const O=r.find(W=>W.id===A);gje(A),a(r.filter(W=>W.id!==A)),n==null||n(),pe({title:"Template Deleted",description:`Template "${O==null?void 0:O.name}" has been deleted.`})},C=A=>{o(A),u({name:A.name,description:A.description,jobType:A.jobType,estimatedDuration:A.estimatedDuration,phases:[...A.phases]}),c(!0)},S=()=>{if(!p.name){pe({title:"Missing Phase Name",description:"Please enter a phase name.",variant:"destructive"});return}const A={id:`phase_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,name:p.name,description:p.description,duration:parseInt(p.duration),tasks:p.tasks};u({...d,phases:[...d.phases,A],estimatedDuration:d.estimatedDuration+A.duration}),y({name:"",description:"",duration:1,tasks:[]})},P=A=>{const O=d.phases.find(W=>W.id===A);u({...d,phases:d.phases.filter(W=>W.id!==A),estimatedDuration:d.estimatedDuration-((O==null?void 0:O.duration)||0)})},D=()=>{if(!g.name){pe({title:"Missing Task Name",description:"Please enter a task name.",variant:"destructive"});return}const A={id:`task_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,name:g.name,description:g.description,priority:g.priority};y({...p,tasks:[...p.tasks,A]}),x({name:"",description:"",priority:"medium"})},N=A=>{y({...p,tasks:p.tasks.filter(O=>O.id!==A)})},M=A=>{switch(A){case"residential":return s.jsx(Vo,{className:"h-4 w-4"});case"commercial":return s.jsx(or,{className:"h-4 w-4"});default:return s.jsx(Vo,{className:"h-4 w-4"})}},L=A=>{switch(A){case"residential":return"bg-blue-100 text-blue-800 border-blue-200";case"commercial":return"bg-purple-100 text-purple-800 border-purple-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},T=A=>{switch(A){case"high":return"text-red-600 bg-red-50 border-red-200";case"medium":return"text-yellow-600 bg-yellow-50 border-yellow-200";case"low":return"text-green-600 bg-green-50 border-green-200";default:return"text-gray-600 bg-gray-50 border-gray-200"}},E=A=>{switch(A){case"high":return s.jsx(co,{className:"h-3 w-3"});case"medium":return s.jsx(kn,{className:"h-3 w-3"});case"low":return s.jsx(Gg,{className:"h-3 w-3"});default:return s.jsx(kn,{className:"h-3 w-3"})}};return s.jsx(Er,{open:e,onOpenChange:t,children:s.jsxs(pr,{className:"max-w-6xl max-h-[90vh] overflow-y-auto",children:[s.jsx(mr,{children:s.jsxs(gr,{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(tn,{className:"h-5 w-5 mr-2"}),"Manage Schedule Templates"]}),s.jsxs(se,{onClick:()=>{c(!0),o(null),u({name:"",description:"",jobType:"residential",estimatedDuration:1,phases:[]})},className:"bg-gradient-to-r from-brandPrimary to-brandSecondary text-white",children:[s.jsx(un,{className:"h-4 w-4 mr-2"}),"New Template"]})]})}),s.jsx("div",{className:"space-y-6",children:l?s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"template-name",children:"Template Name *"}),s.jsx($e,{id:"template-name",value:d.name,onChange:A=>u({...d,name:A.target.value}),placeholder:"e.g., Standard Residential Drywall"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"template-type",children:"Job Type"}),s.jsxs(st,{value:d.jobType,onValueChange:A=>u({...d,jobType:A}),children:[s.jsx(nt,{children:s.jsx(at,{})}),s.jsxs(rt,{children:[s.jsx(xe,{value:"residential",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Vo,{className:"h-4 w-4"}),s.jsx("span",{children:"Residential"})]})}),s.jsx(xe,{value:"commercial",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(or,{className:"h-4 w-4"}),s.jsx("span",{children:"Commercial"})]})})]})]})]}),s.jsxs("div",{className:"space-y-2 md:col-span-2",children:[s.jsx(de,{htmlFor:"template-description",children:"Description *"}),s.jsx(_n,{id:"template-description",value:d.description,onChange:A=>u({...d,description:A.target.value}),placeholder:"Describe what this template is for...",rows:3})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Phases"}),s.jsxs(se,{onClick:()=>f("new"),className:"bg-brandPrimary hover:bg-brandPrimary/90 text-white",children:[s.jsx(un,{className:"h-4 w-4 mr-2"}),"Add Phase"]})]}),d.phases.length>0&&s.jsx("div",{className:"space-y-3",children:d.phases.map((A,O)=>s.jsxs(Te,{className:"border-l-4 border-l-brandPrimary",children:[s.jsx(Xe,{className:"pb-3",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs("h4",{className:"font-semibold",children:["Phase ",O+1,": ",A.name]}),s.jsx("p",{className:"text-sm text-gray-600",children:A.description})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs(ht,{variant:"outline",className:"flex items-center space-x-1",children:[s.jsx(kn,{className:"h-3 w-3"}),s.jsxs("span",{children:[A.duration," days"]})]}),s.jsx(se,{variant:"ghost",size:"sm",onClick:()=>P(A.id),children:s.jsx(Kt,{className:"h-4 w-4 text-red-500"})})]})]})}),A.tasks.length>0&&s.jsx(Me,{className:"pt-0",children:s.jsx("div",{className:"space-y-2",children:A.tasks.map(W=>s.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-medium text-sm",children:W.name}),W.description&&s.jsx("p",{className:"text-xs text-gray-500",children:W.description})]}),s.jsxs(ht,{className:T(W.priority),children:[E(W.priority),s.jsx("span",{className:"ml-1 capitalize",children:W.priority})]})]},W.id))})})]},A.id))}),h&&s.jsxs(Te,{className:"border-2 border-brandPrimary/20 bg-brandPrimary/5",children:[s.jsx(Xe,{children:s.jsx("h4",{className:"font-semibold",children:"Add New Phase"})}),s.jsxs(Me,{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"phase-name",children:"Phase Name *"}),s.jsx($e,{id:"phase-name",value:p.name,onChange:A=>y({...p,name:A.target.value}),placeholder:"e.g., Preparation"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"phase-duration",children:"Duration (days)"}),s.jsx($e,{id:"phase-duration",type:"number",min:"1",value:p.duration,onChange:A=>y({...p,duration:A.target.value})})]}),s.jsxs("div",{className:"space-y-2 md:col-span-2",children:[s.jsx(de,{htmlFor:"phase-description",children:"Description"}),s.jsx(_n,{id:"phase-description",value:p.description,onChange:A=>y({...p,description:A.target.value}),placeholder:"Describe what this phase involves...",rows:2})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h5",{className:"font-medium",children:"Tasks"}),s.jsxs(se,{onClick:D,size:"sm",className:"bg-brandPrimary hover:bg-brandPrimary/90 text-white",children:[s.jsx(un,{className:"h-3 w-3 mr-1"}),"Add Task"]})]}),p.tasks.length>0&&s.jsx("div",{className:"space-y-2",children:p.tasks.map(A=>s.jsxs("div",{className:"flex items-center justify-between p-2 bg-white border rounded",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-medium text-sm",children:A.name}),A.description&&s.jsx("p",{className:"text-xs text-gray-500",children:A.description})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs(ht,{className:T(A.priority),children:[E(A.priority),s.jsx("span",{className:"ml-1 capitalize",children:A.priority})]}),s.jsx(se,{variant:"ghost",size:"sm",onClick:()=>N(A.id),children:s.jsx(Kt,{className:"h-4 w-4 text-red-500"})})]})]},A.id))}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 p-4 border rounded-lg bg-white",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"task-name",children:"Task Name *"}),s.jsx($e,{id:"task-name",value:g.name,onChange:A=>x({...g,name:A.target.value}),placeholder:"e.g., Site inspection"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"task-priority",children:"Priority"}),s.jsxs(st,{value:g.priority,onValueChange:A=>x({...g,priority:A}),children:[s.jsx(nt,{children:s.jsx(at,{})}),s.jsxs(rt,{children:[s.jsx(xe,{value:"high",children:"High"}),s.jsx(xe,{value:"medium",children:"Medium"}),s.jsx(xe,{value:"low",children:"Low"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"task-description",children:"Description"}),s.jsx($e,{id:"task-description",value:g.description,onChange:A=>x({...g,description:A.target.value}),placeholder:"Brief description"})]})]})]}),s.jsxs("div",{className:"flex justify-end space-x-2",children:[s.jsx(se,{variant:"outline",onClick:()=>f(null),children:"Cancel"}),s.jsxs(se,{onClick:S,className:"bg-brandPrimary hover:bg-brandPrimary/90 text-white",children:[s.jsx(Qn,{className:"h-4 w-4 mr-2"}),"Add Phase"]})]})]})]})]}),d.phases.length>0&&s.jsx(Te,{className:"bg-green-50 border-green-200",children:s.jsx(Me,{className:"p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-green-800",children:"Template Summary"}),s.jsxs("p",{className:"text-sm text-green-600",children:[d.phases.length," phases • ",d.estimatedDuration," total days"]})]}),s.jsx(ht,{className:"bg-green-600 text-white",children:"Ready to Save"})]})})})]}):s.jsxs("div",{children:[s.jsx(de,{className:"text-sm font-medium",children:"Existing Templates"}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-2",children:r.map(A=>s.jsxs(Te,{className:"hover:shadow-md transition-shadow",children:[s.jsxs(Xe,{className:"pb-3",children:[s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[M(A.jobType),s.jsx(Qe,{className:"text-lg",children:A.name})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(se,{variant:"ghost",size:"sm",onClick:()=>C(A),className:"text-brandSecondary hover:bg-brandSecondary/10",children:s.jsx(ad,{className:"h-4 w-4"})}),s.jsxs(yr,{children:[s.jsx(br,{asChild:!0,children:s.jsx(se,{variant:"ghost",size:"sm",className:"text-red-500 hover:bg-red-50",children:s.jsx(Kt,{className:"h-4 w-4"})})}),s.jsxs(er,{children:[s.jsxs(tr,{children:[s.jsx(rr,{children:"Delete Template"}),s.jsxs(sr,{children:['Are you sure you want to delete "',A.name,'"? This action cannot be undone.']})]}),s.jsxs(nr,{children:[s.jsx(ir,{children:"Cancel"}),s.jsx(ar,{onClick:()=>b(A.id),className:"bg-red-600 hover:bg-red-700",children:"Delete"})]})]})]})]})]}),s.jsx(ht,{className:`w-fit ${L(A.jobType)}`,children:A.jobType})]}),s.jsxs(Me,{className:"pt-0",children:[s.jsx("p",{className:"text-sm text-gray-600 mb-3",children:A.description}),s.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500 mb-3",children:[s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(kn,{className:"h-4 w-4"}),s.jsxs("span",{children:[A.estimatedDuration," days"]})]}),s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(tn,{className:"h-4 w-4"}),s.jsxs("span",{children:[A.phases.length," phases"]})]})]}),s.jsxs("div",{className:"space-y-2",children:[A.phases.slice(0,3).map(O=>s.jsxs("div",{className:"text-xs text-gray-500 flex items-center space-x-1",children:[s.jsx("div",{className:"w-1 h-1 bg-gray-400 rounded-full"}),s.jsxs("span",{children:[O.name," (",O.duration," day",O.duration!==1?"s":"",")"]})]},O.id)),A.phases.length>3&&s.jsxs("div",{className:"text-xs text-gray-400",children:["+",A.phases.length-3," more phases"]})]})]})]},A.id))})]})}),s.jsxs(Tr,{children:[s.jsx(se,{variant:"outline",onClick:t,children:"Close"}),l&&s.jsxs(se,{onClick:i?v:m,className:"bg-gradient-to-r from-brandPrimary to-brandSecondary text-white",disabled:d.phases.length===0,children:[s.jsx(Qn,{className:"h-4 w-4 mr-2"}),i?"Update Template":"Create Template"]})]})]})})};const xje={"en-US":eC},yje=P1e({format:Fi,parse:b0,startOfWeek:fo,getDay:BI,locales:xje}),bje=P$(b1e),wje=({employees:e,initialJobId:t})=>{const[n,r]=j.useState("month"),[a,i]=j.useState(new Date),[o,l]=j.useState(t||"all"),[c,d]=j.useState("all"),[u,h]=j.useState(!1),[f,p]=j.useState(null),[y,g]=j.useState(!1),[x,m]=j.useState(!1),[v,b]=j.useState(!1),{schedules:C,getCalendarEvents:S,updateSchedule:P,createSchedule:D}=nv(),{jobs:N}=rc(),M=N.filter(Y=>Y.status==="active"),L=e.filter(Y=>Y.isActive),T=j.useMemo(()=>S(N,e).filter($=>{const I=o==="all"||$.jobId===o,U=c==="all"||$.employeeIds.includes(c);return I&&U}),[S,N,e,o,c]);j.useEffect(()=>{t&&l(t)},[t]);const E=j.useCallback(({event:Y,start:$,end:I})=>{$&&I&&($.getTime()!==Y.start.getTime()||I.getTime()!==Y.end.getTime())&&P(Y.id,{startDate:$.toISOString().split("T")[0],endDate:I.toISOString().split("T")[0]})},[P]),A=j.useCallback(({event:Y,start:$,end:I})=>{P(Y.id,{startDate:$.toISOString().split("T")[0],endDate:I.toISOString().split("T")[0]})},[P]),O=Y=>{i(Y)},W=Y=>{r(Y)},z=Y=>{p(Y),g(!0)},F=({start:Y,end:$})=>{h(!0),p({start:Y,end:$,employeeIds:[]})},V=({event:Y})=>s.jsxs("div",{className:"p-1 overflow-hidden text-xs relative",style:{backgroundColor:Y.backgroundColor,color:"white",borderRadius:"4px",height:"100%"},children:[s.jsx("div",{className:"font-bold truncate",children:Y.title}),s.jsx("div",{className:"truncate",children:Y.jobName}),Y.predecessorId&&s.jsx("div",{className:"absolute top-0 right-0 w-2 h-2 bg-blue-400 rounded-full",title:"Has predecessor"})]}),B=({onNavigate:Y,onView:$,label:I})=>s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(se,{variant:"outline",size:"sm",onClick:()=>Y("PREV"),children:s.jsx(LV,{className:"h-4 w-4"})}),s.jsx(se,{variant:"outline",size:"sm",onClick:()=>Y("TODAY"),children:"Today"}),s.jsx(se,{variant:"outline",size:"sm",onClick:()=>Y("NEXT"),children:s.jsx(IV,{className:"h-4 w-4"})}),s.jsx("span",{className:"text-lg font-semibold",children:I})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(se,{variant:n==="month"?"default":"outline",size:"sm",onClick:()=>$("month"),className:n==="month"?"bg-brandSecondary":"",children:"Month"}),s.jsx(se,{variant:n==="week"?"default":"outline",size:"sm",onClick:()=>$("week"),className:n==="week"?"bg-brandSecondary":"",children:"Week"}),s.jsx(se,{variant:n==="day"?"default":"outline",size:"sm",onClick:()=>$("day"),className:n==="day"?"bg-brandSecondary":"",children:"Day"}),s.jsx(se,{variant:n==="agenda"?"default":"outline",size:"sm",onClick:()=>$("agenda"),className:n==="agenda"?"bg-brandSecondary":"",children:"Agenda"})]})]});return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-6",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:"Schedule Calendar"}),s.jsx("p",{className:"text-gray-600 mt-1",children:"Manage job assignments and employee schedules"})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 w-full sm:w-auto",children:[s.jsxs(st,{value:o,onValueChange:l,children:[s.jsx(nt,{className:"w-full sm:w-[200px]",children:s.jsx(at,{placeholder:"Filter by Job"})}),s.jsxs(rt,{children:[s.jsx(xe,{value:"all",children:"All Jobs"}),M.map(Y=>s.jsx(xe,{value:Y.id,children:Y.jobName},Y.id))]})]}),s.jsxs(st,{value:c,onValueChange:d,children:[s.jsx(nt,{className:"w-full sm:w-[200px]",children:s.jsx(at,{placeholder:"Filter by Employee"})}),s.jsxs(rt,{children:[s.jsx(xe,{value:"all",children:"All Employees"}),L.map(Y=>s.jsxs(xe,{value:Y.id,children:[Y.firstName," ",Y.lastName]},Y.id))]})]}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsxs(se,{onClick:()=>{p(null),h(!0)},className:"bg-gradient-to-r from-brandPrimary to-brandSecondary text-white",children:[s.jsx(un,{className:"h-4 w-4 mr-2"}),"New Schedule"]}),s.jsxs(se,{onClick:()=>m(!0),variant:"outline",className:"border-brandPrimary text-brandPrimary hover:bg-brandPrimary hover:text-white",children:[s.jsx(tn,{className:"h-4 w-4 mr-2"}),"From Template"]})]})]})]}),s.jsxs(Te,{className:"shadow-xl border-0 bg-white/90 backdrop-blur-sm",children:[s.jsx(Xe,{className:"pb-2",children:s.jsxs(Qe,{className:"flex items-center",children:[s.jsx(An,{className:"h-5 w-5 mr-2 text-brandSecondary"}),"Work Schedule"]})}),s.jsx(Me,{children:s.jsx("div",{className:"h-[700px]",children:s.jsx(bje,{localizer:yje,events:T,startAccessor:"start",endAccessor:"end",view:n,onView:W,date:a,onNavigate:O,selectable:!0,onSelectEvent:z,onSelectSlot:F,onEventDrop:E,onEventResize:A,components:{event:V,toolbar:B},eventPropGetter:Y=>({style:{backgroundColor:Y.backgroundColor,borderColor:Y.borderColor}}),formats:{timeGutterFormat:(Y,$,I)=>I.format(Y,"h:mm a",$),selectRangeFormat:({start:Y,end:$},I,U)=>U.format(Y,"h:mm a",I)+" - "+U.format($,"h:mm a",I)},draggableAccessor:()=>!0})})})]}),u&&s.jsx($$,{isOpen:u,onClose:()=>h(!1),initialData:f,jobs:M,employees:e}),y&&f&&s.jsx(B$,{isOpen:y,onClose:()=>g(!1),schedule:f,jobs:N,employees:e,onEdit:Y=>{p(Y),g(!1),h(!0)}}),x&&s.jsx(V$,{isOpen:x,onClose:()=>m(!1),jobs:M,employees:e,onSchedulesCreated:async Y=>{for(const $ of Y)await D($)},onManageTemplates:()=>{m(!1),b(!0)}}),v&&s.jsx(U$,{isOpen:v,onClose:()=>b(!1),onTemplatesUpdated:()=>{}})]})},jje=({employees:e,initialJobId:t})=>{const[n,r]=j.useState(t||"all"),[a,i]=j.useState("all"),[o,l]=j.useState("all"),[c,d]=j.useState("all"),[u,h]=j.useState(""),[f,p]=j.useState(""),[y,g]=j.useState(!1),[x,m]=j.useState(null),[v,b]=j.useState(!1),[C,S]=j.useState(!1),[P,D]=j.useState(!1),{schedules:N,deleteSchedule:M,getDependentSchedules:L,createSchedule:T}=nv(),{jobs:E}=rc(),A=E.filter($=>$.status==="active"),O=e.filter($=>$.isActive);j.useEffect(()=>{t&&r(t)},[t]);const W=j.useMemo(()=>{let $=[...N];n!=="all"&&($=$.filter(q=>q.jobId===n)),a!=="all"&&($=$.filter(q=>q.employeeIds.includes(a))),o!=="all"&&($=$.filter(q=>q.status===o));const I=new Date;I.setHours(0,0,0,0),$a(I,1);const U=$a(I,7);if(c==="today")$=$.filter(q=>{const X=new Date(q.startDate);return aE(X)});else if(c==="tomorrow")$=$.filter(q=>{const X=new Date(q.startDate);return aE($a(X,-1))});else if(c==="week")$=$.filter(q=>{const X=new Date(q.startDate);return tl(X,I)&&Ql(X,U)});else if(c==="custom"&&u&&f){const q=new Date(u),X=new Date(f);X.setHours(23,59,59,999),$=$.filter(te=>{const ae=new Date(te.startDate);return tl(ae,q)&&Ql(ae,X)})}return $.sort((q,X)=>new Date(q.startDate)-new Date(X.startDate))},[N,n,a,o,c,u,f]),z=$=>{m({...$,start:new Date($.startDate),end:new Date($.endDate)}),b(!0)},F=$=>{m({...$,id:$.id,start:new Date($.startDate),end:new Date($.endDate)}),g(!0)},V=$=>{M($)},B=$=>{switch($){case"completed":return s.jsxs(ht,{className:"bg-green-100 text-green-800 border-green-200 flex items-center space-x-1",children:[s.jsx(Br,{className:"h-3 w-3"}),s.jsx("span",{children:"Completed"})]});case"in-progress":return s.jsxs(ht,{className:"bg-yellow-100 text-yellow-800 border-yellow-200 flex items-center space-x-1",children:[s.jsx(Wj,{className:"h-3 w-3"}),s.jsx("span",{children:"In Progress"})]});case"cancelled":return s.jsxs(ht,{className:"bg-red-100 text-red-800 border-red-200 flex items-center space-x-1",children:[s.jsx(Au,{className:"h-3 w-3"}),s.jsx("span",{children:"Cancelled"})]});default:return s.jsxs(ht,{className:"bg-blue-100 text-blue-800 border-blue-200 flex items-center space-x-1",children:[s.jsx(An,{className:"h-3 w-3"}),s.jsx("span",{children:"Scheduled"})]})}},Y=$=>Fi(new Date($),"MMM d, yyyy");return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-6",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:"Schedule List"}),s.jsx("p",{className:"text-gray-600 mt-1",children:"View and manage all scheduled assignments"})]}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsxs(se,{onClick:()=>{m(null),g(!0)},className:"bg-gradient-to-r from-brandPrimary to-brandSecondary text-white",children:[s.jsx(un,{className:"h-4 w-4 mr-2"}),"New Schedule"]}),s.jsxs(se,{onClick:()=>S(!0),variant:"outline",className:"border-brandPrimary text-brandPrimary hover:bg-brandPrimary hover:text-white",children:[s.jsx(tn,{className:"h-4 w-4 mr-2"}),"From Template"]})]})]}),s.jsxs(Te,{className:"shadow-xl border-0 bg-white/90 backdrop-blur-sm",children:[s.jsx(Xe,{className:"pb-2",children:s.jsxs(Qe,{className:"flex items-center",children:[s.jsx(bS,{className:"h-5 w-5 mr-2 text-brandSecondary"}),"Filter Schedules"]})}),s.jsx(Me,{children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{children:"Job"}),s.jsxs(st,{value:n,onValueChange:r,children:[s.jsx(nt,{children:s.jsx(at,{placeholder:"Filter by Job"})}),s.jsxs(rt,{children:[s.jsx(xe,{value:"all",children:"All Jobs"}),A.map($=>s.jsx(xe,{value:$.id,children:$.jobName},$.id))]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{children:"Employee"}),s.jsxs(st,{value:a,onValueChange:i,children:[s.jsx(nt,{children:s.jsx(at,{placeholder:"Filter by Employee"})}),s.jsxs(rt,{children:[s.jsx(xe,{value:"all",children:"All Employees"}),O.map($=>s.jsxs(xe,{value:$.id,children:[$.firstName," ",$.lastName]},$.id))]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{children:"Status"}),s.jsxs(st,{value:o,onValueChange:l,children:[s.jsx(nt,{children:s.jsx(at,{placeholder:"Filter by Status"})}),s.jsxs(rt,{children:[s.jsx(xe,{value:"all",children:"All Statuses"}),s.jsx(xe,{value:"scheduled",children:"Scheduled"}),s.jsx(xe,{value:"in-progress",children:"In Progress"}),s.jsx(xe,{value:"completed",children:"Completed"}),s.jsx(xe,{value:"cancelled",children:"Cancelled"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{children:"Date Range"}),s.jsxs(st,{value:c,onValueChange:d,children:[s.jsx(nt,{children:s.jsx(at,{placeholder:"Filter by Date"})}),s.jsxs(rt,{children:[s.jsx(xe,{value:"all",children:"All Dates"}),s.jsx(xe,{value:"today",children:"Today"}),s.jsx(xe,{value:"tomorrow",children:"Tomorrow"}),s.jsx(xe,{value:"week",children:"Next 7 Days"}),s.jsx(xe,{value:"custom",children:"Custom Range"})]})]})]}),c==="custom"&&s.jsxs("div",{className:"md:col-span-4 grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{children:"Start Date"}),s.jsx($e,{type:"date",value:u,onChange:$=>h($.target.value)})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{children:"End Date"}),s.jsx($e,{type:"date",value:f,onChange:$=>p($.target.value),min:u})]})]})]})})]}),s.jsxs(Te,{className:"shadow-xl border-0 bg-white/90 backdrop-blur-sm",children:[s.jsx(Xe,{className:"pb-2",children:s.jsxs(Qe,{className:"flex items-center",children:[s.jsx(An,{className:"h-5 w-5 mr-2 text-brandPrimary"}),"Schedule Entries"]})}),s.jsx(Me,{children:W.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(An,{className:"h-12 w-12 mx-auto text-gray-400 mb-4"}),s.jsx("p",{className:"text-gray-600 font-medium",children:"No schedules found"}),s.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"Try adjusting your filters or create a new schedule"})]}):s.jsx("div",{className:"space-y-4",children:W.map(($,I)=>{var X;const U=E.find(te=>te.id===$.jobId)||{},q=$.employeeIds.map(te=>e.find(ae=>ae.id===te)).filter(Boolean);return s.jsx(Pt.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:I*.05},className:"border rounded-lg p-4 hover:shadow-md transition-shadow cursor-pointer",onClick:()=>z($),children:s.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("h3",{className:"font-bold text-lg",children:$.title}),B($.status)]}),s.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[s.jsx(Vo,{className:"h-4 w-4 text-brandPrimary"}),s.jsx("span",{children:U.jobName||"Unknown Job"})]}),s.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[s.jsx(An,{className:"h-4 w-4 text-brandSecondary"}),s.jsx("span",{children:Y($.startDate)}),s.jsx("span",{children:"to"}),s.jsx(kn,{className:"h-4 w-4 text-brandSecondary"}),s.jsx("span",{children:Y($.endDate)})]}),s.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[s.jsx(vr,{className:"h-4 w-4 text-gray-500"}),s.jsx("span",{children:q.length>0?`${q.length} employee${q.length>1?"s":""} assigned`:"No employees assigned"})]}),$.predecessorId&&s.jsxs("div",{className:"flex items-center space-x-2 text-sm text-blue-600",children:[s.jsx(TM,{className:"h-4 w-4"}),s.jsx("span",{children:"Depends on: "}),s.jsx("span",{className:"font-medium",children:((X=N.find(te=>te.id===$.predecessorId))==null?void 0:X.title)||"Unknown Schedule"})]}),(()=>{const te=L($.id);return te.length>0?s.jsxs("div",{className:"flex items-center space-x-2 text-sm text-green-600",children:[s.jsx(Rm,{className:"h-4 w-4"}),s.jsx("span",{children:"Leads to: "}),s.jsx("span",{className:"font-medium",children:te.length===1?te[0].title:`${te.length} dependent schedules`})]}):null})()]}),s.jsxs("div",{className:"flex space-x-2 self-end md:self-center",children:[s.jsx(se,{variant:"outline",size:"sm",onClick:te=>{te.stopPropagation(),F($)},className:"text-brandSecondary hover:bg-brandSecondary/10",children:s.jsx(Ai,{className:"h-4 w-4"})}),s.jsxs(yr,{children:[s.jsx(br,{asChild:!0,children:s.jsx(se,{variant:"outline",size:"sm",onClick:te=>te.stopPropagation(),className:"text-red-500 hover:bg-red-50",children:s.jsx(Kt,{className:"h-4 w-4"})})}),s.jsxs(er,{children:[s.jsxs(tr,{children:[s.jsx(rr,{children:"Delete Schedule"}),s.jsx(sr,{children:"Are you sure you want to delete this schedule? This action cannot be undone."})]}),s.jsxs(nr,{children:[s.jsx(ir,{children:"Cancel"}),s.jsx(ar,{onClick:()=>V($.id),className:"bg-red-600 hover:bg-red-700",children:"Delete"})]})]})]})]})]})},$.id)})})})]}),y&&s.jsx($$,{isOpen:y,onClose:()=>g(!1),initialData:x,jobs:E,employees:e}),v&&x&&s.jsx(B$,{isOpen:v,onClose:()=>b(!1),schedule:x,jobs:E,employees:e,onEdit:$=>{m($),b(!1),g(!0)}}),C&&s.jsx(V$,{isOpen:C,onClose:()=>S(!1),jobs:A,employees:e,onSchedulesCreated:async $=>{for(const I of $)await T(I)},onManageTemplates:()=>{S(!1),D(!0)}}),P&&s.jsx(U$,{isOpen:P,onClose:()=>D(!1),onTemplatesUpdated:()=>{}})]})},Nje=({employees:e=[],schedules:t=[],jobs:n=[]})=>{const[r,a]=j.useState([]),[i,o]=j.useState({}),[l,c]=j.useState(null),[d,u]=j.useState(new Date),h=j.useMemo(()=>{const C=fo(d,{weekStartsOn:1});return Array.from({length:7},(S,P)=>$a(C,P))},[d]),f=j.useCallback(C=>{const S=n.find(P=>P.id===C);return S?S.jobName:"Unknown Job"},[n]),p=j.useCallback(C=>{const S=e.find(P=>P.id===C);return S?`${S.firstName} ${S.lastName}`:"Unknown Employee"},[e]),y=j.useCallback((C,S)=>t.filter(P=>{const D=fN(P.startDate),N=fN(P.endDate),M=new Date(S);return P.employeeIds&&P.employeeIds.includes(C)&&M>=D&&M<=N}),[t]),g=j.useCallback(C=>{r.length>=5||r.includes(C)||a(S=>[...S,C])},[r]),x=j.useCallback(C=>{a(S=>S.filter(P=>P!==C))},[]),m=j.useCallback((C,S,P,D)=>{c({...S,sourceEmployeeId:P,sourceDate:D}),C.dataTransfer.effectAllowed="move"},[]),v=j.useCallback(C=>{C.preventDefault(),C.dataTransfer.dropEffect="move"},[]),b=j.useCallback((C,S,P)=>{C.preventDefault(),l&&(l.sourceEmployeeId===S&&_f(l.sourceDate,P)||(o(D=>{const N={...D};N[l.sourceEmployeeId]&&N[l.sourceEmployeeId][l.sourceDate]&&(N[l.sourceEmployeeId][l.sourceDate]=N[l.sourceEmployeeId][l.sourceDate].filter(L=>L.id!==l.id)),N[S]||(N[S]={}),N[S][P]||(N[S][P]=[]);const M={...l,employeeIds:[S],startDate:P.toISOString().split("T")[0],endDate:P.toISOString().split("T")[0]};return N[S][P].push(M),N}),c(null)))},[l]);return Q.useEffect(()=>{const C={};r.forEach(S=>{C[S]={},h.forEach(P=>{C[S][P]=y(S,P)})}),o(C)},[r,h,y]),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(vr,{className:"h-6 w-6 text-brandPrimary"}),s.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Schedule Comparison"}),s.jsxs(ht,{variant:"secondary",className:"bg-blue-100 text-blue-800",children:[r.length,"/5 employees"]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(se,{onClick:()=>u(C=>$a(C,-7)),variant:"outline",size:"sm",children:"Previous Week"}),s.jsx(se,{onClick:()=>u(new Date),variant:"outline",size:"sm",children:"This Week"}),s.jsx(se,{onClick:()=>u(C=>$a(C,7)),variant:"outline",size:"sm",children:"Next Week"})]})]}),s.jsxs(Te,{children:[s.jsx(Xe,{children:s.jsx(Qe,{className:"text-lg font-semibold",children:"Select Employees"})}),s.jsx(Me,{children:s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs(st,{onValueChange:g,children:[s.jsx(nt,{className:"w-64",children:s.jsx(at,{placeholder:"Add employee to comparison"})}),s.jsx(rt,{children:e.filter(C=>!r.includes(C.id)).map(C=>s.jsx(xe,{value:C.id,children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(vr,{className:"h-4 w-4"}),s.jsxs("span",{children:[C.firstName," ",C.lastName]})]})},C.id))})]}),r.length===5&&s.jsx(ht,{variant:"outline",className:"text-orange-600 border-orange-300",children:"Maximum 5 employees reached"})]})})]}),r.length>0&&s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("div",{className:"min-w-max",children:[s.jsxs("div",{className:"grid gap-2 mb-4",style:{gridTemplateColumns:`200px repeat(${r.length}, 300px)`},children:[s.jsx("div",{className:"h-12"})," ",r.map(C=>s.jsx("div",{className:"relative",children:s.jsx(Te,{className:"h-12",children:s.jsxs(Me,{className:"p-3 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(vr,{className:"h-4 w-4 text-brandPrimary"}),s.jsx("span",{className:"font-semibold text-sm",children:p(C)})]}),s.jsx(se,{onClick:()=>x(C),variant:"ghost",size:"sm",className:"h-6 w-6 p-0 text-gray-400 hover:text-red-600",children:s.jsx(rn,{className:"h-3 w-3"})})]})})},C))]}),h.map(C=>s.jsxs("div",{className:"grid gap-2 mb-2",style:{gridTemplateColumns:`200px repeat(${r.length}, 300px)`},children:[s.jsx("div",{className:"h-20",children:s.jsx(Te,{className:"h-full",children:s.jsxs(Me,{className:"p-3 flex flex-col items-center justify-center",children:[s.jsx("div",{className:"text-sm font-semibold text-gray-900",children:Fi(C,"EEE")}),s.jsx("div",{className:"text-xs text-gray-500",children:Fi(C,"MMM d")})]})})}),r.map(S=>{var P,D;return s.jsx("div",{className:"h-20",children:s.jsx(Te,{className:"h-full",onDragOver:v,onDrop:N=>b(N,S,C),children:s.jsxs(Me,{className:"p-2 h-full overflow-y-auto",children:[s.jsx(Es,{children:(D=(P=i[S])==null?void 0:P[C])==null?void 0:D.map((N,M)=>s.jsx(Pt.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"mb-1",children:s.jsxs("div",{draggable:!0,onDragStart:L=>m(L,N,S,C),className:"bg-blue-50 border border-blue-200 rounded p-2 cursor-move hover:bg-blue-100 transition-colors",children:[s.jsxs("div",{className:"flex items-center space-x-1 mb-1",children:[s.jsx(BV,{className:"h-3 w-3 text-blue-400"}),s.jsx("span",{className:"text-xs font-medium text-blue-800",children:f(N.jobId)})]}),s.jsx("div",{className:"text-xs text-gray-700 truncate",children:N.title||N.name})]})},N.id))}),l&&l.sourceEmployeeId!==S&&!_f(l.sourceDate,C)&&s.jsx("div",{className:"border-2 border-dashed border-blue-300 rounded p-2 text-center",children:s.jsx("div",{className:"text-xs text-blue-500",children:"Drop here to move task"})})]})})},`${S}-${C.toISOString()}`)})]},C.toISOString()))]})}),r.length===0&&s.jsxs(Te,{className:"text-center py-12",children:[s.jsx(vr,{className:"h-16 w-16 mx-auto text-gray-400 mb-4"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Employees Selected"}),s.jsx("p",{className:"text-gray-600 mb-4",children:"Select up to 5 employees to compare their schedules side-by-side."}),s.jsx("p",{className:"text-sm text-gray-500",children:"You can drag and drop tasks between employees to reassign them."})]})]})},Sje=({employees:e,initialJobId:t})=>{const[n,r]=j.useState("calendar"),{schedules:a,loading:i}=nv(),{jobs:o}=rc();console.log("ScheduleDashboard rendering with employees:",e),o.filter(f=>f.status==="active"),e.filter(f=>f.isActive);const l=a.filter(f=>f.status==="scheduled").length,c=a.filter(f=>f.status==="in-progress").length;a.filter(f=>f.status==="completed").length,a.filter(f=>f.status==="cancelled").length;const d=new Date;d.setHours(0,0,0,0);const u=new Date(d);u.setDate(u.getDate()+1);const h=a.filter(f=>{const p=new Date(f.startDate);return p.setHours(0,0,0,0),p.getTime()===d.getTime()});return i?s.jsxs("div",{className:"text-center py-16",children:[s.jsx(An,{className:"h-16 w-16 mx-auto text-gray-400 mb-4 animate-pulse"}),s.jsx("p",{className:"text-gray-600 font-medium",children:"Loading schedule data..."})]}):s.jsxs("div",{className:"space-y-6",children:[s.jsx(Pt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:s.jsxs(Te,{className:"border-0 bg-gradient-to-r from-brandPrimary to-brandSecondary text-white shadow-2xl",children:[s.jsx(Xe,{children:s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"p-3 bg-white/20 rounded-xl",children:s.jsx(An,{className:"h-8 w-8"})}),s.jsxs("div",{children:[s.jsx(Qe,{className:"text-3xl font-bold",children:"Schedule Management"}),s.jsx("p",{className:"text-white/80 mt-1",children:"Assign employees to jobs and manage work schedules"})]})]})})}),s.jsxs(Me,{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(An,{className:"h-5 w-5 text-white/70"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-white/70 text-sm",children:"Scheduled"}),s.jsx("p",{className:"font-semibold text-2xl",children:l})]})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(kn,{className:"h-5 w-5 text-white/70"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-white/70 text-sm",children:"In Progress"}),s.jsx("p",{className:"font-semibold text-2xl",children:c})]})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(vr,{className:"h-5 w-5 text-white/70"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-white/70 text-sm",children:"Today's Schedules"}),s.jsx("p",{className:"font-semibold text-2xl",children:h.length})]})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(ak,{className:"h-5 w-5 text-white/70"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-white/70 text-sm",children:"Total Schedules"}),s.jsx("p",{className:"font-semibold text-2xl",children:a.length})]})]})]})]})}),s.jsxs("div",{className:"flex space-x-4 mb-6",children:[s.jsxs(se,{onClick:()=>r("calendar"),variant:n==="calendar"?"default":"outline",className:n==="calendar"?"bg-gradient-to-r from-brandPrimary to-brandSecondary text-white":"",children:[s.jsx(An,{className:"h-4 w-4 mr-2"}),"Calendar View"]}),s.jsxs(se,{onClick:()=>r("list"),variant:n==="list"?"default":"outline",className:n==="list"?"bg-gradient-to-r from-brandPrimary to-brandSecondary text-white":"",children:[s.jsx(ak,{className:"h-4 w-4 mr-2"}),"List View"]}),s.jsxs(se,{onClick:()=>r("comparison"),variant:n==="comparison"?"default":"outline",className:n==="comparison"?"bg-gradient-to-r from-brandPrimary to-brandSecondary text-white":"",children:[s.jsx(Jf,{className:"h-4 w-4 mr-2"}),"Comparison View"]})]}),n==="calendar"?s.jsx(wje,{employees:e,initialJobId:t}):n==="list"?s.jsx(jje,{employees:e,initialJobId:t}):s.jsx(Nje,{employees:e,schedules:a,jobs:o})]})};function Cje(e){return s.jsx(Bne,{children:s.jsx(Sje,{...e})})}const Pje=({analytics:e})=>{const t=({data:l,title:c,height:d=200,color:u="#3b82f6"})=>{const h=Math.max(...l.map(p=>p.value)),f=100/l.length;return s.jsxs("div",{className:"w-full",children:[s.jsx("h3",{className:"text-lg font-semibold mb-4",children:c}),s.jsx("div",{className:"relative",style:{height:`${d}px`},children:l.map((p,y)=>s.jsxs("div",{className:"absolute bottom-0 flex flex-col items-center",style:{left:`${y*f}%`,width:`${f*.8}%`},children:[s.jsx("div",{className:"w-full rounded-t",style:{height:`${p.value/h*100}%`,backgroundColor:u,minHeight:"4px"}}),s.jsx("div",{className:"text-xs text-gray-600 mt-1 text-center",children:p.label})]},y))})]})},n=({data:l,title:c,size:d=200})=>{const u=l.reduce((f,p)=>f+p.value,0);let h=0;return s.jsxs("div",{className:"w-full",children:[s.jsx("h3",{className:"text-lg font-semibold mb-4",children:c}),s.jsx("div",{className:"flex items-center justify-center",children:s.jsx("svg",{width:d,height:d,className:"transform -rotate-90",children:l.map((f,p)=>{const g=f.value/u*100/100*360,x=50+40*Math.cos(h*Math.PI/180),m=50+40*Math.sin(h*Math.PI/180),v=50+40*Math.cos((h+g)*Math.PI/180),b=50+40*Math.sin((h+g)*Math.PI/180),C=g>180?1:0,S=["M 50 50",`L ${x} ${m}`,`A 40 40 0 ${C} 1 ${v} ${b}`,"Z"].join(" ");return h+=g,s.jsx("path",{d:S,fill:f.color,stroke:"white",strokeWidth:"2"},p)})})}),s.jsx("div",{className:"mt-4 space-y-2",children:l.map((f,p)=>s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-4 h-4 rounded",style:{backgroundColor:f.color}}),s.jsx("span",{className:"text-sm",children:f.label}),s.jsxs("span",{className:"text-sm font-medium",children:[(f.value/u*100).toFixed(1),"%"]})]},p))})]})},r=e.jobPerformance.slice(0,10).map((l,c)=>({label:l.jobName.length>15?l.jobName.substring(0,15)+"...":l.jobName,value:l.profit})),a=[{label:"Profitable",value:e.performanceTrends.profitableJobs,color:"#10b981"},{label:"Break Even",value:e.performanceTrends.breakEvenJobs,color:"#f59e0b"},{label:"Loss Making",value:e.performanceTrends.lossMakingJobs,color:"#ef4444"}],i=[{label:"Labor",value:e.totalCosts*.6,color:"#3b82f6"},{label:"Materials",value:e.totalCosts*.3,color:"#8b5cf6"},{label:"Other",value:e.totalCosts*.1,color:"#f59e0b"}],o=e.employeeProductivity.slice(0,8).map(l=>({label:l.name.length>10?l.name.substring(0,10)+"...":l.name,value:l.hourlyRate}));return s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs(Te,{children:[s.jsx(Xe,{children:s.jsx(Qe,{children:"Top 10 Jobs by Profit"})}),s.jsx(Me,{children:s.jsx(t,{data:r,title:"",color:"#10b981"})})]}),s.jsxs(Te,{children:[s.jsx(Xe,{children:s.jsx(Qe,{children:"Job Performance Distribution"})}),s.jsx(Me,{children:s.jsx(n,{data:a,title:""})})]}),s.jsxs(Te,{children:[s.jsx(Xe,{children:s.jsx(Qe,{children:"Cost Breakdown"})}),s.jsx(Me,{children:s.jsx(n,{data:i,title:""})})]}),s.jsxs(Te,{children:[s.jsx(Xe,{children:s.jsx(Qe,{children:"Employee Hourly Rates"})}),s.jsx(Me,{children:s.jsx(t,{data:o,title:"",color:"#8b5cf6"})})]})]})};var dP="Progress",uP=100,[Dje,uNe]=Cd(dP),[kje,Eje]=Dje(dP),Y$=j.forwardRef((e,t)=>{const{__scopeProgress:n,value:r=null,max:a,getValueLabel:i=Tje,...o}=e;(a||a===0)&&!UT(a)&&console.error(Aje(`${a}`,"Progress"));const l=UT(a)?a:uP;r!==null&&!YT(r,l)&&console.error(_je(`${r}`,"Progress"));const c=YT(r,l)?r:null,d=Wy(c)?i(c,l):void 0;return s.jsx(kje,{scope:n,value:c,max:l,children:s.jsx(Mn.div,{"aria-valuemax":l,"aria-valuemin":0,"aria-valuenow":Wy(c)?c:void 0,"aria-valuetext":d,role:"progressbar","data-state":K$(c,l),"data-value":c??void 0,"data-max":l,...o,ref:t})})});Y$.displayName=dP;var G$="ProgressIndicator",J$=j.forwardRef((e,t)=>{const{__scopeProgress:n,...r}=e,a=Eje(G$,n);return s.jsx(Mn.div,{"data-state":K$(a.value,a.max),"data-value":a.value??void 0,"data-max":a.max,...r,ref:t})});J$.displayName=G$;function Tje(e,t){return`${Math.round(e/t*100)}%`}function K$(e,t){return e==null?"indeterminate":e===t?"complete":"loading"}function Wy(e){return typeof e=="number"}function UT(e){return Wy(e)&&!isNaN(e)&&e>0}function YT(e,t){return Wy(e)&&!isNaN(e)&&e<=t&&e>=0}function Aje(e,t){return`Invalid prop \`max\` of value \`${e}\` supplied to \`${t}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${uP}\`.`}function _je(e,t){return`Invalid prop \`value\` of value \`${e}\` supplied to \`${t}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${uP} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var X$=Y$,Mje=J$;const Io=j.forwardRef(({className:e,value:t,...n},r)=>s.jsx(X$,{ref:r,className:Ft("relative h-2 w-full overflow-hidden rounded-full bg-gray-200",e),...n,children:s.jsx(Mje,{className:"h-full w-full flex-1 bg-blue-600 transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})}));Io.displayName=X$.displayName;var Pb="Collapsible",[Rje,hNe]=Cd(Pb),[Lje,hP]=Rje(Pb),Q$=j.forwardRef((e,t)=>{const{__scopeCollapsible:n,open:r,defaultOpen:a,disabled:i,onOpenChange:o,...l}=e,[c,d]=Xg({prop:r,defaultProp:a??!1,onChange:o,caller:Pb});return s.jsx(Lje,{scope:n,disabled:i,contentId:vf(),open:c,onOpenToggle:j.useCallback(()=>d(u=>!u),[d]),children:s.jsx(Mn.div,{"data-state":pP(c),"data-disabled":i?"":void 0,...l,ref:t})})});Q$.displayName=Pb;var Z$="CollapsibleTrigger",e7=j.forwardRef((e,t)=>{const{__scopeCollapsible:n,...r}=e,a=hP(Z$,n);return s.jsx(Mn.button,{type:"button","aria-controls":a.contentId,"aria-expanded":a.open||!1,"data-state":pP(a.open),"data-disabled":a.disabled?"":void 0,disabled:a.disabled,...r,ref:t,onClick:Pn(e.onClick,a.onOpenToggle)})});e7.displayName=Z$;var fP="CollapsibleContent",t7=j.forwardRef((e,t)=>{const{forceMount:n,...r}=e,a=hP(fP,e.__scopeCollapsible);return s.jsx(Qu,{present:n||a.open,children:({present:i})=>s.jsx(Ije,{...r,ref:t,present:i})})});t7.displayName=fP;var Ije=j.forwardRef((e,t)=>{const{__scopeCollapsible:n,present:r,children:a,...i}=e,o=hP(fP,n),[l,c]=j.useState(r),d=j.useRef(null),u=ba(t,d),h=j.useRef(0),f=h.current,p=j.useRef(0),y=p.current,g=o.open||l,x=j.useRef(g),m=j.useRef(void 0);return j.useEffect(()=>{const v=requestAnimationFrame(()=>x.current=!1);return()=>cancelAnimationFrame(v)},[]),Mu(()=>{const v=d.current;if(v){m.current=m.current||{transitionDuration:v.style.transitionDuration,animationName:v.style.animationName},v.style.transitionDuration="0s",v.style.animationName="none";const b=v.getBoundingClientRect();h.current=b.height,p.current=b.width,x.current||(v.style.transitionDuration=m.current.transitionDuration,v.style.animationName=m.current.animationName),c(r)}},[o.open,r]),s.jsx(Mn.div,{"data-state":pP(o.open),"data-disabled":o.disabled?"":void 0,id:o.contentId,hidden:!g,...i,ref:u,style:{"--radix-collapsible-content-height":f?`${f}px`:void 0,"--radix-collapsible-content-width":y?`${y}px`:void 0,...e.style},children:g&&a})});function pP(e){return e?"open":"closed"}var Oje=Q$;const e0=Oje,t0=e7,n0=t7;class Fje{constructor(){this.validationRules={job:{required:["jobName","jobType","createdAt"],financials:{estimate:["sqft","drywallMaterialRate","hangerRate","finisherRate","prepCleanRate"],fieldRevised:["sqft"],actual:["laborCosts","manualLaborCosts","materialInvoices","changeOrders"]}},employee:{required:["name","id"],optional:["phone","email","hourlyRate"]}}}validateJob(t){const n=[],r=[],a=[];(!t.jobName||t.jobName.trim()==="")&&n.push({type:"error",category:"basic_info",field:"jobName",message:"Job name is required",priority:"high"}),t.jobType||n.push({type:"error",category:"basic_info",field:"jobType",message:"Job type must be specified",priority:"high"}),t.createdAt||n.push({type:"warning",category:"basic_info",field:"createdAt",message:"Job creation date is missing",priority:"medium"});const i=t.financials||{},o=i.estimate||{};(!o.sqft||o.sqft===0)&&n.push({type:"error",category:"estimate",field:"sqft",message:"Square footage is required for accurate cost estimation",priority:"high",impact:"Cost calculations will be inaccurate"}),(!o.totalEstimateAmount||o.totalEstimateAmount===0)&&r.push({type:"warning",category:"estimate",field:"totalEstimateAmount",message:"Total estimate amount is missing",priority:"medium",impact:"Revenue calculations may be incomplete"});const l=i.fieldRevised||{};(!l.sqft||l.sqft===0)&&a.push({type:"suggestion",category:"field_revised",field:"sqft",message:"Field takeoff square footage not recorded",priority:"low",impact:"Field revised calculations may use estimate values"});const c=i.actual||{},d=c.laborCosts||[],u=c.manualLaborCosts||[],h=c.materialInvoices||[],f=c.changeOrders||[];d.length>0||u.length>0||h.length>0||f.length>0||r.push({type:"warning",category:"actual_costs",field:"all",message:"No actual costs recorded for this job",priority:"medium",impact:"Profit calculations will be based on estimates only"}),d.length===0&&a.push({type:"suggestion",category:"actual_costs",field:"laborCosts",message:"No labor costs recorded",priority:"low",impact:"Consider adding time clock entries or manual labor costs"}),h.length===0&&a.push({type:"suggestion",category:"actual_costs",field:"materialInvoices",message:"No material invoices recorded",priority:"low",impact:"Material costs not included in actual calculations"}),o.sqft&&l.sqft&&Math.abs(o.sqft-l.sqft)/o.sqft>.1&&r.push({type:"warning",category:"data_consistency",field:"sqft_variance",message:`Significant variance between estimate (${o.sqft}) and field revised (${l.sqft}) square footage`,priority:"medium",impact:"This may indicate scope changes or measurement errors"});const y=this.calculateCompletenessScore(t);return{jobId:t.id,jobName:t.jobName,issues:n,warnings:r,suggestions:a,completenessScore:y,hasCriticalIssues:n.some(g=>g.priority==="high"),hasWarnings:r.length>0,hasSuggestions:a.length>0,totalIssues:n.length+r.length+a.length}}calculateCompletenessScore(t){let n=0;const r=100,a=t.financials||{};t.jobName&&t.jobName.trim()!==""&&(n+=10),t.jobType&&(n+=5),t.createdAt&&(n+=5);const i=a.estimate||{};i.sqft&&i.sqft>0&&(n+=15),i.totalEstimateAmount&&i.totalEstimateAmount>0&&(n+=15);const o=a.fieldRevised||{};o.sqft&&o.sqft>0&&(n+=20);const l=a.actual||{},c=l.laborCosts&&l.laborCosts.length>0||l.manualLaborCosts&&l.manualLaborCosts.length>0,d=l.materialInvoices&&l.materialInvoices.length>0,u=l.changeOrders&&l.changeOrders.length>0;return c&&(n+=10),d&&(n+=10),u&&(n+=10),Math.min(n,r)}validateAllJobs(t){const n=t.map(a=>this.validateJob(a)),r={totalJobs:t.length,jobsWithIssues:n.filter(a=>a.issues.length>0).length,jobsWithWarnings:n.filter(a=>a.warnings.length>0).length,jobsWithSuggestions:n.filter(a=>a.suggestions.length>0).length,averageCompletenessScore:n.reduce((a,i)=>a+i.completenessScore,0)/t.length,criticalIssuesCount:n.reduce((a,i)=>a+i.issues.filter(o=>o.priority==="high").length,0),totalIssuesCount:n.reduce((a,i)=>a+i.totalIssues,0),completenessDistribution:{excellent:n.filter(a=>a.completenessScore>=90).length,good:n.filter(a=>a.completenessScore>=70&&a.completenessScore<90).length,fair:n.filter(a=>a.completenessScore>=50&&a.completenessScore<70).length,poor:n.filter(a=>a.completenessScore<50).length}};return{validations:n,summary:r}}getValidationInsights(t){const n=[];t.summary.averageCompletenessScore<70&&n.push({type:"data_quality",severity:"high",message:"Overall data completeness is below recommended threshold",recommendation:"Focus on completing missing job information and financial data",impact:"Analytics accuracy may be compromised"}),t.summary.criticalIssuesCount>0&&n.push({type:"critical_issues",severity:"high",message:`${t.summary.criticalIssuesCount} critical data issues found`,recommendation:"Address critical issues before relying on analytics for decision making",impact:"Some calculations may be inaccurate or missing"});const r=t.validations.flatMap(o=>o.issues),a={};r.forEach(o=>{const l=`${o.category}.${o.field}`;a[l]=(a[l]||0)+1});const i=Object.entries(a).sort(([,o],[,l])=>l-o).slice(0,3);return i.length>0&&n.push({type:"common_issues",severity:"medium",message:"Common data issues identified across multiple jobs",details:i.map(([o,l])=>({field:o,count:l})),recommendation:"Consider implementing data entry templates or validation rules"}),n}getImprovementRecommendations(t){const n=[];return t.summary.averageCompletenessScore<80&&n.push({category:"data_entry",priority:"high",title:"Improve Data Entry Process",description:"Implement mandatory fields and validation rules",actions:["Add required field indicators in forms","Implement real-time validation feedback","Create data entry templates"]}),t.summary.criticalIssuesCount>t.summary.totalJobs*.3&&n.push({category:"training",priority:"medium",title:"User Training Needed",description:"High number of critical issues suggests training opportunities",actions:["Create data entry guidelines","Provide training on financial data importance","Set up regular data quality reviews"]}),t.summary.jobsWithWarnings>t.summary.totalJobs*.5&&n.push({category:"process",priority:"medium",title:"Review Data Collection Process",description:"Many jobs have missing or incomplete data",actions:["Audit current data collection workflow","Identify bottlenecks in data entry","Consider automated data collection where possible"]}),n}validateEmployee(t){const n=[],r=[];return(!t.name||t.name.trim()==="")&&n.push({type:"error",field:"name",message:"Employee name is required",priority:"high"}),t.id||n.push({type:"error",field:"id",message:"Employee ID is required",priority:"high"}),(!t.hourlyRate||t.hourlyRate<=0)&&r.push({type:"warning",field:"hourlyRate",message:"Hourly rate not set",priority:"medium",impact:"Labor cost calculations may be inaccurate"}),{employeeId:t.id,employeeName:t.name,issues:n,warnings:r,hasIssues:n.length>0,hasWarnings:r.length>0}}validateAllEmployees(t){const n=t.map(r=>this.validateEmployee(r));return{validations:n,summary:{totalEmployees:t.length,employeesWithIssues:n.filter(r=>r.hasIssues).length,employeesWithWarnings:n.filter(r=>r.hasWarnings).length,totalIssues:n.reduce((r,a)=>r+a.issues.length,0),totalWarnings:n.reduce((r,a)=>r+a.warnings.length,0)}}}}const ym=new Fje,$je=({jobs:e,employees:t,onJobClick:n})=>{const[r,a]=j.useState({summary:!0,criticalIssues:!0,insights:!0,recommendations:!1}),[i,o]=j.useState(null),l=j.useMemo(()=>{const m=ym.validateAllJobs(e),v=ym.validateAllEmployees(t),b=ym.getValidationInsights(m),C=ym.getImprovementRecommendations(m);return{jobs:m,employees:v,insights:b,recommendations:C}},[e,t]),c=m=>{a(v=>({...v,[m]:!v[m]}))},d=m=>{switch(m){case"high":return"text-red-600 bg-red-50 border-red-200";case"medium":return"text-yellow-600 bg-yellow-50 border-yellow-200";case"low":return"text-blue-600 bg-blue-50 border-blue-200";default:return"text-gray-600 bg-gray-50 border-gray-200"}},u=m=>{switch(m){case"high":return s.jsx(Lm,{className:"h-4 w-4"});case"medium":return s.jsx(co,{className:"h-4 w-4"});case"low":return s.jsx(sk,{className:"h-4 w-4"});default:return s.jsx(sk,{className:"h-4 w-4"})}},h=m=>m>=90?"text-green-600":m>=70?"text-blue-600":m>=50?"text-yellow-600":"text-red-600",f=m=>m>=90?"Excellent":m>=70?"Good":m>=50?"Fair":"Poor",p=m=>{n&&n(m)},y=m=>{o(i===m?null:m)},g=()=>{if(!i)return l.jobs.validations;switch(i){case"critical":return l.jobs.validations.filter(m=>m.hasCriticalIssues);case"warnings":return l.jobs.validations.filter(m=>m.hasWarnings);case"excellent":return l.jobs.validations.filter(m=>m.completenessScore>=90);case"completeness":return l.jobs.validations.sort((m,v)=>m.completenessScore-v.completenessScore);default:return l.jobs.validations}},x=()=>{const m={timestamp:new Date().toISOString(),summary:l.jobs.summary,insights:l.insights,recommendations:l.recommendations,jobDetails:l.jobs.validations.map(S=>({jobId:S.jobId,jobName:S.jobName,completenessScore:S.completenessScore,issues:S.issues.length,warnings:S.warnings.length,suggestions:S.suggestions.length}))},v=new Blob([JSON.stringify(m,null,2)],{type:"application/json"}),b=window.URL.createObjectURL(v),C=document.createElement("a");C.href=b,C.download=`data-validation-report-${new Date().toISOString().split("T")[0]}.json`,C.click(),window.URL.revokeObjectURL(b),pe({title:"Validation Report Exported! 📊",description:"Your data validation report has been downloaded."})};return s.jsxs("div",{className:"space-y-6",children:[s.jsx(Te,{className:"border-2 border-orange-200 bg-orange-50",children:s.jsx(Xe,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"p-2 bg-orange-100 rounded-lg",children:s.jsx(UV,{className:"h-6 w-6 text-orange-600"})}),s.jsxs("div",{children:[s.jsx(Qe,{className:"text-xl font-bold text-orange-800",children:"Data Quality Validation"}),s.jsx("p",{className:"text-orange-600 text-sm",children:"Real-time data completeness and quality analysis"})]})]}),s.jsxs(se,{onClick:x,variant:"outline",size:"sm",className:"border-orange-300 text-orange-700 hover:bg-orange-100",children:[s.jsx(tn,{className:"h-4 w-4 mr-2"}),"Export Report"]})]})})}),s.jsx(e0,{open:r.summary,onOpenChange:()=>c("summary"),children:s.jsxs(Te,{children:[s.jsx(t0,{asChild:!0,children:s.jsx(Xe,{className:"cursor-pointer hover:bg-gray-50",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs(Qe,{className:"flex items-center space-x-2",children:[s.jsx(_M,{className:"h-5 w-5 text-blue-600"}),s.jsx("span",{children:"Data Quality Summary"})]}),r.summary?s.jsx(Uc,{className:"h-4 w-4"}):s.jsx(Ll,{className:"h-4 w-4"})]})})}),s.jsx(n0,{children:s.jsxs(Me,{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsxs("div",{className:`text-center p-4 bg-gradient-to-br from-blue-50 to-blue-100 rounded-lg cursor-pointer transition-all hover:shadow-md ${i==="completeness"?"ring-2 ring-blue-300":""}`,onClick:()=>y("completeness"),children:[s.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:[l.jobs.summary.averageCompletenessScore.toFixed(1),"%"]}),s.jsx("div",{className:"text-sm text-blue-600",children:"Average Completeness"}),s.jsx("div",{className:`text-xs font-medium ${h(l.jobs.summary.averageCompletenessScore)}`,children:f(l.jobs.summary.averageCompletenessScore)}),s.jsx("div",{className:"text-xs text-blue-500 mt-1",children:"Click to view all jobs"})]}),s.jsxs("div",{className:`text-center p-4 bg-gradient-to-br from-red-50 to-red-100 rounded-lg cursor-pointer transition-all hover:shadow-md ${i==="critical"?"ring-2 ring-red-300":""}`,onClick:()=>y("critical"),children:[s.jsx("div",{className:"text-2xl font-bold text-red-600",children:l.jobs.summary.criticalIssuesCount}),s.jsx("div",{className:"text-sm text-red-600",children:"Critical Issues"}),s.jsxs("div",{className:"text-xs text-red-500",children:[l.jobs.summary.jobsWithIssues," jobs affected"]}),s.jsx("div",{className:"text-xs text-red-500 mt-1",children:"Click to view affected jobs"})]}),s.jsxs("div",{className:`text-center p-4 bg-gradient-to-br from-yellow-50 to-yellow-100 rounded-lg cursor-pointer transition-all hover:shadow-md ${i==="warnings"?"ring-2 ring-yellow-300":""}`,onClick:()=>y("warnings"),children:[s.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:l.jobs.summary.jobsWithWarnings}),s.jsx("div",{className:"text-sm text-yellow-600",children:"Jobs with Warnings"}),s.jsxs("div",{className:"text-xs text-yellow-500",children:[(l.jobs.summary.jobsWithWarnings/l.jobs.summary.totalJobs*100).toFixed(1),"% of total"]}),s.jsx("div",{className:"text-xs text-yellow-500 mt-1",children:"Click to view affected jobs"})]}),s.jsxs("div",{className:`text-center p-4 bg-gradient-to-br from-green-50 to-green-100 rounded-lg cursor-pointer transition-all hover:shadow-md ${i==="excellent"?"ring-2 ring-green-300":""}`,onClick:()=>y("excellent"),children:[s.jsx("div",{className:"text-2xl font-bold text-green-600",children:l.jobs.summary.completenessDistribution.excellent}),s.jsx("div",{className:"text-sm text-green-600",children:"Excellent Jobs"}),s.jsxs("div",{className:"text-xs text-green-500",children:[(l.jobs.summary.completenessDistribution.excellent/l.jobs.summary.totalJobs*100).toFixed(1),"% of total"]}),s.jsx("div",{className:"text-xs text-green-500 mt-1",children:"Click to view excellent jobs"})]})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold mb-3",children:"Data Completeness Distribution"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm",children:"Excellent (90%+)"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Io,{value:l.jobs.summary.completenessDistribution.excellent/l.jobs.summary.totalJobs*100,className:"w-32"}),s.jsx("span",{className:"text-sm font-medium text-green-600",children:l.jobs.summary.completenessDistribution.excellent})]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm",children:"Good (70-89%)"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Io,{value:l.jobs.summary.completenessDistribution.good/l.jobs.summary.totalJobs*100,className:"w-32"}),s.jsx("span",{className:"text-sm font-medium text-blue-600",children:l.jobs.summary.completenessDistribution.good})]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm",children:"Fair (50-69%)"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Io,{value:l.jobs.summary.completenessDistribution.fair/l.jobs.summary.totalJobs*100,className:"w-32"}),s.jsx("span",{className:"text-sm font-medium text-yellow-600",children:l.jobs.summary.completenessDistribution.fair})]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm",children:"Poor (<50%)"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Io,{value:l.jobs.summary.completenessDistribution.poor/l.jobs.summary.totalJobs*100,className:"w-32"}),s.jsx("span",{className:"text-sm font-medium text-red-600",children:l.jobs.summary.completenessDistribution.poor})]})]})]})]}),i&&s.jsxs("div",{className:"mt-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("h4",{className:"font-semibold text-lg",children:[i==="critical"&&"Jobs with Critical Issues",i==="warnings"&&"Jobs with Warnings",i==="excellent"&&"Excellent Jobs (90%+)",i==="completeness"&&"All Jobs by Completeness"]}),s.jsx(se,{variant:"ghost",size:"sm",onClick:()=>o(null),className:"text-gray-500 hover:text-gray-700",children:"Clear Filter"})]}),s.jsx("div",{className:"space-y-3",children:g().map(m=>s.jsx("div",{className:`border rounded-lg p-4 cursor-pointer transition-all hover:shadow-md ${m.hasCriticalIssues?"border-red-200 bg-red-50":m.hasWarnings?"border-yellow-200 bg-yellow-50":m.completenessScore>=90?"border-green-200 bg-green-50":"border-gray-200 bg-gray-50"}`,onClick:()=>p(m.jobId),children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("h5",{className:"font-medium text-gray-900",children:m.jobName}),s.jsxs("div",{className:"flex items-center space-x-4 mt-1",children:[s.jsxs("span",{className:`text-sm font-medium ${m.completenessScore>=90?"text-green-600":m.completenessScore>=70?"text-blue-600":m.completenessScore>=50?"text-yellow-600":"text-red-600"}`,children:[m.completenessScore.toFixed(0),"% Complete"]}),m.hasCriticalIssues&&s.jsxs(ht,{variant:"destructive",className:"bg-red-100 text-red-800 text-xs",children:[m.issues.length," Critical Issues"]}),m.hasWarnings&&!m.hasCriticalIssues&&s.jsxs(ht,{variant:"secondary",className:"bg-yellow-100 text-yellow-800 text-xs",children:[m.warnings.length," Warnings"]}),m.completenessScore>=90&&s.jsx(ht,{variant:"default",className:"bg-green-100 text-green-800 text-xs",children:"Excellent"})]})]}),s.jsx(nk,{className:"h-4 w-4 text-gray-400"})]})},m.jobId))})]})]})})]})}),s.jsx(e0,{open:r.criticalIssues,onOpenChange:()=>c("criticalIssues"),children:s.jsxs(Te,{children:[s.jsx(t0,{asChild:!0,children:s.jsx(Xe,{className:"cursor-pointer hover:bg-gray-50",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs(Qe,{className:"flex items-center space-x-2",children:[s.jsx(Lm,{className:"h-5 w-5 text-red-600"}),s.jsxs("span",{children:["Critical Issues (",l.jobs.summary.criticalIssuesCount,")"]})]}),r.criticalIssues?s.jsx(Uc,{className:"h-4 w-4"}):s.jsx(Ll,{className:"h-4 w-4"})]})})}),s.jsx(n0,{children:s.jsx(Me,{children:l.jobs.summary.criticalIssuesCount===0?s.jsxs("div",{className:"text-center py-8",children:[s.jsx(Br,{className:"h-12 w-12 text-green-500 mx-auto mb-3"}),s.jsx("p",{className:"text-green-600 font-medium",children:"No critical issues found!"}),s.jsx("p",{className:"text-gray-500 text-sm",children:"All jobs have the essential data required for accurate analytics."})]}):s.jsx("div",{className:"space-y-4",children:l.jobs.validations.filter(m=>m.hasCriticalIssues).map(m=>s.jsxs("div",{className:"border border-red-200 rounded-lg p-4 bg-red-50",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx("h4",{className:"font-semibold text-red-800",children:m.jobName}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs(ht,{variant:"destructive",className:"bg-red-100 text-red-800",children:[m.issues.length," Critical Issues"]}),s.jsx(se,{variant:"ghost",size:"sm",onClick:()=>p(m.jobId),className:"text-red-600 hover:bg-red-100",children:s.jsx(nk,{className:"h-4 w-4"})})]})]}),s.jsx("div",{className:"space-y-2",children:m.issues.map((v,b)=>s.jsxs("div",{className:"flex items-start space-x-2",children:[s.jsx(Lm,{className:"h-4 w-4 text-red-500 mt-0.5 flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-red-800",children:v.message}),v.impact&&s.jsxs("p",{className:"text-xs text-red-600",children:["Impact: ",v.impact]})]})]},b))})]},m.jobId))})})})]})}),s.jsx(e0,{open:r.insights,onOpenChange:()=>c("insights"),children:s.jsxs(Te,{children:[s.jsx(t0,{asChild:!0,children:s.jsx(Xe,{className:"cursor-pointer hover:bg-gray-50",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs(Qe,{className:"flex items-center space-x-2",children:[s.jsx(Ei,{className:"h-5 w-5 text-purple-600"}),s.jsx("span",{children:"Data Quality Insights"})]}),r.insights?s.jsx(Uc,{className:"h-4 w-4"}):s.jsx(Ll,{className:"h-4 w-4"})]})})}),s.jsx(n0,{children:s.jsx(Me,{children:l.insights.length===0?s.jsxs("div",{className:"text-center py-8",children:[s.jsx(Br,{className:"h-12 w-12 text-green-500 mx-auto mb-3"}),s.jsx("p",{className:"text-green-600 font-medium",children:"No insights to report!"}),s.jsx("p",{className:"text-gray-500 text-sm",children:"Your data quality is excellent."})]}):s.jsx("div",{className:"space-y-4",children:l.insights.map((m,v)=>s.jsx("div",{className:`border rounded-lg p-4 ${d(m.severity)}`,children:s.jsxs("div",{className:"flex items-start space-x-3",children:[u(m.severity),s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"font-semibold mb-1",children:m.message}),m.recommendation&&s.jsx("p",{className:"text-sm mb-2",children:m.recommendation}),m.impact&&s.jsxs("p",{className:"text-xs opacity-75",children:["Impact: ",m.impact]}),m.details&&s.jsxs("div",{className:"mt-2",children:[s.jsx("p",{className:"text-xs font-medium mb-1",children:"Common issues:"}),s.jsx("div",{className:"space-y-1",children:m.details.map((b,C)=>s.jsxs("div",{className:"text-xs",children:[b.field,": ",b.count," occurrences"]},C))})]})]})]})},v))})})})]})}),s.jsx(e0,{open:r.recommendations,onOpenChange:()=>c("recommendations"),children:s.jsxs(Te,{children:[s.jsx(t0,{asChild:!0,children:s.jsx(Xe,{className:"cursor-pointer hover:bg-gray-50",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs(Qe,{className:"flex items-center space-x-2",children:[s.jsx(wS,{className:"h-5 w-5 text-green-600"}),s.jsx("span",{children:"Improvement Recommendations"})]}),r.recommendations?s.jsx(Uc,{className:"h-4 w-4"}):s.jsx(Ll,{className:"h-4 w-4"})]})})}),s.jsx(n0,{children:s.jsx(Me,{children:l.recommendations.length===0?s.jsxs("div",{className:"text-center py-8",children:[s.jsx(Br,{className:"h-12 w-12 text-green-500 mx-auto mb-3"}),s.jsx("p",{className:"text-green-600 font-medium",children:"No recommendations needed!"}),s.jsx("p",{className:"text-gray-500 text-sm",children:"Your data quality processes are working well."})]}):s.jsx("div",{className:"space-y-4",children:l.recommendations.map((m,v)=>s.jsxs("div",{className:"border border-green-200 rounded-lg p-4 bg-green-50",children:[s.jsxs("div",{className:"flex items-start justify-between mb-3",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-green-800",children:m.title}),s.jsx("p",{className:"text-sm text-green-600",children:m.description})]}),s.jsxs(ht,{variant:m.priority==="high"?"destructive":"secondary",className:m.priority==="high"?"bg-red-100 text-red-800":"bg-blue-100 text-blue-800",children:[m.priority," priority"]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs font-medium text-green-700 mb-2",children:"Recommended Actions:"}),s.jsx("ul",{className:"space-y-1",children:m.actions.map((b,C)=>s.jsxs("li",{className:"text-xs text-green-600 flex items-center space-x-2",children:[s.jsx("div",{className:"w-1 h-1 bg-green-500 rounded-full"}),s.jsx("span",{children:b})]},C))})]})]},v))})})})]})})]})},Bje=({jobs:e,employees:t})=>{const[n,r]=j.useState("all"),[a,i]=j.useState("all"),[o,l]=j.useState("profit"),[c,d]=j.useState("all"),u=j.useMemo(()=>ym.validateAllJobs(e),[e]),h=j.useMemo(()=>{const p=e.filter(D=>{const N=n==="all"||n==="this-month"&&new Date(D.createdAt).getMonth()===new Date().getMonth()||n==="this-quarter"&&Math.floor(new Date(D.createdAt).getMonth()/3)===Math.floor(new Date().getMonth()/3)||n==="this-year"&&new Date(D.createdAt).getFullYear()===new Date().getFullYear(),M=a==="all"||D.jobType===a,L=u.validations.find(E=>E.jobId===D.id);let T=!0;return c==="excellent"?T=L&&L.completenessScore>=90:c==="good"?T=L&&L.completenessScore>=70:c==="issues"?T=L&&(L.hasCriticalIssues||L.hasWarnings):c==="critical"&&(T=L&&L.hasCriticalIssues),N&&M&&T}),y=p.reduce((D,N)=>{var T,E,A,O,W;const M=((E=(T=N.financials)==null?void 0:T.estimate)==null?void 0:E.totalEstimateAmount)||0,L=((W=(O=(A=N.financials)==null?void 0:A.fieldRevised)==null?void 0:O.changeOrders)==null?void 0:W.reduce((z,F)=>z+(F.totalValue||0),0))||0;return D+M+L},0),g=p.reduce((D,N)=>{var E,A,O,W,z,F,V,B,Y;const M=((O=(A=(E=N.financials)==null?void 0:E.actual)==null?void 0:A.laborCosts)==null?void 0:O.reduce(($,I)=>$+(I.amount||0),0))||0,L=((F=(z=(W=N.financials)==null?void 0:W.actual)==null?void 0:z.manualLaborCosts)==null?void 0:F.reduce(($,I)=>$+(I.amount||0),0))||0,T=((Y=(B=(V=N.financials)==null?void 0:V.actual)==null?void 0:B.materialInvoices)==null?void 0:Y.reduce(($,I)=>$+(I.dollarAmount||0)+(I.salesTax||0),0))||0;return D+M+L+T},0),x=y-g,m=y>0?x/y*100:0,v=p.map(D=>{var F,V,B,Y,$,I,U,q,X,te,ae,le,me,Le;const N=((V=(F=D.financials)==null?void 0:F.estimate)==null?void 0:V.totalEstimateAmount)||0,M=(($=(Y=(B=D.financials)==null?void 0:B.fieldRevised)==null?void 0:Y.changeOrders)==null?void 0:$.reduce((ie,Ne)=>ie+(Ne.totalValue||0),0))||0,L=N+M,T=((q=(U=(I=D.financials)==null?void 0:I.actual)==null?void 0:U.laborCosts)==null?void 0:q.reduce((ie,Ne)=>ie+(Ne.amount||0),0))||0,E=((ae=(te=(X=D.financials)==null?void 0:X.actual)==null?void 0:te.manualLaborCosts)==null?void 0:ae.reduce((ie,Ne)=>ie+(Ne.amount||0),0))||0,A=((Le=(me=(le=D.financials)==null?void 0:le.actual)==null?void 0:me.materialInvoices)==null?void 0:Le.reduce((ie,Ne)=>ie+(Ne.dollarAmount||0)+(Ne.salesTax||0),0))||0,O=T+E+A,W=L-O,z=L>0?W/L*100:0;return{...D,revenue:L,totalCost:O,profit:W,profitMargin:z,costVariance:N>0?(O-N)/N*100:0}}),b=[...v].sort((D,N)=>{switch(o){case"profit":return N.profit-D.profit;case"profit-margin":return N.profitMargin-D.profitMargin;case"revenue":return N.revenue-D.revenue;case"cost-variance":return Math.abs(N.costVariance)-Math.abs(D.costVariance);default:return N.profit-D.profit}}),C=t.map(D=>{const N=p.filter(T=>{var E,A,O,W,z,F;return((O=(A=(E=T.financials)==null?void 0:E.actual)==null?void 0:A.laborCosts)==null?void 0:O.some(V=>V.employeeId===D.id))||((F=(z=(W=T.financials)==null?void 0:W.actual)==null?void 0:z.manualLaborCosts)==null?void 0:F.some(V=>V.employeeId===D.id))}),M=N.reduce((T,E)=>{var W,z,F,V,B,Y;const A=((F=(z=(W=E.financials)==null?void 0:W.actual)==null?void 0:z.laborCosts)==null?void 0:F.filter($=>$.employeeId===D.id).reduce(($,I)=>$+(I.hours||0),0))||0,O=((Y=(B=(V=E.financials)==null?void 0:V.actual)==null?void 0:B.manualLaborCosts)==null?void 0:Y.filter($=>$.employeeId===D.id).reduce(($,I)=>$+(I.hours||0),0))||0;return T+A+O},0),L=N.reduce((T,E)=>{var W,z,F,V,B,Y;const A=((F=(z=(W=E.financials)==null?void 0:W.actual)==null?void 0:z.laborCosts)==null?void 0:F.filter($=>$.employeeId===D.id).reduce(($,I)=>$+(I.amount||0),0))||0,O=((Y=(B=(V=E.financials)==null?void 0:V.actual)==null?void 0:B.manualLaborCosts)==null?void 0:Y.filter($=>$.employeeId===D.id).reduce(($,I)=>$+(I.amount||0),0))||0;return T+A+O},0);return{...D,totalHours:M,totalEarnings:L,hourlyRate:M>0?L/M:0,jobsWorked:N.length}}).filter(D=>D.totalHours>0),S=p.reduce((D,N)=>{var L,T;return(((T=(L=N.financials)==null?void 0:L.actual)==null?void 0:T.materialInvoices)||[]).forEach(E=>{E.sqftDelivered>0&&E.dollarAmount/E.sqftDelivered,D.totalMaterialCost+=E.dollarAmount,D.totalSalesTax+=E.salesTax||0,D.totalSqft+=E.sqftDelivered,D.averageCostPerSqft=D.totalSqft>0?D.totalMaterialCost/D.totalSqft:0}),D},{totalMaterialCost:0,totalSalesTax:0,totalSqft:0,averageCostPerSqft:0}),P={profitableJobs:v.filter(D=>D.profit>0).length,breakEvenJobs:v.filter(D=>D.profit===0).length,lossMakingJobs:v.filter(D=>D.profit<0).length,averageProfitMargin:v.length>0?v.reduce((D,N)=>D+N.profitMargin,0)/v.length:0,averageCostVariance:v.length>0?v.reduce((D,N)=>D+N.costVariance,0)/v.length:0};return{totalRevenue:y,totalCosts:g,totalProfit:x,profitMargin:m,jobPerformance:b,employeeProductivity:C,materialAnalysis:S,performanceTrends:P,totalJobs:p.length}},[e,t,n,a,o,c,u]),f=()=>{const p=h.jobPerformance.map(b=>({"Job Name":b.jobName,"Job Type":b.jobType,Revenue:b.revenue.toFixed(2),"Total Cost":b.totalCost.toFixed(2),Profit:b.profit.toFixed(2),"Profit Margin %":b.profitMargin.toFixed(2),"Cost Variance %":b.costVariance.toFixed(2)})),y=Object.keys(p[0]),g=[y.join(","),...p.map(b=>y.map(C=>`"${b[C]}"`).join(","))].join(`
`),x=new Blob([g],{type:"text/csv"}),m=window.URL.createObjectURL(x),v=document.createElement("a");v.href=m,v.download=`analytics-${n}-${a}-${new Date().toISOString().split("T")[0]}.csv`,v.click(),window.URL.revokeObjectURL(m),pe({title:"Analytics Exported! 📊",description:"Your analytics data has been downloaded as a CSV file."})};return s.jsxs("div",{className:"space-y-6",children:[s.jsx(Pt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:s.jsx(Te,{className:"border-0 bg-gradient-to-r from-purple-600 to-blue-600 text-white shadow-2xl",children:s.jsx(Xe,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"p-3 bg-white/20 rounded-xl",children:s.jsx(Jf,{className:"h-8 w-8"})}),s.jsxs("div",{children:[s.jsx(Qe,{className:"text-3xl font-bold",children:"Analytics Dashboard"}),s.jsx("p",{className:"text-white/80 mt-1",children:"Comprehensive insights into your business performance"})]})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsxs("div",{className:"flex items-center space-x-2 bg-white/10 rounded-lg px-3 py-2",children:[s.jsx("div",{className:`w-3 h-3 rounded-full ${u.summary.criticalIssuesCount===0?"bg-green-400":u.summary.averageCompletenessScore>=70?"bg-yellow-400":"bg-red-400"}`}),s.jsxs("span",{className:"text-white/90 text-sm font-medium",children:[u.summary.averageCompletenessScore.toFixed(0),"% Complete"]}),u.summary.criticalIssuesCount>0&&s.jsxs(ht,{variant:"destructive",className:"bg-red-500 text-white text-xs",children:[u.summary.criticalIssuesCount," Critical"]})]}),s.jsxs(se,{onClick:f,variant:"outline",className:"bg-white/10 border-white/20 text-white hover:bg-white/20",children:[s.jsx(Ri,{className:"h-4 w-4 mr-2"}),"Export"]})]})]})})})}),s.jsx(Te,{children:s.jsx(Me,{className:"p-6",children:s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(bS,{className:"h-4 w-4 text-gray-500"}),s.jsx("span",{className:"text-sm font-medium",children:"Filters:"})]}),s.jsxs(st,{value:n,onValueChange:r,children:[s.jsx(nt,{className:"w-40",children:s.jsx(at,{})}),s.jsxs(rt,{children:[s.jsx(xe,{value:"all",children:"All Time"}),s.jsx(xe,{value:"this-month",children:"This Month"}),s.jsx(xe,{value:"this-quarter",children:"This Quarter"}),s.jsx(xe,{value:"this-year",children:"This Year"})]})]}),s.jsxs(st,{value:a,onValueChange:i,children:[s.jsx(nt,{className:"w-40",children:s.jsx(at,{})}),s.jsxs(rt,{children:[s.jsx(xe,{value:"all",children:"All Job Types"}),s.jsx(xe,{value:"residential",children:"Residential"}),s.jsx(xe,{value:"commercial",children:"Commercial"})]})]}),s.jsxs(st,{value:o,onValueChange:l,children:[s.jsx(nt,{className:"w-40",children:s.jsx(at,{})}),s.jsxs(rt,{children:[s.jsx(xe,{value:"profit",children:"Sort by Profit"}),s.jsx(xe,{value:"profit-margin",children:"Sort by Profit Margin"}),s.jsx(xe,{value:"revenue",children:"Sort by Revenue"}),s.jsx(xe,{value:"cost-variance",children:"Sort by Cost Variance"})]})]}),s.jsxs(st,{value:c,onValueChange:d,children:[s.jsx(nt,{className:"w-40",children:s.jsx(at,{})}),s.jsxs(rt,{children:[s.jsx(xe,{value:"all",children:"All Data Quality"}),s.jsx(xe,{value:"excellent",children:"Excellent (90%+)"}),s.jsx(xe,{value:"good",children:"Good (70%+)"}),s.jsx(xe,{value:"issues",children:"Has Issues"}),s.jsx(xe,{value:"critical",children:"Critical Issues"})]})]})]})})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[s.jsx(Te,{className:"border-2 border-green-200 bg-green-50",children:s.jsx(Me,{className:"p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-green-600",children:"Total Revenue"}),s.jsxs("p",{className:"text-2xl font-bold text-green-700",children:["$",h.totalRevenue.toLocaleString()]}),s.jsxs("p",{className:"text-xs text-green-600",children:[h.totalJobs," jobs"]})]}),s.jsx(_r,{className:"h-8 w-8 text-green-600"})]})})}),s.jsx(Te,{className:"border-2 border-blue-200 bg-blue-50",children:s.jsx(Me,{className:"p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-blue-600",children:"Total Costs"}),s.jsxs("p",{className:"text-2xl font-bold text-blue-700",children:["$",h.totalCosts.toLocaleString()]}),s.jsx("p",{className:"text-xs text-blue-600",children:"All expenses"})]}),s.jsx(Qs,{className:"h-8 w-8 text-blue-600"})]})})}),s.jsx(Te,{className:`border-2 ${h.totalProfit>=0?"border-green-200 bg-green-50":"border-red-200 bg-red-50"}`,children:s.jsx(Me,{className:"p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Profit"}),s.jsxs("p",{className:`text-2xl font-bold ${h.totalProfit>=0?"text-green-700":"text-red-700"}`,children:["$",h.totalProfit.toLocaleString()]}),s.jsxs("p",{className:`text-xs ${h.totalProfit>=0?"text-green-600":"text-red-600"}`,children:[h.profitMargin.toFixed(1),"% margin"]})]}),h.totalProfit>=0?s.jsx(Ei,{className:"h-8 w-8 text-green-600"}):s.jsx(ug,{className:"h-8 w-8 text-red-600"})]})})}),s.jsx(Te,{className:"border-2 border-purple-200 bg-purple-50",children:s.jsx(Me,{className:"p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-purple-600",children:"Avg Profit Margin"}),s.jsxs("p",{className:"text-2xl font-bold text-purple-700",children:[h.performanceTrends.averageProfitMargin.toFixed(1),"%"]}),s.jsx("p",{className:"text-xs text-purple-600",children:"Per job"})]}),s.jsx(_M,{className:"h-8 w-8 text-purple-600"})]})})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsx(Te,{className:"border-2 border-green-200 bg-green-50",children:s.jsxs(Me,{className:"p-6 text-center",children:[s.jsx(Br,{className:"h-12 w-12 text-green-600 mx-auto mb-3"}),s.jsx("h3",{className:"text-lg font-semibold text-green-800",children:"Profitable Jobs"}),s.jsx("p",{className:"text-3xl font-bold text-green-700",children:h.performanceTrends.profitableJobs}),s.jsxs("p",{className:"text-sm text-green-600",children:[h.totalJobs>0?(h.performanceTrends.profitableJobs/h.totalJobs*100).toFixed(1):0,"% of total"]})]})}),s.jsx(Te,{className:"border-2 border-yellow-200 bg-yellow-50",children:s.jsxs(Me,{className:"p-6 text-center",children:[s.jsx(Au,{className:"h-12 w-12 text-yellow-600 mx-auto mb-3"}),s.jsx("h3",{className:"text-lg font-semibold text-yellow-800",children:"Break Even"}),s.jsx("p",{className:"text-3xl font-bold text-yellow-700",children:h.performanceTrends.breakEvenJobs}),s.jsxs("p",{className:"text-sm text-yellow-600",children:[h.totalJobs>0?(h.performanceTrends.breakEvenJobs/h.totalJobs*100).toFixed(1):0,"% of total"]})]})}),s.jsx(Te,{className:"border-2 border-red-200 bg-red-50",children:s.jsxs(Me,{className:"p-6 text-center",children:[s.jsx(Lm,{className:"h-12 w-12 text-red-600 mx-auto mb-3"}),s.jsx("h3",{className:"text-lg font-semibold text-red-800",children:"Loss Making"}),s.jsx("p",{className:"text-3xl font-bold text-red-700",children:h.performanceTrends.lossMakingJobs}),s.jsxs("p",{className:"text-sm text-red-600",children:[h.totalJobs>0?(h.performanceTrends.lossMakingJobs/h.totalJobs*100).toFixed(1):0,"% of total"]})]})})]}),s.jsxs(uo,{defaultValue:"jobs",className:"space-y-6",children:[s.jsxs(Oi,{className:"grid w-full grid-cols-6",children:[s.jsx(Ht,{value:"jobs",children:"Job Performance"}),s.jsx(Ht,{value:"employees",children:"Employee Analytics"}),s.jsx(Ht,{value:"materials",children:"Material Analysis"}),s.jsx(Ht,{value:"trends",children:"Performance Trends"}),s.jsx(Ht,{value:"charts",children:"Visual Charts"}),s.jsx(Ht,{value:"validation",children:"Data Quality"})]}),s.jsx(en,{value:"jobs",className:"space-y-6",children:s.jsxs(Te,{children:[s.jsx(Xe,{children:s.jsxs(Qe,{className:"flex items-center",children:[s.jsx(Qs,{className:"h-5 w-5 mr-2 text-blue-600"}),"Job Performance Analysis"]})}),s.jsx(Me,{children:s.jsxs(Hr,{children:[s.jsx(qr,{children:s.jsxs(Jt,{children:[s.jsx(qe,{children:"Job Name"}),s.jsx(qe,{children:"Type"}),s.jsx(qe,{className:"text-right",children:"Revenue"}),s.jsx(qe,{className:"text-right",children:"Costs"}),s.jsx(qe,{className:"text-right",children:"Profit"}),s.jsx(qe,{className:"text-right",children:"Margin %"}),s.jsx(qe,{className:"text-right",children:"Variance %"}),s.jsx(qe,{children:"Status"})]})}),s.jsx(Vr,{children:h.jobPerformance.map(p=>s.jsxs(Jt,{children:[s.jsx(ze,{className:"font-medium",children:p.jobName}),s.jsx(ze,{children:s.jsx(ht,{variant:p.jobType==="residential"?"default":"secondary",children:p.jobType})}),s.jsxs(ze,{className:"text-right",children:["$",p.revenue.toLocaleString()]}),s.jsxs(ze,{className:"text-right",children:["$",p.totalCost.toLocaleString()]}),s.jsxs(ze,{className:`text-right font-medium ${p.profit>=0?"text-green-600":"text-red-600"}`,children:["$",p.profit.toLocaleString()]}),s.jsxs(ze,{className:`text-right ${p.profitMargin>=0?"text-green-600":"text-red-600"}`,children:[p.profitMargin.toFixed(1),"%"]}),s.jsxs(ze,{className:`text-right ${Math.abs(p.costVariance)<=10?"text-green-600":p.costVariance>0?"text-red-600":"text-yellow-600"}`,children:[p.costVariance.toFixed(1),"%"]}),s.jsx(ze,{children:s.jsxs("div",{className:"space-y-1",children:[s.jsx(ht,{variant:p.profit>0?"default":p.profit===0?"secondary":"destructive",className:p.profit>0?"bg-green-100 text-green-800":p.profit===0?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800",children:p.profit>0?"Profitable":p.profit===0?"Break Even":"Loss"}),(()=>{const y=u.validations.find(g=>g.jobId===p.id);return y&&y.hasCriticalIssues?s.jsxs(ht,{variant:"destructive",className:"bg-red-100 text-red-800 text-xs",children:[s.jsx(AlertTriangle,{className:"h-3 w-3 mr-1"}),"Data Issues"]}):y&&y.completenessScore<70?s.jsxs(ht,{variant:"secondary",className:"bg-yellow-100 text-yellow-800 text-xs",children:[s.jsx(Info,{className:"h-3 w-3 mr-1"}),"Incomplete"]}):null})()]})})]},p.id))})]})})]})}),s.jsx(en,{value:"employees",className:"space-y-6",children:s.jsxs(Te,{children:[s.jsx(Xe,{children:s.jsxs(Qe,{className:"flex items-center",children:[s.jsx(vr,{className:"h-5 w-5 mr-2 text-green-600"}),"Employee Productivity Analysis"]})}),s.jsx(Me,{children:s.jsxs(Hr,{children:[s.jsx(qr,{children:s.jsxs(Jt,{children:[s.jsx(qe,{children:"Employee"}),s.jsx(qe,{className:"text-right",children:"Total Hours"}),s.jsx(qe,{className:"text-right",children:"Total Earnings"}),s.jsx(qe,{className:"text-right",children:"Hourly Rate"}),s.jsx(qe,{className:"text-right",children:"Jobs Worked"}),s.jsx(qe,{children:"Performance"})]})}),s.jsx(Vr,{children:h.employeeProductivity.map(p=>s.jsxs(Jt,{children:[s.jsx(ze,{className:"font-medium",children:p.name}),s.jsxs(ze,{className:"text-right",children:[p.totalHours.toFixed(1),"h"]}),s.jsxs(ze,{className:"text-right",children:["$",p.totalEarnings.toLocaleString()]}),s.jsxs(ze,{className:"text-right",children:["$",p.hourlyRate.toFixed(2),"/hr"]}),s.jsx(ze,{className:"text-right",children:p.jobsWorked}),s.jsx(ze,{children:s.jsx(ht,{variant:p.hourlyRate>25?"default":p.hourlyRate>20?"secondary":"destructive",className:p.hourlyRate>25?"bg-green-100 text-green-800":p.hourlyRate>20?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800",children:p.hourlyRate>25?"High":p.hourlyRate>20?"Medium":"Low"})})]},p.id))})]})})]})}),s.jsxs(en,{value:"materials",className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsx(Te,{className:"border-2 border-blue-200 bg-blue-50",children:s.jsxs(Me,{className:"p-6 text-center",children:[s.jsx(ya,{className:"h-12 w-12 text-blue-600 mx-auto mb-3"}),s.jsx("h3",{className:"text-lg font-semibold text-blue-800",children:"Total Material Cost"}),s.jsxs("p",{className:"text-3xl font-bold text-blue-700",children:["$",h.materialAnalysis.totalMaterialCost.toLocaleString()]}),s.jsx("p",{className:"text-sm text-blue-600",children:"All materials purchased"})]})}),s.jsx(Te,{className:"border-2 border-green-200 bg-green-50",children:s.jsxs(Me,{className:"p-6 text-center",children:[s.jsx(AV,{className:"h-12 w-12 text-green-600 mx-auto mb-3"}),s.jsx("h3",{className:"text-lg font-semibold text-green-800",children:"Total SqFt Delivered"}),s.jsx("p",{className:"text-3xl font-bold text-green-700",children:h.materialAnalysis.totalSqft.toLocaleString()}),s.jsx("p",{className:"text-sm text-green-600",children:"Square footage delivered"})]})}),s.jsx(Te,{className:"border-2 border-purple-200 bg-purple-50",children:s.jsxs(Me,{className:"p-6 text-center",children:[s.jsx(_r,{className:"h-12 w-12 text-purple-600 mx-auto mb-3"}),s.jsx("h3",{className:"text-lg font-semibold text-purple-800",children:"Avg Cost per SqFt"}),s.jsxs("p",{className:"text-3xl font-bold text-purple-700",children:["$",h.materialAnalysis.averageCostPerSqft.toFixed(2)]}),s.jsx("p",{className:"text-sm text-purple-600",children:"Average material cost"})]})})]}),s.jsxs(Te,{children:[s.jsx(Xe,{children:s.jsxs(Qe,{className:"flex items-center",children:[s.jsx(qV,{className:"h-5 w-5 mr-2 text-purple-600"}),"Material Cost Breakdown"]})}),s.jsx(Me,{children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex justify-between items-center p-4 bg-blue-50 rounded-lg",children:[s.jsx("span",{className:"font-medium",children:"Material Costs"}),s.jsxs("span",{className:"font-bold text-blue-600",children:["$",h.materialAnalysis.totalMaterialCost.toLocaleString()]})]}),s.jsxs("div",{className:"flex justify-between items-center p-4 bg-green-50 rounded-lg",children:[s.jsx("span",{className:"font-medium",children:"Sales Tax"}),s.jsxs("span",{className:"font-bold text-green-600",children:["$",h.materialAnalysis.totalSalesTax.toLocaleString()]})]}),s.jsxs("div",{className:"flex justify-between items-center p-4 bg-purple-50 rounded-lg",children:[s.jsx("span",{className:"font-medium",children:"Total Material Expenses"}),s.jsxs("span",{className:"font-bold text-purple-600",children:["$",(h.materialAnalysis.totalMaterialCost+h.materialAnalysis.totalSalesTax).toLocaleString()]})]})]})})]})]}),s.jsx(en,{value:"trends",className:"space-y-6",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs(Te,{children:[s.jsx(Xe,{children:s.jsxs(Qe,{className:"flex items-center",children:[s.jsx(Ei,{className:"h-5 w-5 mr-2 text-green-600"}),"Profitability Trends"]})}),s.jsx(Me,{children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{children:"Average Profit Margin"}),s.jsxs("span",{className:`font-bold ${h.performanceTrends.averageProfitMargin>=0?"text-green-600":"text-red-600"}`,children:[h.performanceTrends.averageProfitMargin.toFixed(1),"%"]})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{children:"Average Cost Variance"}),s.jsxs("span",{className:`font-bold ${Math.abs(h.performanceTrends.averageCostVariance)<=10?"text-green-600":h.performanceTrends.averageCostVariance>0?"text-red-600":"text-yellow-600"}`,children:[h.performanceTrends.averageCostVariance.toFixed(1),"%"]})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{children:"Profitable Jobs Ratio"}),s.jsxs("span",{className:"font-bold text-green-600",children:[h.totalJobs>0?(h.performanceTrends.profitableJobs/h.totalJobs*100).toFixed(1):0,"%"]})]})]})})]}),s.jsxs(Te,{children:[s.jsx(Xe,{children:s.jsxs(Qe,{className:"flex items-center",children:[s.jsx(kn,{className:"h-5 w-5 mr-2 text-blue-600"}),"Efficiency Metrics"]})}),s.jsx(Me,{children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{children:"Total Jobs Analyzed"}),s.jsx("span",{className:"font-bold text-blue-600",children:h.totalJobs})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{children:"Average Revenue per Job"}),s.jsxs("span",{className:"font-bold text-blue-600",children:["$",h.totalJobs>0?(h.totalRevenue/h.totalJobs).toLocaleString():0]})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{children:"Average Cost per Job"}),s.jsxs("span",{className:"font-bold text-blue-600",children:["$",h.totalJobs>0?(h.totalCosts/h.totalJobs).toLocaleString():0]})]})]})})]})]})}),s.jsx(en,{value:"charts",className:"space-y-6",children:s.jsx(Pje,{analytics:h})}),s.jsx(en,{value:"validation",className:"space-y-6",children:s.jsx($je,{jobs:e,employees:t,onJobClick:p=>{console.log("Navigate to job:",p)}})})]})]})};class zje{constructor(){this.supplierPricing={"ABC Supply Co":{'5/8" drywall':{unitPrice:12.5,unit:"sheets",lastUpdated:"2024-01-15"},'1/2" drywall':{unitPrice:10.25,unit:"sheets",lastUpdated:"2024-01-15"},"joint compound":{unitPrice:18.75,unit:"buckets",lastUpdated:"2024-01-15"},"drywall screws":{unitPrice:.15,unit:"pieces",lastUpdated:"2024-01-15"},"joint tape":{unitPrice:8.5,unit:"rolls",lastUpdated:"2024-01-15"}},"XYZ Materials":{'5/8" drywall':{unitPrice:12.75,unit:"sheets",lastUpdated:"2024-01-20"},'1/2" drywall':{unitPrice:10.5,unit:"sheets",lastUpdated:"2024-01-20"},"joint compound":{unitPrice:19,unit:"buckets",lastUpdated:"2024-01-20"},"drywall screws":{unitPrice:.16,unit:"pieces",lastUpdated:"2024-01-20"},"joint tape":{unitPrice:8.75,unit:"rolls",lastUpdated:"2024-01-20"}}},this.historicalPricing={'5/8" drywall':{avgPrice:12.6,unit:"sheets",sampleSize:45},'1/2" drywall':{avgPrice:10.35,unit:"sheets",sampleSize:38},"joint compound":{avgPrice:18.85,unit:"buckets",sampleSize:52},"drywall screws":{avgPrice:.155,unit:"pieces",sampleSize:67},"joint tape":{avgPrice:8.6,unit:"rolls",sampleSize:29}},this.marketPricing={'5/8" drywall':{unitPrice:12.4,unit:"sheets",source:"industry_avg"},'1/2" drywall':{unitPrice:10.2,unit:"sheets",source:"industry_avg"},"joint compound":{unitPrice:18.5,unit:"buckets",source:"industry_avg"},"drywall screws":{unitPrice:.15,unit:"pieces",source:"industry_avg"},"joint tape":{unitPrice:8.4,unit:"rolls",source:"industry_avg"}}}getSupplierPrice(t,n){const r=this.supplierPricing[t];if(!r)return null;if(r[n.toLowerCase()])return r[n.toLowerCase()];for(const[a,i]of Object.entries(r))if(n.toLowerCase().includes(a)||a.includes(n.toLowerCase()))return i;return null}getHistoricalPrice(t){const n=t.toLowerCase();for(const[r,a]of Object.entries(this.historicalPricing))if(n.includes(r)||r.includes(n))return a;return null}getMarketPrice(t){const n=t.toLowerCase();for(const[r,a]of Object.entries(this.marketPricing))if(n.includes(r)||r.includes(n))return a;return null}getBestPrice(t,n){const r=this.getSupplierPrice(t,n);if(r)return{...r,source:"supplier_contract"};const a=this.getHistoricalPrice(n);if(a)return{unitPrice:a.avgPrice,unit:a.unit,source:"historical_average",sampleSize:a.sampleSize};const i=this.getMarketPrice(n);return i?{...i,source:"market_reference"}:null}updateSupplierPricing(t,n,r,a){this.supplierPricing[t]||(this.supplierPricing[t]={}),this.supplierPricing[t][n.toLowerCase()]={unitPrice:r,unit:a,lastUpdated:new Date().toISOString().split("T")[0]}}addHistoricalPrice(t,n,r){const a=t.toLowerCase();if(!this.historicalPricing[a])this.historicalPricing[a]={avgPrice:n,unit:r,sampleSize:1};else{const i=this.historicalPricing[a],o=i.sampleSize+1,l=(i.avgPrice*i.sampleSize+n)/o;this.historicalPricing[a]={avgPrice:l,unit:r,sampleSize:o}}}exportPricingData(){return{supplierPricing:this.supplierPricing,historicalPricing:this.historicalPricing,marketPricing:this.marketPricing,exportedAt:new Date().toISOString()}}importPricingData(t){t.supplierPricing&&(this.supplierPricing=t.supplierPricing),t.historicalPricing&&(this.historicalPricing=t.historicalPricing),t.marketPricing&&(this.marketPricing=t.marketPricing)}}const Tl=new zje;class Wje{constructor(){this.supplierMappings={"ABC Supply":["ABC Supply Co","ABC Supply Company","ABC"],"XYZ Materials":["XYZ Materials Inc","XYZ","XYZ Mat"],USG:["USG Corporation","USG Corp","USG"],"National Gypsum":["National Gypsum Company","National Gypsum Co","National Gypsum"],CertainTeed:["CertainTeed Corporation","CertainTeed Corp","CertainTeed"],"Georgia-Pacific":["Georgia-Pacific Corporation","Georgia-Pacific Corp","GP"]},this.materialMappings={drywall_5_8:['5/8" drywall',"5/8 drywall",'5/8" sheetrock',"5/8 sheetrock",'5/8" gypsum board',"5/8 gypsum board",'5/8" wallboard',"5/8 wallboard",'5/8" firecode',"5/8 firecode",'5/8" type x',"5/8 type x",'ultralight 5/8"',"ultralight 5/8",'ultralight 5/8" drywall','firecode c 5/8"',"firecode c 5/8",'firecode 5/8"','sheetrock 5/8" firecode','sheetrock 5/8" ultralight','usg sheetrock 5/8"','usg 5/8"','national gypsum 5/8"','certainteed 5/8"','gp 5/8"'],drywall_1_2:['1/2" drywall',"1/2 drywall",'1/2" sheetrock',"1/2 sheetrock",'1/2" gypsum board',"1/2 gypsum board",'1/2" wallboard',"1/2 wallboard",'ultralight 1/2"',"ultralight 1/2",'ultralight 1/2" drywall','sheetrock 1/2"','sheetrock 1/2" ultralight','usg sheetrock 1/2"','usg 1/2"','national gypsum 1/2"','certainteed 1/2"','gp 1/2"'],drywall_3_8:['3/8" drywall',"3/8 drywall",'3/8" sheetrock',"3/8 sheetrock",'3/8" gypsum board',"3/8 gypsum board",'3/8" wallboard',"3/8 wallboard"],joint_compound:["joint compound","joint compound all purpose","all purpose joint compound","lite weight joint compound","lightweight joint compound","easy sand 90","easy sand 45","easy sand 20","easy sand 5","easy sand joint compound","quick set joint compound","sheetrock joint compound","usg joint compound","mud","drywall mud","spackle","drywall compound","all purpose mud","lightweight mud","quick set mud"],drywall_screws:["drywall screws","drywall screw","construction screws",'drywall screws 1"','drywall screws 1-1/4"','drywall screws 1-5/8"','drywall screws 2"','drywall screws 2-1/2"','drywall screws 3"',"sheetrock screws","usg screws","national gypsum screws","phillips drywall screws","square drive drywall screws","coarse thread drywall screws","fine thread drywall screws"],joint_tape:["joint tape","drywall tape","paper tape","mesh tape","500' paper tape","300' mesh tape","no coat 325","sheetrock tape","usg tape","national gypsum tape","fiberglass tape","paper joint tape","mesh joint tape"],corner_bead:["corner bead","corner bead square","square bead","bullnose corner bead","bullnose bead","splay corner bead","arch corner bead","arch bead","tearaway corner bead","tearaway bead","vinyl corner bead","metal corner bead","usg corner bead","national gypsum corner bead"],adhesives:["titebond foam","spray adhesive","construction adhesive","drywall adhesive","panel adhesive","foam adhesive","liquid nails","loctite","3m adhesive"]},this.priceEstimates={drywall_5_8:{unitPrice:12.5,unit:"sheets"},drywall_1_2:{unitPrice:10.25,unit:"sheets"},drywall_3_8:{unitPrice:8.75,unit:"sheets"},joint_compound:{unitPrice:18.75,unit:"buckets"},drywall_screws:{unitPrice:.15,unit:"pieces"},joint_tape:{unitPrice:8.5,unit:"rolls"},corner_bead:{unitPrice:2.25,unit:"pcs"},adhesives:{unitPrice:12,unit:"tubes"}}}async processInvoice(t,n,r){try{const a=await this.extractDataFromPDF(t),i=this.matchToTakeoff(a,r),o=this.generateValidationReport(i,n);return{success:!0,extractedData:a,matchedItems:i,validationReport:o,processingTime:new Date().toISOString()}}catch(a){return{success:!1,error:a.message,processingTime:new Date().toISOString()}}}async extractDataFromPDF(t){return new Promise(n=>{const r=new FileReader;r.onload=()=>{setTimeout(()=>{const a=this.simulateOCRExtraction(t.name);n(a)},2e3)},r.readAsArrayBuffer(t)})}simulateOCRExtraction(t){return{"invoice1.pdf":{supplier:"ABC Supply Co",invoiceNumber:"INV-2024-001",date:"2024-01-15",totalAmount:2450.75,lineItems:[{description:'5/8" Drywall',quantity:50,unit:"sheets",unitPrice:12.5,totalPrice:625},{description:'1/2" Drywall',quantity:30,unit:"sheets",unitPrice:10.25,totalPrice:307.5},{description:"Joint Compound",quantity:20,unit:"buckets",unitPrice:18.75,totalPrice:375},{description:"Drywall Screws",quantity:5e3,unit:"pieces",unitPrice:.15,totalPrice:750},{description:"Joint Tape",quantity:10,unit:"rolls",unitPrice:8.5,totalPrice:85},{description:"Paint Primer",quantity:5,unit:"gallons",unitPrice:25,totalPrice:125},{description:"Delivery Fee",quantity:1,unit:"service",unitPrice:75,totalPrice:75},{description:"Sales Tax",quantity:1,unit:"tax",unitPrice:108.25,totalPrice:108.25}]},"invoice2.pdf":{supplier:"XYZ Materials",invoiceNumber:"INV-2024-002",date:"2024-01-20",totalAmount:1895.5,lineItems:[{description:"R-13 Insulation",quantity:40,unit:"batts",unitPrice:8.75,totalPrice:350},{description:"R-19 Insulation",quantity:25,unit:"batts",unitPrice:12.5,totalPrice:312.5},{description:"Vapor Barrier",quantity:8,unit:"rolls",unitPrice:45,totalPrice:360},{description:"Staples",quantity:2e3,unit:"pieces",unitPrice:.08,totalPrice:160},{description:"Caulk",quantity:12,unit:"tubes",unitPrice:3.25,totalPrice:39},{description:"Delivery Fee",quantity:1,unit:"service",unitPrice:50,totalPrice:50},{description:"Sales Tax",quantity:1,unit:"tax",unitPrice:83,totalPrice:83}]}}[t]||this.generateRandomExtraction()}generateRandomExtraction(){const t=["ABC Supply Co","XYZ Materials","Construction Supply Inc"],n=[{name:'5/8" Drywall',unit:"sheets",price:12.5},{name:'1/2" Drywall',unit:"sheets",price:10.25},{name:"Joint Compound",unit:"buckets",price:18.75},{name:"Drywall Screws",unit:"pieces",price:.15},{name:"Joint Tape",unit:"rolls",price:8.5}],r=t[Math.floor(Math.random()*t.length)],a=Math.floor(Math.random()*5)+3,i=[];for(let d=0;d<a;d++){const u=n[Math.floor(Math.random()*n.length)],h=Math.floor(Math.random()*50)+10,f=h*u.price;i.push({description:u.name,quantity:h,unit:u.unit,unitPrice:u.price,totalPrice:Math.round(f*100)/100})}const o=i.reduce((d,u)=>d+u.totalPrice,0),l=o*.08,c=o+l;return{supplier:r,invoiceNumber:`INV-${Date.now()}`,date:new Date().toISOString().split("T")[0],totalAmount:Math.round(c*100)/100,lineItems:[...i,{description:"Sales Tax",quantity:1,unit:"tax",unitPrice:l,totalPrice:l}]}}matchToTakeoff(t,n){const r=[],a=[],i=this.estimateTakeoffPrices(n,t.supplier);return t.lineItems.forEach(o=>{if(this.isNonMaterialItem(o.description))return;const l=this.findBestMatch(o,i);l?r.push({invoiceItem:o,takeoffItem:l,matchConfidence:l.confidence,variance:this.calculateVariance(o,l.item),status:this.determineStatus(o,l.item)}):a.push({invoiceItem:o,reason:"No matching takeoff item found"})}),{matchedItems:r,unmatchedItems:a,summary:this.generateMatchingSummary(r,a)}}estimateTakeoffPrices(t,n=null){return t.map(r=>{if(r.unitPrice>0)return r;const a=this.getEstimatedPrice(r.description,n);return{...r,unitPrice:a.unitPrice,totalPrice:r.quantity*a.unitPrice,priceSource:a.source||"unknown"}})}getEstimatedPrice(t,n=null){if(n){const i=Tl.getBestPrice(n,t);if(i)return i}const r=Tl.getBestPrice(null,t);if(r)return r;const a=t.toLowerCase();for(const[i,o]of Object.entries(this.materialMappings))if(o.some(l=>a.includes(l.toLowerCase())))return this.priceEstimates[i]||{unitPrice:0,unit:"pcs",source:"fallback"};return{unitPrice:0,unit:"pcs",source:"unknown"}}findBestMatch(t,n){let r=null,a=0;return n.forEach(i=>{const o=this.calculateMatchScore(t,i);o>a&&o>.6&&(a=o,r={item:i,confidence:o})}),r}calculateMatchScore(t,n){let r=0;const a=this.calculateEnhancedDescriptionSimilarity(t.description.toLowerCase(),n.description.toLowerCase());return r+=a*.7,this.normalizeUnit(t.unit)===this.normalizeUnit(n.unit)&&(r+=.2),n.unitPrice>0&&Math.abs(t.unitPrice-n.unitPrice)/n.unitPrice<=.25&&(r+=.1),Math.min(r,1)}calculateEnhancedDescriptionSimilarity(t,n){const r=t.split(/\s+/),a=n.split(/\s+/);let i=0;r.forEach(c=>{a.includes(c)&&c.length>2&&i++});const o=i/Math.max(r.length,a.length);let l=0;for(const[c,d]of Object.entries(this.materialMappings)){const u=d.some(f=>t.includes(f.toLowerCase())),h=d.some(f=>n.includes(f.toLowerCase()));if(u&&h){l=.9;break}else(u||h)&&(l=Math.max(l,.6))}return Math.max(o,l)}calculateDescriptionSimilarity(t,n){const r=t.split(/\s+/),a=n.split(/\s+/);let i=0;return r.forEach(o=>{a.includes(o)&&o.length>2&&i++}),i/Math.max(r.length,a.length)}normalizeUnit(t){return{sheets:"sheets",sheet:"sheets",pieces:"pieces",pcs:"pieces",rolls:"rolls",roll:"rolls",buckets:"buckets",bucket:"buckets",gallons:"gallons",gallon:"gallons",batts:"batts",batt:"batts"}[t.toLowerCase()]||t.toLowerCase()}isNonMaterialItem(t){return["delivery","tax","fee","shipping","handling"].some(r=>t.toLowerCase().includes(r))}calculateVariance(t,n){const r=(t.quantity-n.quantity)/n.quantity*100,a=(t.unitPrice-n.unitPrice)/n.unitPrice*100,i=(t.totalPrice-n.totalPrice)/n.totalPrice*100;return{quantity:Math.round(r*100)/100,price:Math.round(a*100)/100,total:Math.round(i*100)/100}}determineStatus(t,n){const r=this.calculateVariance(t,n);return Math.abs(r.quantity)>10||Math.abs(r.price)>15?"critical":Math.abs(r.quantity)>5||Math.abs(r.price)>10?"warning":"good"}generateMatchingSummary(t,n){const r=t.length+n.length,a=t.length,i=n.length,o=t.filter(d=>d.status==="critical").length,l=t.filter(d=>d.status==="warning").length,c=t.filter(d=>d.status==="good").length;return{totalItems:r,matchedCount:a,unmatchedCount:i,matchRate:r>0?a/r*100:0,criticalIssues:o,warnings:l,goodMatches:c}}generateValidationReport(t,n){const r=t.filter(i=>i.status==="critical"),a=t.filter(i=>i.status==="warning");return{jobId:n,timestamp:new Date().toISOString(),summary:{totalItems:t.length,criticalIssues:r.length,warnings:a.length,goodMatches:t.filter(i=>i.status==="good").length},criticalIssues:r.map(i=>({invoiceItem:i.invoiceItem.description,takeoffItem:i.takeoffItem.item.description,variance:i.variance,recommendation:this.generateRecommendation(i)})),warnings:a.map(i=>({invoiceItem:i.invoiceItem.description,takeoffItem:i.takeoffItem.item.description,variance:i.variance,recommendation:this.generateRecommendation(i)}))}}generateRecommendation(t){const{variance:n}=t;return n.quantity>10?`Quantity variance of ${n.quantity}% - verify delivery quantities`:n.quantity<-10?`Quantity variance of ${Math.abs(n.quantity)}% - check for missing items`:n.price>15?`Price variance of ${n.price}% - verify pricing with supplier`:"Minor variance - within acceptable range"}saveProcessedInvoice(t,n){const r={id:`inv_${Date.now()}`,jobId:t,...n,savedAt:new Date().toISOString()},a=JSON.parse(localStorage.getItem("processedInvoices")||"[]");return a.push(r),localStorage.setItem("processedInvoices",JSON.stringify(a)),this.updateHistoricalPricingFromInvoice(n.extractedData),r}updateHistoricalPricingFromInvoice(t){!t||!t.lineItems||t.lineItems.forEach(n=>{this.isNonMaterialItem(n.description)||Tl.addHistoricalPrice(n.description,n.unitPrice,n.unit)})}getProcessedInvoices(t){return JSON.parse(localStorage.getItem("processedInvoices")||"[]").filter(r=>r.jobId===t)}getAllProcessedInvoices(){return JSON.parse(localStorage.getItem("processedInvoices")||"[]")}}const r0=new Wje,Hje=({jobs:e,onJobSelect:t})=>{const[n,r]=j.useState(null),[a,i]=j.useState(null),[o,l]=j.useState(!1),[c,d]=j.useState(null),[u,h]=j.useState("upload"),f=j.useRef(null),p=S=>{const P=e.find(N=>N.id===S);if(!P||!P.takeoffPhases)return[];const D=[];return P.takeoffPhases.forEach(N=>{N.materials&&N.materials.length>0&&N.materials.forEach(M=>{let L=M.type;M.subtype&&(L+=` - ${M.subtype}`),M.length&&(L+=` ${M.length}`),M.threadType&&(L+=` ${M.threadType}`),D.push({description:L.trim(),quantity:parseInt(M.quantity)||0,unit:M.unit||"pcs",unitPrice:0,totalPrice:0,source:"phase_material",phaseName:N.name})}),N.entries&&N.entries.length>0&&N.entries.forEach(M=>{M.boards&&M.boards.length>0&&M.boards.forEach(L=>{const T=`${L.thickness}" ${L.boardType} - ${L.width}" x ${L.length}'`;D.push({description:T,quantity:parseInt(L.quantity)||0,unit:"sheets",unitPrice:0,totalPrice:0,source:"board",phaseName:N.name,floorSpace:M.floorSpace})})})}),D},y=S=>{const P=S.target.files[0];P&&P.type==="application/pdf"?(i(P),pe({title:"File Uploaded! 📄",description:`${P.name} is ready for processing.`})):pe({title:"Invalid File Type",description:"Please upload a PDF file.",variant:"destructive"})},g=async()=>{if(!n||!a){pe({title:"Missing Information",description:"Please select a job and upload an invoice.",variant:"destructive"});return}const S=p(n);if(S.length===0){pe({title:"No Takeoff Data Found",description:"This job doesn't have any takeoff data to validate against. Please create takeoff entries first.",variant:"destructive"});return}l(!0),h("processing");try{const P=await r0.processInvoice(a,n,S);P.success?(d(P),h("results"),r0.saveProcessedInvoice(n,P),pe({title:"Invoice Processed Successfully! ✅",description:`Found ${P.matchedItems.matchedItems.length} matched items with ${P.matchedItems.summary.criticalIssues} critical issues.`})):pe({title:"Processing Failed",description:P.error,variant:"destructive"})}catch(P){pe({title:"Processing Error",description:P.message,variant:"destructive"})}finally{l(!1)}},x=S=>{r(S);const P=e.find(D=>D.id===S);P&&pe({title:"Job Selected",description:`Processing invoice for ${P.jobName}`})},m=S=>{switch(S){case"critical":return"text-red-600 bg-red-50 border-red-200";case"warning":return"text-yellow-600 bg-yellow-50 border-yellow-200";case"good":return"text-green-600 bg-green-50 border-green-200";default:return"text-gray-600 bg-gray-50 border-gray-200"}},v=S=>{switch(S){case"critical":return s.jsx(Lm,{className:"h-4 w-4"});case"warning":return s.jsx(co,{className:"h-4 w-4"});case"good":return s.jsx(Br,{className:"h-4 w-4"});default:return s.jsx(Au,{className:"h-4 w-4"})}},b=S=>Math.abs(S)>15?"text-red-600":Math.abs(S)>10?"text-yellow-600":"text-green-600",C=S=>S>10?s.jsx(Ei,{className:"h-4 w-4"}):S<-10?s.jsx(ug,{className:"h-4 w-4"}):s.jsx(Br,{className:"h-4 w-4"});return s.jsxs("div",{className:"space-y-6",children:[s.jsx(Te,{className:"border-2 border-blue-200 bg-blue-50",children:s.jsx(Xe,{children:s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:s.jsx(tn,{className:"h-6 w-6 text-blue-600"})}),s.jsxs("div",{children:[s.jsx(Qe,{className:"text-xl font-bold text-blue-800",children:"Invoice Processing & Validation"}),s.jsx("p",{className:"text-blue-600 text-sm",children:"Upload PDF invoices for automated processing and takeoff validation"})]})]})})})}),s.jsxs(uo,{value:u,onValueChange:h,className:"space-y-6",children:[s.jsxs(Oi,{className:"grid w-full grid-cols-4",children:[s.jsx(Ht,{value:"upload",children:"Upload Invoice"}),s.jsx(Ht,{value:"processing",disabled:!o,children:"Processing"}),s.jsx(Ht,{value:"results",disabled:!c,children:"Results"}),s.jsx(Ht,{value:"history",children:"History"})]}),s.jsx(en,{value:"upload",className:"space-y-6",children:s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs(Te,{children:[s.jsx(Xe,{children:s.jsxs(Qe,{className:"flex items-center space-x-2",children:[s.jsx(p1,{className:"h-5 w-5 text-blue-600"}),s.jsx("span",{children:"Select Job"})]})}),s.jsx(Me,{children:s.jsx("div",{className:"space-y-3",children:e.map(S=>s.jsx("div",{className:`p-3 border rounded-lg cursor-pointer transition-all hover:shadow-md ${n===S.id?"border-blue-300 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,onClick:()=>x(S.id),children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-gray-900",children:S.jobName}),s.jsxs("p",{className:"text-sm text-gray-600",children:[S.jobType," • ",S.id]}),s.jsxs("p",{className:"text-xs text-gray-500",children:["Takeoff items: ",p(S.id).length]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[p(S.id).length>0?s.jsxs(ht,{variant:"outline",className:"text-green-600 border-green-300",children:[p(S.id).length," items"]}):s.jsx(ht,{variant:"outline",className:"text-red-600 border-red-300",children:"No takeoff data"}),n===S.id&&s.jsx(Br,{className:"h-5 w-5 text-blue-600"})]})]})},S.id))})})]}),s.jsxs(Te,{children:[s.jsx(Xe,{children:s.jsxs(Qe,{className:"flex items-center space-x-2",children:[s.jsx(Gl,{className:"h-5 w-5 text-green-600"}),s.jsx("span",{children:"Upload Invoice PDF"})]})}),s.jsx(Me,{children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center cursor-pointer hover:border-gray-400 transition-colors",onClick:()=>{var S;return(S=f.current)==null?void 0:S.click()},children:[s.jsx(Gl,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600 mb-2",children:a?a.name:"Click to upload PDF invoice"}),s.jsx("p",{className:"text-sm text-gray-500",children:a?"File ready for processing":"Drag and drop or click to browse"})]}),s.jsx("input",{ref:f,type:"file",accept:".pdf",onChange:y,className:"hidden"}),a&&s.jsxs("div",{className:"flex items-center space-x-2 p-3 bg-green-50 border border-green-200 rounded-lg",children:[s.jsx(Br,{className:"h-5 w-5 text-green-600"}),s.jsx("span",{className:"text-green-800 font-medium",children:a.name})]}),s.jsxs(se,{onClick:g,disabled:!n||!a,className:"w-full",children:[s.jsx(tn,{className:"h-4 w-4 mr-2"}),"Process Invoice"]})]})})]})]})}),s.jsx(en,{value:"processing",className:"space-y-6",children:s.jsx(Te,{children:s.jsx(Me,{className:"p-8",children:s.jsxs("div",{className:"text-center space-y-4",children:[s.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-blue-600 mx-auto"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Processing Invoice..."}),s.jsx("p",{className:"text-gray-600",children:"Extracting data and matching to takeoff items"}),s.jsxs("div",{className:"max-w-md mx-auto space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsx("span",{children:"OCR Processing"}),s.jsx("span",{className:"text-green-600",children:"✓ Complete"})]}),s.jsx(Io,{value:100,className:"h-2"}),s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsx("span",{children:"Data Extraction"}),s.jsx("span",{className:"text-green-600",children:"✓ Complete"})]}),s.jsx(Io,{value:100,className:"h-2"}),s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsx("span",{children:"Takeoff Matching"}),s.jsx("span",{className:"text-blue-600",children:"In Progress..."})]}),s.jsx(Io,{value:75,className:"h-2"}),s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsx("span",{children:"Validation Analysis"}),s.jsx("span",{className:"text-gray-400",children:"Pending"})]}),s.jsx(Io,{value:0,className:"h-2"})]})]})})})}),s.jsx(en,{value:"results",className:"space-y-6",children:c&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsx(Te,{className:"border-2 border-blue-200 bg-blue-50",children:s.jsxs(Me,{className:"p-4 text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-blue-600",children:c.matchedItems.summary.totalItems}),s.jsx("div",{className:"text-sm text-blue-600",children:"Total Items"})]})}),s.jsx(Te,{className:"border-2 border-green-200 bg-green-50",children:s.jsxs(Me,{className:"p-4 text-center",children:[s.jsxs("div",{className:"text-2xl font-bold text-green-600",children:[c.matchedItems.summary.matchRate.toFixed(1),"%"]}),s.jsx("div",{className:"text-sm text-green-600",children:"Match Rate"})]})}),s.jsx(Te,{className:"border-2 border-red-200 bg-red-50",children:s.jsxs(Me,{className:"p-4 text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-red-600",children:c.matchedItems.summary.criticalIssues}),s.jsx("div",{className:"text-sm text-red-600",children:"Critical Issues"})]})}),s.jsx(Te,{className:"border-2 border-yellow-200 bg-yellow-50",children:s.jsxs(Me,{className:"p-4 text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:c.matchedItems.summary.warnings}),s.jsx("div",{className:"text-sm text-yellow-600",children:"Warnings"})]})})]}),s.jsxs(Te,{children:[s.jsx(Xe,{children:s.jsxs(Qe,{className:"flex items-center space-x-2",children:[s.jsx(tn,{className:"h-5 w-5 text-blue-600"}),s.jsx("span",{children:"Invoice Details"})]})}),s.jsxs(Me,{children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Supplier"}),s.jsx("p",{className:"text-gray-900",children:c.extractedData.supplier})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Invoice Number"}),s.jsx("p",{className:"text-gray-900",children:c.extractedData.invoiceNumber})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Total Amount"}),s.jsxs("p",{className:"text-gray-900",children:["$",c.extractedData.totalAmount.toLocaleString()]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h4",{className:"font-semibold text-gray-900",children:"Matched Items"}),s.jsxs(Hr,{children:[s.jsx(qr,{children:s.jsxs(Jt,{children:[s.jsx(qe,{children:"Invoice Item"}),s.jsx(qe,{children:"Takeoff Item"}),s.jsx(qe,{children:"Quantity Variance"}),s.jsx(qe,{children:"Price Variance"}),s.jsx(qe,{children:"Status"}),s.jsx(qe,{children:"Confidence"})]})}),s.jsx(Vr,{children:c.matchedItems.matchedItems.map((S,P)=>s.jsxs(Jt,{children:[s.jsx(ze,{children:s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:S.invoiceItem.description}),s.jsxs("p",{className:"text-sm text-gray-600",children:[S.invoiceItem.quantity," ",S.invoiceItem.unit," @ $",S.invoiceItem.unitPrice]})]})}),s.jsx(ze,{children:s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:S.takeoffItem.item.description}),s.jsxs("p",{className:"text-sm text-gray-600",children:[S.takeoffItem.item.quantity," ",S.takeoffItem.item.unit," @ $",S.takeoffItem.item.unitPrice]})]})}),s.jsx(ze,{children:s.jsxs("div",{className:`flex items-center space-x-1 ${b(S.variance.quantity)}`,children:[C(S.variance.quantity),s.jsxs("span",{children:[S.variance.quantity>0?"+":"",S.variance.quantity.toFixed(1),"%"]})]})}),s.jsx(ze,{children:s.jsxs("div",{className:`flex items-center space-x-1 ${b(S.variance.price)}`,children:[C(S.variance.price),s.jsxs("span",{children:[S.variance.price>0?"+":"",S.variance.price.toFixed(1),"%"]})]})}),s.jsx(ze,{children:s.jsxs(ht,{className:`${m(S.status)}`,children:[v(S.status),s.jsx("span",{className:"ml-1 capitalize",children:S.status})]})}),s.jsx(ze,{children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Io,{value:S.matchConfidence*100,className:"w-16 h-2"}),s.jsxs("span",{className:"text-sm",children:[(S.matchConfidence*100).toFixed(0),"%"]})]})})]},P))})]})]}),c.matchedItems.unmatchedItems.length>0&&s.jsxs("div",{className:"space-y-4 mt-6",children:[s.jsx("h4",{className:"font-semibold text-gray-900",children:"Unmatched Items"}),s.jsx("div",{className:"space-y-2",children:c.matchedItems.unmatchedItems.map((S,P)=>s.jsxs("div",{className:"p-3 border border-gray-200 rounded-lg",children:[s.jsx("p",{className:"font-medium",children:S.invoiceItem.description}),s.jsxs("p",{className:"text-sm text-gray-600",children:[S.invoiceItem.quantity," ",S.invoiceItem.unit," @ $",S.invoiceItem.unitPrice]}),s.jsx("p",{className:"text-sm text-red-600 mt-1",children:S.reason})]},P))})]})]})]})]})}),s.jsx(en,{value:"history",className:"space-y-6",children:s.jsxs(Te,{children:[s.jsx(Xe,{children:s.jsxs(Qe,{className:"flex items-center space-x-2",children:[s.jsx(kn,{className:"h-5 w-5 text-purple-600"}),s.jsx("span",{children:"Processing History"})]})}),s.jsx(Me,{children:s.jsxs("div",{className:"space-y-4",children:[r0.getAllProcessedInvoices().map(S=>{var P,D,N,M,L,T;return s.jsx("div",{className:"p-4 border border-gray-200 rounded-lg",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs("h4",{className:"font-medium text-gray-900",children:["Invoice ",((P=S.extractedData)==null?void 0:P.invoiceNumber)||S.id]}),s.jsxs("p",{className:"text-sm text-gray-600",children:[(D=S.extractedData)==null?void 0:D.supplier," • ",new Date(S.savedAt).toLocaleDateString()]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs(ht,{variant:"outline",children:[((M=(N=S.matchedItems)==null?void 0:N.summary)==null?void 0:M.criticalIssues)||0," Critical"]}),s.jsxs(ht,{variant:"outline",children:[((T=(L=S.matchedItems)==null?void 0:L.summary)==null?void 0:T.warnings)||0," Warnings"]}),s.jsx(se,{variant:"ghost",size:"sm",children:s.jsx(Jg,{className:"h-4 w-4"})})]})]})},S.id)}),r0.getAllProcessedInvoices().length===0&&s.jsxs("div",{className:"text-center py-8 text-gray-500",children:[s.jsx(tn,{className:"h-12 w-12 mx-auto mb-3 text-gray-300"}),s.jsx("p",{children:"No processed invoices yet"}),s.jsx("p",{className:"text-sm",children:"Upload and process your first invoice to see it here"})]})]})})]})})]})]})},qje=()=>{const[e,t]=j.useState("suppliers"),[n,r]=j.useState(null),[a,i]=j.useState(null),[o,l]=j.useState(""),[c,d]=j.useState("all"),[u,h]=j.useState(!1),[f,p]=j.useState({supplier:"",material:"",unitPrice:"",unit:"sheets",lastUpdated:new Date().toISOString().split("T")[0]}),y=[{name:'5/8" drywall',unit:"sheets",category:"drywall"},{name:'1/2" drywall',unit:"sheets",category:"drywall"},{name:'3/8" drywall',unit:"sheets",category:"drywall"},{name:"joint compound",unit:"buckets",category:"finishing"},{name:"drywall screws",unit:"pieces",category:"fasteners"},{name:"joint tape",unit:"rolls",category:"finishing"},{name:"corner bead",unit:"pcs",category:"finishing"},{name:"adhesives",unit:"tubes",category:"adhesives"},{name:"R-13 insulation",unit:"batts",category:"insulation"},{name:"R-19 insulation",unit:"batts",category:"insulation"},{name:"vapor barrier",unit:"rolls",category:"moisture"},{name:"caulk",unit:"tubes",category:"sealants"}],g=["sheets","pieces","rolls","buckets","tubes","batts","pcs","gallons","lbs"];j.useEffect(()=>{x()},[]);const x=()=>{const E=Tl.exportPricingData();r(E)},m=()=>{if(!f.supplier||!f.material||!f.unitPrice){pe({title:"Missing Information",description:"Please fill in all required fields.",variant:"destructive"});return}Tl.updateSupplierPricing(f.supplier,f.material,parseFloat(f.unitPrice),f.unit),pe({title:"Price Updated! 💰",description:`${f.material} price for ${f.supplier} has been updated.`}),p({supplier:"",material:"",unitPrice:"",unit:"sheets",lastUpdated:new Date().toISOString().split("T")[0]}),h(!1),x()},v=(E,A,O,W)=>{i({supplier:E,material:A,price:O,unit:W}),p({supplier:E,material:A,unitPrice:O.toString(),unit:W,lastUpdated:new Date().toISOString().split("T")[0]}),h(!0)},b=(E,A)=>{confirm(`Are you sure you want to delete ${A} from ${E}?`)&&n.supplierPricing[E]&&(delete n.supplierPricing[E][A.toLowerCase()],Tl.importPricingData(n),x(),pe({title:"Price Deleted",description:`${A} has been removed from ${E}.`}))},C=()=>{const E=Tl.exportPricingData(),A=new Blob([JSON.stringify(E,null,2)],{type:"application/json"}),O=URL.createObjectURL(A),W=document.createElement("a");W.href=O,W.download=`pricing-data-${new Date().toISOString().split("T")[0]}.json`,W.click(),URL.revokeObjectURL(O),pe({title:"Data Exported! 📁",description:"Pricing data has been downloaded as JSON."})},S=()=>{const E=`supplier,material,unit_price,unit,last_updated
ABC Supply Co,5/8" drywall,12.50,sheets,2024-01-25
ABC Supply Co,1/2" drywall,10.25,sheets,2024-01-25
ABC Supply Co,joint compound,18.75,buckets,2024-01-25
XYZ Materials,5/8" drywall,12.75,sheets,2024-01-25
XYZ Materials,drywall screws,0.16,pieces,2024-01-25`,A=new Blob([E],{type:"text/csv"}),O=URL.createObjectURL(A),W=document.createElement("a");W.href=O,W.download="pricing-import-template.csv",W.click(),URL.revokeObjectURL(O),pe({title:"Template Downloaded! 📋",description:"CSV template ready for supplier price list import."})},P=E=>{const A=E.target.files[0];if(!A)return;const O=new FileReader;O.onload=W=>{try{if(A.name.endsWith(".json")){const z=JSON.parse(W.target.result);Tl.importPricingData(z),x(),pe({title:"JSON Data Imported! 📥",description:"Pricing data has been successfully imported."})}else if(A.name.endsWith(".csv"))D(W.target.result);else throw new Error("Unsupported file format")}catch(z){pe({title:"Import Failed",description:z.message||"Invalid file format.",variant:"destructive"})}},O.readAsText(A)},D=E=>{const A=E.split(`
`),O=A[0].split(",").map(I=>I.trim().toLowerCase()),W=O.findIndex(I=>I.includes("supplier")),z=O.findIndex(I=>I.includes("material")||I.includes("description")),F=O.findIndex(I=>I.includes("price")||I.includes("cost")),V=O.findIndex(I=>I.includes("unit")),B=O.findIndex(I=>I.includes("date")||I.includes("updated"));if(W===-1||z===-1||F===-1)throw new Error("CSV must contain supplier, material, and price columns");let Y=0;const $=[];for(let I=1;I<A.length;I++){const U=A[I].trim();if(!U)continue;const q=U.split(",").map(X=>X.trim());try{const X=q[W],te=q[z],ae=parseFloat(q[F]),le=q[V]||"pcs",me=q[B]||new Date().toISOString().split("T")[0];X&&te&&!isNaN(ae)&&(Tl.updateSupplierPricing(X,te,ae,le),Y++)}catch(X){$.push(`Line ${I+1}: ${X.message}`)}}x(),Y>0&&pe({title:"CSV Import Successful! 📥",description:`Imported ${Y} pricing records.${$.length>0?` ${$.length} errors.`:""}`}),$.length>0&&console.error("Import errors:",$)},N=()=>{if(!n)return[];const E=Object.keys(n.supplierPricing);return c==="all"?E:E.filter(A=>A===c)},M=E=>{if(!(n!=null&&n.supplierPricing[E]))return[];const A=Object.entries(n.supplierPricing[E]);return o?A.filter(([O,W])=>O.toLowerCase().includes(o.toLowerCase())||W.unitPrice.toString().includes(o)):A},L=E=>{switch(E){case"supplier_contract":return"text-blue-600 bg-blue-50 border-blue-200";case"historical_average":return"text-green-600 bg-green-50 border-green-200";case"market_reference":return"text-purple-600 bg-purple-50 border-purple-200";default:return"text-gray-600 bg-gray-50 border-gray-200"}},T=E=>{switch(E){case"supplier_contract":return s.jsx(or,{className:"h-4 w-4"});case"historical_average":return s.jsx(rk,{className:"h-4 w-4"});case"market_reference":return s.jsx(Ei,{className:"h-4 w-4"});default:return s.jsx(ya,{className:"h-4 w-4"})}};return s.jsxs("div",{className:"space-y-6",children:[s.jsx(Te,{className:"border-2 border-green-200 bg-green-50",children:s.jsx(Xe,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:s.jsx(_r,{className:"h-6 w-6 text-green-600"})}),s.jsxs("div",{children:[s.jsx(Qe,{className:"text-xl font-bold text-green-800",children:"Material Pricing Management"}),s.jsx("p",{className:"text-green-600 text-sm",children:"Manage supplier pricing, historical data, and market references"})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs(se,{onClick:S,variant:"outline",size:"sm",children:[s.jsx(Ri,{className:"h-4 w-4 mr-2"}),"Template"]}),s.jsxs(se,{onClick:C,variant:"outline",size:"sm",children:[s.jsx(Ri,{className:"h-4 w-4 mr-2"}),"Export"]}),s.jsxs(se,{variant:"outline",size:"sm",onClick:()=>document.getElementById("import-file").click(),children:[s.jsx(Gl,{className:"h-4 w-4 mr-2"}),"Import"]}),s.jsx("input",{id:"import-file",type:"file",accept:".json,.csv",onChange:P,className:"hidden"})]})]})})}),s.jsxs(uo,{value:e,onValueChange:t,className:"space-y-6",children:[s.jsxs(Oi,{className:"grid w-full grid-cols-4",children:[s.jsx(Ht,{value:"suppliers",children:"Supplier Pricing"}),s.jsx(Ht,{value:"historical",children:"Historical Data"}),s.jsx(Ht,{value:"market",children:"Market Prices"}),s.jsx(Ht,{value:"analytics",children:"Pricing Analytics"})]}),s.jsxs(en,{value:"suppliers",className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx(p1,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),s.jsx($e,{placeholder:"Search materials...",value:o,onChange:E=>l(E.target.value),className:"pl-10 w-64"})]}),s.jsxs(st,{value:c,onValueChange:d,children:[s.jsx(nt,{className:"w-48",children:s.jsx(at,{placeholder:"Filter by supplier"})}),s.jsxs(rt,{children:[s.jsx(xe,{value:"all",children:"All Suppliers"}),n&&Object.keys(n.supplierPricing).map(E=>s.jsx(xe,{value:E,children:E},E))]})]})]}),s.jsxs(se,{onClick:()=>h(!0),children:[s.jsx(un,{className:"h-4 w-4 mr-2"}),"Add Price"]})]}),u&&s.jsxs(Te,{className:"border-2 border-blue-200 bg-blue-50",children:[s.jsx(Xe,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(Qe,{className:"text-lg",children:a?"Edit Price":"Add New Price"}),s.jsx(se,{variant:"ghost",size:"sm",onClick:()=>{h(!1),i(null),p({supplier:"",material:"",unitPrice:"",unit:"sheets",lastUpdated:new Date().toISOString().split("T")[0]})},children:s.jsx(rn,{className:"h-4 w-4"})})]})}),s.jsxs(Me,{children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsxs("div",{children:[s.jsx(de,{htmlFor:"supplier",children:"Supplier"}),s.jsx($e,{id:"supplier",value:f.supplier,onChange:E=>p({...f,supplier:E.target.value}),placeholder:"Supplier name"})]}),s.jsxs("div",{children:[s.jsx(de,{htmlFor:"material",children:"Material"}),s.jsxs(st,{value:f.material,onValueChange:E=>p({...f,material:E}),children:[s.jsx(nt,{children:s.jsx(at,{placeholder:"Select material"})}),s.jsx(rt,{children:y.map(E=>s.jsx(xe,{value:E.name,children:E.name},E.name))})]})]}),s.jsxs("div",{children:[s.jsx(de,{htmlFor:"price",children:"Unit Price ($)"}),s.jsx($e,{id:"price",type:"number",step:"0.01",value:f.unitPrice,onChange:E=>p({...f,unitPrice:E.target.value}),placeholder:"0.00"})]}),s.jsxs("div",{children:[s.jsx(de,{htmlFor:"unit",children:"Unit"}),s.jsxs(st,{value:f.unit,onValueChange:E=>p({...f,unit:E}),children:[s.jsx(nt,{children:s.jsx(at,{})}),s.jsx(rt,{children:g.map(E=>s.jsx(xe,{value:E,children:E},E))})]})]})]}),s.jsxs("div",{className:"flex justify-end space-x-2 mt-4",children:[s.jsx(se,{variant:"outline",onClick:()=>h(!1),children:"Cancel"}),s.jsxs(se,{onClick:m,children:[s.jsx(Qn,{className:"h-4 w-4 mr-2"}),"Save Price"]})]})]})]}),s.jsxs(Te,{children:[s.jsx(Xe,{children:s.jsx(Qe,{children:"Supplier Pricing"})}),s.jsx(Me,{children:s.jsxs(Hr,{children:[s.jsx(qr,{children:s.jsxs(Jt,{children:[s.jsx(qe,{children:"Supplier"}),s.jsx(qe,{children:"Material"}),s.jsx(qe,{children:"Unit Price"}),s.jsx(qe,{children:"Unit"}),s.jsx(qe,{children:"Last Updated"}),s.jsx(qe,{children:"Actions"})]})}),s.jsx(Vr,{children:N().map(E=>M(E).map(([A,O])=>s.jsxs(Jt,{children:[s.jsx(ze,{className:"font-medium",children:E}),s.jsx(ze,{children:A}),s.jsxs(ze,{children:["$",O.unitPrice.toFixed(2)]}),s.jsx(ze,{children:O.unit}),s.jsx(ze,{children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(kn,{className:"h-4 w-4 text-gray-400"}),s.jsx("span",{className:"text-sm text-gray-600",children:O.lastUpdated})]})}),s.jsx(ze,{children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(se,{variant:"ghost",size:"sm",onClick:()=>v(E,A,O.unitPrice,O.unit),children:s.jsx(ad,{className:"h-4 w-4"})}),s.jsx(se,{variant:"ghost",size:"sm",onClick:()=>b(E,A),children:s.jsx(Kt,{className:"h-4 w-4"})})]})})]},`${E}-${A}`)))})]})})]})]}),s.jsx(en,{value:"historical",className:"space-y-6",children:s.jsxs(Te,{children:[s.jsxs(Xe,{children:[s.jsx(Qe,{children:"Historical Price Averages"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Average prices from processed invoices"})]}),s.jsx(Me,{children:s.jsxs(Hr,{children:[s.jsx(qr,{children:s.jsxs(Jt,{children:[s.jsx(qe,{children:"Material"}),s.jsx(qe,{children:"Average Price"}),s.jsx(qe,{children:"Unit"}),s.jsx(qe,{children:"Sample Size"}),s.jsx(qe,{children:"Data Quality"})]})}),s.jsx(Vr,{children:(n==null?void 0:n.historicalPricing)&&Object.entries(n.historicalPricing).map(([E,A])=>s.jsxs(Jt,{children:[s.jsx(ze,{className:"font-medium",children:E}),s.jsxs(ze,{children:["$",A.avgPrice.toFixed(2)]}),s.jsx(ze,{children:A.unit}),s.jsx(ze,{children:s.jsxs(ht,{variant:"outline",children:[A.sampleSize," invoices"]})}),s.jsx(ze,{children:s.jsx(ht,{className:A.sampleSize>10?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800",children:A.sampleSize>10?"Good":"Limited"})})]},E))})]})})]})}),s.jsx(en,{value:"market",className:"space-y-6",children:s.jsxs(Te,{children:[s.jsxs(Xe,{children:[s.jsx(Qe,{children:"Market Reference Prices"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Industry average prices for reference"})]}),s.jsx(Me,{children:s.jsxs(Hr,{children:[s.jsx(qr,{children:s.jsxs(Jt,{children:[s.jsx(qe,{children:"Material"}),s.jsx(qe,{children:"Market Price"}),s.jsx(qe,{children:"Unit"}),s.jsx(qe,{children:"Source"})]})}),s.jsx(Vr,{children:(n==null?void 0:n.marketPricing)&&Object.entries(n.marketPricing).map(([E,A])=>s.jsxs(Jt,{children:[s.jsx(ze,{className:"font-medium",children:E}),s.jsxs(ze,{children:["$",A.unitPrice.toFixed(2)]}),s.jsx(ze,{children:A.unit}),s.jsx(ze,{children:s.jsx(ht,{variant:"outline",children:A.source})})]},E))})]})})]})}),s.jsxs(en,{value:"analytics",className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsx(Te,{children:s.jsx(Me,{className:"p-6",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(or,{className:"h-8 w-8 text-blue-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Supplier Contracts"}),s.jsx("p",{className:"text-2xl font-bold",children:n?Object.keys(n.supplierPricing).length:0})]})]})})}),s.jsx(Te,{children:s.jsx(Me,{className:"p-6",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(rk,{className:"h-8 w-8 text-green-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Historical Records"}),s.jsx("p",{className:"text-2xl font-bold",children:n?Object.keys(n.historicalPricing).length:0})]})]})})}),s.jsx(Te,{children:s.jsx(Me,{className:"p-6",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Ei,{className:"h-8 w-8 text-purple-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Market References"}),s.jsx("p",{className:"text-2xl font-bold",children:n?Object.keys(n.marketPricing).length:0})]})]})})})]}),s.jsxs(Te,{children:[s.jsx(Xe,{children:s.jsx(Qe,{children:"Price Source Distribution"})}),s.jsx(Me,{children:s.jsx("div",{className:"space-y-4",children:n&&Object.entries(n.supplierPricing).map(([E,A])=>s.jsxs("div",{className:"border rounded-lg p-4",children:[s.jsx("h4",{className:"font-medium mb-2",children:E}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-2",children:Object.entries(A).map(([O,W])=>s.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[s.jsx("span",{className:"text-sm",children:O}),s.jsxs(ht,{className:L("supplier_contract"),children:[T("supplier_contract"),s.jsxs("span",{className:"ml-1",children:["$",W.unitPrice]})]})]},O))})]},E))})})]})]})]})]})};class Vje{constructor(){this.warehouseInventory=this.loadWarehouseInventory(),this.jobAllocations=this.loadJobAllocations(),this.assetTracking=this.loadAssetTracking()}loadWarehouseInventory(){const t=localStorage.getItem("warehouseInventory");return t?JSON.parse(t):this.getDefaultWarehouseInventory()}loadJobAllocations(){const t=localStorage.getItem("jobAllocations");return t?JSON.parse(t):{}}loadAssetTracking(){const t=localStorage.getItem("assetTracking");return t?JSON.parse(t):this.getDefaultAssetTracking()}saveWarehouseInventory(){localStorage.setItem("warehouseInventory",JSON.stringify(this.warehouseInventory))}saveJobAllocations(){localStorage.setItem("jobAllocations",JSON.stringify(this.jobAllocations))}saveAssetTracking(){localStorage.setItem("assetTracking",JSON.stringify(this.assetTracking))}getDefaultWarehouseInventory(){return{materials:{"joint compound":{quantity:15,unit:"buckets",location:"Warehouse A - Shelf 3",minStock:5,maxStock:25,lastUpdated:new Date().toISOString().split("T")[0],source:"leftover_from_jobs",notes:"Various brands, mixed conditions"},"drywall screws":{quantity:2500,unit:"pieces",location:"Warehouse A - Bin 2",minStock:1e3,maxStock:5e3,lastUpdated:new Date().toISOString().split("T")[0],source:"leftover_from_jobs",notes:'1-5/8" Phillips head'},"joint tape":{quantity:8,unit:"rolls",location:"Warehouse A - Shelf 4",minStock:3,maxStock:15,lastUpdated:new Date().toISOString().split("T")[0],source:"leftover_from_jobs",notes:"Paper tape, 500ft rolls"}},supplies:{"drop cloths":{quantity:12,unit:"pieces",location:"Warehouse B - Rack 1",minStock:5,maxStock:20,lastUpdated:new Date().toISOString().split("T")[0],source:"purchased",notes:"9x12 plastic drop cloths"},"masking tape":{quantity:24,unit:"rolls",location:"Warehouse B - Shelf 2",minStock:10,maxStock:30,lastUpdated:new Date().toISOString().split("T")[0],source:"purchased",notes:`1" blue painter's tape`},"cleaning supplies":{quantity:8,unit:"kits",location:"Warehouse B - Cabinet 3",minStock:3,maxStock:12,lastUpdated:new Date().toISOString().split("T")[0],source:"purchased",notes:"Sponges, rags, cleaners"}}}}getDefaultAssetTracking(){return{scaffold:{"SCAFF-001":{type:"Frame Scaffold",description:"6ft x 5ft frame with planks",condition:"good",location:"warehouse",assignedJob:null,lastAssigned:null,purchaseDate:"2023-01-15",notes:"Standard frame scaffold set"},"SCAFF-002":{type:"Frame Scaffold",description:"6ft x 5ft frame with planks",condition:"good",location:"warehouse",assignedJob:null,lastAssigned:null,purchaseDate:"2023-01-15",notes:"Standard frame scaffold set"},"SCAFF-003":{type:"Baker Scaffold",description:"4ft x 6ft rolling scaffold",condition:"excellent",location:"warehouse",assignedJob:null,lastAssigned:null,purchaseDate:"2023-03-20",notes:"Rolling baker scaffold"},"SCAFF-004":{type:"Baker Scaffold",description:"4ft x 6ft rolling scaffold",condition:"good",location:"warehouse",assignedJob:null,lastAssigned:null,purchaseDate:"2023-03-20",notes:"Rolling baker scaffold"}},equipment:{"TOOL-001":{type:"Drywall Sander",description:"Electric drywall sander with vacuum",condition:"good",location:"warehouse",assignedJob:null,lastAssigned:null,purchaseDate:"2023-02-10",notes:"Makita drywall sander"},"TOOL-002":{type:"Mud Mixer",description:"Electric mud mixer drill attachment",condition:"excellent",location:"warehouse",assignedJob:null,lastAssigned:null,purchaseDate:"2023-04-05",notes:"Heavy duty mud mixer"}}}}getWarehouseInventory(){return this.warehouseInventory}updateWarehouseItem(t,n,r){this.warehouseInventory[t]||(this.warehouseInventory[t]={}),this.warehouseInventory[t][n]||(this.warehouseInventory[t][n]={quantity:0,unit:"pcs",location:"Unknown",minStock:0,maxStock:100,lastUpdated:new Date().toISOString().split("T")[0],source:"unknown",notes:""}),this.warehouseInventory[t][n]={...this.warehouseInventory[t][n],...r,lastUpdated:new Date().toISOString().split("T")[0]},this.saveWarehouseInventory()}addToWarehouse(t,n,r,a,i,o="purchased",l=""){var d;const c=(d=this.warehouseInventory[t])==null?void 0:d[n];this.updateWarehouseItem(t,n,{quantity:((c==null?void 0:c.quantity)||0)+r,unit:a||(c==null?void 0:c.unit)||"pcs",location:i||(c==null?void 0:c.location)||"Unknown",source:o,notes:l||(c==null?void 0:c.notes)||""})}removeFromWarehouse(t,n,r){var i;const a=(i=this.warehouseInventory[t])==null?void 0:i[n];if(!a||a.quantity<r)throw new Error(`Insufficient stock: ${n}`);this.updateWarehouseItem(t,n,{quantity:a.quantity-r})}getAssetTracking(){return this.assetTracking}assignAssetToJob(t,n,r){const a=this.findAsset(t);if(!a)throw new Error(`Asset not found: ${t}`);return a.location="job_site",a.assignedJob=n,a.lastAssigned=new Date().toISOString().split("T")[0],this.saveAssetTracking(),{success:!0,asset:a,message:`${a.description} assigned to ${r}`}}returnAssetFromJob(t){const n=this.findAsset(t);if(!n)throw new Error(`Asset not found: ${t}`);return n.location="warehouse",n.assignedJob=null,n.lastAssigned=new Date().toISOString().split("T")[0],this.saveAssetTracking(),{success:!0,asset:n,message:`${n.description} returned to warehouse`}}findAsset(t){for(const n of Object.values(this.assetTracking))if(n[t])return n[t];return null}getJobAllocations(t=null){return t?this.jobAllocations[t]||{materials:{},assets:[]}:this.jobAllocations}allocateMaterialToJob(t,n,r,a,i,o="warehouse"){this.jobAllocations[t]||(this.jobAllocations[t]={jobName:n,materials:{},assets:[],created:new Date().toISOString().split("T")[0]});const l=this.jobAllocations[t].materials[r];this.jobAllocations[t].materials[r]={quantity:((l==null?void 0:l.quantity)||0)+a,unit:i||(l==null?void 0:l.unit)||"pcs",source:o,allocatedDate:new Date().toISOString().split("T")[0],notes:(l==null?void 0:l.notes)||""},o==="warehouse"&&this.removeFromWarehouse("materials",r,a),this.saveJobAllocations()}returnMaterialFromJob(t,n,r){const a=this.jobAllocations[t];if(!a||!a.materials[n])throw new Error(`Material not allocated to job: ${n}`);const i=a.materials[n];if(i.quantity<r)throw new Error(`Insufficient allocated quantity: ${n}`);i.quantity-=r,i.quantity<=0&&delete a.materials[n],i.source==="warehouse"&&this.addToWarehouse("materials",n,r,i.unit,"Returned from job"),this.saveJobAllocations()}getLowStockItems(){const t=[];for(const n of Object.values(this.warehouseInventory))for(const[r,a]of Object.entries(n))a.quantity<=a.minStock&&t.push({category:this.getCategoryName(n),itemName:r,currentStock:a.quantity,minStock:a.minStock,unit:a.unit,location:a.location});return t}getCategoryName(t){return t===this.warehouseInventory.materials?"Materials":t===this.warehouseInventory.supplies?"Supplies":"Unknown"}getAssetStatus(){const t={total:0,inWarehouse:0,onJobs:0,byType:{}};for(const[n,r]of Object.entries(this.assetTracking)){t.byType[n]={total:0,inWarehouse:0,onJobs:0};for(const a of Object.values(r))t.total++,t.byType[n].total++,a.location==="warehouse"?(t.inWarehouse++,t.byType[n].inWarehouse++):a.location==="job_site"&&(t.onJobs++,t.byType[n].onJobs++)}return t}exportInventoryData(){return{warehouseInventory:this.warehouseInventory,jobAllocations:this.jobAllocations,assetTracking:this.assetTracking,exportDate:new Date().toISOString()}}importInventoryData(t){t.warehouseInventory&&(this.warehouseInventory=t.warehouseInventory,this.saveWarehouseInventory()),t.jobAllocations&&(this.jobAllocations=t.jobAllocations,this.saveJobAllocations()),t.assetTracking&&(this.assetTracking=t.assetTracking,this.saveAssetTracking())}importFromSortly(t){const n=t.split(`
`),r=n[0].split(",").map(u=>u.trim().toLowerCase()),a=r.findIndex(u=>u.includes("name")||u.includes("item")),i=r.findIndex(u=>u.includes("quantity")||u.includes("qty")),o=r.findIndex(u=>u.includes("location")),l=r.findIndex(u=>u.includes("notes")||u.includes("description")),c=r.findIndex(u=>u.includes("category")||u.includes("type"));let d=0;for(let u=1;u<n.length;u++){const h=n[u].trim();if(!h)continue;const f=h.split(",").map(p=>p.trim());try{const p=f[a],y=parseInt(f[i])||0,g=f[o]||"Unknown",x=f[l]||"",m=f[c]||"materials";if(p&&y>0){if(m.toLowerCase().includes("scaffold")||m.toLowerCase().includes("equipment")){const v=`IMPORT-${Date.now()}-${u}`;this.assetTracking[m]=this.assetTracking[m]||{},this.assetTracking[m][v]={type:m,description:p,condition:"good",location:"warehouse",assignedJob:null,lastAssigned:null,purchaseDate:new Date().toISOString().split("T")[0],notes:x}}else{const v=m.toLowerCase().includes("supply")?"supplies":"materials";this.addToWarehouse(v,p,y,"pcs",g,"imported",x)}d++}}catch(p){console.error(`Error importing line ${u+1}:`,p)}}return this.saveAssetTracking(),this.saveWarehouseInventory(),d}}const _a=new Vje,Uje=({jobs:e=[]})=>{const[t,n]=j.useState("warehouse"),[r,a]=j.useState(null),[i,o]=j.useState(null),[l,c]=j.useState({}),[d,u]=j.useState(""),[h,f]=j.useState("all"),[p,y]=j.useState("all"),[g,x]=j.useState(!1),[m,v]=j.useState(!1),[b,C]=j.useState(!1),[S,P]=j.useState(null),[D,N]=j.useState({name:"",quantity:"",unit:"pcs",location:"",category:"materials",minStock:"",maxStock:"",source:"purchased",notes:""}),[M,L]=j.useState({jobId:"",materialName:"",quantity:"",source:"warehouse"}),[T,E]=j.useState({assetId:"",jobId:"",action:"assign"}),A=["materials","supplies"],O=["pcs","sheets","pieces","rolls","buckets","tubes","batts","gallons","lbs","kits"],W=["purchased","leftover_from_jobs","returned","imported"];j.useEffect(()=>{z()},[]);const z=()=>{a(_a.getWarehouseInventory()),o(_a.getAssetTracking()),c(_a.getJobAllocations())},F=()=>{if(!D.name||!D.quantity||!D.location){pe({title:"Missing Information",description:"Please fill in all required fields.",variant:"destructive"});return}try{_a.updateWarehouseItem(D.category,D.name,{quantity:parseInt(D.quantity),unit:D.unit,location:D.location,minStock:parseInt(D.minStock)||0,maxStock:parseInt(D.maxStock)||100,source:D.source,notes:D.notes}),pe({title:"Item Saved! 📦",description:`${D.name} has been ${S?"updated":"added"} to warehouse.`}),I(),z()}catch(ie){pe({title:"Error",description:ie.message,variant:"destructive"})}},V=()=>{if(!M.jobId||!M.materialName||!M.quantity){pe({title:"Missing Information",description:"Please fill in all required fields.",variant:"destructive"});return}try{const ie=e.find(Ne=>Ne.id===M.jobId);_a.allocateMaterialToJob(M.jobId,(ie==null?void 0:ie.name)||"Unknown Job",M.materialName,parseInt(M.quantity),"pcs",M.source),pe({title:"Material Allocated! 🚚",description:`${M.quantity} ${M.materialName} allocated to job.`}),L({jobId:"",materialName:"",quantity:"",source:"warehouse"}),v(!1),z()}catch(ie){pe({title:"Allocation Failed",description:ie.message,variant:"destructive"})}},B=()=>{if(!T.assetId||!T.jobId){pe({title:"Missing Information",description:"Please select asset and job.",variant:"destructive"});return}try{const ie=e.find(Be=>Be.id===T.jobId);let Ne;T.action==="assign"?Ne=_a.assignAssetToJob(T.assetId,T.jobId,(ie==null?void 0:ie.name)||"Unknown Job"):Ne=_a.returnAssetFromJob(T.assetId),pe({title:"Asset Updated! 🏗️",description:Ne.message}),E({assetId:"",jobId:"",action:"assign"}),C(!1),z()}catch(ie){pe({title:"Asset Action Failed",description:ie.message,variant:"destructive"})}},Y=(ie,Ne)=>{if(confirm(`Are you sure you want to delete ${Ne}?`))try{_a.updateWarehouseItem(ie,Ne,{quantity:0}),z(),pe({title:"Item Deleted",description:`${Ne} has been removed from warehouse.`})}catch(Be){pe({title:"Delete Failed",description:Be.message,variant:"destructive"})}},$=(ie,Ne,Be)=>{P({category:ie,itemName:Ne}),N({name:Ne,quantity:Be.quantity.toString(),unit:Be.unit,location:Be.location,category:ie,minStock:Be.minStock.toString(),maxStock:Be.maxStock.toString(),source:Be.source,notes:Be.notes}),x(!0)},I=()=>{N({name:"",quantity:"",unit:"pcs",location:"",category:"materials",minStock:"",maxStock:"",source:"purchased",notes:""}),P(null),x(!1)},U=()=>{const ie=_a.exportInventoryData(),Ne=new Blob([JSON.stringify(ie,null,2)],{type:"application/json"}),Be=URL.createObjectURL(Ne),Ue=document.createElement("a");Ue.href=Be,Ue.download=`inventory-data-${new Date().toISOString().split("T")[0]}.json`,Ue.click(),URL.revokeObjectURL(Be),pe({title:"Data Exported! 📁",description:"Inventory data has been downloaded."})},q=ie=>{const Ne=ie.target.files[0];if(!Ne)return;const Be=new FileReader;Be.onload=Ue=>{try{if(Ne.name.endsWith(".json")){const _e=JSON.parse(Ue.target.result);_a.importInventoryData(_e),z(),pe({title:"Data Imported! 📥",description:"Inventory data has been successfully imported."})}else if(Ne.name.endsWith(".csv")){const _e=_a.importFromSortly(Ue.target.result);z(),pe({title:"Sortly Data Imported! 📥",description:`Imported ${_e} items from Sortly.`})}else throw new Error("Unsupported file format")}catch(_e){pe({title:"Import Failed",description:_e.message,variant:"destructive"})}},Be.readAsText(Ne)},X=()=>{if(!r)return[];let ie=[];return Object.entries(r).forEach(([Ne,Be])=>{(h==="all"||Ne===h)&&Object.entries(Be).forEach(([Ue,_e])=>{(!d||Ue.toLowerCase().includes(d.toLowerCase()))&&ie.push({category:Ne,itemName:Ue,..._e})})}),ie},te=()=>{if(!i)return[];let ie=[];return Object.entries(i).forEach(([Ne,Be])=>{Object.entries(Be).forEach(([Ue,_e])=>{(!d||_e.description.toLowerCase().includes(d.toLowerCase()))&&ie.push({category:Ne,assetId:Ue,..._e})})}),ie},ae=()=>_a.getLowStockItems(),le=()=>_a.getAssetStatus(),me=(ie,Ne)=>ie<=Ne?"text-red-600 bg-red-50 border-red-200":ie<=Ne*1.5?"text-yellow-600 bg-yellow-50 border-yellow-200":"text-green-600 bg-green-50 border-green-200",Le=ie=>ie==="warehouse"?"text-green-600 bg-green-50 border-green-200":"text-blue-600 bg-blue-50 border-blue-200";return s.jsxs("div",{className:"space-y-6",children:[s.jsx(Te,{className:"border-2 border-blue-200 bg-blue-50",children:s.jsx(Xe,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:s.jsx(MM,{className:"h-6 w-6 text-blue-600"})}),s.jsxs("div",{children:[s.jsx(Qe,{className:"text-xl font-bold text-blue-800",children:"Warehouse & Asset Management"}),s.jsx("p",{className:"text-blue-600 text-sm",children:"Track inventory, allocate materials to jobs, and manage scaffold/equipment"})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs(se,{onClick:U,variant:"outline",size:"sm",children:[s.jsx(Ri,{className:"h-4 w-4 mr-2"}),"Export"]}),s.jsxs(se,{variant:"outline",size:"sm",onClick:()=>document.getElementById("import-file").click(),children:[s.jsx(Gl,{className:"h-4 w-4 mr-2"}),"Import"]}),s.jsx("input",{id:"import-file",type:"file",accept:".json,.csv",onChange:q,className:"hidden"})]})]})})}),ae().length>0&&s.jsxs(Te,{className:"border-2 border-red-200 bg-red-50",children:[s.jsx(Xe,{children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(co,{className:"h-5 w-5 text-red-600"}),s.jsx(Qe,{className:"text-red-800",children:"Low Stock Alerts"})]})}),s.jsx(Me,{children:s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-2",children:ae().map((ie,Ne)=>s.jsxs(ht,{variant:"outline",className:"text-red-600 border-red-300",children:[ie.itemName,": ",ie.currentStock," ",ie.unit," (Min: ",ie.minStock,")"]},Ne))})})]}),s.jsxs(uo,{value:t,onValueChange:n,className:"space-y-6",children:[s.jsxs(Oi,{className:"grid w-full grid-cols-4",children:[s.jsx(Ht,{value:"warehouse",children:"Warehouse Inventory"}),s.jsx(Ht,{value:"allocations",children:"Job Allocations"}),s.jsx(Ht,{value:"assets",children:"Asset Tracking"}),s.jsx(Ht,{value:"analytics",children:"Inventory Analytics"})]}),s.jsxs(en,{value:"warehouse",className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx(p1,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),s.jsx($e,{placeholder:"Search items...",value:d,onChange:ie=>u(ie.target.value),className:"pl-10 w-64"})]}),s.jsxs(st,{value:h,onValueChange:f,children:[s.jsx(nt,{className:"w-48",children:s.jsx(at,{placeholder:"Filter by category"})}),s.jsxs(rt,{children:[s.jsx(xe,{value:"all",children:"All Categories"}),s.jsx(xe,{value:"materials",children:"Materials"}),s.jsx(xe,{value:"supplies",children:"Supplies"})]})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs(se,{onClick:()=>v(!0),variant:"outline",children:[s.jsx(Rm,{className:"h-4 w-4 mr-2"}),"Allocate to Job"]}),s.jsxs(se,{onClick:()=>x(!0),children:[s.jsx(un,{className:"h-4 w-4 mr-2"}),"Add Item"]})]})]}),g&&s.jsxs(Te,{className:"border-2 border-blue-200 bg-blue-50",children:[s.jsx(Xe,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(Qe,{className:"text-lg",children:S?"Edit Item":"Add New Item"}),s.jsx(se,{variant:"ghost",size:"sm",onClick:I,children:s.jsx(rn,{className:"h-4 w-4"})})]})}),s.jsxs(Me,{children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx(de,{htmlFor:"name",children:"Item Name"}),s.jsx($e,{id:"name",value:D.name,onChange:ie=>N({...D,name:ie.target.value}),placeholder:"Item name"})]}),s.jsxs("div",{children:[s.jsx(de,{htmlFor:"quantity",children:"Quantity"}),s.jsx($e,{id:"quantity",type:"number",value:D.quantity,onChange:ie=>N({...D,quantity:ie.target.value}),placeholder:"0"})]}),s.jsxs("div",{children:[s.jsx(de,{htmlFor:"unit",children:"Unit"}),s.jsxs(st,{value:D.unit,onValueChange:ie=>N({...D,unit:ie}),children:[s.jsx(nt,{children:s.jsx(at,{})}),s.jsx(rt,{children:O.map(ie=>s.jsx(xe,{value:ie,children:ie},ie))})]})]}),s.jsxs("div",{children:[s.jsx(de,{htmlFor:"location",children:"Location"}),s.jsx($e,{id:"location",value:D.location,onChange:ie=>N({...D,location:ie.target.value}),placeholder:"Warehouse location"})]}),s.jsxs("div",{children:[s.jsx(de,{htmlFor:"category",children:"Category"}),s.jsxs(st,{value:D.category,onValueChange:ie=>N({...D,category:ie}),children:[s.jsx(nt,{children:s.jsx(at,{})}),s.jsx(rt,{children:A.map(ie=>s.jsx(xe,{value:ie,children:ie},ie))})]})]}),s.jsxs("div",{children:[s.jsx(de,{htmlFor:"source",children:"Source"}),s.jsxs(st,{value:D.source,onValueChange:ie=>N({...D,source:ie}),children:[s.jsx(nt,{children:s.jsx(at,{})}),s.jsx(rt,{children:W.map(ie=>s.jsx(xe,{value:ie,children:ie.replace("_"," ")},ie))})]})]}),s.jsxs("div",{children:[s.jsx(de,{htmlFor:"minStock",children:"Min Stock"}),s.jsx($e,{id:"minStock",type:"number",value:D.minStock,onChange:ie=>N({...D,minStock:ie.target.value}),placeholder:"0"})]}),s.jsxs("div",{children:[s.jsx(de,{htmlFor:"maxStock",children:"Max Stock"}),s.jsx($e,{id:"maxStock",type:"number",value:D.maxStock,onChange:ie=>N({...D,maxStock:ie.target.value}),placeholder:"100"})]}),s.jsxs("div",{children:[s.jsx(de,{htmlFor:"notes",children:"Notes"}),s.jsx($e,{id:"notes",value:D.notes,onChange:ie=>N({...D,notes:ie.target.value}),placeholder:"Additional notes"})]})]}),s.jsxs("div",{className:"flex justify-end space-x-2 mt-4",children:[s.jsx(se,{variant:"outline",onClick:I,children:"Cancel"}),s.jsxs(se,{onClick:F,children:[s.jsx(Qn,{className:"h-4 w-4 mr-2"}),"Save Item"]})]})]})]}),s.jsxs(Te,{children:[s.jsx(Xe,{children:s.jsx(Qe,{children:"Warehouse Inventory"})}),s.jsx(Me,{children:s.jsxs(Hr,{children:[s.jsx(qr,{children:s.jsxs(Jt,{children:[s.jsx(qe,{children:"Item"}),s.jsx(qe,{children:"Category"}),s.jsx(qe,{children:"Quantity"}),s.jsx(qe,{children:"Location"}),s.jsx(qe,{children:"Stock Status"}),s.jsx(qe,{children:"Source"}),s.jsx(qe,{children:"Last Updated"}),s.jsx(qe,{children:"Actions"})]})}),s.jsx(Vr,{children:X().map((ie,Ne)=>s.jsxs(Jt,{children:[s.jsx(ze,{className:"font-medium",children:ie.itemName}),s.jsx(ze,{className:"capitalize",children:ie.category}),s.jsxs(ze,{children:[ie.quantity," ",ie.unit]}),s.jsx(ze,{children:s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(Kf,{className:"h-3 w-3 text-gray-400"}),s.jsx("span",{className:"text-sm",children:ie.location})]})}),s.jsx(ze,{children:s.jsx(ht,{className:me(ie.quantity,ie.minStock),children:ie.quantity<=ie.minStock?"Low Stock":ie.quantity<=ie.minStock*1.5?"Medium":"Good"})}),s.jsx(ze,{children:s.jsx(ht,{variant:"outline",children:ie.source.replace("_"," ")})}),s.jsx(ze,{children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(kn,{className:"h-4 w-4 text-gray-400"}),s.jsx("span",{className:"text-sm text-gray-600",children:ie.lastUpdated})]})}),s.jsx(ze,{children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(se,{variant:"ghost",size:"sm",onClick:()=>$(ie.category,ie.itemName,ie),children:s.jsx(ad,{className:"h-4 w-4"})}),s.jsx(se,{variant:"ghost",size:"sm",onClick:()=>Y(ie.category,ie.itemName),children:s.jsx(Kt,{className:"h-4 w-4"})})]})})]},Ne))})]})})]})]}),s.jsxs(en,{value:"allocations",className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("div",{className:"flex items-center space-x-4",children:s.jsxs(st,{value:p,onValueChange:y,children:[s.jsx(nt,{className:"w-64",children:s.jsx(at,{placeholder:"Filter by job"})}),s.jsxs(rt,{children:[s.jsx(xe,{value:"all",children:"All Jobs"}),e.map(ie=>s.jsx(xe,{value:ie.id,children:ie.name},ie.id))]})]})}),s.jsxs(se,{onClick:()=>v(!0),children:[s.jsx(un,{className:"h-4 w-4 mr-2"}),"Allocate Material"]})]}),m&&s.jsxs(Te,{className:"border-2 border-green-200 bg-green-50",children:[s.jsx(Xe,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(Qe,{className:"text-lg",children:"Allocate Material to Job"}),s.jsx(se,{variant:"ghost",size:"sm",onClick:()=>v(!1),children:s.jsx(rn,{className:"h-4 w-4"})})]})}),s.jsxs(Me,{children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsxs("div",{children:[s.jsx(de,{htmlFor:"allocation-job",children:"Job"}),s.jsxs(st,{value:M.jobId,onValueChange:ie=>L({...M,jobId:ie}),children:[s.jsx(nt,{children:s.jsx(at,{placeholder:"Select job"})}),s.jsx(rt,{children:e.map(ie=>s.jsx(xe,{value:ie.id,children:ie.name},ie.id))})]})]}),s.jsxs("div",{children:[s.jsx(de,{htmlFor:"allocation-material",children:"Material"}),s.jsx($e,{id:"allocation-material",value:M.materialName,onChange:ie=>L({...M,materialName:ie.target.value}),placeholder:"Material name"})]}),s.jsxs("div",{children:[s.jsx(de,{htmlFor:"allocation-quantity",children:"Quantity"}),s.jsx($e,{id:"allocation-quantity",type:"number",value:M.quantity,onChange:ie=>L({...M,quantity:ie.target.value}),placeholder:"0"})]}),s.jsxs("div",{children:[s.jsx(de,{htmlFor:"allocation-source",children:"Source"}),s.jsxs(st,{value:M.source,onValueChange:ie=>L({...M,source:ie}),children:[s.jsx(nt,{children:s.jsx(at,{})}),s.jsxs(rt,{children:[s.jsx(xe,{value:"warehouse",children:"Warehouse"}),s.jsx(xe,{value:"supplier",children:"Supplier"})]})]})]})]}),s.jsxs("div",{className:"flex justify-end space-x-2 mt-4",children:[s.jsx(se,{variant:"outline",onClick:()=>v(!1),children:"Cancel"}),s.jsxs(se,{onClick:V,children:[s.jsx(Rm,{className:"h-4 w-4 mr-2"}),"Allocate"]})]})]})]}),s.jsxs(Te,{children:[s.jsx(Xe,{children:s.jsx(Qe,{children:"Job Allocations"})}),s.jsx(Me,{children:s.jsxs(Hr,{children:[s.jsx(qr,{children:s.jsxs(Jt,{children:[s.jsx(qe,{children:"Job"}),s.jsx(qe,{children:"Material"}),s.jsx(qe,{children:"Quantity"}),s.jsx(qe,{children:"Source"}),s.jsx(qe,{children:"Allocated Date"}),s.jsx(qe,{children:"Actions"})]})}),s.jsx(Vr,{children:Object.entries(l).map(([ie,Ne])=>p!=="all"&&ie!==p?null:Object.entries(Ne.materials).map(([Be,Ue])=>s.jsxs(Jt,{children:[s.jsx(ze,{className:"font-medium",children:Ne.jobName}),s.jsx(ze,{children:Be}),s.jsxs(ze,{children:[Ue.quantity," ",Ue.unit]}),s.jsx(ze,{children:s.jsx(ht,{variant:"outline",children:Ue.source})}),s.jsx(ze,{children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(kn,{className:"h-4 w-4 text-gray-400"}),s.jsx("span",{className:"text-sm text-gray-600",children:Ue.allocatedDate})]})}),s.jsx(ze,{children:s.jsx(se,{variant:"ghost",size:"sm",onClick:()=>{try{_a.returnMaterialFromJob(ie,Be,Ue.quantity),z(),pe({title:"Material Returned",description:`${Be} returned to warehouse.`})}catch(_e){pe({title:"Return Failed",description:_e.message,variant:"destructive"})}},children:s.jsx(zj,{className:"h-4 w-4"})})})]},`${ie}-${Be}`)))})]})})]})]}),s.jsxs(en,{value:"assets",className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("div",{className:"flex items-center space-x-4",children:s.jsxs(st,{value:h,onValueChange:f,children:[s.jsx(nt,{className:"w-48",children:s.jsx(at,{placeholder:"Filter by type"})}),s.jsxs(rt,{children:[s.jsx(xe,{value:"all",children:"All Types"}),s.jsx(xe,{value:"scaffold",children:"Scaffold"}),s.jsx(xe,{value:"equipment",children:"Equipment"})]})]})}),s.jsxs(se,{onClick:()=>C(!0),children:[s.jsx(hg,{className:"h-4 w-4 mr-2"}),"Assign Asset"]})]}),b&&s.jsxs(Te,{className:"border-2 border-purple-200 bg-purple-50",children:[s.jsx(Xe,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(Qe,{className:"text-lg",children:"Asset Assignment"}),s.jsx(se,{variant:"ghost",size:"sm",onClick:()=>C(!1),children:s.jsx(rn,{className:"h-4 w-4"})})]})}),s.jsxs(Me,{children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx(de,{htmlFor:"asset-action",children:"Action"}),s.jsxs(st,{value:T.action,onValueChange:ie=>E({...T,action:ie}),children:[s.jsx(nt,{children:s.jsx(at,{})}),s.jsxs(rt,{children:[s.jsx(xe,{value:"assign",children:"Assign to Job"}),s.jsx(xe,{value:"return",children:"Return to Warehouse"})]})]})]}),s.jsxs("div",{children:[s.jsx(de,{htmlFor:"asset-id",children:"Asset"}),s.jsxs(st,{value:T.assetId,onValueChange:ie=>E({...T,assetId:ie}),children:[s.jsx(nt,{children:s.jsx(at,{placeholder:"Select asset"})}),s.jsx(rt,{children:te().map(ie=>s.jsxs(xe,{value:ie.assetId,children:[ie.description," (",ie.location==="warehouse"?"In Warehouse":"On Job",")"]},ie.assetId))})]})]}),T.action==="assign"&&s.jsxs("div",{children:[s.jsx(de,{htmlFor:"asset-job",children:"Job"}),s.jsxs(st,{value:T.jobId,onValueChange:ie=>E({...T,jobId:ie}),children:[s.jsx(nt,{children:s.jsx(at,{placeholder:"Select job"})}),s.jsx(rt,{children:e.map(ie=>s.jsx(xe,{value:ie.id,children:ie.name},ie.id))})]})]})]}),s.jsxs("div",{className:"flex justify-end space-x-2 mt-4",children:[s.jsx(se,{variant:"outline",onClick:()=>C(!1),children:"Cancel"}),s.jsxs(se,{onClick:B,children:[T.action==="assign"?s.jsx(Rm,{className:"h-4 w-4 mr-2"}):s.jsx(zj,{className:"h-4 w-4 mr-2"}),T.action==="assign"?"Assign":"Return"]})]})]})]}),s.jsxs(Te,{children:[s.jsx(Xe,{children:s.jsx(Qe,{children:"Asset Tracking"})}),s.jsx(Me,{children:s.jsxs(Hr,{children:[s.jsx(qr,{children:s.jsxs(Jt,{children:[s.jsx(qe,{children:"Asset ID"}),s.jsx(qe,{children:"Type"}),s.jsx(qe,{children:"Description"}),s.jsx(qe,{children:"Condition"}),s.jsx(qe,{children:"Location"}),s.jsx(qe,{children:"Assigned Job"}),s.jsx(qe,{children:"Last Updated"})]})}),s.jsx(Vr,{children:te().map((ie,Ne)=>{var Be;return s.jsxs(Jt,{children:[s.jsx(ze,{className:"font-medium",children:ie.assetId}),s.jsx(ze,{className:"capitalize",children:ie.type}),s.jsx(ze,{children:ie.description}),s.jsx(ze,{children:s.jsx(ht,{variant:"outline",className:ie.condition==="excellent"?"text-green-600 border-green-300":ie.condition==="good"?"text-blue-600 border-blue-300":"text-yellow-600 border-yellow-300",children:ie.condition})}),s.jsx(ze,{children:s.jsx(ht,{className:Le(ie.location),children:ie.location==="warehouse"?"In Warehouse":"On Job Site"})}),s.jsx(ze,{children:ie.assignedJob?s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(vr,{className:"h-3 w-3 text-gray-400"}),s.jsx("span",{className:"text-sm",children:((Be=e.find(Ue=>Ue.id===ie.assignedJob))==null?void 0:Be.name)||"Unknown Job"})]}):s.jsx("span",{className:"text-gray-400",children:"Not assigned"})}),s.jsx(ze,{children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(kn,{className:"h-4 w-4 text-gray-400"}),s.jsx("span",{className:"text-sm text-gray-600",children:ie.lastAssigned||"Never"})]})})]},Ne)})})]})})]})]}),s.jsxs(en,{value:"analytics",className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsx(Te,{children:s.jsx(Me,{className:"p-6",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(ya,{className:"h-8 w-8 text-blue-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Total Items"}),s.jsx("p",{className:"text-2xl font-bold",children:X().length})]})]})})}),s.jsx(Te,{children:s.jsx(Me,{className:"p-6",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(co,{className:"h-8 w-8 text-red-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Low Stock Items"}),s.jsx("p",{className:"text-2xl font-bold",children:ae().length})]})]})})}),s.jsx(Te,{children:s.jsx(Me,{className:"p-6",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(or,{className:"h-8 w-8 text-purple-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Total Assets"}),s.jsx("p",{className:"text-2xl font-bold",children:le().total})]})]})})}),s.jsx(Te,{children:s.jsx(Me,{className:"p-6",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(hg,{className:"h-8 w-8 text-green-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Assets on Jobs"}),s.jsx("p",{className:"text-2xl font-bold",children:le().onJobs})]})]})})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs(Te,{children:[s.jsx(Xe,{children:s.jsx(Qe,{children:"Asset Status by Type"})}),s.jsx(Me,{children:s.jsx("div",{className:"space-y-4",children:Object.entries(le().byType).map(([ie,Ne])=>s.jsxs("div",{className:"border rounded-lg p-4",children:[s.jsx("h4",{className:"font-medium mb-2 capitalize",children:ie}),s.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-600",children:"Total"}),s.jsx("p",{className:"font-bold",children:Ne.total})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-600",children:"In Warehouse"}),s.jsx("p",{className:"font-bold text-green-600",children:Ne.inWarehouse})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-600",children:"On Jobs"}),s.jsx("p",{className:"font-bold text-blue-600",children:Ne.onJobs})]})]})]},ie))})})]}),s.jsxs(Te,{children:[s.jsx(Xe,{children:s.jsx(Qe,{children:"Low Stock Alerts"})}),s.jsx(Me,{children:s.jsx("div",{className:"space-y-2",children:ae().length>0?ae().map((ie,Ne)=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-red-50 border border-red-200 rounded-lg",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-red-800",children:ie.itemName}),s.jsxs("p",{className:"text-sm text-red-600",children:[ie.currentStock," ",ie.unit," remaining"]})]}),s.jsx(ht,{variant:"outline",className:"text-red-600 border-red-300",children:"Reorder"})]},Ne)):s.jsxs("div",{className:"flex items-center space-x-2 p-4 bg-green-50 border border-green-200 rounded-lg",children:[s.jsx(Br,{className:"h-5 w-5 text-green-600"}),s.jsx("span",{className:"text-green-800",children:"All items are well stocked!"})]})})})]})]})]})]})]})};class Yje{constructor(){this.loadCashFlowData()}loadCashFlowData(){const t=localStorage.getItem("cashFlowData");t?this.cashFlowData=JSON.parse(t):(this.cashFlowData={currentBalance:5e4,revenueProjections:{},expenseProjections:{},recurringExpenses:{payroll:{weekly:15e3,biweekly:!1,description:"Weekly Payroll"},vehiclePayments:{monthly:2500,dueDay:15,description:"Vehicle Loan Payments"},insurance:{monthly:800,dueDay:1,description:"Business Insurance"},rent:{monthly:2e3,dueDay:1,description:"Office Rent"},utilities:{monthly:400,dueDay:15,description:"Utilities"}},paymentTerms:{customerPaymentDays:30,supplierPaymentDays:45,retainagePercentage:10},scenarios:{optimistic:{revenueMultiplier:1.1,expenseMultiplier:.95},pessimistic:{revenueMultiplier:.9,expenseMultiplier:1.05},realistic:{revenueMultiplier:1,expenseMultiplier:1}}},this.saveCashFlowData())}saveCashFlowData(){localStorage.setItem("cashFlowData",JSON.stringify(this.cashFlowData))}addRevenueProjection(t,n,r,a,i,o=""){this.cashFlowData.revenueProjections[t]||(this.cashFlowData.revenueProjections[t]=[]),this.cashFlowData.revenueProjections[t].push({id:Date.now()+Math.random(),jobName:n,amount:parseFloat(r),billingDate:a,expectedPaymentDate:i,description:o,status:"projected",actualPaymentDate:null,actualAmount:null}),this.saveCashFlowData()}updateRevenueStatus(t,n,r,a=null,i=null){const o=this.cashFlowData.revenueProjections[t];if(o){const l=o.find(c=>c.id===n);l&&(l.status=r,l.actualPaymentDate=a,l.actualAmount=i,this.saveCashFlowData())}}addExpenseProjection(t,n,r,a,i=""){this.cashFlowData.expenseProjections[t]||(this.cashFlowData.expenseProjections[t]=[]),this.cashFlowData.expenseProjections[t].push({id:Date.now()+Math.random(),amount:parseFloat(n),dueDate:r,description:a,supplier:i,status:"projected",actualPaymentDate:null,actualAmount:null}),this.saveCashFlowData()}updateExpenseStatus(t,n,r,a=null,i=null){const o=this.cashFlowData.expenseProjections[t];if(o){const l=o.find(c=>c.id===n);l&&(l.status=r,l.actualPaymentDate=a,l.actualAmount=i,this.saveCashFlowData())}}updateRecurringExpense(t,n){this.cashFlowData.recurringExpenses[t]={...this.cashFlowData.recurringExpenses[t],...n},this.saveCashFlowData()}calculateCashFlowProjection(t,n,r="realistic"){const a=this.getWeeksBetween(t,n),i=[];let o=this.cashFlowData.currentBalance;return a.forEach(l=>{const c=new Date(l),d=new Date(c.getTime()+6*24*60*60*1e3),u=this.calculateWeeklyRevenue(c,d,r),h=this.calculateWeeklyExpenses(c,d,r),f=u-h;o+=f,i.push({weekStart:c.toISOString().split("T")[0],weekEnd:d.toISOString().split("T")[0],revenue:u,expenses:h,netCashFlow:f,runningBalance:o,fundingNeeded:o<0?Math.abs(o):0})}),i}calculateWeeklyRevenue(t,n,r){let a=0;const i=this.cashFlowData.scenarios[r].revenueMultiplier;return Object.values(this.cashFlowData.revenueProjections).forEach(o=>{o.forEach(l=>{if(l.status==="projected"||l.status==="billed"){const c=new Date(l.expectedPaymentDate);c>=t&&c<=n&&(a+=l.amount*i)}else if(l.status==="received"&&l.actualPaymentDate){const c=new Date(l.actualPaymentDate);c>=t&&c<=n&&(a+=l.actualAmount||l.amount)}})}),a}calculateWeeklyExpenses(t,n,r){let a=0;const i=this.cashFlowData.scenarios[r].expenseMultiplier;return Object.values(this.cashFlowData.expenseProjections).forEach(o=>{o.forEach(l=>{if(l.status==="projected"){const c=new Date(l.dueDate);c>=t&&c<=n&&(a+=l.amount*i)}else if(l.status==="paid"&&l.actualPaymentDate){const c=new Date(l.actualPaymentDate);c>=t&&c<=n&&(a+=l.actualAmount||l.amount)}})}),Object.entries(this.cashFlowData.recurringExpenses).forEach(([o,l])=>{if(l.weekly)a+=l.weekly*i;else if(l.monthly){const c=new Date(t.getFullYear(),t.getMonth(),1),d=new Date(t.getFullYear(),t.getMonth()+1,0);if(t<=d&&n>=c){const u=new Date(t.getFullYear(),t.getMonth(),l.dueDay);u>=t&&u<=n&&(a+=l.monthly*i)}}}),a}getWeeksBetween(t,n){const r=[],a=new Date(t),i=new Date(n);for(;a<=i;)r.push(new Date(a)),a.setDate(a.getDate()+7);return r}identifyFundingGaps(t){const n=[];let r=null;return t.forEach((a,i)=>{a.fundingNeeded>0?(r||(r={startWeek:a.weekStart,maxFundingNeeded:a.fundingNeeded,weeks:[]}),r.weeks.push(a),r.maxFundingNeeded=Math.max(r.maxFundingNeeded,a.fundingNeeded)):r&&(r.endWeek=t[i-1].weekStart,n.push(r),r=null)}),r&&(r.endWeek=t[t.length-1].weekStart,n.push(r)),n}generateScenarioComparison(t,n){const r=["optimistic","realistic","pessimistic"],a={};return r.forEach(i=>{var h;const o=this.calculateCashFlowProjection(t,n,i),l=o.reduce((f,p)=>f+p.revenue,0),c=o.reduce((f,p)=>f+p.expenses,0),d=l-c,u=this.identifyFundingGaps(o);a[i]={totalRevenue:l,totalExpenses:c,netCashFlow:d,fundingGaps:u,finalBalance:((h=o[o.length-1])==null?void 0:h.runningBalance)||this.cashFlowData.currentBalance}}),a}exportCashFlowData(){return this.cashFlowData}importCashFlowData(t){this.cashFlowData={...this.cashFlowData,...t},this.saveCashFlowData()}getRevenueProjections(){return this.cashFlowData.revenueProjections}getExpenseProjections(){return this.cashFlowData.expenseProjections}getRecurringExpenses(){return this.cashFlowData.recurringExpenses}getPaymentTerms(){return this.cashFlowData.paymentTerms}updatePaymentTerms(t){this.cashFlowData.paymentTerms={...this.cashFlowData.paymentTerms,...t},this.saveCashFlowData()}updateCurrentBalance(t){this.cashFlowData.currentBalance=parseFloat(t),this.saveCashFlowData()}}const Qi=new Yje,Gje=({jobs:e=[]})=>{const[t,n]=j.useState("overview"),[r,a]=j.useState(5e4),[i,o]=j.useState(new Date().toISOString().split("T")[0]),[l,c]=j.useState(new Date(Date.now()+90*24*60*60*1e3).toISOString().split("T")[0]),[d,u]=j.useState("realistic"),[h,f]=j.useState(null),[p,y]=j.useState({}),[g,x]=j.useState({}),[m,v]=j.useState({}),[b,C]=j.useState(!1),[S,P]=j.useState(!1),[D,N]=j.useState(!1),[M,L]=j.useState({jobId:"",amount:"",billingDate:"",expectedPaymentDate:"",description:""}),[T,E]=j.useState({category:"",amount:"",dueDate:"",description:"",supplier:""}),A=["materials","subcontractors","equipment","insurance","utilities","rent","vehicle_payments","other"];j.useEffect(()=>{O()},[]),j.useEffect(()=>{h&&W()},[i,l,d,h]);const O=()=>{const q=Qi.cashFlowData.currentBalance;a(q),y(Qi.getRevenueProjections()),x(Qi.getExpenseProjections()),v(Qi.getRecurringExpenses())},W=()=>{const q=Qi.calculateCashFlowProjection(new Date(i),new Date(l),d);f(q)},z=()=>{if(!M.jobId||!M.amount||!M.expectedPaymentDate){pe({title:"Missing Information",description:"Please fill in all required fields.",variant:"destructive"});return}const q=e.find(X=>X.id===M.jobId);Qi.addRevenueProjection(M.jobId,(q==null?void 0:q.name)||"Unknown Job",M.amount,M.billingDate,M.expectedPaymentDate,M.description),pe({title:"Revenue Projection Added! 💰",description:`$${M.amount} projected for ${(q==null?void 0:q.name)||"Unknown Job"}`}),L({jobId:"",amount:"",billingDate:"",expectedPaymentDate:"",description:""}),C(!1),O()},F=()=>{if(!T.category||!T.amount||!T.dueDate){pe({title:"Missing Information",description:"Please fill in all required fields.",variant:"destructive"});return}Qi.addExpenseProjection(T.category,T.amount,T.dueDate,T.description,T.supplier),pe({title:"Expense Projection Added! 💸",description:`$${T.amount} expense projected for ${T.category}`}),E({category:"",amount:"",dueDate:"",description:"",supplier:""}),P(!1),O()},V=()=>{Qi.updateCurrentBalance(r),W(),pe({title:"Balance Updated! 💳",description:`Current balance set to $${r.toLocaleString()}`})},B=()=>{const q=Qi.exportCashFlowData(),X=new Blob([JSON.stringify(q,null,2)],{type:"application/json"}),te=URL.createObjectURL(X),ae=document.createElement("a");ae.href=te,ae.download=`cash-flow-data-${new Date().toISOString().split("T")[0]}.json`,ae.click(),URL.revokeObjectURL(te),pe({title:"Data Exported! 📁",description:"Cash flow data has been downloaded."})},Y=()=>h?Qi.identifyFundingGaps(h):[],$=()=>Qi.generateScenarioComparison(new Date(i),new Date(l)),I=q=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(q),U=q=>q>0?"text-green-600 bg-green-50 border-green-200":q<0?"text-red-600 bg-red-50 border-red-200":"text-gray-600 bg-gray-50 border-gray-200";return s.jsxs("div",{className:"space-y-6",children:[s.jsx(Te,{className:"border-2 border-green-200 bg-green-50",children:s.jsx(Xe,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:s.jsx(_r,{className:"h-6 w-6 text-green-600"})}),s.jsxs("div",{children:[s.jsx(Qe,{className:"text-xl font-bold text-green-800",children:"Cash Flow Forecasting"}),s.jsx("p",{className:"text-green-600 text-sm",children:"Project revenue, track expenses, and identify funding needs"})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs(se,{onClick:B,variant:"outline",size:"sm",children:[s.jsx(Ri,{className:"h-4 w-4 mr-2"}),"Export"]}),s.jsxs(se,{onClick:()=>N(!0),variant:"outline",size:"sm",children:[s.jsx(wS,{className:"h-4 w-4 mr-2"}),"Settings"]})]})]})})}),s.jsx(Te,{children:s.jsx(Me,{className:"p-6",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsxs("div",{children:[s.jsx(de,{htmlFor:"current-balance",children:"Current Balance"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx($e,{id:"current-balance",type:"number",value:r,onChange:q=>a(parseFloat(q.target.value)||0),className:"text-lg font-bold"}),s.jsx(se,{onClick:V,size:"sm",children:s.jsx(Qn,{className:"h-4 w-4"})})]})]}),s.jsxs("div",{children:[s.jsx(de,{children:"Projection Period"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx($e,{type:"date",value:i,onChange:q=>o(q.target.value)}),s.jsx("span",{children:"to"}),s.jsx($e,{type:"date",value:l,onChange:q=>c(q.target.value)})]})]}),s.jsxs("div",{children:[s.jsx(de,{children:"Scenario"}),s.jsxs(st,{value:d,onValueChange:u,children:[s.jsx(nt,{children:s.jsx(at,{})}),s.jsxs(rt,{children:[s.jsx(xe,{value:"optimistic",children:"Optimistic"}),s.jsx(xe,{value:"realistic",children:"Realistic"}),s.jsx(xe,{value:"pessimistic",children:"Pessimistic"})]})]})]}),s.jsx("div",{className:"flex items-end",children:s.jsxs(se,{onClick:W,className:"w-full",children:[s.jsx(Jf,{className:"h-4 w-4 mr-2"}),"Update Projection"]})})]})})}),Y().length>0&&s.jsxs(Te,{className:"border-2 border-red-200 bg-red-50",children:[s.jsx(Xe,{children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(co,{className:"h-5 w-5 text-red-600"}),s.jsx(Qe,{className:"text-red-800",children:"Funding Gaps Detected"})]})}),s.jsx(Me,{children:s.jsx("div",{className:"space-y-2",children:Y().map((q,X)=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-red-100 border border-red-200 rounded-lg",children:[s.jsxs("div",{children:[s.jsxs("p",{className:"font-medium text-red-800",children:[q.startWeek," to ",q.endWeek]}),s.jsxs("p",{className:"text-sm text-red-600",children:["Maximum funding needed: ",I(q.maxFundingNeeded)]})]}),s.jsxs(ht,{variant:"outline",className:"text-red-600 border-red-300",children:[q.weeks.length," weeks"]})]},X))})})]}),s.jsxs(uo,{value:t,onValueChange:n,className:"space-y-6",children:[s.jsxs(Oi,{className:"grid w-full grid-cols-5",children:[s.jsx(Ht,{value:"overview",children:"Overview"}),s.jsx(Ht,{value:"revenue",children:"Revenue"}),s.jsx(Ht,{value:"expenses",children:"Expenses"}),s.jsx(Ht,{value:"timeline",children:"Timeline"}),s.jsx(Ht,{value:"scenarios",children:"Scenarios"})]}),s.jsxs(en,{value:"overview",className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsx(Te,{children:s.jsx(Me,{className:"p-6",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Ei,{className:"h-8 w-8 text-green-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Projected Revenue"}),s.jsx("p",{className:"text-2xl font-bold",children:h?I(h.reduce((q,X)=>q+X.revenue,0)):"$0"})]})]})})}),s.jsx(Te,{children:s.jsx(Me,{className:"p-6",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(ug,{className:"h-8 w-8 text-red-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Projected Expenses"}),s.jsx("p",{className:"text-2xl font-bold",children:h?I(h.reduce((q,X)=>q+X.expenses,0)):"$0"})]})]})})}),s.jsx(Te,{children:s.jsx(Me,{className:"p-6",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(_r,{className:"h-8 w-8 text-blue-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Net Cash Flow"}),s.jsx("p",{className:"text-2xl font-bold",children:h?I(h.reduce((q,X)=>q+X.netCashFlow,0)):"$0"})]})]})})}),s.jsx(Te,{children:s.jsx(Me,{className:"p-6",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Br,{className:"h-8 w-8 text-purple-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Final Balance"}),s.jsx("p",{className:"text-2xl font-bold",children:h&&h.length>0?I(h[h.length-1].runningBalance):I(r)})]})]})})})]}),h&&h.length>0&&s.jsxs(Te,{children:[s.jsx(Xe,{children:s.jsx(Qe,{children:"Cash Flow Timeline"})}),s.jsx(Me,{children:s.jsx("div",{className:"space-y-4",children:h.slice(0,12).map((q,X)=>s.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"text-sm text-gray-600 w-24",children:new Date(q.weekStart).toLocaleDateString()}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"text-sm",children:s.jsxs("span",{className:"text-green-600",children:["+",I(q.revenue)]})}),s.jsx("div",{className:"text-sm",children:s.jsxs("span",{className:"text-red-600",children:["-",I(q.expenses)]})})]})]}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx(ht,{className:U(q.netCashFlow),children:I(q.netCashFlow)}),s.jsxs("div",{className:"text-sm font-medium",children:["Balance: ",I(q.runningBalance)]})]})]},X))})})]})]}),s.jsxs(en,{value:"revenue",className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Revenue Projections"}),s.jsxs(se,{onClick:()=>C(!0),children:[s.jsx(un,{className:"h-4 w-4 mr-2"}),"Add Revenue"]})]}),b&&s.jsxs(Te,{className:"border-2 border-green-200 bg-green-50",children:[s.jsx(Xe,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(Qe,{className:"text-lg",children:"Add Revenue Projection"}),s.jsx(se,{variant:"ghost",size:"sm",onClick:()=>C(!1),children:s.jsx(rn,{className:"h-4 w-4"})})]})}),s.jsxs(Me,{children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx(de,{htmlFor:"revenue-job",children:"Job"}),s.jsxs(st,{value:M.jobId,onValueChange:q=>L({...M,jobId:q}),children:[s.jsx(nt,{children:s.jsx(at,{placeholder:"Select job"})}),s.jsx(rt,{children:e.map(q=>s.jsx(xe,{value:q.id,children:q.name},q.id))})]})]}),s.jsxs("div",{children:[s.jsx(de,{htmlFor:"revenue-amount",children:"Amount"}),s.jsx($e,{id:"revenue-amount",type:"number",value:M.amount,onChange:q=>L({...M,amount:q.target.value}),placeholder:"0.00"})]}),s.jsxs("div",{children:[s.jsx(de,{htmlFor:"revenue-payment-date",children:"Expected Payment Date"}),s.jsx($e,{id:"revenue-payment-date",type:"date",value:M.expectedPaymentDate,onChange:q=>L({...M,expectedPaymentDate:q.target.value})})]}),s.jsxs("div",{children:[s.jsx(de,{htmlFor:"revenue-billing-date",children:"Billing Date"}),s.jsx($e,{id:"revenue-billing-date",type:"date",value:M.billingDate,onChange:q=>L({...M,billingDate:q.target.value})})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx(de,{htmlFor:"revenue-description",children:"Description"}),s.jsx($e,{id:"revenue-description",value:M.description,onChange:q=>L({...M,description:q.target.value}),placeholder:"Payment description"})]})]}),s.jsxs("div",{className:"flex justify-end space-x-2 mt-4",children:[s.jsx(se,{variant:"outline",onClick:()=>C(!1),children:"Cancel"}),s.jsxs(se,{onClick:z,children:[s.jsx(Qn,{className:"h-4 w-4 mr-2"}),"Save Revenue"]})]})]})]}),s.jsxs(Te,{children:[s.jsx(Xe,{children:s.jsx(Qe,{children:"Revenue Projections"})}),s.jsx(Me,{children:s.jsxs(Hr,{children:[s.jsx(qr,{children:s.jsxs(Jt,{children:[s.jsx(qe,{children:"Job"}),s.jsx(qe,{children:"Amount"}),s.jsx(qe,{children:"Billing Date"}),s.jsx(qe,{children:"Expected Payment"}),s.jsx(qe,{children:"Status"}),s.jsx(qe,{children:"Description"})]})}),s.jsx(Vr,{children:Object.entries(p).map(([q,X])=>X.map(te=>s.jsxs(Jt,{children:[s.jsx(ze,{className:"font-medium",children:te.jobName}),s.jsx(ze,{children:I(te.amount)}),s.jsx(ze,{children:te.billingDate}),s.jsx(ze,{children:te.expectedPaymentDate}),s.jsx(ze,{children:s.jsx(ht,{variant:"outline",className:te.status==="received"?"text-green-600 border-green-300":te.status==="billed"?"text-blue-600 border-blue-300":"text-yellow-600 border-yellow-300",children:te.status})}),s.jsx(ze,{children:te.description})]},te.id)))})]})})]})]}),s.jsxs(en,{value:"expenses",className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Expense Projections"}),s.jsxs(se,{onClick:()=>P(!0),children:[s.jsx(un,{className:"h-4 w-4 mr-2"}),"Add Expense"]})]}),S&&s.jsxs(Te,{className:"border-2 border-red-200 bg-red-50",children:[s.jsx(Xe,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(Qe,{className:"text-lg",children:"Add Expense Projection"}),s.jsx(se,{variant:"ghost",size:"sm",onClick:()=>P(!1),children:s.jsx(rn,{className:"h-4 w-4"})})]})}),s.jsxs(Me,{children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx(de,{htmlFor:"expense-category",children:"Category"}),s.jsxs(st,{value:T.category,onValueChange:q=>E({...T,category:q}),children:[s.jsx(nt,{children:s.jsx(at,{placeholder:"Select category"})}),s.jsx(rt,{children:A.map(q=>s.jsx(xe,{value:q,children:q.replace("_"," ")},q))})]})]}),s.jsxs("div",{children:[s.jsx(de,{htmlFor:"expense-amount",children:"Amount"}),s.jsx($e,{id:"expense-amount",type:"number",value:T.amount,onChange:q=>E({...T,amount:q.target.value}),placeholder:"0.00"})]}),s.jsxs("div",{children:[s.jsx(de,{htmlFor:"expense-due-date",children:"Due Date"}),s.jsx($e,{id:"expense-due-date",type:"date",value:T.dueDate,onChange:q=>E({...T,dueDate:q.target.value})})]}),s.jsxs("div",{children:[s.jsx(de,{htmlFor:"expense-supplier",children:"Supplier"}),s.jsx($e,{id:"expense-supplier",value:T.supplier,onChange:q=>E({...T,supplier:q.target.value}),placeholder:"Supplier name"})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx(de,{htmlFor:"expense-description",children:"Description"}),s.jsx($e,{id:"expense-description",value:T.description,onChange:q=>E({...T,description:q.target.value}),placeholder:"Expense description"})]})]}),s.jsxs("div",{className:"flex justify-end space-x-2 mt-4",children:[s.jsx(se,{variant:"outline",onClick:()=>P(!1),children:"Cancel"}),s.jsxs(se,{onClick:F,children:[s.jsx(Qn,{className:"h-4 w-4 mr-2"}),"Save Expense"]})]})]})]}),s.jsxs(Te,{children:[s.jsx(Xe,{children:s.jsx(Qe,{children:"Expense Projections"})}),s.jsx(Me,{children:s.jsxs(Hr,{children:[s.jsx(qr,{children:s.jsxs(Jt,{children:[s.jsx(qe,{children:"Category"}),s.jsx(qe,{children:"Amount"}),s.jsx(qe,{children:"Due Date"}),s.jsx(qe,{children:"Supplier"}),s.jsx(qe,{children:"Status"}),s.jsx(qe,{children:"Description"})]})}),s.jsx(Vr,{children:Object.entries(g).map(([q,X])=>X.map(te=>s.jsxs(Jt,{children:[s.jsx(ze,{className:"font-medium capitalize",children:q.replace("_"," ")}),s.jsx(ze,{children:I(te.amount)}),s.jsx(ze,{children:te.dueDate}),s.jsx(ze,{children:te.supplier}),s.jsx(ze,{children:s.jsx(ht,{variant:"outline",className:te.status==="paid"?"text-green-600 border-green-300":"text-yellow-600 border-yellow-300",children:te.status})}),s.jsx(ze,{children:te.description})]},te.id)))})]})})]})]}),s.jsx(en,{value:"timeline",className:"space-y-6",children:h&&h.length>0?s.jsxs(Te,{children:[s.jsx(Xe,{children:s.jsx(Qe,{children:"Cash Flow Timeline"})}),s.jsx(Me,{children:s.jsx("div",{className:"space-y-2",children:h.map((q,X)=>s.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-gray-50",children:[s.jsxs("div",{className:"flex items-center space-x-6",children:[s.jsx("div",{className:"text-sm text-gray-600 w-32",children:new Date(q.weekStart).toLocaleDateString()}),s.jsxs("div",{className:"flex items-center space-x-6",children:[s.jsx("div",{className:"text-sm",children:s.jsxs("span",{className:"text-green-600 font-medium",children:["+",I(q.revenue)]})}),s.jsx("div",{className:"text-sm",children:s.jsxs("span",{className:"text-red-600 font-medium",children:["-",I(q.expenses)]})})]})]}),s.jsxs("div",{className:"flex items-center space-x-6",children:[s.jsx(ht,{className:U(q.netCashFlow),children:I(q.netCashFlow)}),s.jsxs("div",{className:"text-sm font-medium",children:["Balance: ",I(q.runningBalance)]}),q.fundingNeeded>0&&s.jsxs(ht,{variant:"outline",className:"text-red-600 border-red-300",children:["Need: ",I(q.fundingNeeded)]})]})]},X))})})]}):s.jsx(Te,{children:s.jsxs(Me,{className:"p-8 text-center",children:[s.jsx(An,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"No cash flow data available. Set up revenue and expense projections to see the timeline."})]})})}),s.jsx(en,{value:"scenarios",className:"space-y-6",children:s.jsxs(Te,{children:[s.jsx(Xe,{children:s.jsx(Qe,{children:"Scenario Comparison"})}),s.jsx(Me,{children:s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:Object.entries($()).map(([q,X])=>s.jsxs(Te,{className:"border-2 border-gray-200",children:[s.jsx(Xe,{children:s.jsxs(Qe,{className:"capitalize",children:[q," Scenario"]})}),s.jsxs(Me,{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Total Revenue"}),s.jsx("p",{className:"text-xl font-bold text-green-600",children:I(X.totalRevenue)})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Total Expenses"}),s.jsx("p",{className:"text-xl font-bold text-red-600",children:I(X.totalExpenses)})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Net Cash Flow"}),s.jsx("p",{className:`text-xl font-bold ${X.netCashFlow>=0?"text-green-600":"text-red-600"}`,children:I(X.netCashFlow)})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Final Balance"}),s.jsx("p",{className:`text-xl font-bold ${X.finalBalance>=0?"text-green-600":"text-red-600"}`,children:I(X.finalBalance)})]}),X.fundingGaps.length>0&&s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Funding Gaps"}),s.jsxs("p",{className:"text-sm font-medium text-red-600",children:[X.fundingGaps.length," periods"]})]})]})]},q))})})]})})]})]})},Jje=({isOpen:e,onClose:t,takeoffRequest:n,onDeliveryConfirmed:r})=>{const[a,i]=j.useState({notes:"",photos:[],confirmedBy:""}),[o,l]=j.useState(!1);if(!e||!n)return null;const c=async()=>{if(!a.confirmedBy.trim()){pe({title:"Missing Information",description:"Please enter your name to confirm delivery.",variant:"destructive"});return}l(!0);try{const h=ei.confirmDelivery(n.id,a);h&&(pe({title:"Delivery Confirmed! ✅",description:`Delivery for ${n.jobName} has been confirmed.`}),i({notes:"",photos:[],confirmedBy:""}),r&&r(h),t())}catch(h){pe({title:"Error",description:h.message,variant:"destructive"})}finally{l(!1)}},d=h=>{const p=Array.from(h.target.files).map(y=>y.name);i(y=>({...y,photos:[...y.photos,...p]}))},u=h=>!h||h.length===0?"No materials specified":h.map(f=>{const p=f.quantity||0,y=f.unit||"ea";return`${f.name}: ${p} ${y}`}).join(", ");return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsxs(Te,{className:"w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[s.jsx(Xe,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:s.jsx(Br,{className:"h-6 w-6 text-green-600"})}),s.jsxs("div",{children:[s.jsx(Qe,{className:"text-xl font-bold text-green-800",children:"Confirm Delivery"}),s.jsx("p",{className:"text-green-600 text-sm",children:"Confirm that materials have been delivered to the job site"})]})]}),s.jsx(se,{variant:"ghost",size:"sm",onClick:t,children:s.jsx(rn,{className:"h-4 w-4"})})]})}),s.jsxs(Me,{className:"space-y-6",children:[s.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[s.jsx("h3",{className:"font-semibold text-lg mb-3",children:"Job Details"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(ya,{className:"h-4 w-4 text-gray-500"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Job Name"}),s.jsx("p",{className:"font-medium",children:n.jobName})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Kf,{className:"h-4 w-4 text-gray-500"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Delivery Address"}),s.jsx("p",{className:"font-medium",children:n.deliveryAddress})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(An,{className:"h-4 w-4 text-gray-500"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Needed By"}),s.jsx("p",{className:"font-medium",children:n.neededBy?new Date(n.neededBy).toLocaleDateString():"Not specified"})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(tn,{className:"h-4 w-4 text-gray-500"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Materials"}),s.jsx("p",{className:"font-medium text-sm max-w-xs truncate",children:u(n.materials)})]})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"confirmed-by",children:"Your Name *"}),s.jsx($e,{id:"confirmed-by",value:a.confirmedBy,onChange:h=>i({...a,confirmedBy:h.target.value}),placeholder:"Enter your name to confirm delivery"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"delivery-notes",children:"Delivery Notes"}),s.jsx(_n,{id:"delivery-notes",value:a.notes,onChange:h=>i({...a,notes:h.target.value}),placeholder:"Any special notes about the delivery, condition of materials, etc.",rows:3})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"delivery-photos",children:"Delivery Photos (Optional)"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs(se,{variant:"outline",onClick:()=>document.getElementById("photo-upload").click(),disabled:o,children:[s.jsx(x0,{className:"h-4 w-4 mr-2"}),"Add Photos"]}),s.jsx("input",{id:"photo-upload",type:"file",multiple:!0,accept:"image/*",onChange:d,className:"hidden"}),s.jsxs("span",{className:"text-sm text-gray-500",children:[a.photos.length," photo(s) selected"]})]}),a.photos.length>0&&s.jsxs("div",{className:"mt-2",children:[s.jsx("p",{className:"text-sm font-medium mb-2",children:"Selected Photos:"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:a.photos.map((h,f)=>s.jsx("div",{className:"bg-gray-100 px-2 py-1 rounded text-sm",children:h},f))})]})]})]}),s.jsxs("div",{className:"flex justify-end space-x-2 pt-4 border-t",children:[s.jsx(se,{variant:"outline",onClick:t,disabled:o,children:"Cancel"}),s.jsx(se,{onClick:c,disabled:o||!a.confirmedBy.trim(),className:"bg-green-600 hover:bg-green-700",children:o?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Confirming..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Br,{className:"h-4 w-4 mr-2"}),"Confirm Delivery"]})})]})]})]})})},Kje=({jobs:e=[]})=>{const[t,n]=j.useState("suppliers"),[r,a]=j.useState([]),[i,o]=j.useState([]),[l,c]=j.useState([]),[d,u]=j.useState(!1),[h,f]=j.useState("");j.useState("");const[p,y]=j.useState(!1),[g,x]=j.useState(null),[m,v]=j.useState({name:"",contactPerson:"",phone:"",email:"",address:"",materialCategories:[],deliveryPreferences:"",isPrimary:!1}),b=ei.getMaterialCategories();j.useEffect(()=>{C()},[]),j.useEffect(()=>{try{o(h&&h!=="all"?ei.getTakeoffRequests(h):ei.getTakeoffRequests())}catch(L){console.error("Error loading takeoff requests:",L),o([])}},[h]);const C=()=>{try{a(ei.getSuppliers()),o(ei.getTakeoffRequests()),c(ei.getDeliveries())}catch(L){console.error("Error loading supplier data:",L),a([]),o([]),c([])}},S=()=>{if(!m.name||!m.contactPerson||!m.phone){pe({title:"Missing Information",description:"Please fill in all required fields.",variant:"destructive"});return}try{ei.addSupplier(m),pe({title:"Supplier Added! 🏢",description:`${m.name} has been added to your suppliers.`}),v({name:"",contactPerson:"",phone:"",email:"",address:"",materialCategories:[],deliveryPreferences:"",isPrimary:!1}),u(!1),C()}catch(L){pe({title:"Error",description:L.message,variant:"destructive"})}},P=L=>{x(L),y(!0)},D=L=>{C(),pe({title:"Delivery Confirmed! 🎉",description:`Office has been notified of delivery for ${L.delivery.jobName}.`})},N=(()=>{try{return ei.getPendingDeliveries()}catch(L){return console.error("Error getting pending deliveries:",L),[]}})(),M=(()=>{try{return ei.getRecentDeliveries(5)}catch(L){return console.error("Error getting recent deliveries:",L),[]}})();return s.jsxs("div",{className:"space-y-6",children:[s.jsx(Te,{className:"border-2 border-blue-200 bg-blue-50",children:s.jsx(Xe,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:s.jsx(hg,{className:"h-6 w-6 text-blue-600"})}),s.jsxs("div",{children:[s.jsx(Qe,{className:"text-xl font-bold text-blue-800",children:"Supplier Management"}),s.jsx("p",{className:"text-blue-600 text-sm",children:"Manage suppliers, send takeoffs, and track deliveries"})]})]}),s.jsx("div",{className:"flex items-center space-x-2",children:N.length>0&&s.jsxs(ht,{className:"text-red-600 bg-red-50 border-red-200",children:[s.jsx(MV,{className:"h-4 w-4 mr-1"}),N.length," Pending"]})})]})})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsx(Te,{children:s.jsx(Me,{className:"p-4",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Qs,{className:"h-5 w-5 text-blue-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Active Suppliers"}),s.jsx("p",{className:"font-semibold text-2xl",children:r.length})]})]})})}),s.jsx(Te,{children:s.jsx(Me,{className:"p-4",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(hy,{className:"h-5 w-5 text-yellow-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Pending Deliveries"}),s.jsx("p",{className:"font-semibold text-2xl",children:N.length})]})]})})}),s.jsx(Te,{children:s.jsx(Me,{className:"p-4",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Br,{className:"h-5 w-5 text-green-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Recent Deliveries"}),s.jsx("p",{className:"font-semibold text-2xl",children:M.length})]})]})})}),s.jsx(Te,{children:s.jsx(Me,{className:"p-4",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(ya,{className:"h-5 w-5 text-purple-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Total Deliveries"}),s.jsx("p",{className:"font-semibold text-2xl",children:l.length})]})]})})})]}),s.jsxs(uo,{value:t,onValueChange:n,className:"space-y-6",children:[s.jsxs(Oi,{className:"grid w-full grid-cols-3",children:[s.jsx(Ht,{value:"suppliers",children:"Suppliers"}),s.jsx(Ht,{value:"takeoffs",children:"Takeoff Requests"}),s.jsx(Ht,{value:"deliveries",children:"Deliveries"})]}),s.jsx(en,{value:"suppliers",className:"space-y-6",children:s.jsxs(Te,{children:[s.jsx(Xe,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(Qe,{children:"Suppliers"}),s.jsxs(se,{onClick:()=>u(!0),children:[s.jsx(un,{className:"h-4 w-4 mr-2"}),"Add Supplier"]})]})}),s.jsx(Me,{children:r.length>0?s.jsxs(Hr,{children:[s.jsx(qr,{children:s.jsxs(Jt,{children:[s.jsx(qe,{children:"Supplier"}),s.jsx(qe,{children:"Contact"}),s.jsx(qe,{children:"Materials"}),s.jsx(qe,{children:"Status"}),s.jsx(qe,{children:"Actions"})]})}),s.jsx(Vr,{children:r.map(L=>s.jsxs(Jt,{children:[s.jsx(ze,{children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:"font-medium",children:L.name}),L.isPrimary&&s.jsx(YV,{className:"h-4 w-4 text-yellow-500"})]})}),s.jsx(ze,{children:s.jsxs("div",{className:"text-sm",children:[s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(gm,{className:"h-3 w-3"}),s.jsx("span",{children:L.phone})]}),L.email&&s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(ki,{className:"h-3 w-3"}),s.jsx("span",{children:L.email})]})]})}),s.jsx(ze,{children:s.jsx("div",{className:"text-sm",children:L.materialCategories.length>0?L.materialCategories.join(", "):"All materials"})}),s.jsx(ze,{children:s.jsx(ht,{variant:"outline",className:L.isActive?"text-green-600 border-green-300":"text-gray-600 border-gray-300",children:L.isActive?"Active":"Inactive"})}),s.jsx(ze,{children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(se,{variant:"ghost",size:"sm",children:s.jsx(ad,{className:"h-4 w-4"})}),s.jsx(se,{variant:"ghost",size:"sm",children:s.jsx(Kt,{className:"h-4 w-4"})})]})})]},L.id))})]}):s.jsxs("div",{className:"text-center py-8",children:[s.jsx(Qs,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"No suppliers found. Add your first supplier to get started."})]})})]})}),s.jsx(en,{value:"takeoffs",className:"space-y-6",children:s.jsxs(Te,{children:[s.jsx(Xe,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(Qe,{children:"Takeoff Requests"}),s.jsx("div",{className:"flex items-center space-x-2",children:s.jsxs(st,{value:h,onValueChange:f,children:[s.jsx(nt,{className:"w-48",children:s.jsx(at,{placeholder:"Filter by job"})}),s.jsxs(rt,{children:[s.jsx(xe,{value:"all",children:"All Jobs"}),e.map(L=>s.jsx(xe,{value:L.id,children:L.jobName},L.id))]})]})})]})}),s.jsx(Me,{children:i&&i.length>0?s.jsxs(Hr,{children:[s.jsx(qr,{children:s.jsxs(Jt,{children:[s.jsx(qe,{children:"Job"}),s.jsx(qe,{children:"Supplier"}),s.jsx(qe,{children:"Status"}),s.jsx(qe,{children:"Sent Date"}),s.jsx(qe,{children:"Actions"})]})}),s.jsx(Vr,{children:i.map(L=>s.jsxs(Jt,{children:[s.jsx(ze,{className:"font-medium",children:L.jobName||"Unknown Job"}),s.jsx(ze,{children:L.supplierName||"Unknown Supplier"}),s.jsx(ze,{children:s.jsx(ht,{className:L.status==="delivered"?"text-green-600 bg-green-50 border-green-200":"text-yellow-600 bg-yellow-50 border-yellow-200",children:L.status==="delivered"?"Delivered":"Pending"})}),s.jsx(ze,{children:L.sentAt?new Date(L.sentAt).toLocaleDateString():"Unknown"}),s.jsx(ze,{children:L.status==="sent"&&s.jsxs(se,{variant:"outline",size:"sm",onClick:()=>P(L),className:"text-green-600 border-green-300 hover:bg-green-50",children:[s.jsx(Br,{className:"h-4 w-4 mr-1"}),"Confirm Delivery"]})})]},L.id))})]}):s.jsxs("div",{className:"text-center py-8",children:[s.jsx(tn,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"No takeoff requests found."})]})})]})}),s.jsx(en,{value:"deliveries",className:"space-y-6",children:s.jsxs(Te,{children:[s.jsx(Xe,{children:s.jsx(Qe,{children:"Recent Deliveries"})}),s.jsx(Me,{children:l.length>0?s.jsxs(Hr,{children:[s.jsx(qr,{children:s.jsxs(Jt,{children:[s.jsx(qe,{children:"Job"}),s.jsx(qe,{children:"Supplier"}),s.jsx(qe,{children:"Delivered"}),s.jsx(qe,{children:"Materials"}),s.jsx(qe,{children:"Notes"})]})}),s.jsx(Vr,{children:l.slice(0,20).map(L=>s.jsxs(Jt,{children:[s.jsx(ze,{className:"font-medium",children:L.jobName}),s.jsx(ze,{children:L.supplierName}),s.jsx(ze,{children:new Date(L.deliveredAt).toLocaleString()}),s.jsx(ze,{children:s.jsx("div",{className:"text-sm max-w-xs truncate",children:ei.formatMaterialList(L.materials)})}),s.jsx(ze,{children:s.jsx("div",{className:"text-sm max-w-xs truncate",children:L.notes||"No notes"})})]},L.id))})]}):s.jsxs("div",{className:"text-center py-8",children:[s.jsx(ya,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"No deliveries found."})]})})]})})]}),d&&s.jsxs(Te,{className:"border-2 border-blue-200 bg-blue-50",children:[s.jsx(Xe,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(Qe,{className:"text-lg",children:"Add New Supplier"}),s.jsx(se,{variant:"ghost",size:"sm",onClick:()=>u(!1),children:s.jsx(rn,{className:"h-4 w-4"})})]})}),s.jsxs(Me,{children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"supplier-name",children:"Supplier Name *"}),s.jsx($e,{id:"supplier-name",value:m.name,onChange:L=>v({...m,name:L.target.value}),placeholder:"Supplier company name"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"supplier-contact",children:"Contact Person *"}),s.jsx($e,{id:"supplier-contact",value:m.contactPerson,onChange:L=>v({...m,contactPerson:L.target.value}),placeholder:"Primary contact person"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"supplier-phone",children:"Phone *"}),s.jsx($e,{id:"supplier-phone",value:m.phone,onChange:L=>v({...m,phone:L.target.value}),placeholder:"Phone number"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"supplier-email",children:"Email"}),s.jsx($e,{id:"supplier-email",type:"email",value:m.email,onChange:L=>v({...m,email:L.target.value}),placeholder:"Email address"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"supplier-address",children:"Address"}),s.jsx($e,{id:"supplier-address",value:m.address,onChange:L=>v({...m,address:L.target.value}),placeholder:"Business address"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"supplier-categories",children:"Material Categories"}),s.jsx("div",{className:"space-y-2",children:b.map(L=>s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"checkbox",id:`category-${L}`,checked:m.materialCategories.includes(L),onChange:T=>{T.target.checked?v({...m,materialCategories:[...m.materialCategories,L]}):v({...m,materialCategories:m.materialCategories.filter(E=>E!==L)})}}),s.jsx(de,{htmlFor:`category-${L}`,className:"text-sm",children:L.replace("_"," ")})]},L))})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"supplier-preferences",children:"Delivery Preferences"}),s.jsx(_n,{id:"supplier-preferences",value:m.deliveryPreferences,onChange:L=>v({...m,deliveryPreferences:L.target.value}),placeholder:"Preferred delivery times, special instructions, etc."})]}),s.jsx("div",{className:"space-y-2",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"checkbox",id:"supplier-primary",checked:m.isPrimary,onChange:L=>v({...m,isPrimary:L.target.checked})}),s.jsx(de,{htmlFor:"supplier-primary",children:"Primary Supplier"})]})})]}),s.jsxs("div",{className:"flex justify-end space-x-2 mt-4",children:[s.jsx(se,{variant:"outline",onClick:()=>u(!1),children:"Cancel"}),s.jsxs(se,{onClick:S,children:[s.jsx(Qn,{className:"h-4 w-4 mr-2"}),"Save Supplier"]})]})]})]}),s.jsx(Jje,{isOpen:p,onClose:()=>{y(!1),x(null)},takeoffRequest:g,onDeliveryConfirmed:D})]})},Xje=()=>{const[e,t]=j.useState([]),[n,r]=j.useState(null),[a,i]=j.useState(!1),[o,l]=j.useState(!1),[c,d]=j.useState(!1),[u,h]=j.useState(!1),[f,p]=j.useState({}),[y,g]=j.useState(""),[x,m]=j.useState(""),[v,b]=j.useState({}),[C,S]=j.useState({}),[P,D]=j.useState([]),[N,M]=j.useState([]),[L,T]=j.useState([]),[E,A]=j.useState(!1),[O,W]=j.useState(!1),[z,F]=j.useState(!1);j.useState("");const{jobs:V}=rc(),[B,Y]=j.useState({firstName:"",lastName:"",email:"",phone:"",company:"",jobIds:[]}),[$,I]=j.useState({name:"",company:"",email:"",phone:"",address:""}),[U,q]=j.useState({name:"",gcId:"",email:"",phone:""}),[X,te]=j.useState({name:"",gcId:"",email:"",phone:""});j.useEffect(()=>{ae(),le(),me()},[]);const ae=()=>{const G=KI();t(G)},le=()=>{const G=$ee();p(G)},me=()=>{const G=XI(),ge=QI(),Pe=ZI();D(G),M(ge),T(Pe)},Le=()=>{if(!B.firstName||!B.lastName||!B.email){pe({title:"Missing Information",description:"Please fill in all required fields.",variant:"destructive"});return}const G=JI(B);t([...e,G]),i(!1),Y({firstName:"",lastName:"",email:"",phone:"",company:"",jobIds:[]}),pe({title:"Client Created",description:`Client ${G.firstName} ${G.lastName} has been created with portal access.`})},ie=G=>{Pee(G),t(e.filter(ge=>ge.id!==G)),pe({title:"Client Deleted",description:"Client has been removed from the portal.",variant:"destructive"})},Ne=()=>{if(!y.trim()||!x){pe({title:"Missing Information",description:"Please select a job and enter a message.",variant:"destructive"});return}const G={clientId:n.id,jobId:x,sender:"office",content:y,type:"general"};Iee(G),g(""),l(!1),pe({title:"Message Sent",description:"Message has been sent to the client."})},Be=G=>{if(!x){pe({title:"Missing Job",description:"Please select a job for the photo.",variant:"destructive"});return}const ge={jobId:x,clientId:n.id,filename:G.name,description:`Progress photo for ${n.firstName} ${n.lastName}`,url:URL.createObjectURL(G)};Oee(ge),d(!1),pe({title:"Photo Uploaded",description:"Photo has been uploaded and is visible to the client."})},Ue=(G,ge)=>{navigator.clipboard.writeText(ge),S({...C,[G]:!0}),setTimeout(()=>S({...C,[G]:!1}),2e3),pe({title:"Password Copied",description:"Portal password has been copied to clipboard."})},_e=()=>{if(!$.name.trim()){pe({title:"Missing Information",description:"Please enter the General Contractor name.",variant:"destructive"});return}const G=Dee($);D(ge=>[...ge,G]),I({name:"",company:"",email:"",phone:"",address:""}),A(!1),pe({title:"General Contractor Added! 🏗️",description:`New GC "${G.name}" has been added.`})},ue=(G,ge)=>{const Pe=kee(G,ge);Pe&&(D(Ve=>Ve.map(pt=>pt.id===G?Pe:pt)),pe({title:"General Contractor Updated! ✅",description:`GC "${Pe.name}" has been updated.`}))},wt=G=>{const ge=P.find(Pe=>Pe.id===G);Eee(G),D(Pe=>Pe.filter(Ve=>Ve.id!==G)),M(Pe=>Pe.filter(Ve=>Ve.gcId!==G)),T(Pe=>Pe.filter(Ve=>Ve.gcId!==G)),pe({title:"General Contractor Removed! 🗑️",description:`GC "${ge.name}" and all associated personnel have been removed.`})},gt=()=>{if(!U.name.trim()||!U.gcId){pe({title:"Missing Information",description:"Please enter the Superintendent name and select a General Contractor.",variant:"destructive"});return}const G=Tee(U);M(ge=>[...ge,G]),q({name:"",gcId:"",email:"",phone:""}),W(!1),pe({title:"Superintendent Added! 👷",description:`New Superintendent "${G.name}" has been added.`})},ve=(G,ge)=>{const Pe=Aee(G,ge);Pe&&(M(Ve=>Ve.map(pt=>pt.id===G?Pe:pt)),pe({title:"Superintendent Updated! ✅",description:`Superintendent "${Pe.name}" has been updated.`}))},we=G=>{const ge=N.find(Pe=>Pe.id===G);_ee(G),M(Pe=>Pe.filter(Ve=>Ve.id!==G)),pe({title:"Superintendent Removed! 🗑️",description:`Superintendent "${ge.name}" has been removed.`})},Se=()=>{if(!X.name.trim()||!X.gcId){pe({title:"Missing Information",description:"Please enter the Project Manager name and select a General Contractor.",variant:"destructive"});return}const G=Mee(X);T(ge=>[...ge,G]),te({name:"",gcId:"",email:"",phone:""}),F(!1),pe({title:"Project Manager Added! 📋",description:`New Project Manager "${G.name}" has been added.`})},De=(G,ge)=>{const Pe=Ree(G,ge);Pe&&(T(Ve=>Ve.map(pt=>pt.id===G?Pe:pt)),pe({title:"Project Manager Updated! ✅",description:`Project Manager "${Pe.name}" has been updated.`}))},Ie=G=>{const ge=L.find(Pe=>Pe.id===G);Lee(G),T(Pe=>Pe.filter(Ve=>Ve.id!==G)),pe({title:"Project Manager Removed! 🗑️",description:`Project Manager "${ge.name}" has been removed.`})},oe=G=>G.jobIds?V.filter(ge=>G.jobIds.includes(ge.id)):[],Ee=G=>cE(G).filter(Pe=>!Pe.isRead&&Pe.sender==="client").length;return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Client Portal"}),s.jsx("p",{className:"text-gray-600",children:"Manage client access and communication"})]}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsxs(se,{onClick:()=>h(!0),variant:"outline",className:"border-brandPrimary text-brandPrimary hover:bg-brandPrimary hover:text-white",children:[s.jsx(wS,{className:"h-4 w-4 mr-2"}),"Portal Settings"]}),s.jsxs(se,{onClick:()=>i(!0),className:"bg-gradient-to-r from-brandPrimary to-brandSecondary text-white",children:[s.jsx(un,{className:"h-4 w-4 mr-2"}),"Add Client"]})]})]}),s.jsxs(uo,{defaultValue:"clients",className:"space-y-6",children:[s.jsxs(Oi,{className:"grid w-full grid-cols-6",children:[s.jsxs(Ht,{value:"clients",className:"flex items-center space-x-2",children:[s.jsx(vr,{className:"h-4 w-4"}),s.jsx("span",{children:"Clients"})]}),s.jsxs(Ht,{value:"general-contractors",className:"flex items-center space-x-2",children:[s.jsx(or,{className:"h-4 w-4"}),s.jsx("span",{children:"General Contractors"})]}),s.jsxs(Ht,{value:"superintendents",className:"flex items-center space-x-2",children:[s.jsx(vr,{className:"h-4 w-4"}),s.jsx("span",{children:"Superintendents"})]}),s.jsxs(Ht,{value:"project-managers",className:"flex items-center space-x-2",children:[s.jsx(vr,{className:"h-4 w-4"}),s.jsx("span",{children:"Project Managers"})]}),s.jsxs(Ht,{value:"messages",className:"flex items-center space-x-2",children:[s.jsx(so,{className:"h-4 w-4"}),s.jsx("span",{children:"Messages"})]}),s.jsxs(Ht,{value:"photos",className:"flex items-center space-x-2",children:[s.jsx(x0,{className:"h-4 w-4"}),s.jsx("span",{children:"Photos"})]})]}),s.jsxs(en,{value:"clients",className:"space-y-4",children:[s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:e.map(G=>s.jsxs(Te,{className:"hover:shadow-md transition-shadow",children:[s.jsx(Xe,{className:"pb-3",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{children:[s.jsxs(Qe,{className:"text-lg",children:[G.firstName," ",G.lastName]}),G.company&&s.jsx("p",{className:"text-sm text-gray-600",children:G.company})]}),s.jsxs("div",{className:"flex space-x-1",children:[Ee(G.id)>0&&s.jsx(ht,{variant:"destructive",className:"text-xs",children:Ee(G.id)}),s.jsx(ht,{variant:G.portalAccess.isActive?"default":"secondary",children:G.portalAccess.isActive?"Active":"Inactive"})]})]})}),s.jsxs(Me,{className:"space-y-3",children:[s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(ki,{className:"h-4 w-4 text-gray-500"}),s.jsx("span",{children:G.email})]}),G.phone&&s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(gm,{className:"h-4 w-4 text-gray-500"}),s.jsx("span",{children:G.phone})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(or,{className:"h-4 w-4 text-gray-500"}),s.jsxs("span",{children:[oe(G).length," job(s)"]})]})]}),s.jsxs("div",{className:"border-t pt-3",children:[s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsx("span",{className:"font-medium",children:"Portal Access:"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:"text-gray-600",children:G.portalAccess.username}),s.jsx(se,{variant:"ghost",size:"sm",onClick:()=>b({...v,[G.id]:!v[G.id]}),children:v[G.id]?s.jsx(EM,{className:"h-3 w-3"}):s.jsx(Jg,{className:"h-3 w-3"})}),s.jsx(se,{variant:"ghost",size:"sm",onClick:()=>Ue(G.id,G.portalAccess.password),children:C[G.id]?s.jsx(Gg,{className:"h-3 w-3"}):s.jsx(yS,{className:"h-3 w-3"})})]})]}),v[G.id]&&s.jsx("div",{className:"mt-2 p-2 bg-gray-100 rounded text-sm font-mono",children:G.portalAccess.password})]}),s.jsxs("div",{className:"flex space-x-2 pt-3 border-t",children:[s.jsxs(se,{variant:"outline",size:"sm",onClick:()=>{r(G),l(!0)},className:"flex-1",children:[s.jsx(so,{className:"h-3 w-3 mr-1"}),"Message"]}),s.jsxs(se,{variant:"outline",size:"sm",onClick:()=>{r(G),d(!0)},className:"flex-1",children:[s.jsx(x0,{className:"h-3 w-3 mr-1"}),"Photo"]}),s.jsxs(yr,{children:[s.jsx(br,{asChild:!0,children:s.jsx(se,{variant:"outline",size:"sm",className:"text-red-600 hover:bg-red-50",children:s.jsx(Kt,{className:"h-3 w-3"})})}),s.jsxs(er,{children:[s.jsxs(tr,{children:[s.jsx(rr,{children:"Delete Client"}),s.jsxs(sr,{children:["Are you sure you want to delete ",G.firstName," ",G.lastName,"? This will remove their portal access and cannot be undone."]})]}),s.jsxs(nr,{children:[s.jsx(ir,{children:"Cancel"}),s.jsx(ar,{onClick:()=>ie(G.id),className:"bg-red-600 hover:bg-red-700",children:"Delete"})]})]})]})]})]})]},G.id))}),e.length===0&&s.jsx(Te,{children:s.jsxs(Me,{className:"text-center py-8",children:[s.jsx(vr,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Clients Yet"}),s.jsx("p",{className:"text-gray-600 mb-4",children:"Add your first client to start using the portal."}),s.jsxs(se,{onClick:()=>i(!0),className:"bg-gradient-to-r from-brandPrimary to-brandSecondary text-white",children:[s.jsx(un,{className:"h-4 w-4 mr-2"}),"Add Client"]})]})})]}),s.jsxs(en,{value:"general-contractors",className:"space-y-4",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("h2",{className:"text-xl font-semibold",children:"General Contractors"}),s.jsxs(se,{onClick:()=>A(!0),className:"bg-gradient-to-r from-brandPrimary to-brandSecondary text-white",children:[s.jsx(un,{className:"h-4 w-4 mr-2"}),"Add General Contractor"]})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:P.map(G=>s.jsxs(Te,{className:"hover:shadow-md transition-shadow",children:[s.jsx(Xe,{className:"pb-3",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{children:[s.jsx(Qe,{className:"text-lg",children:G.name}),G.company&&s.jsx("p",{className:"text-sm text-gray-600",children:G.company})]}),s.jsx(ht,{variant:"default",children:"GC"})]})}),s.jsxs(Me,{className:"space-y-3",children:[s.jsxs("div",{className:"space-y-2 text-sm",children:[G.email&&s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(ki,{className:"h-4 w-4 text-gray-500"}),s.jsx("span",{children:G.email})]}),G.phone&&s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(gm,{className:"h-4 w-4 text-gray-500"}),s.jsx("span",{children:G.phone})]}),G.address&&s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(or,{className:"h-4 w-4 text-gray-500"}),s.jsx("span",{className:"text-xs",children:G.address})]})]}),s.jsx("div",{className:"border-t pt-3",children:s.jsxs("div",{className:"text-sm text-gray-600",children:[s.jsxs("div",{children:["Superintendents: ",N.filter(ge=>ge.gcId===G.id).length]}),s.jsxs("div",{children:["Project Managers: ",L.filter(ge=>ge.gcId===G.id).length]})]})}),s.jsxs("div",{className:"flex space-x-2 pt-3 border-t",children:[s.jsxs(se,{variant:"outline",size:"sm",onClick:()=>{I(G),A(!0)},className:"flex-1",children:[s.jsx(ad,{className:"h-3 w-3 mr-1"}),"Edit"]}),s.jsxs(yr,{children:[s.jsx(br,{asChild:!0,children:s.jsx(se,{variant:"outline",size:"sm",className:"text-red-600 hover:bg-red-50",children:s.jsx(Kt,{className:"h-3 w-3"})})}),s.jsxs(er,{children:[s.jsxs(tr,{children:[s.jsx(rr,{children:"Delete General Contractor"}),s.jsxs(sr,{children:["Are you sure you want to delete ",G.name,"? This will also remove all associated Superintendents and Project Managers."]})]}),s.jsxs(nr,{children:[s.jsx(ir,{children:"Cancel"}),s.jsx(ar,{onClick:()=>wt(G.id),className:"bg-red-600 hover:bg-red-700",children:"Delete"})]})]})]})]})]})]},G.id))}),P.length===0&&s.jsx(Te,{children:s.jsxs(Me,{className:"text-center py-8",children:[s.jsx(or,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No General Contractors Yet"}),s.jsx("p",{className:"text-gray-600 mb-4",children:"Add your first General Contractor to start managing project teams."}),s.jsxs(se,{onClick:()=>A(!0),className:"bg-gradient-to-r from-brandPrimary to-brandSecondary text-white",children:[s.jsx(un,{className:"h-4 w-4 mr-2"}),"Add General Contractor"]})]})})]}),s.jsxs(en,{value:"superintendents",className:"space-y-4",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("h2",{className:"text-xl font-semibold",children:"Superintendents"}),s.jsxs(se,{onClick:()=>W(!0),className:"bg-gradient-to-r from-brandPrimary to-brandSecondary text-white",children:[s.jsx(un,{className:"h-4 w-4 mr-2"}),"Add Superintendent"]})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:N.map(G=>{const ge=P.find(Pe=>Pe.id===G.gcId);return s.jsxs(Te,{className:"hover:shadow-md transition-shadow",children:[s.jsx(Xe,{className:"pb-3",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{children:[s.jsx(Qe,{className:"text-lg",children:G.name}),ge&&s.jsx("p",{className:"text-sm text-gray-600",children:ge.name})]}),s.jsx(ht,{variant:"secondary",children:"Superintendent"})]})}),s.jsxs(Me,{className:"space-y-3",children:[s.jsxs("div",{className:"space-y-2 text-sm",children:[G.email&&s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(ki,{className:"h-4 w-4 text-gray-500"}),s.jsx("span",{children:G.email})]}),G.phone&&s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(gm,{className:"h-4 w-4 text-gray-500"}),s.jsx("span",{children:G.phone})]})]}),s.jsxs("div",{className:"flex space-x-2 pt-3 border-t",children:[s.jsxs(se,{variant:"outline",size:"sm",onClick:()=>{q(G),W(!0)},className:"flex-1",children:[s.jsx(ad,{className:"h-3 w-3 mr-1"}),"Edit"]}),s.jsxs(yr,{children:[s.jsx(br,{asChild:!0,children:s.jsx(se,{variant:"outline",size:"sm",className:"text-red-600 hover:bg-red-50",children:s.jsx(Kt,{className:"h-3 w-3"})})}),s.jsxs(er,{children:[s.jsxs(tr,{children:[s.jsx(rr,{children:"Delete Superintendent"}),s.jsxs(sr,{children:["Are you sure you want to delete ",G.name,"?"]})]}),s.jsxs(nr,{children:[s.jsx(ir,{children:"Cancel"}),s.jsx(ar,{onClick:()=>we(G.id),className:"bg-red-600 hover:bg-red-700",children:"Delete"})]})]})]})]})]})]},G.id)})}),N.length===0&&s.jsx(Te,{children:s.jsxs(Me,{className:"text-center py-8",children:[s.jsx(vr,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Superintendents Yet"}),s.jsx("p",{className:"text-gray-600 mb-4",children:"Add your first Superintendent to start managing project teams."}),s.jsxs(se,{onClick:()=>W(!0),className:"bg-gradient-to-r from-brandPrimary to-brandSecondary text-white",children:[s.jsx(un,{className:"h-4 w-4 mr-2"}),"Add Superintendent"]})]})})]}),s.jsxs(en,{value:"project-managers",className:"space-y-4",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("h2",{className:"text-xl font-semibold",children:"Project Managers"}),s.jsxs(se,{onClick:()=>F(!0),className:"bg-gradient-to-r from-brandPrimary to-brandSecondary text-white",children:[s.jsx(un,{className:"h-4 w-4 mr-2"}),"Add Project Manager"]})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:L.map(G=>{const ge=P.find(Pe=>Pe.id===G.gcId);return s.jsxs(Te,{className:"hover:shadow-md transition-shadow",children:[s.jsx(Xe,{className:"pb-3",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{children:[s.jsx(Qe,{className:"text-lg",children:G.name}),ge&&s.jsx("p",{className:"text-sm text-gray-600",children:ge.name})]}),s.jsx(ht,{variant:"outline",children:"Project Manager"})]})}),s.jsxs(Me,{className:"space-y-3",children:[s.jsxs("div",{className:"space-y-2 text-sm",children:[G.email&&s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(ki,{className:"h-4 w-4 text-gray-500"}),s.jsx("span",{children:G.email})]}),G.phone&&s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(gm,{className:"h-4 w-4 text-gray-500"}),s.jsx("span",{children:G.phone})]})]}),s.jsxs("div",{className:"flex space-x-2 pt-3 border-t",children:[s.jsxs(se,{variant:"outline",size:"sm",onClick:()=>{te(G),F(!0)},className:"flex-1",children:[s.jsx(ad,{className:"h-3 w-3 mr-1"}),"Edit"]}),s.jsxs(yr,{children:[s.jsx(br,{asChild:!0,children:s.jsx(se,{variant:"outline",size:"sm",className:"text-red-600 hover:bg-red-50",children:s.jsx(Kt,{className:"h-3 w-3"})})}),s.jsxs(er,{children:[s.jsxs(tr,{children:[s.jsx(rr,{children:"Delete Project Manager"}),s.jsxs(sr,{children:["Are you sure you want to delete ",G.name,"?"]})]}),s.jsxs(nr,{children:[s.jsx(ir,{children:"Cancel"}),s.jsx(ar,{onClick:()=>Ie(G.id),className:"bg-red-600 hover:bg-red-700",children:"Delete"})]})]})]})]})]})]},G.id)})}),L.length===0&&s.jsx(Te,{children:s.jsxs(Me,{className:"text-center py-8",children:[s.jsx(vr,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Project Managers Yet"}),s.jsx("p",{className:"text-gray-600 mb-4",children:"Add your first Project Manager to start managing project teams."}),s.jsxs(se,{onClick:()=>F(!0),className:"bg-gradient-to-r from-brandPrimary to-brandSecondary text-white",children:[s.jsx(un,{className:"h-4 w-4 mr-2"}),"Add Project Manager"]})]})})]}),s.jsx(en,{value:"messages",className:"space-y-4",children:s.jsxs(Te,{children:[s.jsx(Xe,{children:s.jsx(Qe,{children:"Recent Messages"})}),s.jsx(Me,{children:e.length===0?s.jsx("div",{className:"text-center py-8 text-gray-600",children:"No clients to show messages for."}):s.jsx("div",{className:"space-y-4",children:e.map(G=>{const Pe=cE(G.id).slice(0,3);return s.jsxs("div",{className:"border rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("h4",{className:"font-medium",children:[G.firstName," ",G.lastName]}),s.jsxs(se,{variant:"outline",size:"sm",onClick:()=>{r(G),l(!0)},children:[s.jsx(so,{className:"h-4 w-4 mr-2"}),"Send Message"]})]}),Pe.length>0?s.jsx("div",{className:"space-y-2",children:Pe.map(Ve=>s.jsxs("div",{className:"text-sm p-2 bg-gray-50 rounded",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"font-medium",children:Ve.sender==="office"?"You":G.firstName}),s.jsx("span",{className:"text-gray-500",children:Fi(new Date(Ve.timestamp),"MMM d, h:mm a")})]}),s.jsx("p",{className:"text-gray-700 mt-1",children:Ve.content})]},Ve.id))}):s.jsx("p",{className:"text-gray-500 text-sm",children:"No messages yet."})]},G.id)})})})]})}),s.jsx(en,{value:"photos",className:"space-y-4",children:s.jsxs(Te,{children:[s.jsx(Xe,{children:s.jsx(Qe,{children:"Client Photos"})}),s.jsx(Me,{children:e.length===0?s.jsx("div",{className:"text-center py-8 text-gray-600",children:"No clients to show photos for."}):s.jsx("div",{className:"space-y-4",children:e.map(G=>{const Pe=oe(G).flatMap(Ve=>Fee(Ve.id));return s.jsxs("div",{className:"border rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("h4",{className:"font-medium",children:[G.firstName," ",G.lastName]}),s.jsxs(se,{variant:"outline",size:"sm",onClick:()=>{r(G),d(!0)},children:[s.jsx(x0,{className:"h-4 w-4 mr-2"}),"Upload Photo"]})]}),Pe.length>0?s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:Pe.slice(0,8).map(Ve=>s.jsx("div",{className:"aspect-square bg-gray-200 rounded flex items-center justify-center",children:s.jsx(tn,{className:"h-8 w-8 text-gray-400"})},Ve.id))}):s.jsx("p",{className:"text-gray-500 text-sm",children:"No photos uploaded yet."})]},G.id)})})})]})})]}),s.jsx(Er,{open:a,onOpenChange:i,children:s.jsxs(pr,{className:"max-w-md",children:[s.jsx(mr,{children:s.jsx(gr,{children:"Add New Client"})}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(de,{htmlFor:"firstName",children:"First Name *"}),s.jsx($e,{id:"firstName",value:B.firstName,onChange:G=>Y({...B,firstName:G.target.value})})]}),s.jsxs("div",{children:[s.jsx(de,{htmlFor:"lastName",children:"Last Name *"}),s.jsx($e,{id:"lastName",value:B.lastName,onChange:G=>Y({...B,lastName:G.target.value})})]})]}),s.jsxs("div",{children:[s.jsx(de,{htmlFor:"email",children:"Email *"}),s.jsx($e,{id:"email",type:"email",value:B.email,onChange:G=>Y({...B,email:G.target.value})})]}),s.jsxs("div",{children:[s.jsx(de,{htmlFor:"phone",children:"Phone"}),s.jsx($e,{id:"phone",value:B.phone,onChange:G=>Y({...B,phone:G.target.value})})]}),s.jsxs("div",{children:[s.jsx(de,{htmlFor:"company",children:"Company"}),s.jsx($e,{id:"company",value:B.company,onChange:G=>Y({...B,company:G.target.value})})]}),s.jsxs("div",{children:[s.jsx(de,{htmlFor:"jobIds",children:"Assign Jobs"}),s.jsxs(st,{value:x,onValueChange:G=>{G&&!B.jobIds.includes(G)&&(Y({...B,jobIds:[...B.jobIds,G]}),m(""))},children:[s.jsx(nt,{children:s.jsx(at,{placeholder:"Select a job to assign"})}),s.jsx(rt,{children:V.filter(G=>!B.jobIds.includes(G.id)).map(G=>s.jsx(xe,{value:G.id,children:G.jobName},G.id))})]}),B.jobIds.length>0&&s.jsx("div",{className:"mt-2 space-y-1",children:B.jobIds.map(G=>{const ge=V.find(Pe=>Pe.id===G);return ge?s.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[s.jsx("span",{className:"text-sm",children:ge.jobName}),s.jsx(se,{variant:"ghost",size:"sm",onClick:()=>Y({...B,jobIds:B.jobIds.filter(Pe=>Pe!==G)}),children:s.jsx(Kt,{className:"h-3 w-3"})})]},G):null})})]})]}),s.jsxs(Tr,{children:[s.jsx(se,{variant:"outline",onClick:()=>i(!1),children:"Cancel"}),s.jsx(se,{onClick:Le,children:"Create Client"})]})]})}),s.jsx(Er,{open:o,onOpenChange:l,children:s.jsxs(pr,{className:"max-w-md",children:[s.jsx(mr,{children:s.jsxs(gr,{children:["Send Message to ",n==null?void 0:n.firstName," ",n==null?void 0:n.lastName]})}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(de,{htmlFor:"jobSelect",children:"Select Job"}),s.jsxs(st,{value:x,onValueChange:m,children:[s.jsx(nt,{children:s.jsx(at,{placeholder:"Choose a job"})}),s.jsx(rt,{children:n&&oe(n).map(G=>s.jsx(xe,{value:G.id,children:G.jobName},G.id))})]})]}),s.jsxs("div",{children:[s.jsx(de,{htmlFor:"message",children:"Message"}),s.jsx(_n,{id:"message",value:y,onChange:G=>g(G.target.value),placeholder:"Type your message here...",rows:4})]})]}),s.jsxs(Tr,{children:[s.jsx(se,{variant:"outline",onClick:()=>l(!1),children:"Cancel"}),s.jsx(se,{onClick:Ne,children:"Send Message"})]})]})}),s.jsx(Er,{open:c,onOpenChange:d,children:s.jsxs(pr,{className:"max-w-md",children:[s.jsx(mr,{children:s.jsxs(gr,{children:["Upload Photo for ",n==null?void 0:n.firstName," ",n==null?void 0:n.lastName]})}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(de,{htmlFor:"photoJobSelect",children:"Select Job"}),s.jsxs(st,{value:x,onValueChange:m,children:[s.jsx(nt,{children:s.jsx(at,{placeholder:"Choose a job"})}),s.jsx(rt,{children:n&&oe(n).map(G=>s.jsx(xe,{value:G.id,children:G.jobName},G.id))})]})]}),s.jsxs("div",{children:[s.jsx(de,{htmlFor:"photoUpload",children:"Select Photo"}),s.jsx($e,{id:"photoUpload",type:"file",accept:"image/*",onChange:G=>{const ge=G.target.files[0];ge&&Be(ge)}})]})]}),s.jsx(Tr,{children:s.jsx(se,{variant:"outline",onClick:()=>d(!1),children:"Cancel"})})]})}),s.jsx(Er,{open:u,onOpenChange:h,children:s.jsxs(pr,{className:"max-w-md",children:[s.jsx(mr,{children:s.jsx(gr,{children:"Portal Settings"})}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(de,{children:"Photo Sharing"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Allow clients to view progress photos"})]}),s.jsx(se,{variant:f.allowPhotoSharing?"default":"outline",size:"sm",onClick:()=>{const G={...f,allowPhotoSharing:!f.allowPhotoSharing};p(G),Mx(G)},children:f.allowPhotoSharing?"Enabled":"Disabled"})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(de,{children:"Messaging"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Allow clients to send messages"})]}),s.jsx(se,{variant:f.allowMessaging?"default":"outline",size:"sm",onClick:()=>{const G={...f,allowMessaging:!f.allowMessaging};p(G),Mx(G)},children:f.allowMessaging?"Enabled":"Disabled"})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(de,{children:"Scope Review"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Allow clients to review scope of work"})]}),s.jsx(se,{variant:f.allowScopeReview?"default":"outline",size:"sm",onClick:()=>{const G={...f,allowScopeReview:!f.allowScopeReview};p(G),Mx(G)},children:f.allowScopeReview?"Enabled":"Disabled"})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(de,{children:"Financial View"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Allow clients to view invoice status"})]}),s.jsx(se,{variant:f.allowFinancialView?"default":"outline",size:"sm",onClick:()=>{const G={...f,allowFinancialView:!f.allowFinancialView};p(G),Mx(G)},children:f.allowFinancialView?"Enabled":"Disabled"})]})]}),s.jsx(Tr,{children:s.jsx(se,{onClick:()=>h(!1),children:"Close"})})]})}),s.jsx(Er,{open:E,onOpenChange:A,children:s.jsxs(pr,{className:"max-w-md",children:[s.jsx(mr,{children:s.jsxs(gr,{children:[$.id?"Edit":"Add"," General Contractor"]})}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(de,{htmlFor:"gcName",children:"Name *"}),s.jsx($e,{id:"gcName",value:$.name,onChange:G=>I({...$,name:G.target.value}),placeholder:"Enter GC name"})]}),s.jsxs("div",{children:[s.jsx(de,{htmlFor:"gcCompany",children:"Company"}),s.jsx($e,{id:"gcCompany",value:$.company,onChange:G=>I({...$,company:G.target.value}),placeholder:"Enter company name"})]}),s.jsxs("div",{children:[s.jsx(de,{htmlFor:"gcEmail",children:"Email"}),s.jsx($e,{id:"gcEmail",type:"email",value:$.email,onChange:G=>I({...$,email:G.target.value}),placeholder:"Enter email"})]}),s.jsxs("div",{children:[s.jsx(de,{htmlFor:"gcPhone",children:"Phone"}),s.jsx($e,{id:"gcPhone",value:$.phone,onChange:G=>I({...$,phone:G.target.value}),placeholder:"Enter phone"})]}),s.jsxs("div",{children:[s.jsx(de,{htmlFor:"gcAddress",children:"Address"}),s.jsx(_n,{id:"gcAddress",value:$.address,onChange:G=>I({...$,address:G.target.value}),placeholder:"Enter address",rows:2})]})]}),s.jsxs(Tr,{children:[s.jsx(se,{variant:"outline",onClick:()=>{A(!1),I({name:"",company:"",email:"",phone:"",address:""})},children:"Cancel"}),s.jsxs(se,{onClick:$.id?()=>{ue($.id,$),A(!1),I({name:"",company:"",email:"",phone:"",address:""})}:_e,children:[$.id?"Update":"Create"," General Contractor"]})]})]})}),s.jsx(Er,{open:O,onOpenChange:W,children:s.jsxs(pr,{className:"max-w-md",children:[s.jsx(mr,{children:s.jsxs(gr,{children:[U.id?"Edit":"Add"," Superintendent"]})}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(de,{htmlFor:"superName",children:"Name *"}),s.jsx($e,{id:"superName",value:U.name,onChange:G=>q({...U,name:G.target.value}),placeholder:"Enter superintendent name"})]}),s.jsxs("div",{children:[s.jsx(de,{htmlFor:"superGC",children:"General Contractor *"}),s.jsxs(st,{value:U.gcId,onValueChange:G=>q({...U,gcId:G}),children:[s.jsx(nt,{children:s.jsx(at,{placeholder:"Select General Contractor"})}),s.jsx(rt,{children:P.map(G=>s.jsx(xe,{value:G.id,children:G.name},G.id))})]})]}),s.jsxs("div",{children:[s.jsx(de,{htmlFor:"superEmail",children:"Email"}),s.jsx($e,{id:"superEmail",type:"email",value:U.email,onChange:G=>q({...U,email:G.target.value}),placeholder:"Enter email"})]}),s.jsxs("div",{children:[s.jsx(de,{htmlFor:"superPhone",children:"Phone"}),s.jsx($e,{id:"superPhone",value:U.phone,onChange:G=>q({...U,phone:G.target.value}),placeholder:"Enter phone"})]})]}),s.jsxs(Tr,{children:[s.jsx(se,{variant:"outline",onClick:()=>{W(!1),q({name:"",gcId:"",email:"",phone:""})},children:"Cancel"}),s.jsxs(se,{onClick:U.id?()=>{ve(U.id,U),W(!1),q({name:"",gcId:"",email:"",phone:""})}:gt,children:[U.id?"Update":"Create"," Superintendent"]})]})]})}),s.jsx(Er,{open:z,onOpenChange:F,children:s.jsxs(pr,{className:"max-w-md",children:[s.jsx(mr,{children:s.jsxs(gr,{children:[X.id?"Edit":"Add"," Project Manager"]})}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(de,{htmlFor:"pmName",children:"Name *"}),s.jsx($e,{id:"pmName",value:X.name,onChange:G=>te({...X,name:G.target.value}),placeholder:"Enter project manager name"})]}),s.jsxs("div",{children:[s.jsx(de,{htmlFor:"pmGC",children:"General Contractor *"}),s.jsxs(st,{value:X.gcId,onValueChange:G=>te({...X,gcId:G}),children:[s.jsx(nt,{children:s.jsx(at,{placeholder:"Select General Contractor"})}),s.jsx(rt,{children:P.map(G=>s.jsx(xe,{value:G.id,children:G.name},G.id))})]})]}),s.jsxs("div",{children:[s.jsx(de,{htmlFor:"pmEmail",children:"Email"}),s.jsx($e,{id:"pmEmail",type:"email",value:X.email,onChange:G=>te({...X,email:G.target.value}),placeholder:"Enter email"})]}),s.jsxs("div",{children:[s.jsx(de,{htmlFor:"pmPhone",children:"Phone"}),s.jsx($e,{id:"pmPhone",value:X.phone,onChange:G=>te({...X,phone:G.target.value}),placeholder:"Enter phone"})]})]}),s.jsxs(Tr,{children:[s.jsx(se,{variant:"outline",onClick:()=>{F(!1),te({name:"",gcId:"",email:"",phone:""})},children:"Cancel"}),s.jsxs(se,{onClick:X.id?()=>{De(X.id,X),F(!1),te({name:"",gcId:"",email:"",phone:""})}:Se,children:[X.id?"Update":"Create"," Project Manager"]})]})]})})]})},Qje=({children:e})=>{const[t,n]=j.useState(!1),[r,a]=j.useState(!0),[i,o]=j.useState(!0),[l,c]=j.useState(!1),[d,u]=j.useState({email:"",password:"",firstName:"",lastName:""});j.useEffect(()=>{localStorage.getItem("userData")&&n(!0),a(!1)},[]);const h=async p=>{p.preventDefault(),a(!0);try{if(i){if(!d.email||!d.password)throw new Error("Please enter both email and password");const y={id:"demo-user",email:d.email,firstName:d.firstName||"Demo",lastName:d.lastName||"User"};localStorage.setItem("userData",JSON.stringify(y)),n(!0),pe({title:"Welcome back! 👋",description:"You've been logged in successfully."})}else{if(!d.email||!d.password||!d.firstName||!d.lastName)throw new Error("Please fill in all required fields");if(d.password.length<6)throw new Error("Password must be at least 6 characters long");const y={id:"demo-user",email:d.email,firstName:d.firstName,lastName:d.lastName};localStorage.setItem("userData",JSON.stringify(y)),n(!0),pe({title:"Account created! 🎉",description:"Your account has been created and you're now logged in."})}}catch(y){pe({title:"Authentication Failed",description:y.message,variant:"destructive"})}finally{a(!1)}},f=()=>{localStorage.removeItem("userData"),n(!1),u({email:"",password:"",firstName:"",lastName:""}),pe({title:"Logged out",description:"You've been logged out successfully."})};return r?s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx(Qs,{className:"h-12 w-12 mx-auto text-brandPrimary animate-pulse mb-4"}),s.jsx("p",{className:"text-gray-600",children:"Loading..."})]})}):t?Q.cloneElement(e,{onLogout:f}):s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 flex items-center justify-center p-4",children:s.jsx(Pt.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"w-full max-w-md",children:s.jsxs(Te,{className:"shadow-2xl border-0 bg-white/90 backdrop-blur-sm",children:[s.jsx(Xe,{className:"bg-gradient-to-r from-brandPrimary to-brandSecondary text-white rounded-t-lg",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Qs,{className:"h-8 w-8"}),s.jsxs("div",{children:[s.jsx(Qe,{className:"text-2xl font-bold",children:"HSH Drywall"}),s.jsx("p",{className:"text-white/80 text-sm",children:"Management System"})]})]})}),s.jsxs(Me,{className:"p-8",children:[s.jsx("div",{className:"mb-6",children:s.jsxs("div",{className:"flex rounded-lg bg-gray-100 p-1",children:[s.jsxs("button",{onClick:()=>o(!0),className:`flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors ${i?"bg-white text-brandPrimary shadow-sm":"text-gray-600 hover:text-gray-800"}`,children:[s.jsx(zV,{className:"h-4 w-4 inline mr-2"}),"Login"]}),s.jsxs("button",{onClick:()=>o(!1),className:`flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors ${i?"text-gray-600 hover:text-gray-800":"bg-white text-brandPrimary shadow-sm"}`,children:[s.jsx(GV,{className:"h-4 w-4 inline mr-2"}),"Register"]})]})}),s.jsxs("form",{onSubmit:h,className:"space-y-4",children:[!i&&s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"firstName",children:"First Name"}),s.jsx($e,{id:"firstName",type:"text",value:d.firstName,onChange:p=>u(y=>({...y,firstName:p.target.value})),required:!i,placeholder:"John"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"lastName",children:"Last Name"}),s.jsx($e,{id:"lastName",type:"text",value:d.lastName,onChange:p=>u(y=>({...y,lastName:p.target.value})),required:!i,placeholder:"Doe"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"email",children:"Email"}),s.jsx($e,{id:"email",type:"email",value:d.email,onChange:p=>u(y=>({...y,email:p.target.value})),required:!0,placeholder:"john@example.com"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(de,{htmlFor:"password",children:"Password"}),s.jsxs("div",{className:"relative",children:[s.jsx($e,{id:"password",type:l?"text":"password",value:d.password,onChange:p=>u(y=>({...y,password:p.target.value})),required:!0,placeholder:"••••••••",className:"pr-10"}),s.jsx("button",{type:"button",onClick:()=>c(!l),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:l?s.jsx(EM,{className:"h-4 w-4"}):s.jsx(Jg,{className:"h-4 w-4"})})]}),!i&&s.jsx("p",{className:"text-xs text-gray-500",children:"Password must be at least 6 characters long"})]}),s.jsx(se,{type:"submit",disabled:r,className:"w-full bg-gradient-to-r from-brandPrimary to-brandSecondary hover:from-brandPrimary-600 hover:to-brandSecondary-600 text-white font-semibold py-3",children:r?"Please wait...":i?"Login":"Create Account"})]})]})]})})})};function Zje({onClose:e}){const[t,n]=j.useState(!1),{toast:r}=S1(),a=async()=>{n(!0);try{gn.save("hsh_drywall_jobs_v2",Yj.generateJobs(),"jobs"),gn.save("hsh_drywall_employees_v2",Yj.generateEmployees(),"employees"),r({title:"Test Data Loaded! 🎯",description:"Sample jobs and employees have been loaded for testing."}),window.location.reload()}catch(d){r({title:"Error Loading Test Data",description:d.message,variant:"destructive"})}finally{n(!1)}},i=()=>{window.confirm("Are you sure you want to clear ALL data? This cannot be undone.")&&(gn.clearAll(),r({title:"All Data Cleared! 🗑️",description:"All stored data has been removed.",variant:"destructive"}),window.location.reload())},o=()=>{const d=gn.export(),u=new Blob([JSON.stringify(d,null,2)],{type:"application/json"}),h=URL.createObjectURL(u),f=document.createElement("a");f.href=h,f.download=`hsh-drywall-backup-${new Date().toISOString().split("T")[0]}.json`,f.click(),URL.revokeObjectURL(h),r({title:"Data Exported! 📁",description:"Your data has been downloaded as a backup file."})},l=d=>{const u=d.target.files[0];if(!u)return;const h=new FileReader;h.onload=f=>{try{const p=JSON.parse(f.target.result);if(gn.import(p))r({title:"Data Imported! ✅",description:"Your backup data has been restored."}),window.location.reload();else throw new Error("Import failed")}catch{r({title:"Import Failed",description:"The backup file appears to be invalid.",variant:"destructive"})}},h.readAsText(u)},c=()=>{const d=gn.getUsage(),u=Object.values(d).reduce((p,y)=>p+y.size,0),h=Object.values(d).reduce((p,y)=>p+y.itemCount,0),f=`Storage Usage:
${Object.entries(d).map(([p,y])=>`${p}: ${y.itemCount} items (${(y.size/1024).toFixed(1)} KB)`).join(`
`)}

Total: ${h} items (${(u/1024).toFixed(1)} KB)`;alert(f)};return s.jsx(Er,{open:!0,onOpenChange:e,children:s.jsxs(pr,{className:"max-w-md",children:[s.jsx(mr,{children:s.jsxs(gr,{className:"flex items-center gap-2",children:[s.jsx(kM,{className:"h-5 w-5"}),"Data Management"]})}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs(se,{onClick:a,disabled:t,className:"w-full",children:[s.jsx(VV,{className:"h-4 w-4 mr-2"}),t?"Loading...":"Load Test Data"]}),s.jsxs(se,{onClick:i,variant:"destructive",className:"w-full",children:[s.jsx(Kt,{className:"h-4 w-4 mr-2"}),"Clear All Data"]}),s.jsxs(se,{onClick:o,variant:"outline",className:"w-full",children:[s.jsx(Ri,{className:"h-4 w-4 mr-2"}),"Export Data"]}),s.jsxs("div",{children:[s.jsx("input",{type:"file",accept:".json",onChange:l,style:{display:"none"},id:"import-file"}),s.jsx("label",{htmlFor:"import-file",children:s.jsx(se,{variant:"outline",className:"w-full",asChild:!0,children:s.jsxs("span",{children:[s.jsx(Gl,{className:"h-4 w-4 mr-2"}),"Import Data"]})})})]}),s.jsxs(se,{onClick:c,variant:"outline",className:"w-full",children:[s.jsx(tn,{className:"h-4 w-4 mr-2"}),"View Storage Info"]}),s.jsxs(se,{onClick:e,variant:"ghost",className:"w-full",children:[s.jsx(rn,{className:"h-4 w-4 mr-2"}),"Close"]})]})]})})}function eNe({onLogout:e}){const[t,n]=j.useState("jobs"),[r,a]=j.useState("jobs"),[i,o]=j.useState(!1),[l,c]=j.useState(null),[d,u]=j.useState(null),[h,f]=j.useState(null),[p,y]=j.useState(!1),[g,x]=j.useState(!1),[m,v]=j.useState(""),[b,C]=j.useState(null),{jobs:S,loading:P,jobsUpdateTimestamp:D,createJob:N,updateJob:M,deleteJob:L,createScope:T,updateScope:E,deleteScope:A,createTakeoffPhase:O,deleteTakeoffPhase:W,saveTakeoffEntries:z,updateTakeoffEntry:F,deleteTakeoffEntry:V,updatePhaseMaterials:B,addDefaultScopesToJob:Y,createChecklist:$,updateChecklist:I,deleteChecklist:U,completeChecklist:q,saveChecklistTemplate:X,getChecklistTemplates:te,deleteChecklistTemplate:ae,uploadDocument:le,deleteDocument:me,updateDocument:Le,getLogsForJob:ie,addLogEntry:Ne,updateLogEntry:Be,deleteLogEntry:Ue,addAttachmentToLog:_e,removeAttachmentFromLog:ue,employees:wt,addEmployee:gt,updateEmployee:ve,deleteEmployee:we,addToolDeduction:Se,removeToolDeduction:De,bankHours:Ie,useBankedHours:oe,updateEmployeeToolDeductions:Ee,addEmployeeDocument:G,removeEmployeeDocument:ge}=rc(),Pe=S.find(Ye=>Ye.id===l)||null;j.useEffect(()=>{var Ye,dt;if(console.log("=== Jobs array changed ==="),console.log("Jobs array:",S),console.log("Jobs array length:",S.length),console.log("SelectedJobId:",l),console.log("Jobs update timestamp:",D),l){const sn=S.find(Xr=>Xr.id===l);console.log("Found updated job:",sn),console.log("Updated job estimate sqft:",(dt=(Ye=sn==null?void 0:sn.financials)==null?void 0:Ye.estimate)==null?void 0:dt.sqft),console.log("Job data updated, selectedJob will be derived automatically")}},[S,l,D]),j.useCallback(Ye=>{Ye==="new-job"?(a("create-job"),c(null),v("")):(c(Ye),a("job-details"),v(Ye))},[]);const Ve=j.useCallback(Ye=>{l===Ye&&(c(null),v(""),a("jobs"))},[l]);j.useEffect(()=>{v(l||"")},[l]);const pt=j.useCallback(()=>{a("jobs")},[]),et=j.useCallback((Ye,dt)=>{console.log("=== handleJobUpdated called ==="),console.log("JobId:",Ye),console.log("Updates:",dt),l===Ye&&console.log("Job updated, but not forcing refresh to avoid input conflicts"),dt.status&&r==="job-details"&&(a("jobs"),c(null),v("")),console.log("=== handleJobUpdated finished ===")},[r,l]),Zt=j.useCallback(()=>{x(!1)},[]),Ze=j.useCallback((Ye,dt)=>{d&&d.id===Ye&&u(sn=>({...sn,...dt}))},[d]),jt=j.useCallback((Ye,dt)=>{d&&d.id===dt&&(u(null),a("job-details"))},[d]),ct=j.useCallback(()=>{a("job-details")},[]),yt=j.useCallback((Ye,dt)=>{l===Ye&&a("job-details")},[l]),Yt=j.useCallback(()=>{a("job-details")},[]),At=j.useCallback(()=>{},[]),On=j.useCallback(()=>{},[]),mn=j.useCallback(()=>{},[]),Bt=j.useCallback(Ye=>{Y(Ye)},[Y]),Hn=()=>{const Ye=localStorage.getItem("userData");return Ye?JSON.parse(Ye):null},It=j.useCallback(Ye=>{C(Ye),n("schedule")},[]),Mt=()=>{var Ye;return s.jsx(Pt.header,{className:"gradient-bg text-white p-6 shadow-2xl sticky top-0 z-50",initial:{y:-100},animate:{y:0},transition:{type:"spring",stiffness:100},children:s.jsxs("div",{className:"max-w-7xl mx-auto flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[(t!=="jobs"||t==="jobs"&&r!=="jobs")&&s.jsx(se,{variant:"ghost",size:"icon",onClick:()=>{t==="jobs"?r==="scope-details"||r==="create-takeoff"||r==="create-takeoff-phase"||r==="create-scope"||r==="job-financials"?(a("job-details"),u(null),f(null),x(!1)):(a("jobs"),c(null),u(null),f(null),x(!1),v("")):(n("jobs"),a("jobs"),c(null),u(null),f(null),x(!1),v(""))},className:"text-white hover:bg-white/20",children:s.jsx(zj,{className:"h-5 w-5"})}),s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"bg-white p-2 rounded-md",children:s.jsx("img",{src:"/Logo.png",alt:"HSH Drywall",className:"h-16"})})}),t==="jobs"&&r!=="jobs"&&s.jsx("div",{className:"flex-shrink-0",children:s.jsxs(se,{onClick:()=>{a("jobs"),c(null),u(null),f(null),x(!1),v("")},variant:"secondary",className:"bg-white text-brandPrimary hover:bg-brandPrimary hover:text-white",children:[s.jsx(Qs,{className:"h-4 w-4 mr-2"}),"Jobs Dashboard"]})})]}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsxs(se,{onClick:()=>n("time-clock"),variant:t==="time-clock"?"secondary":"ghost",className:`w-28 h-12 text-xs leading-tight ${t==="time-clock"?"bg-white text-brandPrimary":"text-white hover:bg-white/20"}`,children:[s.jsx(kn,{className:"h-4 w-4 mr-1 mb-1"}),s.jsxs("div",{className:"text-center",children:["Time",s.jsx("br",{}),"Clock"]})]}),s.jsxs(se,{onClick:()=>n("payroll"),variant:t==="payroll"?"secondary":"ghost",className:`w-28 h-12 text-xs leading-tight ${t==="payroll"?"bg-white text-brandPrimary":"text-white hover:bg-white/20"}`,children:[s.jsx(_r,{className:"h-4 w-4 mr-1 mb-1"}),s.jsx("div",{className:"text-center",children:"Payroll"})]}),s.jsxs(se,{onClick:()=>n("schedule"),variant:t==="schedule"?"secondary":"ghost",className:`w-28 h-12 text-xs leading-tight ${t==="schedule"?"bg-white text-brandPrimary":"text-white hover:bg-white/20"}`,children:[s.jsx(An,{className:"h-4 w-4 mr-1 mb-1"}),s.jsx("div",{className:"text-center",children:"Schedule"})]}),s.jsxs(se,{onClick:()=>n("analytics"),variant:t==="analytics"?"secondary":"ghost",className:`w-28 h-12 text-xs leading-tight ${t==="analytics"?"bg-white text-brandPrimary":"text-white hover:bg-white/20"}`,children:[s.jsx(Jf,{className:"h-4 w-4 mr-1 mb-1"}),s.jsx("div",{className:"text-center",children:"Analytics"})]}),s.jsxs(st,{onValueChange:dt=>n(dt),children:[s.jsx(nt,{className:"w-28 h-12 bg-white/10 border-white/30 text-white hover:bg-white/20 text-xs",children:s.jsx(at,{placeholder:"More..."})}),s.jsxs(rt,{children:[s.jsx(xe,{value:"invoice-processing",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(tn,{className:"h-4 w-4"}),s.jsx("span",{children:"Invoice Processing"})]})}),s.jsx(xe,{value:"material-pricing",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(_r,{className:"h-4 w-4"}),s.jsx("span",{children:"Material Pricing"})]})}),s.jsx(xe,{value:"inventory",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(MM,{className:"h-4 w-4"}),s.jsx("span",{children:"Inventory"})]})}),s.jsx(xe,{value:"cash-flow",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Ei,{className:"h-4 w-4"}),s.jsx("span",{children:"Cash Flow"})]})}),s.jsx(xe,{value:"supplier-management",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(hg,{className:"h-4 w-4"}),s.jsx("span",{children:"Supplier Management"})]})}),s.jsx(xe,{value:"client-portal",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx($V,{className:"h-4 w-4"}),s.jsx("span",{children:"Client Portal"})]})})]})]}),s.jsx(se,{onClick:()=>o(!0),variant:"ghost",size:"icon",className:"text-white hover:bg-white/20",children:s.jsx(kM,{className:"h-5 w-5"})})]}),t==="jobs"&&r==="jobs"&&s.jsxs(se,{onClick:()=>a("create-job"),className:"bg-white text-brandPrimary hover:bg-brandPrimary hover:text-white font-semibold transition-colors",children:[s.jsx(un,{className:"h-4 w-4 mr-2"}),"New Job"]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsxs("span",{className:"text-white/80 text-sm",children:["Welcome, ",((Ye=Hn())==null?void 0:Ye.firstName)||"User"]}),s.jsxs(se,{onClick:e,variant:"ghost",size:"sm",className:"text-white hover:bg-white/20",children:[s.jsx(WV,{className:"h-4 w-4 mr-2"}),"Logout"]})]})]})]})})},nn=()=>{if(P)return s.jsxs("div",{className:"text-center py-16",children:[s.jsx(Qs,{className:"h-16 w-16 mx-auto text-gray-400 mb-4 animate-pulse"}),s.jsx("p",{className:"text-gray-600 font-medium",children:"Loading..."})]});if(t==="time-clock")return s.jsx(Ene,{employees:wt});if(t==="payroll")return s.jsx(Lne,{employees:wt,addEmployee:gt,updateEmployee:ve,deleteEmployee:we,addToolDeduction:Se,removeToolDeduction:De,bankHours:Ie,useBankedHours:oe,updateEmployeeToolDeductions:Ee,addEmployeeDocument:G,removeEmployeeDocument:ge});if(t==="schedule")return s.jsx(Cje,{employees:wt,initialJobId:b});if(t==="analytics")return s.jsx(Bje,{jobs:S,employees:wt});if(t==="invoice-processing")return s.jsx(Hje,{jobs:S,onJobSelect:Ye=>{c(Ye),n("jobs"),a("job-details"),v(Ye)}});if(t==="material-pricing")return s.jsx(qje,{});if(t==="inventory")return s.jsx(Uje,{jobs:S});if(t==="cash-flow")return s.jsx(Gje,{jobs:S});if(t==="supplier-management")return s.jsx(Kje,{jobs:S});if(t==="client-portal")return s.jsx(Xje,{});switch(r){case"jobs":return s.jsx(Kk,{jobs:S,onSelectJob:Ye=>{c(Ye.id),a("job-details"),v(Ye.id)},onDeleteJob:Ye=>L(Ye,Ve),onUpdateJobStatus:(Ye,dt)=>M(Ye,dt,et)});case"create-job":return s.jsx(Bee,{onSubmit:Ye=>N(Ye,pt),onCancel:()=>a("jobs")});case"job-details":return s.jsx(mee,{job:Pe,onUpdateJob:(Ye,dt)=>M(Ye,dt,et),onSelectScope:Ye=>{u(Ye),a("scope-details")},onAddDefaultScopes:()=>Bt(Pe.id),onCreateTakeoffPhase:()=>a("create-takeoff-phase"),onAddTakeoffEntry:Ye=>{f(Ye),a("create-takeoff")},onDeleteScope:Ye=>A(Pe.id,Ye,jt),onOpenCreateScopeModal:()=>x(!0),onUpdateTakeoffEntry:(Ye,dt)=>F(Pe.id,Ye,dt,At),onDeleteTakeoffEntry:(Ye,dt)=>V(Ye,dt,On),onUpdatePhaseMaterials:(Ye,dt)=>B(Ye,dt,mn),onShowTakeoffReport:()=>y(!0),onShowFinancials:()=>a("job-financials"),onDeleteJob:Ye=>L(Ye,Ve),onDeleteTakeoffPhase:(Ye,dt)=>W(Ye,dt,yt),onCreateChecklist:(Ye,dt,sn)=>$(Ye,dt,sn),onUpdateChecklist:(Ye,dt,sn,Xr)=>I(Ye,dt,sn,Xr),onDeleteChecklist:(Ye,dt,sn)=>U(Ye,dt,sn),onCompleteChecklist:(Ye,dt,sn)=>q(Ye,dt,sn),onSaveChecklistTemplate:(Ye,dt)=>X(Ye,dt),onGetChecklistTemplates:()=>te(),onDeleteChecklistTemplate:(Ye,dt)=>ae(Ye,dt),employees:wt,onGoToScheduleForJob:It,onUploadDocument:(Ye,dt)=>le(Ye,dt),onDeleteDocument:(Ye,dt)=>me(Ye,dt),onUpdateDocument:(Ye,dt,sn)=>Le(Ye,dt,sn),onGetLogsForJob:Ye=>ie(Ye),onAddLogEntry:(Ye,dt)=>Ne(Ye,dt),onUpdateLogEntry:(Ye,dt,sn)=>Be(Ye,dt,sn),onDeleteLogEntry:(Ye,dt)=>Ue(Ye,dt),onAddAttachmentToLog:(Ye,dt,sn)=>_e(Ye,dt,sn),onRemoveAttachmentFromLog:(Ye,dt,sn)=>ue(Ye,dt,sn)});case"job-financials":return s.jsx(See,{job:Pe,onUpdateJob:(Ye,dt)=>M(Ye,dt,et)});case"scope-details":return s.jsx(Cee,{scope:d,jobId:Pe==null?void 0:Pe.id,onUpdateScope:(Ye,dt)=>E(Ye,dt,Ze),onDeleteScope:(Ye,dt)=>A(Ye,dt,jt)});case"create-takeoff-phase":return s.jsx(qee,{jobId:Pe.id,onSubmit:(Ye,dt)=>O(Ye,dt,ct),onCancel:()=>a("job-details")});case"create-takeoff":return s.jsx(Hee,{jobId:Pe.id,phaseId:h,onSubmit:(Ye,dt,sn,Xr,Rt)=>z(Ye,dt,sn,Xr,Rt,Yt),onCancel:()=>a("job-details")});default:return s.jsx(Kk,{jobs:S,onSelectJob:c,onDeleteJob:Ye=>L(Ye,Ve),onUpdateJobStatus:(Ye,dt)=>M(Ye,dt,et)})}};return s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50",children:[Mt(),s.jsx("main",{className:"max-w-7xl mx-auto p-6",children:s.jsx(Es,{mode:"wait",children:s.jsx(Pt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:nn()},`${t}-${r}`)})}),Pe&&p&&s.jsx(Pne,{job:Pe,isOpen:p,onClose:()=>y(!1)}),g&&Pe&&s.jsx(zee,{jobId:Pe.id,onSubmit:(Ye,dt)=>T(Ye,dt,Zt),onCancel:()=>x(!1)}),i&&s.jsx(Zje,{onClose:()=>o(!1)}),s.jsx(jK,{})]})}function tNe(){return s.jsx(Qje,{children:s.jsx(eNe,{})})}L2.createRoot(document.getElementById("root")).render(s.jsx(Q.StrictMode,{children:s.jsx(tNe,{})}));export{Hc as _,pa as c,qa as g};
